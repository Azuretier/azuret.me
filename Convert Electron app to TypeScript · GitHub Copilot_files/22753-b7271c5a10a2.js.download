"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[22753],{295:(e,t,n)=>{n.d(t,{h:()=>d});var i=n(16522),a=n(97665),s=n(94747),r=n(99519),l=n(80770),o=n(99993);function d(){let e,t,n,d=(0,i.c)(7),c=(0,a.jE)(),u=(0,r.EY)();return d[0]!==u?(e=async e=>await u.deleteLoop(e),d[0]=u,d[1]=e):e=d[1],d[2]!==c?(t=(e,t)=>{e.success&&(c.removeQueries({queryKey:[o.M1,t]}),c.invalidateQueries({queryKey:[l.n]}))},d[2]=c,d[3]=t):t=d[3],d[4]!==e||d[5]!==t?(n={mutationFn:e,onSuccess:t},d[4]=e,d[5]=t,d[6]=n):n=d[6],(0,s.n)(n)}},1747:(e,t,n)=>{n.d(t,{BH:()=>A,xx:()=>F,tZ:()=>M,wI:()=>$});var i=n(74848),a=n(16522),s=n(2635),r=n(35247),l=n(42312),o=n(33535),d=n(6551),c=n(40104),u=n(50899),m=n(96540),h=n(93380),f=n(79064),p=n(7812),g=n(33592),y=n(25641),x=n(82075),v=n(46996);let b=["thread-scoped-file","draft-issue","draft-update-issue"],j=e=>!!e.isUserEdited,w=(e,t)=>e.size===t.size&&Array.from(e).every(([e,n])=>(0,v.A)(t.get(e),n)),C=(e,t)=>!w(new Map(e.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e])),new Map(t.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e]))),_=(e,t)=>!w(new Map(Array.from(e).filter(([,e])=>j(e))),new Map(Array.from(t).filter(([,e])=>j(e))));function N(e){return[e.id,e]}function S(e){return null!=e}function I(e){return[(0,y.Vb)(e),e]}function k(e){return null!=e}function L(e){return(0,p.PO)(e)}let D=(0,m.createContext)(void 0),T=new Map,E=[];function A(e){let t,n,c,v,w,A,F,M,$,B,V,U,q,H,G,K=(0,a.c)(55),{children:W}=e,z=(0,o.AI)(!1),Q=(0,o.AI)(!1),Z=(0,l.U)(),J=(0,m.useRef)(null),[Y,X]=(0,m.useState)(T),[ee,et]=(0,m.useState)(E),[en,ei]=(0,m.useState)(E),[ea,es]=(0,m.useState)(void 0),[er,el,eo]=(0,h.B)(!1),ed=(0,d.S)((0,s.pn)(O)),ec=(0,s.pn)(R);K[0]!==z||K[1]!==ed||K[2]!==ec?(t=()=>{ed&&ed!==ec&&(X(T),et(E),es(void 0),null===ec&&z.setValue(!1))},n=[ec,ed,z],K[0]=z,K[1]=ed,K[2]=ec,K[3]=t,K[4]=n):(t=K[3],n=K[4]),(0,m.useEffect)(t,n),K[5]===Symbol.for("react.memo_cache_sentinel")?(c=(e,t)=>{let n=void 0===t||t;et(t=>{if(t.includes(e))return t;let n=(0,p.oy)(e),i=t.findIndex(e=>(0,p.oy)(e)===n),a=[...t];return -1===i?a.push(e):a.splice(i,1,e),a}),es(t=>n||void 0===t||(0,p.oy)(t)===(0,p.oy)(e)?e:t)},K[5]=c):c=K[5];let eu=c;K[6]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{X(t=>{let n;if(!("isStreaming"in e&&e.isStreaming)&&("new-issue"===e.type||"update-issue"===e.type)){let i=(0,p.oy)(e.id);for(let[a,s]of t)if(a!==e.id&&(0,p.oy)(a)===i&&("new-issue"===s.type||"update-issue"===s.type)&&!s.duplicateOf&&(0,p.ov)(e,s)){let i=t.get(e.id);if(i&&(0,p.ov)(e,i)&&"duplicateOf"in i&&i.duplicateOf===a)return t;n=a;break}}let i=new Map(t);return n&&("new-issue"===e.type||"update-issue"===e.type)?i.set(e.id,{...e,duplicateOf:n}):i.set(e.id,e),i})},K[6]=v):v=K[6];let em=v;K[7]!==ee||K[8]!==ea?(w=e=>{let t=ee.indexOf(e);if(-1===t)return;let n=ee.toSpliced(t,1);ea===e&&es(n[t-1]??n[0]),et(n)},K[7]=ee,K[8]=ea,K[9]=w):w=K[9];let eh=(0,u.K)(w);K[10]!==ee||K[11]!==ea?(A=e=>{if(e){let t=ee;for(let n of e){let e=t.indexOf(n);-1!==e&&(t=t.toSpliced(e,1),ea===n&&es(t[e-1]??t[0]))}et(t)}else et(E),es(void 0)},K[10]=ee,K[11]=ea,K[12]=A):A=K[12];let ef=(0,u.K)(A);if(K[13]!==Y){for(let[e,t]of(F=new Map,Y)){let n=(0,p.oy)(e),i=F.get(n)??[];(!("duplicateOf"in t)||!t.duplicateOf)&&("isStreaming"in t&&t.isStreaming||(i.push(t.id),F.set(n,i)))}for(let e of F.values())e.sort((e,t)=>{let n=Y.get(e),i=Y.get(t);return"timestamp"in n&&"timestamp"in i?n.timestamp.valueOf()-i.timestamp.valueOf():0});K[13]=Y,K[14]=F}else F=K[14];let ep=F;K[15]!==eh||K[16]!==ee||K[17]!==ep?(M=e=>{if(e){for(let t of e)if(X(e=>{let n=new Map(e);return n.delete(t)?n:e}),ee.includes(t)){let e=(0,p.oy)(t),n=ep.get(e),i=n?.indexOf(t)??-1,a=n?.[i-1];a?eu(a,!1):eh(t)}}else X(T),et(E),es(void 0)},K[15]=eh,K[16]=ee,K[17]=ep,K[18]=M):M=K[18];let eg=(0,u.K)(M);K[19]!==z.value||K[20]!==ee?($=()=>z.value?ee:E,K[19]=z.value,K[20]=ee,K[21]=$):$=K[21];let ey=(0,u.K)($);K[22]!==Z||K[23]!==z?(B=e=>{z.setValue(!0),queueMicrotask(()=>{Z.current?.focus()}),void 0!==e&&(J.current=e)},K[22]=Z,K[23]=z,K[24]=B):B=K[24];let ex=B;K[25]!==z||K[26]!==Q?(V=()=>{z.setValue(!1),Q.setValue(!1)},K[25]=z,K[26]=Q,K[27]=V):V=K[27];let ev=V;K[28]!==Q?(U=()=>Q.setValue(!0),K[28]=Q,K[29]=U):U=K[29];let eb=U;K[30]!==Q?(q=()=>Q.setValue(!1),K[30]=Q,K[31]=q):q=K[31];let ej=q;K[32]!==eh||K[33]!==ef||K[34]!==ev||K[35]!==ej||K[36]!==Z||K[37]!==eo||K[38]!==el||K[39]!==ey||K[40]!==z||K[41]!==Q||K[42]!==Y||K[43]!==ee||K[44]!==en||K[45]!==ex||K[46]!==eb||K[47]!==eg||K[48]!==ea||K[49]!==er||K[50]!==ep?(H={items:Y,versionedItems:ep,contentPreviewRef:Z,isContentPreviewOpen:z,isResourcePanelOpen:Q,getOpenItems:ey,allOpenItems:ee,openItemsBeforeSubthreadChange:en,selectedItem:ea,updateItem:em,setOpenItemsBeforeSubthreadChange:ei,openItem:eu,closeItem:eh,closeItems:ef,openPreviewPane:ex,closePreviewPane:ev,openResourcePanel:eb,closeResourcePanel:ej,removeItems:eg,showLoadingState:er,enableLoadingState:el,disableLoadingState:eo,returnFocusElementRef:J},K[32]=eh,K[33]=ef,K[34]=ev,K[35]=ej,K[36]=Z,K[37]=eo,K[38]=el,K[39]=ey,K[40]=z,K[41]=Q,K[42]=Y,K[43]=ee,K[44]=en,K[45]=ex,K[46]=eb,K[47]=eg,K[48]=ea,K[49]=er,K[50]=ep,K[51]=H):H=K[51];let ew=H;return!function(e){let t,n,i=(0,a.c)(5),{updateItem:s,openItem:l,openPreviewPane:o}=e;i[0]!==l||i[1]!==o||i[2]!==s?(t=()=>{if(!r.W.copilotRedirectDiffViewToImmersive)return;let e=f.Jt.getCopilotDiffReferences();if(e&&0!==e.length){for(let t of e){let e=(0,p.g)(t);s(e),l(e.id)}o(),f.Jt.removeCopilotDiffReferences()}},n=[s,l,o],i[0]=l,i[1]=o,i[2]=s,i[3]=t,i[4]=n):(t=i[3],n=i[4]),(0,m.useEffect)(t,n)}(ew),P(ew),!function(e){let t,n,i,l=(0,a.c)(10),{items:o,removeItems:d,updateItem:c}=e,{currentReferences:u,messages:h,selectedThreadID:f}=(0,s.Pk)(),v=(0,g.b)(),w=(0,m.useRef)(o),D=(0,m.useRef)(u);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.A)("sessionStorage"),l[0]=t):t=l[0];let T=t;l[1]!==u||l[2]!==o||l[3]!==v||l[4]!==h.length||l[5]!==d||l[6]!==f||l[7]!==c?(n=()=>{let e=_(w.current,o);w.current=o;let t=C(D.current,u);if(D.current=u,e){let e=new Map(Array.from(o.values()).filter(j).map(L).filter(k).map(I)),t=new Set;for(let n of u)if(b.includes(n.type)){let i=(0,y.Vb)(n);t.add(i);let a=e.get(i);a?C([a],[n])&&v.addReference(a,"content-preview"):v.removeReference(n)}for(let[n,i]of e)t.has(n)||v.addReference(i,"content-preview")}else if(t){let e=new Map(u.map(e=>(0,p.oR)({ref:e,messageIndex:h.length})).filter(S).map(N)),t=new Set;for(let[n,i]of o)if(j(i)){t.add(n);let a=e.get(n);null!=a?_(new Map([[a.id,a]]),new Map([[i.id,i]]))&&c(a):(d([n]),r.W.copilotPersistEditedDraftIssues&&T.removeItem(`edited-${f}-${n}`))}for(let[n,i]of e)t.has(n)||c(i)}},i=[o,v,u,h.length,d,c,T,f],l[1]=u,l[2]=o,l[3]=v,l[4]=h.length,l[5]=d,l[6]=f,l[7]=c,l[8]=n,l[9]=i):(n=l[8],i=l[9]),(0,m.useEffect)(n,i)}(ew),K[52]!==W||K[53]!==ew?(G=(0,i.jsx)(D,{value:ew,children:W}),K[52]=W,K[53]=ew,K[54]=G):G=K[54],G}function R(e){return e.selectedThreadID}function O(e){return e.selectedThreadID}let P=e=>{let t,n,i,l=(0,a.c)(8),{updateItem:o}=e,{messagesLoading:d,selectedThreadID:u}=(0,s.Pk)(),h=`edited-${u}`;if(r.W.copilotPersistEditedDraftIssues){let e;l[0]!==h?(e=(0,c.MV)(h),l[0]=h,l[1]=e):e=l[1],t=e}else{let e;l[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],l[2]=e):e=l[2],t=e}let f=t;l[3]!==f||l[4]!==d.state||l[5]!==o?(n=()=>{if(f&&"loaded"===d.state)for(let e of f)o(e)},i=[f,o,d.state],l[3]=f,l[4]=d.state,l[5]=o,l[6]=n,l[7]=i):(n=l[6],i=l[7]),(0,m.useEffect)(n,i)};function F(){let e=(0,m.useContext)(D);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}function M(){let e=(0,m.useContext)(D);if(!e)throw Error("useContentPreviewOpen must be used within ContentPreviewContextProvider");return(0,o.HN)(e.isContentPreviewOpen)}function $(){let e=(0,m.useContext)(D);if(!e)throw Error("useResourcePanelOpen must be used within ContentPreviewContextProvider");return(0,o.HN)(e.isResourcePanelOpen)}try{D.displayName||(D.displayName="ContentPreviewContext")}catch{}try{A.displayName||(A.displayName="ContentPreviewProvider")}catch{}},2265:(e,t,n)=>{n.d(t,{W:()=>d,j:()=>o});var i=n(74848),a=n(68273),s=n(16522),r=n(96540);let l=(0,r.createContext)({}),o=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{children:o}=e,[d,c]=(0,r.useState)(!1);a[0]!==d?(t={isDialogOpen:d,setIsDialogOpen:c},a[0]=d,a[1]=t):t=a[1];let u=t;return a[2]!==o||a[3]!==u?(n=(0,i.jsx)(l,{value:u,children:o}),a[2]=o,a[3]=u,a[4]=n):n=a[4],n}:function({children:e}){let[t,n]=(0,r.useState)(!1),a=(0,r.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,i.jsx)(l,{value:a,children:e})},d=((0,a.GV)(),()=>(0,r.useContext)(l));try{l.displayName||(l.displayName="DialogStateContext")}catch{}try{o.displayName||(o.displayName="DialogStateProvider")}catch{}},3038:(e,t,n)=>{n.d(t,{Av:()=>N,Ji:()=>h,Ls:()=>C,Mk:()=>y,Po:()=>u,S4:()=>b,Yf:()=>S,a1:()=>w,a2:()=>l,dT:()=>_,dv:()=>f,j2:()=>v,oH:()=>o,qK:()=>m,qX:()=>d,u6:()=>c,x_:()=>p});var i=n(13083),a=n(61583),s=n(66358),r=n(36729);function l(e,t,n){return"left"===n?!u(e)&&e.left===t:!u(e)&&(0,i.XU)(e.type)===n&&e.right===t}function o(e,t){return"LEFT"===t?`L${e}`:`R${e}`}function d(e,t,n){let i=`-${u(t)||"number"!=typeof t.left?"empty":t.left}`,a=n?`-${u(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${a}`}function c(e,t){return`${e}-${t}`}function u(e){return void 0===e||!!e&&e===r.Vv}function m(e){return!!e&&e!==r.Vv}function h(e){return"CONTEXT"===e.type}function f(e,t){return t===s.w$.Empty||t===s.w$.Hunk?[e,void 0]:g(e,s.JF[t])}function p(e,t){let n;switch(t){case s.w$.Addition:n=s.JF[s.w$.Addition];break;case s.w$.Deletion:n=s.JF[s.w$.Deletion];break;case s.w$.Context:case s.w$.InjectedContext:n=s.JF[s.w$.Context]}return g(e,n)}function g(e,t){if(!t||!e.startsWith(t))return[e,void 0];let n=e[0];return[e.substring(1),n]}function y(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(r.Vv);for(;n.length<t.length;)n.push(r.Vv)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}}function x(e){return["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type)}function v({line:e,range:t,fileAnchor:n}){let i,{origin:s,pathname:r}=window.location;if(e){let s=x(e)?e.left:e.right;i=t&&s&&t.startLineNumber<=s&&t.endLineNumber>=s?(0,a.j$)(t):function(e,t){let n=x(e),i=n?e.left:e.right,s=n?"left":"right";if(null!==i)return(0,a.j$)({diffAnchor:t,endLineNumber:i,endOrientation:s,startLineNumber:i,startOrientation:s})}(e,n)}else t&&(i=(0,a.j$)(t));if(i)return`${s}${r}#${i}`}function b({hasThreads:e}){return e?"80px":"24px"}let j=["ADDITION","DELETION","CONTEXT"],w=(e,t)=>{if(u(e)||!e)return!1;let n=t.leftLines.concat(t.rightLines),i=n.filter(e=>!u(e)).map(e=>e.key),a=e.key;return n.length>0&&i.includes(a)?n.every(e=>!!u(e)||j.includes(e.type)):!!u(e)||j.includes(e.type)},C=e=>e?e.filter(e=>!u(e)).map(e=>{var t;let[n]=p((t=e.html,new DOMParser().parseFromString(t,"text/html").documentElement.textContent||""),e.type);return n}).join(`
`):"";function _(e){return!!(e.text.length<1&&("CONTEXT"===e.type||"INJECTED_CONTEXT"===e.type)||("DELETION"===e.type||"ADDITION"===e.type)&&1===e.text.length&&["+","-"].includes(e.text.charAt(0)))}let N=(e,t,n,i)=>{let a;if(e)return e;if(!u(t)){let e=(n?t.left:t.right)??0,s=n?"left":"right";a={startOrientation:s,endOrientation:s,startLineNumber:e,endLineNumber:e,diffAnchor:i}}return a};function S(e,t=!1,n=!1){let i;if(n)return"";switch(e){case"ADDITION":i=t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";break;case"DELETION":i=t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";break;case"HUNK":i=t?"var(--diffBlob-hunkNum-bgColor-rest, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";break;case"EMPTY":i=t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";break;default:i="var(--bgColor-default)"}return i}},3252:(e,t,n)=>{function i(e){return[...e.querySelectorAll(".js-blob-code-addition")].map(e=>e.textContent).filter(e=>null!==e)}function a(e){if(!e||e.length>1e5)return null;let t=e.split(/\r?\n/),n=!1,i="",a=[];for(let e=0;e<t.length;e++){let s=t[e];if(void 0!==s)if(n){if(s.match(/^ {0,3}(`{3,}|~{3,})[ \t]*$/))return a;let e=s;if(i.length>0){let t=RegExp(`^ {0,${i.length}}`);e=s.replace(t,"")}a.push(e)}else{let e=s.match(/^( {0,3})(`{3,}|~{3,})suggestion[ \t]*$/);if(e){n=!0,i=e[1]||"";continue}}}return null}n.d(t,{T:()=>a,y:()=>i})},3536:(e,t,n)=>{n.d(t,{I:()=>d,d_:()=>c,wu:()=>o});var i=n(68273),a=n(16522),s=n(96379),r=n(96540),l=n(4095);let o=(0,i.kw)()?function(e,t){let n,i,o=(0,a.c)(5),[d,c]=(0,r.useState)(l.UI);return o[0]!==e?(n=()=>{if(!e)return;let t=!1;return(async()=>{c(l.UI);let n=await (0,s.Sr)(e);if(!t)try{if(n.ok){let e=await n.json();e.loading=!1,e&&c(e)}else c(l.Xx)}catch{c(l.Xx)}})(),function(){t=!0}},o[0]=e,o[1]=n):n=o[1],o[2]!==t||o[3]!==e?(i=[e,t],o[2]=t,o[3]=e,o[4]=i):i=o[4],(0,r.useEffect)(n,i),d}:function(e,t){let[n,i]=(0,r.useState)(l.UI);return(0,r.useEffect)(()=>{if(!e)return;let t=!1;return(async()=>{i(l.UI);let n=await (0,s.Sr)(e);if(!t)try{if(n.ok){let e=await n.json();e.loading=!1,e&&i(e)}else i(l.Xx)}catch{i(l.Xx)}})(),function(){t=!0}},[e,t]),n},d=(0,i.kw)()?function(e){let t,n,i=(0,a.c)(3),[l,o]=(0,r.useState)(void 0);return i[0]!==e?(t=()=>{e&&(async()=>{let t=await (0,s.Sr)(e);try{if(t.ok){let e=await t.json();e&&o(e.data)}}catch{}})()},n=[e],i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,r.useEffect)(t,n),l}:function(e){let[t,n]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{e&&(async()=>{let t=await (0,s.Sr)(e);try{if(t.ok){let e=await t.json();e&&n(e.data)}}catch{}})()},[e]),t};function c(e,t,n,i){let[a,o]=(0,r.useState)(l.UI),d=(0,r.useRef)([...Array(n)]),c=(0,r.useRef)(t);return(0,r.useEffect)(()=>{if(!e)return;let n=!1;async function i(t){let a=await (0,s.Sr)(`${e}?start_entry=${t}`);if(!n)try{if(a.ok){let e=await a.json();if(e){let t=0;for(let n=c.current;n<e.nextIndex;n++)d.current[n]=e.deferredCommits[t],t++;e.deferredCommits=d.current,e.loadMore&&c.current!==e.nextIndex?(c.current=e.nextIndex,e.error=!1,o(e),setTimeout(()=>i(e.nextIndex),0)):(c.current===e.nextIndex?e.error=!0:e.error=!1,o(e))}}else o(e=>({...e,loading:!1,error:!0,extraDiffEntries:d.current}))}catch{o(e=>({...e,loading:!1,deferredCommits:d.current}))}}return i(t),function(){n=!0}},[e,i,t]),(0,r.useEffect)(()=>{d.current=[],c.current=t},[e,i,t]),a}},4095:(e,t,n)=>{n.d(t,{M2:()=>c,NO:()=>u,UI:()=>l,Xx:()=>o,ej:()=>h,xs:()=>m});var i=n(74848),a=n(68273),s=n(16522),r=n(96540);let l={deferredCommits:[],renameHistory:null,loading:!0},o={deferredCommits:[],renameHistory:null,loading:!1},d=(0,r.createContext)(l),c=(0,a.kw)()?function(e){let t,n=(0,s.c)(3),{children:a,deferredData:r}=e;return n[0]!==a||n[1]!==r?(t=(0,i.jsx)(d,{value:r,children:a}),n[0]=a,n[1]=r,n[2]=t):t=n[2],t}:function({children:e,deferredData:t}){return(0,i.jsx)(d,{value:t,children:e})},u=(0,a.kw)()?function(e){let t,n=(0,s.c)(5),i=(0,r.useContext)(d),a=i.error;n[0]!==i.deferredCommits||n[1]!==e?(t=i.deferredCommits?.find(t=>t?.oid===e),n[0]=i.deferredCommits,n[1]=e,n[2]=t):t=n[2];let l=t;if(a&&void 0===l){let t;n[3]!==e?(t={oid:e,statusCheckStatus:void 0},n[3]=e,n[4]=t):t=n[4],l=t}return l}:function(e){let t=(0,r.useContext)(d),n=t.error,i=t.deferredCommits?.find(t=>t?.oid===e);return n&&void 0===i&&(i={oid:e,statusCheckStatus:void 0}),i},m=(0,a.kw)()?function(){return(0,r.useContext)(d).loading}:function(){return(0,r.useContext)(d).loading},h=(0,a.kw)()?function(){return(0,r.useContext)(d).renameHistory}:function(){return(0,r.useContext)(d).renameHistory};try{d.displayName||(d.displayName="DeferredCommitDataContext")}catch{}try{c.displayName||(c.displayName="DeferredCommitDataProvider")}catch{}},5533:(e,t,n)=>{function i(e){return!!e?.startedAt&&!e?.completedAt}function a(e){return!!e&&Object.values(e.nodes).some(i)}n.d(t,{f:()=>i,y:()=>a})},6551:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(96540);function a(e){let t=(0,i.useRef)(void 0);return(0,i.useEffect)(()=>{t.current=e},[e]),t.current}},7026:(e,t,n)=>{n.d(t,{M:()=>a});var i=n(96540);function a(e,t,n){let a=(0,i.useRef)(n);return(0,i.useMemo)(()=>{let n=t(e);return null!=n&&(a.current=n),a.current},[e,t])}},7812:(e,t,n)=>{n.d(t,{Bx:()=>g,LU:()=>d,PO:()=>x,SI:()=>f,SX:()=>b,by:()=>m,g:()=>h,oR:()=>v,ov:()=>j,oy:()=>o,wN:()=>p,wt:()=>u,yA:()=>y});var i=n(1631),a=n(25641),s=n(51213),r=n(35247),l=n(72994);function o(e){return e.split("#")[0]}function d(e,t,n){let i=n.get(e);if(i&&"duplicateOf"in i&&i.duplicateOf)return d(i.duplicateOf,t,n);let a=o(e),s=t.get(a)??[],r=s.indexOf(e);return s.length>1&&-1!==r?r+1:null}function c(e,t){return`file:${e.name}#${t}`}function u(e,t,n,i){switch(e.type){case"thread-scoped-file":return d(c(e,t),n,i)??void 0;case"draft-issue":case"draft-update-issue":return d(v({ref:e,messageIndex:t}).id,n,i)??void 0}}function m(e,t,n){return{type:"file",id:`file:${(0,a.Vb)(e)}#0`,reference:e,messageId:t??s.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function h(e,t,n){let i=e=>({type:"file",id:`file:empty:${e}#${Date.now()}`,messageId:t??s.Wp,name:e,language:"",value:"",isStreaming:!1,isUserEdited:!1,timestamp:n?new Date(n):new Date}),r=e.baseFile?m(e.baseFile):i(e.headFile?.path||""),l=e.headFile?m(e.headFile):i(e.baseFile?.path||""),o=e.headFile||e.baseFile,d=o?.path||"";return{type:"file-diff",id:`file-diff:${(0,a.Vb)(e)}#0`,baseFile:r,headFile:l,name:d,language:(e.headFile?l:r).language,isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date,messageId:t??s.Wp,reference:e}}function f(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??s.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name,href:e.url}}function p(e,t){let{repoOwner:n,repoName:i,id:a}=e;return{type:"job-result",id:`job-result:${n}-${i}-${a}`,messageId:t??s.Wp,name:`Job #${a} in ${n}/${i}`,jobId:Number(a),workflowId:e.workflow?.id,repoOwner:n,repoName:i}}function g(e,t=s.Wp){return{type:"plugin-content",id:`plugin-content:${e.type}:${(0,a.Vb)(e)}`,name:(0,a.z$)(e),icon:(0,i.a_)(e),messageId:t,reference:e}}function y(e){return{type:e.type,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,title:e.name,state:e.state,url:e.href,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}function x(e){switch(e.type){case"file":return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value};case"new-issue":case"update-issue":return{type:"update-issue"===e.type?"draft-update-issue":"draft-issue",tag:e.tag,parentTag:e.parentTag,title:e.name,description:e.body,bodyVersion:e.bodyVersion,repository:e.repository,template:e.template,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(0,l.t)(e.projects),rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,templateFormValuesById:e.defaultValuesById,issueNumber:e.issueNumber,blockedByTags:e.blockedByTags,isBlockingTags:e.isBlockingTags};default:return null}}function v({ref:e,messageIndex:t,messageId:n,timestamp:i}){switch(e.type){case"thread-scoped-file":return function(e,t,n=s.Wp,i){return{type:"file",id:c(e,t),reference:e,messageId:n,name:e.name,language:e.language,value:e.text,timestamp:i?new Date(i):new Date,isStreaming:!1,isUserEdited:n===s.Wp}}(e,t,n,i);case"draft-issue":case"draft-update-issue":return function({ref:e,messageId:t=s.Wp,messageIndex:n}){let i=e.issueNumber&&r.W.draftUpdateIssue?"update-issue":"new-issue";return{type:i,id:`${i}:${e.tag}#${n}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,name:e.title,body:e.description,bodyVersion:e.bodyVersion,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(0,l.c)(e.projects),rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,isUserEdited:t===s.Wp,messageId:t,isStreaming:!1,template:e.template,defaultValuesById:e.templateFormValuesById??{},issueNumber:e.issueNumber,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}({ref:e,messageIndex:t,messageId:n});default:return null}}function b(e,t,n){let i=o(e.id),a=n.get(i),s=a?.findIndex(t=>t===e.id)??-1,r=a?.[s-1];return r&&t.get(r)}function j(e,t){let n=e=>({tag:e.tag,parentTag:e.parentTag,repository:e.repository,type:e.type,template:e.template,name:e.name,body:e.body,bodyVersion:e.bodyVersion,isUserEdited:e.isUserEdited,issueType:e.issueType,milestone:e.milestone,issueNumber:e.issueNumber,assignees:e.assignees?.slice().sort(),labels:e.labels?.slice().sort(),projects:e.projects?.slice().sort((e,t)=>{let n=`${e.id||""}:${e.title||""}`,i=`${t.id||""}:${t.title||""}`;return n.localeCompare(i)}),rawProjectsInput:e.rawProjectsInput?.slice().sort(),defaultValuesById:e.defaultValuesById,blockedByTags:e.blockedByTags?.slice().sort(),isBlockingTags:e.isBlockingTags?.slice().sort()});return JSON.stringify(n(e))===JSON.stringify(n(t))}},8108:(e,t,n)=>{n.d(t,{_g:()=>p,bB:()=>u,e9:()=>h,xJ:()=>y});var i=n(16522),a=n(97665),s=n(94747),r=n(99519),l=n(93161),o=n(5533),d=n(48057);function c(e){let t,n,l,o,c=(0,i.c)(13),u=(0,a.jE)(),m=(0,r.EY)();return c[0]!==u||c[1]!==m||c[2]!==e?(t=async t=>{let{loopID:n,version:i,nodeID:a}=t,s=(0,d.wu)(n,i),r=u.getQueryData(s);if(!r)throw Error("No current execution");let l=e(r.nodes[a],t);return await m.updateNodeExecution(n,i,r.id,a,l)},c[0]=u,c[1]=m,c[2]=e,c[3]=t):t=c[3],c[4]!==u||c[5]!==e?(n=async t=>{let{loopID:n,version:i,nodeID:a}=t,s=(0,d.wu)(n,i),r=u.getQueryData(s);if(r){let n=e(r.nodes[a],t),i={...r,nodes:{...r.nodes,[a]:n}};u.setQueryData(s,i)}await u.cancelQueries({queryKey:s},{revert:!1})},c[4]=u,c[5]=e,c[6]=n):n=c[6],c[7]!==u?(l=(e,t)=>{if(!e.success)return;let{loopID:n,version:i,nodeID:a}=t,s=(0,d.wu)(n,i);u.setQueryData(s,t=>{if(!t)return t;let n=t.nodes[a],i=e.data;return n?.completedAt!==void 0&&n.completedAt>0&&!i.completedAt?t:{...t,nodes:{...t.nodes,[a]:i}}})},c[7]=u,c[8]=l):l=c[8],c[9]!==t||c[10]!==n||c[11]!==l?(o={mutationFn:t,onMutate:n,onSuccess:l},c[9]=t,c[10]=n,c[11]=l,c[12]=o):o=c[12],(0,s.n)(o)}function u(){return c(m)}function m(e,t){let{value:n}=t;return{...e??l.D,value:n,completedAt:Date.now()}}function h(){return c(f)}function f(e,t){let{error:n}=t;return{...e??l.D,error:n,value:null,completedAt:Date.now()}}function p(){return c(g)}function g(e){return{...e??l.D,startedAt:Date.now(),completedAt:void 0}}function y(){var e;let t,n,l,o,c,u;return e=x,o=(0,i.c)(10),c=(0,a.jE)(),u=(0,r.EY)(),o[0]!==c||o[1]!==u||o[2]!==e?(t=async t=>{let{loopID:n,version:i}=t,a=(0,d.wu)(n,i),s=c.getQueryData(a);if(!s)throw Error("No current execution");let r=e(s,t);return await u.updateExecution(n,i,s.id,r)},o[0]=c,o[1]=u,o[2]=e,o[3]=t):t=o[3],o[4]!==c||o[5]!==e?(n=async t=>{let{loopID:n,version:i}=t,a=(0,d.wu)(n,i),s=c.getQueryData(a);if(s){let n=e(s,t);c.setQueryData(a,n)}await c.cancelQueries({queryKey:a},{revert:!1})},o[4]=c,o[5]=e,o[6]=n):n=o[6],o[7]!==t||o[8]!==n?(l={mutationFn:t,onMutate:n},o[7]=t,o[8]=n,o[9]=l):l=o[9],(0,s.n)(l)}function x(e){return{...e,nodes:Object.fromEntries(Object.entries(e.nodes).map(v))}}function v(e){let[t,n]=e;return[t,(0,o.f)(n)?{...n,completedAt:Date.now()}:n]}},8431:(e,t,n)=>{n.d(t,{A:()=>i});let i={diff:"Diff-module__diff--Sofy4",diffTargetable:"Diff-module__diffTargetable--kW3Cm",diffHeaderWrapper:"Diff-module__diffHeaderWrapper--eH6zk",diffAddFileThread:"Diff-module__diffAddFileThread--f81Tx",diffFooter:"Diff-module__diffFooter--kHHJz"}},8624:(e,t,n)=>{n.d(t,{L:()=>o});var i=n(74848),a=n(16522),s=n(38621),r=n(26108),l=n(34164);n(96540);let o=e=>{let t,n,o,d=(0,a.c)(17),{ref:c,expanded:u,testid:m,ariaLabel:h,ariaControls:f,onToggleExpanded:p,alignment:g,dataHotkey:y,className:x,size:v,tooltipDirection:b,variant:j}=e,w=u?`collapse-${m}`:`expand-${m}`,C=u?"left"===g?s.SidebarExpandIcon:s.SidebarCollapseIcon:"left"===g?s.SidebarCollapseIcon:s.SidebarExpandIcon;d[0]!==p?(t=e=>{p(e)},d[0]=p,d[1]=t):t=d[1];let _=j??"invisible";return d[2]!==x?(n=(0,l.$)(x,"fgColor-muted"),d[2]=x,d[3]=n):n=d[3],d[4]!==f||d[5]!==h||d[6]!==y||d[7]!==u||d[8]!==c||d[9]!==v||d[10]!==w||d[11]!==C||d[12]!==t||d[13]!==_||d[14]!==n||d[15]!==b?(o=(0,i.jsx)(r.K,{"aria-label":h,tooltipDirection:b,ref:c,"data-testid":w,"aria-expanded":u,"aria-controls":f,icon:C,"data-hotkey":y,onClick:t,variant:_,size:v,className:n}),d[4]=f,d[5]=h,d[6]=y,d[7]=u,d[8]=c,d[9]=v,d[10]=w,d[11]=C,d[12]=t,d[13]=_,d[14]=n,d[15]=b,d[16]=o):o=d[16],o};o.displayName="ExpandButton"},11128:(e,t,n)=>{n.d(t,{n:()=>o});var i=n(74848),a=n(16522),s=n(38621),r=n(21373),l=n(22053);function o(e){let t,n,o,c,u,m,h,f=(0,a.c)(17),{additionalActions:p,errors:g,onFixErrorClick:y,title:x}=e,{isReadonly:v}=(0,l.a)();return f[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(s.AlertIcon,{className:"ErrorDisplay-module__errorIcon--SP3WM",size:"medium"}),f[0]=t):t=f[0],f[1]!==x?(n=(0,i.jsx)("h2",{className:"ErrorDisplay-module__errorTitle--P8tnN",children:x}),f[1]=x,f[2]=n):n=f[2],f[3]!==g?(o=g.map(d),f[3]=g,f[4]=o):o=f[4],f[5]!==n||f[6]!==o?(c=(0,i.jsxs)("div",{className:"ErrorDisplay-module__errorNotice--Ey4vJ",children:[n,o]}),f[5]=n,f[6]=o,f[7]=c):c=f[7],f[8]!==v||f[9]!==y?(u=!v&&y&&(0,i.jsx)(r.Q,{leadingVisual:s.BeakerIcon,onClick:y,children:"Try to fix it"}),f[8]=v,f[9]=y,f[10]=u):u=f[10],f[11]!==p||f[12]!==u?(m=(0,i.jsxs)("div",{className:"ErrorDisplay-module__errorActions--NW0lt",children:[p,u]}),f[11]=p,f[12]=u,f[13]=m):m=f[13],f[14]!==c||f[15]!==m?(h=(0,i.jsxs)("div",{className:"ErrorDisplay-module__errorContainer--r2xoZ",children:[t,c,m]}),f[14]=c,f[15]=m,f[16]=h):h=f[16],h}function d(e){return(0,i.jsx)("p",{className:"ErrorDisplay-module__errorText--c4NUQ",children:e},e)}try{o.displayName||(o.displayName="ErrorDisplay")}catch{}},11607:(e,t,n)=>{n.d(t,{$:()=>o});var i=n(74848),a=n(16522),s=n(34164),r=n(3433);let l={button:"Button-module__button--hMmd1",small:"Button-module__small--xYPhJ",medium:"Button-module__medium--d64dr",condensed:"Button-module__condensed--WrsZL",iconOnly:"Button-module__iconOnly--NkD70",default:"Button-module__default--fN_4Y",disabled:"Button-module__disabled--tNL94",invisible:"Button-module__invisible--lYAq6",icon:"Button-module__icon--Qd_AY",text:"Button-module__text--VDmpz"},o=e=>{let t,n,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,C,_=(0,a.c)(66);_[0]!==e?({ref:u,size:m,variant:h,condensed:f,iconOnly:p,icon:d,className:n,children:t,disabled:o,...c}=e,_[0]=e,_[1]=t,_[2]=n,_[3]=o,_[4]=d,_[5]=c,_[6]=u,_[7]=m,_[8]=h,_[9]=f,_[10]=p):(t=_[1],n=_[2],o=_[3],d=_[4],c=_[5],u=_[6],m=_[7],h=_[8],f=_[9],p=_[10]);let N=void 0===h?"default":h,S=void 0!==f&&f,I=void 0!==p&&p,k=l[void 0===m?"small":m],L=l[N],D=S&&l.condensed,T=I&&l.iconOnly,E=o&&l.disabled;_[11]!==n||_[12]!==k||_[13]!==L||_[14]!==D||_[15]!==T||_[16]!==E?(g=(0,s.$)(l.button,k,L,D,T,E,n),_[11]=n,_[12]=k,_[13]=L,_[14]=D,_[15]=T,_[16]=E,_[17]=g):g=_[17];let A=g;_[18]!==d?(y=null!=d?(0,i.jsx)("span",{className:l.icon,children:d}):null,_[18]=d,_[19]=y):y=_[19],_[20]!==t||_[21]!==I?(x=!I&&t?(0,i.jsx)("span",{className:l.text,children:t}):null,_[20]=t,_[21]=I,_[22]=x):x=_[22],_[23]!==y||_[24]!==x?(v=(0,i.jsxs)(i.Fragment,{children:[y,x]}),_[23]=y,_[24]=x,_[25]=v):v=_[25];let R=v;if("to"in c){let e,t,n,a;_[26]!==c?({to:n,onClick:e,...t}=c,_[26]=c,_[27]=e,_[28]=t,_[29]=n):(e=_[27],t=_[28],n=_[29]);let s=u;return _[30]!==A||_[31]!==R||_[32]!==o||_[33]!==e||_[34]!==t||_[35]!==s||_[36]!==n?(a=(0,i.jsx)(r.N_,{ref:s,to:n,className:A,"aria-disabled":o,onClick:e,...t,children:R}),_[30]=A,_[31]=R,_[32]=o,_[33]=e,_[34]=t,_[35]=s,_[36]=n,_[37]=a):a=_[37],a}if("href"in c){let e,t,n,a,s,r;_[38]!==c?({href:e,target:s,rel:n,onClick:t,...a}=c,_[38]=c,_[39]=e,_[40]=t,_[41]=n,_[42]=a,_[43]=s):(e=_[39],t=_[40],n=_[41],a=_[42],s=_[43]);let l=u;return _[44]!==A||_[45]!==R||_[46]!==o||_[47]!==e||_[48]!==t||_[49]!==n||_[50]!==a||_[51]!==l||_[52]!==s?(r=(0,i.jsx)("a",{ref:l,href:e,target:s,rel:n,className:A,"aria-disabled":o,onClick:t,...a,children:R}),_[44]=A,_[45]=R,_[46]=o,_[47]=e,_[48]=t,_[49]=n,_[50]=a,_[51]=l,_[52]=s,_[53]=r):r=_[53],r}_[54]!==c?({onClick:b,type:w,...j}=c,_[54]=c,_[55]=b,_[56]=j,_[57]=w):(b=_[55],j=_[56],w=_[57]);let O=void 0===w?"button":w,P=u;return _[58]!==A||_[59]!==R||_[60]!==o||_[61]!==b||_[62]!==j||_[63]!==P||_[64]!==O?(C=(0,i.jsx)("button",{ref:P,type:O,onClick:b,disabled:o,className:A,...j,children:R}),_[58]=A,_[59]=R,_[60]=o,_[61]=b,_[62]=j,_[63]=P,_[64]=O,_[65]=C):C=_[65],C};o.displayName="Button"},12357:(e,t,n)=>{n.d(t,{U:()=>_});var i=n(74848),a=n(16522),s=n(4817),r=n(85094),l=n(98755),o=n(96540),d=n(57826),c=n(34164),u=n(53419);function m(e){let t,n,s,r,m,h,f,p,g,y=(0,a.c)(18),{children:x,code:v}=e,b=(0,o.useId)(),{chatMode:j,wrapCodeLines:w}=(0,o.useContext)(d.F);y[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.$)("CodeBlocks-module__container--GV7vX","CodeBlocks-module__immersive--pP6K5"),y[0]=t):t=y[0],y[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.$)("CodeBlocks-module__copyContainer--PlsVH"),s=(0,c.$)("CodeBlocks-module__copyContent--_B0qO"),y[1]=n,y[2]=s):(n=y[1],s=y[2]),y[3]!==j?(r=()=>{(0,u.BI)("dotcom_chat.activate",{target:"CODE_BLOCK_COPY",mode:j})},y[3]=j,y[4]=r):r=y[4],y[5]!==v||y[6]!==r?(m=(0,i.jsx)("div",{className:n,children:(0,i.jsx)("div",{className:s,children:(0,i.jsx)(l.T,{textToCopy:v,ariaLabel:"Copy code",className:"CodeBlocks-module__copyButton--xrG5L",size:"small",onCopy:r})})}),y[5]=v,y[6]=r,y[7]=m):m=y[7],y[8]===Symbol.for("react.memo_cache_sentinel")?(h=(0,c.$)("CodeBlocks-module__codeContainer--wOuWu"),y[8]=h):h=y[8];let C=w&&"CodeBlocks-module__codeWrap--YQDq8";return y[9]!==C?(f=(0,c.$)(C),y[9]=C,y[10]=f):f=y[10],y[11]!==x||y[12]!==f?(p=(0,i.jsx)("div",{className:h,children:(0,i.jsx)("pre",{className:"CodeBlocks-module__code--wvK8k",tabIndex:0,children:(0,i.jsx)("code",{className:f,children:x})})}),y[11]=x,y[12]=f,y[13]=p):p=y[13],y[14]!==b||y[15]!==m||y[16]!==p?(g=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("figure",{className:t,"aria-labelledby":b,children:[m,p]})}),y[14]=b,y[15]=m,y[16]=p,y[17]=g):g=y[17],g}try{m.displayName||(m.displayName="CodeBlocksForLoop")}catch{}var h=n(47970);let f="data-codeblock-for-loop-props",p=(0,r.F)(f),g={code:(e,t)=>{let n=(0,r.k)(e,f);return n?(0,i.jsx)(m,{...n,children:e.children}):t}};var y=n(90122),x=n(76219),v=n(69726);let b="data-mermaid-props",j=(0,r.F)(b);function w(e){let t,n,s,r,l,o,d,u,m=(0,a.c)(18),{code:h,identity:f,viewscreenHost:p}=e,g=`${p}/markdown/mermaid`,y=encodeURIComponent(h);m[0]!==y?(t=btoa(y),m[0]=y,m[1]=t):t=m[1];let x=t;m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.$)("js-render-needs-enrichment","render-needs-enrichment","Mermaid-module__diagramContainer--YUzME"),m[2]=n):n=m[2];let b=`${g}?data=${x}`;return m[3]!==h?(s=JSON.stringify({data:h}),m[3]=h,m[4]=s):s=m[4],m[5]!==h?(r=(0,i.jsx)("div",{className:"Mermaid-module__hiddenSourceCode--dlgHV",children:(0,i.jsx)("pre",{lang:"mermaid",children:h})}),m[5]=h,m[6]=r):r=m[6],m[7]!==h||m[8]!==s||m[9]!==r?(l=(0,i.jsx)("div",{className:"js-render-enrichment-target","data-json":s,"data-plain":h,children:r}),m[7]=h,m[8]=s,m[9]=r,m[10]=l):l=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.$)("js-render-enrichment-loader","Mermaid-module__loaderContainer--pyhaT"),m[11]=o):o=m[11],m[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsx)("span",{className:o,role:"presentation",children:(0,i.jsx)(v.A,{})}),m[12]=d):d=m[12],m[13]!==p||m[14]!==f||m[15]!==b||m[16]!==l?(u=(0,i.jsxs)("section",{className:n,"data-identity":f,"data-host":p,"data-src":b,"data-type":"mermaid","aria-label":"Mermaid diagram rendered output container",children:[l,d]}),m[13]=p,m[14]=f,m[15]=b,m[16]=l,m[17]=u):u=m[17],u}let C={code:(e,t)=>{if(!e.className?.includes("language-mermaid"))return t;let n=(0,r.k)(e,b);return n?(0,i.jsx)(w,{code:n.code,identity:n.identity,viewscreenHost:n.viewscreenHost}):t}};try{w.displayName||(w.displayName="MermaidRenderer")}catch{}function _(e){let t,n,r,l,o,d,u=(0,a.c)(15),{className:m,isRunning:f,nodeValue:v,renderAsJson:b}=e,w=void 0!==b&&b,{previewUrl:_}=(0,x.U)();if(u[0]===Symbol.for("react.memo_cache_sentinel")?(t={transformMarkdown:e=>(0,h.YR)(e,"code",e=>{e.data={...e.data,hName:"code",hProperties:{[p]:JSON.stringify({language:e.lang??"",code:e.value,startOffset:e.position?.start.offset??-1,endOffset:e.position?.end.offset??-1})}}}),transformHtml:e=>(0,h.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&p in i.properties&&n.children.splice(t,1,i)}),reactComponents:g},u[0]=t):t=u[0],u[1]!==_){var N;n=[t],_&&n.push((N={viewscreenHost:_},{transformMarkdown:e=>(0,h.YR)(e,"code",e=>{"mermaid"===e.lang&&(e.data={...e.data,hName:"code",hProperties:{className:["language-mermaid"],[j]:JSON.stringify({code:e.value,identity:`mermaid-${Math.random().toString(36).slice(2,11)}`,viewscreenHost:N.viewscreenHost})}})}),transformHtml:e=>(0,h.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&j in i.properties&&n.children.splice(t,1,i)}),reactComponents:C})),u[1]=_,u[2]=n}else n=u[2];let S=n;u[3]!==v?(r=(0,y.DO)(v),u[3]=v,u[4]=r):r=u[4];let I=r;return u[5]!==m?(l=(0,c.$)("OutputDisplay-module__outputValue--I7SuT",m),u[5]=m,u[6]=l):l=u[6],u[7]!==S||u[8]!==f||u[9]!==w||u[10]!==I?(o=w?(0,i.jsx)("pre",{className:"OutputDisplay-module__jsonOutput--NA93D",children:I}):(0,i.jsx)(s.To,{extensions:S,className:"OutputDisplay-module__markdownOutput--c47bk",isStreaming:f,markdown:I}),u[7]=S,u[8]=f,u[9]=w,u[10]=I,u[11]=o):o=u[11],u[12]!==l||u[13]!==o?(d=(0,i.jsx)("div",{className:l,children:o}),u[12]=l,u[13]=o,u[14]=d):d=u[14],d}try{_.displayName||(_.displayName="OutputDisplay")}catch{}},12465:(e,t,n)=>{n.d(t,{P:()=>u,W:()=>m});var i=n(16522),a=n(94747),s=n(97665),r=n(46747),l=n(99519),o=n(99993),d=n(33026);function c(e){let t,n,s=(0,i.c)(5),r=(0,l.EY)();return s[0]!==r?(t=async e=>{let{loopID:t,updateFn:n}=e;return await r.updateLoop(t,n)},s[0]=r,s[1]=t):t=s[1],s[2]!==e||s[3]!==t?(n={mutationFn:t,...e},s[2]=e,s[3]=t,s[4]=n):n=s[4],(0,a.n)(n)}function u(){let e,t=(0,i.c)(2),n=(0,s.jE)();return t[0]!==n?(e={onMutate:async e=>{let{loopID:t,updateFn:i}=e;await n.cancelQueries({queryKey:(0,o.c_)(t,d.kj)});let a=n.getQueryData((0,o.c_)(t,d.kj)),s=a?.version?n.getQueryData((0,o.c_)(t,a.version)):null;if(a){let e=i(a);n.setQueryData((0,o.c_)(t,d.kj),e),e.version&&n.setQueryData((0,o.c_)(t,e.version),e)}return{previousDraftLoop:a,previousVersionedLoop:s,loopID:t}},onError:(e,t,i)=>{i?.previousDraftLoop&&(n.setQueryData((0,o.c_)(i.loopID,d.kj),i.previousDraftLoop),i.previousVersionedLoop&&i.previousDraftLoop.version&&n.setQueryData((0,o.c_)(i.loopID,i.previousDraftLoop.version),i.previousVersionedLoop))}},t[0]=n,t[1]=e):e=t[1],c(e)}function m(){let e,t,n=(0,i.c)(6),a=(0,s.jE)(),l=c(),u=(0,r.d)(l.mutate,500);n[0]!==u||n[1]!==a?(e=async(e,t)=>{let{loopID:n,updateFn:i}=e;await a.cancelQueries({queryKey:(0,o.c_)(n,d.kj)});let s=i(a.getQueryData((0,o.c_)(n,d.kj))??null);return a.setQueryData((0,o.c_)(n,d.kj),s),u({loopID:n,updateFn:i}),t?.onSuccess?.(),s},n[0]=u,n[1]=a,n[2]=e):e=n[2];let m=e;return n[3]!==m||n[4]!==l?(t={...l,mutate:m},n[3]=m,n[4]=l,n[5]=t):t=n[5],t}},13071:(e,t,n)=>{n.d(t,{C:()=>l});var i=n(74848),a=n(44185),s=n(81945),r=n(42257);function l({deferredData:e,oid:t,repo:n,helpUrl:l}){let o=void 0===e,d="";try{d=e?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}return(0,i.jsxs)(i.Fragment,{children:[o&&(0,i.jsx)(s.O,{className:"ml-2",variant:"rounded",width:"62px"}),e?.statusCheckStatus&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"d-flex ml-2 mr-1",children:"\xb7"}),(0,i.jsx)(r.d,{oid:t,status:e?.statusCheckStatus?.state,descriptionString:d,repo:n}),e?.signatureInformation&&e?.verifiedStatus!=="unsigned"&&(0,i.jsx)("span",{className:"d-flex ml-2",children:"\xb7"})]}),e?.signatureInformation&&(0,i.jsx)("div",{className:"ml-2",children:(0,i.jsx)(a.h,{commitOid:t,hasSignature:!0,verificationStatus:e.verifiedStatus,signature:{helpUrl:l,...e.signatureInformation}})})]})}try{l.displayName||(l.displayName="DeferredCommitHeaderData")}catch{}},13180:(e,t,n)=>{n.d(t,{A:()=>I});var i=n(74848),a=n(16522),s=n(69093),r=n(17925),l=n(53419),o=n(96459),d=n(51213),c=n(26607);let u=e=>{let t,n,s,r,l,o,d,u,m=(0,a.c)(16);m[0]!==e?({children:s,icon:t,isNew:r,...n}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=s,m[4]=r):(t=m[1],n=m[2],s=m[3],r=m[4]);let h=void 0!==r&&r;return m[5]!==t?(l=(0,i.jsx)(t,{}),m[5]=t,m[6]=l):l=m[6],m[7]!==s?(o=(0,i.jsx)("span",{className:"CommandPill-module__text--ggGhT",children:s}),m[7]=s,m[8]=o):o=m[8],m[9]!==h?(d=h&&(0,i.jsx)(c.A,{size:"small",variant:"accent",children:"New"}),m[9]=h,m[10]=d):d=m[10],m[11]!==n||m[12]!==l||m[13]!==o||m[14]!==d?(u=(0,i.jsxs)("button",{className:"CommandPill-module__button--dwT_a",...n,children:[l,o,d]}),m[11]=n,m[12]=l,m[13]=o,m[14]=d,m[15]=u):u=m[15],u};try{u.displayName||(u.displayName="CommandPill")}catch{}let m=JSON.parse('{"Create issues":{"id":"create-issues-group","name":"Create issue","color":"var(--display-gray-fgColor)","icon":"issue-draft","entries":[{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"}]},"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}'),h=JSON.parse('{"Improve code performance":{"id":"improve-code-performance","name":"Improve code performance","color":"var(--display-gray-fgColor)","icon":"agent","entries":[{"id":"identify-slow-code","message":"Identify and suggest improvements to slow or inefficient code.","titleHtml":"Improve code performance"}]},"Refactor code":{"id":"refactor-code","name":"Refactor code","color":"var(--display-gray-fgColor)","icon":"agent","entries":[{"id":"find-duplicated-code","message":"Find and refactor duplicated code.","titleHtml":"Refactor code"}]},"Document Text":{"id":"document-text","name":"Document Text","color":"var(--display-gray-fgColor)","icon":"agent","entries":[{"id":"suggest-better-names","message":"Suggest more descriptive variable and function names.","titleHtml":"Document code"}]}}'),f=JSON.parse('{"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}');var p=n(73017),g=n(94236),y=n(5524),x=n(96540),v=n(82595),b=n(38621);let j=e=>{let t,n,s,r,l=(0,a.c)(15),{ref:o,testId:d,name:c,icon:u,color:m,onClick:h,dropdown:f,open:p}=e,g=`starter-${d}`;return l[0]!==m||l[1]!==u?(t=v.I&&(0,i.jsx)("div",{className:"StarterPill-module__icon--GKvj8",children:(0,i.jsx)(v.I,{icon:u,color:m})}),l[0]=m,l[1]=u,l[2]=t):t=l[2],l[3]!==f?(n=f&&(0,i.jsx)("div",{className:"StarterPill-module__dropdown--NngRn",children:(0,i.jsx)(b.TriangleDownIcon,{})}),l[3]=f,l[4]=n):n=l[4],l[5]!==c||l[6]!==n?(s=(0,i.jsxs)("div",{className:"StarterPill-module__title--Nsp36",children:[c,n]}),l[5]=c,l[6]=n,l[7]=s):s=l[7],l[8]!==h||l[9]!==p||l[10]!==o||l[11]!==g||l[12]!==t||l[13]!==s?(r=(0,i.jsxs)("button",{ref:o,className:"StarterPill-module__container--d2dFs",onClick:h,"aria-expanded":p,"data-testid":g,children:[t,s]}),l[8]=h,l[9]=p,l[10]=o,l[11]=g,l[12]=t,l[13]=s,l[14]=r):r=l[14],r};function w(e){let t,n,s,r,l,o,d=(0,a.c)(30),{group:c,onEntrySelect:u}=e,[m,h]=(0,x.useState)(!1),f=(0,x.useRef)(null);d[0]!==m?(t=()=>{h(!m)},d[0]=m,d[1]=t):t=d[1];let v=t;if(1===c.entries.length){let e,t,n=c.entries[0];return d[2]!==u||d[3]!==n?(e=()=>u(n),d[2]=u,d[3]=n,d[4]=e):e=d[4],d[5]!==c.color||d[6]!==c.icon||d[7]!==c.id||d[8]!==c.name||d[9]!==e?(t=(0,i.jsx)("li",{children:(0,i.jsx)(j,{ref:f,testId:c.id,name:c.name,icon:c.icon,color:c.color,onClick:e,dropdown:!1})}),d[5]=c.color,d[6]=c.icon,d[7]=c.id,d[8]=c.name,d[9]=e,d[10]=t):t=d[10],t}if(d[11]!==c.color||d[12]!==c.icon||d[13]!==c.id||d[14]!==c.name||d[15]!==v||d[16]!==m?(n=(0,i.jsx)(g.W.Anchor,{children:(0,i.jsx)(j,{ref:f,testId:c.id,name:c.name,icon:c.icon,color:c.color,onClick:v,dropdown:!0,open:m})}),d[11]=c.color,d[12]=c.icon,d[13]=c.id,d[14]=c.name,d[15]=v,d[16]=m,d[17]=n):n=d[17],d[18]===Symbol.for("react.memo_cache_sentinel")?(s={width:"260px"},d[18]=s):s=d[18],d[19]!==c.entries||d[20]!==u){let e;d[22]!==u?(e=e=>(0,i.jsx)(y.l.Item,{onSelect:()=>u(e),children:(0,i.jsx)(p.$6,{html:e.titleHtml})},e.id),d[22]=u,d[23]=e):e=d[23],r=c.entries.map(e),d[19]=c.entries,d[20]=u,d[21]=r}else r=d[21];return d[24]!==r?(l=(0,i.jsx)(g.W.Overlay,{style:s,children:(0,i.jsx)(y.l,{children:r})}),d[24]=r,d[25]=l):l=d[25],d[26]!==m||d[27]!==n||d[28]!==l?(o=(0,i.jsx)("li",{children:(0,i.jsxs)(g.W,{open:m,onOpenChange:h,children:[n,l]})}),d[26]=m,d[27]=n,d[28]=l,d[29]=o):o=d[29],o}j.displayName="StarterPill";try{w.displayName||(w.displayName="StarterGroupWithMenu")}catch{}let C=e=>{let t,n,r,l,o,c,p,g,y=(0,a.c)(32),{onSelect:x,onIceBreakerSelect:v,iceBreakersExperimentEnabled:b,paidUser:j,activeModeName:C}=e;y[0]===Symbol.for("react.memo_cache_sentinel")?(t={enabled:!0},y[0]=t):t=y[0];let{availableCommands:_}=(0,s.j)(t);if(y[1]!==C||y[2]!==_||y[3]!==b||y[4]!==v||y[5]!==x||y[6]!==j){c=Symbol.for("react.early_return_sentinel");e:{let e,t;y[12]!==C||y[13]!==j?(e=e=>"git-group"===e.id||"pull-requests-group"===e.id||!j&&"write-code-group"===e.id||C===d.II.Task,y[12]=C,y[13]=j,y[14]=e):e=y[14];let a=(function(e=!1,t=!1){return Object.values(e?t?h:f:m)})(!0,C===d.II.Task).filter(e);y[15]!==C||y[16]!==_||y[17]!==b||y[18]!==j?(t=b?_.filter(e=>C!==d.II.Task&&"brainstorm"!==e.key&&"ask"!==e.key&&(!!j||"spark"!==e.key)):_,y[15]=C,y[16]=_,y[17]=b,y[18]=j,y[19]=t):t=y[19];let s=t;if(0===s.length&&0===a.length){c=null;break e}if(o="CommandStarters-module__container--y1QAx",n="CommandStarters-module__list--sK_4w",y[20]!==s||y[21]!==x){let e;y[23]!==x?(e=e=>(0,i.jsx)("li",{children:(0,i.jsx)(u,{icon:e.icon,onClick:()=>x(e),isNew:e.isNew,children:e.name})},e.key),y[23]=x,y[24]=e):e=y[24],r=s.map(e),y[20]=s,y[21]=x,y[22]=r}else r=y[22];l=b&&a.map(e=>(0,i.jsx)(w,{group:e,onEntrySelect:v},e.id))}y[1]=C,y[2]=_,y[3]=b,y[4]=v,y[5]=x,y[6]=j,y[7]=n,y[8]=r,y[9]=l,y[10]=o,y[11]=c}else n=y[7],r=y[8],l=y[9],o=y[10],c=y[11];return c!==Symbol.for("react.early_return_sentinel")?c:(y[25]!==n||y[26]!==r||y[27]!==l?(p=(0,i.jsxs)("ul",{className:n,children:[r,l]}),y[25]=n,y[26]=r,y[27]=l,y[28]=p):p=y[28],y[29]!==o||y[30]!==p?(g=(0,i.jsx)("div",{className:o,children:p}),y[29]=o,y[30]=p,y[31]=g):g=y[31],g)};try{C.displayName||(C.displayName="CommandStarters")}catch{}var _=n(97068),N=n(79080);let S=e=>{let t,n,s,r,l,o,d,c,u,m,h,f,p,g,v,b,j,w,C,S,I,k,L,D,T=(0,a.c)(67),{chatCommand:E,suggestions:A,onSelect:R,anchorRef:O,textAreaRef:P}=e,[F,M]=(0,x.useState)(0),[$,B]=(0,x.useState)(0),[V,U]=(0,x.useState)(!1),[q,H]=(0,x.useState)(void 0),[G,K]=(0,x.useState)(-1),[W,z]=(0,x.useState)(""),Q=(0,x.useRef)(null),Z=(0,x.useRef)(null);if(T[0]!==E||T[1]!==A||T[2]!==W){let e;T[4]!==E||T[5]!==W?(e=e=>{let t=`/${E} ${e}`.toLowerCase(),n=W.toLowerCase().trim();return t.includes(n)&&t!==n},T[4]=E,T[5]=W,T[6]=e):e=T[6],t=A.filter(e),T[0]=E,T[1]=A,T[2]=W,T[3]=t}else t=T[3];let J=t,Y=V&&J.length>0;T[7]!==O?(n=()=>{if(Z.current&&O.current){let{top:e,left:t}=(0,_.uG)(Z.current,O.current,{align:"start",side:"outside-bottom",anchorOffset:4});M(e),B(t)}},T[7]=O,T[8]=n):n=T[8];let X=n;T[9]!==P?(s=()=>{P.current===document.activeElement&&U(!0)},r=[P],T[9]=P,T[10]=s,T[11]=r):(s=T[10],r=T[11]),(0,x.useEffect)(s,r),T[12]!==P?(l=()=>{let e=P.current;if(!e)return;let t=()=>{z(e.value)};return z(e.value),e.addEventListener("input",t),()=>{e.removeEventListener("input",t)}},o=[P],T[12]=P,T[13]=l,T[14]=o):(l=T[13],o=T[14]),(0,x.useEffect)(l,o),T[15]!==O||T[16]!==Y||T[17]!==X?(d=()=>{let e=O.current;if(!Y||!e)return;let t=()=>{O.current&&(H(O.current.getBoundingClientRect().width),X())};return t(),Q.current||(Q.current=new ResizeObserver(t)),Q.current.observe(e),()=>{Q.current&&Q.current.unobserve(e)}},c=[Y,O,X],T[15]=O,T[16]=Y,T[17]=X,T[18]=d,T[19]=c):(d=T[18],c=T[19]),(0,x.useEffect)(d,c),T[20]!==P?(u=e=>!!e&&((P.current?.contains(e)??!1)||(Z.current?.contains(e)??!1)),T[20]=P,T[21]=u):u=T[21];let ee=u;T[22]!==ee||T[23]!==P?(m=()=>{let e=P.current;if(!e)return;let t=e=>{ee(e.relatedTarget)||U(!1)};return e.addEventListener("blur",t),()=>{e.removeEventListener("blur",t)}},h=[P,ee],T[22]=ee,T[23]=P,T[24]=m,T[25]=h):(m=T[24],h=T[25]),(0,x.useEffect)(m,h),T[26]!==E||T[27]!==P?(f=()=>{let e=P.current;if(!e)return;let t=()=>{E&&U(!0)};return e.addEventListener("focus",t),()=>{e.removeEventListener("focus",t)}},p=[P,E],T[26]=E,T[27]=P,T[28]=f,T[29]=p):(f=T[28],p=T[29]),(0,x.useEffect)(f,p),T[30]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{U(!1),K(-1)},T[30]=g):g=T[30];let et=g;T[31]!==Y||T[32]!==P?(v=()=>{let e=P.current;if(!e||!Y)return;let t=e=>{(1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey||e.isComposing)&&"Backspace"!==e.key&&"Delete"!==e.key||K(-1)};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},b=[P,Y],T[31]=Y,T[32]=P,T[33]=v,T[34]=b):(v=T[33],b=T[34]),(0,x.useEffect)(v,b),T[35]!==E||T[36]!==Y||T[37]!==R||T[38]!==P||T[39]!==J?(j=()=>{let e=P.current;if(!e||!Y)return;let t=e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();let t="ArrowDown"===e.key?"down":"up";K(e=>{let n,i;return n="down"===t?-1===e?0:Math.min(e+1,J.length-1):-1===e?J.length-1:Math.max(e-1,0),(i=J[n])&&R(E,i),n})}};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},w=[P,Y,J,E,R],T[35]=E,T[36]=Y,T[37]=R,T[38]=P,T[39]=J,T[40]=j,T[41]=w):(j=T[40],w=T[41]),(0,x.useEffect)(j,w),T[42]!==ee?(C=e=>{e.target instanceof Node&&ee(e.target)||et()},T[42]=ee,T[43]=C):C=T[43];let en=C;T[44]!==E||T[45]!==R?(S=e=>{R(E,e),K(-1)},T[44]=E,T[45]=R,T[46]=S):S=T[46];let ei=S;if(!Y)return null;if(T[47]!==q?(I=q?{width:`${q}px`}:void 0,T[47]=q,T[48]=I):I=T[48],T[49]!==E||T[50]!==ei||T[51]!==G||T[52]!==J){let e;T[54]!==E||T[55]!==ei||T[56]!==G?(e=(e,t)=>(0,i.jsxs)(y.l.Item,{size:"large",onSelect:()=>ei(e),active:t===G,children:[(0,i.jsx)(y.l.LeadingVisual,{children:(0,i.jsxs)("span",{className:"fgColor-muted",children:["/",E]})}),e]},e),T[54]=E,T[55]=ei,T[56]=G,T[57]=e):e=T[57],k=J.map(e),T[49]=E,T[50]=ei,T[51]=G,T[52]=J,T[53]=k}else k=T[53];return T[58]!==k?(L=(0,i.jsx)(y.l,{children:k}),T[58]=k,T[59]=L):L=T[59],T[60]!==O||T[61]!==$||T[62]!==en||T[63]!==I||T[64]!==L||T[65]!==F?(D=(0,i.jsx)(N.Ay,{top:F,left:$,onClickOutside:en,onEscape:et,returnFocusRef:O,"aria-label":"Command suggestions",style:I,"data-testid":"command-suggestions-overlay",ref:Z,preventFocusOnOpen:!0,children:L}),T[60]=O,T[61]=$,T[62]=en,T[63]=I,T[64]=L,T[65]=F,T[66]=D):D=T[66],D};try{S.displayName||(S.displayName="CommandSuggestions")}catch{}function I(e){let t,n,d,c,u,m,h,f,p,g=(0,a.c)(34),{chatCommand:y,chatInputRef:x,containerRef:v,textAreaRef:b,iceBreakersExperimentEnabled:j,paidUser:w,activeModeName:_}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t={enabled:!0},g[0]=t):t=g[0];let{availableCommands:N,availableCommandKeys:I}=(0,s.j)(t),k=(0,o.Z)();g[1]!==I||g[2]!==x||g[3]!==k||g[4]!==b?(n=e=>{((0,l.BI)("dotcom_chat.activate",{target:"COMMAND_STARTER_SELECTED",mode:"immersive",command:e.key}),e.enabled?.()===!1&&e.disabledAction)?e.disabledAction(k):(x.current?.setText(t=>{let n=(0,r.V)(t,I);return n?t.replace(`/${n}`,`/${e.key}`):`/${e.key} ${t}`}),b.current?.focus())},g[1]=I,g[2]=x,g[3]=k,g[4]=b,g[5]=n):n=g[5];let L=n;g[6]!==x||g[7]!==j||g[8]!==b?(d=(e,t)=>{(0,l.BI)("dotcom_chat.activate",{target:"COMMAND_SUGGESTION_SELECTED",mode:"immersive",command:e,suggestion:t,iceBreakerFFEnabled:j}),x.current?.setText(`/${e} ${t}`.trim()),b.current?.focus()},g[6]=x,g[7]=j,g[8]=b,g[9]=d):d=g[9];let D=d;g[10]!==x||g[11]!==j||g[12]!==b?(c=e=>{(0,l.BI)("dotcom_chat.activate",{target:"COMMAND_SUGGESTION_SELECTED",mode:"immersive",command:e.id,suggestion:e.message,iceBreakerFFEnabled:j}),x.current?.setText(`${e.message}`.trim()),b.current?.focus()},g[10]=x,g[11]=j,g[12]=b,g[13]=c):c=g[13];let T=c;g[14]!==N||g[15]!==y?(u=y?N.find(e=>e.key===y)?.suggestions:null,g[14]=N,g[15]=y,g[16]=u):u=g[16];let E=u,A=E&&E.length>0;return g[17]!==y||g[18]!==v||g[19]!==D||g[20]!==A||g[21]!==E||g[22]!==b?(m=y&&A&&(0,i.jsx)(S,{chatCommand:y,suggestions:E,onSelect:D,anchorRef:v,textAreaRef:b},y),g[17]=y,g[18]=v,g[19]=D,g[20]=A,g[21]=E,g[22]=b,g[23]=m):m=g[23],g[24]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)("h2",{className:"sr-only",children:"Chat Commands"}),g[24]=h):h=g[24],g[25]!==_||g[26]!==L||g[27]!==T||g[28]!==j||g[29]!==w?(f=(0,i.jsxs)(i.Fragment,{children:[h,(0,i.jsx)(C,{onSelect:L,onIceBreakerSelect:T,iceBreakersExperimentEnabled:j,paidUser:w,activeModeName:_})]}),g[25]=_,g[26]=L,g[27]=T,g[28]=j,g[29]=w,g[30]=f):f=g[30],g[31]!==m||g[32]!==f?(p=(0,i.jsxs)(i.Fragment,{children:[m,f]}),g[31]=m,g[32]=f,g[33]=p):p=g[33],p}try{I.displayName||(I.displayName="CommandStartersAndSuggestions")}catch{}},13647:(e,t,n)=>{n.d(t,{Ch:()=>a,PW:()=>o,V2:()=>l,Ve:()=>r,Xg:()=>d,a1:()=>s});var i=n(69599);function a(){return(0,i.G7)("copilot_pipes_code_nodes")}function s(){return(0,i.G7)("copilot_pipes_react_nodes")}function r(){return(0,i.G7)("copilot_pipes_github_graphql_nodes")}function l(){return(0,i.G7)("copilot_pipes_pipeline_nodes")}function o(){return(0,i.G7)("copilot_loops_post_staff_ship_features")}function d(){return(0,i.G7)("loops_service_graphql_execution")}},13974:(e,t,n)=>{n.d(t,{p:()=>s});var i=n(16522),a=n(96540);function s(e){let t,n,s=(0,i.c)(4),[r,l]=(0,a.useState)(!1),o=(0,a.useRef)(e);return s[0]!==r||s[1]!==e?(t=()=>{e&&(o.current=!0),e||!o.current||r||l(!0)},n=[e,r],s[0]=r,s[1]=e,s[2]=t,s[3]=n):(t=s[2],n=s[3]),(0,a.useEffect)(t,n),r}},14303:(e,t,n)=>{n.d(t,{r:()=>y});var i=n(74848),a=n(16522),s=n(5524),r=n(94236),l=n(31021),o=n(96540),d=n(38621),c=n(295),u=n(53419),m=n(25641),h=n(3433),f=n(25407),p=n(64917),g=n(35247);function y(e){let t,n,y,v,b,j,w,C,_,N,S,I,k,L,D,T,E,A,R,O,P=(0,a.c)(66),{onDelete:F,onCopyLoop:M,onDuplicate:$,onShare:B,onEdit:V,onCopyOutput:U,onRename:q,loopId:H,hasOutput:G,returnFocusRef:K}=e,W=void 0!==G&&G,[z,Q]=(0,o.useState)(null),{mutate:Z}=(0,c.h)(),{ownerLogin:J,owned:Y,loopURL:X}=(0,p.I)(x);P[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{Q("delete")},P[0]=t):t=P[0];let ee=t;P[1]!==K?(n=()=>{Q(null),setTimeout(()=>K?.current?.focus())},P[1]=K,P[2]=n):n=P[2];let et=n;P[3]!==Z||P[4]!==H||P[5]!==F?(y=async()=>{H&&(Q(null),Z(H,{onSuccess:F}))},P[3]=Z,P[4]=H,P[5]=F,P[6]=y):y=P[6];let en=y;P[7]!==H||P[8]!==$?(v=()=>{H&&$&&((0,u.BI)("dotcom_chat.activate",{target:"LOOP_DUPLICATE",mode:"loops"}),$(H))},P[7]=H,P[8]=$,P[9]=v):v=P[9];let ei=v;P[10]!==B?(b=()=>{B?.()},P[10]=B,P[11]=b):b=P[11];let ea=b;P[12]!==V?(j=()=>{(0,u.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"}),V?.()},P[12]=V,P[13]=j):j=P[13];let es=j;P[14]!==U?(w=()=>{U&&U()},P[14]=U,P[15]=w):w=P[15];let er=w;return H?(P[16]!==er||P[17]!==W||P[18]!==U?(C=U&&(0,i.jsxs)(s.l.Item,{onSelect:er,disabled:!W,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.CopyIcon,{})}),"Copy output"]}),P[16]=er,P[17]=W,P[18]=U,P[19]=C):C=P[19],P[20]!==es||P[21]!==H||P[22]!==V?(_=V&&(0,i.jsxs)(s.l.LinkItem,{as:h.N_,to:`${m.Jz}/l/${H}`,onSelect:es,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.PencilIcon,{})}),"Edit loop"]}),P[20]=es,P[21]=H,P[22]=V,P[23]=_):_=P[23],P[24]!==M||P[25]!==U||P[26]!==$||P[27]!==V||P[28]!==B?(N=(U||V)&&($||B||M)&&(0,i.jsx)(s.l.Divider,{}),P[24]=M,P[25]=U,P[26]=$,P[27]=V,P[28]=B,P[29]=N):N=P[29],P[30]!==ei||P[31]!==$?(S=$&&(0,i.jsxs)(s.l.Item,{onSelect:ei,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.DuplicateIcon,{})}),"Duplicate"]}),P[30]=ei,P[31]=$,P[32]=S):S=P[32],P[33]!==q?(I=q&&(0,i.jsxs)(s.l.Item,{onSelect:q,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.PencilIcon,{})}),"Rename"]}),P[33]=q,P[34]=I):I=P[34],P[35]!==ea||P[36]!==B?(k=B&&(0,i.jsxs)(s.l.Item,{onSelect:ea,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.LinkIcon,{})}),"Copy link"]}),P[35]=ea,P[36]=B,P[37]=k):k=P[37],P[38]!==M?(L=M&&(0,i.jsxs)(s.l.Item,{onSelect:M,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.CopyIcon,{})}),"Copy JSON"]}),P[38]=M,P[39]=L):L=P[39],P[40]!==M||P[41]!==$||P[42]!==B?(D=($||B||M)&&(0,i.jsx)(s.l.Divider,{}),P[40]=M,P[41]=$,P[42]=B,P[43]=D):D=P[43],P[44]===Symbol.for("react.memo_cache_sentinel")?(T=(0,i.jsxs)(s.l.Item,{variant:"danger",onSelect:ee,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.TrashIcon,{})}),"Delete"]}),P[44]=T):T=P[44],P[45]!==X||P[46]!==Y||P[47]!==J?(E=g.W.loopsAbusePrevention&&J&&!Y&&X&&(0,i.jsxs)(s.l.LinkItem,{variant:"danger",href:(0,f.YPg)({report:`${J} (User)`,contentURL:X}),children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(d.AlertIcon,{})}),"Report"]}),P[45]=X,P[46]=Y,P[47]=J,P[48]=E):E=P[48],P[49]!==_||P[50]!==N||P[51]!==S||P[52]!==I||P[53]!==k||P[54]!==L||P[55]!==D||P[56]!==E||P[57]!==C?(A=(0,i.jsx)(r.W.Overlay,{align:"end",children:(0,i.jsxs)(s.l,{children:[C,_,N,S,I,k,L,D,T,E]})}),P[49]=_,P[50]=N,P[51]=S,P[52]=I,P[53]=k,P[54]=L,P[55]=D,P[56]=E,P[57]=C,P[58]=A):A=P[58],P[59]!==et||P[60]!==en||P[61]!==z?(R="delete"===z&&(0,i.jsx)(l.K,{title:"Delete loop",onClose:e=>{"confirm"===e?en():et()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this loop? This action cannot be undone."}),P[59]=et,P[60]=en,P[61]=z,P[62]=R):R=P[62],P[63]!==A||P[64]!==R?(O=(0,i.jsxs)(i.Fragment,{children:[A,R]}),P[63]=A,P[64]=R,P[65]=O):O=P[65],O):null}function x(e){return{owned:e?.owned,ownerLogin:e?.ownerLogin,loopURL:window.location.origin+window.location.pathname}}try{y.displayName||(y.displayName="LoopsActionMenuOverlay")}catch{}},14808:(e,t,n)=>{n.d(t,{LR:()=>o,KA:()=>D,G9:()=>p,XA:()=>_});var i=n(74848),a=n(16522),s=n(5524),r=n(96540);let l=e=>{let t,n,r,l,o,d,c,u,m,h,f,p,g,y,x=(0,a.c)(27);if(x[0]!==e){r=Symbol.for("react.early_return_sentinel");e:{let{ref:a,selected:g,...y}=e;if(y.renderItem){r=y.renderItem({selected:g,...y});break e}let{label:x,id:v,description:b,descriptionVariant:j,onSelect:w,renderDescription:C,className:_,trailingVisual:N,disabled:S}=y;p=N,t=s.l.Item,n=v,l="option",o=()=>{w({label:x,id:v,selected:g,description:b,descriptionVariant:j})},d=g,c=a,u=_,m=S,h=x,f=(b||C)&&(0,i.jsx)(s.l.Description,{variant:j,children:C?C():b})}x[0]=e,x[1]=t,x[2]=n,x[3]=r,x[4]=l,x[5]=o,x[6]=d,x[7]=c,x[8]=u,x[9]=m,x[10]=h,x[11]=f,x[12]=p}else t=x[1],n=x[2],r=x[3],l=x[4],o=x[5],d=x[6],c=x[7],u=x[8],m=x[9],h=x[10],f=x[11],p=x[12];return r!==Symbol.for("react.early_return_sentinel")?r:(x[13]!==p?(g=p?(0,i.jsx)(s.l.TrailingVisual,{children:p}):null,x[13]=p,x[14]=g):g=x[14],x[15]!==t||x[16]!==n||x[17]!==g||x[18]!==l||x[19]!==o||x[20]!==d||x[21]!==c||x[22]!==u||x[23]!==m||x[24]!==h||x[25]!==f?(y=(0,i.jsxs)(t,{role:l,onSelect:o,selected:d,ref:c,className:u,disabled:m,children:[h,f,g]},n),x[15]=t,x[16]=n,x[17]=g,x[18]=l,x[19]=o,x[20]=d,x[21]=c,x[22]=u,x[23]=m,x[24]=h,x[25]=f,x[26]=y):y=x[26],y)};l.displayName="SelectItem";let o=e=>{let t,n,l,o=(0,a.c)(18),{ref:f,selectionVariant:p,items:g,onSelect:y,controlled:x,showGroupHeading:v}=e;o[0]!==g?(t=()=>g.filter(c),o[0]=g,o[1]=t):t=o[1];let[b,j]=(0,r.useState)(t);o[2]!==g?(n=g.find(u),o[2]=g,o[3]=n):n=o[3];let w=n;if(o[4]!==x||o[5]!==w||o[6]!==g||o[7]!==y||o[8]!==f||o[9]!==b||o[10]!==p||o[11]!==v){let e,t=w?g.reduce(m,{}):null,n=g.filter(h),a=t&&Object.entries(t);o[13]!==x||o[14]!==y||o[15]!==b||o[16]!==p?(e=e=>{let{id:t}=e;if(y&&y(e),x)if(b.find(e=>e.id===t)){let e=b.filter(e=>e.id!==t);j(e),x(e)}else{let t="multiple"===p?[...b,e]:[e];j(t),x(t)}},o[13]=x,o[14]=y,o[15]=b,o[16]=p,o[17]=e):e=o[17];let c=e;l=(0,i.jsx)(i.Fragment,{children:t?(0,i.jsxs)(i.Fragment,{children:[a?a.map((e,t)=>{let[n,l]=e;return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsxs)(s.l.Group,{"aria-label":l[0]?.groupTitle||`Group ${n}`,selectionVariant:p,children:[v?(0,i.jsx)(s.l.GroupHeading,{variant:"filled",children:l[0]?.groupTitle||`Group ${n}`}):null,l.map((e,n)=>(0,i.jsx)(d,{selectedItems:b,onSelectToggle:c,controlled:x,ref:0===n&&0===t?f:void 0,...e},e.id))]},n),a.length>1&&t!==a.length-1?(0,i.jsx)(s.l.Divider,{}):null]},n)}):null,n.map(e=>(0,i.jsx)(d,{selectedItems:b,onSelectToggle:c,controlled:x,...e},e.id))]}):(0,i.jsx)(i.Fragment,{children:g.map((e,t)=>(0,i.jsx)(d,{selectedItems:b,onSelectToggle:c,controlled:x,ref:0===t?f:null,...e},e.id))})}),o[4]=x,o[5]=w,o[6]=g,o[7]=y,o[8]=f,o[9]=b,o[10]=p,o[11]=v,o[12]=l}else l=o[12];return l},d=e=>{let t,n,s,r,o,d,c,u,m,h,f,p,g,y=(0,a.c)(36);y[0]!==e?({ref:u,id:s,label:r,description:n,selectedItems:h,onSelectToggle:d,onSelect:o,controlled:t,selected:m,...c}=e,y[0]=e,y[1]=t,y[2]=n,y[3]=s,y[4]=r,y[5]=o,y[6]=d,y[7]=c,y[8]=u,y[9]=m,y[10]=h):(t=y[1],n=y[2],s=y[3],r=y[4],o=y[5],d=y[6],c=y[7],u=y[8],m=y[9],h=y[10]),y[11]!==n||y[12]!==s||y[13]!==r||y[14]!==d||y[15]!==c.descriptionVariant||y[16]!==m?(f=()=>{d({label:r,id:s,selected:m,description:n,descriptionVariant:c.descriptionVariant})},y[11]=n,y[12]=s,y[13]=r,y[14]=d,y[15]=c.descriptionVariant,y[16]=m,y[17]=f):f=y[17];let x=f;y[18]!==t||y[19]!==s||y[20]!==m||y[21]!==h?(p=t?h.some(e=>e.id===s):!!m,y[18]=t,y[19]=s,y[20]=m,y[21]=h,y[22]=p):p=y[22];let v=o||x;return y[23]!==n||y[24]!==s||y[25]!==r||y[26]!==c.className||y[27]!==c.descriptionVariant||y[28]!==c.disabled||y[29]!==c.renderDescription||y[30]!==c.renderItem||y[31]!==c.trailingVisual||y[32]!==u||y[33]!==p||y[34]!==v?(g=(0,i.jsx)(l,{label:r,id:s,description:n,descriptionVariant:c.descriptionVariant,selected:p,onSelect:v,className:c.className,renderItem:c.renderItem,ref:u,trailingVisual:c.trailingVisual,disabled:c.disabled,renderDescription:c.renderDescription}),y[23]=n,y[24]=s,y[25]=r,y[26]=c.className,y[27]=c.descriptionVariant,y[28]=c.disabled,y[29]=c.renderDescription,y[30]=c.renderItem,y[31]=c.trailingVisual,y[32]=u,y[33]=p,y[34]=v,y[35]=g):g=y[35],g};function c(e){return e.selected}function u(e){return void 0!==e.groupId}function m(e,t){return void 0!==t.groupId&&(e[t.groupId]=e[t.groupId]||[],e[t.groupId]&&e[t.groupId].push(t)),e}function h(e){return void 0===e.groupId}o.displayName="SelectBody",d.displayName="SelectBodyItem";var f=n(21373);function p(e){let t,n,s,r,l,o,d,c,u,m=(0,a.c)(23),{footerButtons:h,onSave:p,onCancel:x}=e;m[0]!==h?(t=h?.reduce(y,{save:void 0,cancel:void 0,supplementary:[]}),r="SimpleSelect-module__Footer--BWYvt",n="SimpleSelect-module__FooterContent--CCfD8",s=h?t?.supplementary.map(g):null,m[0]=h,m[1]=t,m[2]=n,m[3]=s,m[4]=r):(t=m[1],n=m[2],s=m[3],r=m[4]),m[5]!==n||m[6]!==s?(l=(0,i.jsx)("div",{className:n,children:s}),m[5]=n,m[6]=s,m[7]=l):l=m[7];let v=t?.cancel,b=t?.cancel?.content||"Cancel";m[8]!==x||m[9]!==v||m[10]!==b?(o=(0,i.jsx)(f.Q,{onClick:x,...v,children:b}),m[8]=x,m[9]=v,m[10]=b,m[11]=o):o=m[11];let j=t?.save,w=t?.save?.content||"Save";return m[12]!==p||m[13]!==j||m[14]!==w?(d=(0,i.jsx)(f.Q,{variant:"primary",onClick:p,...j,children:w}),m[12]=p,m[13]=j,m[14]=w,m[15]=d):d=m[15],m[16]!==d||m[17]!==o?(c=(0,i.jsxs)("div",{className:"SimpleSelect-module__FooterActions--ILN1s",children:[o,d]}),m[16]=d,m[17]=o,m[18]=c):c=m[18],m[19]!==c||m[20]!==r||m[21]!==l?(u=(0,i.jsxs)("div",{className:r,children:[l,c]}),m[19]=c,m[20]=r,m[21]=l,m[22]=u):u=m[22],u}function g(e){let{variant:t,content:n,...a}=e;return(0,i.jsx)(f.Q,{variant:t||"default",...a,children:n},n)}function y(e,t){let{action:n,...i}=t;return"save"===n||"cancel"===n?e[n]=i:e.supplementary.push(i),e}try{p.displayName||(p.displayName="SelectFooter")}catch{}var x=n(38621),v=n(81960),b=n(26108);let j=e=>{let t,n,s,r=(0,a.c)(8),{id:l,title:o,onClose:d}=e,c=void 0===o?"Select an item":o;return r[0]!==l||r[1]!==c?(t=(0,i.jsx)(v.A,{id:l,as:"h1",className:"SimpleSelect-module__Title--dSeJ4",children:c}),r[0]=l,r[1]=c,r[2]=t):t=r[2],r[3]!==d?(n=(0,i.jsx)(b.K,{icon:x.XIcon,"aria-label":"Close",variant:"invisible",onClick:d}),r[3]=d,r[4]=n):n=r[4],r[5]!==t||r[6]!==n?(s=(0,i.jsxs)("div",{className:"SimpleSelect-module__Header--DPfBs",children:[t,n]}),r[5]=t,r[6]=n,r[7]=s):s=r[7],s};try{j.displayName||(j.displayName="SelectHeader")}catch{}var w=n(31604),C=n(57387);function _(e){let t,n,l,d,c,u,m,h,g,y,v,b,w,C,_,T,E=(0,a.c)(76),{variant:A,items:R,label:O,title:P,selectionVariant:F,onSelect:M,renderText:$,onSave:B,onCancel:V,selectable:U,buttonProps:q,outsideClick:H,onEscape:G,focusTarget:K,dialogProps:W,footerButtons:z}=e,Q=void 0===A?"overlay":A,Z=void 0===P?"Select an item":P,J=void 0===H?"save":H,Y=void 0===G?"save":G,X=void 0===K?"first-target":K,[ee,et]=(0,r.useState)(!1),[en,ei]=(0,r.useState)();E[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],E[0]=t):t=E[0];let[ea,es]=(0,r.useState)(t),er=(0,r.useRef)(null),el=(0,r.useId)(),eo=U?ea:R.filter(L),ed=(0,r.useRef)(null);en||(ei(R),es(R.filter(k))),E[1]!==R||E[2]!==V||E[3]!==B||E[4]!==ea||E[5]!==U||E[6]!==en?(n=(e,t)=>{if("save"===e&&(B||U)){let e=U?t||ea:R.filter(I),n=R.map(t=>e.find(e=>e.id===t.id)?{...t,selected:!0}:{...t,selected:!1});ei(n),B&&B(n)}else"cancel"===e&&V?V(en||R):"cancel"===e&&U&&es(en?.filter(S)||[]);et(!1)},E[1]=R,E[2]=V,E[3]=B,E[4]=ea,E[5]=U,E[6]=en,E[7]=n):n=E[7];let ec=n;E[8]!==ec?(l=()=>ec("save"),E[8]=ec,E[9]=l):l=E[9];let eu=l;E[10]!==ec?(d=()=>ec("cancel"),E[10]=ec,E[11]=d):d=E[11];let em=d;E[12]!==ec||E[13]!==ea||E[14]!==U||E[15]!==F?(c=e=>{es(e),ea&&U?.(e),"single"===F&&ec("save",e)},E[12]=ec,E[13]=ea,E[14]=U,E[15]=F,E[16]=c):c=E[16];let eh=c;E[17]!==ec||E[18]!==Y||E[19]!==J||E[20]!==ea?(u=e=>{"click-outside"===e||"anchor-click"===e||"close-button"===e?ec(J):"escape"===e&&ec(Y,ea)},E[17]=ec,E[18]=Y,E[19]=J,E[20]=ea,E[21]=u):u=E[21];let ef=u,ep=f.Q,eg="overlay"===Q?x.TriangleDownIcon:null;E[22]!==ee?(m=()=>et(!ee),E[22]=ee,E[23]=m):m=E[23];let ey=$?$():`${O}${!eo.length?"":`: ${eo.map(N).join(", ")}`}`;E[24]!==ep||E[25]!==q||E[26]!==ee||E[27]!==eg||E[28]!==m||E[29]!==ey?(h=(0,i.jsx)(ep,{trailingAction:eg,ref:ed,variant:"default",onClick:m,"aria-haspopup":"dialog","aria-expanded":ee,...q,children:ey}),E[24]=ep,E[25]=q,E[26]=ee,E[27]=eg,E[28]=m,E[29]=ey,E[30]=h):h=E[30],E[31]!==el||E[32]!==em||E[33]!==Z||E[34]!==Q?(g="overlay"===Q?(0,i.jsx)(j,{id:el,title:Z,onClose:em}):null,E[31]=el,E[32]=em,E[33]=Z,E[34]=Q,E[35]=g):g=E[35];let ex=U&&en?en:R;E[36]!==B||E[37]!==M||E[38]!==U||E[39]!==F?(y="single"!==F||B||U?M:e=>{M?.(e),et(!1)},E[36]=B,E[37]=M,E[38]=U,E[39]=F,E[40]=y):y=E[40];let ev=U?eh:void 0,eb="first-item"===X?er:null;return E[41]!==F||E[42]!==ex||E[43]!==y||E[44]!==ev||E[45]!==eb?(v=(0,i.jsx)(o,{selectionVariant:F,items:ex,onSelect:y,controlled:ev,ref:eb}),E[41]=F,E[42]=ex,E[43]=y,E[44]=ev,E[45]=eb,E[46]=v):v=E[46],E[47]!==F||E[48]!==v?(b=(0,i.jsx)("div",{className:"SimpleSelect-module__SelectBodyWrapper--Dre5i",children:(0,i.jsx)(s.l,{role:"listbox",selectionVariant:F,"aria-label":"Selection",children:v})}),E[47]=F,E[48]=v,E[49]=b):b=E[49],E[50]!==z||E[51]!==B||E[52]!==em||E[53]!==eu||E[54]!==Q?(w=B&&"modal"!==Q?(0,i.jsx)(p,{onSave:eu,onCancel:em,footerButtons:z}):null,E[50]=z,E[51]=B,E[52]=em,E[53]=eu,E[54]=Q,E[55]=w):w=E[55],E[56]!==g||E[57]!==b||E[58]!==w||E[59]!==Q?(C=(0,i.jsxs)("div",{"data-container":Q,className:"SimpleSelect-module__Wrapper--cFdti",children:[g,b,w]}),E[56]=g,E[57]=b,E[58]=w,E[59]=Q,E[60]=C):C=E[60],E[61]!==W||E[62]!==X||E[63]!==z||E[64]!==el||E[65]!==ef||E[66]!==ee||E[67]!==em||E[68]!==eu||E[69]!==C||E[70]!==Z||E[71]!==Q?(_=(0,i.jsx)(D,{headingId:el,open:ee,anchorRef:ed,onClose:ef,variant:Q,dialogProps:W,title:Z,selectSave:eu,selectCancel:em,footerButtons:z,focusTarget:X,firstItem:er,children:C}),E[61]=W,E[62]=X,E[63]=z,E[64]=el,E[65]=ef,E[66]=ee,E[67]=em,E[68]=eu,E[69]=C,E[70]=Z,E[71]=Q,E[72]=_):_=E[72],E[73]!==h||E[74]!==_?(T=(0,i.jsxs)(i.Fragment,{children:[h,_]}),E[73]=h,E[74]=_,E[75]=T):T=E[75],T}function N(e){return e.label}function S(e){return e.selected}function I(e){return e.selected}function k(e){return e.selected}function L(e){return e.selected}function D(e){let t,n=(0,a.c)(15),{open:s,anchorRef:r,headingId:l,focusTarget:o,firstItem:d,onClose:c,children:u,variant:m,dialogProps:h,title:f,selectSave:g,selectCancel:y,footerButtons:x,focusZoneSettings:v}=e;return n[0]!==r||n[1]!==u||n[2]!==h||n[3]!==d||n[4]!==o||n[5]!==v||n[6]!==x||n[7]!==l||n[8]!==c||n[9]!==s||n[10]!==y||n[11]!==g||n[12]!==f||n[13]!==m?(t=(0,i.jsx)(i.Fragment,{children:"overlay"===m?(0,i.jsx)(w.T,{open:s,anchorRef:r,renderAnchor:null,overlayProps:{role:"dialog","aria-labelledby":l,maxHeight:"large",maxWidth:"medium"},focusZoneSettings:v||{disabled:!0},focusTrapSettings:{initialFocusRef:"first-item"===o?d:void 0},onClose:c,children:u}):(0,i.jsx)(i.Fragment,{children:s?(0,i.jsx)(C.l,{renderBody:()=>(0,i.jsx)(C.l.Body,{className:"SimpleSelect-module__DialogBody--NoZic",children:u}),width:"large",onClose:c,title:f,renderFooter:()=>(0,i.jsx)(p,{onSave:g,onCancel:y,footerButtons:x}),position:{narrow:"fullscreen",regular:"center"},...h}):null})}),n[0]=r,n[1]=u,n[2]=h,n[3]=d,n[4]=o,n[5]=v,n[6]=x,n[7]=l,n[8]=c,n[9]=s,n[10]=y,n[11]=g,n[12]=f,n[13]=m,n[14]=t):t=n[14],t}try{_.displayName||(_.displayName="SimpleSelect")}catch{}try{D.displayName||(D.displayName="SelectContainer")}catch{}},15697:(e,t,n)=>{function i({paths:e,diffSummaries:t}){let n={};for(let i of e){let e=t[i];if(e&&e.markersMap){let t=[];for(let n in e.markersMap){let i=e.markersMap[n]?.ctx;i&&t.push(i)}n[i]=t}}return n}function a({diffSummary:e}){let t=[];if(e&&e.markersMap)for(let n in e.markersMap){let i=e.markersMap[n]?.ctx;i&&t.push({start:i[0],end:i[1]})}return t}n.d(t,{B:()=>a,i:()=>i})},16549:(e,t,n)=>{n.d(t,{oO:()=>s6,Ao:()=>s5,Yf:()=>A.Yf});var i=n(74848),a=n(68273),s=n(16522),r=n(90047),l=n(96540),o=n(36729),d=n(77430),c=n(38621),u=n(81960),m=n(26108),h=n(53627);function f(e,t="r"){(0,h.Zu)(`#${t}${e}`)}var p=n(91835),g=n(71315),y=n(83494),x=n(34164),v=n(50625),b=n(93642);let j="AddCommentEditor-module__AddCommentEditor--JFfip",w="AddCommentEditor-module__ConversationCommentBox--Q4U7y",C="AddCommentEditor-module__hideMarkdownFooter--sfStq",_="AddCommentEditor-module__showMarkdownFooter--ZyiXk",N="AddCommentEditor-module__isReplying--DYCp6",S="AddCommentEditor-module__condensed--cPcHQ";var I=n(70109),k=n(27011),L=n(71323),D=n(97283),T=n(87134),E=n(13083),A=n(3038);function R({selectedLineRange:e,leftLines:t,rightLines:n}){let i=!!n,{startOrientation:a,endOrientation:s}=e,r=c(a).findIndex(t=>(0,A.a2)(t,e.startLineNumber,e.startOrientation)),l=c(s).findIndex(t=>(0,A.a2)(t,e.endLineNumber,e.endOrientation)),o=r>=0&&l>=0;function d(e){if(!o||(0,A.Po)(e))return!1;let t=c((0,E.XU)(e.type)).indexOf(e);return t>=r&&t<=l}function c(e){var a;return i&&"left"!==("string"==typeof(a=e)?a:(0,E.XU)(a.type))?n:t}let u=c("left").filter(e=>d(e));return{selectedRightLines:c("right").filter(e=>d(e)),selectedLeftLines:u}}var O=n(61583);let P=/^b:\d+-l:(?:\d+|null)-r:(?:\d+|null)$/;function F(e){return null!=e&&P.test(e)}function M(e){return`b:${e.blobLineNumber}-l:${e.left}-r:${e.right}`}function $({diffAnchor:e,diffLines:t,isSplitView:n,lineRange:i}){let a,s=new Set([]);if(0===t.length)return{selectedLineKeys:s};if(!i)return{selectedLineKeys:new Set([])};let{startLineNumber:r,startOrientation:l,endLineNumber:o,endOrientation:d}=i,c=t;if(n){let e=(0,A.Mk)(t);c=e.leftLines,a=e.rightLines}let u={diffAnchor:e,endLineNumber:o??r,endOrientation:d??l,startLineNumber:r,startOrientation:l},m=R({selectedLineRange:u,leftLines:c,rightLines:a});for(let e=0;e<m.selectedLeftLines.length;e++){let t=m.selectedLeftLines[e];t&&!(0,A.Po)(t)&&t.key&&s.add(t.key)}for(let e=0;e<m.selectedRightLines.length;e++){let t=m.selectedRightLines[e];t&&!(0,A.Po)(t)&&t.key&&s.add(t.key)}return{selectedLineKeys:s,startOrientation:l,selectedLineRange:u}}function B(e){let t;for(t of e);return t}function V(e){return e.values().next().value}var U=n(13814);let q=(0,l.createContext)(null),H=(0,a.GV)()?function(e){let t=(0,l.useContext)(q);if(!t)throw Error("Missing DiffStoreProvider in the tree");return(0,L.P)(t,e)}:function(e){let t=(0,l.useContext)(q);if(!t)throw Error("Missing DiffStoreProvider in the tree");return(0,L.P)(t,e)},G=({children:e,...t})=>{let n=(0,l.useRef)(null),a=(0,l.useRef)(t.diffLines),s=(0,l.useRef)(t.isSplitView),r=(0,l.useRef)(t.hiddenFeatures);return n.current||(n.current=K(t)),(0,l.useEffect)(()=>{n.current&&a.current.length!==t.diffLines.length&&(n.current.getState().diffLinesSliceUpdates.updateDiffLinesHash(t.diffLines),a.current=t.diffLines)},[t,t.diffLines]),(0,l.useEffect)(()=>{n.current&&s.current!==t.isSplitView&&(n.current.getState().diffLinesSliceUpdates.updateDiffView(t.isSplitView),s.current=t.isSplitView)},[t,t.isSplitView]),(0,l.useEffect)(()=>{n.current&&!function(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}(r.current,t.hiddenFeatures)&&(n.current.setState({hiddenFeatures:t.hiddenFeatures}),r.current=t.hiddenFeatures)},[t,t.hiddenFeatures]),(0,i.jsx)(q,{value:n.current,children:e})},K=e=>(0,D.y)()((0,T.lt)((...t)=>({...(e=>({dialogMode:{activeGridCellId:null},dialogModeActions:{enableDialogMode:t=>e(()=>({dialogMode:{activeGridCellId:t}}),void 0,"dialogMode#enabled"),disableDialogMode:()=>e(()=>({dialogMode:{activeGridCellId:null}}),void 0,"dialogMode#disabled")}}))(...t),...(({diffAnchor:e,path:t,diffLines:n,fileLineCount:i,isSplitView:a})=>(s,r)=>{let l=n.reduce((e,t)=>(t.key&&(e[t.key]=t),e),{}),{selectedLineKeys:o,selectedLineRange:d,startOrientation:c}=$({diffAnchor:e,diffLines:n,isSplitView:a,lineRange:function(e){let t=(0,O.EW)(g.fV.hash);if(!t||t[1]!==e)return;let n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0,a=t[4]?"L"===t[4]?"left":"right":void 0,s=t[5]?parseInt(t[5]):void 0;if(n&&i)return{diffAnchor:e,endOrientation:a??n,endLineNumber:s??i,startOrientation:n,startLineNumber:i}}(e)}),u=V(o),m=B(o),h=n.reduce((e,t)=>{let n=t.key;return n&&o.has(n)&&(e[n]={isSelected:!0,isFirstSelected:u===n,isLastSelected:m===n}),e},{}),f=null;if(u){let e=l[u];if(e&&e.key&&c){let t="left"===c?e.left:e.right;t&&(f={lineNumber:t,orientation:c,shouldStartConversation:!1,lineKey:e.key})}}return{diffLines:{diffAnchor:e,_diffLines:n,_diffLinesHash:l,selectedLinesInfo:h,fileLineCount:i,firstLineSelectionOnDrag:f,_firstSelectedLineInfo:f?{lineKey:f.lineKey,lineNumber:f.lineNumber,orientation:f.orientation}:null,getDiffLinesInfo:()=>r().diffLines._diffLines,getSplitDiffLinesFromLineRange:e=>{let t=(0,A.Mk)(r().diffLines._diffLines);return R({selectedLineRange:e,leftLines:t.leftLines,rightLines:t.rightLines})},getSelectedDiffLines:()=>{let e=[];for(let t of r().diffLines.selectedLineKeys){let n=r().diffLines._diffLinesHash[t];n&&e.push(n)}return e},getfirstLineSelectionOnDrag:()=>r().diffLines.firstLineSelectionOnDrag,getSelectedLineRange:()=>r().diffLines.selectedLineRange,hasSelectedLines:()=>r().diffLines.selectedLineKeys.size>0,isSplitView:a,selectedLineKeys:o,selectedLineRange:d},diffLinesSliceUpdates:{updateDiffLinesHash:e=>{let t=e.reduce((e,t)=>(t.key&&(e[t.key]=t),e),{});s(n=>({diffLines:{...n.diffLines,_diffLines:e,_diffLinesHash:t}}),void 0,"updateDiffLines")},updateDiffView:e=>s(t=>({diffLines:{...t.diffLines,isSplitView:e}}),void 0,"update diff view settings")},diffLinesActions:{clearFirstLineSelectionOnDrag:()=>s(e=>({diffLines:{...e.diffLines,firstLineSelectionOnDrag:null}}),void 0,"clearFirstLineSelectionOnDrag"),addLineToSelection:({lineKey:n,orientation:i},a)=>{let l;if(!n)return;let o=r().diffLines._diffLinesHash[n];if(!o)return;let d=r().diffLines.firstLineSelectionOnDrag,c=r().diffLines._firstSelectedLineInfo,u=r().diffLines.selectedLineRange;if(d&&n===d.lineKey||!u){let e="right"===i?o.right:o.left;if(!e)return;r().diffLinesActions.selectLine({lineKey:n,firstLineSelectionOnDrag:{lineNumber:e,orientation:i,lineKey:n,shouldStartConversation:!1}},a);return}if(!c)return;l=!function({current:e,currentOrientation:t,previous:n,previousOrientation:i}){return!!n&&("left"===i&&"left"===t&&!!e.left&&!!n.left&&n.left>e.left||"right"===i&&"right"===t&&!!e.right&&!!n.right&&n.right>e.right||"right"===i&&"left"===t&&!!e.right&&!!n.right&&n.right>e.right||"left"===i&&"right"===t&&!!e.left&&!!n.left&&n.left>e.left||!1)}({current:o,currentOrientation:i,previous:r().diffLines._diffLinesHash[c.lineKey],previousOrientation:c.orientation})?{...u,startLineNumber:c.lineNumber,startOrientation:c.orientation,endLineNumber:("left"===i?o?.left:o?.right)??-1,endOrientation:i}:{...u,startLineNumber:("left"===i?o?.left:o?.right)??-1,startOrientation:i,endLineNumber:c.lineNumber,endOrientation:c.orientation};let{selectedLineKeys:m,selectedLineRange:h}=$({diffAnchor:e,diffLines:r().diffLines._diffLines,isSplitView:r().diffLines.isSplitView,lineRange:l}),f=V(m),p=B(m),y=Array.from(m).reduce((e,t)=>(e[t]={isFirstSelected:t===f,isLastSelected:t===p,isSelected:!0},e),{});if(!h?.endLineNumber||!h?.startLineNumber)return;let x=new U.J(h,t);g.cg?.dispatchEvent(x),s(e=>({diffLines:{...e.diffLines,selectedLineKeys:m,selectedLinesInfo:y,selectedLineRange:h}}),void 0,"addLineToSelection"),a(h)},clearSelectedLines:()=>{s(e=>({diffLines:{...e.diffLines,firstLineSelectionOnDrag:null,selectedLineKeys:new Set([]),selectedLinesInfo:{},selectedLineRange:void 0,_firstSelectedLineInfo:null}}),void 0,"clearSelectedLines")},selectLine:({lineKey:e,firstLineSelectionOnDrag:n},i)=>{if(!e)return;let a=r().diffLines._diffLinesHash[e];if(!a)return;let l={[e]:{isFirstSelected:!0,isLastSelected:!0,isSelected:!0}},o="left"===n.orientation?a.left:a.right;if(!o)return;let d={diffAnchor:r().diffLines.diffAnchor,endLineNumber:o,endOrientation:n.orientation,startLineNumber:o,startOrientation:n.orientation},c=new U.J(d,t);g.cg?.dispatchEvent(c),s(t=>({diffLines:{...t.diffLines,firstLineSelectionOnDrag:{...n,lineKey:e},selectedLineKeys:new Set([e]),selectedLinesInfo:l,selectedLineRange:d,_firstSelectedLineInfo:{lineKey:e,lineNumber:n.lineNumber,orientation:n.orientation}}}),void 0,"selectLine"),i(d)},selectMultipleLines:({startLineKey:n,endLineKey:i,startOrientation:a,endOrientation:l,firstLineSelectionOnDrag:o},d)=>{if(!n||!i||!o)return;let c=r().diffLines._diffLinesHash[n],u=r().diffLines._diffLinesHash[i];if(!c||!u||!c.left&&!c.right||!u.left&&!u.right)return;let m={diffAnchor:e,endLineNumber:("right"===l?u.right:u.left)??-1,endOrientation:l,startLineNumber:("right"===a?c.right:c.left)??-1,startOrientation:a},{selectedLineKeys:h,selectedLineRange:f}=$({diffAnchor:e,diffLines:r().diffLines._diffLines,isSplitView:r().diffLines.isSplitView,lineRange:m}),p=V(h),y=B(h),x=Array.from(h).reduce((e,t)=>(e[t]={isFirstSelected:t===p,isLastSelected:t===y,isSelected:!0},e),{});if(!f?.endLineNumber||!f?.startLineNumber)return;let v=new U.J(f,t);g.cg?.dispatchEvent(v),s(e=>({diffLines:{...e.diffLines,selectedLinesInfo:x,selectedLineKeys:h,firstLineSelectionOnDrag:o,selectedLineRange:f,_firstSelectedLineInfo:{lineNumber:o.lineNumber,orientation:o.orientation,lineKey:o.lineKey}}}),void 0,"selectMultipleLines"),d(f)}}}})(e)(...t),...(({hiddenFeatures:e})=>()=>({hiddenFeatures:e}))(e)(...t),...(({addInjectedContextLines:e})=>()=>({injectedContextLinesActions:{addInjectedContextLines:e}}))(e)(...t),...(({startNewConversationForLineOrFileMap:e})=>(t,n)=>({startNewConversationForLineOrFileMap:e,getMoveNewCommentDataForLine:e=>n().startNewConversationForLineOrFileMap[e],addStartNewCommentOnLine:(t,n,i)=>{e[t]={diffLineKey:i,startNewComment:n}}}))(e)(...t),...(({newTreeEntry:e,oldTreeEntry:t})=>()=>({treeEntries:{newTreeEntry:e,oldTreeEntry:t}}))(e)(...t)}),{name:`diff-store-${e.diffAnchor}`}));try{q.displayName||(q.displayName="DiffStoreContext")}catch{}try{G.displayName||(G.displayName="DiffStoreProvider")}catch{}let W=(0,a.GV)()?()=>H(eu):()=>H(e=>e.diffLines.getSplitDiffLinesFromLineRange),z=(0,a.GV)()?()=>H(em):()=>H(e=>e.diffLines.getSelectedDiffLines),Q=(0,a.GV)()?()=>H(eh):()=>H(e=>e.diffLines.getDiffLinesInfo),Z=(0,a.GV)()?()=>H(ef):()=>H(e=>e.diffLines.getfirstLineSelectionOnDrag),J=(0,a.GV)()?()=>H(ep):()=>H(e=>e.diffLines.getSelectedLineRange),Y=(0,a.GV)()?()=>H(eg):()=>H(e=>e.diffLines.hasSelectedLines),X=(0,a.GV)()?()=>H(ey):()=>H(e=>e.hiddenFeatures),ee=(0,a.GV)()?e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=t=>!!e&&t.dialogMode.activeGridCellId===e,n[0]=e,n[1]=t):t=n[1],H(t)}:e=>H(t=>!!e&&t.dialogMode.activeGridCellId===e),et=(0,a.GV)()?()=>H(ex):()=>H(e=>e.dialogModeActions),en=(0,a.GV)()?()=>H(ev):()=>H(e=>e.diffLines.diffAnchor),ei=(0,a.GV)()?()=>H(eb):()=>H(e=>e.diffLines.fileLineCount),ea={isSelected:!1,isFirstSelected:!1,isLastSelected:!1},es=(0,a.GV)()?e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=t=>e&&t.diffLines.selectedLinesInfo[e]||ea,n[0]=e,n[1]=t):t=n[1],H(t)}:e=>H(t=>e&&t.diffLines.selectedLinesInfo[e]||ea),er=(0,a.GV)()?()=>H(ej):()=>H(e=>e.diffLinesActions),el=(0,a.GV)()?()=>H(ew):()=>H(e=>e.injectedContextLinesActions),eo=(0,a.GV)()?()=>H(eC):()=>H(e=>e.treeEntries),ed=(0,a.GV)()?()=>H(e_):()=>H(e=>e.getMoveNewCommentDataForLine),ec=(0,a.GV)()?()=>H(eN):()=>H(e=>e.addStartNewCommentOnLine);function eu(e){return e.diffLines.getSplitDiffLinesFromLineRange}function em(e){return e.diffLines.getSelectedDiffLines}function eh(e){return e.diffLines.getDiffLinesInfo}function ef(e){return e.diffLines.getfirstLineSelectionOnDrag}function ep(e){return e.diffLines.getSelectedLineRange}function eg(e){return e.diffLines.hasSelectedLines}function ey(e){return e.hiddenFeatures}function ex(e){return e.dialogModeActions}function ev(e){return e.diffLines.diffAnchor}function eb(e){return e.diffLines.fileLineCount}function ej(e){return e.diffLinesActions}function ew(e){return e.injectedContextLinesActions}function eC(e){return e.treeEntries}function e_(e){return e.getMoveNewCommentDataForLine}function eN(e){return e.addStartNewCommentOnLine}var eS=n(4559);function eI(){(0,eS.i)("Selection Cleared")}function ek({diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}){if(i&&t){var s;(0,O.i8)({diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}),(s={diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}).startLineNumber===s.endLineNumber&&s.startOrientation===s.endOrientation?(0,eS.i)(`${"left"===s.startOrientation?"L":"R"}${s.startLineNumber} selected.`):(0,eS.i)(`${"left"===s.startOrientation?"L":"R"}${s.startLineNumber} to ${"left"===s.endOrientation?"L":"R"}${s.endLineNumber} selected.`)}}var eL=n(3252),eD=n(71317);let eT="comment",eE="review",eA=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h,f,L,D,T,E,A,R,O,P,F,M=(0,s.c)(78),{batchingEnabled:$,condensed:B,fileLevelComment:V,filePath:U,focusOnMount:q,isReplying:H,lineNumber:G,onAddComment:K,onCancelComment:W,onPersistedCommentExists:z,quotedText:Q,side:Z,startLineNumber:J,threadId:Y,suggestedChangesConfig:X,commentLineChangeConfig:ee}=e,et=void 0===Q?"":Q,[en,ei]=(0,l.useState)(et),[ea,es]=(0,l.useState)(null),el=(0,l.useRef)(et),[eo,ed]=(0,l.useState)(),ec=(0,l.useRef)(null),eu=(0,l.useRef)(null),em=(0,k.it)(),eh=(0,l.useRef)(void 0),{selectMultipleLines:ef,clearSelectedLines:ep}=er();M[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{(0,eD.k)(e??"",100),ed(e)},M[0]=t):t=M[0];let eg=t,ey=null!==ea,ex=(0,k.Kp)(),{persistCommentToStorage:ev,removePersistedCommentFromStorage:eb,persistCommentOnGivenLineToStorage:ej}=(0,v.L)({diffSide:Z,filePath:U,line:G,subjectId:ex,threadId:Y,handlePersistedCommentExists:e=>{let{text:t,shouldFocus:n,startLine:i,startSide:a,startLineKey:s,endLineKey:r}=e;if(t){if(ei(t),n&&ec.current&&(ec.current.focus(),ec.current.moveCursorToEnd(),ew({text:t,startLine:i,startSide:a,startLineKey:s,endLineKey:r}),i)){let e="LEFT"===Z?"left":"right";ef({endLineKey:r,endOrientation:e,startLineKey:s,startOrientation:e,firstLineSelectionOnDrag:{lineKey:s??"b:0-l:0-r:0",lineNumber:G??0,orientation:e,shouldStartConversation:!1}},ek)}z?.()}},fileLevelComment:!!V}),ew=ev;if(M[1]!==et?(n=()=>{et!==el.current&&(el.current=et,ei(et))},a=[et],M[1]=et,M[2]=n,M[3]=a):(n=M[2],a=M[3]),(0,l.useEffect)(n,a),M[4]!==ep||M[5]!==ee||M[6]!==en||M[7]!==U||M[8]!==G||M[9]!==W||M[10]!==ej||M[11]!==eb||M[12]!==ef||M[13]!==Z?(r=()=>{if(ee){if(null!==(0,eL.T)(en))return void ee.setErrorMessage("Changing the line number of a comment with a suggested change is not supported.");if(ee.closeLineMovingDialog(),ej({text:en,givenLineDiffSide:ee.diffSide,givenFilePath:U,givenLine:ee.endLineNumber,shouldBeFileLevelComment:ee.isFileLevelComment,startLine:ee.startLineNumber,startLineKey:ee.startDiffLineKey,endLineKey:ee.endDiffLineKey}),eb(),G!==ee.endLineNumber||ee.isFileLevelComment)ee.startConversationOnNewLine(),W?.(!1);else if(ee.endDiffLineKey&&ee.startDiffLineKey&&eh.current!==ee){eh.current=ee;let e="LEFT"===Z?"left":"right";ef({endLineKey:ee.endDiffLineKey,endOrientation:e,startLineKey:ee.startDiffLineKey,startOrientation:e,firstLineSelectionOnDrag:{lineKey:ee.startDiffLineKey??"b:0-l:0-r:0",lineNumber:G??0,orientation:e,shouldStartConversation:!1}},ek)}else ee.startDiffLineKey||ep()}},o=[ep,ee,en,U,G,W,ej,eb,ef,Z],M[4]=ep,M[5]=ee,M[6]=en,M[7]=U,M[8]=G,M[9]=W,M[10]=ej,M[11]=eb,M[12]=ef,M[13]=Z,M[14]=r,M[15]=o):(r=M[14],o=M[15]),(0,l.useEffect)(r,o),M[16]!==q?(c=()=>{if(q){let e=setTimeout(()=>{if(g.XC&&g.cg){if(eu.current){let e=eu.current,t=e.getBoundingClientRect(),n=g.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(g.cg?.innerHeight||n))){let i=t.top,a=g.XC?.documentElement.getBoundingClientRect().top||0,s=.6666666666666666*e.clientHeight;g.cg?.scrollTo({top:i-a-.6666666666666666*n+s,behavior:"smooth"})}}ec.current&&(ec.current.focus(),ec.current.moveCursorToEnd())}},100);return()=>{window.clearTimeout(e)}}},d=[q],M[16]=q,M[17]=d,M[18]=c):(d=M[17],c=M[18]),(0,l.useEffect)(c,d),M[19]!==en||M[20]!==ey||M[21]!==K||M[22]!==W||M[23]!==eb||M[24]!==X?.sourceContentFromDiffLines){let e,t=e=>{let{submitBatch:t,action:n}=e,i="Failed to save comment";if(ey)return;if(!en.trim())return void eg(`${i}: Body can't be blank`);es(n),ed(void 0),eg(void 0);let a=(0,b.u)(en,X?.sourceContentFromDiffLines??"");if(!a.isValid){eg(a.errorMessage),ed(a.errorMessage),es(null);return}K?.({commentText:en,onCompleted(){es(null),u()},onError(e){es(null),e.message&&(i=`${i}: ${e.message}`),eg(i)},submitBatch:t})};m=()=>{t({submitBatch:!1,action:eE})},h=()=>{t({submitBatch:!0,action:eT})},M[28]!==W||M[29]!==eb?(e=()=>{eb(),ei(""),W?.()},M[28]=W,M[29]=eb,M[30]=e):e=M[30],u=e,M[19]=en,M[20]=ey,M[21]=K,M[22]=W,M[23]=eb,M[24]=X?.sourceContentFromDiffLines,M[25]=u,M[26]=m,M[27]=h}else u=M[25],m=M[26],h=M[27];M[31]!==ew||M[32]!==Z||M[33]!==J?(f=e=>{eg(void 0),ew({text:e,startLine:J,startSide:J?Z:void 0}),ei(e)},M[31]=ew,M[32]=Z,M[33]=J,M[34]=f):f=M[34];let eC=f;M[35]!==h?(L={"pull-requests-conversations:submit-comment-and-review":h},M[35]=h,M[36]=L):L=M[36],M[37]!==u||M[38]!==en?(D=e=>{"Escape"!==e.key||en.trim()?e.stopPropagation():(e.preventDefault(),u())},M[37]=u,M[38]=en,M[39]=D):D=M[39];let e_=$?m:h,eN=B||H?C:_,eS=H&&N,eI=B&&S;return M[40]!==eN||M[41]!==eS||M[42]!==eI?(T=(0,x.$)(w,eN,eS,eI),M[40]=eN,M[41]=eS,M[42]=eI,M[43]=T):T=M[43],M[44]!==u||M[45]!==W?(E=W&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:"default",onClick:u,children:"Cancel"}),M[44]=u,M[45]=W,M[46]=E):E=M[46],M[47]!==$||M[48]!==em||M[49]!==h||M[50]!==H||M[51]!==ea?(A=!em&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:$?"default":"primary",onClick:h,ref:eu,loading:ea===eT,children:H?"Reply":"Comment"}),M[47]=$,M[48]=em,M[49]=h,M[50]=H,M[51]=ea,M[52]=A):A=M[52],M[53]!==$||M[54]!==em||M[55]!==m||M[56]!==ea?(R=$&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:"primary",onClick:m,loading:ea===eE,children:em?"Add review comment":"Start a review"}),M[53]=$,M[54]=em,M[55]=m,M[56]=ea,M[57]=R):R=M[57],M[58]!==en||M[59]!==eo||M[60]!==U||M[61]!==eC||M[62]!==ey||M[63]!==G||M[64]!==J||M[65]!==X||M[66]!==e_||M[67]!==T||M[68]!==E||M[69]!==A||M[70]!==R?(O=(0,i.jsxs)(I.S,{ref:ec,label:"Add diff comment",value:en,onChange:eC,onPrimaryAction:e_,suggestedChangesConfig:X,markdownErrorMessage:eo,lineNumber:G,filePath:U,startLineNumber:J,disabled:ey,className:T,children:[E,A,R]}),M[58]=en,M[59]=eo,M[60]=U,M[61]=eC,M[62]=ey,M[63]=G,M[64]=J,M[65]=X,M[66]=e_,M[67]=T,M[68]=E,M[69]=A,M[70]=R,M[71]=O):O=M[71],M[72]!==D||M[73]!==O?(P=(0,i.jsx)("div",{className:j,onKeyDown:D,children:O}),M[72]=D,M[73]=O,M[74]=P):P=M[74],M[75]!==L||M[76]!==P?(F=(0,i.jsx)(y.tL,{commands:L,children:P}),M[75]=L,M[76]=P,M[77]=F):F=M[77],F}:function({batchingEnabled:e,condensed:t,fileLevelComment:n,filePath:a,focusOnMount:s,isReplying:r,lineNumber:o,onAddComment:d,onCancelComment:c,onPersistedCommentExists:u,quotedText:m="",side:h,startLineNumber:f,threadId:L,suggestedChangesConfig:D,commentLineChangeConfig:T}){let[E,A]=(0,l.useState)(m),[R,O]=(0,l.useState)(null),P=(0,l.useRef)(m),[F,M]=(0,l.useState)(),$=(0,l.useRef)(null),B=(0,l.useRef)(null),V=(0,k.it)(),U=(0,l.useRef)(void 0),{selectMultipleLines:q,clearSelectedLines:H}=er(),G=(0,l.useCallback)(e=>{(0,eD.k)(e??"",100),M(e)},[M]),K=null!==R,W=(0,k.Kp)(),{persistCommentToStorage:z,removePersistedCommentFromStorage:Q,persistCommentOnGivenLineToStorage:Z}=(0,v.L)({diffSide:h,filePath:a,line:o,subjectId:W,threadId:L,handlePersistedCommentExists:({text:e,shouldFocus:t,startLine:n,startSide:i,startLineKey:a,endLineKey:s})=>{if(e){if(A(e),t&&$.current&&($.current.focus(),$.current.moveCursorToEnd(),z({text:e,startLine:n,startSide:i,startLineKey:a,endLineKey:s}),n)){let e="LEFT"===h?"left":"right";q({endLineKey:s,endOrientation:e,startLineKey:a,startOrientation:e,firstLineSelectionOnDrag:{lineKey:a??"b:0-l:0-r:0",lineNumber:o??0,orientation:e,shouldStartConversation:!1}},ek)}u?.()}},fileLevelComment:!!n});(0,l.useEffect)(()=>{m!==P.current&&(P.current=m,A(m))},[m]),(0,l.useEffect)(()=>{if(T){if(null!==(0,eL.T)(E))return void T.setErrorMessage("Changing the line number of a comment with a suggested change is not supported.");if(T.closeLineMovingDialog(),Z({text:E,givenLineDiffSide:T.diffSide,givenFilePath:a,givenLine:T.endLineNumber,shouldBeFileLevelComment:T.isFileLevelComment,startLine:T.startLineNumber,startLineKey:T.startDiffLineKey,endLineKey:T.endDiffLineKey}),Q(),o!==T.endLineNumber||T.isFileLevelComment)T.startConversationOnNewLine(),c?.(!1);else if(T.endDiffLineKey&&T.startDiffLineKey&&U.current!==T){U.current=T;let e="LEFT"===h?"left":"right";q({endLineKey:T.endDiffLineKey,endOrientation:e,startLineKey:T.startDiffLineKey,startOrientation:e,firstLineSelectionOnDrag:{lineKey:T.startDiffLineKey??"b:0-l:0-r:0",lineNumber:o??0,orientation:e,shouldStartConversation:!1}},ek)}else T.startDiffLineKey||H()}},[H,T,E,a,o,c,Z,Q,q,h]),(0,l.useEffect)(()=>{if(s){let e=setTimeout(()=>{if(g.XC&&g.cg){if(B.current){let e=B.current,t=e.getBoundingClientRect(),n=g.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(g.cg?.innerHeight||n))){let i=t.top,a=g.XC?.documentElement.getBoundingClientRect().top||0,s=e.clientHeight*(2/3);g.cg?.scrollTo({top:i-a-2/3*n+s,behavior:"smooth"})}}$.current&&($.current.focus(),$.current.moveCursorToEnd())}},100);return()=>{window.clearTimeout(e)}}},[s]);let J=({submitBatch:e,action:t})=>{let n="Failed to save comment";if(K)return;if(!E.trim())return void G(`${n}: Body can't be blank`);O(t),M(void 0),G(void 0);let i=(0,b.u)(E,D?.sourceContentFromDiffLines??"");if(!i.isValid){G(i.errorMessage),M(i.errorMessage),O(null);return}d?.({commentText:E,onCompleted(){O(null),ee()},onError(e){O(null),e.message&&(n=`${n}: ${e.message}`),G(n)},submitBatch:e})},Y=()=>{J({submitBatch:!1,action:eE})},X=()=>{J({submitBatch:!0,action:eT})},ee=(0,l.useCallback)(()=>{Q(),A(""),c?.()},[c,Q]);return(0,i.jsx)(y.tL,{commands:{"pull-requests-conversations:submit-comment-and-review":X},children:(0,i.jsx)("div",{className:j,onKeyDown:e=>{"Escape"!==e.key||E.trim()?e.stopPropagation():(e.preventDefault(),ee())},children:(0,i.jsxs)(I.S,{ref:$,label:"Add diff comment",value:E,onChange:e=>{G(void 0),z({text:e,startLine:f,startSide:f?h:void 0}),A(e)},onPrimaryAction:e?Y:X,suggestedChangesConfig:D,markdownErrorMessage:F,lineNumber:o,filePath:a,startLineNumber:f,disabled:K,className:(0,x.$)(w,t||r?C:_,r&&N,t&&S),children:[c&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:"default",onClick:ee,children:"Cancel"}),!V&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:e?"default":"primary",onClick:X,ref:B,loading:R===eT,children:r?"Reply":"Comment"}),e&&(0,i.jsx)(p.x,{className:"py-1 px-2",variant:"primary",onClick:Y,loading:R===eE,children:V?"Add review comment":"Start a review"})]})})})};try{eA.displayName||(eA.displayName="AddCommentEditor")}catch{}var eR=n(21373),eO=n(57387),eP=n(15837),eF=n(86877),eM=n(33989),e$=n(30093),eB=n(94236),eV=n(5524);let eU=(0,a.GV)()?function(e){let t,n,a,r,o,d,u=(0,s.c)(25),{ariaLabelId:m,currentLineNumberText:h,setCommentLineChangeConfig:f,baseEndLineNumber:p,diffSide:g,baseStartLineNumber:y}=e,[x,v]=(0,l.useState)(!1);u[0]!==p||u[1]!==y?(t=()=>y&&p?"lineRange":p?"line":"file",u[0]=p,u[1]=y,u[2]=t):t=u[2];let[b,j]=(0,l.useState)(t),[w,C]=(0,l.useState)("LEFT"===g),[_,N]=(0,l.useState)(y?String(y):""),[S,I]=(0,l.useState)(p?String(p):""),[k,L]=(0,l.useState)(""),D=ed(),T=(0,l.useRef)(null);u[3]!==S||u[4]!==D||u[5]!==w||u[6]!==b||u[7]!==f||u[8]!==_?(n=()=>{let e=D(eK(w,Number(S),"file"===b)),t=D(eK(w,Number(_),"file"===b)),n=e?.startNewComment,i=e?.diffLineKey,a=t?.diffLineKey;(ez("lineRange"===b?_:void 0,S)||"file"===b)&&n&&i?f(eW({isLeftSide:w,startLineNumber:"lineRange"===b?Number(_):void 0,endDiffLineKey:i,endLineNumber:Number(S),isFileLevelComment:"file"===b,startDiffLineKey:"lineRange"===b?a:void 0,startConversationOnNewLine:n,closeLineMovingDialog:()=>v(!1),setErrorMessage:e=>L(e)})):L("Please enter a valid line number or range.")},u[3]=S,u[4]=D,u[5]=w,u[6]=b,u[7]=f,u[8]=_,u[9]=n):n=u[9];let E=n;return u[10]===Symbol.for("react.memo_cache_sentinel")?(a=()=>v(!0),u[10]=a):a=u[10],u[11]!==m||u[12]!==h?(r=(0,i.jsx)(eR.Q,{"aria-labelledby":m,"aria-description":"Select to change location",ref:T,type:"button",size:"small",onClick:a,trailingAction:c.TriangleDownIcon,children:h}),u[11]=m,u[12]=h,u[13]=r):r=u[13],u[14]!==S||u[15]!==k||u[16]!==x||u[17]!==w||u[18]!==b||u[19]!==_||u[20]!==E?(o=x&&(0,i.jsx)(eO.l,{onClose:()=>v(!1),returnFocusRef:T,title:"Add comment on",width:"medium",footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>{v(!1)}},{buttonType:"primary",content:"Save",onClick:E}],children:(0,i.jsxs)(eP.A,{name:"line-number-selection",onChange:e=>{j(e)},children:[(0,i.jsx)(eP.A.Label,{}),(0,i.jsxs)(eF.A,{children:[(0,i.jsx)(eM.A,{value:"line",defaultChecked:"line"===b}),(0,i.jsx)(eF.A.Label,{children:"Line number"}),"line"===b&&(0,i.jsxs)(eF.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eG,{isLeftSelected:w,setIsLeftSelected:C}),(0,i.jsx)(e$.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:S,onChange:e=>I(e.target.value),onKeyDown:e=>{"Enter"===e.key&&E()}})]})]}),(0,i.jsxs)(eF.A,{children:[(0,i.jsx)(eM.A,{value:"lineRange",defaultChecked:"lineRange"===b}),(0,i.jsx)(eF.A.Label,{children:"Line range"}),"lineRange"===b&&(0,i.jsxs)(eF.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eG,{isLeftSelected:w,setIsLeftSelected:C}),(0,i.jsx)(e$.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:_,onChange:e=>N(e.target.value),onKeyDown:e=>{"Enter"===e.key&&E()}}),(0,i.jsx)(c.ArrowRightIcon,{className:"mt-2 mx-2"}),(0,i.jsx)(e$.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:S,onChange:e=>I(e.target.value),onKeyDown:e=>{"Enter"===e.key&&E()}})]})]}),(0,i.jsxs)(eF.A,{children:[(0,i.jsx)(eM.A,{value:"file",defaultChecked:"file"===b}),(0,i.jsx)(eF.A.Label,{children:"File"})]}),k&&(0,i.jsx)(eP.A.Validation,{variant:"error",children:k})]})}),u[14]=S,u[15]=k,u[16]=x,u[17]=w,u[18]=b,u[19]=_,u[20]=E,u[21]=o):o=u[21],u[22]!==r||u[23]!==o?(d=(0,i.jsxs)("div",{className:"ml-1",children:[r,o]}),u[22]=r,u[23]=o,u[24]=d):d=u[24],d}:function({ariaLabelId:e,currentLineNumberText:t,setCommentLineChangeConfig:n,baseEndLineNumber:a,diffSide:s,baseStartLineNumber:r}){let[o,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)(()=>r&&a?"lineRange":a?"line":"file"),[h,f]=(0,l.useState)("LEFT"===s),[p,g]=(0,l.useState)(r?String(r):""),[y,x]=(0,l.useState)(a?String(a):""),[v,b]=(0,l.useState)(""),j=ed(),w=(0,l.useRef)(null),C=(0,l.useCallback)(()=>{let e=j(eK(h,Number(y),"file"===u)),t=j(eK(h,Number(p),"file"===u)),i=e?.startNewComment,a=e?.diffLineKey,s=t?.diffLineKey;(ez("lineRange"===u?p:void 0,y)||"file"===u)&&i&&a?n(eW({isLeftSide:h,startLineNumber:"lineRange"===u?Number(p):void 0,endDiffLineKey:a,endLineNumber:Number(y),isFileLevelComment:"file"===u,startDiffLineKey:"lineRange"===u?s:void 0,startConversationOnNewLine:i,closeLineMovingDialog:()=>d(!1),setErrorMessage:e=>b(e)})):b("Please enter a valid line number or range.")},[j,h,y,u,p,n]);return(0,i.jsxs)("div",{className:"ml-1",children:[(0,i.jsx)(eR.Q,{"aria-labelledby":e,"aria-description":"Select to change location",ref:w,type:"button",size:"small",onClick:()=>d(!0),trailingAction:c.TriangleDownIcon,children:t}),o&&(0,i.jsx)(eO.l,{onClose:()=>d(!1),returnFocusRef:w,title:"Add comment on",width:"medium",footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>{d(!1)}},{buttonType:"primary",content:"Save",onClick:C}],children:(0,i.jsxs)(eP.A,{name:"line-number-selection",onChange:e=>{m(e)},children:[(0,i.jsx)(eP.A.Label,{}),(0,i.jsxs)(eF.A,{children:[(0,i.jsx)(eM.A,{value:"line",defaultChecked:"line"===u}),(0,i.jsx)(eF.A.Label,{children:"Line number"}),"line"===u&&(0,i.jsxs)(eF.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eG,{isLeftSelected:h,setIsLeftSelected:f}),(0,i.jsx)(e$.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:y,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key&&C()}})]})]}),(0,i.jsxs)(eF.A,{children:[(0,i.jsx)(eM.A,{value:"lineRange",defaultChecked:"lineRange"===u}),(0,i.jsx)(eF.A.Label,{children:"Line range"}),"lineRange"===u&&(0,i.jsxs)(eF.A.Caption,{className:"d-flex align-items-center",children:[(0,i.jsx)(eG,{isLeftSelected:h,setIsLeftSelected:f}),(0,i.jsx)(e$.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:p,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&C()}}),(0,i.jsx)(c.ArrowRightIcon,{className:"mt-2 mx-2"}),(0,i.jsx)(e$.A,{autoComplete:"off",className:"ml-1","aria-label":"Line number",name:"lineNumber",value:y,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key&&C()}})]})]}),(0,i.jsxs)(eF.A,{children:[(0,i.jsx)(eM.A,{value:"file",defaultChecked:"file"===u}),(0,i.jsx)(eF.A.Label,{children:"File"})]}),v&&(0,i.jsx)(eP.A.Validation,{variant:"error",children:v})]})})]})},eq="Left (L)",eH="Right (R)",eG=(0,a.GV)()?function(e){let t,n,a,r,l,o=(0,s.c)(12),{isLeftSelected:d,setIsLeftSelected:c}=e,u=d?eq:eH;return o[0]!==u?(t=(0,i.jsx)(eB.W.Button,{children:u}),o[0]=u,o[1]=t):t=o[1],o[2]!==c?(n=(0,i.jsx)(eV.l.Item,{onSelect:()=>{c(!0)},children:eq}),o[2]=c,o[3]=n):n=o[3],o[4]!==c?(a=(0,i.jsx)(eV.l.Item,{onSelect:()=>{c(!1)},children:eH}),o[4]=c,o[5]=a):a=o[5],o[6]!==n||o[7]!==a?(r=(0,i.jsx)(eB.W.Overlay,{children:(0,i.jsxs)(eV.l,{children:[n,a]})}),o[6]=n,o[7]=a,o[8]=r):r=o[8],o[9]!==t||o[10]!==r?(l=(0,i.jsxs)(eB.W,{children:[t,r]}),o[9]=t,o[10]=r,o[11]=l):l=o[11],l}:function({isLeftSelected:e,setIsLeftSelected:t}){let n=e?eq:eH;return(0,i.jsxs)(eB.W,{children:[(0,i.jsx)(eB.W.Button,{children:n}),(0,i.jsx)(eB.W.Overlay,{children:(0,i.jsxs)(eV.l,{children:[(0,i.jsx)(eV.l.Item,{onSelect:()=>{t(!0)},children:eq}),(0,i.jsx)(eV.l.Item,{onSelect:()=>{t(!1)},children:eH})]})})]})};function eK(e,t,n){return n?"F0":`${e?"L":"R"}${t}`}function eW(e){return{diffSide:e.isLeftSide?"LEFT":"RIGHT",startLineNumber:e.startLineNumber,endLineNumber:e.endLineNumber,isFileLevelComment:e.isFileLevelComment,startDiffLineKey:e.startDiffLineKey,endDiffLineKey:e.endDiffLineKey,setErrorMessage:e.setErrorMessage,startConversationOnNewLine:e.startConversationOnNewLine,closeLineMovingDialog:e.closeLineMovingDialog}}function ez(e,t){let n=Number(e),i=Number(t);return Number.isInteger(i)&&i>0&&(void 0===e||Number.isInteger(n)&&n>0&&n<=i)}try{eU.displayName||(eU.displayName="ChangeCommentLineNumberButton")}catch{}try{eG.displayName||(eG.displayName="MoveCommentLineNumberDropdown")}catch{}var eQ=n(91747);let eZ="diff-comment-positioning-",eJ=(0,a.GV)()?function(e){let t,n,a,r,o,h,p,g,y,x,v,b,j,w,C,_,N,S,I,k,L,D=(0,s.c)(56);if(D[0]!==e){let{addCommentDialogTitle:i,isLeftSide:s,fileLevelComment:l,filePath:d,focusOnMount:c,lineNumber:u,onAddComment:m,onClose:f,viewerData:b,threadsConnectionId:j,showOnCloseIcon:w,...C}=e;t=i,r=s,n=l,a=d,y=c,o=u,h=m,p=f,v=b,x=w,g=C,D[0]=e,D[1]=t,D[2]=n,D[3]=a,D[4]=r,D[5]=o,D[6]=h,D[7]=p,D[8]=g,D[9]=y,D[10]=x,D[11]=v}else t=D[1],n=D[2],a=D[3],r=D[4],o=D[5],h=D[6],p=D[7],g=D[8],y=D[9],x=D[10],v=D[11];let T=void 0===y||y,E=void 0===x||x,[A,R]=(0,l.useState)(void 0),O=(0,eQ.u)("move_new_comments_ui"),{disableDialogMode:P}=et();D[12]!==h?(b=e=>{let{commentText:t,onCompleted:n,onError:i,submitBatch:a}=e;h({text:t,onError:i,onCompleted:(e,t)=>{t&&f(t.toString()),n?.(e,t)},submitBatch:a})},D[12]=h,D[13]=b):b=D[13];let F=b;D[14]!==P||D[15]!==p?(j=()=>{p?.(),P()},D[14]=P,D[15]=p,D[16]=j):j=D[16];let M=j,$=`${eZ}${(0,l.useId)()}`,B=v.avatarUrl||"";D[17]!==B||D[18]!==v.login?(w=(0,i.jsx)(d.r,{alt:v.login,size:24,src:B,className:"mr-2"}),D[17]=B,D[18]=v.login,D[19]=w):w=D[19],D[20]!==t||D[21]!==n||D[22]!==O?(C=!O&&(n?(0,i.jsx)(i.Fragment,{children:"Add comment on file"}):(0,i.jsx)("span",{children:t?`Add a comment on ${t}`:"Add a comment"})),D[20]=t,D[21]=n,D[22]=O,D[23]=C):C=D[23],D[24]!==t||D[25]!==$||D[26]!==n||D[27]!==r||D[28]!==o||D[29]!==O||D[30]!==g?(_=O&&(0,i.jsxs)("div",{className:"d-flex flex-items-center",id:$,children:[(0,i.jsxs)("div",{className:"pt-1",children:["Add ",n?"":"a"," comment on "]}),(0,i.jsx)(eU,{ariaLabelId:$,currentLineNumberText:n?"file":t??"",baseEndLineNumber:o,baseStartLineNumber:g.startLineNumber,diffSide:r?"LEFT":"RIGHT",setCommentLineChangeConfig:R})]}),D[24]=t,D[25]=$,D[26]=n,D[27]=r,D[28]=o,D[29]=O,D[30]=g,D[31]=_):_=D[31],D[32]!==w||D[33]!==C||D[34]!==_?(N=(0,i.jsxs)(u.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2 d-flex",children:[w,C,_]}),D[32]=w,D[33]=C,D[34]=_,D[35]=N):N=D[35],D[36]!==p||D[37]!==M||D[38]!==E?(S=p&&E&&(0,i.jsx)(m.K,{variant:"invisible",icon:c.XIcon,onClick:M,"aria-label":"Cancel"}),D[36]=p,D[37]=M,D[38]=E,D[39]=S):S=D[39],D[40]!==S||D[41]!==N?(I=(0,i.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[N,S]}),D[40]=S,D[41]=N,D[42]=I):I=D[42];let V=n??!1,U=r?"LEFT":"RIGHT";return D[43]!==A||D[44]!==a||D[45]!==T||D[46]!==F||D[47]!==o||D[48]!==M||D[49]!==g||D[50]!==V||D[51]!==U?(k=(0,i.jsx)(eA,{focusOnMount:T,condensed:!1,fileLevelComment:V,filePath:a,lineNumber:o,onAddComment:F,onCancelComment:M,commentLineChangeConfig:A,side:U,...g}),D[43]=A,D[44]=a,D[45]=T,D[46]=F,D[47]=o,D[48]=M,D[49]=g,D[50]=V,D[51]=U,D[52]=k):k=D[52],D[53]!==I||D[54]!==k?(L=(0,i.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[I,k]}),D[53]=I,D[54]=k,D[55]=L):L=D[55],L}:function({addCommentDialogTitle:e,isLeftSide:t,fileLevelComment:n,filePath:a,focusOnMount:s=!0,lineNumber:r,onAddComment:o,onClose:h,viewerData:p,threadsConnectionId:g,showOnCloseIcon:y=!0,...x}){let[v,b]=(0,l.useState)(void 0),j=(0,eQ.u)("move_new_comments_ui"),{disableDialogMode:w}=et(),C=()=>{h?.(),w()},_=`${eZ}${(0,l.useId)()}`;return(0,i.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[(0,i.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[(0,i.jsxs)(u.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2 d-flex",children:[(0,i.jsx)(d.r,{alt:p.login,size:24,src:p.avatarUrl||"",className:"mr-2"}),!j&&(n?(0,i.jsx)(i.Fragment,{children:"Add comment on file"}):(0,i.jsx)("span",{children:e?`Add a comment on ${e}`:"Add a comment"})),j&&(0,i.jsxs)("div",{className:"d-flex flex-items-center",id:_,children:[(0,i.jsxs)("div",{className:"pt-1",children:["Add ",n?"":"a"," comment on "]}),(0,i.jsx)(eU,{ariaLabelId:_,currentLineNumberText:n?"file":e??"",baseEndLineNumber:r,baseStartLineNumber:x.startLineNumber,diffSide:t?"LEFT":"RIGHT",setCommentLineChangeConfig:b})]})]}),h&&y&&(0,i.jsx)(m.K,{variant:"invisible",icon:c.XIcon,onClick:C,"aria-label":"Cancel"})]}),(0,i.jsx)(eA,{focusOnMount:s,condensed:!1,fileLevelComment:n??!1,filePath:a,lineNumber:r,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{o({text:e,onError:n,onCompleted:(e,n)=>{n&&f(n.toString()),t?.(e,n)},submitBatch:i})},onCancelComment:C,commentLineChangeConfig:v,side:t?"LEFT":"RIGHT",...x})]})};try{eJ.displayName||(eJ.displayName="StartThreadComment")}catch{}var eY=n(33671),eX=n(8934),e0=n(97286),e1=n(73017),e2=n(69726);let e3="RichDiff-module__fileRendererViewport--EBwd1",e4="RichDiff-module__fileRendererIframe--svTsY",e5=(0,a.GV)()?function(e){let t,n,a,r,l,o,d=(0,s.c)(29),{queryConfig:c,initialData:u}=e;if(u&&(u.proseDiffHtml||u.renderInfo||u.dependencyDiffPath)){let e;d[0]!==u.dependencyDiffPath||d[1]!==u.proseDiffHtml||d[2]!==u.renderInfo?(e={proseDiffHtml:u.proseDiffHtml,renderInfo:u.renderInfo,dependencyDiffPath:u.dependencyDiffPath},d[0]=u.dependencyDiffPath,d[1]=u.proseDiffHtml,d[2]=u.renderInfo,d[3]=e):e=d[3],o=e}let m=c?.key,h=c?.args;d[4]!==m||d[5]!==h?(t=[m,h],d[4]=m,d[5]=h,d[6]=t):t=d[6],d[7]!==c?(n=async()=>await c?.fetcher(c.args)||{},d[7]=c,d[8]=n):n=d[8];let f=!!c;d[9]!==o||d[10]!==t||d[11]!==n||d[12]!==f?(a={queryKey:t,queryFn:n,initialData:o,staleTime:1/0,enabled:f},d[9]=o,d[10]=t,d[11]=n,d[12]=f,d[13]=a):a=d[13];let p=(0,e0.I)(a);d[14]!==o||d[15]!==c||d[16]!==p?(r=c?p:{data:o,isLoading:!1},d[14]=o,d[15]=c,d[16]=p,d[17]=r):r=d[17];let{data:g,isLoading:y}=r;d[18]!==g?(l=g||{},d[18]=g,d[19]=l):l=d[19];let{proseDiffHtml:x,renderInfo:v,dependencyDiffPath:b}=l;if(y){let e;return d[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(e2.A,{size:"large"})}),d[20]=e):e=d[20],e}if(x){let e;return d[21]!==x?(e=(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(e1.vb,{html:x})}),d[21]=x,d[22]=e):e=d[22],e}if(v){let e;return d[23]!==v?(e=(0,i.jsx)(eY.default,{...v,viewportClassName:e3,iframeClassName:e4}),d[23]=v,d[24]=e):e=d[24],e}if(b){let e,t;return d[25]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(e2.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]}),d[25]=e):e=d[25],d[26]!==b?(t=(0,i.jsx)("div",{children:(0,i.jsx)(eX.x,{src:b,children:e})}),d[26]=b,d[27]=t):t=d[27],t}{let e;return d[28]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."}),d[28]=e):e=d[28],e}}:function({queryConfig:e,initialData:t}){let n;t&&(t.proseDiffHtml||t.renderInfo||t.dependencyDiffPath)&&(n={proseDiffHtml:t.proseDiffHtml,renderInfo:t.renderInfo,dependencyDiffPath:t.dependencyDiffPath});let a=(0,e0.I)({queryKey:[e?.key,e?.args],queryFn:async()=>await e?.fetcher(e.args)||{},initialData:n,staleTime:1/0,enabled:!!e}),{data:s,isLoading:r}=e?a:{data:n,isLoading:!1},{proseDiffHtml:l,renderInfo:o,dependencyDiffPath:d}=s||{};return r?(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,i.jsx)(e2.A,{size:"large"})}):l?(0,i.jsx)("div",{className:"prose-diff position-relative",children:(0,i.jsx)(e1.vb,{html:l})}):o?(0,i.jsx)(eY.default,{...o,viewportClassName:e3,iframeClassName:e4}):d?(0,i.jsx)("div",{children:(0,i.jsx)(eX.x,{src:d,children:(0,i.jsxs)("div",{className:"text-center py-3",children:[(0,i.jsx)(e2.A,{size:"medium"}),(0,i.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})})}):(0,i.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})};try{e5.displayName||(e5.displayName="RichDiff")}catch{}var e6=n(59523),e7=n(19976),e8=n(84268),e9=n(69599);let te="HiddenDiffPatch-module__gridColumnTemplate--gSfuk",tt=(0,a.GV)()?function(e){let t,n,a,r,o,d,u,m,h,f,p=(0,s.c)(27),{children:g,helpText:y,helpUrl:v,onLoadDiff:b,diffAnchor:j}=e,w=v&&y,[C,_]=(0,l.useState)("initial");p[0]!==b?(t=async()=>{try{_("loading"),await b()}catch{_("error")}},p[0]=b,p[1]=t):t=p[1];let N=t;return p[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.$)(te),p[2]=n):n=p[2],p[3]===Symbol.for("react.memo_cache_sentinel")?(a={maxWidth:"340px"},p[3]=a):a=p[3],p[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:a,viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})}),p[4]=r):r=p[4],p[5]!==C?(o="loading"===C&&(0,i.jsx)(e2.A,{size:"medium"}),p[5]=C,p[6]=o):o=p[6],p[7]!==C?(d="error"===C&&(0,i.jsx)(c.AlertIcon,{size:24}),p[7]=C,p[8]=d):d=p[8],p[9]!==C||p[10]!==N?(u="initial"===C&&(0,i.jsx)(eR.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{N(),_("loading")},children:"Load Diff"}),p[9]=C,p[10]=N,p[11]=u):u=p[11],p[12]!==g||p[13]!==y||p[14]!==v||p[15]!==C||p[16]!==N||p[17]!==w?(m="error"===C?(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,i.jsx)(e8.A,{inline:!0,as:"button",onClick:()=>{N(),_("loading")},children:"Retry"})]}):(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[g,w&&(0,i.jsx)(e8.A,{inline:!0,href:v,children:y})]}),p[12]=g,p[13]=y,p[14]=v,p[15]=C,p[16]=N,p[17]=w,p[18]=m):m=p[18],p[19]!==o||p[20]!==d||p[21]!==u||p[22]!==m?(h=(0,i.jsxs)("div",{className:n,children:[r," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:[o,d,u,m]})]}),p[19]=o,p[20]=d,p[21]=u,p[22]=m,p[23]=h):h=p[23],p[24]!==j||p[25]!==h?(f=(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":j,children:h}),p[24]=j,p[25]=h,p[26]=f):f=p[26],f}:function({children:e,helpText:t,helpUrl:n,onLoadDiff:a,diffAnchor:s}){let r=n&&t,[o,d]=(0,l.useState)("initial"),u=(0,l.useCallback)(async()=>{try{d("loading"),await a()}catch{d("error")}},[a,d]);return(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":s,children:(0,i.jsxs)("div",{className:(0,x.$)(te),children:[(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:["loading"===o&&(0,i.jsx)(e2.A,{size:"medium"}),"error"===o&&(0,i.jsx)(c.AlertIcon,{size:24}),"initial"===o&&(0,i.jsx)(eR.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{u(),d("loading")},children:"Load Diff"}),"error"===o?(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,i.jsx)(e8.A,{inline:!0,as:"button",onClick:()=>{u(),d("loading")},children:"Retry"})]}):(0,i.jsxs)("span",{className:"fgColor-muted mt-1",children:[e,r&&(0,i.jsx)(e8.A,{inline:!0,href:n,children:t})]})]})]})})};try{tt.displayName||(tt.displayName="HiddenDiffPatch")}catch{}let tn="final-hunk-header-line";function ti(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function ta(e,t){if("HUNK"===e.type&&e.__id===tn)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(ti).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function ts(e){let t,n=[],i=0;for(let a=1;a<e.length;a++){let s=e[a];if(s&&!(0,A.Po)(s)&&(t=s,"HUNK"===s.type)){let t,r=e[i];if(!r||(0,A.Po)(r))continue;let l=a-1;for(;(!t||(0,A.Po)(t))&&(t=e[l],-1!=--l););t&&!(0,A.Po)(t)&&n.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:t.blobLineNumber}),s.__id===tn&&n.push({startBlobLineNumber:s.blobLineNumber,endBlobLineNumber:s.blobLineNumber+20}),i=a;continue}}if(t&&"HUNK"!==t.type){let a=e[i];a&&!(0,A.Po)(a)&&n.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:t.blobLineNumber})}return n}var tr=n(45800),tl=n(35750),to=n(18150),td=n(85242),tc=n(88243),tu=n(16213),tm=n(50467),th=new WeakMap,tf=new WeakMap,tp=new WeakMap,tg=new WeakMap,ty=new WeakMap,tx=new WeakMap,tv=new WeakSet,tb=new WeakSet,tj=new WeakSet,tw=new WeakSet,tC=new WeakSet,t_=new WeakSet,tN=new WeakSet,tS=new WeakSet,tI=new WeakSet,tk=new WeakSet;let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n,i=(0,tl._)(this,tf).get(this.focusedGridCell?.cellId??"");if(!i)return;let[a]=i,[,s]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&(0,tc._)(this,tN,tO).call(this,a)&&(0,tl._)(this,tg)&&(s=(0,tl._)(this,tg),(0,td._)(this,tg,void 0)),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=(0,tl._)(this,th).length-1,t=(0,tl._)(this,th)[e]?.length;t&&(n=(0,tl._)(this,th)[e]?.[t-1]);break}case"ArrowUp"===e:(0,tc._)(this,tN,tO).call(this,a-1)?((0,tc._)(this,tk,tM).call(this,s),n=(0,tl._)(this,th)[a-1]?.[0]):n=(0,tl._)(this,th)[a-1]?.[s];break;case"ArrowDown"===e:(0,tc._)(this,tN,tO).call(this,a+1)?((0,tc._)(this,tk,tM).call(this,s),n=(0,tl._)(this,th)[a+1]?.[0]):n=(0,tl._)(this,th)[a+1]?.[s];break;case"ArrowLeft"===e:n=(0,tl._)(this,th)[a]?.[s-1];break;case"ArrowRight"===e:n=(0,tl._)(this,th)[a]?.[s+1];break;case"PageUp"===e:{(0,tc._)(this,tk,tM).call(this,s);let e=(0,tc._)(this,tj,tT).call(this,a);n=(0,tl._)(this,th)[e]?.[0];break}case"PageDown"===e:{(0,tc._)(this,tk,tM).call(this,s);let e=(0,tc._)(this,tb,tD).call(this,a),t=0;e||(e=(0,tl._)(this,th).length-1,t=s),n=(0,tl._)(this,th)[e]?.[t];break}case"Home"===e:n=(0,tl._)(this,th)[a]?.[0];break;case"End"===e:{let e=(0,tl._)(this,th)[a];if(e&&!(0,tc._)(this,tN,tO).call(this,a)){let t=e.length-1;n=(0,tl._)(this,th)[a]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){(0,tc._)(this,tw,tE).call(this,e,t)}focusFirstGridCell(e){e&&(0,tl._)(this,tf).get(e)?this.focusGridCell(e):this.focusedGridCell=(0,tl._)(this,th)[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=(0,tl._)(this,tf).get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=(0,tl._)(this,th)[n]?.[i]}getNextSelectableCell(e){let t,n=this.getValidSelectableRowCell()||this.focusedGridCell,i=this.lastSelectedGridCell||n,a=(0,tl._)(this,tf).get(i?.cellId??"");if(!a)return;let[s,r]=a;if("ArrowUp"===e){let e=s-1;for(;!t&&e>=0;)t=(0,tc._)(this,tv,tL).call(this,{rowIndex:e,columnIndex:r}),e--}if("ArrowDown"===e){let e=s+1;for(;!t&&e<(0,tl._)(this,th).length;)t=(0,tc._)(this,tv,tL).call(this,{rowIndex:e,columnIndex:r}),e++}return t&&(this.lastSelectedGridCell=t),t}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=(0,tl._)(this,tf).get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<=1&&!(0,tl._)(this,tx)?(0,tl._)(this,th)[e]?.[this.focusedGridCell.columnIndex+1]:this.focusedGridCell.columnIndex<2&&(0,tl._)(this,tx)?(0,tl._)(this,th)[e]?.[this.focusedGridCell.columnIndex+2]:(0,tl._)(this,th)[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=(0,tl._)(this,th).find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=(0,tl._)(this,th).slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=(0,A.qX)((0,tl._)(this,ty),e,t),a=(0,A.u6)(i,0),s=(0,tl._)(this,tf).get(a);if(!s)return!1;let[r]=s;return!!n===(0,tc._)(this,tN,tO).call(this,r)}constructor(e,t,n,i,a){(0,tu._)(this,tv),(0,tu._)(this,tb),(0,tu._)(this,tj),(0,tu._)(this,tw),(0,tu._)(this,tC),(0,tu._)(this,t_),(0,tu._)(this,tN),(0,tu._)(this,tS),(0,tu._)(this,tI),(0,tu._)(this,tk),(0,to._)(this,th,{writable:!0,value:[]}),(0,to._)(this,tf,{writable:!0,value:new Map}),(0,to._)(this,tp,{writable:!0,value:new Set}),(0,tm._)(this,"focusedGridCell",void 0),(0,tm._)(this,"lastSelectedGridCell",void 0),(0,to._)(this,tg,{writable:!0,value:void 0}),(0,to._)(this,ty,{writable:!0,value:void 0}),(0,to._)(this,tx,{writable:!0,value:void 0}),(0,td._)(this,ty,e),(0,td._)(this,tx,t),(0,tc._)(this,tw,tE).call(this,n,i),this.focusFirstGridCell(a)}};function tL({rowIndex:e,columnIndex:t}){let n=(0,tl._)(this,th)[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty&&(0,tl._)(this,tx):return n?.[t-2];case i?.orientation==="right"&&i.isEmpty&&!(0,tl._)(this,tx):return n?.[t+1];default:return n?.[t]}}function tD(e){return Array.from((0,tl._)(this,tp)).sort((e,t)=>e-t).find(t=>t>e)}function tT(e){return Array.from((0,tl._)(this,tp)).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}function tE(e,t){(0,td._)(this,th,[]),(0,td._)(this,tf,new Map),(0,td._)(this,tp,new Set);for(let n=0;n<e.length;n++){let i=[],a=e[n];if(void 0!==a){if((0,tl._)(this,tx)){let e=(t||[])[n],s=(0,A.qX)((0,tl._)(this,ty),a,e);(0,A.Po)(a)||"HUNK"!==a.type?(0,tc._)(this,tS,tP).call(this,{leftLine:a,rightLine:e,row:i,rowIdentifier:s,rowIndex:n}):(0,tc._)(this,t_,tR).call(this,i,s,n,a)}else{let e=(0,A.qX)((0,tl._)(this,ty),a,a);(0,A.Po)(a)||"HUNK"!==a.type?(0,tc._)(this,tI,tF).call(this,{diffLine:a,row:i,rowIdentifier:e,rowIndex:n}):(0,tc._)(this,t_,tR).call(this,i,e,n,a)}(0,tl._)(this,th).push(i)}}}function tA({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:a,rowIndex:s,isSplit:r}){let l,o,d=(0,A.u6)(a,e);o=!(r||(0,A.Po)(t))&&t?.type==="DELETION"&&1===e||!(r||(0,A.Po)(t))&&t?.type==="ADDITION"&&0===e||(0,A.Po)(t),(0,A.Po)(t)||"left"!==n||(l=t?.left),(0,A.Po)(t)||"right"!==n||(l=t?.right),i.push({lineNumber:l,orientation:n,isEmpty:o,isHunk:!1,cellId:(0,A.u6)(a,e),columnIndex:e,lineKey:!(0,A.Po)(t)&&t?.key?t.key:void 0}),(0,tl._)(this,tf).set(d,[s,e])}function tR(e,t,n,i){let a=(0,A.u6)(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:a,columnIndex:0,lineKey:i.key}),(0,tl._)(this,tf).set(a,[n,0]),(0,tl._)(this,tp).add(n)}function tO(e){return(0,tl._)(this,tp).has(e)}function tP({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:a}){(0,tc._)(this,tC,tA).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,tc._)(this,tC,tA).call(this,{cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,tc._)(this,tC,tA).call(this,{cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0}),(0,tc._)(this,tC,tA).call(this,{cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a,isSplit:!0})}function tF({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let a=(0,A.Po)(e)||"DELETION"!==e.type?"right":"left";(0,tc._)(this,tC,tA).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,tc._)(this,tC,tA).call(this,{cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,tc._)(this,tC,tA).call(this,{cellIndex:2,diffLine:e,orientation:a,row:t,rowIdentifier:n,rowIndex:i,isSplit:!1})}function tM(e){(0,tc._)(this,tN,tO).call(this,e)||(0,td._)(this,tg,e)}function t$(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}function tB(e,t,n){let i=[];for(let a=0;a<t.length;a++){let s=t[a],r=n?.[a]??s,l=!(0,A.Po)(s)&&s?.type==="HUNK";s&&r&&!e.hasLine(s,r,l)&&i.push(s)}return i}let tV=(0,a.GV)()?function(e,t,n,i,a,r){let o,d,c=(0,s.c)(8);c[0]!==i||c[1]!==e||c[2]!==n||c[3]!==t||c[4]!==a||c[5]!==r?(o=()=>{if(a&&document.activeElement){let s=tB(a,t,r);if(0!==s.length){if(document.activeElement===document.body){let i,a,r,l=t.indexOf(s[s.length-1]),o=t[l+1],d=s[0];o&&!(0,A.Po)(o)&&"HUNK"===o.type&&(i=(0,A.u6)((0,A.qX)(e,o,o),0),a=document.querySelector(`[data-grid-cell-id=${i}]`),r=a?.querySelector("button[data-direction=down], button[data-direction=all]")),r||(i=(0,A.u6)((0,A.qX)(e,d,d),0),a=document.querySelector(`[data-grid-cell-id=${i}]`),r=a?.querySelector("button[data-direction=up], button[data-direction=all]")),i&&a&&(r?r.focus():a.focus(),n.focusGridCell(i),t$(a))}else if("BUTTON"===document.activeElement.tagName)t$(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=n.focusedGridCell?.cellId;if(e!==t){let e=i.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},d=[e,t,n,r,a,i],c[0]=i,c[1]=e,c[2]=n,c[3]=t,c[4]=a,c[5]=r,c[6]=o,c[7]=d):(o=c[6],d=c[7]),(0,l.useEffect)(o,d)}:function(e,t,n,i,a,s){(0,l.useEffect)(()=>{if(a&&document.activeElement){let r=tB(a,t,s);if(0!==r.length){if(document.activeElement===document.body){let i,a,s,l=t.indexOf(r[r.length-1]),o=t[l+1],d=r[0];o&&!(0,A.Po)(o)&&"HUNK"===o.type&&(i=(0,A.u6)((0,A.qX)(e,o,o),0),a=document.querySelector(`[data-grid-cell-id=${i}]`),s=a?.querySelector("button[data-direction=down], button[data-direction=all]")),s||(i=(0,A.u6)((0,A.qX)(e,d,d),0),a=document.querySelector(`[data-grid-cell-id=${i}]`),s=a?.querySelector("button[data-direction=up], button[data-direction=all]")),i&&a&&(s?s.focus():a.focus(),n.focusGridCell(i),t$(a))}else if("BUTTON"===document.activeElement.tagName)t$(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=n.focusedGridCell?.cellId;if(e!==t){let e=i.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},[e,t,n,s,a,i])};var tU=n(97068);let tq={ArrowLeft:tU.z0.ArrowHorizontal,ArrowDown:tU.z0.ArrowVertical,ArrowUp:tU.z0.ArrowVertical,ArrowRight:tU.z0.ArrowHorizontal,h:tU.z0.HL,j:tU.z0.JK,k:tU.z0.JK,l:tU.z0.HL,a:tU.z0.AD,s:tU.z0.WS,w:tU.z0.WS,d:tU.z0.AD,Tab:tU.z0.Tab,Home:tU.z0.HomeAndEnd,End:tU.z0.HomeAndEnd,PageUp:tU.z0.PageUpDown,PageDown:tU.z0.PageUpDown,Backspace:tU.z0.Backspace},tH=tU.z0.ArrowAll|tU.z0.PageUpDown|tU.z0.HomeAndEnd|tU.z0.AD,tG={avatarUrl:"https://avatars.githubusercontent.com/ghost",id:"ghost",login:"ghost",url:"/ghost",__typename:"Author"},tK=(0,a.GV)()?function(e,t){let n,i,a,r=(0,s.c)(6);r[0]!==t?(n=e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},r[0]=t,r[1]=n):n=r[1];let o=n;r[2]!==e||r[3]!==o?(i=()=>{let t=e.current;return t?.addEventListener("focusin",o),()=>t?.removeEventListener("focusin",o)},a=[e,o],r[2]=e,r[3]=o,r[4]=i,r[5]=a):(i=r[4],a=r[5]),(0,l.useEffect)(i,a)}:function(e,t){let n=(0,l.useCallback)(e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},[t]);(0,l.useEffect)(()=>{let t=e.current;return t?.addEventListener("focusin",n),()=>t?.removeEventListener("focusin",n)},[e,n])};function tW(e){return e in tq&&(tq[e]&tH)>0}function tz({addLineToSelection:e,clearSelectedLines:t,containerRef:n,fileAnchor:i,getfirstLineSelectionOnDrag:a,isSplitDiff:s,leftLines:r,rightLines:o,selectMultipleLines:d,disabled:c}){let u=(0,l.useRef)(void 0),m=(0,l.useMemo)(()=>new GridNavigator(i,s,r,o,u.current?.focusedGridCell?.cellId),[i,s,r,o]);(0,l.useEffect)(()=>{u.current=m},[m]),(0,l.useEffect)(()=>{let e=n.current,t=()=>{m.clearLastSelectedCell()};return e?.addEventListener("mousedown",t),()=>e?.removeEventListener("mousedown",t)},[n,m]),tV(i,r,m,n,u.current,o),tK(n,m);let h=(0,l.useCallback)((n,i,s)=>{let r=m.getValidSelectableRowCell();switch(!0){case(s.metaKey||s.ctrlKey)&&"KeyA"===s.code:{let e=m.getFirstCodeCell(),t=m.getLastCodeCell();if(!e||!t)return i;return e.lineKey&&e.lineNumber&&e.orientation&&d({endLineKey:t.lineKey,endOrientation:t.orientation,startLineKey:e.lineKey,startOrientation:e.orientation,firstLineSelectionOnDrag:{lineKey:e.lineKey,lineNumber:e.lineNumber,orientation:e.orientation,shouldStartConversation:!1}},ek),i}case s.shiftKey&&"ArrowDown"===s.key:{let t=m.getNextSelectableCell("ArrowDown");if(!t||!r)return i;return a()?e({lineKey:t.lineKey,orientation:t.orientation},ek):r.lineKey&&r.lineNumber&&r.orientation&&d({endLineKey:t.lineKey,endOrientation:t.orientation,startLineKey:r.lineKey,startOrientation:r.orientation,firstLineSelectionOnDrag:{lineKey:r.lineKey,lineNumber:r.lineNumber,orientation:r.orientation,shouldStartConversation:!1}},ek),tQ(t.cellId),i}case s.shiftKey&&"ArrowUp"===s.key:{let t=m.getNextSelectableCell("ArrowUp");if(!t||!r)return i;return a()?e({lineKey:t.lineKey,orientation:t.orientation},ek):r.lineKey&&r.lineNumber&&r.orientation&&d({endLineKey:r.lineKey,endOrientation:r.orientation,startLineKey:t.lineKey,startOrientation:t.orientation,firstLineSelectionOnDrag:{lineKey:r.lineKey,lineNumber:r.lineNumber,orientation:r.orientation,shouldStartConversation:!1}},ek),tQ(t.cellId),i}case"ArrowLeft"===s.key&&s.metaKey&&s.shiftKey:return i;default:{let e=m.moveToNextItem(s.key,s.ctrlKey),n=e&&document.querySelector(`[data-grid-cell-id=${e.cellId}]`);return t(),m.clearLastSelectedCell(),n??void 0}}},[e,a,m,d,t]);return(0,tr.G)({containerRef:n,bindKeys:tH,getNextFocusable:h,focusableElementFilter:e=>"TD"===e.tagName&&"gridcell"===e.getAttribute("role"),focusInStrategy:"previous",disabled:c},[h]),{gridNavigator:m}}function tQ(e){let t=g.XC?.querySelector(`[data-grid-cell-id=${e}]`);!function(e){if(!g.XC||!g.cg||!e)return!1;let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(g.cg.innerHeight||g.XC.documentElement.clientHeight)&&t.right<=(g.cg.innerWidth||g.XC.documentElement.clientWidth)}(t)&&t?.scrollIntoView({block:"nearest",inline:"nearest"})}var tZ=n(21537),tJ=n(30459),tY=n(50899),tX=n(54571);let t0=(0,a.GV)()?function(e,t){let n,i,a,r,l,o=(0,s.c)(17),{sendAnalyticsEvent:d}=(0,tJ.s)(),c=W(),u=(0,k.ww)(),m=J();o[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],o[0]=n):n=o[0];let[h]=(0,tX.I)(t2,!0,n);o[1]!==c||o[2]!==e?(i=function(t){var n;let i;if(!t||t.startLineNumber===t.endLineNumber&&t.startOrientation===t.endOrientation)return"DELETION"!==e.type;let a="right"===t.startOrientation&&"right"===t.endOrientation,s=c(t)?.selectedRightLines[0],r=s&&(0,A.qK)(s)&&(0,A.Ji)(s);return!!a&&!r||(n=t,!(i=c(n)?.selectedLeftLines)||!(i.length>0)||i.every(t1))},o[1]=c,o[2]=e,o[3]=i):i=o[3],o[4]!==c||o[5]!==h||o[6]!==e?(a=function(t){let n=t?c(t)?.selectedRightLines:[];if(t&&n&&n.length>1)return h?"":(0,A.Ls)(n);if(!e)return"";let[i]=(0,A.dv)(e.text,e.type);return i},o[4]=c,o[5]=h,o[6]=e,o[7]=a):a=o[7];let f=a;o[8]!==f||o[9]!==u||o[10]!==i||o[11]!==d?(r=function(e,t){let n=!!(i(e)&&!u);return{isValidSuggestionRange:n,showSuggestChangesButton:n,sourceContentFromDiffLines:n?f(e):void 0,onInsertSuggestedChange:()=>{d("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:t}},o[8]=f,o[9]=u,o[10]=i,o[11]=d,o[12]=r):r=o[12];let p=(0,tY.K)(r);return o[13]!==p||o[14]!==m||o[15]!==t?(l={getSelectedLineRange:m,configureSuggestedChangesFromLineRange:p,shouldStartNewConversationWithSuggestedChange:t},o[13]=p,o[14]=m,o[15]=t,o[16]=l):l=o[16],l}:function(e,t){let{sendAnalyticsEvent:n}=(0,tJ.s)(),i=W(),a=(0,k.ww)(),s=J(),[r]=(0,tX.I)(()=>!1,!0,[]),o=(0,tY.K)(function(t,s){let l=!!(function(t){var n;let a;if(!t||t.startLineNumber===t.endLineNumber&&t.startOrientation===t.endOrientation)return"DELETION"!==e.type;let s="right"===t.startOrientation&&"right"===t.endOrientation,r=i(t)?.selectedRightLines[0],l=r&&(0,A.qK)(r)&&(0,A.Ji)(r);return!!s&&!l||(n=t,!(a=i(n)?.selectedLeftLines)||!(a.length>0)||a.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type))}(t)&&!a);return{isValidSuggestionRange:l,showSuggestChangesButton:l,sourceContentFromDiffLines:l?function(t){let n=t?i(t)?.selectedRightLines:[];if(t&&n&&n.length>1)return r?"":(0,A.Ls)(n);if(!e)return"";let[a]=(0,A.dv)(e.text,e.type);return a}(t):void 0,onInsertSuggestedChange:()=>{n("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:s}});return(0,l.useMemo)(()=>({getSelectedLineRange:s,configureSuggestedChangesFromLineRange:o,shouldStartNewConversationWithSuggestedChange:t}),[o,s,t])};function t1(e){return"empty-diff-line"!==e&&"DELETION"!==e.type}function t2(){return!1}var t3=n(20622),t4=n(48845),t5=n(97665),t6=n(94747),t7=n(96379),t8=n(69510),t9=n(43362);let ne=(0,a.Z6)()?function(){let e,t,n,i=(0,s.c)(12),a=(0,k.Kp)(),r=(0,t5.jE)(),l=`${a}/page_data/${t3.uT.createReviewComment}`,{updateThread:d}=(0,k.an)(),{onCommentThreadAdded:c}=(0,k.Ud)(),{addPendingComment:u,clearPendingReview:m}=(0,k._N)();return i[0]!==l?(e=async e=>{let t=await (0,t7.Sr)(`${l}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,t4.hp)(t);return(0,t4.R)(t,n),n},i[0]=l,i[1]=e):e=i[1],i[2]!==u||i[3]!==a||i[4]!==m||i[5]!==c||i[6]!==r||i[7]!==d?(t=(e,t)=>{let n=t.subjectType===o.Wr.File?"FILE":"right"===t.side?`R${t.line}`:`L${t.line}`,i=t.startSide&&t.startLine?"right"===t.startSide?`R${t.startLine}`:`L${t.startLine}`:void 0;void 0!==t.submitBatch&&!t.submitBatch&&e.thread&&u(Number(e.thread.id)),t.submitBatch&&m(),d(Number(e.thread.id),t.path,n,()=>{let n=(0,t9.YY)(t);return e.thread.subject=n,e.thread.positioning=n,e.thread}),c({path:t.path,diffLineKey:n,startPosition:i,threadID:e.thread.id}),r.invalidateQueries({queryKey:(0,t8.XG)(a)})},i[2]=u,i[3]=a,i[4]=m,i[5]=c,i[6]=r,i[7]=d,i[8]=t):t=i[8],i[9]!==e||i[10]!==t?(n={mutationFn:e,onSuccess:t},i[9]=e,i[10]=t,i[11]=n):n=i[11],(0,t6.n)(n)}:function(){let e=(0,k.Kp)(),t=(0,t5.jE)(),n=`${e}/page_data/${t3.uT.createReviewComment}`,{updateThread:i}=(0,k.an)(),{onCommentThreadAdded:a}=(0,k.Ud)(),{addPendingComment:s,clearPendingReview:r}=(0,k._N)();return(0,t6.n)({mutationFn:async e=>{let t=await (0,t7.Sr)(`${n}`,{method:"POST",headers:{Accept:"application/json"},body:e}),i=await (0,t4.hp)(t);return(0,t4.R)(t,i),i},onSuccess:(n,l)=>{let d=l.subjectType===o.Wr.File?"FILE":"right"===l.side?`R${l.line}`:`L${l.line}`,c=l.startSide&&l.startLine?"right"===l.startSide?`R${l.startLine}`:`L${l.startLine}`:void 0;void 0!==l.submitBatch&&!l.submitBatch&&n.thread&&s(Number(n.thread.id)),l.submitBatch&&r(),i(Number(n.thread.id),l.path,d,()=>{let e=(0,t9.YY)(l);return n.thread.subject=e,n.thread.positioning=e,n.thread}),a({path:l.path,diffLineKey:d,startPosition:c,threadID:n.thread.id}),t.invalidateQueries({queryKey:(0,t8.XG)(e)})}})};var nt=new WeakMap,nn=new WeakMap,ni=new WeakMap,na=new WeakMap,ns=new WeakMap,nr=new WeakMap,nl=new WeakMap,no=new WeakSet,nd=new WeakSet,nc=new WeakSet;let ReviewCommentFactory=class ReviewCommentFactory{fileRequestData(){return{...(0,tc._)(this,nc,nh).call(this),path:(0,tl._)(this,nn),subjectType:o.Wr.File}}lineRequestData(e,t){let n=t&&!(0,A.Ji)(e)?"left":"right";return{...(0,tc._)(this,nc,nh).call(this),line:e.blobLineNumber,path:(0,tc._)(this,no,nu).call(this,n),positioning:{type:o.Wr.Line,baseCommitOid:(0,tl._)(this,nt),headCommitOid:(0,tl._)(this,ni),path:(0,tc._)(this,no,nu).call(this,n),line:e.blobLineNumber,commitOid:(0,tc._)(this,nd,nm).call(this,n)},side:n,subjectType:o.Wr.Line}}multilineRequestData(e){let{endLineNumber:t,endOrientation:n,startLineNumber:i,startOrientation:a}=e,s="left"===n?"left":"right",r="left"===a?"left":"right";return{...(0,tc._)(this,nc,nh).call(this),line:t,path:(0,tc._)(this,no,nu).call(this,s),positioning:{baseCommitOid:(0,tl._)(this,nt),headCommitOid:(0,tl._)(this,ni),type:o.Wr.Multiline,startPath:(0,tc._)(this,no,nu).call(this,r),startLine:i,startCommitOid:(0,tc._)(this,nd,nm).call(this,r),endPath:(0,tc._)(this,no,nu).call(this,s),endLine:t,endCommitOid:(0,tc._)(this,nd,nm).call(this,s)},side:s,startLine:i,startSide:r,subjectType:o.Wr.Multiline}}constructor({filePath:e,newTreeEntry:t,oldTreeEntry:n,effectiveDiffRange:i,submitBatch:a,text:s}){(0,tu._)(this,no),(0,tu._)(this,nd),(0,tu._)(this,nc),(0,to._)(this,nt,{writable:!0,value:void 0}),(0,to._)(this,nn,{writable:!0,value:void 0}),(0,to._)(this,ni,{writable:!0,value:void 0}),(0,to._)(this,na,{writable:!0,value:void 0}),(0,to._)(this,ns,{writable:!0,value:void 0}),(0,to._)(this,nr,{writable:!0,value:void 0}),(0,to._)(this,nl,{writable:!0,value:void 0}),(0,td._)(this,nt,i.baseOid),(0,td._)(this,nn,e),(0,td._)(this,ni,i.headOid),(0,td._)(this,na,t),(0,td._)(this,ns,n),(0,td._)(this,nr,a),(0,td._)(this,nl,s)}};function nu(e){return"left"===e&&(0,tl._)(this,ns)?.path&&(0,tl._)(this,na)?.path&&(0,tl._)(this,ns).path!==(0,tl._)(this,na).path?(0,tl._)(this,ns).path:(0,tl._)(this,nn)}function nm(e){return"left"===e?(0,tl._)(this,nt):(0,tl._)(this,ni)}function nh(){return{comparisonEndOid:(0,tl._)(this,ni),comparisonStartOid:(0,tl._)(this,nt),text:(0,tl._)(this,nl),submitBatch:(0,tl._)(this,nr)}}let nf=(e,t)=>!!e&&!!t.startLineNumber&&!!t.endLineNumber&&t.startLineNumber!==t.endLineNumber,np=(0,a.GV)()?function(e,t,n){let i,a=(0,s.c)(4),r=J();e:{let s,l;if(!e){i="";break e}a[0]!==r||a[1]!==n?(s=n?r():void 0,a[0]=r,a[1]=n,a[2]=s):s=a[2];let o=s,d=!!o&&o.startLineNumber!==o.endLineNumber;if(o&&d){let e;a[3]===Symbol.for("react.memo_cache_sentinel")?(e={left:"L",right:"R"},a[3]=e):e=a[3];let t=e,n=t[o.startOrientation],i=t[o.endOrientation];l=o.startLineNumber!==o.endLineNumber?` lines ${n}${o.startLineNumber} to ${i}${o.endLineNumber}`:` line ${n}${o.startLineNumber}`}else{let n=t&&!(0,A.Ji)(e)?"L":"R";l=` line ${n}${e.blobLineNumber}`}i=l}return i}:function(e,t,n){let i=J();return(0,l.useMemo)(()=>{if(!e)return"";let a=n?i():void 0,s="",r=!!a&&a.startLineNumber!==a.endLineNumber;if(a&&r){let e={left:"L",right:"R"},t=e[a.startOrientation],n=e[a.endOrientation];s+=a.startLineNumber!==a.endLineNumber?` lines ${t}${a.startLineNumber} to ${n}${a.endLineNumber}`:` line ${t}${a.startLineNumber}`}else{let n=t&&!(0,A.Ji)(e)?"L":"R";s+=` line ${n}${e.blobLineNumber}`}return s},[e,t,n,i])},ng=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h,f,p,g,y,x=(0,s.c)(38);if(x[0]!==e){let{diffAnchor:i,isInDialogMode:s,isOpen:l,onCloseCommentDialog:m,onAddComment:h,startLineNumber:f,diffLine:p,shouldStartNewConversationWithSuggestedChange:g,...y}=e;n=s,a=l,o=m,r=h,u=f,t=p,c=g,d=y,x[0]=e,x[1]=t,x[2]=n,x[3]=a,x[4]=r,x[5]=o,x[6]=d,x[7]=c,x[8]=u}else t=x[1],n=x[2],a=x[3],r=x[4],o=x[5],d=x[6],c=x[7],u=x[8];let{sendAnalyticsEvent:v}=(0,tJ.s)(),b=(0,l.useRef)(null),j=J(),w=t0(t,c),{newTreeEntry:C,oldTreeEntry:_}=eo(),{effectiveRange:N}=(0,k.L3)(),{baseOid:S,headOid:I}=(0,k.E4)(),L=(0,eQ.u)("cotd_ui"),D=t?.type==="DELETION",T=np(t,!!D,!1),{mutate:E}=ne();x[9]!==L||x[10]!==E||x[11]!==t||x[12]!==N||x[13]!==I||x[14]!==j||x[15]!==D||x[16]!==C||x[17]!==_||x[18]!==d||x[19]!==S?(m=e=>{let{onCompleted:n,onError:i,submitBatch:a,text:s}=e;if(!t)return;let r=j();if(L){let e=new ReviewCommentFactory({filePath:d.filePath,newTreeEntry:C,oldTreeEntry:_,effectiveDiffRange:N,submitBatch:a,text:s});E(r&&nf(!1,r)?e.multilineRequestData(r):e.lineRequestData(t,D),{onError:i,onSuccess:e=>{n?.(e.thread.id,e.comment?.databaseId)}})}else{r&&(r.startLineNumber,r.endLineNumber);let e,l,o=t.blobLineNumber,c=D&&!(0,A.Ji)(t)?"left":"right";E({text:s,line:o,path:d.filePath,side:c,startSide:l,submitBatch:a,startLine:e,comparisonEndOid:I,comparisonStartOid:S},{onError:i,onSuccess:e=>{n?.(e.thread.id,e.comment?.databaseId)}})}},x[9]=L,x[10]=E,x[11]=t,x[12]=N,x[13]=I,x[14]=j,x[15]=D,x[16]=C,x[17]=_,x[18]=d,x[19]=S,x[20]=m):m=x[20];let R=m;e:{if(a&&w?.configureSuggestedChangesFromLineRange){let e;if(x[21]!==j||x[22]!==w){let t=j();e=w.configureSuggestedChangesFromLineRange(t,w?.shouldStartNewConversationWithSuggestedChange),x[21]=j,x[22]=w,x[23]=e}else e=x[23];h=e;break e}h=void 0}let O=h;if(!a)return null;x[24]===Symbol.for("react.memo_cache_sentinel")?(f=e=>{e.target===b.current&&b.current.querySelector("textarea")?.focus()},x[24]=f):f=x[24];let P=f,F=n?0:-1;x[25]!==o||x[26]!==v?(p=e=>{o(e),v("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},x[25]=o,x[26]=v,x[27]=p):p=x[27];let M=r||R,$=u??void 0;return x[28]!==T||x[29]!==O||x[30]!==d||x[31]!==p||x[32]!==M||x[33]!==$?(g=(0,i.jsx)(eJ,{onClose:p,showOnCloseIcon:!1,suggestedChangesConfig:O,onAddComment:M,addCommentDialogTitle:T,startLineNumber:$,...d}),x[28]=T,x[29]=O,x[30]=d,x[31]=p,x[32]=M,x[33]=$,x[34]=g):g=x[34],x[35]!==F||x[36]!==g?(y=(0,i.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-navigation-new-thread":!0,"data-marker-id":"new-comment",ref:b,tabIndex:F,onFocus:P,children:g}),x[35]=F,x[36]=g,x[37]=y):y=x[37],y}:function({diffAnchor:e,isInDialogMode:t,isOpen:n,onCloseCommentDialog:a,onAddComment:s,startLineNumber:r,diffLine:o,shouldStartNewConversationWithSuggestedChange:d,...c}){let{sendAnalyticsEvent:u}=(0,tJ.s)(),m=(0,l.useRef)(null),h=J(),f=t0(o,d),{newTreeEntry:p,oldTreeEntry:g}=eo(),{effectiveRange:y}=(0,k.L3)(),{baseOid:x,headOid:v}=(0,k.E4)(),b=(0,eQ.u)("cotd_ui"),j=o?.type==="DELETION",w=np(o,!!j,!1),C=(0,l.useMemo)(()=>{},[h,!1]),{mutate:_}=ne(),N=(0,l.useMemo)(()=>{if(n&&f?.configureSuggestedChangesFromLineRange){let e=h();return f.configureSuggestedChangesFromLineRange(e,f?.shouldStartNewConversationWithSuggestedChange)}},[n,f,h]);return n?(0,i.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-navigation-new-thread":!0,"data-marker-id":"new-comment",ref:m,tabIndex:t?0:-1,onFocus:e=>{e.target===m.current&&m.current.querySelector("textarea")?.focus()},children:(0,i.jsx)(eJ,{onClose:e=>{a(e),u("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},showOnCloseIcon:!1,suggestedChangesConfig:N,onAddComment:s||(({onCompleted:e,onError:t,submitBatch:n,text:i})=>{if(!o)return;let a=h();if(b){let s=new ReviewCommentFactory({filePath:c.filePath,newTreeEntry:p,oldTreeEntry:g,effectiveDiffRange:y,submitBatch:n,text:i});_(a&&nf(!1,a)?s.multilineRequestData(a):s.lineRequestData(o,j),{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId)}})}else{let s,r,l=!!a&&a.startLineNumber!==a.endLineNumber,d=o.blobLineNumber,u=j&&!(0,A.Ji)(o)?"left":"right";_({text:i,line:d,path:c.filePath,side:u,startSide:r,submitBatch:n,startLine:s,comparisonEndOid:v,comparisonStartOid:x},{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId)}})}}),addCommentDialogTitle:w,startLineNumber:r??C,...c})}):null};try{ng.displayName||(ng.displayName="StartConversation")}catch{}var ny=n(2265);let nx=tU.z0.ArrowAll;tU.z0.ArrowHorizontal,tU.z0.ArrowVertical,tU.z0.ArrowVertical,tU.z0.ArrowHorizontal;let MarkerNavigator=class MarkerNavigator{focusMarker(e){let t=this.markers.findIndex(t=>t.id.toString()===e.toString());-1!==t&&(this.currentMarkerPosition={markerId:e,index:t})}get focusedMarker(){if(this.currentMarkerPosition)return this.markers[this.currentMarkerPosition.index]}moveToFirstComment(e){if(0!==this.markers.length&&!e)return}moveToNextMarker(e,t){let n;if(0===this.markers.length)return;if(t){let e=t.closest("[data-marker-id]"),n=e?.getAttribute("data-marker-id");n&&(this.currentMarkerPosition={markerId:n,index:this.markers.findIndex(e=>e.id.toString()===n.toString())})}if(!this.currentMarkerPosition){let t="ArrowUp"===e?this.markers.length-1:0,n=this.markers[t];if(!n)return;return this.currentMarkerPosition={markerId:n.id,index:t},this.markers[t]}let i=0===this.currentMarkerPosition.index,a=this.currentMarkerPosition.index===this.markers.length-1;switch(e){case"ArrowDown":if(a)return;n=(this.currentMarkerPosition.index+1)%this.markers.length;break;case"ArrowUp":if(i)return;n=(this.currentMarkerPosition.index-1+this.markers.length)%this.markers.length;break;default:return}let s=this.markers[n];if(s)return this.currentMarkerPosition={markerId:s.id,index:n},s}moveToNextMarkerItem(e,t){let n;if(!t||!this.markerComments)return;let i=t.closest("[data-marker-id]"),a=i?.getAttribute("data-marker-id");if(!i||!a)return;let s=this.markerComments[a]||[];if(0===s.length)return;let r=t.getAttribute("data-marker-navigation-comment-id"),l=s.findIndex(e=>e.id===r);if(-1===l)return;let o=l===s.length-1;switch(e){case"ArrowDown":if(o)return;n=l+1;break;case"ArrowUp":if(0===l)return;n=l-1;break;default:return}let d=s[n];if(d)return this.currentMarkerCommentPosition={markerId:d.id,index:n},d}constructor(e,t,n){if((0,tm._)(this,"markers",void 0),(0,tm._)(this,"markerComments",null),(0,tm._)(this,"currentMarkerPosition",null),(0,tm._)(this,"currentMarkerCommentPosition",null),this.markers=e.map(e=>{let t=e.id;return{...e,id:t}}),this.markerComments=e.reduce((e,t)=>{let n=document.querySelectorAll(`[data-marker-navigation-comment-thread-id="${t.id}"]`);if(n){let i=Array.from(n).map(e=>({id:e.getAttribute("data-marker-navigation-comment-id")}));return{...e,[t.id.toString()]:i}}return e},{}),t&&!n){const e=this.markers.findIndex(e=>e.id.toString()===t.toString());-1!==e&&(this.currentMarkerPosition={markerId:t,index:e})}}};function nv({containerRef:e,markers:t,disabled:n=!1,focusInStrategy:i="previous"}){let a=(0,l.useRef)(void 0),s=(0,l.useRef)(void 0);(0,l.useEffect)(()=>{s.current=new MarkerNavigator(t,a.current?.focusedMarker?.id||void 0),a.current=s.current},[t]);let r=(0,l.useCallback)((e,t,n)=>{let i=n.key,a=!nb(t)&&!nj(t)&&!nN(t)&&!nw(t);switch(!0){case a&&("ArrowUp"===i||"ArrowDown"===i||"ArrowRight"===i||"ArrowLeft"===i):return n_(t)||nC(t)||void 0;case"ArrowUp"===i||"ArrowDown"===i:if(s.current&&nb(t)){let e=s.current.moveToNextMarker(i,nC(t));if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(s.current&&nw(t)){let e=s.current.moveToNextMarker(i,nw(t));if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(s.current&&nN(t)){let e=s.current.moveToNextMarkerItem(i,nN(t));if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0;return t}if(s.current&&nj(t)){let e=s.current.moveToNextMarkerItem(i,t);if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0}return t;case"ArrowRight"===i:if(nj(t))return n_(t);if(nb(t))return t?.querySelector('[data-first-thread-comment="true"]')||void 0;return t;case"ArrowLeft"===i:if(nb(t))return nC(t);if(nw(t))return nw(t);if(nN(t))return nN(t);if(nj(t))return t?.closest("[data-marker-id]")||void 0;return t;default:return t??void 0}},[s]);return(0,tr.G)({containerRef:e,bindKeys:nx,getNextFocusable:r,focusableElementFilter:e=>!n&&!!(e.hasAttribute("data-marker-id")&&e.hasAttribute("data-marker-navigation-comment-id")),focusInStrategy:i,disabled:n},[r,n]),{markerNavigator:s}}function nb(e){return!!e?.hasAttribute("data-marker-id")}function nj(e){return!!e?.hasAttribute("data-marker-navigation-comment-id")}function nw(e){return e?.closest("[data-marker-navigation-new-thread]")??void 0}function nC(e){return e?.closest("[data-marker-id]")??void 0}function n_(e){return e?.closest("[data-marker-navigation-comment-id]")??void 0}function nN(e){return e?.closest("[data-marker-navigation-thread-reply]")??void 0}var nS=n(48505);let nI="a, audio, button, details, embed, iframe, img, input, keygen, label, object, select, textarea, video";function nk(e){e?.setAttribute("aria-hidden","true"),!function t(n=0){setTimeout(()=>{let n=Array.from(e?.querySelectorAll("*")??[]),i=Array.from(e?.querySelectorAll(nI)??[]);if(0===i.length)return t(200);for(let e of n)e?.setAttribute("aria-hidden","true");for(let e of i)e.setAttribute("tabindex","-1")},n)}()}function nL(e){for(let t of(e?.setAttribute("aria-hidden","false"),Array.from(e?.querySelectorAll("*")??[])))t?.setAttribute("aria-hidden","false");for(let t of Array.from(e?.querySelectorAll(nI)??[]))t.setAttribute("tabindex","0")}let nD=(0,a.GV)()?function(e){let t,n,i=(0,s.c)(7),{commentSubjectType:a,gridCellId:r,markerRef:o,isThread:d,thread:c}=e,u=void 0!==d&&d,m=ee(r);i[0]!==a||i[1]!==m||i[2]!==u||i[3]!==o||i[4]!==c?(t=()=>{let e=null;if(!u||c)return m?"commit"===a?e=setTimeout(()=>{nL(o.current)},100):nL(o.current):nk(o.current),()=>{e&&clearTimeout(e)}},n=[m,a,o,u,c],i[0]=a,i[1]=m,i[2]=u,i[3]=o,i[4]=c,i[5]=t,i[6]=n):(t=i[5],n=i[6]),(0,l.useEffect)(t,n)}:function({commentSubjectType:e,gridCellId:t,markerRef:n,isThread:i=!1,thread:a}){let s=ee(t);(0,l.useEffect)(()=>{let t=null;if(!i||a)return s?"commit"===e?t=setTimeout(()=>{nL(n.current)},100):nL(n.current):nk(n.current),()=>{t&&clearTimeout(t)}},[s,e,n,i,a])};var nT=n(86909);let nE="InlineAnnotation-module__inlineAnnotation--bVDzc",nA=(0,a.GV)()?function(e){let t,n,a,r,o=(0,s.c)(14),{annotation:d,gridCellId:c,isFirstMarker:u}=e,m=(0,l.useRef)(null),h=ee(c);o[0]!==c?(t={commentSubjectType:"pull request",gridCellId:c,markerRef:m},o[0]=c,o[1]=t):t=o[1],nD(t);let f=`annotation_${d.databaseId}`,p=u?"mb-1":"mb-2";o[2]!==p?(n=(0,x.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",p,nE),o[2]=p,o[3]=n):n=o[3];let g=`annotation-${d.id}`,y=`${d.id}`,v=h?0:-1;return o[4]!==d?(a=(0,i.jsx)(nT.YH,{annotation:d}),o[4]=d,o[5]=a):a=o[5],o[6]!==d.annotationLevel||o[7]!==f||o[8]!==n||o[9]!==g||o[10]!==y||o[11]!==v||o[12]!==a?(r=(0,i.jsx)("div",{id:f,ref:m,className:n,"data-level":d.annotationLevel,"data-testid":g,"data-marker-id":y,tabIndex:v,children:a}),o[6]=d.annotationLevel,o[7]=f,o[8]=n,o[9]=g,o[10]=y,o[11]=v,o[12]=a,o[13]=r):r=o[13],r}:function({annotation:e,gridCellId:t,isFirstMarker:n}){let a=(0,l.useRef)(null),s=ee(t);return nD({commentSubjectType:"pull request",gridCellId:t,markerRef:a}),(0,i.jsx)("div",{id:`annotation_${e.databaseId}`,ref:a,className:(0,x.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",n?"mb-1":"mb-2",nE),"data-level":e.annotationLevel,"data-testid":`annotation-${e.id}`,"data-marker-id":`${e.id}`,tabIndex:s?0:-1,children:(0,i.jsx)(nT.YH,{annotation:e})})};try{nA.displayName||(nA.displayName="InlineAnnotation")}catch{}let nR="InlineMarkers-module__closeMarkersDialogButton--wdW2G",nO="InlineMarkers-module__markersWrapper--Fw1hl",nP="InlineMarkers-module__fileMarkersWrapper--rXaAB",nF="InlineMarkers-module__markersDialogActive--v0PSm";var nM=n(33643),n$=n(75202),nB=n(82075),nV=n(26607),nU=n(72511),nq=n(76720);let nH=(0,a.GV)()?function(){let e,t,n,a=(0,s.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(nq.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(nq.E.Heading,{children:(0,i.jsx)("strong",{children:"Comments cannot be loaded right now"})}),a[1]=t):t=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)(nq.E,{border:!0,children:[e,t,(0,i.jsx)("div",{className:"mb-n2",children:(0,i.jsx)(nq.E.Description,{children:"Refresh the page or try again later"})}),(0,i.jsx)(nq.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})}),a[2]=n):n=a[2],n}:function(){return(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)(nq.E,{border:!0,children:[(0,i.jsx)(nq.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),(0,i.jsx)(nq.E.Heading,{children:(0,i.jsx)("strong",{children:"Comments cannot be loaded right now"})}),(0,i.jsx)("div",{className:"mb-n2",children:(0,i.jsx)(nq.E.Description,{children:"Refresh the page or try again later"})}),(0,i.jsx)(nq.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})})};try{nH.displayName||(nH.displayName="CommentErrorFallback")}catch{}let nG="InlineReviewThread-module__inlineReviewThreadHeading--CBLMR",nK="InlineReviewThread-module__ReviewThreadContainer--MW9GI",nW="InlineReviewThread-module__ResolvableContainer--FkZ8G",nz="InlineReviewThread-module__ThreadLoading--UIhR9";var nQ=n(11738),nZ=n(96760),nJ=n(11680);let nY=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(13),l=(0,k.Kp)(),o=(0,t5.jE)(),d=`${l}/page_data/${t3.uT.createReviewComment}`,{updateThread:c}=(0,k.an)(),{addPendingComment:u,clearPendingReview:m}=(0,k._N)();return r[0]!==d?(n=async e=>{let t=await (0,t7.Sr)(`${d}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,t4.hp)(t);return(0,t4.R)(t,n),n},r[0]=d,r[1]=n):n=r[1],r[2]!==u||r[3]!==l||r[4]!==m||r[5]!==e||r[6]!==t||r[7]!==o||r[8]!==c?(i=(n,i)=>(void 0!==i.submitBatch&&!i.submitBatch&&n.thread&&u(Number(n.thread.id)),i.submitBatch&&m(),c(Number(n.thread.id),e,t,e=>n.thread),o.invalidateQueries({queryKey:(0,t8.XG)(l)})),r[2]=u,r[3]=l,r[4]=m,r[5]=e,r[6]=t,r[7]=o,r[8]=c,r[9]=i):i=r[9],r[10]!==n||r[11]!==i?(a={mutationFn:n,onSuccess:i},r[10]=n,r[11]=i,r[12]=a):a=r[12],(0,t6.n)(a)}:function(e,t){let n=(0,k.Kp)(),i=(0,t5.jE)(),a=`${n}/page_data/${t3.uT.createReviewComment}`,{updateThread:s}=(0,k.an)(),{addPendingComment:r,clearPendingReview:l}=(0,k._N)();return(0,t6.n)({mutationFn:async e=>{let t=await (0,t7.Sr)(`${a}`,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,t4.hp)(t);return(0,t4.R)(t,n),n},onSuccess:(a,o)=>(void 0!==o.submitBatch&&!o.submitBatch&&a.thread&&r(Number(a.thread.id)),o.submitBatch&&l(),s(Number(a.thread.id),e,t,e=>a.thread),i.invalidateQueries({queryKey:(0,t8.XG)(n)}))})};var nX=n(80081),n0=n(95542);let n1="ReviewThread-module__ReviewThreadContainer--s6e8A";var n2=n(61219);let n3=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h,p=(0,s.c)(82),{batchingEnabled:y,commentAnchorPrefix:x,lineMarkersKey:v,disableDialogMode:b,enableDialogMode:j,filePath:w,gridCellId:C,isInlineComment:_,isInDialogMode:N,onDeleteLineComment:S,thread:I,threadPositionNumber:L,shouldLimitHeight:D,suggestedChangesConfig:T,viewerData:E,ghostUser:A}=e,R=void 0===D||D,[O,P]=(0,l.useState)(!1),[F,M]=(0,l.useState)(void 0),{sendAnalyticsEvent:$}=(0,tJ.s)(),B=(0,k.Kp)(),V=(0,l.useRef)(null),U=(0,l.useRef)(null),{mutate:q}=nY(w,v),{baseOid:H,headOid:G}=(0,k.E4)();p[0]!==q||p[1]!==G||p[2]!==w||p[3]!==$||p[4]!==H||p[5]!==I.commentsData?.comments?(t=e=>{let{commentText:t,onCompleted:n,onError:i,submitBatch:a}=e,s=I.commentsData?.comments[I.commentsData?.comments.length-1];q({text:t,submitBatch:a,inReplyTo:s?.databaseId,path:w,comparisonEndOid:G,comparisonStartOid:H},{onError:i,onSuccess:e=>{var t;(t=e.comment.databaseId)&&f(t.toString()),n?.()}}),$("comments.add","ADD_COMMENT_BUTTON")},p[0]=q,p[1]=G,p[2]=w,p[3]=$,p[4]=H,p[5]=I.commentsData?.comments,p[6]=t):t=p[6];let K=t;p[7]!==$?(n=()=>{P(!1),M(void 0),$("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),g.cg?.requestAnimationFrame(()=>V.current?.focus())},p[7]=$,p[8]=n):n=p[8];let W=n;p[9]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{M(e),P(!0)},p[9]=a):a=p[9];let z=a;if(!I.commentsData||null===I.commentsData.comments||I.commentsData.comments.length<1)return null;p[10]!==I?(r=(0,nX.Lm)(I),p[10]=I,p[11]=r):r=p[11];let Q=r;p[12]!==Q||p[13]!==I.subjectType?(o=I.subjectType?.toLowerCase()==="line"?{lineRange:Q}:void 0,p[12]=Q,p[13]=I.subjectType,p[14]=o):o=p[14];let Z=o;p[15]!==O?(d=e=>{U.current===e.target&&(O?U.current?.querySelector("textarea")?.focus():V.current?.focus())},p[15]=O,p[16]=d):d=p[16];let J=d;if(p[17]!==Z||p[18]!==B||p[19]!==x||p[20]!==b||p[21]!==j||p[22]!==w||p[23]!==A||p[24]!==C||p[25]!==N||p[26]!==_||p[27]!==v||p[28]!==S||p[29]!==T||p[30]!==I.commentsData.__id||p[31]!==I.commentsData.comments||p[32]!==I.id||p[33]!==I.isResolved||p[34]!==I.positioning?.isOutdated||p[35]!==L||p[36]!==E){let e;p[38]!==Z||p[39]!==B||p[40]!==x||p[41]!==b||p[42]!==j||p[43]!==w||p[44]!==A||p[45]!==C||p[46]!==N||p[47]!==_||p[48]!==v||p[49]!==S||p[50]!==T||p[51]!==I.commentsData.__id||p[52]!==I.commentsData.comments.length||p[53]!==I.id||p[54]!==I.isResolved||p[55]!==I.positioning?.isOutdated||p[56]!==L||p[57]!==E?(e=(e,t)=>(function(e,t){return e.reviewVariantType===nS.hH.Automated&&0===t})(e,t)?(0,i.jsx)(n$.t,{fallback:(0,i.jsx)(n0.k,{}),boundaryName:"AutomatedReviewThreadComment",children:(0,i.jsx)(n0.y,{anchorPrefix:x,basePath:B,comment:e,isAnchorable:!0,isInDialogMode:N,isOutdated:I.positioning?.isOutdated,onQuoteReply:z,threadId:I.id,threadPositionNumber:L},e.id)},e.id):(0,i.jsx)(n2.U,{lineMarkersKey:v,isAnchorable:!0,index:t,threadPositionNumber:L,isFirstComment:0===t,isInlineComment:_,isLastChild:t===(I.commentsData?.comments.length??0)-1,anchorPrefix:x,comment:e,commentConnectionId:I.commentsData?.__id,disableDialogMode:b,enableDialogMode:j,filePath:w,gridCellId:C,isInDialogMode:N,isOutdated:I.positioning?.isOutdated,threadId:I.id,onDeleteLineComment:S,onQuoteReply:z,threadCommentCount:I.commentsData?.comments.length,isThreadResolved:!!I.isResolved,suggestedChangesConfig:T,applySuggestedChangesValidationData:Z,viewerData:E,ghostUser:A},e.id),p[38]=Z,p[39]=B,p[40]=x,p[41]=b,p[42]=j,p[43]=w,p[44]=A,p[45]=C,p[46]=N,p[47]=_,p[48]=v,p[49]=S,p[50]=T,p[51]=I.commentsData.__id,p[52]=I.commentsData.comments.length,p[53]=I.id,p[54]=I.isResolved,p[55]=I.positioning?.isOutdated,p[56]=L,p[57]=E,p[58]=e):e=p[58],c=I.commentsData.comments.map(e),p[17]=Z,p[18]=B,p[19]=x,p[20]=b,p[21]=j,p[22]=w,p[23]=A,p[24]=C,p[25]=N,p[26]=_,p[27]=v,p[28]=S,p[29]=T,p[30]=I.commentsData.__id,p[31]=I.commentsData.comments,p[32]=I.id,p[33]=I.isResolved,p[34]=I.positioning?.isOutdated,p[35]=L,p[36]=E,p[37]=c}else c=p[37];return p[59]!==I.reviewCommentsLimit||p[60]!==I.reviewCommentsLimitExceeded?(u=I.reviewCommentsLimitExceeded&&(0,i.jsx)(nJ.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(I.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),p[59]=I.reviewCommentsLimit,p[60]=I.reviewCommentsLimitExceeded,p[61]=u):u=p[61],p[62]!==K||p[63]!==y||p[64]!==W||p[65]!==w||p[66]!==J||p[67]!==N||p[68]!==O||p[69]!==Q?.endLineNumber||p[70]!==Q?.startLineNumber||p[71]!==F||p[72]!==$||p[73]!==T||p[74]!==I.id||p[75]!==I.viewerCanReply?(m=I.viewerCanReply&&(0,i.jsxs)("div",{id:nZ.Bq.issueCommentComposer,className:"rounded-bottom-2 p-2 bgColor-inset","data-marker-navigation-comment-thread-id":I.id,"data-marker-navigation-comment-id":`${I.id}-reply-comment`,"data-marker-navigation-thread-reply":!0,tabIndex:N?0:-1,onFocus:J,ref:U,children:[O&&(0,i.jsx)(eA,{startLineNumber:Q?.startLineNumber,lineNumber:Q?.endLineNumber,batchingEnabled:y,condensed:!1,fileLevelComment:!0,filePath:w,focusOnMount:!0,isReplying:!0,onCancelComment:W,quotedText:F,threadId:I.id,onAddComment:K,suggestedChangesConfig:T}),!O&&(0,i.jsx)(nQ.z,{ref:V,onClick:()=>{$("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),P(!0)},children:"Write a reply"})]}),p[62]=K,p[63]=y,p[64]=W,p[65]=w,p[66]=J,p[67]=N,p[68]=O,p[69]=Q?.endLineNumber,p[70]=Q?.startLineNumber,p[71]=F,p[72]=$,p[73]=T,p[74]=I.id,p[75]=I.viewerCanReply,p[76]=m):m=p[76],p[77]!==R||p[78]!==m||p[79]!==c||p[80]!==u?(h=(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)("div",{className:n1,"data-limit-height":R,children:[c,u,m]})}),p[77]=R,p[78]=m,p[79]=c,p[80]=u,p[81]=h):h=p[81],h}:function({batchingEnabled:e,commentAnchorPrefix:t,lineMarkersKey:n,disableDialogMode:a,enableDialogMode:s,filePath:r,gridCellId:o,isInlineComment:d,isInDialogMode:c,onDeleteLineComment:u,thread:m,threadPositionNumber:h,shouldLimitHeight:p=!0,suggestedChangesConfig:y,viewerData:x,ghostUser:v}){let[b,j]=(0,l.useState)(!1),[w,C]=(0,l.useState)(void 0),{sendAnalyticsEvent:_}=(0,tJ.s)(),N=(0,k.Kp)(),S=(0,l.useRef)(null),I=(0,l.useRef)(null),{mutate:L}=nY(r,n),{baseOid:D,headOid:T}=(0,k.E4)(),E=e=>{C(e),j(!0)};if(!m.commentsData||null===m.commentsData.comments||m.commentsData.comments.length<1)return null;let A=(0,nX.Lm)(m),R=m.subjectType?.toLowerCase()==="line"?{lineRange:A}:void 0;return(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)("div",{className:n1,"data-limit-height":p,children:[m.commentsData.comments.map((e,l)=>e.reviewVariantType===nS.hH.Automated&&0===l?(0,i.jsx)(n$.t,{fallback:(0,i.jsx)(n0.k,{}),boundaryName:"AutomatedReviewThreadComment",children:(0,i.jsx)(n0.y,{anchorPrefix:t,basePath:N,comment:e,isAnchorable:!0,isInDialogMode:c,isOutdated:m.positioning?.isOutdated,onQuoteReply:E,threadId:m.id,threadPositionNumber:h},e.id)},e.id):(0,i.jsx)(n2.U,{lineMarkersKey:n,isAnchorable:!0,index:l,threadPositionNumber:h,isFirstComment:0===l,isInlineComment:d,isLastChild:l===(m.commentsData?.comments.length??0)-1,anchorPrefix:t,comment:e,commentConnectionId:m.commentsData?.__id,disableDialogMode:a,enableDialogMode:s,filePath:r,gridCellId:o,isInDialogMode:c,isOutdated:m.positioning?.isOutdated,threadId:m.id,onDeleteLineComment:u,onQuoteReply:E,threadCommentCount:m.commentsData?.comments.length,isThreadResolved:!!m.isResolved,suggestedChangesConfig:y,applySuggestedChangesValidationData:R,viewerData:x,ghostUser:v},e.id)),m.reviewCommentsLimitExceeded&&(0,i.jsx)(nJ.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(m.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),m.viewerCanReply&&(0,i.jsxs)("div",{id:nZ.Bq.issueCommentComposer,className:"rounded-bottom-2 p-2 bgColor-inset","data-marker-navigation-comment-thread-id":m.id,"data-marker-navigation-comment-id":`${m.id}-reply-comment`,"data-marker-navigation-thread-reply":!0,tabIndex:c?0:-1,onFocus:e=>{I.current===e.target&&(b?I.current?.querySelector("textarea")?.focus():S.current?.focus())},ref:I,children:[b&&(0,i.jsx)(eA,{startLineNumber:A?.startLineNumber,lineNumber:A?.endLineNumber,batchingEnabled:e,condensed:!1,fileLevelComment:!0,filePath:r,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{j(!1),C(void 0),_("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),g.cg?.requestAnimationFrame(()=>S.current?.focus())},quotedText:w,threadId:m.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let a=m.commentsData?.comments[m.commentsData?.comments.length-1];L({text:e,submitBatch:i,inReplyTo:a?.databaseId,path:r,comparisonEndOid:T,comparisonStartOid:D},{onError:n,onSuccess:e=>{var n;(n=e.comment.databaseId)&&f(n.toString()),t?.()}}),_("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:y}),!b&&(0,i.jsx)(nQ.z,{ref:S,onClick:()=>{_("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),j(!0)},children:"Write a reply"})]})]})})};try{n3.displayName||(n3.displayName="ReviewThread")}catch{}var n4=n(97695),n5=n(39698),n6=n(25407),n7=n(21067);let n8=(0,a.Z6)()?function(e,t){let n,i,a,r,l=(0,s.c)(12),o=(0,k.Kp)();l[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,n7.cj)(),l[0]=n):n=l[0];let d=n,c=(0,t5.jE)(),{updateThread:u}=(0,k.an)();return l[1]!==o?(i=async e=>{let{automatedReviewCommentId:t,reason:n,resolutionNote:i}=e,a=(0,n6.L7I)({basePath:o,automatedReviewCommentId:t}),s=await (0,t4.q$)(a,{method:"PUT",body:{reason:n,resolution_note:i}});(0,t4.R)(s)},l[1]=o,l[2]=i):i=l[2],l[3]!==o||l[4]!==e||l[5]!==t||l[6]!==c||l[7]!==u?(a=(n,i)=>{u(Number(i.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!0,resolvedBy:d,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!0,viewerCanDismiss:!1,viewerCanReopen:!0}},...e.commentsData.comments.slice(1)]}}}}),c.invalidateQueries({queryKey:(0,t8.XG)(o)})},l[3]=o,l[4]=e,l[5]=t,l[6]=c,l[7]=u,l[8]=a):a=l[8],l[9]!==i||l[10]!==a?(r={mutationFn:i,onSuccess:a},l[9]=i,l[10]=a,l[11]=r):r=l[11],(0,t6.n)(r)}:function(e,t){let n=(0,k.Kp)(),i=(0,n7.cj)(),a=(0,t5.jE)(),{updateThread:s}=(0,k.an)();return(0,t6.n)({mutationFn:async({automatedReviewCommentId:e,reason:t,resolutionNote:i})=>{let a=(0,n6.L7I)({basePath:n,automatedReviewCommentId:e}),s=await (0,t4.q$)(a,{method:"PUT",body:{reason:t,resolution_note:i}});(0,t4.R)(s)},onSuccess:(r,l)=>{s(Number(l.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!0,resolvedBy:i,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!0,viewerCanDismiss:!1,viewerCanReopen:!0}},...e.commentsData.comments.slice(1)]}}}}),a.invalidateQueries({queryKey:(0,t8.XG)(n)})}})},n9=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(11),l=(0,k.Kp)(),o=(0,t5.jE)(),{updateThread:d}=(0,k.an)();return r[0]!==l?(n=async e=>{let{automatedReviewCommentId:t}=e,n=(0,n6.Aav)({basePath:l,automatedReviewCommentId:t}),i=await (0,t4.q$)(n,{method:"PUT"});(0,t4.R)(i)},r[0]=l,r[1]=n):n=r[1],r[2]!==l||r[3]!==e||r[4]!==t||r[5]!==o||r[6]!==d?(i=(n,i)=>{d(Number(i.threadId),e,t,ie),o.invalidateQueries({queryKey:(0,t8.XG)(l)})},r[2]=l,r[3]=e,r[4]=t,r[5]=o,r[6]=d,r[7]=i):i=r[7],r[8]!==n||r[9]!==i?(a={mutationFn:n,onSuccess:i},r[8]=n,r[9]=i,r[10]=a):a=r[10],(0,t6.n)(a)}:function(e,t){let n=(0,k.Kp)(),i=(0,t5.jE)(),{updateThread:a}=(0,k.an)();return(0,t6.n)({mutationFn:async({automatedReviewCommentId:e})=>{let t=(0,n6.Aav)({basePath:n,automatedReviewCommentId:e}),i=await (0,t4.q$)(t,{method:"PUT"});(0,t4.R)(i)},onSuccess:(s,r)=>{a(Number(r.threadId),e,t,e=>{if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!1,resolvedBy:void 0,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!1,viewerCanDismiss:!0,viewerCanReopen:!1}},...e.commentsData.comments.slice(1)]}}}}),i.invalidateQueries({queryKey:(0,t8.XG)(n)})}})};function ie(e){if(e?.commentsData?.comments[0]?.automatedComment){let t=e.commentsData?.comments[0]?.automatedComment;return{...e,isResolved:!1,resolvedBy:void 0,commentsData:{...e.commentsData,comments:[{...e.commentsData.comments[0],automatedComment:{...t,isDismissed:!1,viewerCanDismiss:!0,viewerCanReopen:!1}},...e.commentsData.comments.slice(1)]}}}}var it=n(73262);let ii=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(20),{automatedComment:l,thread:o,filePath:d,lineMarkersKey:c,setErrorMessage:u,setIsCollapsed:m,safeLocalStorage:h}=e,{mutate:f,isPending:p,error:g}=n8(d,c);r[0]!==l.id||r[1]!==f||r[2]!==h||r[3]!==u||r[4]!==m||r[5]!==o.id?(t=(e,t)=>{let{reason:n,resolutionNote:i}=e,{onSuccess:a}=t;f({automatedReviewCommentId:l.id,threadId:o.id,reason:n,resolutionNote:i},{onError:()=>u("Failed to dismiss"),onSuccess:()=>{a(),m(!0),h.removeItem(`reviewThreadIsCollapsed_${o.id}`)}})},r[0]=l.id,r[1]=f,r[2]=h,r[3]=u,r[4]=m,r[5]=o.id,r[6]=t):t=r[6];let y=t,{mutate:x,isPending:v}=n9(d,c);r[7]!==l.id||r[8]!==x||r[9]!==h||r[10]!==u||r[11]!==m||r[12]!==o.id?(n=()=>{x({automatedReviewCommentId:l.id,threadId:o.id},{onError:()=>u("Failed to reopen"),onSuccess:()=>{m(!1),h.removeItem(`reviewThreadIsCollapsed_${o.id}`)}})},r[7]=l.id,r[8]=x,r[9]=h,r[10]=u,r[11]=m,r[12]=o.id,r[13]=n):n=r[13];let b=n,j=p||v;return r[14]!==l||r[15]!==g||r[16]!==y||r[17]!==b||r[18]!==j?(a=(0,i.jsx)(it.K,{automatedComment:l,dismissError:g,isButtonDisabled:j,onDismiss:y,onReopen:b,className:"p-2 border-top"}),r[14]=l,r[15]=g,r[16]=y,r[17]=b,r[18]=j,r[19]=a):a=r[19],a}:function({automatedComment:e,thread:t,filePath:n,lineMarkersKey:a,setErrorMessage:s,setIsCollapsed:r,safeLocalStorage:l}){let{mutate:o,isPending:d,error:c}=n8(n,a),{mutate:u,isPending:m}=n9(n,a);return(0,i.jsx)(it.K,{automatedComment:e,dismissError:c,isButtonDisabled:d||m,onDismiss:({reason:n,resolutionNote:i},{onSuccess:a})=>{o({automatedReviewCommentId:e.id,threadId:t.id,reason:n,resolutionNote:i},{onError:()=>s("Failed to dismiss"),onSuccess:()=>{a(),r(!0),l.removeItem(`reviewThreadIsCollapsed_${t.id}`)}})},onReopen:()=>{u({automatedReviewCommentId:e.id,threadId:t.id},{onError:()=>s("Failed to reopen"),onSuccess:()=>{r(!1),l.removeItem(`reviewThreadIsCollapsed_${t.id}`)}})},className:"p-2 border-top"})};try{ii.displayName||(ii.displayName="InlineAutomatedReviewThreadActions")}catch{}let ia=(0,a.GV)()?function(e){let t,n=(0,s.c)(2),{children:a}=e;return n[0]!==a?(t=(0,i.jsx)("span",{className:"text-semibold fgColor-default",children:a}),n[0]=a,n[1]=t):t=n[1],t}:function({children:e}){return(0,i.jsx)("span",{className:"text-semibold fgColor-default",children:e})};function is({thread:e}){if(void 0===e)return null;let t=e.positioning??e.subject;return void 0!==t&&t.endDiffSide&&t.endLine?t.startLine&&t.startDiffSide&&t.startLine!==t.endLine?il({positioning:t}):ir({positioning:t}):null}let ir=(0,a.GV)()?function(e){let t,n=(0,s.c)(3),{positioning:a}=e,r="LEFT"===a.endDiffSide?"L":"R",l=a.endLine??"";return n[0]!==r||n[1]!==l?(t=(0,i.jsxs)("h2",{className:nG,children:["Comment on line"," ",(0,i.jsxs)(ia,{children:[r,l]})]}),n[0]=r,n[1]=l,n[2]=t):t=n[2],t}:function({positioning:e}){let t="LEFT"===e.endDiffSide?"L":"R";return(0,i.jsxs)("h2",{className:nG,children:["Comment on line"," ",(0,i.jsxs)(ia,{children:[t,e.endLine??""]})]})},il=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(9),{positioning:l}=e,o="LEFT"===l.startDiffSide?"L":"R",d="LEFT"===l.endDiffSide?"L":"R",c=l.startLine??"";r[0]!==o||r[1]!==c?(t=(0,i.jsxs)(ia,{children:[o,c]}),r[0]=o,r[1]=c,r[2]=t):t=r[2];let u=l.endLine??"";return r[3]!==d||r[4]!==u?(n=(0,i.jsxs)(ia,{children:[d,u]}),r[3]=d,r[4]=u,r[5]=n):n=r[5],r[6]!==t||r[7]!==n?(a=(0,i.jsxs)("h2",{className:nG,children:["Comment on lines"," ",t," ","to"," ",n]}),r[6]=t,r[7]=n,r[8]=a):a=r[8],a}:function({positioning:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.endDiffSide?"L":"R";return(0,i.jsxs)("h2",{className:nG,children:["Comment on lines"," ",(0,i.jsxs)(ia,{children:[t,e.startLine??""]})," ","to"," ",(0,i.jsxs)(ia,{children:[n,e.endLine??""]})]})},io=(0,a.GV)()?function(e){let t,n,a,r,o,d,u,h,f,p,g,y,v,b,j,w,C,_,N,S,I,L,D,T,E,A,R,O,P,F,M,$,B=(0,s.c)(99);B[0]!==e?({fileAnchor:t,filePath:n,gridCellId:r,onDeleteLineComment:u,threadId:p,threadPositionNumber:g,lineMarkersKey:d,threadsConnectionId:y,isFirstThread:o,ghostUser:a,suggestedChangesConfig:f,...h}=e,B[0]=e,B[1]=t,B[2]=n,B[3]=a,B[4]=r,B[5]=o,B[6]=d,B[7]=u,B[8]=h,B[9]=f,B[10]=p,B[11]=g,B[12]=y):(t=B[1],n=B[2],a=B[3],r=B[4],o=B[5],d=B[6],u=B[7],h=B[8],f=B[9],p=B[10],g=B[11],y=B[12]);let V=(0,k._W)(p,n,d),{mutate:U}=(0,n4.H)(n,d),q=()=>{V&&(U({threadId:V.id},{onError:()=>Q("Failed to resolve thread"),onSuccess:()=>{Y(!0),G.removeItem(`reviewThreadIsCollapsed_${p}`)}}),el("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},H=(0,l.useRef)(null),G=(0,nB.A)("localStorage"),K=V?.isResolved,[W,z]=(0,l.useState)(""),Q=z,[Z,J]=(0,l.useState)(K??!1),Y=J,X=ee(r),{disableDialogMode:en,enableDialogMode:ei}=et();B[13]!==K||B[14]!==p?(v=[K,p],B[13]=K,B[14]=p,B[15]=v):v=B[15],(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${p}`);null!==e?Y(JSON.parse(e)):K&&Y(!0)},v);let ea=()=>{window.requestAnimationFrame(()=>{G.setItem(`reviewThreadIsCollapsed_${p}`,JSON.stringify(!Z))}),Y(ic)};B[16]!==r||B[17]!==V?(b={commentSubjectType:"pull request",gridCellId:r,markerRef:H,isThread:!0,thread:V},B[16]=r,B[17]=V,B[18]=b):b=B[18],nD(b);e:{let e=V?.positioning??V?.subject;if(!e){j=void 0;break e}if(t&&V&&e.startDiffSide&&e.endDiffSide&&e.startLine&&e.endLine&&f?.configureSuggestedChangesFromLineRange){let n,i=e.startLine??e.endLine,a=e.startDiffSide??e.endDiffSide,s="LEFT"===e.endDiffSide?"left":"right",r="LEFT"===a?"left":"right",l="LEFT"===a?"left":"right";if(B[19]!==t||B[20]!==e.endLine||B[21]!==i||B[22]!==f||B[23]!==s||B[24]!==r||B[25]!==l){let a={diffAnchor:t,endLineNumber:e.endLine,endOrientation:s,startLineNumber:i,startOrientation:r,firstSelectedLineNumber:i,firstSelectedOrientation:l};n=f?.configureSuggestedChangesFromLineRange(a),B[19]=t,B[20]=e.endLine,B[21]=i,B[22]=f,B[23]=s,B[24]=r,B[25]=l,B[26]=n}else n=B[26];j=n;break e}j=void 0}let es=j,{sendAnalyticsEvent:er}=(0,tJ.s)(),el=er,{mutate:eo}=(0,n5.i)(n,d);B[27]!==G||B[28]!==el||B[29]!==Q||B[30]!==Y||B[31]!==V||B[32]!==eo?(w=()=>{V&&(eo({threadId:V.id},{onError:()=>Q("Failed to unresolve thread"),onSuccess:()=>{Y(!1),G.removeItem(`reviewThreadIsCollapsed_${V.id}`)}}),el("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},B[27]=G,B[28]=el,B[29]=Q,B[30]=Y,B[31]=V,B[32]=eo,B[33]=w):w=B[33];let ed=w,ec=V?.commentsData?.comments[0]?.reviewVariantType===nS.hH.Automated,eu=ec?V.commentsData?.comments[0]?.automatedComment:null,em=eu&&eu.dismissable,eh=eu&&eu.source===nS.vk.LicenseCompliance;if(!V||!((V.commentsData?.comments?.length??0)>0))return null;let ef=!!V.isResolved;B[34]===Symbol.for("react.memo_cache_sentinel")?(C=(0,n7.M3)(),B[34]=C):C=B[34];let ep=C;B[35]!==V.commentsData?.comments?(_=ep&&V.commentsData?.comments?.some(id),B[35]=V.commentsData?.comments,B[36]=_):_=B[36];let eg=_,ey=V.commentsData?.comments?.[0]?.createdAt,ex=V.commentsData?.comments?.[0]?.author?.login??"Unknown Author",ev=`${K?"Unresolve":"Resolve"} comment`;if(ey){let e;B[37]!==ey?(e=(0,nM.C)(new Date(ey)),B[37]=ey,B[38]=e):e=B[38];let t=e;ev=`${K?"Unresolve":"Resolve"} ${ex}'s comment, ${t}`}B[39]===Symbol.for("react.memo_cache_sentinel")?(N=(0,i.jsx)(nH,{}),B[39]=N):N=B[39],B[40]===Symbol.for("react.memo_cache_sentinel")?(S=(0,x.$)("px-1",nK),B[40]=S):S=B[40];let eb=Z?"Expand comment":"Collapse comment",ej=Z?c.ChevronRightIcon:c.ChevronDownIcon;return B[41]!==ea||B[42]!==o||B[43]!==eb||B[44]!==ej?(I=(0,i.jsx)(m.K,{"aria-label":eb,icon:ej,size:"small",variant:"invisible",onClick:ea,"data-is-first-collapse-button":o}),B[41]=ea,B[42]=o,B[43]=eb,B[44]=ej,B[45]=I):I=B[45],B[46]!==V?(L=(0,i.jsx)(is,{thread:V}),B[46]=V,B[47]=L):L=B[47],B[48]!==V.positioning?.isOutdated?(D=V.positioning?.isOutdated&&(0,i.jsx)(nV.A,{variant:"secondary",children:"Outdated"}),B[48]=V.positioning?.isOutdated,B[49]=D):D=B[49],B[50]!==ec||B[51]!==ef?(T=ef&&!ec&&(0,i.jsx)(nV.A,{variant:"secondary",children:"Resolved"}),B[50]=ec,B[51]=ef,B[52]=T):T=B[52],B[53]!==eu?.isDismissed?(E=eu?.isDismissed&&(0,i.jsx)(nV.A,{variant:"secondary",children:"Dismissed"}),B[53]=eu?.isDismissed,B[54]=E):E=B[54],B[55]!==D||B[56]!==T||B[57]!==E?(A=(0,i.jsxs)("div",{className:nW,children:[D,T,E]}),B[55]=D,B[56]=T,B[57]=E,B[58]=A):A=B[58],B[59]!==I||B[60]!==L||B[61]!==A?(R=(0,i.jsxs)("div",{className:S,children:[I,L,A]}),B[59]=I,B[60]=L,B[61]=A,B[62]=R):R=B[62],B[63]===Symbol.for("react.memo_cache_sentinel")?(O=(0,i.jsxs)("div",{className:nz,children:[(0,i.jsx)(e2.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),B[63]=O):O=B[63],B[64]!==W?(P=W&&(0,i.jsxs)(nU.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),W]}),B[64]=W,B[65]=P):P=B[65],B[66]!==eu||B[67]!==es||B[68]!==en||B[69]!==em||B[70]!==ei||B[71]!==n||B[72]!==a||B[73]!==r||B[74]!==q||B[75]!==ed||B[76]!==Z||B[77]!==X||B[78]!==eg||B[79]!==K||B[80]!==ef||B[81]!==eh||B[82]!==d||B[83]!==u||B[84]!==ev||B[85]!==h||B[86]!==G||B[87]!==Q||B[88]!==Y||B[89]!==V||B[90]!==g||B[91]!==y?(F=!Z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n3,{lineMarkersKey:d,disableDialogMode:en,enableDialogMode:ei,filePath:n,gridCellId:r,onDeleteLineComment:u,isInlineComment:!0,isInDialogMode:X,thread:V,threadPositionNumber:g,threadsConnectionId:y,suggestedChangesConfig:es,shouldLimitHeight:!1,...h,ghostUser:a}),eg&&!em&&!eh&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(eR.Q,{"aria-label":ev,onClick:ef?ed:q,className:"mr-2",children:K?"Unresolve comment":"Resolve comment"}),ef&&V.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:V.resolvedBy})," marked this comment as resolved"]})]}),em&&(0,i.jsx)(ii,{automatedComment:eu,thread:V,filePath:n,lineMarkersKey:d,setErrorMessage:Q,setIsCollapsed:Y,safeLocalStorage:G})]}),B[66]=eu,B[67]=es,B[68]=en,B[69]=em,B[70]=ei,B[71]=n,B[72]=a,B[73]=r,B[74]=q,B[75]=ed,B[76]=Z,B[77]=X,B[78]=eg,B[79]=K,B[80]=ef,B[81]=eh,B[82]=d,B[83]=u,B[84]=ev,B[85]=h,B[86]=G,B[87]=Q,B[88]=Y,B[89]=V,B[90]=g,B[91]=y,B[92]=F):F=B[92],B[93]!==P||B[94]!==F?(M=(0,i.jsxs)(l.Suspense,{fallback:O,children:[P,F]}),B[93]=P,B[94]=F,B[95]=M):M=B[95],B[96]!==R||B[97]!==M?($=(0,i.jsx)(n$.t,{fallback:N,children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:H,children:[R,M]})}),B[96]=R,B[97]=M,B[98]=$):$=B[98],$}:function({fileAnchor:e,filePath:t,gridCellId:n,onDeleteLineComment:a,threadId:s,threadPositionNumber:r,lineMarkersKey:o,threadsConnectionId:d,isFirstThread:u,ghostUser:h,suggestedChangesConfig:f,...p}){let g=(0,k._W)(s,t,o),{mutate:y}=(0,n4.H)(t,o),v=(0,l.useRef)(null),b=(0,nB.A)("localStorage"),j=g?.isResolved,[w,C]=(0,l.useState)(""),[_,N]=(0,l.useState)(j??!1),S=ee(n),{disableDialogMode:I,enableDialogMode:L}=et();(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${s}`);null!==e?N(JSON.parse(e)):j&&N(!0)},[j,s]),nD({commentSubjectType:"pull request",gridCellId:n,markerRef:v,isThread:!0,thread:g});let D=(0,l.useMemo)(()=>{let t=g?.positioning??g?.subject;if(t&&e&&g&&t.startDiffSide&&t.endDiffSide&&t.startLine&&t.endLine&&f?.configureSuggestedChangesFromLineRange){let n=t.startLine??t.endLine,i=t.startDiffSide??t.endDiffSide,a={diffAnchor:e,endLineNumber:t.endLine,endOrientation:"LEFT"===t.endDiffSide?"left":"right",startLineNumber:n,startOrientation:"LEFT"===i?"left":"right",firstSelectedLineNumber:n,firstSelectedOrientation:"LEFT"===i?"left":"right"};return f?.configureSuggestedChangesFromLineRange(a)}},[e,g,f]),{sendAnalyticsEvent:T}=(0,tJ.s)(),{mutate:E}=(0,n5.i)(t,o),A=g?.commentsData?.comments[0]?.reviewVariantType===nS.hH.Automated,R=A?g.commentsData?.comments[0]?.automatedComment:null,O=R&&R.dismissable,P=R&&R.source===nS.vk.LicenseCompliance;if(!g||!((g.commentsData?.comments?.length??0)>0))return null;let F=!!g.isResolved,M=(0,n7.M3)()&&g.commentsData?.comments?.some(e=>e.state?.toUpperCase()!=="PENDING"),$=g.commentsData?.comments?.[0]?.createdAt,B=g.commentsData?.comments?.[0]?.author?.login??"Unknown Author",V=`${j?"Unresolve":"Resolve"} comment`;if($){let e=(0,nM.C)(new Date($));V=`${j?"Unresolve":"Resolve"} ${B}'s comment, ${e}`}return(0,i.jsx)(n$.t,{fallback:(0,i.jsx)(nH,{}),children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:v,children:[(0,i.jsxs)("div",{className:(0,x.$)("px-1",nK),children:[(0,i.jsx)(m.K,{"aria-label":_?"Expand comment":"Collapse comment",icon:_?c.ChevronRightIcon:c.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{b.setItem(`reviewThreadIsCollapsed_${s}`,JSON.stringify(!_))}),N(e=>!e)},"data-is-first-collapse-button":u}),(0,i.jsx)(is,{thread:g}),(0,i.jsxs)("div",{className:nW,children:[g.positioning?.isOutdated&&(0,i.jsx)(nV.A,{variant:"secondary",children:"Outdated"}),F&&!A&&(0,i.jsx)(nV.A,{variant:"secondary",children:"Resolved"}),R?.isDismissed&&(0,i.jsx)(nV.A,{variant:"secondary",children:"Dismissed"})]})]}),(0,i.jsxs)(l.Suspense,{fallback:(0,i.jsxs)("div",{className:nz,children:[(0,i.jsx)(e2.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:[w&&(0,i.jsxs)(nU.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),w]}),!_&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n3,{lineMarkersKey:o,disableDialogMode:I,enableDialogMode:L,filePath:t,gridCellId:n,onDeleteLineComment:a,isInlineComment:!0,isInDialogMode:S,thread:g,threadPositionNumber:r,threadsConnectionId:d,suggestedChangesConfig:D,shouldLimitHeight:!1,...p,ghostUser:h}),M&&!O&&!P&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(eR.Q,{"aria-label":V,onClick:F?()=>{g&&(E({threadId:g.id},{onError:()=>C("Failed to unresolve thread"),onSuccess:()=>{N(!1),b.removeItem(`reviewThreadIsCollapsed_${g.id}`)}}),T("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{g&&(y({threadId:g.id},{onError:()=>C("Failed to resolve thread"),onSuccess:()=>{N(!0),b.removeItem(`reviewThreadIsCollapsed_${s}`)}}),T("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},className:"mr-2",children:j?"Unresolve comment":"Resolve comment"}),F&&g.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:g.resolvedBy})," marked this comment as resolved"]})]}),O&&(0,i.jsx)(ii,{automatedComment:R,thread:g,filePath:t,lineMarkersKey:o,setErrorMessage:C,setIsCollapsed:N,safeLocalStorage:b})]})]})]})})};function id(e){return e.state?.toUpperCase()!=="PENDING"}function ic(e){return!e}try{ia.displayName||(ia.displayName="Emphasis")}catch{}try{is.displayName||(is.displayName="ThreadBanner")}catch{}try{ir.displayName||(ir.displayName="SingleLineThreadBanner")}catch{}try{il.displayName||(il.displayName="MultineLineThreadBanner")}catch{}try{io.displayName||(io.displayName="InlineReviewThread")}catch{}let iu=(0,a.GV)()?function(e,t,n){let i,a=(0,s.c)(5),{enableDialogMode:r}=et();return a[0]!==t||a[1]!==n||a[2]!==r||a[3]!==e?(i=(i,a)=>{t.current?.classList.contains("diff-text-cell")&&(r(e),n("USER_EXPANDED_MARKERS"),(void 0===i?{shouldFocusFirstMarker:!0}:i).shouldFocusFirstMarker?setTimeout(()=>{t.current?.querySelector('[data-first-marker="true"]')?.focus()},0):a&&setTimeout(()=>{t.current?.querySelector(`[data-marker-id="${a}"]`)?.focus()},0))},a[0]=t,a[1]=n,a[2]=r,a[3]=e,a[4]=i):i=a[4],i}:function(e,t,n){let{enableDialogMode:i}=et();return(0,l.useCallback)((a={shouldFocusFirstMarker:!0},s)=>{t.current?.classList.contains("diff-text-cell")&&(i(e),n("USER_EXPANDED_MARKERS"),a.shouldFocusFirstMarker?setTimeout(()=>{t.current?.querySelector('[data-first-marker="true"]')?.focus()},0):s&&setTimeout(()=>{t.current?.querySelector(`[data-marker-id="${s}"]`)?.focus()},0))},[t,i,e,n])},im={[nS.UZ.Failure]:0,[nS.UZ.Warning]:1,[nS.UZ.Notice]:2},ih=(0,a.GV)()?function(e){let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,i.jsx)(ny.j,{children:(0,i.jsx)(ip,{...e})}),n[0]=e,n[1]=t):t=n[1],t}:function(e){return(0,i.jsx)(ny.j,{children:(0,i.jsx)(ip,{...e})})},ip=(0,a.GV)()?function(e){let t,n,a,r,o,d,u,h,f,p,y,v,b,j,w,C,_,N,S,I,L,D,T,A,R,O,P,F,M,$,B,V,U,q,H,G,K,W,z=(0,s.c)(113);if(z[0]!==e){let{annotations:i,cellRef:s,diffLine:l,dispatchMarkersStatus:c,children:m,conversationListThreads:g,inlineMarkersRef:x,isRowSelected:k,lineMarkersKey:L,fileAnchor:D,filePath:T,gridCellId:E,gutterSizeOffset:A,lineType:R,onCloseConversationList:O,onCloseFocusMode:P,onDeleteLineComment:F,threadsConnectionId:M,shouldStartNewConversationWithSuggestedChange:$,ghostUser:B,shouldListenForEscapeKey:V,...U}=e;t=i,n=s,o=l,d=c,a=m,r=g,v=x,b=k,j=L,u=D,h=T,p=E,y=A,w=P,C=F,I=M,S=$,f=B,N=V,_=U,z[0]=e,z[1]=t,z[2]=n,z[3]=a,z[4]=r,z[5]=o,z[6]=d,z[7]=u,z[8]=h,z[9]=f,z[10]=p,z[11]=y,z[12]=v,z[13]=b,z[14]=j,z[15]=w,z[16]=C,z[17]=_,z[18]=N,z[19]=S,z[20]=I}else t=z[1],n=z[2],a=z[3],r=z[4],o=z[5],d=z[6],u=z[7],h=z[8],f=z[9],p=z[10],y=z[11],v=z[12],b=z[13],j=z[14],w=z[15],C=z[16],_=z[17],N=z[18],S=z[19],I=z[20];let Q=ee(p),{disableDialogMode:Z,enableDialogMode:J}=et(),Y=iu(p,n,d),X=o?.type??"ADDITION";z[21]!==b||z[22]!==X?(L=(0,E.gK)(X,!1,b),z[21]=b,z[22]=X,z[23]=L):L=z[23];let en=L,ei=t0(o,S),ea=(0,l.useRef)(null);z[24]!==t?(D=[...t].sort(iv),z[24]=t,z[25]=D):D=z[25];let es=D;e:{let e;if(a){let e,t;z[26]===Symbol.for("react.memo_cache_sentinel")?(e={id:"new-comment"},z[26]=e):e=z[26],z[27]!==r||z[28]!==es?(t=[...r,e,...es],z[27]=r,z[28]=es,z[29]=t):t=z[29],T=t;break e}z[30]!==r||z[31]!==es?(e=[...r,...es],z[30]=r,z[31]=es,z[32]=e):e=z[32],T=e}let er=T,el=ix;z[33]!==Z||z[34]!==p||z[35]!==w||z[36]!==N?(A=e=>{let t=e.target,n=e.target,i=n.closest(`[data-grid-cell-id=${p}]`);if(N&&i?.contains(t)&&e?.key==="Escape"){w(),Z(),i?.focus();return}if(i?.contains(t)&&"true"===n.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),i?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(i?.contains(t)&&"true"===n.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),i?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}},z[33]=Z,z[34]=p,z[35]=w,z[36]=N,z[37]=A):A=z[37];let eo=A;z[38]!==J||z[39]!==p||z[40]!==Q?(R=e=>{el(e),Q||J(p)},z[38]=J,z[39]=p,z[40]=Q,z[41]=R):R=z[41];let ed=R;z[42]!==Z||z[43]!==Q?(O=e=>{e.target&&Q&&(e.target.closest("[data-inline-markers]")||Z())},z[42]=Z,z[43]=Q,z[44]=O):O=z[44];let ec=O;z[45]!==ec?(P=()=>(g.XC?.addEventListener("mousedown",ec),()=>g.XC?.removeEventListener("mousedown",ec)),F=[ec],z[45]=ec,z[46]=P,z[47]=F):(P=z[46],F=z[47]),(0,l.useEffect)(P,F);let eu=(0,k.mF)();z[48]!==t||z[49]!==r||z[50]!==Y||z[51]!==eu?(M=()=>{if(eu){let e=r.map(iy),n=t.map(ig);(e.includes(eu)||n.includes(eu))&&Y({shouldFocusFirstMarker:!1},eu)}},$=[eu,Y,r,t],z[48]=t,z[49]=r,z[50]=Y,z[51]=eu,z[52]=M,z[53]=$):(M=z[52],$=z[53]),(0,l.useEffect)(M,$);let em=!Q;z[54]!==er||z[55]!==em?(B={containerRef:ea,markers:er,disabled:em},z[54]=er,z[55]=em,z[56]=B):B=z[56],nv(B);let eh=Q?nF:"";z[57]!==eh?(V=(0,x.$)("d-flex pt-1",eh),z[57]=eh,z[58]=V):V=z[58],z[59]!==en||z[60]!==y||z[61]!==Q?(U=Q?{marginRight:`-${y}`,backgroundColor:en}:{marginRight:`-${y}`},z[59]=en,z[60]=y,z[61]=Q,z[62]=U):U=z[62];let ef=Q?"false":"true";if(z[63]!==r||z[64]!==u||z[65]!==h||z[66]!==f||z[67]!==p||z[68]!==Q||z[69]!==j||z[70]!==er||z[71]!==C||z[72]!==_||z[73]!==ei||z[74]!==I){let e;z[76]!==u||z[77]!==h||z[78]!==f||z[79]!==p||z[80]!==Q||z[81]!==j||z[82]!==er||z[83]!==C||z[84]!==_||z[85]!==ei||z[86]!==I?(e=(e,t)=>(0,i.jsx)("div",{className:(0,x.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===er.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:Q?0:-1,children:(0,i.jsx)(io,{threadPositionNumber:t+1,isFirstThread:0===t,filePath:h,lineMarkersKey:j,fileAnchor:u,gridCellId:p,onDeleteLineComment:C,threadId:e.id,threadsConnectionId:I,suggestedChangesConfig:ei,ghostUser:f,..._})},`review-thread-${e.id}`),z[76]=u,z[77]=h,z[78]=f,z[79]=p,z[80]=Q,z[81]=j,z[82]=er,z[83]=C,z[84]=_,z[85]=ei,z[86]=I,z[87]=e):e=z[87],q=r.map(e),z[63]=r,z[64]=u,z[65]=h,z[66]=f,z[67]=p,z[68]=Q,z[69]=j,z[70]=er,z[71]=C,z[72]=_,z[73]=ei,z[74]=I,z[75]=q}else q=z[75];if(z[88]!==p||z[89]!==er||z[90]!==es){let e;z[92]!==p||z[93]!==er?(e=(e,t)=>{let n=0===t&&e===er[0];return(0,i.jsx)(nA,{annotation:e,gridCellId:p,isFirstMarker:n},`annotation-${e.id}`)},z[92]=p,z[93]=er,z[94]=e):e=z[94],H=es.map(e),z[88]=p,z[89]=er,z[90]=es,z[91]=H}else H=z[91];return z[95]!==a||z[96]!==q||z[97]!==H?(G=(0,i.jsxs)("div",{className:nO,ref:ea,children:[q,a,H]}),z[95]=a,z[96]=q,z[97]=H,z[98]=G):G=z[98],z[99]!==r.length||z[100]!==Z||z[101]!==Q||z[102]!==w?(K=Q&&(0,i.jsx)(m.K,{icon:c.UndoIcon,className:(0,x.$)(nR,"ml-2 position-relative",0===r.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:()=>{w(),Z()},onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&(w(),Z())}}),z[99]=r.length,z[100]=Z,z[101]=Q,z[102]=w,z[103]=K):K=z[103],z[104]!==ed||z[105]!==eo||z[106]!==v||z[107]!==V||z[108]!==U||z[109]!==ef||z[110]!==G||z[111]!==K?(W=(0,i.jsxs)("div",{className:V,style:U,"aria-hidden":ef,onFocus:ed,onClick:el,onKeyDown:eo,onKeyUp:el,onMouseDown:el,onMouseUp:el,"data-inline-markers":!0,ref:v,children:[G,K]}),z[104]=ed,z[105]=eo,z[106]=v,z[107]=V,z[108]=U,z[109]=ef,z[110]=G,z[111]=K,z[112]=W):W=z[112],W}:function({annotations:e,cellRef:t,diffLine:n,dispatchMarkersStatus:a,children:s,conversationListThreads:r,inlineMarkersRef:o,isRowSelected:d,lineMarkersKey:u,fileAnchor:h,filePath:f,gridCellId:p,gutterSizeOffset:y,lineType:v,onCloseConversationList:b,onCloseFocusMode:j,onDeleteLineComment:w,threadsConnectionId:C,shouldStartNewConversationWithSuggestedChange:_,ghostUser:N,shouldListenForEscapeKey:S,...I}){let L=ee(p),{disableDialogMode:D,enableDialogMode:T}=et(),A=iu(p,t,a),R=(0,E.gK)(n?.type??"ADDITION",!1,d),O=t0(n,_),P=(0,l.useRef)(null),F=(0,l.useMemo)(()=>[...e].sort((e,t)=>im[e.annotationLevel]-im[t.annotationLevel]),[e]),M=(0,l.useMemo)(()=>s?[...r,{id:"new-comment"},...F]:[...r,...F],[s,r,F]),$=e=>e.stopPropagation(),B=(0,l.useCallback)(e=>{e.target&&L&&(e.target.closest("[data-inline-markers]")||D())},[D,L]);(0,l.useEffect)(()=>(g.XC?.addEventListener("mousedown",B),()=>g.XC?.removeEventListener("mousedown",B)),[B]);let V=(0,k.mF)();return(0,l.useEffect)(()=>{if(V){let t=r.map(e=>e.id),n=e.map(e=>e.id);(t.includes(V)||n.includes(V))&&A({shouldFocusFirstMarker:!1},V)}},[V,A,r,e]),nv({containerRef:P,markers:M,disabled:!L}),(0,i.jsxs)("div",{className:(0,x.$)("d-flex pt-1",L?nF:""),style:L?{marginRight:`-${y}`,backgroundColor:R}:{marginRight:`-${y}`},"aria-hidden":L?"false":"true",onFocus:e=>{$(e),L||T(p)},onClick:$,onKeyDown:e=>{let t=e.target,n=e.target,i=n.closest(`[data-grid-cell-id=${p}]`);if(S&&i?.contains(t)&&e?.key==="Escape"){j(),D(),i?.focus();return}if(i?.contains(t)&&"true"===n.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),i?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(i?.contains(t)&&"true"===n.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),i?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}},onKeyUp:$,onMouseDown:$,onMouseUp:$,"data-inline-markers":!0,ref:o,children:[(0,i.jsxs)("div",{className:nO,ref:P,children:[r.map((e,t)=>(0,i.jsx)("div",{className:(0,x.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===M.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:L?0:-1,children:(0,i.jsx)(io,{threadPositionNumber:t+1,isFirstThread:0===t,filePath:f,lineMarkersKey:u,fileAnchor:h,gridCellId:p,onDeleteLineComment:w,threadId:e.id,threadsConnectionId:C,suggestedChangesConfig:O,ghostUser:N,...I})},`review-thread-${e.id}`)),s,F.map((e,t)=>{let n=0===t&&e===M[0];return(0,i.jsx)(nA,{annotation:e,gridCellId:p,isFirstMarker:n},`annotation-${e.id}`)})]}),L&&(0,i.jsx)(m.K,{icon:c.UndoIcon,className:(0,x.$)(nR,"ml-2 position-relative",0===r.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:()=>{j(),D()},onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&(j(),D())}})]})};function ig(e){return e.id}function iy(e){return e.id}function ix(e){return e.stopPropagation()}function iv(e,t){return im[e.annotationLevel]-im[t.annotationLevel]}try{ih.displayName||(ih.displayName="InlineMarkers")}catch{}try{ip.displayName||(ip.displayName="InlineMarkersInternal")}catch{}var ib=n(18799),ij=n(40260);async function iw({diffLine:e,diffLines:t,getSelectedDiffLines:n,getSelectedLineRange:i,isSplit:a,isLeftSide:s}){let r,l=window.getSelection();if(l&&""!==l.toString())return void document.execCommand("copy");let o=n().length<=1;switch(!0){case o:r=i_(e);break;case a:r=iN({diffLines:t,diffOrientation:s?"left":"right",getSelectedLineRange:i});break;default:r=iC({diffLines:t,getSelectedLineRange:i})}await (0,ij.D)(r)}let iC=({diffLines:e,getSelectedLineRange:t})=>{let n=t();if(!n)return"";let{startOrientation:i,endOrientation:a,startLineNumber:s,endLineNumber:r}=n,l=0,o=0;return e.length>1&&(l=e.findIndex(e=>"left"===i?e.left===s:e.right===s),o=e.findIndex(e=>"left"===a?e.left===r:e.right===r)),(0,A.Ls)(e.slice(l,o+1))},i_=e=>(0,A.Po)(e)||!e?"":(0,A.Ls)([e]),iN=({diffLines:e,diffOrientation:t,getSelectedLineRange:n})=>{if(void 0===t)return"";let i=n();if(!i)return"";let a=(0,A.Mk)(e),{selectedRightLines:s,selectedLeftLines:r}=R({selectedLineRange:i,leftLines:a.leftLines,rightLines:a.rightLines});return"left"===t?(0,A.Ls)(r):(0,A.Ls)(s)},iS=(0,l.createContext)(null),iI=(0,a.GV)()?function(e){let t,n,a,r,o,d,c=(0,s.c)(14),{children:u}=e,[m,h]=(0,l.useState)(!1),[f,p]=(0,l.useState)(),[g,y]=(0,l.useState)(),[x,v]=(0,l.useState)(),[b,j]=(0,l.useState)(),w=!!f||!!g||!!x||!!b;c[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{h(!0)},c[0]=t):t=c[0];let C=t;c[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{h(!1)},c[1]=n):n=c[1];let _=n;c[2]===Symbol.for("react.memo_cache_sentinel")?(a=(e,t,n)=>{switch(e){case"context-menu":p(t),j(void 0),v(void 0),y(void 0);break;case"new-conversation":j({cellId:t,withSuggestedChange:n?.withSuggestedChange}),p(void 0),v(void 0),y(void 0);break;case"marker-details":v(t),p(void 0),y(void 0),j(void 0);break;case"marker-list":y(t),p(void 0),j(void 0),v(void 0)}},c[2]=a):a=c[2];let N=a;c[3]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{switch(e){case"context-menu":p(void 0);break;case"new-conversation":j(void 0);break;case"marker-details":v(void 0);break;case"marker-list":y(void 0)}},c[3]=r):r=c[3];let S=r;c[4]!==w||c[5]!==m||c[6]!==f||c[7]!==x||c[8]!==g||c[9]!==b?(o={isActionBarVisible:m,showActionBar:C,hideActionBar:_,closeDialog:S,openDialog:N,anyMenuOpen:w,openContextMenuCell:f,openMarkersListCell:g,openMarkerDetailsCell:x,openNewConversationCell:b},c[4]=w,c[5]=m,c[6]=f,c[7]=x,c[8]=g,c[9]=b,c[10]=o):o=c[10];let I=o;return c[11]!==u||c[12]!==I?(d=(0,i.jsx)(iS,{value:I,children:u}),c[11]=u,c[12]=I,c[13]=d):d=c[13],d}:function({children:e}){let[t,n]=(0,l.useState)(!1),[a,s]=(0,l.useState)(),[r,o]=(0,l.useState)(),[d,c]=(0,l.useState)(),[u,m]=(0,l.useState)(),h=(0,l.useMemo)(()=>!!a||!!r||!!d||!!u,[a,d,r,u]),f=(0,l.useCallback)(()=>{n(!0)},[]),p=(0,l.useCallback)(()=>{n(!1)},[]),g=(0,l.useCallback)((e,t,n)=>{switch(e){case"context-menu":s(t),m(void 0),c(void 0),o(void 0);break;case"new-conversation":m({cellId:t,withSuggestedChange:n?.withSuggestedChange}),s(void 0),c(void 0),o(void 0);break;case"marker-details":c(t),s(void 0),o(void 0),m(void 0);break;case"marker-list":o(t),s(void 0),m(void 0),c(void 0)}},[]),y=(0,l.useCallback)(e=>{switch(e){case"context-menu":s(void 0);break;case"new-conversation":m(void 0);break;case"marker-details":c(void 0);break;case"marker-list":o(void 0)}},[]),x=(0,l.useMemo)(()=>({isActionBarVisible:t,showActionBar:f,hideActionBar:p,closeDialog:y,openDialog:g,anyMenuOpen:h,openContextMenuCell:a,openMarkersListCell:r,openMarkerDetailsCell:d,openNewConversationCell:u}),[t,f,p,y,g,h,a,r,d,u]);return(0,i.jsx)(iS,{value:x,children:e})},ik=(0,a.GV)()?function(){let e=(0,l.useContext)(iS);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}:function(){let e=(0,l.useContext)(iS);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e};try{iS.displayName||(iS.displayName="MarkersDialogContext")}catch{}try{iI.displayName||(iI.displayName="MarkersDialogContextProvider")}catch{}let iL=(0,a.GV)()?function(e){let t,n,i,a,r,o,d,c=(0,s.c)(27),{cellId:u,actionBarRef:m}=e,[h,f]=(0,l.useState)(m),{openDialog:p,closeDialog:g,openContextMenuCell:y,anyMenuOpen:x}=ik(),v=y===u;c[0]!==u||c[1]!==p?(t=()=>{p("context-menu",u)},c[0]=u,c[1]=p,c[2]=t):t=c[2];let b=t;c[3]!==m||c[4]!==b?(n=()=>{f(m),b()},c[3]=m,c[4]=b,c[5]=n):n=c[5];let j=n;c[6]!==g?(i=()=>{g("context-menu")},c[6]=g,c[7]=i):i=c[7];let w=i;c[8]!==w||c[9]!==v||c[10]!==b?(a=()=>{v?w():b()},c[8]=w,c[9]=v,c[10]=b,c[11]=a):a=c[11];let C=a;c[12]!==m||c[13]!==C?(r=()=>{f(m),C()},c[12]=m,c[13]=C,c[14]=r):r=c[14];let _=r;c[15]!==g?(o=()=>{g("marker-list")},c[15]=g,c[16]=o):o=c[16];let N=o;return c[17]!==x||c[18]!==w||c[19]!==N||c[20]!==v||c[21]!==b||c[22]!==j||c[23]!==h||c[24]!==C||c[25]!==_?(d={isContextMenuOpen:v,openContextMenu:b,openContextMenuFromActionBar:j,closeContextMenu:w,toggleContextMenu:C,toggleContextMenuFromActionBar:_,closeMarkerListDialog:N,returnFocusRef:h,anyMenuOpen:x},c[17]=x,c[18]=w,c[19]=N,c[20]=v,c[21]=b,c[22]=j,c[23]=h,c[24]=C,c[25]=_,c[26]=d):d=c[26],d}:function({cellId:e,actionBarRef:t}){let[n,i]=(0,l.useState)(t),{openDialog:a,closeDialog:s,openContextMenuCell:r,anyMenuOpen:o}=ik(),d=(0,l.useMemo)(()=>r===e,[e,r]),c=(0,l.useCallback)(()=>{a("context-menu",e)},[e,a]),u=(0,l.useCallback)(()=>{i(t),c()},[t,c]),m=(0,l.useCallback)(()=>{s("context-menu")},[s]),h=(0,l.useCallback)(()=>{d?m():c()},[m,d,c]),f=(0,l.useCallback)(()=>{i(t),h()},[t,h]);return{isContextMenuOpen:d,openContextMenu:c,openContextMenuFromActionBar:u,closeContextMenu:m,toggleContextMenu:h,toggleContextMenuFromActionBar:f,closeMarkerListDialog:(0,l.useCallback)(()=>{s("marker-list")},[s]),returnFocusRef:n,anyMenuOpen:o}},iD=(0,a.GV)()?function(e){let t,n,i,a,r,l=(0,s.c)(17),{cellId:o,onOpenDialog:d}=e,{openDialog:c,closeDialog:u,openNewConversationCell:m}=ik(),{sendAnalyticsEvent:h}=(0,tJ.s)(),f=m?.cellId===o;l[0]!==o||l[1]!==d||l[2]!==c?(t=e=>{d?.(),c("new-conversation",o,e)},l[0]=o,l[1]=d,l[2]=c,l[3]=t):t=l[3];let p=t;l[4]!==p?(n=()=>{p()},l[4]=p,l[5]=n):n=l[5];let g=n;l[6]!==p||l[7]!==h?(i=()=>{p({withSuggestedChange:!0}),h("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},l[6]=p,l[7]=h,l[8]=i):i=l[8];let y=i;l[9]!==u?(a=()=>{u("new-conversation")},l[9]=u,l[10]=a):a=l[10];let x=a,v=m?.withSuggestedChange;return l[11]!==x||l[12]!==f||l[13]!==v||l[14]!==g||l[15]!==y?(r={isNewConversationDialogOpen:f,startNewConversation:g,startNewConversationWithSuggestedChange:y,closeNewConversation:x,shouldStartNewConversationWithSuggestedChange:v},l[11]=x,l[12]=f,l[13]=v,l[14]=g,l[15]=y,l[16]=r):r=l[16],r}:function({cellId:e,onOpenDialog:t}){let{openDialog:n,closeDialog:i,openNewConversationCell:a}=ik(),{sendAnalyticsEvent:s}=(0,tJ.s)(),r=(0,l.useMemo)(()=>a?.cellId===e,[e,a]),o=(0,l.useCallback)(i=>{t?.(),n("new-conversation",e,i)},[e,t,n]),d=(0,l.useCallback)(()=>{o()},[o]),c=(0,l.useCallback)(()=>{o({withSuggestedChange:!0}),s("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[o,s]);return{isNewConversationDialogOpen:r,startNewConversation:d,startNewConversationWithSuggestedChange:c,closeNewConversation:(0,l.useCallback)(()=>{i("new-conversation")},[i]),shouldStartNewConversationWithSuggestedChange:(0,l.useMemo)(()=>a?.withSuggestedChange,[a])}},iT=(0,a.GV)()?function(e){let t,n,i,a,r,o,d,c,u=(0,s.c)(29),{cellRef:m}=e,{showActionBar:h,hideActionBar:f,anyMenuOpen:p}=ik(),[g,y]=(0,l.useState)(!1);u[0]!==h?(t=()=>{h()},u[0]=h,u[1]=t):t=u[1];let x=t;u[2]!==p||u[3]!==m||u[4]!==f?(n=e=>{p||m.current&&m.current.contains(e.relatedTarget)||f()},u[2]=p,u[3]=m,u[4]=f,u[5]=n):n=u[5];let v=n;u[6]!==h?(i=()=>{h()},u[6]=h,u[7]=i):i=u[7];let b=i;u[8]!==p||u[9]!==m||u[10]!==f?(a=()=>{p||m.current===document.activeElement||m.current?.contains(document.activeElement)&&document.activeElement?.getAttribute("data-add-comment-button")!=="true"||f()},u[8]=p,u[9]=m,u[10]=f,u[11]=a):a=u[11];let j=a;u[12]!==p||u[13]!==m||u[14]!==f?(r=e=>{m.current&&(p||(m.current.contains(e.relatedTarget)?m.current===e.relatedTarget&&y(!1):(f(),y(!1))))},u[12]=p,u[13]=m,u[14]=f,u[15]=r):r=u[15];let w=r;u[16]!==p?(o=e=>{p||(e.stopPropagation(),y(!0))},u[16]=p,u[17]=o):o=u[17];let C=o;u[18]!==p?(d=e=>{!p&&tW(e.key)&&e.stopPropagation()},u[18]=p,u[19]=d):d=u[19];let _=d;return u[20]!==w||u[21]!==C||u[22]!==_||u[23]!==v||u[24]!==x||u[25]!==b||u[26]!==j||u[27]!==g?(c={isActionBarFocused:g,handleCellBlur:v,handleCellFocus:x,handleCellMouseEnter:b,handleCellMouseLeave:j,handleActionBarBlur:w,handleActionBarFocusCapture:C,handleActionBarKeydownCapture:_},u[20]=w,u[21]=C,u[22]=_,u[23]=v,u[24]=x,u[25]=b,u[26]=j,u[27]=g,u[28]=c):c=u[28],c}:function({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:i}=ik(),[a,s]=(0,l.useState)(!1),r=(0,l.useCallback)(()=>{t()},[t]),o=(0,l.useCallback)(t=>{i||e.current&&e.current.contains(t.relatedTarget)||n()},[i,e,n]),d=(0,l.useCallback)(()=>{t()},[t]),c=(0,l.useCallback)(()=>{i||e.current===document.activeElement||e.current?.contains(document.activeElement)&&document.activeElement?.getAttribute("data-add-comment-button")!=="true"||n()},[i,e,n]),u=(0,l.useCallback)(t=>{e.current&&(i||(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&s(!1):(n(),s(!1))))},[i,e,n]);return{isActionBarFocused:a,handleCellBlur:o,handleCellFocus:r,handleCellMouseEnter:d,handleCellMouseLeave:c,handleActionBarBlur:u,handleActionBarFocusCapture:(0,l.useCallback)(e=>{i||(e.stopPropagation(),s(!0))},[i]),handleActionBarKeydownCapture:(0,l.useCallback)(e=>{!i&&tW(e.key)&&e.stopPropagation()},[i])}};var iE=n(21513),iA=n(73783),iR=n(24494),iO=n(79036);let iP={compact:{avatarSize:18},relaxed:{avatarSize:20}};function iF({shouldAnimateRef:e,lineSpacingPreference:t="relaxed",threads:n,annotations:a}){(0,l.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let{avatarSize:s}=iP[t],r=n.length+a.length;if(0===r)return null;let o={},c=[];a.map(e=>{e?.annotationLevel&&c.push({id:e.id,level:e.annotationLevel})}),n.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?o[e?.author.login]=e.author:tG?.login&&(o[tG.login]=tG)}));let u=[...c.sort((e,t)=>(iO.GF[e.level]?.priority||0)<(iO.GF[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,i.jsx)(iO.S,{annotationLevel:t.level},t.id):(0,i.jsx)(iO.Xh,{annotationLevel:t.level},t.id)),...Object.keys(o).map(e=>{let t=o[e]?.login,n=o[e]?.avatarUrl??(tG?.avatarUrl||" ");return(0,i.jsx)(d.r,{alt:t,size:20,src:n},t)})].slice(0,3),m=r>9?"9+":`${r}`;return(0,i.jsxs)("div",{className:(0,x.$)("d-flex","flex-justify-between","flex-items-center","CommentIndicator-module__commentIndicatorContainer--GS12p"),children:[(0,i.jsx)(iR.A,{disableExpand:!0,size:s,className:(0,x.$)("CommentIndicator-module__AvatarStack--LfU8D","relaxed"===t?"CommentIndicator-module__Relaxed--oSXaK":"CommentIndicator-module__Compact--Q1u86"),children:u}),(0,i.jsx)("span",{className:(0,x.$)("fgColor-default","ml-1","CommentIndicator-module__textStyles--ZLD5t"),children:m})]})}try{iF.displayName||(iF.displayName="CommentIndicator")}catch{}var iM=n(89141);let i$=(0,a.GV)()?function(e){let t,n,i,a,r=(0,s.c)(18),{currentHunk:l,nextHunk:o,previousHunk:d}=e,{addInjectedContextLines:c}=el(),u=!!l&&0!==l.startBlobLineNumber,m=!!l&&!!o;r[0]!==c||r[1]!==u||r[2]!==l||r[3]!==d?(t=()=>{if(!u||!l)return;let e=d&&l&&d.endBlobLineNumber+20>l.startBlobLineNumber,t={start:Math.max(0,l.startBlobLineNumber-20),end:l.startBlobLineNumber};e&&(t.start=d.endBlobLineNumber+1),c(t)},r[0]=c,r[1]=u,r[2]=l,r[3]=d,r[4]=t):t=r[4];let h=t;r[5]!==c||r[6]!==m||r[7]!==l?(n=()=>{m&&l&&c({start:l.endBlobLineNumber+1,end:l.endBlobLineNumber+1+20})},r[5]=c,r[6]=m,r[7]=l,r[8]=n):n=r[8];let f=n;r[9]!==c||r[10]!==d?(i=()=>{d&&c({start:d.endBlobLineNumber+1,end:d.endBlobLineNumber+1+20})},r[9]=c,r[10]=d,r[11]=i):i=r[11];let p=i;return r[12]!==m||r[13]!==u||r[14]!==f||r[15]!==p||r[16]!==h?(a={expandStartOfHunk:h,expandEndOfHunk:f,expandEndOfPreviousHunk:p,canExpandEndOfHunk:m,canExpandStartOfHunk:u},r[12]=m,r[13]=u,r[14]=f,r[15]=p,r[16]=h,r[17]=a):a=r[17],a}:function({currentHunk:e,nextHunk:t,previousHunk:n}){let{addInjectedContextLines:i}=el(),a=!!e&&0!==e.startBlobLineNumber,s=!!e&&!!t;return{expandStartOfHunk:()=>{if(!a||!e)return;let t=n&&e&&n.endBlobLineNumber+20>e.startBlobLineNumber,s={start:Math.max(0,e.startBlobLineNumber-20),end:e.startBlobLineNumber};t&&(s.start=n.endBlobLineNumber+1),i(s)},expandEndOfHunk:()=>{s&&e&&i({start:e.endBlobLineNumber+1,end:e.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&i({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:s,canExpandStartOfHunk:a}};var iB=n(29255);let iV={left:"L",right:"R"},iU="Add comment",iq="Suggest change";function iH(e,t,n){let i=n&&!(0,A.Ji)(t)?iV.left:iV.right;return`${e} on line ${i}${t.blobLineNumber}`}function iG(e,t,n,i,a){return e.right===t.right?n||i&&a?` on line R${e.right}`:`, modified line R${t.right}`:n||i&&a?` on lines R${e.right}-R${t.right}`:`, modified lines R${e.right}-R${t.right}`}function iK(e,t,n){return e.left===t.left?n?` on line L${e.left}`:`, original line L${e.left}`:n?` on lines L${e.left}-L${t.right}`:`, original lines L${e.left}-L${t.left}`}let iW=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,u,m,h,f,p,g,y,x,v,b,j,w,C,_,N=(0,s.c)(72),{diffLine:S,handleStartConversationWithSuggestedChange:I,handleStartConversation:k,isLeftSide:L,isSplit:D}=e,{selectMultipleLines:T}=er(),E=z(),R=J();N[0]!==R?(t=R(),N[0]=R,N[1]=t):t=N[1];let O=t;N[2]!==E?(n=(0,A.Mk)(E()),N[2]=E,N[3]=n):n=N[3];let P=n;N[4]!==P.leftLines?(a=P.leftLines.find(i3),N[4]=P.leftLines,N[5]=a):a=N[5];let F=a;N[6]!==P.leftLines?(r=P.leftLines.filter(i2),N[6]=P.leftLines,N[7]=r):r=N[7];let M=r,$=M[M.length-1];N[8]!==P.leftLines?(l=P.leftLines.filter(i1).every(i0),N[8]=P.leftLines,N[9]=l):l=N[9];let B=l;N[10]!==P.rightLines?(o=P.rightLines.find(iX),N[10]=P.rightLines,N[11]=o):o=N[11];let V=o;N[12]!==P.rightLines?(d=P.rightLines.filter(iY),N[12]=P.rightLines,N[13]=d):d=N[13];let U=d,q=U[U.length-1];N[14]!==P.rightLines?(u=P.rightLines.filter(iJ),N[14]=P.rightLines,N[15]=u):u=N[15];let H=0===u.length;N[16]!==P.leftLines?(m=P.leftLines.filter(iZ),N[16]=P.leftLines,N[17]=m):m=N[17];let G=0===m.length;e:{if(P.leftLines.find(iQ)||P.rightLines.find(iz)){h=!1;break e}h=!0}let K=h;N[18]!==F||N[19]!==k||N[20]!==I||N[21]!==$||N[22]!==T||N[23]!==O?(f=(e,t)=>{!(!O||!$||!F||(0,A.Po)($)||(0,A.Po)(F))&&F.left&&$.left&&F.key&&(T({endLineKey:$.key,endOrientation:"left",startLineKey:F.key,startOrientation:"left",firstLineSelectionOnDrag:{lineKey:F.key,lineNumber:F.left,orientation:"left",shouldStartConversation:!1}},ek),t?.withSuggestedChange?I():k())},N[18]=F,N[19]=k,N[20]=I,N[21]=$,N[22]=T,N[23]=O,N[24]=f):f=N[24];let W=f;N[25]!==V||N[26]!==k||N[27]!==I||N[28]!==q||N[29]!==T||N[30]!==O?(p=(e,t)=>{!(!O||!q||!V||(0,A.Po)(q)||(0,A.Po)(V))&&V.right&&q.right&&V.key&&(T({endLineKey:q.key,endOrientation:"right",startLineKey:V.key,startOrientation:"right",firstLineSelectionOnDrag:{lineKey:V.key,lineNumber:V.right,orientation:"right",shouldStartConversation:!1}},ek),t?.withSuggestedChange?I():k())},N[25]=V,N[26]=k,N[27]=I,N[28]=q,N[29]=T,N[30]=O,N[31]=p):p=N[31];let Q=p,Z="DELETION"!==S.type;t:{if(!O){g=!1;break t}if(O.startOrientation!==O.endOrientation||O.startLineNumber!==O.endLineNumber){g=!0;break t}g=!1}let Y=g,X=!1,ee=!1;if(O&&Y){let e,t=iV[O.startOrientation],n=iV[O.endOrientation];if(v=` on lines ${t}${O.startLineNumber}-${n}${O.endLineNumber}`,!(0,A.Po)(F)&&!(0,A.Po)($)&&F&&$){let e;X=!0,N[32]!==F||N[33]!==$||N[34]!==H?(e=iK(F,$,H),N[32]=F,N[33]=$,N[34]=H,N[35]=e):e=N[35],y=e}if(!(0,A.Po)(V)&&!(0,A.Po)(q)&&V&&q){let e;ee=!0,N[36]!==K||N[37]!==V||N[38]!==D||N[39]!==q||N[40]!==G?(e=iG(V,q,G,D,K),N[36]=K,N[37]=V,N[38]=D,N[39]=q,N[40]=G,N[41]=e):e=N[41],x=e}return N[42]!==K||N[43]!==B||N[44]!==Z||N[45]!==k||N[46]!==I||N[47]!==Q||N[48]!==W||N[49]!==D||N[50]!==H||N[51]!==x||N[52]!==y||N[53]!==ee||N[54]!==X||N[55]!==v?(e=(0,i.jsx)(i.Fragment,{children:D?(0,i.jsx)(i.Fragment,{children:K?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eV.l.Item,{onSelect:Q,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),iU+x,(0,i.jsx)(eV.l.TrailingVisual,{children:(0,i.jsx)(iB.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eV.l.Item,{onSelect:e=>Q(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iq+x]})]}):(0,i.jsxs)(i.Fragment,{children:[X?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eV.l.Item,{onSelect:W,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),iU+y,(0,i.jsx)(eV.l.TrailingVisual,{children:(0,i.jsx)(iB.U,{keys:H?"Alt+n":"Alt+Shift+N"})})]}),B&&(0,i.jsxs)(eV.l.Item,{onSelect:e=>W(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iq+y]})]}):null,ee?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eV.l.Item,{onSelect:Q,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),iU+x,(0,i.jsx)(eV.l.TrailingVisual,{children:(0,i.jsx)(iB.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eV.l.Item,{onSelect:e=>Q(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iq+x]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eV.l.Item,{onSelect:k,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),iU+v]}),Z&&B&&(0,i.jsxs)(eV.l.Item,{onSelect:I,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iq+v]})]})}),N[42]=K,N[43]=B,N[44]=Z,N[45]=k,N[46]=I,N[47]=Q,N[48]=W,N[49]=D,N[50]=H,N[51]=x,N[52]=y,N[53]=ee,N[54]=X,N[55]=v,N[56]=e):e=N[56],e}return N[57]===Symbol.for("react.memo_cache_sentinel")?(b=(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),N[57]=b):b=N[57],N[58]!==L||N[59]!==S?(j=iH(iU,S,L),N[58]=L,N[59]=S,N[60]=j):j=N[60],N[61]!==k||N[62]!==j?(w=(0,i.jsxs)(eV.l.Item,{onSelect:k,children:[b,j]}),N[61]=k,N[62]=j,N[63]=w):w=N[63],N[64]!==Z||N[65]!==I||N[66]!==L||N[67]!==S?(C=Z&&(0,i.jsxs)(eV.l.Item,{onSelect:I,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iH(iq,S,L)]}),N[64]=Z,N[65]=I,N[66]=L,N[67]=S,N[68]=C):C=N[68],N[69]!==w||N[70]!==C?(_=(0,i.jsxs)(i.Fragment,{children:[w,C]}),N[69]=w,N[70]=C,N[71]=_):_=N[71],_}:function({diffLine:e,handleStartConversationWithSuggestedChange:t,handleStartConversation:n,isLeftSide:a,isSplit:s}){let r,o,d,{selectMultipleLines:u}=er(),m=z(),h=J()(),f=(0,l.useMemo)(()=>(0,A.Mk)(m()),[m]),p=(0,l.useMemo)(()=>f.leftLines.find(e=>!(0,A.Po)(e)),[f.leftLines]),g=(0,l.useMemo)(()=>{let e=f.leftLines.filter(e=>!(0,A.Po)(e));return e[e.length-1]},[f.leftLines]),y=(0,l.useMemo)(()=>f.leftLines.filter(e=>!(0,A.Po)(e)).every(e=>"DELETION"!==e.type),[f.leftLines]),x=(0,l.useMemo)(()=>f.rightLines.find(e=>!(0,A.Po)(e)),[f.rightLines]),v=(0,l.useMemo)(()=>{let e=f.rightLines.filter(e=>!(0,A.Po)(e));return e[e.length-1]},[f.rightLines]),b=(0,l.useMemo)(()=>0===f.rightLines.filter(e=>!(0,A.Po)(e)).length,[f.rightLines]),j=(0,l.useMemo)(()=>0===f.leftLines.filter(e=>!(0,A.Po)(e)).length,[f.leftLines]),w=(0,l.useMemo)(()=>!(f.leftLines.find(e=>!(0,A.Po)(e)&&!(0,A.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)||f.rightLines.find(e=>!(0,A.Po)(e)&&!(0,A.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)),[f.leftLines,f.rightLines]),C=(0,l.useCallback)((e,i)=>{!(!h||!g||!p||(0,A.Po)(g)||(0,A.Po)(p))&&p.left&&g.left&&p.key&&(u({endLineKey:g.key,endOrientation:"left",startLineKey:p.key,startOrientation:"left",firstLineSelectionOnDrag:{lineKey:p.key,lineNumber:p.left,orientation:"left",shouldStartConversation:!1}},ek),i?.withSuggestedChange?t():n())},[h,g,p,u,t,n]),_=(0,l.useCallback)((e,i)=>{!(!h||!v||!x||(0,A.Po)(v)||(0,A.Po)(x))&&x.right&&v.right&&x.key&&(u({endLineKey:v.key,endOrientation:"right",startLineKey:x.key,startOrientation:"right",firstLineSelectionOnDrag:{lineKey:x.key,lineNumber:x.right,orientation:"right",shouldStartConversation:!1}},ek),i?.withSuggestedChange?t():n())},[h,v,x,u,t,n]),N="DELETION"!==e.type,S=(0,l.useMemo)(()=>!!h&&(h.startOrientation!==h.endOrientation||h.startLineNumber!==h.endLineNumber),[h]),I=!1,k=!1;if(h&&S){let e=iV[h.startOrientation],a=iV[h.endOrientation];return d=` on lines ${e}${h.startLineNumber}-${a}${h.endLineNumber}`,!(0,A.Po)(p)&&!(0,A.Po)(g)&&p&&g&&(I=!0,r=iK(p,g,b)),!(0,A.Po)(x)&&!(0,A.Po)(v)&&x&&v&&(k=!0,o=iG(x,v,j,s,w)),(0,i.jsx)(i.Fragment,{children:s?(0,i.jsx)(i.Fragment,{children:w?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eV.l.Item,{onSelect:_,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),iU+o,(0,i.jsx)(eV.l.TrailingVisual,{children:(0,i.jsx)(iB.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eV.l.Item,{onSelect:e=>_(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iq+o]})]}):(0,i.jsxs)(i.Fragment,{children:[I?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eV.l.Item,{onSelect:C,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),iU+r,(0,i.jsx)(eV.l.TrailingVisual,{children:(0,i.jsx)(iB.U,{keys:b?"Alt+n":"Alt+Shift+N"})})]}),y&&(0,i.jsxs)(eV.l.Item,{onSelect:e=>C(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iq+r]})]}):null,k?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eV.l.Item,{onSelect:_,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),iU+o,(0,i.jsx)(eV.l.TrailingVisual,{children:(0,i.jsx)(iB.U,{keys:"Alt+n"})})]}),(0,i.jsxs)(eV.l.Item,{onSelect:e=>_(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iq+o]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eV.l.Item,{onSelect:n,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),iU+d]}),N&&y&&(0,i.jsxs)(eV.l.Item,{onSelect:t,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iq+d]})]})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eV.l.Item,{onSelect:n,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusIcon,{})}),iH(iU,e,a)]}),N&&(0,i.jsxs)(eV.l.Item,{onSelect:t,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.PlusCircleIcon,{})}),iH(iq,e,a)]})]})};function iz(e){return!(0,A.Po)(e)&&!(0,A.Ji)(e)&&"INJECTED_CONTEXT"!==e.type}function iQ(e){return!(0,A.Po)(e)&&!(0,A.Ji)(e)&&"INJECTED_CONTEXT"!==e.type}function iZ(e){return!(0,A.Po)(e)}function iJ(e){return!(0,A.Po)(e)}function iY(e){return!(0,A.Po)(e)}function iX(e){return!(0,A.Po)(e)}function i0(e){return"DELETION"!==e.type}function i1(e){return!(0,A.Po)(e)}function i2(e){return!(0,A.Po)(e)}function i3(e){return!(0,A.Po)(e)}try{iW.displayName||(iW.displayName="StartConversationContextMenuItems")}catch{}var i4=n(66358);let i5=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,c=(0,s.c)(28);return c[0]!==e?(t=(0,i.jsx)(ae,{...e}),c[0]=e,c[1]=t):t=c[1],c[2]!==e.copilotChatReference||c[3]!==e.diffAnchor||c[4]!==e.diffLine||c[5]!==e.isLeftSide||c[6]!==e.viewerData.shouldDisplayComments?(n=e.viewerData.shouldDisplayComments&&(0,i.jsx)(i8,{diffAnchor:e.diffAnchor,diffLine:e.diffLine,fileDiffReference:e.copilotChatReference,isLeftSide:e.isLeftSide}),c[2]=e.copilotChatReference,c[3]=e.diffAnchor,c[4]=e.diffLine,c[5]=e.isLeftSide,c[6]=e.viewerData.shouldDisplayComments,c[7]=n):n=c[7],c[8]!==e.handleCopyCode?(a=(0,i.jsx)(as,{handleCopyCode:e.handleCopyCode}),c[8]=e.handleCopyCode,c[9]=a):a=c[9],c[10]!==e.diffAnchor?(r=(0,i.jsx)(i9,{diffAnchor:e.diffAnchor}),c[10]=e.diffAnchor,c[11]=r):r=c[11],c[12]!==e.diffAnchor||c[13]!==e.diffLine||c[14]!==e.viewerData.shouldDisplayComments?(l=e.viewerData.shouldDisplayComments&&(0,i.jsx)(i6,{diffAnchor:e.diffAnchor,diffLine:e.diffLine}),c[12]=e.diffAnchor,c[13]=e.diffLine,c[14]=e.viewerData.shouldDisplayComments,c[15]=l):l=c[15],c[16]!==e.currentHunk||c[17]!==e.diffAnchor||c[18]!==e.nextHunk||c[19]!==e.previousHunk?(o=(0,i.jsx)(al,{currentHunk:e.currentHunk,diffAnchor:e.diffAnchor,nextHunk:e.nextHunk,previousHunk:e.previousHunk}),c[16]=e.currentHunk,c[17]=e.diffAnchor,c[18]=e.nextHunk,c[19]=e.previousHunk,c[20]=o):o=c[20],c[21]!==t||c[22]!==n||c[23]!==a||c[24]!==r||c[25]!==l||c[26]!==o?(d=(0,i.jsxs)(i.Fragment,{children:[t,n,a,r,l,o]}),c[21]=t,c[22]=n,c[23]=a,c[24]=r,c[25]=l,c[26]=o,c[27]=d):d=c[27],d}:function(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ae,{...e}),e.viewerData.shouldDisplayComments&&(0,i.jsx)(i8,{diffAnchor:e.diffAnchor,diffLine:e.diffLine,fileDiffReference:e.copilotChatReference,isLeftSide:e.isLeftSide}),(0,i.jsx)(as,{handleCopyCode:e.handleCopyCode}),(0,i.jsx)(i9,{diffAnchor:e.diffAnchor}),e.viewerData.shouldDisplayComments&&(0,i.jsx)(i6,{diffAnchor:e.diffAnchor,diffLine:e.diffLine}),(0,i.jsx)(al,{currentHunk:e.currentHunk,diffAnchor:e.diffAnchor,nextHunk:e.nextHunk,previousHunk:e.previousHunk})]})},i6=(0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(8),{diffLine:o,diffAnchor:d}=e,u=J();l[0]!==d||l[1]!==u||l[2]!==o?(t=()=>{let e=u(),t=(0,A.j2)({line:o,range:e,fileAnchor:d});t&&(0,ij.D)(t)},l[0]=d,l[1]=u,l[2]=o,l[3]=t):t=l[3];let m=t;return l[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.LinkIcon,{})}),l[4]=n):n=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(eV.l.TrailingVisual,{children:(0,i.jsx)(iB.U,{keys:"Mod+Alt+y"})}),l[5]=a):a=l[5],l[6]!==m?(r=(0,i.jsxs)(eV.l.Item,{onSelect:m,onMouseDown:i7,children:[n,"Copy link",a]}),l[6]=m,l[7]=r):r=l[7],r}:function({diffLine:e,diffAnchor:t}){let n=J(),a=(0,l.useCallback)(()=>{let i=n(),a=(0,A.j2)({line:e,range:i,fileAnchor:t});a&&(0,ij.D)(a)},[t,n,e]);return(0,i.jsxs)(eV.l.Item,{onSelect:a,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.LinkIcon,{})}),"Copy link",(0,i.jsx)(eV.l.TrailingVisual,{children:(0,i.jsx)(iB.U,{keys:"Mod+Alt+y"})})]})};function i7(e){window.getSelection()?.toString()!==""&&e.preventDefault()}let i8=(0,a.GV)()?e=>{let t,n,a=(0,s.c)(8),r=J();if(a[0]!==r||a[1]!==e.diffAnchor||a[2]!==e.diffLine||a[3]!==e.isLeftSide){let n=r();t=(0,A.Av)(n,e.diffLine,e.isLeftSide,e.diffAnchor),a[0]=r,a[1]=e.diffAnchor,a[2]=e.diffLine,a[3]=e.isLeftSide,a[4]=t}else t=a[4];let l=t;return e.fileDiffReference?(a[5]!==l||a[6]!==e.fileDiffReference?(n=(0,i.jsx)(iM.w,{showDivider:!0,selectedRange:l,fileDiffReference:e.fileDiffReference}),a[5]=l,a[6]=e.fileDiffReference,a[7]=n):n=a[7],n):null}:e=>{let t=J()(),n=(0,A.Av)(t,e.diffLine,e.isLeftSide,e.diffAnchor);return e.fileDiffReference?(0,i.jsx)(iM.w,{showDivider:!0,selectedRange:n,fileDiffReference:e.fileDiffReference}):null},i9=(0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(6),{diffAnchor:o}=e;l[0]!==o?(t=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${o}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},l[0]=o,l[1]=t):t=l[1];let d=t;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.MultiSelectIcon,{})}),l[2]=n):n=l[2],l[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(eV.l.TrailingVisual,{children:(0,i.jsx)(iB.U,{keys:"Mod+a"})}),l[3]=a):a=l[3],l[4]!==d?(r=(0,i.jsxs)(eV.l.Item,{onSelect:d,children:[n,"Select all",a]}),l[4]=d,l[5]=r):r=l[5],r}:function({diffAnchor:e}){return(0,i.jsxs)(eV.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.MultiSelectIcon,{})}),"Select all",(0,i.jsx)(eV.l.TrailingVisual,{children:(0,i.jsx)(iB.U,{keys:"Mod+a"})})]})},ae=(0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(21),{diffLine:o,handleViewMarkersSelection:d,isLeftSide:c,isSplit:u,shouldDisplayCollapseComments:m,showStartConversation:h,startConversationCurrentLine:f,startConversationWithSuggestedChange:p,threads:g,annotations:y,viewerData:x}=e,v=y.length>0;return h||g||v?(l[0]!==o||l[1]!==c||l[2]!==u||l[3]!==h||l[4]!==f||l[5]!==p||l[6]!==x.shouldDisplayComments?(t=x.shouldDisplayComments&&h&&(0,i.jsx)(iW,{diffLine:o,handleStartConversation:f,handleStartConversationWithSuggestedChange:p,isLeftSide:c,isSplit:u}),l[0]=o,l[1]=c,l[2]=u,l[3]=h,l[4]=f,l[5]=p,l[6]=x.shouldDisplayComments,l[7]=t):t=l[7],l[8]!==y||l[9]!==o||l[10]!==d||l[11]!==c||l[12]!==u||l[13]!==m||l[14]!==g||l[15]!==x?(n=(0,i.jsx)(at,{threads:g,annotations:y,diffLine:o,handleViewMarkersSelection:d,isLeftSide:c,isSplit:u,shouldDisplayCollapseComments:m,viewerData:x}),l[8]=y,l[9]=o,l[10]=d,l[11]=c,l[12]=u,l[13]=m,l[14]=g,l[15]=x,l[16]=n):n=l[16],l[17]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(eV.l.Divider,{}),l[17]=a):a=l[17],l[18]!==t||l[19]!==n?(r=(0,i.jsxs)(i.Fragment,{children:[t,n,a]}),l[18]=t,l[19]=n,l[20]=r):r=l[20],r):null}:function({diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:a,shouldDisplayCollapseComments:s,showStartConversation:r,startConversationCurrentLine:l,startConversationWithSuggestedChange:o,threads:d,annotations:c,viewerData:u}){let m=c.length>0;return r||d||m?(0,i.jsxs)(i.Fragment,{children:[u.shouldDisplayComments&&r&&(0,i.jsx)(iW,{diffLine:e,handleStartConversation:l,handleStartConversationWithSuggestedChange:o,isLeftSide:n,isSplit:a}),(0,i.jsx)(at,{threads:d,annotations:c,diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:a,shouldDisplayCollapseComments:s,viewerData:u}),(0,i.jsx)(eV.l.Divider,{})]}):null},at=(0,a.GV)()?function(e){let t,n=(0,s.c)(14),{diffLine:a,handleViewMarkersSelection:r,isLeftSide:l,isSplit:o,threads:d,annotations:c,shouldDisplayCollapseComments:u,viewerData:m}=e;if(m.commentsPreference===ib.sI.Visible)return null;if(!o){let e,t;return n[0]!==r?(e=()=>r(),n[0]=r,n[1]=e):e=n[1],n[2]!==c||n[3]!==a||n[4]!==u||n[5]!==e||n[6]!==d?(t=(0,i.jsx)(ai,{threads:d,annotations:c,diffLine:a,onSelect:e,shouldDisplayCollapseComments:u}),n[2]=c,n[3]=a,n[4]=u,n[5]=e,n[6]=d,n[7]=t):t=n[7],t}return n[8]!==c||n[9]!==r||n[10]!==l||n[11]!==u||n[12]!==d?(t=(0,i.jsx)(an,{threads:d,annotations:c,handleViewMarkersSelection:r,isLeftSide:l,shouldDisplayCollapseComments:u}),n[8]=c,n[9]=r,n[10]=l,n[11]=u,n[12]=d,n[13]=t):t=n[13],t}:function({diffLine:e,handleViewMarkersSelection:t,isLeftSide:n,isSplit:a,threads:s,annotations:r,shouldDisplayCollapseComments:l,viewerData:o}){return o.commentsPreference===ib.sI.Visible?null:a?(0,i.jsx)(an,{threads:s,annotations:r,handleViewMarkersSelection:t,isLeftSide:n,shouldDisplayCollapseComments:l}):(0,i.jsx)(ai,{threads:s,annotations:r,diffLine:e,onSelect:()=>t(),shouldDisplayCollapseComments:l})},an=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(13),{handleViewMarkersSelection:r,isLeftSide:l,shouldDisplayCollapseComments:o,threads:d,annotations:c}=e,u=d.length>0,m=c.length>0;if(l){let e,t;return a[0]!==r||a[1]!==u||a[2]!==o?(e=u&&(0,i.jsx)(aa,{text:o?"Collapse comments":"Expand comments",onSelect:()=>r("LEFT")}),a[0]=r,a[1]=u,a[2]=o,a[3]=e):e=a[3],a[4]!==e?(t=(0,i.jsx)(i.Fragment,{children:e}),a[4]=e,a[5]=t):t=a[5],t}return a[6]!==r||a[7]!==m||a[8]!==u||a[9]!==o?(t=(u||m)&&(0,i.jsx)(aa,{text:o?"Collapse comments":"Expand comments",onSelect:()=>r("RIGHT")}),a[6]=r,a[7]=m,a[8]=u,a[9]=o,a[10]=t):t=a[10],a[11]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),a[11]=t,a[12]=n):n=a[12],n}:function({handleViewMarkersSelection:e,isLeftSide:t,shouldDisplayCollapseComments:n,threads:a,annotations:s}){let r=a.length>0,l=s.length>0;return t?(0,i.jsx)(i.Fragment,{children:r&&(0,i.jsx)(aa,{text:n?"Collapse comments":"Expand comments",onSelect:()=>e("LEFT")})}):(0,i.jsx)(i.Fragment,{children:(r||l)&&(0,i.jsx)(aa,{text:n?"Collapse comments":"Expand comments",onSelect:()=>e("RIGHT")})})},ai=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{diffLine:r,onSelect:l,threads:o,annotations:d,shouldDisplayCollapseComments:c}=e;if(!(r&&(o.length>0||d.length>0)))return null;let u=c?"Collapse comments":"Expand comments";return a[0]!==l?(t=()=>l(),a[0]=l,a[1]=t):t=a[1],a[2]!==u||a[3]!==t?(n=(0,i.jsx)(aa,{text:u,onSelect:t}),a[2]=u,a[3]=t,a[4]=n):n=a[4],n}:function({diffLine:e,onSelect:t,threads:n,annotations:a,shouldDisplayCollapseComments:s}){return e&&(n.length>0||a.length>0)?(0,i.jsx)(aa,{text:s?"Collapse comments":"Expand comments",onSelect:()=>t()}):null},aa=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(4),{onSelect:r,text:l}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.CommentDiscussionIcon,{})}),a[0]=t):t=a[0],a[1]!==r||a[2]!==l?(n=(0,i.jsxs)(eV.l.Item,{onSelect:r,children:[t,l]}),a[1]=r,a[2]=l,a[3]=n):n=a[3],n}:function({onSelect:e,text:t}){return(0,i.jsxs)(eV.l.Item,{onSelect:e,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.CommentDiscussionIcon,{})}),t]})},as=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(4),{handleCopyCode:l}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.CopyIcon,{})}),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eV.l.TrailingVisual,{children:(0,i.jsx)(iB.U,{keys:"Mod+c"})}),r[1]=n):n=r[1],r[2]!==l?(a=(0,i.jsxs)(eV.l.Item,{onSelect:l,onMouseDown:ar,children:[t,"Copy",n]}),r[2]=l,r[3]=a):a=r[3],a}:function({handleCopyCode:e}){return(0,i.jsxs)(eV.l.Item,{onSelect:e,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.CopyIcon,{})}),"Copy",(0,i.jsx)(eV.l.TrailingVisual,{children:(0,i.jsx)(iB.U,{keys:"Mod+c"})})]})};function ar(e){window.getSelection()?.toString()!==""&&e.preventDefault()}let al=(0,a.GV)()?function(e){let t,n,a,r,l,o=(0,s.c)(17),{currentHunk:d,diffAnchor:c,nextHunk:u,previousHunk:m}=e,h=X();o[0]!==d||o[1]!==u||o[2]!==m?(t={currentHunk:d,nextHunk:u,previousHunk:m},o[0]=d,o[1]=u,o[2]=m,o[3]=t):t=o[3];let{canExpandStartOfHunk:f,canExpandEndOfHunk:p}=i$(t);return f||p||m||u?(o[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(eV.l.Divider,{}),o[4]=n):n=o[4],o[5]!==d||o[6]!==h||o[7]!==u||o[8]!==m?(a=h.has(i4.YR.expandLines)?null:(0,i.jsx)(ao,{currentHunk:d,nextHunk:u,previousHunk:m}),o[5]=d,o[6]=h,o[7]=u,o[8]=m,o[9]=a):a=o[9],o[10]!==c||o[11]!==u||o[12]!==m?(r=(0,i.jsx)(ad,{diffAnchor:c,nextHunk:u,previousHunk:m}),o[10]=c,o[11]=u,o[12]=m,o[13]=r):r=o[13],o[14]!==a||o[15]!==r?(l=(0,i.jsxs)(i.Fragment,{children:[n,a,r]}),o[14]=a,o[15]=r,o[16]=l):l=o[16],l):null}:function({currentHunk:e,diffAnchor:t,nextHunk:n,previousHunk:a}){let s=X(),{canExpandStartOfHunk:r,canExpandEndOfHunk:l}=i$({currentHunk:e,nextHunk:n,previousHunk:a});return r||l||a||n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eV.l.Divider,{}),s.has(i4.YR.expandLines)?null:(0,i.jsx)(ao,{currentHunk:e,nextHunk:n,previousHunk:a}),(0,i.jsx)(ad,{diffAnchor:t,nextHunk:n,previousHunk:a})]}):null},ao=(0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(13),{currentHunk:o,nextHunk:d,previousHunk:u}=e;l[0]!==o||l[1]!==d||l[2]!==u?(t={currentHunk:o,nextHunk:d,previousHunk:u},l[0]=o,l[1]=d,l[2]=u,l[3]=t):t=l[3];let{canExpandStartOfHunk:m,expandEndOfHunk:h,expandStartOfHunk:f,canExpandEndOfHunk:p}=i$(t);return l[4]!==m||l[5]!==f?(n=m&&(0,i.jsxs)(eV.l.Item,{onSelect:f,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.FoldUpIcon,{})}),"Expand above"]}),l[4]=m,l[5]=f,l[6]=n):n=l[6],l[7]!==p||l[8]!==h?(a=p&&(0,i.jsxs)(eV.l.Item,{onSelect:h,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.FoldDownIcon,{})}),"Expand below"]}),l[7]=p,l[8]=h,l[9]=a):a=l[9],l[10]!==n||l[11]!==a?(r=(0,i.jsxs)(i.Fragment,{children:[n,a]}),l[10]=n,l[11]=a,l[12]=r):r=l[12],r}:function({currentHunk:e,nextHunk:t,previousHunk:n}){let{canExpandStartOfHunk:a,expandEndOfHunk:s,expandStartOfHunk:r,canExpandEndOfHunk:l}=i$({currentHunk:e,nextHunk:t,previousHunk:n});return(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsxs)(eV.l.Item,{onSelect:r,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.FoldUpIcon,{})}),"Expand above"]}),l&&(0,i.jsxs)(eV.l.Item,{onSelect:s,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.FoldDownIcon,{})}),"Expand below"]})]})},ad=(0,a.GV)()?function(e){let t,n,a,r,l,o=(0,s.c)(13),{diffAnchor:d,nextHunk:u,previousHunk:m}=e,h=!!m,f=!!u;o[0]!==d?(t=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${d}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},o[0]=d,o[1]=t):t=o[1];let p=t;o[2]!==d?(n=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${d}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},o[2]=d,o[3]=n):n=o[3];let g=n;return o[4]!==p||o[5]!==f?(a=f?(0,i.jsxs)(eV.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:p,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(eV.l.TrailingVisual,{children:"Page Down"})]}):null,o[4]=p,o[5]=f,o[6]=a):a=o[6],o[7]!==g||o[8]!==h?(r=h?(0,i.jsxs)(eV.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:g,children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(eV.l.TrailingVisual,{children:"Page Up"})]}):null,o[7]=g,o[8]=h,o[9]=r):r=o[9],o[10]!==a||o[11]!==r?(l=(0,i.jsxs)(i.Fragment,{children:[a,r]}),o[10]=a,o[11]=r,o[12]=l):l=o[12],l}:function({diffAnchor:e,nextHunk:t,previousHunk:n}){return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(eV.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(eV.l.TrailingVisual,{children:"Page Down"})]}):null,n?(0,i.jsxs)(eV.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,i.jsx)(eV.l.LeadingVisual,{children:(0,i.jsx)(c.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(eV.l.TrailingVisual,{children:"Page Up"})]}):null]})};try{i5.displayName||(i5.displayName="CellContextMenu")}catch{}try{i6.displayName||(i6.displayName="CopyAnchorLink")}catch{}try{i9.displayName||(i9.displayName="SelectAllListItem")}catch{}try{ae.displayName||(ae.displayName="MarkerListItems")}catch{}try{at.displayName||(at.displayName="ViewMarkerListItems")}catch{}try{an.displayName||(an.displayName="SplitDiffMarkersListItems")}catch{}try{ai.displayName||(ai.displayName="UnifiedDiffMarkerListItem")}catch{}try{aa.displayName||(aa.displayName="MarkerListItem")}catch{}try{as.displayName||(as.displayName="CopyContentListItems")}catch{}try{al.displayName||(al.displayName="HunkListItems")}catch{}try{ao.displayName||(ao.displayName="ExpandHunksListItems")}catch{}try{ad.displayName||(ad.displayName="JumpToHunkListItems")}catch{}var ac=n(17998);let au="InProgressCommentIndicator-module__statusAvatarBackground--xzHl8",am="InProgressCommentIndicator-module__statusAvatar--BNNHX",ah=(0,a.GV)()?function(e){let t,n=(0,s.c)(4),{authorAvatarUrl:a,authorLogin:r,lineSpacingPreference:l}=e,o="compact"===l?18:20,d=`${r}'s avatar image with pending indicator`;return n[0]!==a||n[1]!==o||n[2]!==d?(t=(0,i.jsx)(ac.k,{altText:d,icon:c.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:o,src:a,backgroundClassName:au,className:am}),n[0]=a,n[1]=o,n[2]=d,n[3]=t):t=n[3],t}:function({authorAvatarUrl:e,authorLogin:t,lineSpacingPreference:n}){return(0,i.jsx)(ac.k,{altText:`${t}'s avatar image with pending indicator`,icon:c.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:"compact"===n?18:20,src:e,backgroundClassName:au,className:am})};try{ah.displayName||(ah.displayName="InProgressCommentIndicator")}catch{}let af="ActionBar-module__action-bar-position--cMcOj",ap="ActionBar-module__addCommentButton--gIYSg",ag="ActionBar-module__addCommentButtonDraftCompact--HKIKU",ay="ActionBar-module__addCommentButtonDraftRelaxed--_qJPM",ax="ActionBar-module__addCommentButtonNew--j1kFj",av="ActionBar-module__actionBarArrowSizing--L93H4",ab="ActionBar-module__actionBarHeight--wiyuB",aj="ActionBar-module__actionBarStartCommentWidth--TTHf8",aw="ActionBar-module__action-bar-button-group--G1uFN";var aC=n(85933),a_=n(82518);function aN({ref:e=null,annotations:t,authorAvatarUrl:n,authorLogin:a,cellId:s,cellRef:r,copilotChatReference:o,currentHunk:d,diffAnchor:u,diffLine:m,enterDialogMode:h,hasDraftComment:f,handleCopyCode:p,isLeftSide:g,isSplit:y,nextHunk:v,onMouseDownAddCommentButton:b,onMouseLeaveAddCommentButton:j,previousHunk:w,shouldDisplayCollapseComments:C,shouldDisplayMinimizedComments:_,showStartConversation:N,threads:S,toggleViewingMarkers:I,viewerData:k}){let L=(0,l.useRef)(null),D=(0,l.useRef)(null),{lineSpacingPreference:T,commentsPreference:E}=k,A=(0,l.useRef)(null),{sendAnalyticsEvent:R}=(0,tJ.s)(),O=L.current?L:D;(0,iE.T)(e,O);let P=S.reduce((e,t)=>e+(t.commentsData?.comments.length??0),0),F=t.length,{isActionBarFocused:M,handleActionBarBlur:$,handleActionBarFocusCapture:B,handleActionBarKeydownCapture:V}=iT({cellRef:r}),{isContextMenuOpen:U,anyMenuOpen:q,toggleContextMenu:H,toggleContextMenuFromActionBar:G}=iL({cellId:s,actionBarRef:A}),{startNewConversation:K,startNewConversationWithSuggestedChange:W}=iD({cellId:s,onOpenDialog:h}),z=(0,l.useCallback)(e=>{(0,aC.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{R("diff-lines.inp_interaction","CELL_ADD_COMMENT_BUTTON",{latency:e.latency}),(0,a_.au)({name:"PRS_ADD_COMMENT_BUTTON_CLICK",tags:{diffType:"v1"},value:e.latency})}}),e.stopPropagation(),K()},[K,R]),Q=P+F>0&&E===ib.sI.Collapsed,Z={onBlur:$,onFocusCapture:B,onKeyDownCapture:V},J=(0,l.useCallback)(e=>{(1===S.length||1===t.length)&&e.preventDefault(),I?.()},[t.length,S.length,I]);return(0,i.jsxs)(i.Fragment,{children:[N&&(0,i.jsx)("div",{"aria-hidden":!M,className:(0,x.$)("d-flex","flex-row",ap),children:(0,i.jsx)(i.Fragment,{children:f?(0,i.jsx)(eR.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,x.$)("py-0","compact"===T?ag:ay,ab),onClick:K,...Z,children:(0,i.jsx)(ah,{lineSpacingPreference:T,authorAvatarUrl:n,authorLogin:a})}):(0,i.jsx)(eR.Q,{icon:c.PlusIcon,"aria-label":"Add comment",ref:D,size:"small","data-add-comment-button":!0,className:(0,x.$)("fgColor-muted","bgColor-accent-emphasis","borderColor-accent-emphasis","fgColor-onEmphasis","px-0",ax,ab,aj),onClick:z,onMouseDown:b,onMouseLeave:j,...Z})})}),(0,i.jsx)("div",{"aria-hidden":!M,className:(0,x.$)("d-flex","flex-row",af),children:(0,i.jsxs)(iA.A,{className:aw,...Z,children:[Q&&_&&(0,i.jsx)(eR.Q,{ref:L,"aria-expanded":q,"aria-label":"View comments",size:"small",className:(0,x.$)("py-0","px-1",ab),onClick:J,children:(0,i.jsx)(iF,{threads:S,annotations:t,lineSpacingPreference:T})}),(0,i.jsxs)(eB.W,{anchorRef:A,open:U,onOpenChange:H,children:[(0,i.jsx)(eB.W.Anchor,{children:(0,i.jsx)(eR.Q,{ref:A,"aria-haspopup":"true","aria-label":"More actions",icon:c.TriangleDownIcon,size:"small",className:(0,x.$)("fgColor-muted",av),onClick:G})}),(0,i.jsx)(eB.W.Overlay,{width:"medium",children:(0,i.jsx)(eV.l,{children:(0,i.jsx)(i5,{threads:S,annotations:t,currentHunk:d,diffAnchor:u,diffLine:m,shouldDisplayCollapseComments:C,copilotChatReference:o,showStartConversation:N,handleCopyCode:p,handleViewMarkersSelection:I,isLeftSide:g,isSplit:y,nextHunk:v,previousHunk:w,startConversationCurrentLine:K,startConversationWithSuggestedChange:W,viewerData:k})})})]})]})})]})}function aS(e,t){let n=t>0,i=e>0;switch(!0){case n&&i:return"Code has comments and alerts. Press enter to view.";case i:return"Code has comments. Press enter to view.";case n:return"Code has alerts. Press enter to view.";default:return""}}aN.displayName="ActionBar";let aI=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{threadCount:r,annotationCount:l}=e;a[0]!==l||a[1]!==r?(t=aS(r,l),a[0]=l,a[1]=r,a[2]=t):t=a[2];let o=t;return o?(a[3]!==o?(n=(0,i.jsx)("span",{className:"sr-only user-select-none",children:o}),a[3]=o,a[4]=n):n=a[4],n):null}:function({threadCount:e,annotationCount:t}){let n=aS(e,t);return n?(0,i.jsx)("span",{className:"sr-only user-select-none",children:n}):null};try{aI.displayName||(aI.displayName="DiffLineScreenReaderSummary")}catch{}let ak="ContentCell-module__comment-indicator--Avv5C",aL="ContentCell-module__in-progress-comment-indicator--Onob7",aD=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,C,_,N,S,I,k,L,D,T,E,R=(0,s.c)(64);if(R[0]!==e){let{ref:i,cellId:s,children:l,className:_,columnIndex:N,diffLine:S,diffAnchor:I,handleDiffCellMouseDown:k,handleExitDialogMode:L,handleHideMarkersFromFocus:D,handleDiffSideCellSelectionBlocking:T,handleStartConversation:E,handleUserClosedMarkersDialog:A,isLeftSide:O,isRowSelected:P,isSplit:F,lineAnchor:M,commentDialogOpen:$,enterDialogMode:B,hasThreads:V,role:U,...q}=e;u=i,t=s,n=l,a=_,r=N,d=S,o=I,m=k,f=L,h=T,p=E,g=A,x=O,C=P,v=F,b=M,c=B,y=V,w=U,j=q,R[0]=e,R[1]=t,R[2]=n,R[3]=a,R[4]=r,R[5]=o,R[6]=d,R[7]=c,R[8]=u,R[9]=m,R[10]=h,R[11]=f,R[12]=p,R[13]=g,R[14]=y,R[15]=x,R[16]=v,R[17]=b,R[18]=j,R[19]=w,R[20]=C}else t=R[1],n=R[2],a=R[3],r=R[4],o=R[5],d=R[6],c=R[7],u=R[8],m=R[9],h=R[10],f=R[11],p=R[12],g=R[13],y=R[14],x=R[15],v=R[16],b=R[17],j=R[18],w=R[19],C=R[20];let O=void 0!==C&&C,P=d,F=(0,l.useRef)(null),M=J(),{sendAnalyticsEvent:$}=(0,tJ.s)();R[21]===Symbol.for("react.memo_cache_sentinel")?(_=()=>F.current,N=[],R[21]=_,R[22]=N):(_=R[21],N=R[22]),(0,l.useImperativeHandle)(u,_,N);let{disableDialogMode:B}=et();R[23]!==o||R[24]!==M||R[25]!==P?(S=()=>{let e=M(),t=(0,A.j2)({line:P,range:e,fileAnchor:o});t&&(0,ij.D)(t)},R[23]=o,R[24]=M,R[25]=P,R[26]=S):S=R[26];let V=S,U=Z(),{clearFirstLineSelectionOnDrag:q}=er();R[27]!==q||R[28]!==U||R[29]!==p||R[30]!==$?(I=e=>{(0,aC.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{$("diff-lines.inp_interaction","CELL_MULTI_SELECT",{latency:e.latency})}});let t=U();t?.shouldStartConversation&&p?.(),q()},R[27]=q,R[28]=U,R[29]=p,R[30]=$,R[31]=I):I=R[31];let H=I;R[32]!==m||R[33]!==h?(k=e=>{e.shiftKey&&e.preventDefault(),m?.(e),h?.(e)},R[32]=m,R[33]=h,R[34]=k):k=R[34];let G=k;R[35]!==B||R[36]!==f||R[37]!==g?(L=()=>{F.current?.focus(),B(),f?.(),g?.()},R[35]=B,R[36]=f,R[37]=g,R[38]=L):L=R[38];let K=L,W=z(),Y=Q();R[39]!==V||R[40]!==d||R[41]!==c||R[42]!==K||R[43]!==Y||R[44]!==W||R[45]!==M||R[46]!==p||R[47]!==y||R[48]!==x||R[49]!==v?(D=async e=>{if(e.target===F.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault();let t=Y();await iw({diffLine:d,diffLines:t,getSelectedDiffLines:W,getSelectedLineRange:M,isSplit:v,isLeftSide:x});return}e.target===F.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key?V():F.current?.contains(e.target)&&e?.key==="Escape"?K():e.target===F.current&&"Enter"===e.key&&(c?.(),!1===y&&p?.(),e.preventDefault())},R[39]=V,R[40]=d,R[41]=c,R[42]=K,R[43]=Y,R[44]=W,R[45]=M,R[46]=p,R[47]=y,R[48]=x,R[49]=v,R[50]=D):D=R[50];let X=D,ee=`Cell-left:${P.left}-right:${P.right}-leftSide:${x}`,en=!!O,ei=w??"gridcell";R[51]===Symbol.for("react.memo_cache_sentinel")?(T={userSelect:"none",position:"relative"},R[51]=T):T=R[51];let ea=a?`focusable-grid-cell ${a} ${r<3?"left-side":""}`:"focusable-grid-cell";return R[52]!==t||R[53]!==n||R[54]!==G||R[55]!==H||R[56]!==X||R[57]!==ee||R[58]!==b||R[59]!==j||R[60]!==ei||R[61]!==ea||R[62]!==en?(E=(0,i.jsx)("td",{ref:F,"data-grid-cell-id":t,"data-line-anchor":b,"data-selected":en,role:ei,style:T,tabIndex:-1,valign:"top",className:ea,onKeyDown:X,onMouseDown:G,onMouseUp:H,...j,children:n},ee),R[52]=t,R[53]=n,R[54]=G,R[55]=H,R[56]=X,R[57]=ee,R[58]=b,R[59]=j,R[60]=ei,R[61]=ea,R[62]=en,R[63]=E):E=R[63],E}:function({ref:e,cellId:t,children:n,className:a,columnIndex:s,diffLine:r,diffAnchor:o,handleDiffCellMouseDown:d,handleExitDialogMode:c,handleHideMarkersFromFocus:u,handleDiffSideCellSelectionBlocking:m,handleStartConversation:h,handleUserClosedMarkersDialog:f,isLeftSide:p,isRowSelected:g=!1,isSplit:y,lineAnchor:x,commentDialogOpen:v,enterDialogMode:b,hasThreads:j,role:w,...C}){let _=(0,l.useRef)(null),N=J(),{sendAnalyticsEvent:S}=(0,tJ.s)();(0,l.useImperativeHandle)(e,()=>_.current,[]);let{disableDialogMode:I}=et(),k=(0,l.useCallback)(()=>{let e=N(),t=(0,A.j2)({line:r,range:e,fileAnchor:o});t&&(0,ij.D)(t)},[o,N,r]),L=Z(),{clearFirstLineSelectionOnDrag:D}=er(),T=(0,l.useCallback)(e=>{(0,aC.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{S("diff-lines.inp_interaction","CELL_MULTI_SELECT",{latency:e.latency})}});let t=L();t?.shouldStartConversation&&h?.(),D()},[D,L,h,S]),E=(0,l.useCallback)(e=>{e.shiftKey&&e.preventDefault(),d?.(e),m?.(e)},[d,m]),R=(0,l.useCallback)(()=>{_.current?.focus(),I(),c?.(),f?.()},[I,c,f]),O=z(),P=Q(),F=(0,l.useCallback)(async e=>{if(e.target===_.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault();let t=P();await iw({diffLine:r,diffLines:t,getSelectedDiffLines:O,getSelectedLineRange:N,isSplit:y,isLeftSide:p});return}e.target===_.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key?k():_.current?.contains(e.target)&&e?.key==="Escape"?R():e.target===_.current&&"Enter"===e.key&&(b?.(),!1===j&&h?.(),e.preventDefault())},[P,r,O,N,y,p,k,R,b,j,h]),M=`Cell-left:${r.left}-right:${r.right}-leftSide:${p}`;return(0,i.jsx)("td",{ref:_,"data-grid-cell-id":t,"data-line-anchor":x,"data-selected":!!g,role:w??"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:a?`focusable-grid-cell ${a} ${s<3?"left-side":""}`:"focusable-grid-cell",onKeyDown:F,onMouseDown:E,onMouseUp:T,...C,children:n},M)};try{aD.displayName||(aD.displayName="Cell")}catch{}let aT=new Set,aE=!1,aA=e=>{let t=e.target instanceof Node?e.target:null;for(let e of aT){let{element:n,shouldIgnore:i,onPointerExit:a}=e;if(!n.isConnected){aT.delete(e);continue}if(t&&n.contains(t)){e.pendingExit=!1;continue}e.pendingExit=!0,i?.()||(e.pendingExit=!1,a())}0===aT.size&&aR()},aR=()=>{aE&&g.XC&&!(aT.size>0)&&(g.XC.removeEventListener("pointermove",aA),aE=!1)};function aO(e){let{element:t}=e;if(!t)return()=>{};let n={...e,pendingExit:!1};return aT.add(n),!aE&&g.XC&&(g.XC.addEventListener("pointermove",aA),aE=!0),()=>{aT.delete(n),aR()}}let aP="diff-";function aF(e){return"string"==typeof e&&e.startsWith(aP)?e.slice(aP.length):""}let aM=(0,a.GV)()?function(e){let t,n,a,r,o,d,u,m,h,f,p,y,b,j,w,C,_,N,S,I,L,D,T,E,R,O,P,F,M,$,B,V,q,H,G,K,W,Y,X,et,en,ei,ea,es,el,ed,eu,em,eh,ef,ep,eg,ey,ex=(0,s.c)(282),{ref:ev,annotationsAtPosition:eb,columnIndex:ej,commentsPreference:ew,copilotChatReference:eC,currentHunk:e_,diffAnchor:eN,diffLine:eS,dispatchMarkersStatus:eI,filePath:eL,handleDiffSideCellSelectionBlocking:eD,isLeftSide:eT,isRowSelected:eE,isSplit:eA,lineAnchor:eR,markersStatus:eO,nextHunk:eP,previousHunk:eF,rowId:eM,subjectId:e$,threadsAtPosition:eB,viewerData:eV}=e;ex[0]!==eS.html||ex[1]!==eS.type?(t=(0,A.x_)(eS.html,eS.type),ex[0]=eS.html,ex[1]=eS.type,ex[2]=t):t=ex[2];let[eU,eq]=t;ex[3]!==eq?(n=eq&&["+","-"].includes(eq),ex[3]=eq,ex[4]=n):n=ex[4];let eH=n,{isActionBarVisible:eG,hideActionBar:eK,anyMenuOpen:eW}=ik(),ez=(0,eQ.u)("move_new_comments_ui"),eZ=eT?"LEFT":"RIGHT";ex[5]!==eL||ex[6]!==eS.blobLineNumber||ex[7]!==e$||ex[8]!==eZ?(a={diffSide:eZ,filePath:eL,line:eS.blobLineNumber,subjectId:e$,fileLevelComment:!1},ex[5]=eL,ex[6]=eS.blobLineNumber,ex[7]=e$,ex[8]=eZ,ex[9]=a):a=ex[9];let{hasPersistedComment:eJ}=(0,v.L)(a);ex[10]!==ew||ex[11]!==eV?(r={...eV,commentsPreference:ew},ex[10]=ew,ex[11]=eV,ex[12]=r):r=ex[12];let eY=r;ex[13]!==ej||ex[14]!==eM?(o=(0,A.u6)(eM,ej),ex[13]=ej,ex[14]=eM,ex[15]=o):o=ex[15];let eX=o,e0=ee(eX),e2=eT?"LEFT":"RIGHT",e3="RIGHT"===e2?eS.right:eS.left;ex[16]!==e3||ex[17]!==e2?(d=(0,A.oH)(e3,e2),ex[16]=e3,ex[17]=e2,ex[18]=d):d=ex[18];let e4=d,e5=eB.length,e6=eb.length,e7=(0,l.useRef)(null),e8=(0,l.useRef)(null);(ex[19]===Symbol.for("react.memo_cache_sentinel")?(u=()=>e8.current,m=[],ex[19]=u,ex[20]=m):(u=ex[19],m=ex[20]),(0,l.useImperativeHandle)(ev,u,m),ex[21]!==e6||ex[22]!==ew||ex[23]!==e5)?(h=0!==e5+e6,f=(0,A.S4)({hasThreads:h&&ew===ib.sI.Collapsed}),ex[21]=e6,ex[22]=ew,ex[23]=e5,ex[24]=h,ex[25]=f):(h=ex[24],f=ex[25]);let e9=f;ex[26]===Symbol.for("react.memo_cache_sentinel")?(p={cellRef:e8},ex[26]=p):p=ex[26];let{handleCellBlur:te,handleCellFocus:tt,handleCellMouseEnter:tn,handleCellMouseLeave:ti}=iT(p);ex[27]!==eW||ex[28]!==eK||ex[29]!==eG?(y=()=>{if(eG&&e8.current)return aO({element:e8.current,shouldIgnore:()=>{let e,t;return eW||(e=g.XC?.activeElement,!!(t=e8.current)&&!!e&&(t===e||t.contains(e)))},onPointerExit:eK})},b=[eW,eK,eG],ex[27]=eW,ex[28]=eK,ex[29]=eG,ex[30]=y,ex[31]=b):(y=ex[30],b=ex[31]),(0,l.useEffect)(y,b);let ta=(0,l.useRef)(null),ts=iu(eX,e8,eI),tr=Q(),tl=z(),to=ec(),td=J(),tc=(0,eQ.u)("cotd_ui");ex[32]!==eI?(j=e=>{(void 0===e||e)&&requestAnimationFrame(()=>e8.current?.focus()),eI("USER_MINIMIZED_MARKERS")},ex[32]=eI,ex[33]=j):j=ex[33];let tu=j;ex[34]!==tu||ex[35]!==ew||ex[36]!==ts||ex[37]!==eO.showMarkers?(w=()=>{ew===ib.sI.Collapsed&&eO.showMarkers?tu():ts()},ex[34]=tu,ex[35]=ew,ex[36]=ts,ex[37]=eO.showMarkers,ex[38]=w):w=ex[38];let tm=w;ex[39]!==eX?(C={cellId:eX,actionBarRef:e7},ex[39]=eX,ex[40]=C):C=ex[40];let{closeMarkerListDialog:th,isContextMenuOpen:tf}=iL(C);ex[41]!==eN||ex[42]!==ts||ex[43]!==eL||ex[44]!==td||ex[45]!==eK||ex[46]!==eT||ex[47]!==eS.blobLineNumber||ex[48]!==eV.shouldDisplayComments?(_=()=>{ts(),eV.shouldDisplayComments||eK();let e=td();e||(e={startLineNumber:eS.blobLineNumber,endLineNumber:eS.blobLineNumber,startOrientation:eT?"left":"right",endOrientation:eT?"left":"right",diffAnchor:eN});let t=new U.L(e,eL);g.cg?.dispatchEvent(t)},ex[41]=eN,ex[42]=ts,ex[43]=eL,ex[44]=td,ex[45]=eK,ex[46]=eT,ex[47]=eS.blobLineNumber,ex[48]=eV.shouldDisplayComments,ex[49]=_):_=ex[49];let tp=_;ex[50]!==eX||ex[51]!==tp?(N={cellId:eX,onOpenDialog:tp},ex[50]=eX,ex[51]=tp,ex[52]=N):N=ex[52];let{isNewConversationDialogOpen:tg,shouldStartNewConversationWithSuggestedChange:ty,startNewConversation:tx,closeNewConversation:tv}=iD(N);e:{if(!eG){S=!1;break e}if(!eV.shouldDisplayComments)if(tc){let e;ex[53]!==eS?(e=(0,A.Po)(eS),ex[53]=eS,ex[54]=e):e=ex[54],S=!e;break e}else{let e;ex[55]!==tl||ex[56]!==eS?(e=(0,A.a1)(eS,(0,A.Mk)(tl())),ex[55]=tl,ex[56]=eS,ex[57]=e):e=ex[57],S=e;break e}if(tg||!eV.viewerCanComment){S=!1;break e}if(tc){let e;ex[58]!==eS?(e=(0,A.Po)(eS),ex[58]=eS,ex[59]=e):e=ex[59],S=!e}else{let e;ex[60]!==tl||ex[61]!==eS?(e=(0,A.a1)(eS,(0,A.Mk)(tl())),ex[60]=tl,ex[61]=eS,ex[62]=e):e=ex[62],S=e}}let tb=S,{baseOid:tj,headOid:tw}=(0,k.E4)(),{mutate:tC}=ne(),{effectiveRange:t_}=(0,k.L3)(),{newTreeEntry:tN,oldTreeEntry:tS}=eo();ex[63]!==tc||ex[64]!==tC||ex[65]!==t_||ex[66]!==tw||ex[67]!==ts||ex[68]!==eL||ex[69]!==td||ex[70]!==eT||ex[71]!==eE||ex[72]!==eS||ex[73]!==tN||ex[74]!==tS||ex[75]!==tj?(I=e=>{let{onCompleted:t,onError:n,submitBatch:i,text:a}=e;if(!eS)return;let s=td();if(tc){let e=new ReviewCommentFactory({filePath:eL,newTreeEntry:tN,oldTreeEntry:tS,effectiveDiffRange:t_,submitBatch:i,text:a});tC(s&&nf(eE,s)?e.multilineRequestData(s):e.lineRequestData(eS,eT),{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment?.databaseId),ts()}})}else{let e,r,l=!!s&&s.startLineNumber!==s.endLineNumber,o=eS.blobLineNumber,d=eT&&!(0,A.Ji)(eS)?"left":"right";s&&l&&eE&&(d="left"===s.endOrientation?"left":"right",r="left"===s.startOrientation?"left":"right",o=s.endLineNumber,e=s.startLineNumber),tC({text:a,line:o,path:eL,side:d,startSide:r,submitBatch:i,startLine:e,comparisonEndOid:tw,comparisonStartOid:tj},{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment?.databaseId),ts()}})}},ex[63]=tc,ex[64]=tC,ex[65]=t_,ex[66]=tw,ex[67]=ts,ex[68]=eL,ex[69]=td,ex[70]=eT,ex[71]=eE,ex[72]=eS,ex[73]=tN,ex[74]=tS,ex[75]=tj,ex[76]=I):I=ex[76];let tI=I;ex[77]!==eB.length?(L=()=>{eB.length<=1&&setTimeout(()=>e8.current?.focus())},ex[77]=eB.length,ex[78]=L):L=ex[78];let tk=L;ex[79]!==ts||ex[80]!==tx?(D=()=>{ts?.(),tx?.()},ex[79]=ts,ex[80]=tx,ex[81]=D):D=ex[81];let tL=D;ex[82]!==to||ex[83]!==tL||ex[84]!==eS.key||ex[85]!==e4||ex[86]!==ez?(T=()=>{ez&&eS.key&&to(e4,tL,eS.key)},ex[82]=to,ex[83]=tL,ex[84]=eS.key,ex[85]=e4,ex[86]=ez,ex[87]=T):T=ex[87],ex[88]!==to||ex[89]!==tL||ex[90]!==eS||ex[91]!==e4||ex[92]!==ez?(E=[to,tL,eS,e4,ez],ex[88]=to,ex[89]=tL,ex[90]=eS,ex[91]=e4,ex[92]=ez,ex[93]=E):E=ex[93],(0,l.useEffect)(T,E);let tD=(0,l.useRef)(!0);t:{if(!eV.shouldDisplayComments||!ew){R=!1;break t}if(h&&ew===ib.sI.Collapsed){R=!eO.userMinimized;break t}if(!tg&&!h){R=!1;break t}if(ew===ib.sI.Collapsed&&(tg||e0)||ew===ib.sI.Visible&&(h||tg||eO.showMarkers)){R=!0;break t}R=!1}let tT=R,tE=(0,A.dT)(eS),{addLineToSelection:tA,clearSelectedLines:tR,selectLine:tO}=er(),tP=Z();ex[94]!==ew||ex[95]!==tL||ex[96]!==eJ?(O=()=>{eJ&&ew===ib.sI.Visible&&tL()},P=[eJ,tL,ew],ex[94]=ew,ex[95]=tL,ex[96]=eJ,ex[97]=O,ex[98]=P):(O=ex[97],P=ex[98]),(0,l.useEffect)(O,P),ex[99]!==td||ex[100]!==eT||ex[101]!==eS.left||ex[102]!==eS.right?(F=()=>{let e=td();return!!e&&("right"===e.endOrientation&&!eT&&e.endLineNumber===eS.right||!!e&&"left"===e.endOrientation&&!!eT&&e.endLineNumber===eS.left)},ex[99]=td,ex[100]=eT,ex[101]=eS.left,ex[102]=eS.right,ex[103]=F):F=ex[103];let tF=F;ex[104]!==tR||ex[105]!==tF?(M=()=>{tF()||tR()},ex[104]=tR,ex[105]=tF,ex[106]=M):M=ex[106];let tM=M,t$=(0,k.gW)();ex[107]!==tA||ex[108]!==eN||ex[109]!==ti||ex[110]!==tF||ex[111]!==eT||ex[112]!==eE||ex[113]!==eS.key||ex[114]!==eS.left||ex[115]!==eS.right||ex[116]!==tO||ex[117]!==t$?($=e=>{if(1!==e.buttons)return;ti();let t=eT?eS.left:eS.right,n=eS.key;n&&(eE||!t||tF()?tA({lineKey:n,orientation:eT?"left":"right"},ek):(tO({lineKey:n,firstLineSelectionOnDrag:{lineNumber:t,orientation:eT?"left":"right",lineKey:n,shouldStartConversation:!0}},ek),t$(aF(eN))))},ex[107]=tA,ex[108]=eN,ex[109]=ti,ex[110]=tF,ex[111]=eT,ex[112]=eE,ex[113]=eS.key,ex[114]=eS.left,ex[115]=eS.right,ex[116]=tO,ex[117]=t$,ex[118]=$):$=ex[118];let tB=$;ex[119]!==tA||ex[120]!==tP||ex[121]!==tn||ex[122]!==eT||ex[123]!==eS.key?(B=e=>{let t=tP();1===e.buttons&&t&&eS.key&&tA({lineKey:eS.key,orientation:eT?"left":"right"},ek),tn()},ex[119]=tA,ex[120]=tP,ex[121]=tn,ex[122]=eT,ex[123]=eS.key,ex[124]=B):B=ex[124];let tV=B;ex[125]!==td||ex[126]!==tP||ex[127]!==ti||ex[128]!==eK||ex[129]!==tf||ex[130]!==eT||ex[131]!==eS.left||ex[132]!==eS.right||ex[133]!==eV.shouldDisplayComments?(V=()=>{let e=tP();if(!e){eV.shouldDisplayComments||tf||eK(),ti();return}let t=td(),n=t?.startOrientation==="right"&&"right"===e.orientation&&!eT&&eS.right===e.lineNumber,i=t?.startOrientation==="left"&&"left"===e.orientation&&eT&&eS.left===e.lineNumber;n||i||ti()},ex[125]=td,ex[126]=tP,ex[127]=ti,ex[128]=eK,ex[129]=tf,ex[130]=eT,ex[131]=eS.left,ex[132]=eS.right,ex[133]=eV.shouldDisplayComments,ex[134]=V):V=ex[134];let tU=V;ex[135]!==eI?(q=()=>{eI("USER_EXITED_MARKERS_DIALOG")},ex[135]=eI,ex[136]=q):q=ex[136];let tq=q;ex[137]!==eI?(H=()=>{eI("USER_MINIMIZED_MARKERS")},ex[137]=eI,ex[138]=H):H=ex[138];let tH=H;ex[139]!==tu||ex[140]!==tv?(G=e=>{tu(void 0===e||e),tv()},ex[139]=tu,ex[140]=tv,ex[141]=G):G=ex[141];let tK=G;ex[142]!==eS||ex[143]!==tr||ex[144]!==tl||ex[145]!==td||ex[146]!==eT||ex[147]!==eA?(K=async()=>{let e=tr();await iw({diffLine:eS,diffLines:e,getSelectedDiffLines:tl,getSelectedLineRange:td,isSplit:eA,isLeftSide:eT})},ex[142]=eS,ex[143]=tr,ex[144]=tl,ex[145]=td,ex[146]=eT,ex[147]=eA,ex[148]=K):K=ex[148];let tW=K,tz=`ContentCell-left:${eS.left}-right:${eS.right}-leftSide:${eT}`,tQ=`inline-dialog-heading-${(0,l.useId)()}`;n:{let e;if(!eE){W=eS.blobLineNumber;break n}ex[149]!==td?(e=td(),ex[149]=td,ex[150]=e):e=ex[150];let t=e;W=t?.endLineNumber??eS.blobLineNumber}let tZ=W;i:{let e;if(!eE){Y=void 0;break i}ex[151]!==td?(e=td(),ex[151]=td,ex[152]=e):e=ex[152];let t=e;Y=t?.startLineNumber}let tJ=Y,tY=`diff-text-cell ${eT?"left-side-diff-cell":"right-side-diff-cell"} ${tE?"pt-4":""}`,tX=eT&&"HUNK"!==eS.type;ex[153]!==tY||ex[154]!==tX?(X=(0,x.$)(tY,{"border-right":tX}),ex[153]=tY,ex[154]=tX,ex[155]=X):X=ex[155],ex[156]!==eE||ex[157]!==eS.type?(et=(0,A.Yf)(eS.type,!1,eE),ex[156]=eE,ex[157]=eS.type,ex[158]=et):et=ex[158],ex[159]!==e9||ex[160]!==et?(en={backgroundColor:et,paddingRight:e9},ex[159]=e9,ex[160]=et,ex[161]=en):en=ex[161];let t0=e0?tQ:void 0,t1=e0?"dialog":"gridcell";ex[162]!==tQ||ex[163]!==e0?(ei=e0&&(0,i.jsx)("h1",{id:tQ,className:"sr-only",children:"Comment view"}),ex[162]=tQ,ex[163]=e0,ex[164]=ei):ei=ex[164];let t2="ADDITION"===eS.type,t3="DELETION"===eS.type;ex[165]!==t2||ex[166]!==t3?(ea=(0,x.$)("diff-text syntax-highlighted-line",{addition:t2,deletion:t3}),ex[165]=t2,ex[166]=t3,ex[167]=ea):ea=ex[167],ex[168]!==eq||ex[169]!==eH?(es=eH&&(0,i.jsx)("span",{className:"diff-text-marker",children:eq}),ex[168]=eq,ex[169]=eH,ex[170]=es):es=ex[170];let t4="HUNK"===eS.type;return ex[171]!==t4?(el=(0,x.$)("diff-text-inner",{"color-fg-muted":t4}),ex[171]=t4,ex[172]=el):el=ex[172],ex[173]!==eU||ex[174]!==el?(ed=(0,i.jsx)(e1.$6,{html:eU,className:el}),ex[173]=eU,ex[174]=el,ex[175]=ed):ed=ex[175],ex[176]!==ea||ex[177]!==es||ex[178]!==ed?(eu=(0,i.jsxs)("code",{className:ea,children:[es,ed]}),ex[176]=ea,ex[177]=es,ex[178]=ed,ex[179]=eu):eu=ex[179],ex[180]!==eS.displayNoNewLineWarning?(em=eS.displayNoNewLineWarning&&(0,i.jsx)(c.NoEntryIcon,{size:16,className:"fgColor-danger"}),ex[180]=eS.displayNoNewLineWarning,ex[181]=em):em=ex[181],ex[182]!==eb||ex[183]!==eX||ex[184]!==eC||ex[185]!==e_||ex[186]!==eN||ex[187]!==eS||ex[188]!==td||ex[189]!==tW||ex[190]!==tM||ex[191]!==tB||ex[192]!==eJ||ex[193]!==eG||ex[194]!==eT||ex[195]!==eA||ex[196]!==eS.isLastSelected||ex[197]!==eS.left||ex[198]!==eS.right||ex[199]!==eO.showMarkers||ex[200]!==eP||ex[201]!==tp||ex[202]!==eF||ex[203]!==tb||ex[204]!==eB||ex[205]!==tm||ex[206]!==eV.avatarUrl||ex[207]!==eV.login||ex[208]!==eV.shouldDisplayComments||ex[209]!==eY?(eh=(eG||eS.isLastSelected&&eT&&td()?.endOrientation==="left"&&eS.left===td()?.endLineNumber||!eT&&td()?.endOrientation==="right"&&eS.right===td()?.endLineNumber)&&(0,i.jsx)(aN,{authorAvatarUrl:eV.avatarUrl,authorLogin:eV.login,ref:e7,cellId:eX,cellRef:e8,copilotChatReference:eC,currentHunk:e_,diffAnchor:eN,diffLine:eS,threads:eB,annotations:eb,enterDialogMode:tp,handleCopyCode:tW,hasDraftComment:eJ,isLeftSide:eT,isSplit:eA,nextHunk:eP,onMouseDownAddCommentButton:tM,onMouseLeaveAddCommentButton:tB,previousHunk:eF,showStartConversation:tb,shouldDisplayMinimizedComments:eV.shouldDisplayComments,shouldDisplayCollapseComments:eO.showMarkers,toggleViewingMarkers:tm,viewerData:eY}),ex[182]=eb,ex[183]=eX,ex[184]=eC,ex[185]=e_,ex[186]=eN,ex[187]=eS,ex[188]=td,ex[189]=tW,ex[190]=tM,ex[191]=tB,ex[192]=eJ,ex[193]=eG,ex[194]=eT,ex[195]=eA,ex[196]=eS.isLastSelected,ex[197]=eS.left,ex[198]=eS.right,ex[199]=eO.showMarkers,ex[200]=eP,ex[201]=tp,ex[202]=eF,ex[203]=tb,ex[204]=eB,ex[205]=tm,ex[206]=eV.avatarUrl,ex[207]=eV.login,ex[208]=eV.shouldDisplayComments,ex[209]=eY,ex[210]=eh):eh=ex[210],ex[211]!==eb||ex[212]!==eX||ex[213]!==tu||ex[214]!==th||ex[215]!==e9||ex[216]!==ew||ex[217]!==eN||ex[218]!==eI||ex[219]!==eL||ex[220]!==tI||ex[221]!==tk||ex[222]!==eJ||ex[223]!==e0||ex[224]!==eT||ex[225]!==tg||ex[226]!==eE||ex[227]!==eS||ex[228]!==e4||ex[229]!==tK||ex[230]!==ty||ex[231]!==tT||ex[232]!==tZ||ex[233]!==tJ||ex[234]!==eB||ex[235]!==eY?(ef=tT?(0,i.jsx)(ih,{gridCellId:eX,gutterSizeOffset:e9,inlineMarkersRef:ta,cellRef:e8,dispatchMarkersStatus:eI,lineMarkersKey:e4,annotations:eb,batchingEnabled:!0,conversationListThreads:eB,fileAnchor:eN,filePath:eL,onCloseFocusMode:tu,isRowSelected:eE,lineType:eS.type,diffLine:eS,shouldStartNewConversationWithSuggestedChange:ty,onCloseConversationList:th,onDeleteLineComment:tk,viewerData:eY,ghostUser:tG,children:tg&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default",(eB.length,"mt-2 mb-1")),children:(0,i.jsx)(ng,{diffLine:eS,diffAnchor:eN,batchingEnabled:!0,filePath:eL,focusOnMount:!(eJ&&ew===ib.sI.Visible),isLeftSide:!!eT,isInDialogMode:e0,isOpen:tg,lineNumber:tZ,startLineNumber:tJ,shouldStartNewConversationWithSuggestedChange:ty,viewerData:eY,onAddComment:tI,onCloseCommentDialog:tK})})}):null,ex[211]=eb,ex[212]=eX,ex[213]=tu,ex[214]=th,ex[215]=e9,ex[216]=ew,ex[217]=eN,ex[218]=eI,ex[219]=eL,ex[220]=tI,ex[221]=tk,ex[222]=eJ,ex[223]=e0,ex[224]=eT,ex[225]=tg,ex[226]=eE,ex[227]=eS,ex[228]=e4,ex[229]=tK,ex[230]=ty,ex[231]=tT,ex[232]=tZ,ex[233]=tJ,ex[234]=eB,ex[235]=eY,ex[236]=ef):ef=ex[236],ex[237]!==eb||ex[238]!==ew||ex[239]!==eJ||ex[240]!==eG||ex[241]!==eB||ex[242]!==eV.avatarUrl||ex[243]!==eV.lineSpacingPreference||ex[244]!==eV.login||ex[245]!==eV.shouldDisplayComments?(ep=!eG&&ew===ib.sI.Collapsed&&eV.shouldDisplayComments&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{"aria-hidden":"true",style:{left:"compact"===eV.lineSpacingPreference?"-8px":"-9px"},className:(0,x.$)("position-absolute top-0 d-flex user-select-none",aL),children:eJ&&(0,i.jsx)(ah,{lineSpacingPreference:eV.lineSpacingPreference,authorAvatarUrl:eV.avatarUrl,authorLogin:eV.login})}),(0,i.jsx)("div",{"aria-hidden":"true",className:(0,x.$)("position-absolute top-0 d-flex user-select-none",ak),children:(0,i.jsx)(iF,{threads:eB,annotations:eb,shouldAnimateRef:tD,lineSpacingPreference:eV.lineSpacingPreference})})]}),ex[237]=eb,ex[238]=ew,ex[239]=eJ,ex[240]=eG,ex[241]=eB,ex[242]=eV.avatarUrl,ex[243]=eV.lineSpacingPreference,ex[244]=eV.login,ex[245]=eV.shouldDisplayComments,ex[246]=ep):ep=ex[246],ex[247]!==e6||ex[248]!==e5?(eg=(0,i.jsx)(aI,{annotationCount:e6,threadCount:e5}),ex[247]=e6,ex[248]=e5,ex[249]=eg):eg=ex[249],ex[250]!==eX||ex[251]!==ej||ex[252]!==eN||ex[253]!==eS||ex[254]!==ts||ex[255]!==te||ex[256]!==tt||ex[257]!==eD||ex[258]!==tq||ex[259]!==tV||ex[260]!==tU||ex[261]!==tL||ex[262]!==tH||ex[263]!==h||ex[264]!==eT||ex[265]!==tg||ex[266]!==eE||ex[267]!==eA||ex[268]!==tz||ex[269]!==eR||ex[270]!==X||ex[271]!==en||ex[272]!==t0||ex[273]!==t1||ex[274]!==ei||ex[275]!==eu||ex[276]!==em||ex[277]!==eh||ex[278]!==ef||ex[279]!==ep||ex[280]!==eg?(ey=(0,i.jsxs)(aD,{ref:e8,cellId:eX,columnIndex:ej,commentDialogOpen:tg,diffAnchor:eN,diffLine:eS,enterDialogMode:ts,handleDiffSideCellSelectionBlocking:eD,handleExitDialogMode:tq,handleUserClosedMarkersDialog:tH,lineAnchor:eR,handleStartConversation:tL,hasThreads:h,isLeftSide:eT,isRowSelected:eE,isSplit:eA,className:X,style:en,onBlur:te,onFocus:tt,onMouseEnter:tV,onMouseLeave:tU,"aria-labelledby":t0,role:t1,children:[ei,eu,em,eh,ef,ep,eg]},tz),ex[250]=eX,ex[251]=ej,ex[252]=eN,ex[253]=eS,ex[254]=ts,ex[255]=te,ex[256]=tt,ex[257]=eD,ex[258]=tq,ex[259]=tV,ex[260]=tU,ex[261]=tL,ex[262]=tH,ex[263]=h,ex[264]=eT,ex[265]=tg,ex[266]=eE,ex[267]=eA,ex[268]=tz,ex[269]=eR,ex[270]=X,ex[271]=en,ex[272]=t0,ex[273]=t1,ex[274]=ei,ex[275]=eu,ex[276]=em,ex[277]=eh,ex[278]=ef,ex[279]=ep,ex[280]=eg,ex[281]=ey):ey=ex[281],ey}:function({ref:e,annotationsAtPosition:t,columnIndex:n,commentsPreference:a,copilotChatReference:s,currentHunk:r,diffAnchor:o,diffLine:d,dispatchMarkersStatus:u,filePath:m,handleDiffSideCellSelectionBlocking:h,isLeftSide:f,isRowSelected:p,isSplit:y,lineAnchor:b,markersStatus:j,nextHunk:w,previousHunk:C,rowId:_,subjectId:N,threadsAtPosition:S,viewerData:I}){let[L,D]=(0,A.x_)(d.html,d.type),T=D&&["+","-"].includes(D),{isActionBarVisible:E,hideActionBar:R,anyMenuOpen:O}=ik(),P=(0,eQ.u)("move_new_comments_ui"),{hasPersistedComment:F}=(0,v.L)({diffSide:f?"LEFT":"RIGHT",filePath:m,line:d.blobLineNumber,subjectId:N,fileLevelComment:!1}),M={...I,commentsPreference:a},$=(0,A.u6)(_,n),B=ee($),V=f?"LEFT":"RIGHT",q="RIGHT"===V?d.right:d.left,H=(0,A.oH)(q,V),G=S.length,K=t.length,W=(0,l.useRef)(null),Y=(0,l.useRef)(null);(0,l.useImperativeHandle)(e,()=>Y.current,[]);let X=0!==G+K,et=(0,A.S4)({hasThreads:X&&a===ib.sI.Collapsed}),{handleCellBlur:en,handleCellFocus:ei,handleCellMouseEnter:ea,handleCellMouseLeave:es}=iT({cellRef:Y});(0,l.useEffect)(()=>{if(E&&Y.current)return aO({element:Y.current,shouldIgnore:()=>{let e,t;return O||(e=g.XC?.activeElement,!!(t=Y.current)&&!!e&&(t===e||t.contains(e)))},onPointerExit:R})},[O,R,E]);let el=(0,l.useRef)(null),ed=iu($,Y,u),eu=Q(),em=z(),eh=ec(),ef=J(),ep=(0,eQ.u)("cotd_ui"),eg=(0,l.useCallback)((e=!0)=>{e&&requestAnimationFrame(()=>Y.current?.focus()),u("USER_MINIMIZED_MARKERS")},[u]),ey=(0,l.useCallback)(()=>{a===ib.sI.Collapsed&&j.showMarkers?eg():ed()},[eg,ed,j.showMarkers,a]),{closeMarkerListDialog:ex,isContextMenuOpen:ev}=iL({cellId:$,actionBarRef:W}),eb=(0,l.useCallback)(()=>{ed(),I.shouldDisplayComments||R();let e=ef();e||(e={startLineNumber:d.blobLineNumber,endLineNumber:d.blobLineNumber,startOrientation:f?"left":"right",endOrientation:f?"left":"right",diffAnchor:o});let t=new U.L(e,m);g.cg?.dispatchEvent(t)},[ed,I.shouldDisplayComments,ef,m,R,d.blobLineNumber,f,o]),{isNewConversationDialogOpen:ej,shouldStartNewConversationWithSuggestedChange:ew,startNewConversation:eC,closeNewConversation:e_}=iD({cellId:$,onOpenDialog:eb}),eN=(0,l.useMemo)(()=>{if(!E)return!1;if(!I.shouldDisplayComments)if(ep)return!(0,A.Po)(d);else return(0,A.a1)(d,(0,A.Mk)(em()));return!ej&&!!I.viewerCanComment&&(ep?!(0,A.Po)(d):(0,A.a1)(d,(0,A.Mk)(em())))},[E,ej,I.shouldDisplayComments,I.viewerCanComment,ep,d,em]),{baseOid:eS,headOid:eI}=(0,k.E4)(),{mutate:eL}=ne(),{effectiveRange:eD}=(0,k.L3)(),{newTreeEntry:eT,oldTreeEntry:eE}=eo(),eA=(0,l.useCallback)(()=>{ed?.(),eC?.()},[ed,eC]);(0,l.useEffect)(()=>{P&&d.key&&eh(H,eA,d.key)},[eh,eA,d,H,P]);let eR=(0,l.useRef)(!0),eO=(0,l.useMemo)(()=>!!I.shouldDisplayComments&&!!a&&(X&&a===ib.sI.Collapsed?!j.userMinimized:(!!ej||!!X)&&(a===ib.sI.Collapsed&&(!!ej||!!B)||a===ib.sI.Visible&&(!!X||!!ej||!!j.showMarkers)||!1)),[X,B,ej,j.showMarkers,j.userMinimized,a,I.shouldDisplayComments]),eP=(0,l.useMemo)(()=>(0,A.dT)(d),[d]),{addLineToSelection:eF,clearSelectedLines:eM,selectLine:e$}=er(),eB=Z();(0,l.useEffect)(()=>{F&&a===ib.sI.Visible&&eA()},[F,eA,a]);let eV=(0,l.useCallback)(()=>{let e=ef();return!!e&&("right"===e.endOrientation&&!f&&e.endLineNumber===d.right||!!e&&"left"===e.endOrientation&&!!f&&e.endLineNumber===d.left)},[ef,f,d.left,d.right]),eU=(0,l.useCallback)(()=>{eV()||eM()},[eM,eV]),eq=(0,k.gW)(),eH=(0,l.useCallback)(e=>{if(1!==e.buttons)return;es();let t=f?d.left:d.right,n=d.key;n&&(p||!t||eV()?eF({lineKey:n,orientation:f?"left":"right"},ek):(e$({lineKey:n,firstLineSelectionOnDrag:{lineNumber:t,orientation:f?"left":"right",lineKey:n,shouldStartConversation:!0}},ek),eq(aF(o))))},[eF,o,es,eV,f,p,d,e$,eq]),eG=(0,l.useCallback)(e=>{let t=eB();1===e.buttons&&t&&d.key&&eF({lineKey:d.key,orientation:f?"left":"right"},ek),ea()},[eF,eB,ea,f,d]),eK=(0,l.useCallback)(()=>{let e=eB();if(!e){I.shouldDisplayComments||ev||R(),es();return}let t=ef(),n=t?.startOrientation==="right"&&"right"===e.orientation&&!f&&d.right===e.lineNumber,i=t?.startOrientation==="left"&&"left"===e.orientation&&f&&d.left===e.lineNumber;n||i||es()},[eB,ef,f,d.right,d.left,I.shouldDisplayComments,ev,es,R]),eW=(0,l.useCallback)(()=>{u("USER_EXITED_MARKERS_DIALOG")},[u]),ez=(0,l.useCallback)(()=>{u("USER_MINIMIZED_MARKERS")},[u]),eZ=(0,l.useCallback)((e=!0)=>{eg(e),e_()},[eg,e_]),eJ=async()=>{let e=eu();await iw({diffLine:d,diffLines:e,getSelectedDiffLines:em,getSelectedLineRange:ef,isSplit:y,isLeftSide:f})},eY=`ContentCell-left:${d.left}-right:${d.right}-leftSide:${f}`,eX=`inline-dialog-heading-${(0,l.useId)()}`,e0=(0,l.useMemo)(()=>{if(!p)return d.blobLineNumber;let e=ef();return e?.endLineNumber??d.blobLineNumber},[ef,p,d.blobLineNumber]),e2=(0,l.useMemo)(()=>{if(!p)return;let e=ef();return e?.startLineNumber},[ef,p]);return(0,i.jsxs)(aD,{ref:Y,cellId:$,columnIndex:n,commentDialogOpen:ej,diffAnchor:o,diffLine:d,enterDialogMode:ed,handleDiffSideCellSelectionBlocking:h,handleExitDialogMode:eW,handleUserClosedMarkersDialog:ez,lineAnchor:b,handleStartConversation:eA,hasThreads:X,isLeftSide:f,isRowSelected:p,isSplit:y,className:(0,x.$)(`diff-text-cell ${f?"left-side-diff-cell":"right-side-diff-cell"} ${eP?"pt-4":""}`,{"border-right":f&&"HUNK"!==d.type}),style:{backgroundColor:(0,A.Yf)(d.type,!1,p),paddingRight:et},onBlur:en,onFocus:ei,onMouseEnter:eG,onMouseLeave:eK,"aria-labelledby":B?eX:void 0,role:B?"dialog":"gridcell",children:[B&&(0,i.jsx)("h1",{id:eX,className:"sr-only",children:"Comment view"}),(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===d.type,deletion:"DELETION"===d.type}),children:[T&&(0,i.jsx)("span",{className:"diff-text-marker",children:D}),(0,i.jsx)(e1.$6,{html:L,className:(0,x.$)("diff-text-inner",{"color-fg-muted":"HUNK"===d.type})})]}),d.displayNoNewLineWarning&&(0,i.jsx)(c.NoEntryIcon,{size:16,className:"fgColor-danger"}),(E||d.isLastSelected&&f&&ef()?.endOrientation==="left"&&d.left===ef()?.endLineNumber||!f&&ef()?.endOrientation==="right"&&d.right===ef()?.endLineNumber)&&(0,i.jsx)(aN,{authorAvatarUrl:I.avatarUrl,authorLogin:I.login,ref:W,cellId:$,cellRef:Y,copilotChatReference:s,currentHunk:r,diffAnchor:o,diffLine:d,threads:S,annotations:t,enterDialogMode:eb,handleCopyCode:eJ,hasDraftComment:F,isLeftSide:f,isSplit:y,nextHunk:w,onMouseDownAddCommentButton:eU,onMouseLeaveAddCommentButton:eH,previousHunk:C,showStartConversation:eN,shouldDisplayMinimizedComments:I.shouldDisplayComments,shouldDisplayCollapseComments:j.showMarkers,toggleViewingMarkers:ey,viewerData:M}),eO?(0,i.jsx)(ih,{gridCellId:$,gutterSizeOffset:et,inlineMarkersRef:el,cellRef:Y,dispatchMarkersStatus:u,lineMarkersKey:H,annotations:t,batchingEnabled:!0,conversationListThreads:S,fileAnchor:o,filePath:m,onCloseFocusMode:eg,isRowSelected:p,lineType:d.type,diffLine:d,shouldStartNewConversationWithSuggestedChange:ew,onCloseConversationList:ex,onDeleteLineComment:()=>{S.length<=1&&setTimeout(()=>Y.current?.focus())},viewerData:M,ghostUser:tG,children:ej&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default",(S.length,"mt-2 mb-1")),children:(0,i.jsx)(ng,{diffLine:d,diffAnchor:o,batchingEnabled:!0,filePath:m,focusOnMount:!(F&&a===ib.sI.Visible),isLeftSide:!!f,isInDialogMode:B,isOpen:ej,lineNumber:e0,startLineNumber:e2,shouldStartNewConversationWithSuggestedChange:ew,viewerData:M,onAddComment:({onCompleted:e,onError:t,submitBatch:n,text:i})=>{if(!d)return;let a=ef();if(ep){let s=new ReviewCommentFactory({filePath:m,newTreeEntry:eT,oldTreeEntry:eE,effectiveDiffRange:eD,submitBatch:n,text:i});eL(a&&nf(p,a)?s.multilineRequestData(a):s.lineRequestData(d,f),{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId),ed()}})}else{let s,r,l=!!a&&a.startLineNumber!==a.endLineNumber,o=d.blobLineNumber,c=f&&!(0,A.Ji)(d)?"left":"right";a&&l&&p&&(c="left"===a.endOrientation?"left":"right",r="left"===a.startOrientation?"left":"right",o=a.endLineNumber,s=a.startLineNumber),eL({text:i,line:o,path:m,side:c,startSide:r,submitBatch:n,startLine:s,comparisonEndOid:eI,comparisonStartOid:eS},{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment?.databaseId),ed()}})}},onCloseCommentDialog:eZ})})}):null,!E&&a===ib.sI.Collapsed&&I.shouldDisplayComments&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{"aria-hidden":"true",style:{left:"compact"===I.lineSpacingPreference?"-8px":"-9px"},className:(0,x.$)("position-absolute top-0 d-flex user-select-none",aL),children:F&&(0,i.jsx)(ah,{lineSpacingPreference:I.lineSpacingPreference,authorAvatarUrl:I.avatarUrl,authorLogin:I.login})}),(0,i.jsx)("div",{"aria-hidden":"true",className:(0,x.$)("position-absolute top-0 d-flex user-select-none",ak),children:(0,i.jsx)(iF,{threads:S,annotations:t,shouldAnimateRef:eR,lineSpacingPreference:I.lineSpacingPreference})})]}),(0,i.jsx)(aI,{annotationCount:K,threadCount:G})]},eY)},a$=(0,l.memo)(aM);try{aM.displayName||(aM.displayName="ContentCellUnmemoized")}catch{}try{a$.displayName||(a$.displayName="ContentCell")}catch{}let aB=["CONTEXT","INJECTED_CONTEXT"];function aV(e,t,n,i){return("CONTEXT"!==e.type||!t||!n)&&i>0}let aU=(0,l.memo)(aH),aq=(0,a.GV)();function aH(e){return aq?function(e){let t,n,a,r,o,d,c,u,m,h,f,p,g,y,v,b,j,w,C,_,N,S,I,L,D,T,E=(0,s.c)(74);if(E[0]!==e){let{children:i,columnIndex:s,diffAnchor:l,diffLine:x,handleDiffSideCellSelectionBlocking:b,isLeftSide:j,isRowSelected:w,isSplit:C,filePath:_,copilotChatReference:N,contentRef:S,contentColumnIndex:I,dispatchMarkersStatus:k,rowId:L,threadsAtPosition:D,annotationsAtPosition:T,...A}=e;n=i,a=s,d=l,c=x,m=b,h=j,f=w,p=C,o=S,r=I,u=k,y=L,v=D,t=T,g=A,E[0]=e,E[1]=t,E[2]=n,E[3]=a,E[4]=r,E[5]=o,E[6]=d,E[7]=c,E[8]=u,E[9]=m,E[10]=h,E[11]=f,E[12]=p,E[13]=g,E[14]=y,E[15]=v}else t=E[1],n=E[2],a=E[3],r=E[4],o=E[5],d=E[6],c=E[7],u=E[8],m=E[9],h=E[10],f=E[11],p=E[12],g=E[13],y=E[14],v=E[15];let R=(0,l.useRef)(null),O=c,P=Z(),{addLineToSelection:F}=er(),M=(0,k.gW)();E[16]!==F||E[17]!==P||E[18]!==h||E[19]!==O.key?(b=e=>{1!==e.buttons||P()&&O.key&&F({lineKey:O.key,orientation:h?"left":"right"},ek)},E[16]=F,E[17]=P,E[18]=h,E[19]=O.key,E[20]=b):b=E[20];let $=b,{selectLine:B}=er(),V=J();E[21]!==F||E[22]!==d||E[23]!==V||E[24]!==h||E[25]!==O.key||E[26]!==O.left||E[27]!==O.right||E[28]!==B||E[29]!==M?(j=e=>{if(V()&&e.shiftKey)return void F({lineKey:O.key,orientation:h?"left":"right"},ek);let t=h?O.left:O.right;t&&O.key&&(B({lineKey:O.key,firstLineSelectionOnDrag:{orientation:h?"left":"right",lineNumber:t,shouldStartConversation:!1,lineKey:O.key}},ek),M(aF(d)))},E[21]=F,E[22]=d,E[23]=V,E[24]=h,E[25]=O.key,E[26]=O.left,E[27]=O.right,E[28]=B,E[29]=M,E[30]=j):j=E[30];let U=j,q=`LineNumberCell-left:${O.left}-right:${O.right}-leftSide:${h}`;E[31]!==r||E[32]!==y?(w=(0,A.u6)(y,r),E[31]=r,E[32]=y,E[33]=w):w=E[33];let H=w,G=iu(H,o,u);E[34]!==H||E[35]!==G?(C={cellId:H,onOpenDialog:G},E[34]=H,E[35]=G,E[36]=C):C=E[36];let{startNewConversation:K}=iD(C);E[37]!==a||E[38]!==y?(_=(0,A.u6)(y,a),E[37]=a,E[38]=y,E[39]=_):_=E[39];let W=_;E[40]!==O.type?(N=(0,x.$)("diff-line-number position-relative",aB.includes(O.type)&&"diff-line-number-neutral"),E[40]=O.type,E[41]=N):N=E[41];let z=!p&&0===a,Q=v.length+t.length;return E[42]!==h||E[43]!==p||E[44]!==O||E[45]!==Q?(S=aV(O,h,p,Q),E[42]=h,E[43]=p,E[44]=O,E[45]=Q,E[46]=S):S=E[46],E[47]!==f||E[48]!==O.type?(I=(0,A.Yf)(O.type,!0,f),E[47]=f,E[48]=O.type,E[49]=I):I=E[49],E[50]!==I?(L={backgroundColor:I,textAlign:"center"},E[50]=I,E[51]=L):L=E[51],E[52]!==n?(D=(0,i.jsx)("code",{children:n}),E[52]=n,E[53]=D):D=E[53],E[54]!==W||E[55]!==a||E[56]!==d||E[57]!==c||E[58]!==G||E[59]!==m||E[60]!==U||E[61]!==$||E[62]!==h||E[63]!==f||E[64]!==p||E[65]!==q||E[66]!==g||E[67]!==K||E[68]!==L||E[69]!==D||E[70]!==N||E[71]!==z||E[72]!==S?(T=(0,i.jsx)(aD,{ref:R,cellId:W,className:N,columnIndex:a,diffAnchor:d,diffLine:c,"data-first-unified-line-number-cell":z,enterDialogMode:G,handleDiffSideCellSelectionBlocking:m,hasThreads:S,style:L,handleDiffCellMouseDown:U,handleStartConversation:K,isLeftSide:h,isRowSelected:f,isSplit:p,onMouseEnter:$,...g,children:D},q),E[54]=W,E[55]=a,E[56]=d,E[57]=c,E[58]=G,E[59]=m,E[60]=U,E[61]=$,E[62]=h,E[63]=f,E[64]=p,E[65]=q,E[66]=g,E[67]=K,E[68]=L,E[69]=D,E[70]=N,E[71]=z,E[72]=S,E[73]=T):T=E[73],T}(e):function({children:e,columnIndex:t,diffAnchor:n,diffLine:a,handleDiffSideCellSelectionBlocking:s,isLeftSide:r,isRowSelected:o,isSplit:d,filePath:c,copilotChatReference:u,contentRef:m,contentColumnIndex:h,dispatchMarkersStatus:f,rowId:p,threadsAtPosition:g,annotationsAtPosition:y,...v}){let b=(0,l.useRef)(null),j=Z(),{addLineToSelection:w}=er(),C=(0,k.gW)(),_=(0,l.useCallback)(e=>{1!==e.buttons||j()&&a.key&&w({lineKey:a.key,orientation:r?"left":"right"},ek)},[j,w,a,r]),{selectLine:N}=er(),S=J(),I=`LineNumberCell-left:${a.left}-right:${a.right}-leftSide:${r}`,L=(0,A.u6)(p,h),D=iu(L,m,f),{startNewConversation:T}=iD({cellId:L,onOpenDialog:D}),E=(0,A.u6)(p,t);return(0,i.jsx)(aD,{ref:b,cellId:E,className:(0,x.$)("diff-line-number position-relative",aB.includes(a.type)&&"diff-line-number-neutral"),columnIndex:t,diffAnchor:n,diffLine:a,"data-first-unified-line-number-cell":!d&&0===t,enterDialogMode:D,handleDiffSideCellSelectionBlocking:s,hasThreads:aV(a,r,d,g.length+y.length),style:{backgroundColor:(0,A.Yf)(a.type,!0,o),textAlign:"center"},handleDiffCellMouseDown:e=>{if(S()&&e.shiftKey)return void w({lineKey:a.key,orientation:r?"left":"right"},ek);let t=r?a.left:a.right;t&&a.key&&(N({lineKey:a.key,firstLineSelectionOnDrag:{orientation:r?"left":"right",lineNumber:t,shouldStartConversation:!1,lineKey:a.key}},ek),C(aF(n)))},handleStartConversation:T,isLeftSide:r,isRowSelected:o,isSplit:d,onMouseEnter:_,...v,children:(0,i.jsx)("code",{children:e})},I)}(e)}try{aU.displayName||(aU.displayName="LineNumberCell")}catch{}try{aH.displayName||(aH.displayName="LineNumberCellUnmemoized")}catch{}let aG=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(9),{columnIndex:r,diffAnchor:l,diffLine:o,isLeftSide:d,isSplit:c,showRightBorder:u}=e;return a[0]!==u?(t=(0,x.$)("empty-diff-line",{"border-right":u}),a[0]=u,a[1]=t):t=a[1],a[2]!==r||a[3]!==l||a[4]!==o||a[5]!==d||a[6]!==c||a[7]!==t?(n=(0,i.jsx)(aD,{className:t,columnIndex:r,diffAnchor:l,diffLine:o,isLeftSide:d,isSplit:c}),a[2]=r,a[3]=l,a[4]=o,a[5]=d,a[6]=c,a[7]=t,a[8]=n):n=a[8],n}:function({columnIndex:e,diffAnchor:t,diffLine:n,isLeftSide:a,isSplit:s,showRightBorder:r}){return(0,i.jsx)(aD,{className:(0,x.$)("empty-diff-line",{"border-right":r}),columnIndex:e,diffAnchor:t,diffLine:n,isLeftSide:a,isSplit:s})};try{aG.displayName||(aG.displayName="EmptyCell")}catch{}function aK(e,t){switch(t){case"SHOW_MARKERS":return{userMinimized:!1,showMarkers:!0};case"USER_EXPANDED_MARKERS":return{showMarkers:!0,userMinimized:!1};case"USER_MINIMIZED_MARKERS":return{userMinimized:!0,showMarkers:!1};case"USER_EXITED_MARKERS_DIALOG":return{...e,showMarkers:!1}}}let aW=(0,a.GV)()?function(e){let t,n,i,a,r=(0,s.c)(7),o=e===ib.sI.Collapsed;r[0]!==o?(t={userMinimized:o,showMarkers:!1},r[0]=o,r[1]=t):t=r[1];let[d,c]=(0,l.useReducer)(aK,t),u=(0,l.useRef)(e);return r[2]!==e?(n=()=>{u.current!==e&&(u.current=e,e===ib.sI.Visible?c("SHOW_MARKERS"):c("USER_MINIMIZED_MARKERS"))},i=[e,c],r[2]=e,r[3]=n,r[4]=i):(n=r[3],i=r[4]),(0,l.useEffect)(n,i),r[5]!==d?(a=[d,c],r[5]=d,r[6]=a):a=r[6],a}:function(e){let[t,n]=(0,l.useReducer)(aK,{userMinimized:e===ib.sI.Collapsed,showMarkers:!1}),i=(0,l.useRef)(e);return(0,l.useEffect)(()=>{i.current!==e&&(i.current=e,e===ib.sI.Visible?n("SHOW_MARKERS"):n("USER_MINIMIZED_MARKERS"))},[e,n]),[t,n]};var az=n(87825);let aQ=(0,a.GV)()?e=>{let t,n,a,r,o,d,c=(0,s.c)(67),{annotationsAtPosition:u,commentsPreference:m,copilotChatReference:h,currentHunk:f,diffAnchor:p,diffLine:g,filePath:y,lineAnchor:x,handleDiffSideCellSelectionBlocking:v,hasHiddenUnicodeCharacters:b,isLeftSide:j,isRowSelected:w,isSplit:C,nextHunk:_,previousHunk:N,rowId:S,subjectId:I,threadsAtPosition:k,viewerData:L}=e,D=(0,l.useRef)(null),T="ADDITION"!==g.type,E=!C||j,A="DELETION"!==g.type,R=!C||!j;c[0]!==v?(t=()=>{v&&v("left")},c[0]=v,c[1]=t):t=c[1];let O=t;c[2]!==v?(n=()=>{v&&v("right")},c[2]=v,c[3]=n):n=c[3];let P=n,F=C?j?1:3:2,[M,$]=aW(m??ib.sI.Visible);c[4]!==u||c[5]!==F||c[6]!==h||c[7]!==p||c[8]!==g||c[9]!==$||c[10]!==y||c[11]!==P||c[12]!==b||c[13]!==j||c[14]!==w||c[15]!==C||c[16]!==g.left||c[17]!==S||c[18]!==T||c[19]!==E||c[20]!==A||c[21]!==k?(a=E&&(0,i.jsxs)(aU,{threadsAtPosition:k,annotationsAtPosition:u,copilotChatReference:h,columnIndex:0,contentColumnIndex:F,contentRef:D,diffAnchor:p,diffLine:g,dispatchMarkersStatus:$,filePath:y,handleDiffSideCellSelectionBlocking:P,isLeftSide:j,isRowSelected:w,isSplit:C,rowId:S,children:[b&&!A&&(0,i.jsx)(aJ,{children:(0,i.jsx)(az.o,{})}),T&&g.left]}),c[4]=u,c[5]=F,c[6]=h,c[7]=p,c[8]=g,c[9]=$,c[10]=y,c[11]=P,c[12]=b,c[13]=j,c[14]=w,c[15]=C,c[16]=g.left,c[17]=S,c[18]=T,c[19]=E,c[20]=A,c[21]=k,c[22]=a):a=c[22],c[23]!==u||c[24]!==F||c[25]!==h||c[26]!==p||c[27]!==g||c[28]!==$||c[29]!==y||c[30]!==O||c[31]!==b||c[32]!==j||c[33]!==w||c[34]!==C||c[35]!==g.right||c[36]!==S||c[37]!==A||c[38]!==R||c[39]!==k?(r=R&&(0,i.jsxs)(aU,{annotationsAtPosition:u,copilotChatReference:h,columnIndex:C?2:1,contentColumnIndex:F,contentRef:D,diffAnchor:p,diffLine:g,dispatchMarkersStatus:$,filePath:y,handleDiffSideCellSelectionBlocking:O,isLeftSide:j,isRowSelected:w,isSplit:C,rowId:S,threadsAtPosition:k,children:[b&&A&&(0,i.jsx)(aJ,{children:(0,i.jsx)(az.o,{})}),A&&g.right]}),c[23]=u,c[24]=F,c[25]=h,c[26]=p,c[27]=g,c[28]=$,c[29]=y,c[30]=O,c[31]=b,c[32]=j,c[33]=w,c[34]=C,c[35]=g.right,c[36]=S,c[37]=A,c[38]=R,c[39]=k,c[40]=r):r=c[40];let B=j?P:O;return c[41]!==u||c[42]!==m||c[43]!==F||c[44]!==h||c[45]!==f||c[46]!==p||c[47]!==g||c[48]!==$||c[49]!==y||c[50]!==j||c[51]!==w||c[52]!==C||c[53]!==x||c[54]!==M||c[55]!==_||c[56]!==N||c[57]!==S||c[58]!==I||c[59]!==B||c[60]!==k||c[61]!==L?(o=(0,i.jsx)(a$,{annotationsAtPosition:u,commentsPreference:m,copilotChatReference:h,columnIndex:F,currentHunk:f,diffAnchor:p,diffLine:g,dispatchMarkersStatus:$,filePath:y,lineAnchor:x,handleDiffSideCellSelectionBlocking:B,isLeftSide:j,isRowSelected:w,isSplit:C,markersStatus:M,nextHunk:_,previousHunk:N,ref:D,rowId:S,subjectId:I,threadsAtPosition:k,viewerData:L}),c[41]=u,c[42]=m,c[43]=F,c[44]=h,c[45]=f,c[46]=p,c[47]=g,c[48]=$,c[49]=y,c[50]=j,c[51]=w,c[52]=C,c[53]=x,c[54]=M,c[55]=_,c[56]=N,c[57]=S,c[58]=I,c[59]=B,c[60]=k,c[61]=L,c[62]=o):o=c[62],c[63]!==a||c[64]!==r||c[65]!==o?(d=(0,i.jsxs)(iI,{children:[a,r,o]}),c[63]=a,c[64]=r,c[65]=o,c[66]=d):d=c[66],d}:({annotationsAtPosition:e,commentsPreference:t,copilotChatReference:n,currentHunk:a,diffAnchor:s,diffLine:r,filePath:o,lineAnchor:d,handleDiffSideCellSelectionBlocking:c,hasHiddenUnicodeCharacters:u,isLeftSide:m,isRowSelected:h,isSplit:f,nextHunk:p,previousHunk:g,rowId:y,subjectId:x,threadsAtPosition:v,viewerData:b})=>{let j=(0,l.useRef)(null),w="ADDITION"!==r.type,C=!f||m,_="DELETION"!==r.type,N=!f||!m,S=(0,l.useCallback)(()=>{c&&c("left")},[c]),I=(0,l.useCallback)(()=>{c&&c("right")},[c]),k=f?m?1:3:2,[L,D]=aW(t??ib.sI.Visible);return(0,i.jsxs)(iI,{children:[C&&(0,i.jsxs)(aU,{threadsAtPosition:v,annotationsAtPosition:e,copilotChatReference:n,columnIndex:0,contentColumnIndex:k,contentRef:j,diffAnchor:s,diffLine:r,dispatchMarkersStatus:D,filePath:o,handleDiffSideCellSelectionBlocking:I,isLeftSide:m,isRowSelected:h,isSplit:f,rowId:y,children:[u&&!_&&(0,i.jsx)(aJ,{children:(0,i.jsx)(az.o,{})}),w&&r.left]}),N&&(0,i.jsxs)(aU,{annotationsAtPosition:e,copilotChatReference:n,columnIndex:f?2:1,contentColumnIndex:k,contentRef:j,diffAnchor:s,diffLine:r,dispatchMarkersStatus:D,filePath:o,handleDiffSideCellSelectionBlocking:S,isLeftSide:m,isRowSelected:h,isSplit:f,rowId:y,threadsAtPosition:v,children:[u&&_&&(0,i.jsx)(aJ,{children:(0,i.jsx)(az.o,{})}),_&&r.right]}),(0,i.jsx)(a$,{annotationsAtPosition:e,commentsPreference:t,copilotChatReference:n,columnIndex:k,currentHunk:a,diffAnchor:s,diffLine:r,dispatchMarkersStatus:D,filePath:o,lineAnchor:d,handleDiffSideCellSelectionBlocking:m?I:S,isLeftSide:m,isRowSelected:h,isSplit:f,markersStatus:L,nextHunk:p,previousHunk:g,ref:j,rowId:y,subjectId:x,threadsAtPosition:v,viewerData:b})]})},aZ=(0,a.GV)()?e=>{let t,n=(0,s.c)(41),{annotationsAtPosition:a,commentsPreference:r,copilotChatReference:l,currentHunk:o,diffLine:d,diffAnchor:c,filePath:u,handleDiffSideCellSelectionBlocking:m,hasHiddenUnicodeCharacters:h,isLeftSide:f,isRowSelected:p,isSplit:g,nextHunk:y,previousHunk:x,rowId:v,subjectId:b,threadsAtPosition:j,viewerData:w}=e;if((0,A.Po)(d)){let e,t,a,s=2*!f;n[0]!==c||n[1]!==d||n[2]!==f||n[3]!==g||n[4]!==s?(e=(0,i.jsx)(aG,{columnIndex:s,diffAnchor:c,diffLine:d,isLeftSide:f,isSplit:g}),n[0]=c,n[1]=d,n[2]=f,n[3]=g,n[4]=s,n[5]=e):e=n[5];let r=f?1:3;return n[6]!==c||n[7]!==d||n[8]!==f||n[9]!==g||n[10]!==r?(t=(0,i.jsx)(aG,{columnIndex:r,diffAnchor:c,diffLine:d,isLeftSide:f,isSplit:g}),n[6]=c,n[7]=d,n[8]=f,n[9]=g,n[10]=r,n[11]=t):t=n[11],n[12]!==e||n[13]!==t?(a=(0,i.jsxs)(i.Fragment,{children:[e,t]}),n[12]=e,n[13]=t,n[14]=a):a=n[14],a}if(n[15]!==c||n[16]!==d.left||n[17]!==d.right||n[18]!==d.type||n[19]!==f){let e=f?"left":(0,E.XU)(d.type),i="left"===e?d.left:d.right;t=(0,E.IQ)(c,e,i??0),n[15]=c,n[16]=d.left,n[17]=d.right,n[18]=d.type,n[19]=f,n[20]=t}else t=n[20];let C=t;switch(d.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":{let e;return n[21]!==a||n[22]!==r||n[23]!==l||n[24]!==o||n[25]!==c||n[26]!==d||n[27]!==u||n[28]!==m||n[29]!==h||n[30]!==f||n[31]!==p||n[32]!==g||n[33]!==C||n[34]!==y||n[35]!==x||n[36]!==v||n[37]!==b||n[38]!==j||n[39]!==w?(e=(0,i.jsx)(aX,{annotationsAtPosition:a,commentsPreference:r,copilotChatReference:l,currentHunk:o,diffAnchor:c,diffLine:d,filePath:u,handleDiffSideCellSelectionBlocking:m,hasHiddenUnicodeCharacters:h,isLeftSide:f,isRowSelected:p,isSplit:g,lineAnchor:C,nextHunk:y,previousHunk:x,rowId:v,subjectId:b,threadsAtPosition:j,viewerData:w}),n[21]=a,n[22]=r,n[23]=l,n[24]=o,n[25]=c,n[26]=d,n[27]=u,n[28]=m,n[29]=h,n[30]=f,n[31]=p,n[32]=g,n[33]=C,n[34]=y,n[35]=x,n[36]=v,n[37]=b,n[38]=j,n[39]=w,n[40]=e):e=n[40],e}default:throw Error(`cannot handle type ${d.type}`)}}:({annotationsAtPosition:e,commentsPreference:t,copilotChatReference:n,currentHunk:a,diffLine:s,diffAnchor:r,filePath:l,handleDiffSideCellSelectionBlocking:o,hasHiddenUnicodeCharacters:d,isLeftSide:c,isRowSelected:u,isSplit:m,nextHunk:h,previousHunk:f,rowId:p,subjectId:g,threadsAtPosition:y,viewerData:x})=>{if((0,A.Po)(s))return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(aG,{columnIndex:2*!c,diffAnchor:r,diffLine:s,isLeftSide:c,isSplit:m}),(0,i.jsx)(aG,{columnIndex:c?1:3,diffAnchor:r,diffLine:s,isLeftSide:c,isSplit:m})]});let v=c?"left":(0,E.XU)(s.type),b="left"===v?s.left:s.right,j=(0,E.IQ)(r,v,b??0);switch(s.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,i.jsx)(aX,{annotationsAtPosition:e,commentsPreference:t,copilotChatReference:n,currentHunk:a,diffAnchor:r,diffLine:s,filePath:l,handleDiffSideCellSelectionBlocking:o,hasHiddenUnicodeCharacters:d,isLeftSide:c,isRowSelected:u,isSplit:m,lineAnchor:j,nextHunk:h,previousHunk:f,rowId:p,subjectId:g,threadsAtPosition:y,viewerData:x});default:throw Error(`cannot handle type ${s.type}`)}},aJ=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(3),{children:r}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={left:"-1px",zIndex:"1"},a[0]=t):t=a[0],a[1]!==r?(n=(0,i.jsx)("span",{className:"position-absolute",style:t,children:r}),a[1]=r,a[2]=n):n=a[2],n}:function({children:e}){return(0,i.jsx)("span",{className:"position-absolute",style:{left:"-1px",zIndex:"1"},children:e})},aY=l.memo(aZ),aX=l.memo(aQ);try{aQ.displayName||(aQ.displayName="CodeDiffLineUnmemoized")}catch{}try{aZ.displayName||(aZ.displayName="DiffLineSideUnmemoized")}catch{}try{aJ.displayName||(aJ.displayName="DiffCodeAlert")}catch{}try{aY.displayName||(aY.displayName="DiffLineSide")}catch{}try{aX.displayName||(aX.displayName="CodeDiffLine")}catch{}let a0=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(5),{isSplit:l}=e,o=!l&&"hunk-kebab-icon-unified";return r[0]!==o?(t=(0,x.$)("hunk-kebab-icon pr-2 pb-1",o),r[0]=o,r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(c.KebabHorizontalIcon,{}),r[2]=n):n=r[2],r[3]!==t?(a=(0,i.jsx)("div",{className:t,children:n}),r[3]=t,r[4]=a):a=r[4],a}:function({isSplit:e}){return(0,i.jsx)("div",{className:(0,x.$)("hunk-kebab-icon pr-2 pb-1",!e&&"hunk-kebab-icon-unified"),children:(0,i.jsx)(c.KebabHorizontalIcon,{})})};try{a0.displayName||(a0.displayName="HunkKebabIcon")}catch{}let a1=(0,a.GV)()?function(e){let t,n,i,a,r,o,d,c=(0,s.c)(17),[u,m]=(0,l.useState)(!1),[h,f]=(0,l.useState)(!1),p=u?0:-1;c[0]!==e?(t=t=>{e.current&&e.current.contains(t.relatedTarget)||m(!1)},c[0]=e,c[1]=t):t=c[1];let g=t;c[2]!==e?(n=()=>{e.current===document.activeElement&&m(!0)},c[2]=e,c[3]=n):n=c[3];let y=n;c[4]!==e?(i=t=>{e.current&&!e.current.contains(t.relatedTarget)&&m(!1),f(!1)},c[4]=e,c[5]=i):i=c[5];let x=i;c[6]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{e.stopPropagation(),f(!0)},c[6]=a):a=c[6];let v=a;c[7]!==g||c[8]!==y?(r={onFocus:y,onBlur:g},c[7]=g,c[8]=y,c[9]=r):r=c[9];let b=r,j=!h;c[10]!==p||c[11]!==x||c[12]!==j?(o={"aria-hidden":j,tabIndex:p,onBlur:x,onFocusCapture:v,onKeyDownCapture:a2},c[10]=p,c[11]=x,c[12]=j,c[13]=o):o=c[13];let w=o;return c[14]!==w||c[15]!==b?(d=[b,w],c[14]=w,c[15]=b,c[16]=d):d=c[16],d}:function(e){let[t,n]=(0,l.useState)(!1),[i,a]=(0,l.useState)(!1),s=(0,l.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]);return[{onFocus:(0,l.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),onBlur:s},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:(0,l.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),a(!1)},[e]),onFocusCapture:(0,l.useCallback)(e=>{e.stopPropagation(),a(!0)},[]),onKeyDownCapture:(0,l.useCallback)(e=>{tW(e.key)&&e.stopPropagation()},[])}]};function a2(e){tW(e.key)&&e.stopPropagation()}let a3=(0,a.GV)()?function(e){let t,n,a,r,o,d=(0,s.c)(18),{diffAnchor:c,diffLine:u,isLeftSide:m,isSplit:h,renderHunkButton:f}=e,p=(0,l.useRef)(null),[g,y]=a1(p);if((0,A.Po)(u))return null;let x=`HunkCell-left:${u.left}-right:${u.right}`;d[0]===Symbol.for("react.memo_cache_sentinel")?(t={backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},d[0]=t):t=d[0],d[1]!==y||d[2]!==h||d[3]!==f?(n=f?.(y)??(0,i.jsx)(a0,{isSplit:h}),d[1]=y,d[2]=h,d[3]=f,d[4]=n):n=d[4];let v=u.html;return d[5]!==v?(a=(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(e1.$6,{className:"diff-text-inner color-fg-muted",html:v})}),d[5]=v,d[6]=a):a=d[6],d[7]!==n||d[8]!==a?(r=(0,i.jsxs)("div",{className:"d-flex flex-row",children:[n,a]}),d[7]=n,d[8]=a,d[9]=r):r=d[9],d[10]!==g||d[11]!==c||d[12]!==u||d[13]!==m||d[14]!==h||d[15]!==x||d[16]!==r?(o=(0,i.jsx)(aD,{className:"diff-hunk-cell",colSpan:4,columnIndex:0,diffAnchor:c,diffLine:u,isLeftSide:m,isSplit:h,ref:p,style:t,...g,children:r},x),d[10]=g,d[11]=c,d[12]=u,d[13]=m,d[14]=h,d[15]=x,d[16]=r,d[17]=o):o=d[17],o}:function({diffAnchor:e,diffLine:t,isLeftSide:n,isSplit:a,renderHunkButton:s}){let r=(0,l.useRef)(null),[o,d]=a1(r);if((0,A.Po)(t))return null;let c=`HunkCell-left:${t.left}-right:${t.right}`;return(0,i.jsx)(aD,{className:"diff-hunk-cell",colSpan:4,columnIndex:0,diffAnchor:e,diffLine:t,isLeftSide:n,isSplit:a,ref:r,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...o,children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[s?.(d)??(0,i.jsx)(a0,{isSplit:a}),(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(e1.$6,{className:"diff-text-inner color-fg-muted",html:t.html})})]})},c)};try{a3.displayName||(a3.displayName="HunkCell")}catch{}let a4="ExpandableHunkHeaderDiffLine-module__expand-button-line--CbsbZ",a5="ExpandableHunkHeaderDiffLine-module__expand-up-and-down--amzYl",a6="ExpandableHunkHeaderDiffLine-module__expand-button-unified--pt9f0",a7=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,c,u,m,h,f,p=(0,s.c)(24);p[0]!==e?({direction:l,icon:t,isSplit:o,label:d,onClick:c,ariaLabel:a,className:r,...n}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=a,p[4]=r,p[5]=l,p[6]=o,p[7]=d,p[8]=c):(t=p[1],n=p[2],a=p[3],r=p[4],l=p[5],o=p[6],d=p[7],c=p[8]);let{sendAnalyticsEvent:g}=(0,tJ.s)();p[9]!==c||p[10]!==g?(u=()=>{c(),g("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},p[9]=c,p[10]=g,p[11]=u):u=p[11];let y=!o&&a6;p[12]!==r||p[13]!==y?(m=(0,x.$)("Button Button--iconOnly Button--invisible",a4,y,r),p[12]=r,p[13]=y,p[14]=m):m=p[14];let v=a??d;return p[15]!==t?(h=(0,i.jsx)(t,{}),p[15]=t,p[16]=h):h=p[16],p[17]!==n||p[18]!==l||p[19]!==u||p[20]!==m||p[21]!==v||p[22]!==h?(f=(0,i.jsx)("button",{onClick:u,className:m,"aria-label":v,"data-direction":l,...n,children:h}),p[17]=n,p[18]=l,p[19]=u,p[20]=m,p[21]=v,p[22]=h,p[23]=f):f=p[23],f}:function({direction:e,icon:t,isSplit:n,label:a,onClick:s,ariaLabel:r,className:l,...o}){let{sendAnalyticsEvent:d}=(0,tJ.s)();return(0,i.jsx)("button",{onClick:()=>{s(),d("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,x.$)("Button Button--iconOnly Button--invisible",a4,!n&&a6,l),"aria-label":r??a,"data-direction":e,...o,children:(0,i.jsx)(t,{})})},a8=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,u,m,h,f,p=(0,s.c)(25),{currentHunk:g,diffAnchor:y,diffLine:x,isLeftSide:v,isSplit:b,nextHunk:j,nextLine:w,previousHunk:C,prevLine:_}=e;p[0]!==g||p[1]!==j||p[2]!==C?(t={currentHunk:g,nextHunk:j,previousHunk:C},p[0]=g,p[1]=j,p[2]=C,p[3]=t):t=p[3];let{expandStartOfHunk:N,expandEndOfPreviousHunk:S}=i$(t),I=0===x.position&&0!==x.blobLineNumber||!_,k=!w,L=0===x.blobLineNumber,D=ei(),T=I||k,E=k&&_?.blobLineNumber===D;e:{if(T||x.blobLineNumber<=0){n=!1;break e}if(x.blobLineNumber-_.blobLineNumber<=20||w.blobLineNumber-x.blobLineNumber>=20){n=!0;break e}n=!1}let A=n;t:{if(T||E){a=!1;break t}if(x.blobLineNumber-_.blobLineNumber>20){a=!0;break t}a=!1}let R=a;n:{if(x.blobLineNumber<=0||L){r=!1;break n}if(I){r=!0;break n}r=!1}let O=r;i:{if(I||E){l=!1;break i}if(k){l=!0;break i}l=!1}let P=l;a:{switch(!0){case A:o="expand-all";break a;case R:o="expand-up-and-down";break a;case O:o="expand-up";break a;case P:o="expand-down";break a}o=void 0}let F=o;p[4]!==N?(d=()=>N(),p[4]=N,p[5]=d):d=p[5];let M=d;p[6]!==S?(u=()=>S(),p[6]=S,p[7]=u):u=p[7];let $=u;p[8]!==N?(m=()=>N(),p[8]=N,p[9]=m):m=p[9];let B=m,V=X();p[10]!==F||p[11]!==M||p[12]!==B||p[13]!==$||p[14]!==V||p[15]!==b||p[16]!==w?.blobLineNumber||p[17]!==_?.blobLineNumber?(h=e=>{if(V.has(i4.YR.expandLines))return null;switch(F){case"expand-all":return(0,i.jsx)(a7,{...e,direction:"all",icon:c.UnfoldIcon,isSplit:b,label:`Expand file from line ${_?.blobLineNumber||""} to line ${w?.blobLineNumber||""}`,onClick:B});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(a7,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:b,label:`Expand file down from line ${_?.blobLineNumber||""}`,className:a5,onClick:$}),(0,i.jsx)(a7,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:b,label:`Expand file up from line ${w?.blobLineNumber||""}`,className:a5,onClick:M})]});case"expand-up":return(0,i.jsx)(a7,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:b,label:`Expand file up from line ${w?.blobLineNumber||""}`,onClick:M});case"expand-down":return(0,i.jsx)(a7,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:b,label:`Expand file down from line ${_?.blobLineNumber||""}`,onClick:$});default:return null}},p[10]=F,p[11]=M,p[12]=B,p[13]=$,p[14]=V,p[15]=b,p[16]=w?.blobLineNumber,p[17]=_?.blobLineNumber,p[18]=h):h=p[18];let U=h;return p[19]!==y||p[20]!==x||p[21]!==v||p[22]!==b||p[23]!==U?(f=(0,i.jsx)(a3,{renderHunkButton:U,diffAnchor:y,diffLine:x,isLeftSide:v,isSplit:b}),p[19]=y,p[20]=x,p[21]=v,p[22]=b,p[23]=U,p[24]=f):f=p[24],f}:function({currentHunk:e,diffAnchor:t,diffLine:n,isLeftSide:a,isSplit:s,nextHunk:r,nextLine:o,previousHunk:d,prevLine:u}){let{expandStartOfHunk:m,expandEndOfPreviousHunk:h}=i$({currentHunk:e,nextHunk:r,previousHunk:d}),f=0===n.position&&0!==n.blobLineNumber||!u,p=!o,g=0===n.blobLineNumber,y=ei(),x=f||p,v=p&&u?.blobLineNumber===y,b=(0,l.useMemo)(()=>!x&&!(n.blobLineNumber<=0)&&(!!(n.blobLineNumber-u.blobLineNumber<=20)||!!(o.blobLineNumber-n.blobLineNumber>=20)),[x,n,o,u]),j=(0,l.useMemo)(()=>!x&&!v&&n.blobLineNumber-u.blobLineNumber>20,[x,v,n,u]),w=(0,l.useMemo)(()=>!(n.blobLineNumber<=0)&&!g&&!!f,[f,g,n]),C=(0,l.useMemo)(()=>!f&&!v&&!!p,[f,p,v]),_=(0,l.useMemo)(()=>{switch(!0){case b:return"expand-all";case j:return"expand-up-and-down";case w:return"expand-up";case C:return"expand-down"}},[b,j,w,C]),N=()=>m(),S=()=>h(),I=()=>m(),k=X();return(0,i.jsx)(a3,{renderHunkButton:e=>{if(k.has(i4.YR.expandLines))return null;switch(_){case"expand-all":return(0,i.jsx)(a7,{...e,direction:"all",icon:c.UnfoldIcon,isSplit:s,label:`Expand file from line ${u?.blobLineNumber||""} to line ${o?.blobLineNumber||""}`,onClick:I});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(a7,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:s,label:`Expand file down from line ${u?.blobLineNumber||""}`,className:a5,onClick:S}),(0,i.jsx)(a7,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:s,label:`Expand file up from line ${o?.blobLineNumber||""}`,className:a5,onClick:N})]});case"expand-up":return(0,i.jsx)(a7,{...e,direction:"up",icon:c.FoldUpIcon,isSplit:s,label:`Expand file up from line ${o?.blobLineNumber||""}`,onClick:N});case"expand-down":return(0,i.jsx)(a7,{...e,direction:"down",icon:c.FoldDownIcon,isSplit:s,label:`Expand file down from line ${u?.blobLineNumber||""}`,onClick:S});default:return null}},diffAnchor:t,diffLine:n,isLeftSide:a,isSplit:s})};try{a7.displayName||(a7.displayName="ExpandButtonLine")}catch{}try{a8.displayName||(a8.displayName="ExpandableHunkHeaderDiffLine")}catch{}var a9=n(12918);let se=(0,l.memo)((0,a.GV)()?function(e){let t,n,a,r,l,o,d,c,u,m,h,f=(0,s.c)(53),{copilotChatReference:p,diffHasHiddenUnicodeCharacters:g,filePath:y,handleDiffSideCellSelectionBlocking:x,hunksData:v,leftDiffLine:b,nextDiffLine:j,prevDiffLine:w,rightDiffLine:C,showHiddenUnicode:_,subjectId:N,viewerData:S}=e,I=en();f[0]!==g||f[1]!==_?(t=e=>{let t=!1;return g&&!(0,A.Po)(e)&&(t=(0,tZ.Y)(e.text),_&&t&&(e=e.html?{...e,html:(0,a9.Gx)(e.html)??e.html}:{...e,text:(0,tZ.TA)(e.text)})),[e,t]},f[0]=g,f[1]=_,f[2]=t):t=f[2];let L=t,[D,T]=L(b),[E,R]=L(C),O=es((0,A.Po)(D)?void 0:D.key),P=es((0,A.Po)(E)?void 0:E.key);e:{let e;if((0,A.Po)(D)){n=D;break e}f[3]!==D||f[4]!==O?(e={...D,...O},f[3]=D,f[4]=O,f[5]=e):e=f[5],n=e}let F=n;t:{let e;if((0,A.Po)(E)){a=E;break t}f[6]!==E||f[7]!==P?(e={...E,...P},f[6]=E,f[7]=P,f[8]=e):e=f[8],a=e}let M=a;f[9]!==F?(r=(0,A.qK)(F)&&"HUNK"===F.type,f[9]=F,f[10]=r):r=f[10];let $=r;f[11]!==I||f[12]!==b||f[13]!==C?(l=(0,A.qX)(I,b,C),f[11]=I,f[12]=b,f[13]=C,f[14]=l):l=f[14];let B=l;f[15]!==F||f[16]!==M?(o=(0,A.Po)(F)?(0,A.Po)(M)?void 0:M:F,f[15]=F,f[16]=M,f[17]=o):o=f[17];let V=o;f[18]!==D?(d=(0,A.Po)(D)?void 0:(0,A.oH)(D.left,"LEFT"),f[18]=D,f[19]=d):d=f[19];let U=d,{threads:q,annotations:H,commentsPreference:G}=(0,k.rP)(y,U??"");f[20]!==E?(c=(0,A.Po)(E)?void 0:(0,A.oH)(E.right,"RIGHT"),f[20]=E,f[21]=c):c=f[21];let K=c,{threads:W,annotations:z,commentsPreference:Q}=(0,k.rP)(y,K??""),Z=G===ib.sI.Collapsed||Q===ib.sI.Collapsed?ib.sI.Collapsed:ib.sI.Visible,J=!(((0,A.Po)(F)||!F.isSelected)&&((0,A.Po)(M)||!M.isSelected));if(!V)return null;f[22]!==V||f[23]!==v?(u=ta(V,v),f[22]=V,f[23]=v,f[24]=u):u=f[24];let{currentHunk:Y,nextHunk:X,previousHunk:ee}=u;return F?(f[25]!==p||f[26]!==Z||f[27]!==Y||f[28]!==I||f[29]!==y||f[30]!==x||f[31]!==$||f[32]!==J||f[33]!==H||f[34]!==b||f[35]!==T||f[36]!==F||f[37]!==q||f[38]!==j||f[39]!==X||f[40]!==w||f[41]!==ee||f[42]!==z||f[43]!==R||f[44]!==M||f[45]!==W||f[46]!==B||f[47]!==N||f[48]!==S?(m=$?(0,i.jsx)(a8,{currentHunk:Y,diffAnchor:I,diffLine:b,isLeftSide:!0,isSplit:!0,nextHunk:X,nextLine:j,previousHunk:ee,prevLine:w}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(aY,{annotationsAtPosition:H,commentsPreference:Z,copilotChatReference:p,currentHunk:Y,diffLine:F,diffAnchor:I,filePath:y,handleDiffSideCellSelectionBlocking:x,hasHiddenUnicodeCharacters:T,isLeftSide:!0,isRowSelected:J,isSplit:!0,nextHunk:X,previousHunk:ee,rowId:B,subjectId:N,threadsAtPosition:q,viewerData:S}),(0,i.jsx)(aY,{threadsAtPosition:W,annotationsAtPosition:z,commentsPreference:Z,copilotChatReference:p,currentHunk:Y,diffLine:M,diffAnchor:I,filePath:y,handleDiffSideCellSelectionBlocking:x,hasHiddenUnicodeCharacters:R,isLeftSide:!1,isRowSelected:J,isSplit:!0,nextHunk:X,previousHunk:ee,rowId:B,subjectId:N,viewerData:S})]}),f[25]=p,f[26]=Z,f[27]=Y,f[28]=I,f[29]=y,f[30]=x,f[31]=$,f[32]=J,f[33]=H,f[34]=b,f[35]=T,f[36]=F,f[37]=q,f[38]=j,f[39]=X,f[40]=w,f[41]=ee,f[42]=z,f[43]=R,f[44]=M,f[45]=W,f[46]=B,f[47]=N,f[48]=S,f[49]=m):m=f[49],f[50]!==B||f[51]!==m?(h=(0,i.jsx)("tr",{className:"diff-line-row",children:m},B),f[50]=B,f[51]=m,f[52]=h):h=f[52],h):null}:function({copilotChatReference:e,diffHasHiddenUnicodeCharacters:t,filePath:n,handleDiffSideCellSelectionBlocking:a,hunksData:s,leftDiffLine:r,nextDiffLine:o,prevDiffLine:d,rightDiffLine:c,showHiddenUnicode:u,subjectId:m,viewerData:h}){let f=en(),p=e=>{let n=!1;return t&&!(0,A.Po)(e)&&(n=(0,tZ.Y)(e.text),u&&n&&(e=e.html?{...e,html:(0,a9.Gx)(e.html)??e.html}:{...e,text:(0,tZ.TA)(e.text)})),[e,n]},[g,y]=p(r),[x,v]=p(c),b=es((0,A.Po)(g)?void 0:g.key),j=es((0,A.Po)(x)?void 0:x.key),w=(0,l.useMemo)(()=>(0,A.Po)(g)?g:{...g,...b},[g,b]),C=(0,l.useMemo)(()=>(0,A.Po)(x)?x:{...x,...j},[x,j]),_=(0,A.qK)(w)&&"HUNK"===w.type,N=(0,A.qX)(f,r,c),S=(0,A.Po)(w)?(0,A.Po)(C)?void 0:C:w,I=(0,A.Po)(g)?void 0:(0,A.oH)(g.left,"LEFT"),{threads:L,annotations:D,commentsPreference:T}=(0,k.rP)(n,I??""),E=(0,A.Po)(x)?void 0:(0,A.oH)(x.right,"RIGHT"),{threads:R,annotations:O,commentsPreference:P}=(0,k.rP)(n,E??""),F=T===ib.sI.Collapsed||P===ib.sI.Collapsed?ib.sI.Collapsed:ib.sI.Visible,M=(0,l.useMemo)(()=>!(((0,A.Po)(w)||!w.isSelected)&&((0,A.Po)(C)||!C.isSelected)),[w,C]);if(!S)return null;let{currentHunk:$,nextHunk:B,previousHunk:V}=ta(S,s);return w?(0,i.jsx)("tr",{className:"diff-line-row",children:_?(0,i.jsx)(a8,{currentHunk:$,diffAnchor:f,diffLine:r,isLeftSide:!0,isSplit:!0,nextHunk:B,nextLine:o,previousHunk:V,prevLine:d}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(aY,{annotationsAtPosition:D,commentsPreference:F,copilotChatReference:e,currentHunk:$,diffLine:w,diffAnchor:f,filePath:n,handleDiffSideCellSelectionBlocking:a,hasHiddenUnicodeCharacters:y,isLeftSide:!0,isRowSelected:M,isSplit:!0,nextHunk:B,previousHunk:V,rowId:N,subjectId:m,threadsAtPosition:L,viewerData:h}),(0,i.jsx)(aY,{threadsAtPosition:R,annotationsAtPosition:O,commentsPreference:F,copilotChatReference:e,currentHunk:$,diffLine:C,diffAnchor:f,filePath:n,handleDiffSideCellSelectionBlocking:a,hasHiddenUnicodeCharacters:v,isLeftSide:!1,isRowSelected:M,isSplit:!0,nextHunk:B,previousHunk:V,rowId:N,subjectId:m,viewerData:h})]})},N):null});try{se.displayName||(se.displayName="SplitDiffRow")}catch{}function st(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(o.Vv);for(;n.length<t.length;)n.push(o.Vv)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}}let sn=(0,a.GV)()?function(e){let t,n,i=(0,s.c)(5);i[0]!==e?(t=st(e),i[0]=e,i[1]=t):t=i[1];let{leftLines:a,rightLines:r}=t;return i[2]!==a||i[3]!==r?(n={leftLines:a,rightLines:r},i[2]=a,i[3]=r,i[4]=n):n=i[4],n}:function(e){let{leftLines:t,rightLines:n}=(0,l.useMemo)(()=>st(e),[e]);return{leftLines:t,rightLines:n}},si=(0,l.memo)((0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(24),{diffHasHiddenUnicodeCharacters:o,diffLines:d,fileAnchor:c,filePath:u,handleDiffSideCellSelectionBlocking:m,showHiddenUnicode:h,tableRef:f,copilotChatReference:p,subjectId:g,viewerData:y}=e,{leftLines:x,rightLines:v}=sn(d);l[0]!==x?(t=ts(x),l[0]=x,l[1]=t):t=l[1];let b=t,{addLineToSelection:j,clearSelectedLines:w,selectMultipleLines:C}=er(),_=Z();return l[2]!==j||l[3]!==w||l[4]!==c||l[5]!==_||l[6]!==x||l[7]!==v||l[8]!==C||l[9]!==f?(n={addLineToSelection:j,clearSelectedLines:w,containerRef:f,fileAnchor:c,getfirstLineSelectionOnDrag:_,isSplitDiff:!0,leftLines:x,selectMultipleLines:C,rightLines:v,disabled:!1},l[2]=j,l[3]=w,l[4]=c,l[5]=_,l[6]=x,l[7]=v,l[8]=C,l[9]=f,l[10]=n):n=l[10],tz(n),l[11]!==p||l[12]!==o||l[13]!==u||l[14]!==m||l[15]!==b||l[16]!==x||l[17]!==v||l[18]!==h||l[19]!==g||l[20]!==y?(a=x.map((e,t)=>{let n=x[t],a=v[t],s=x[t-1],r=(0,A.Po)(x[t+1])?v[t+1]:x[t+1],l=`${(0,A.Po)(n)||!n?`empty-left-diff-${t}`:n.blobLineNumber}-${(0,A.Po)(a)||!a?`empty-right-diff-${t}`:a.blobLineNumber}`;return(0,i.jsx)(se,{copilotChatReference:p,diffHasHiddenUnicodeCharacters:o,filePath:u,handleDiffSideCellSelectionBlocking:m,hunksData:b,leftDiffLine:n,nextDiffLine:r,prevDiffLine:s,rightDiffLine:a,showHiddenUnicode:h,subjectId:g,viewerData:y},l)}),l[11]=p,l[12]=o,l[13]=u,l[14]=m,l[15]=b,l[16]=x,l[17]=v,l[18]=h,l[19]=g,l[20]=y,l[21]=a):a=l[21],l[22]!==a?(r=(0,i.jsx)(i.Fragment,{children:a}),l[22]=a,l[23]=r):r=l[23],r}:function({diffHasHiddenUnicodeCharacters:e,diffLines:t,fileAnchor:n,filePath:a,handleDiffSideCellSelectionBlocking:s,showHiddenUnicode:r,tableRef:o,copilotChatReference:d,subjectId:c,viewerData:u}){let{leftLines:m,rightLines:h}=sn(t),f=(0,l.useMemo)(()=>ts(m),[m]),{addLineToSelection:p,clearSelectedLines:g,selectMultipleLines:y}=er();return tz({addLineToSelection:p,clearSelectedLines:g,containerRef:o,fileAnchor:n,getfirstLineSelectionOnDrag:Z(),isSplitDiff:!0,leftLines:m,selectMultipleLines:y,rightLines:h,disabled:!1}),(0,i.jsx)(i.Fragment,{children:m.map((t,n)=>{let l=m[n],o=h[n],p=m[n-1],g=(0,A.Po)(m[n+1])?h[n+1]:m[n+1],y=`${(0,A.Po)(l)||!l?`empty-left-diff-${n}`:l.blobLineNumber}-${(0,A.Po)(o)||!o?`empty-right-diff-${n}`:o.blobLineNumber}`;return(0,i.jsx)(se,{copilotChatReference:d,diffHasHiddenUnicodeCharacters:e,filePath:a,handleDiffSideCellSelectionBlocking:s,hunksData:f,leftDiffLine:l,nextDiffLine:g,prevDiffLine:p,rightDiffLine:o,showHiddenUnicode:r,subjectId:c,viewerData:u},y)})})});try{si.displayName||(si.displayName="SplitDiffLines")}catch{}let sa=(0,l.memo)(function({copilotChatReference:e,diffHasHiddenUnicodeCharacters:t,filePath:n,hunksData:a,currentDiffLine:s,nextDiffLine:r,prevDiffLine:o,showHiddenUnicode:d,subjectId:c,viewerData:u}){let m=en(),h=es(s.key),f=(0,l.useMemo)(()=>({...s,...h}),[s,h]),p=(0,l.useMemo)(()=>!!f.isSelected,[f.isSelected]),g="DELETION"!==s.type?"RIGHT":"LEFT",y="RIGHT"===g?s.right:s.left,x=(0,A.oH)(y,g),{threads:v,annotations:b,commentsPreference:j}=(0,k.rP)(n,x??""),w="HUNK"===f.type,C=(0,E.IQ)(m,(0,E.XU)(f.type),f.blobLineNumber),{currentHunk:_,nextHunk:N,previousHunk:S}=ta(f,a),I=(0,A.qX)(m,f,f),L=t&&(0,tZ.Y)(f.text);d&&L&&(f=f.html?{...f,html:(0,a9.Gx)(f.html)??f.html}:{...f,text:(0,tZ.TA)(f.text)});let D="DELETION"===f.type;return(0,i.jsx)("tr",{className:"diff-line-row",children:w?(0,i.jsx)(a8,{currentHunk:_,diffAnchor:m,diffLine:f,isLeftSide:D,isSplit:!1,nextHunk:N,nextLine:r,previousHunk:S,prevLine:o}):(0,i.jsx)(aX,{annotationsAtPosition:b,commentsPreference:j,copilotChatReference:e,currentHunk:_,diffAnchor:m,diffLine:f,filePath:n,hasHiddenUnicodeCharacters:L,isLeftSide:D,isRowSelected:p,isSplit:!1,lineAnchor:C,nextHunk:N,previousHunk:S,rowId:I,subjectId:c,threadsAtPosition:v,viewerData:u})},I)});try{sa.displayName||(sa.displayName="UnifiedDiffRow")}catch{}let ss=(0,l.memo)((0,a.GV)()?function(e){let t,n,a,r,l=(0,s.c)(21),{diffHasHiddenUnicodeCharacters:o,diffLines:d,fileAnchor:c,filePath:u,tableRef:m,showHiddenUnicode:h,copilotChatReference:f,subjectId:p,viewerData:g}=e;l[0]!==d?(t=ts(d.map(sr)),l[0]=d,l[1]=t):t=l[1];let y=t,{addLineToSelection:x,clearSelectedLines:v,selectMultipleLines:b}=er(),j=Z();return l[2]!==x||l[3]!==v||l[4]!==c||l[5]!==j||l[6]!==b||l[7]!==d||l[8]!==m?(n={addLineToSelection:x,clearSelectedLines:v,containerRef:m,fileAnchor:c,getfirstLineSelectionOnDrag:j,isSplitDiff:!1,leftLines:d,selectMultipleLines:b,disabled:!1},l[2]=x,l[3]=v,l[4]=c,l[5]=j,l[6]=b,l[7]=d,l[8]=m,l[9]=n):n=l[9],tz(n),l[10]!==f||l[11]!==o||l[12]!==d||l[13]!==u||l[14]!==y||l[15]!==h||l[16]!==p||l[17]!==g?(a=d.map((e,t)=>{let n=d[t+1],a=d[t-1],s=`unified-diff-row-l:${e.left}-r:${e.right}-b:${e.blobLineNumber}`;return(0,i.jsx)(sa,{copilotChatReference:f,diffHasHiddenUnicodeCharacters:o,filePath:u,hunksData:y,currentDiffLine:e,nextDiffLine:n,prevDiffLine:a,showHiddenUnicode:h,subjectId:p,viewerData:g},s)}),l[10]=f,l[11]=o,l[12]=d,l[13]=u,l[14]=y,l[15]=h,l[16]=p,l[17]=g,l[18]=a):a=l[18],l[19]!==a?(r=(0,i.jsx)(i.Fragment,{children:a}),l[19]=a,l[20]=r):r=l[20],r}:function({diffHasHiddenUnicodeCharacters:e,diffLines:t,fileAnchor:n,filePath:a,tableRef:s,showHiddenUnicode:r,copilotChatReference:o,subjectId:d,viewerData:c}){let u=(0,l.useMemo)(()=>ts(t.map(e=>e)),[t]),{addLineToSelection:m,clearSelectedLines:h,selectMultipleLines:f}=er();return tz({addLineToSelection:m,clearSelectedLines:h,containerRef:s,fileAnchor:n,getfirstLineSelectionOnDrag:Z(),isSplitDiff:!1,leftLines:t,selectMultipleLines:f,disabled:!1}),(0,i.jsx)(i.Fragment,{children:t.map((n,s)=>{let l=t[s+1],m=t[s-1],h=`unified-diff-row-l:${n.left}-r:${n.right}-b:${n.blobLineNumber}`;return(0,i.jsx)(sa,{copilotChatReference:o,diffHasHiddenUnicodeCharacters:e,filePath:a,hunksData:u,currentDiffLine:n,nextDiffLine:l,prevDiffLine:m,showHiddenUnicode:r,subjectId:d,viewerData:c},h)})})});try{ss.displayName||(ss.displayName="UnifiedDiffLines")}catch{}function sr(e){return e}let sl="DiffLines-module__tableLayoutFixed--UBX7h",so="DiffLines-module__compact--wxqBo";var sd=n(60745),sc=n(73189);let su=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(10),{hasDraftComment:r,handleMouseLeaveAddCommentButton:l,handleMouseDownAddCommentButton:o,lineSpacingPreference:d,openStartConversationDialog:u,authorLogin:m,authorAvatarUrl:h}=e,{sendAnalyticsEvent:f}=(0,tJ.s)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.$)("d-flex","flex-row",ap),a[0]=t):t=a[0],a[1]!==h||a[2]!==m||a[3]!==o||a[4]!==l||a[5]!==r||a[6]!==d||a[7]!==u||a[8]!==f?(n=(0,i.jsx)("div",{"aria-hidden":!1,className:t,children:r?(0,i.jsx)(eR.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,x.$)("py-0","compact"===d?ag:ay,ab),onClick:e=>{(0,aC.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{f("diff-lines.inp_interaction","CELL_ADD_COMMENT_BUTTON",{latency:e.latency}),(0,a_.au)({name:"PRS_ADD_COMMENT_BUTTON_CLICK",tags:{diffType:"v2"},value:e.latency})}}),u()},children:(0,i.jsx)(ah,{lineSpacingPreference:d,authorAvatarUrl:h,authorLogin:m})}):(0,i.jsx)(eR.Q,{icon:c.PlusIcon,"aria-label":"Add comment",size:"small","data-add-comment-button":!0,className:(0,x.$)("fgColor-muted","bgColor-accent-emphasis","borderColor-accent-emphasis","fgColor-onEmphasis","px-0",ax,ab,aj),onClick:u,onMouseDown:o,onMouseLeave:l,onMouseUp:u})}),a[1]=h,a[2]=m,a[3]=o,a[4]=l,a[5]=r,a[6]=d,a[7]=u,a[8]=f,a[9]=n):n=a[9],n}:function({hasDraftComment:e,handleMouseLeaveAddCommentButton:t,handleMouseDownAddCommentButton:n,lineSpacingPreference:a,openStartConversationDialog:s,authorLogin:r,authorAvatarUrl:l}){let{sendAnalyticsEvent:o}=(0,tJ.s)();return(0,i.jsx)("div",{"aria-hidden":!1,className:(0,x.$)("d-flex","flex-row",ap),children:e?(0,i.jsx)(eR.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,x.$)("py-0","compact"===a?ag:ay,ab),onClick:e=>{(0,aC.X)()?.registerCallback({event:e.nativeEvent,cb:e=>{o("diff-lines.inp_interaction","CELL_ADD_COMMENT_BUTTON",{latency:e.latency}),(0,a_.au)({name:"PRS_ADD_COMMENT_BUTTON_CLICK",tags:{diffType:"v2"},value:e.latency})}}),s()},children:(0,i.jsx)(ah,{lineSpacingPreference:a,authorAvatarUrl:l,authorLogin:r})}):(0,i.jsx)(eR.Q,{icon:c.PlusIcon,"aria-label":"Add comment",size:"small","data-add-comment-button":!0,className:(0,x.$)("fgColor-muted","bgColor-accent-emphasis","borderColor-accent-emphasis","fgColor-onEmphasis","px-0",ax,ab,aj),onClick:s,onMouseDown:n,onMouseLeave:t,onMouseUp:s})})};try{su.displayName||(su.displayName="SimpleAddCommentButton")}catch{}let sm=(0,a.GV)()?function(e){let t,n,a,r,o,d,u,m,h,f,p=(0,s.c)(53),{showStartConversation:g,viewerData:y,openStartConversationDialog:v,threads:b,annotations:j,shouldDisplayMinimizedComments:w,diffAnchor:C,diffLine:_,isLeftSide:N,isSplit:S,nextHunk:I,previousHunk:k,currentHunk:L,copilotChatReference:D,shouldDisplayCollapseComments:T,toggleViewingMarkers:E,setShouldStartNewConversationWithSuggestedChange:A,setIsContextMenuOpen:R,contextMenuOpen:O}=e,P=(0,l.useRef)(null),F=b.reduce(sh,0),M=j.length,{commentsPreference:$,lineSpacingPreference:B}=y,V=Q(),U=z(),q=J();p[0]!==_||p[1]!==V||p[2]!==U||p[3]!==q||p[4]!==N||p[5]!==S?(t=async()=>{let e=V();await iw({diffLine:_,diffLines:e,getSelectedDiffLines:U,getSelectedLineRange:q,isSplit:S,isLeftSide:N})},p[0]=_,p[1]=V,p[2]=U,p[3]=q,p[4]=N,p[5]=S,p[6]=t):t=p[6];let H=t,G=F+M>0&&$===ib.sI.Collapsed;p[7]!==j.length||p[8]!==b.length||p[9]!==E?(n=e=>{(1===b.length||1===j.length)&&e.preventDefault(),E?.()},p[7]=j.length,p[8]=b.length,p[9]=E,p[10]=n):n=p[10];let K=n;return p[11]===Symbol.for("react.memo_cache_sentinel")?(a=(0,x.$)("d-flex","flex-row",af),p[11]=a):a=p[11],p[12]!==j||p[13]!==O||p[14]!==K||p[15]!==B||p[16]!==w||p[17]!==b||p[18]!==G?(r=G&&w&&(0,i.jsx)(eR.Q,{"aria-expanded":O,"aria-label":"View comments",size:"small",className:(0,x.$)("py-0","px-1",ab),onClick:K,children:(0,i.jsx)(iF,{threads:b,annotations:j,lineSpacingPreference:B})}),p[12]=j,p[13]=O,p[14]=K,p[15]=B,p[16]=w,p[17]=b,p[18]=G,p[19]=r):r=p[19],p[20]!==O||p[21]!==R?(o=()=>R(!O),p[20]=O,p[21]=R,p[22]=o):o=p[22],p[23]===Symbol.for("react.memo_cache_sentinel")?(d=(0,x.$)("fgColor-muted",av),p[23]=d):d=p[23],p[24]!==O||p[25]!==R?(u=(0,i.jsx)(eB.W.Anchor,{children:(0,i.jsx)(eR.Q,{ref:P,"aria-haspopup":"true","aria-label":"More actions",icon:c.TriangleDownIcon,size:"small",className:d,onClick:()=>R(!O)})}),p[24]=O,p[25]=R,p[26]=u):u=p[26],p[27]!==j||p[28]!==D||p[29]!==L||p[30]!==C||p[31]!==_||p[32]!==H||p[33]!==N||p[34]!==S||p[35]!==I||p[36]!==v||p[37]!==k||p[38]!==A||p[39]!==T||p[40]!==g||p[41]!==b||p[42]!==E||p[43]!==y?(m=(0,i.jsx)(eB.W.Overlay,{width:"medium",children:(0,i.jsx)(eV.l,{children:(0,i.jsx)(i5,{threads:b,annotations:j,currentHunk:L,diffAnchor:C,diffLine:_,shouldDisplayCollapseComments:T,copilotChatReference:D,showStartConversation:g,handleCopyCode:H,handleViewMarkersSelection:E,isLeftSide:N,isSplit:S,nextHunk:I,previousHunk:k,startConversationCurrentLine:v,startConversationWithSuggestedChange:A,viewerData:y})})}),p[27]=j,p[28]=D,p[29]=L,p[30]=C,p[31]=_,p[32]=H,p[33]=N,p[34]=S,p[35]=I,p[36]=v,p[37]=k,p[38]=A,p[39]=T,p[40]=g,p[41]=b,p[42]=E,p[43]=y,p[44]=m):m=p[44],p[45]!==O||p[46]!==o||p[47]!==u||p[48]!==m?(h=(0,i.jsxs)(eB.W,{anchorRef:P,open:O,onOpenChange:o,children:[u,m]}),p[45]=O,p[46]=o,p[47]=u,p[48]=m,p[49]=h):h=p[49],p[50]!==r||p[51]!==h?(f=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{"aria-hidden":!1,className:a,children:(0,i.jsxs)(iA.A,{className:aw,children:[r,h]})})}),p[50]=r,p[51]=h,p[52]=f):f=p[52],f}:function({showStartConversation:e,viewerData:t,openStartConversationDialog:n,threads:a,annotations:s,shouldDisplayMinimizedComments:r,diffAnchor:o,diffLine:d,isLeftSide:u,isSplit:m,nextHunk:h,previousHunk:f,currentHunk:p,copilotChatReference:g,shouldDisplayCollapseComments:y,toggleViewingMarkers:v,setShouldStartNewConversationWithSuggestedChange:b,setIsContextMenuOpen:j,contextMenuOpen:w}){let C=(0,l.useRef)(null),_=a.reduce((e,t)=>e+(t.commentsData?.comments.length??0),0),N=s.length,{commentsPreference:S,lineSpacingPreference:I}=t,k=Q(),L=z(),D=J(),T=async()=>{let e=k();await iw({diffLine:d,diffLines:e,getSelectedDiffLines:L,getSelectedLineRange:D,isSplit:m,isLeftSide:u})},E=_+N>0&&S===ib.sI.Collapsed,A=(0,l.useCallback)(e=>{(1===a.length||1===s.length)&&e.preventDefault(),v?.()},[s.length,a.length,v]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{"aria-hidden":!1,className:(0,x.$)("d-flex","flex-row",af),children:(0,i.jsxs)(iA.A,{className:aw,children:[E&&r&&(0,i.jsx)(eR.Q,{"aria-expanded":w,"aria-label":"View comments",size:"small",className:(0,x.$)("py-0","px-1",ab),onClick:A,children:(0,i.jsx)(iF,{threads:a,annotations:s,lineSpacingPreference:I})}),(0,i.jsxs)(eB.W,{anchorRef:C,open:w,onOpenChange:()=>j(!w),children:[(0,i.jsx)(eB.W.Anchor,{children:(0,i.jsx)(eR.Q,{ref:C,"aria-haspopup":"true","aria-label":"More actions",icon:c.TriangleDownIcon,size:"small",className:(0,x.$)("fgColor-muted",av),onClick:()=>j(!w)})}),(0,i.jsx)(eB.W.Overlay,{width:"medium",children:(0,i.jsx)(eV.l,{children:(0,i.jsx)(i5,{threads:a,annotations:s,currentHunk:p,diffAnchor:o,diffLine:d,shouldDisplayCollapseComments:y,copilotChatReference:g,showStartConversation:e,handleCopyCode:T,handleViewMarkersSelection:v,isLeftSide:u,isSplit:m,nextHunk:h,previousHunk:f,startConversationCurrentLine:n,startConversationWithSuggestedChange:b,viewerData:t})})})]})]})})})};function sh(e,t){return e+(t.commentsData?.comments.length??0)}try{sm.displayName||(sm.displayName="SimpleContextMenu")}catch{}let sf=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h=(0,s.c)(48),{ref:f,annotations:p,authorAvatarUrl:y,authorLogin:x,copilotChatReference:v,currentHunk:b,diffAnchor:j,diffLine:w,hasDraftComment:C,handleMouseLeaveAddCommentButton:_,handleMouseDownAddCommentButton:N,isLeftSide:S,isSplit:I,nextHunk:k,previousHunk:L,shouldDisplayCollapseComments:D,shouldDisplayMinimizedComments:T,shouldDisplayComments:E,threads:A,toggleViewingMarkers:R,viewerData:O,openStartConversationDialog:P,setIsContextMenuOpen:F,setIsActionBarVisible:M,filePath:$,contextMenuOpen:B}=e,V=J();e:{if(!E){t=!0;break e}if(!O.viewerCanComment){t=!1;break e}t=!0}let q=t;h[0]!==f||h[1]!==B||h[2]!==M?(n=()=>{if(f?.current)return aO({element:f?.current,shouldIgnore:()=>B,onPointerExit:()=>M(!1)})},a=[f,B,M],h[0]=f,h[1]=B,h[2]=M,h[3]=n,h[4]=a):(n=h[3],a=h[4]),(0,l.useEffect)(n,a),h[5]!==j||h[6]!==w||h[7]!==$||h[8]!==V||h[9]!==S?(r=()=>{let e=V();e||(e={startLineNumber:w.blobLineNumber,endLineNumber:w.blobLineNumber,startOrientation:S?"left":"right",endOrientation:S?"left":"right",diffAnchor:j});let t=new U.L(e,$);g.cg?.dispatchEvent(t)},h[5]=j,h[6]=w,h[7]=$,h[8]=V,h[9]=S,h[10]=r):r=h[10];let H=r;h[11]!==y||h[12]!==x||h[13]!==N||h[14]!==_||h[15]!==C||h[16]!==H||h[17]!==P||h[18]!==q||h[19]!==O.lineSpacingPreference?(o=q&&(0,i.jsx)(su,{hasDraftComment:C,handleMouseLeaveAddCommentButton:_,handleMouseDownAddCommentButton:N,lineSpacingPreference:O.lineSpacingPreference,openStartConversationDialog:()=>{P(!1),H()},authorLogin:x,authorAvatarUrl:y}),h[11]=y,h[12]=x,h[13]=N,h[14]=_,h[15]=C,h[16]=H,h[17]=P,h[18]=q,h[19]=O.lineSpacingPreference,h[20]=o):o=h[20],h[21]!==H||h[22]!==P?(d=()=>{P(!1),H()},c=()=>{P(!0),H()},h[21]=H,h[22]=P,h[23]=d,h[24]=c):(d=h[23],c=h[24]);let G=T??!1;return h[25]!==p||h[26]!==B||h[27]!==v||h[28]!==b||h[29]!==j||h[30]!==w||h[31]!==S||h[32]!==I||h[33]!==k||h[34]!==L||h[35]!==F||h[36]!==D||h[37]!==q||h[38]!==d||h[39]!==c||h[40]!==G||h[41]!==A||h[42]!==R||h[43]!==O?(u=(0,i.jsx)(sm,{showStartConversation:q,viewerData:O,openStartConversationDialog:d,setShouldStartNewConversationWithSuggestedChange:c,setIsContextMenuOpen:F,contextMenuOpen:B,threads:A,annotations:p,shouldDisplayMinimizedComments:G,diffAnchor:j,diffLine:w,isLeftSide:S,isSplit:I,nextHunk:k,previousHunk:L,currentHunk:b,copilotChatReference:v,shouldDisplayCollapseComments:D,toggleViewingMarkers:R}),h[25]=p,h[26]=B,h[27]=v,h[28]=b,h[29]=j,h[30]=w,h[31]=S,h[32]=I,h[33]=k,h[34]=L,h[35]=F,h[36]=D,h[37]=q,h[38]=d,h[39]=c,h[40]=G,h[41]=A,h[42]=R,h[43]=O,h[44]=u):u=h[44],h[45]!==o||h[46]!==u?(m=(0,i.jsxs)(i.Fragment,{children:[o,u]}),h[45]=o,h[46]=u,h[47]=m):m=h[47],m}:function({ref:e,annotations:t,authorAvatarUrl:n,authorLogin:a,copilotChatReference:s,currentHunk:r,diffAnchor:o,diffLine:d,hasDraftComment:c,handleMouseLeaveAddCommentButton:u,handleMouseDownAddCommentButton:m,isLeftSide:h,isSplit:f,nextHunk:p,previousHunk:y,shouldDisplayCollapseComments:x,shouldDisplayMinimizedComments:v,shouldDisplayComments:b,threads:j,toggleViewingMarkers:w,viewerData:C,openStartConversationDialog:_,setIsContextMenuOpen:N,setIsActionBarVisible:S,filePath:I,contextMenuOpen:k}){let L=J(),D=(0,l.useMemo)(()=>!b||!!C.viewerCanComment,[b,C.viewerCanComment]);(0,l.useEffect)(()=>{if(e?.current)return aO({element:e?.current,shouldIgnore:()=>k,onPointerExit:()=>S(!1)})},[e,k,S]);let T=()=>{let e=L();e||(e={startLineNumber:d.blobLineNumber,endLineNumber:d.blobLineNumber,startOrientation:h?"left":"right",endOrientation:h?"left":"right",diffAnchor:o});let t=new U.L(e,I);g.cg?.dispatchEvent(t)};return(0,i.jsxs)(i.Fragment,{children:[D&&(0,i.jsx)(su,{hasDraftComment:c,handleMouseLeaveAddCommentButton:u,handleMouseDownAddCommentButton:m,lineSpacingPreference:C.lineSpacingPreference,openStartConversationDialog:()=>{_(!1),T()},authorLogin:a,authorAvatarUrl:n}),(0,i.jsx)(sm,{showStartConversation:D,viewerData:C,openStartConversationDialog:()=>{_(!1),T()},setShouldStartNewConversationWithSuggestedChange:()=>{_(!0),T()},setIsContextMenuOpen:N,contextMenuOpen:k,threads:j,annotations:t,shouldDisplayMinimizedComments:v??!1,diffAnchor:o,diffLine:d,isLeftSide:h,isSplit:f,nextHunk:p,previousHunk:y,currentHunk:r,copilotChatReference:s,shouldDisplayCollapseComments:x,toggleViewingMarkers:w})]})};sf.displayName="ActionBar";let sp=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h,f=(0,s.c)(70),{diffLine:p,nextDiffLine:g,prevDiffLine:y,filePath:v,avatarURL:b,userLogin:j,viewerCanApplySuggestion:w,handleMouseDownOnNumberCell:C,handleMouseEnterCell:_,handleMouseLeaveAddCommentButton:N,handleMouseDownAddCommentButton:S,hunksData:I,viewerCanComment:L,shouldDisplayComments:D}=e,T="HUNK"===p.type,E="ADDITION"!==p.type,R="DELETION"!==p.type,O=es(p.key),P=en();if(f[0]!==P||f[1]!==p){let e=(0,A.qX)(P,p,p);t=(0,A.u6)(e,2),f[0]=P,f[1]=p,f[2]=t}else t=f[2];let F=t,M=b??"",$=j??"",B=w??!1,V=L??!1;f[3]!==M||f[4]!==$||f[5]!==B||f[6]!==V?(n={avatarUrl:M,login:$,viewerCanApplySuggestion:B,viewerCanComment:V},f[3]=M,f[4]=$,f[5]=B,f[6]=V,f[7]=n):n=f[7];let U=n;f[8]!==p.type||f[9]!==O.isSelected?(a=(0,A.Yf)(p.type,!0,O.isSelected),f[8]=p.type,f[9]=O.isSelected,f[10]=a):a=f[10];let q=a;f[11]!==p.type||f[12]!==O.isSelected?(r=(0,A.Yf)(p.type,!1,O.isSelected),f[11]=p.type,f[12]=O.isSelected,f[13]=r):r=f[13];let H=r;f[14]!==p.html||f[15]!==p.type?(o=(0,A.x_)(p.html,p.type),f[14]=p.html,f[15]=p.type,f[16]=o):o=f[16];let[G,K]=o;f[17]!==K?(d=K&&["+","-"].includes(K),f[17]=K,f[18]=d):d=f[18];let W=d,[z,Q]=(0,l.useState)(!1),[Z,J]=(0,l.useState)(!1),[Y,X]=(0,l.useState)(!1),[et,ei]=(0,l.useState)(!1);f[19]!==p||f[20]!==I?(c=ta(p,I),f[19]=p,f[20]=I,f[21]=c):c=f[21];let{currentHunk:ea,nextHunk:er,previousHunk:el}=c,eo=`inline-dialog-heading-${(0,l.useId)()}`,ed=ee(F),ec="DELETION"!==p.type?"RIGHT":"LEFT",eu="RIGHT"===ec?p.right:p.left;f[22]!==eu||f[23]!==ec?(u=(0,A.oH)(eu,ec),f[22]=eu,f[23]=ec,f[24]=u):u=f[24];let em=u,{threads:eh,annotations:ef,commentsPreference:ep}=(0,k.rP)(v,em??""),eg=eh.length+ef.length!==0,ey=eg&&ep===ib.sI.Collapsed;f[25]!==ey?(m=(0,A.S4)({hasThreads:ey}),f[25]=ey,f[26]=m):m=f[26];let ex=m,ev=(0,l.useRef)(null),eb=(0,l.useRef)(null),[ej,ew]=(0,l.useState)(eh.length>0||ef.length>0),eC="DELETION"===p.type;return f[27]!==ef||f[28]!==b||f[29]!==F||f[30]!==H||f[31]!==ex||f[32]!==ea||f[33]!==P||f[34]!==p||f[35]!==O.isSelected||f[36]!==v||f[37]!==S||f[38]!==C||f[39]!==_||f[40]!==N||f[41]!==eg||f[42]!==eo||f[43]!==Z||f[44]!==Y||f[45]!==T||f[46]!==ed||f[47]!==eC||f[48]!==z||f[49]!==G||f[50]!==em||f[51]!==q||f[52]!==ec||f[53]!==K||f[54]!==g||f[55]!==er||f[56]!==y||f[57]!==el||f[58]!==D||f[59]!==et||f[60]!==ej||f[61]!==E||f[62]!==W||f[63]!==R||f[64]!==eh||f[65]!==j||f[66]!==w||f[67]!==L||f[68]!==U?(h=(0,i.jsx)("tr",{className:"diff-line-row",children:T?(0,i.jsx)(a8,{currentHunk:ea,diffAnchor:P,diffLine:p,isLeftSide:eC,isSplit:!1,nextHunk:er,nextLine:g,previousHunk:el,prevLine:y}):(0,i.jsxs)(i.Fragment,{children:[E?(0,i.jsx)("td",{className:"new-diff-line-number","data-diff-side":"left","data-diff-line-key":p.key,"data-line-number":p.left,"data-selected":O.isSelected,style:{backgroundColor:q},onMouseDown:C,onMouseEnter:_,children:p.left}):(0,i.jsx)("td",{style:{backgroundColor:q},"data-selected":O.isSelected,className:"new-diff-line-number empty-diff-line"}),R?(0,i.jsx)("td",{className:"new-diff-line-number","data-diff-side":"right","data-diff-line-key":p.key,"data-line-number":p.right,"data-selected":O.isSelected,style:{backgroundColor:q},onMouseDown:C,onMouseEnter:_,children:p.right}):(0,i.jsx)("td",{style:{backgroundColor:q},"data-selected":O.isSelected,className:"new-diff-line-number empty-diff-line"}),(0,i.jsxs)("td",{"data-grid-cell-id":F,className:"diff-text-cell",style:{backgroundColor:H},"data-diff-line-key":p.key,"data-diff-side":ec.toLowerCase(),"data-line-number":eC?p.left:p.right,"data-selected":O.isSelected,onMouseEnter:e=>{J(!0),_(e)},"aria-labelledby":ed?eo:void 0,role:ed?"dialog":"gridcell",ref:e=>{Z?ev.current=e:ev.current=null},children:[ed&&(0,i.jsx)("h1",{id:eo,className:"sr-only",children:"Comment view"}),(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===p.type,deletion:"DELETION"===p.type}),children:[W&&(0,i.jsx)("span",{className:"diff-text-marker",children:K}),(0,i.jsx)(e1.$6,{html:G,className:"diff-text-inner"})]}),(ej||eg)&&D?(0,i.jsx)(ih,{diffLine:p,gridCellId:F,gutterSizeOffset:ex,inlineMarkersRef:eb,cellRef:ev,fileAnchor:P,dispatchMarkersStatus:sc.l,shouldListenForEscapeKey:!0,lineMarkersKey:em,annotations:ef,conversationListThreads:eh,filePath:v,onCloseFocusMode:sc.l,isRowSelected:!1,lineType:p.type,shouldStartNewConversationWithSuggestedChange:et,viewerData:U,onCloseConversationList:()=>{Q(!1),ew(!1),ei(!1)},onDeleteLineComment:()=>{Q(!1),ew(!1),ei(!1)},children:z&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default",(eh.length,"mt-2 mb-1")),children:(0,i.jsx)(ng,{diffLine:p,diffAnchor:P,batchingEnabled:!0,filePath:v,focusOnMount:!0,isLeftSide:eC,isInDialogMode:!1,isOpen:z,lineNumber:p.blobLineNumber,shouldStartNewConversationWithSuggestedChange:et,viewerData:U,onCloseCommentDialog:()=>{Q(!1),ew(!1),ei(!1)}})})}):null,(Z||Y)&&(0,i.jsx)(sf,{openStartConversationDialog:e=>{ei(e),Q(!0),ew(!0)},authorAvatarUrl:b??"",authorLogin:j??"",ref:ev,copilotChatReference:void 0,currentHunk:ea,diffAnchor:P,diffLine:p,threads:eh,annotations:ef,hasDraftComment:!1,handleMouseLeaveAddCommentButton:N,handleMouseDownAddCommentButton:S,isLeftSide:eC,isSplit:!1,filePath:v,nextHunk:er,previousHunk:el,shouldDisplayComments:D,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,setIsContextMenuOpen:X,setIsActionBarVisible:J,contextMenuOpen:Y,toggleViewingMarkers:sc.l,viewerData:{avatarUrl:b??"",diffViewPreference:"unified",lineSpacingPreference:"compact",login:j??"",shouldDisplayComments:D??!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:L??!1,viewerCanApplySuggestion:w??!1}})]})]})}),f[27]=ef,f[28]=b,f[29]=F,f[30]=H,f[31]=ex,f[32]=ea,f[33]=P,f[34]=p,f[35]=O.isSelected,f[36]=v,f[37]=S,f[38]=C,f[39]=_,f[40]=N,f[41]=eg,f[42]=eo,f[43]=Z,f[44]=Y,f[45]=T,f[46]=ed,f[47]=eC,f[48]=z,f[49]=G,f[50]=em,f[51]=q,f[52]=ec,f[53]=K,f[54]=g,f[55]=er,f[56]=y,f[57]=el,f[58]=D,f[59]=et,f[60]=ej,f[61]=E,f[62]=W,f[63]=R,f[64]=eh,f[65]=j,f[66]=w,f[67]=L,f[68]=U,f[69]=h):h=f[69],h}:function({diffLine:e,nextDiffLine:t,prevDiffLine:n,filePath:a,avatarURL:s,userLogin:r,viewerCanApplySuggestion:o,handleMouseDownOnNumberCell:d,handleMouseEnterCell:c,handleMouseLeaveAddCommentButton:u,handleMouseDownAddCommentButton:m,hunksData:h,viewerCanComment:f,shouldDisplayComments:p}){let g="HUNK"===e.type,y="ADDITION"!==e.type,v="DELETION"!==e.type,b=es(e.key),j=en(),w=(0,A.qX)(j,e,e),C=(0,A.u6)(w,2),_={avatarUrl:s??"",login:r??"",viewerCanApplySuggestion:o??!1,viewerCanComment:f??!1},N=(0,A.Yf)(e.type,!0,b.isSelected),S=(0,A.Yf)(e.type,!1,b.isSelected),[I,L]=(0,A.x_)(e.html,e.type),D=L&&["+","-"].includes(L),[T,E]=(0,l.useState)(!1),[R,O]=(0,l.useState)(!1),[P,F]=(0,l.useState)(!1),[M,$]=(0,l.useState)(!1),{currentHunk:B,nextHunk:V,previousHunk:U}=ta(e,h),q=`inline-dialog-heading-${(0,l.useId)()}`,H=ee(C),G="DELETION"!==e.type?"RIGHT":"LEFT",K="RIGHT"===G?e.right:e.left,W=(0,A.oH)(K,G),{threads:z,annotations:Q,commentsPreference:Z}=(0,k.rP)(a,W??""),J=z.length+Q.length!==0,Y=(0,A.S4)({hasThreads:J&&Z===ib.sI.Collapsed}),X=(0,l.useRef)(null),et=(0,l.useRef)(null),[ei,ea]=(0,l.useState)(z.length>0||Q.length>0),er="DELETION"===e.type;return(0,i.jsx)("tr",{className:"diff-line-row",children:g?(0,i.jsx)(a8,{currentHunk:B,diffAnchor:j,diffLine:e,isLeftSide:er,isSplit:!1,nextHunk:V,nextLine:t,previousHunk:U,prevLine:n}):(0,i.jsxs)(i.Fragment,{children:[y?(0,i.jsx)("td",{className:"new-diff-line-number","data-diff-side":"left","data-diff-line-key":e.key,"data-line-number":e.left,"data-selected":b.isSelected,style:{backgroundColor:N},onMouseDown:d,onMouseEnter:c,children:e.left}):(0,i.jsx)("td",{style:{backgroundColor:N},"data-selected":b.isSelected,className:"new-diff-line-number empty-diff-line"}),v?(0,i.jsx)("td",{className:"new-diff-line-number","data-diff-side":"right","data-diff-line-key":e.key,"data-line-number":e.right,"data-selected":b.isSelected,style:{backgroundColor:N},onMouseDown:d,onMouseEnter:c,children:e.right}):(0,i.jsx)("td",{style:{backgroundColor:N},"data-selected":b.isSelected,className:"new-diff-line-number empty-diff-line"}),(0,i.jsxs)("td",{"data-grid-cell-id":C,className:"diff-text-cell",style:{backgroundColor:S},"data-diff-line-key":e.key,"data-diff-side":G.toLowerCase(),"data-line-number":er?e.left:e.right,"data-selected":b.isSelected,onMouseEnter:e=>{O(!0),c(e)},"aria-labelledby":H?q:void 0,role:H?"dialog":"gridcell",ref:e=>{R?X.current=e:X.current=null},children:[H&&(0,i.jsx)("h1",{id:q,className:"sr-only",children:"Comment view"}),(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===e.type,deletion:"DELETION"===e.type}),children:[D&&(0,i.jsx)("span",{className:"diff-text-marker",children:L}),(0,i.jsx)(e1.$6,{html:I,className:"diff-text-inner"})]}),(ei||J)&&p?(0,i.jsx)(ih,{diffLine:e,gridCellId:C,gutterSizeOffset:Y,inlineMarkersRef:et,cellRef:X,fileAnchor:j,dispatchMarkersStatus:sc.l,shouldListenForEscapeKey:!0,lineMarkersKey:W,annotations:Q,conversationListThreads:z,filePath:a,onCloseFocusMode:sc.l,isRowSelected:!1,lineType:e.type,shouldStartNewConversationWithSuggestedChange:M,viewerData:_,onCloseConversationList:()=>{E(!1),ea(!1),$(!1)},onDeleteLineComment:()=>{E(!1),ea(!1),$(!1)},children:T&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default",(z.length,"mt-2 mb-1")),children:(0,i.jsx)(ng,{diffLine:e,diffAnchor:j,batchingEnabled:!0,filePath:a,focusOnMount:!0,isLeftSide:er,isInDialogMode:!1,isOpen:T,lineNumber:e.blobLineNumber,shouldStartNewConversationWithSuggestedChange:M,viewerData:_,onCloseCommentDialog:()=>{E(!1),ea(!1),$(!1)}})})}):null,(R||P)&&(0,i.jsx)(sf,{openStartConversationDialog:e=>{$(e),E(!0),ea(!0)},authorAvatarUrl:s??"",authorLogin:r??"",ref:X,copilotChatReference:void 0,currentHunk:B,diffAnchor:j,diffLine:e,threads:z,annotations:Q,hasDraftComment:!1,handleMouseLeaveAddCommentButton:u,handleMouseDownAddCommentButton:m,isLeftSide:er,isSplit:!1,filePath:a,nextHunk:V,previousHunk:U,shouldDisplayComments:p,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,setIsContextMenuOpen:F,setIsActionBarVisible:O,contextMenuOpen:P,toggleViewingMarkers:sc.l,viewerData:{avatarUrl:s??"",diffViewPreference:"unified",lineSpacingPreference:"compact",login:r??"",shouldDisplayComments:p??!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:f??!1,viewerCanApplySuggestion:o??!1}})]})]})})};try{sp.displayName||(sp.displayName="SimpleUnifiedDiffRow")}catch{}let sg=(0,l.memo)(function({diffLines:e,filePath:t,avatarURL:n,userLogin:a,viewerCanApplySuggestion:s,handleMouseDownOnNumberCell:r,handleMouseEnterCell:l,handleMouseLeaveAddCommentButton:o,handleMouseDownAddCommentButton:d,viewerCanComment:c,shouldDisplayComments:u}){let m=ts(e.map(e=>e));return e.map((h,f)=>{let p=`unified-diff-row-l:${h.left}-r:${h.right}-b:${h.blobLineNumber}`,g=e[f+1],y=e[f-1];return(0,i.jsx)(sp,{hunksData:m,diffLine:h,nextDiffLine:g,prevDiffLine:y,filePath:t,handleMouseDownOnNumberCell:r,handleMouseEnterCell:l,handleMouseLeaveAddCommentButton:o,handleMouseDownAddCommentButton:d,avatarURL:n,userLogin:a,viewerCanApplySuggestion:s,viewerCanComment:c,shouldDisplayComments:u},p)})});try{sg.displayName||(sg.displayName="SimpleUnifiedDiffLines")}catch{}let sy=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u,m,h,f,p,g,y,v,b,j,w=(0,s.c)(98),{leftDiffLine:C,rightDiffLine:_,nextDiffLine:N,prevDiffLine:S,filePath:I,handleMouseDownOnNumberCell:L,handleMouseEnterCell:D,handleMouseLeaveAddCommentButton:T,handleMouseDownAddCommentButton:E,avatarURL:R,userLogin:O,viewerCanApplySuggestion:P,hunksData:F,viewerCanComment:M,shouldDisplayComments:$}=e,B=C?.type==="HUNK",V=en(),U=es(C?.key),q=es(_?.key);if(w[0]!==V||w[1]!==C||w[2]!==_){let e=(0,A.qX)(V,C??"empty-diff-line",_);t=(0,A.u6)(e,1),n=(0,A.u6)(e,3),w[0]=V,w[1]=C,w[2]=_,w[3]=t,w[4]=n}else t=w[3],n=w[4];let H=n,G=U.isSelected||q.isSelected;w[5]!==G||w[6]!==C?(a=C?(0,A.Yf)(C.type,!0,G):"",w[5]=G,w[6]=C,w[7]=a):a=w[7];let K=a;w[8]!==G||w[9]!==_?(r=_?(0,A.Yf)(_.type,!0,G):"",w[8]=G,w[9]=_,w[10]=r):r=w[10];let W=r;w[11]!==G||w[12]!==C?(o=C?(0,A.Yf)(C.type,!1,G):"",w[11]=G,w[12]=C,w[13]=o):o=w[13];let z=o;w[14]!==G||w[15]!==_?(d=_?(0,A.Yf)(_.type,!1,G):"",w[14]=G,w[15]=_,w[16]=d):d=w[16];let Q=d,Z=`inline-dialog-heading-${(0,l.useId)()}`,J=ee(t),Y=ee(H);w[17]!==C?(c=C?(0,A.x_)(C.html,C.type):[void 0,void 0],w[17]=C,w[18]=c):c=w[18];let[X,et]=c;w[19]!==et?(u=et&&["+","-"].includes(et),w[19]=et,w[20]=u):u=w[20];let ei=u;w[21]!==_?(m=_?(0,A.x_)(_.html,_.type):[void 0,void 0],w[21]=_,w[22]=m):m=w[22];let[ea,er]=m;w[23]!==er?(h=er&&["+","-"].includes(er),w[23]=er,w[24]=h):h=w[24];let el=h;w[25]!==C?(f=C?(0,A.oH)(C.left,"LEFT"):void 0,w[25]=C,w[26]=f):f=w[26];let eo=f,{threads:ed,annotations:ec}=(0,k.rP)(I,eo??""),eu=R??"",em=O??"",eh=P??!1,ef=M??!1;w[27]!==eu||w[28]!==em||w[29]!==eh||w[30]!==ef?(p={avatarUrl:eu,login:em,viewerCanApplySuggestion:eh,viewerCanComment:ef},w[27]=eu,w[28]=em,w[29]=eh,w[30]=ef,w[31]=p):p=w[31];let ep=p;w[32]!==_?(g=_?(0,A.oH)(_.right,"RIGHT"):void 0,w[32]=_,w[33]=g):g=w[33];let eg=g,{threads:ey,annotations:ex,commentsPreference:ev}=(0,k.rP)(I,eg??""),[eb,ej]=(0,l.useState)(!1),[ew,eC]=(0,l.useState)(!1),[e_,eN]=(0,l.useState)(!1),[eS,eI]=(0,l.useState)(!1),[ek,eL]=(0,l.useState)(!1),[eD,eT]=(0,l.useState)(!1),[eE,eA]=(0,l.useState)(!1),[eR,eO]=(0,l.useState)(!1),[eP,eF]=(0,l.useState)(ed.length>0||ec.length>0),[eM,e$]=(0,l.useState)(ey.length>0||ex.length>0),eB=ed.length+ec.length!==0,eV=ey.length+ex.length!==0,eU=eB&&ev===ib.sI.Collapsed;w[34]!==eU?(y=(0,A.S4)({hasThreads:eU}),w[34]=eU,w[35]=y):y=w[35];let eq=y,eH=eV&&ev===ib.sI.Collapsed;w[36]!==eH?(v=(0,A.S4)({hasThreads:eH}),w[36]=eH,w[37]=v):v=w[37];let eG=v,eK=(0,A.Po)(C)?(0,A.Po)(_)?void 0:_:C,eW=(0,l.useRef)(null),ez=(0,l.useRef)(null),eQ=(0,l.useRef)(null);if(!eK)return null;w[38]!==eK||w[39]!==F?(b=ta(eK,F),w[38]=eK,w[39]=F,w[40]=b):b=w[40];let{currentHunk:eZ,nextHunk:eJ,previousHunk:eY}=b;return w[41]!==R||w[42]!==eZ||w[43]!==V||w[44]!==I||w[45]!==E||w[46]!==L||w[47]!==D||w[48]!==T||w[49]!==eB||w[50]!==eV||w[51]!==Z||w[52]!==B||w[53]!==ew||w[54]!==e_||w[55]!==J||w[56]!==eb||w[57]!==eD||w[58]!==eE||w[59]!==Y||w[60]!==ek||w[61]!==G||w[62]!==ec||w[63]!==t||w[64]!==z||w[65]!==eq||w[66]!==C||w[67]!==X||w[68]!==eo||w[69]!==K||w[70]!==et||w[71]!==ed||w[72]!==N||w[73]!==eJ||w[74]!==S||w[75]!==eY||w[76]!==ex||w[77]!==H||w[78]!==Q||w[79]!==eG||w[80]!==_||w[81]!==ea||w[82]!==eg||w[83]!==W||w[84]!==er||w[85]!==ey||w[86]!==$||w[87]!==eS||w[88]!==eR||w[89]!==eP||w[90]!==ei||w[91]!==eM||w[92]!==el||w[93]!==O||w[94]!==P||w[95]!==M||w[96]!==ep?(j=(0,i.jsx)("tr",{className:"diff-line-row",children:B?(0,i.jsx)(a8,{currentHunk:eZ,diffAnchor:V,diffLine:C,isLeftSide:!0,isSplit:!0,nextHunk:eJ,nextLine:N,previousHunk:eY,prevLine:S}):(0,i.jsxs)(i.Fragment,{children:[C?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"new-diff-line-number","data-diff-side":"left","data-diff-line-key":C.key,"data-line-number":C.left,"data-selected":G,onMouseDown:L,onMouseEnter:D,style:{backgroundColor:K},children:C.left}),(0,i.jsxs)("td",{className:"diff-text-cell v-align-top","data-diff-line-key":C.key,"data-diff-side":"left","data-grid-cell-id":t,"data-line-number":C.left,"data-selected":G,style:{backgroundColor:z},onMouseEnter:e=>{eC(!0),D(e)},onMouseLeave:()=>eC(!1),"aria-labelledby":J?Z:void 0,role:J?"dialog":"gridcell",ref:e=>{ew?ez.current=e:ez.current=null},children:[J&&(0,i.jsx)("h1",{id:Z,className:"sr-only",children:"Comment view"}),(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===C.type,deletion:"DELETION"===C.type}),children:[ei&&(0,i.jsx)("span",{className:"diff-text-marker",children:et}),(0,i.jsx)(e1.$6,{html:X,className:"diff-text-inner"})]}),(eP||eB)&&$&&(0,i.jsx)(ih,{diffLine:C,gridCellId:t,shouldListenForEscapeKey:!0,gutterSizeOffset:eq,inlineMarkersRef:eW,cellRef:ez,fileAnchor:V,dispatchMarkersStatus:sc.l,lineMarkersKey:eo,annotations:ec,conversationListThreads:ed,filePath:I,onCloseFocusMode:sc.l,isRowSelected:!1,lineType:C.type,onCloseConversationList:()=>{ej(!1),eF(!1),eI(!1)},onDeleteLineComment:()=>{ej(!1),eF(!1),eI(!1)},viewerData:ep,children:eb&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default","mt-2 mb-1"),children:(0,i.jsx)(ng,{diffLine:C,diffAnchor:V,batchingEnabled:!0,filePath:I,focusOnMount:!0,isLeftSide:!0,isInDialogMode:!1,isOpen:!0,lineNumber:C.left??void 0,viewerData:ep,shouldStartNewConversationWithSuggestedChange:eS,onCloseCommentDialog:()=>{ej(!1),eF(!1),eI(!1)}})})}),(ew||e_)&&(0,i.jsx)(sf,{openStartConversationDialog:e=>{eI(e),ej(!0),eF(!0)},authorAvatarUrl:R??"",authorLogin:O??"",ref:ez,copilotChatReference:void 0,currentHunk:eZ,diffAnchor:V,diffLine:C,threads:ed,annotations:ec,hasDraftComment:!1,handleMouseLeaveAddCommentButton:T,handleMouseDownAddCommentButton:E,isLeftSide:!0,isSplit:!0,contextMenuOpen:e_,setIsContextMenuOpen:eN,setIsActionBarVisible:eC,nextHunk:eJ,previousHunk:eY,shouldDisplayComments:$,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,filePath:I,toggleViewingMarkers:sc.l,viewerData:{avatarUrl:R??"",diffViewPreference:"split",lineSpacingPreference:"compact",login:O??"",shouldDisplayComments:$??!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:M??!1,viewerCanApplySuggestion:P??!1}})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"new-diff-line-number empty-diff-line"}),(0,i.jsx)("td",{className:"new-diff-line-number empty-diff-line"})]}),_?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"new-diff-line-number","data-diff-side":"right","data-diff-line-key":_.key,"data-line-number":_.right,"data-selected":G,onMouseDown:L,onMouseEnter:D,style:{backgroundColor:W},children:_.right}),(0,i.jsxs)("td",{className:"diff-text-cell v-align-top","data-diff-line-key":_.key,"data-diff-side":"right","data-grid-cell-id":H,"data-line-number":_.right,"data-selected":G,style:{backgroundColor:Q},onMouseEnter:e=>{eT(!0),D(e)},onMouseLeave:()=>eT(!1),"aria-labelledby":Y?Z:void 0,role:Y?"dialog":"gridcell",ref:e=>{eD?eQ.current=e:eQ.current=null},children:[Y&&(0,i.jsx)("h1",{id:Z,className:"sr-only",children:"Comment view"}),(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===_.type,deletion:"DELETION"===_.type}),children:[el&&(0,i.jsx)("span",{className:"diff-text-marker",children:er}),(0,i.jsx)(e1.$6,{html:ea,className:"diff-text-inner"})]}),(eM||eV)&&$&&(0,i.jsx)(ih,{diffLine:_,gridCellId:H,shouldListenForEscapeKey:!0,gutterSizeOffset:eG,inlineMarkersRef:eW,cellRef:eQ,fileAnchor:V,dispatchMarkersStatus:sc.l,lineMarkersKey:eg,annotations:ex,conversationListThreads:ey,filePath:I,viewerData:ep,onCloseFocusMode:sc.l,isRowSelected:!1,lineType:_.type,onCloseConversationList:()=>{eL(!1),e$(!1),eO(!1)},onDeleteLineComment:()=>{eL(!1),e$(!1),eO(!1)},children:ek&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default","mt-2 mb-1"),children:(0,i.jsx)(ng,{diffLine:_,diffAnchor:V,batchingEnabled:!0,filePath:I,focusOnMount:!0,isLeftSide:!1,isInDialogMode:!1,isOpen:!0,shouldStartNewConversationWithSuggestedChange:eR,lineNumber:_.right??void 0,viewerData:ep,onCloseCommentDialog:()=>{eL(!1),e$(!1),eO(!1)}})})}),(eD||eE)&&(0,i.jsx)(sf,{openStartConversationDialog:e=>{eO(e),eL(!0),e$(!0)},authorAvatarUrl:R??"",authorLogin:O??"",ref:eQ,copilotChatReference:void 0,currentHunk:eZ,diffAnchor:V,diffLine:_,threads:ey,contextMenuOpen:eE,setIsContextMenuOpen:eA,setIsActionBarVisible:eT,annotations:ex,hasDraftComment:!1,handleMouseLeaveAddCommentButton:T,handleMouseDownAddCommentButton:E,isLeftSide:!1,isSplit:!0,nextHunk:eJ,previousHunk:eY,filePath:I,shouldDisplayComments:$,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:sc.l,viewerData:{avatarUrl:R??"",diffViewPreference:"split",lineSpacingPreference:"compact",login:O??"",shouldDisplayComments:$??!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:M??!1,viewerCanApplySuggestion:P??!1}})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"new-diff-line-number empty-diff-line"}),(0,i.jsx)("td",{className:"new-diff-line-number empty-diff-line"})]})]})}),w[41]=R,w[42]=eZ,w[43]=V,w[44]=I,w[45]=E,w[46]=L,w[47]=D,w[48]=T,w[49]=eB,w[50]=eV,w[51]=Z,w[52]=B,w[53]=ew,w[54]=e_,w[55]=J,w[56]=eb,w[57]=eD,w[58]=eE,w[59]=Y,w[60]=ek,w[61]=G,w[62]=ec,w[63]=t,w[64]=z,w[65]=eq,w[66]=C,w[67]=X,w[68]=eo,w[69]=K,w[70]=et,w[71]=ed,w[72]=N,w[73]=eJ,w[74]=S,w[75]=eY,w[76]=ex,w[77]=H,w[78]=Q,w[79]=eG,w[80]=_,w[81]=ea,w[82]=eg,w[83]=W,w[84]=er,w[85]=ey,w[86]=$,w[87]=eS,w[88]=eR,w[89]=eP,w[90]=ei,w[91]=eM,w[92]=el,w[93]=O,w[94]=P,w[95]=M,w[96]=ep,w[97]=j):j=w[97],j}:function({leftDiffLine:e,rightDiffLine:t,nextDiffLine:n,prevDiffLine:a,filePath:s,handleMouseDownOnNumberCell:r,handleMouseEnterCell:o,handleMouseLeaveAddCommentButton:d,handleMouseDownAddCommentButton:c,avatarURL:u,userLogin:m,viewerCanApplySuggestion:h,hunksData:f,viewerCanComment:p,shouldDisplayComments:g}){let y=e?.type==="HUNK",v=en(),b=es(e?.key),j=es(t?.key),w=(0,A.qX)(v,e??"empty-diff-line",t),C=(0,A.u6)(w,1),_=(0,A.u6)(w,3),N=b.isSelected||j.isSelected,S=e?(0,A.Yf)(e.type,!0,N):"",I=t?(0,A.Yf)(t.type,!0,N):"",L=e?(0,A.Yf)(e.type,!1,N):"",D=t?(0,A.Yf)(t.type,!1,N):"",T=`inline-dialog-heading-${(0,l.useId)()}`,E=ee(C),R=ee(_),[O,P]=e?(0,A.x_)(e.html,e.type):[void 0,void 0],F=P&&["+","-"].includes(P),[M,$]=t?(0,A.x_)(t.html,t.type):[void 0,void 0],B=$&&["+","-"].includes($),V=e?(0,A.oH)(e.left,"LEFT"):void 0,{threads:U,annotations:q}=(0,k.rP)(s,V??""),H={avatarUrl:u??"",login:m??"",viewerCanApplySuggestion:h??!1,viewerCanComment:p??!1},G=t?(0,A.oH)(t.right,"RIGHT"):void 0,{threads:K,annotations:W,commentsPreference:z}=(0,k.rP)(s,G??""),[Q,Z]=(0,l.useState)(!1),[J,Y]=(0,l.useState)(!1),[X,et]=(0,l.useState)(!1),[ei,ea]=(0,l.useState)(!1),[er,el]=(0,l.useState)(!1),[eo,ed]=(0,l.useState)(!1),[ec,eu]=(0,l.useState)(!1),[em,eh]=(0,l.useState)(!1),[ef,ep]=(0,l.useState)(U.length>0||q.length>0),[eg,ey]=(0,l.useState)(K.length>0||W.length>0),ex=U.length+q.length!==0,ev=K.length+W.length!==0,eb=(0,A.S4)({hasThreads:ex&&z===ib.sI.Collapsed}),ej=(0,A.S4)({hasThreads:ev&&z===ib.sI.Collapsed}),ew=(0,A.Po)(e)?(0,A.Po)(t)?void 0:t:e,eC=(0,l.useRef)(null),e_=(0,l.useRef)(null),eN=(0,l.useRef)(null);if(!ew)return null;let{currentHunk:eS,nextHunk:eI,previousHunk:ek}=ta(ew,f);return(0,i.jsx)("tr",{className:"diff-line-row",children:y?(0,i.jsx)(a8,{currentHunk:eS,diffAnchor:v,diffLine:e,isLeftSide:!0,isSplit:!0,nextHunk:eI,nextLine:n,previousHunk:ek,prevLine:a}):(0,i.jsxs)(i.Fragment,{children:[e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"new-diff-line-number","data-diff-side":"left","data-diff-line-key":e.key,"data-line-number":e.left,"data-selected":N,onMouseDown:r,onMouseEnter:o,style:{backgroundColor:S},children:e.left}),(0,i.jsxs)("td",{className:"diff-text-cell v-align-top","data-diff-line-key":e.key,"data-diff-side":"left","data-grid-cell-id":C,"data-line-number":e.left,"data-selected":N,style:{backgroundColor:L},onMouseEnter:e=>{Y(!0),o(e)},onMouseLeave:()=>Y(!1),"aria-labelledby":E?T:void 0,role:E?"dialog":"gridcell",ref:e=>{J?e_.current=e:e_.current=null},children:[E&&(0,i.jsx)("h1",{id:T,className:"sr-only",children:"Comment view"}),(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===e.type,deletion:"DELETION"===e.type}),children:[F&&(0,i.jsx)("span",{className:"diff-text-marker",children:P}),(0,i.jsx)(e1.$6,{html:O,className:"diff-text-inner"})]}),(ef||ex)&&g&&(0,i.jsx)(ih,{diffLine:e,gridCellId:C,shouldListenForEscapeKey:!0,gutterSizeOffset:eb,inlineMarkersRef:eC,cellRef:e_,fileAnchor:v,dispatchMarkersStatus:sc.l,lineMarkersKey:V,annotations:q,conversationListThreads:U,filePath:s,onCloseFocusMode:sc.l,isRowSelected:!1,lineType:e.type,onCloseConversationList:()=>{Z(!1),ep(!1),ea(!1)},onDeleteLineComment:()=>{Z(!1),ep(!1),ea(!1)},viewerData:H,children:Q&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default","mt-2 mb-1"),children:(0,i.jsx)(ng,{diffLine:e,diffAnchor:v,batchingEnabled:!0,filePath:s,focusOnMount:!0,isLeftSide:!0,isInDialogMode:!1,isOpen:!0,lineNumber:e.left??void 0,viewerData:H,shouldStartNewConversationWithSuggestedChange:ei,onCloseCommentDialog:()=>{Z(!1),ep(!1),ea(!1)}})})}),(J||X)&&(0,i.jsx)(sf,{openStartConversationDialog:e=>{ea(e),Z(!0),ep(!0)},authorAvatarUrl:u??"",authorLogin:m??"",ref:e_,copilotChatReference:void 0,currentHunk:eS,diffAnchor:v,diffLine:e,threads:U,annotations:q,hasDraftComment:!1,handleMouseLeaveAddCommentButton:d,handleMouseDownAddCommentButton:c,isLeftSide:!0,isSplit:!0,contextMenuOpen:X,setIsContextMenuOpen:et,setIsActionBarVisible:Y,nextHunk:eI,previousHunk:ek,shouldDisplayComments:g,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,filePath:s,toggleViewingMarkers:sc.l,viewerData:{avatarUrl:u??"",diffViewPreference:"split",lineSpacingPreference:"compact",login:m??"",shouldDisplayComments:g??!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:p??!1,viewerCanApplySuggestion:h??!1}})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"new-diff-line-number empty-diff-line"}),(0,i.jsx)("td",{className:"new-diff-line-number empty-diff-line"})]}),t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"new-diff-line-number","data-diff-side":"right","data-diff-line-key":t.key,"data-line-number":t.right,"data-selected":N,onMouseDown:r,onMouseEnter:o,style:{backgroundColor:I},children:t.right}),(0,i.jsxs)("td",{className:"diff-text-cell v-align-top","data-diff-line-key":t.key,"data-diff-side":"right","data-grid-cell-id":_,"data-line-number":t.right,"data-selected":N,style:{backgroundColor:D},onMouseEnter:e=>{ed(!0),o(e)},onMouseLeave:()=>ed(!1),"aria-labelledby":R?T:void 0,role:R?"dialog":"gridcell",ref:e=>{eo?eN.current=e:eN.current=null},children:[R&&(0,i.jsx)("h1",{id:T,className:"sr-only",children:"Comment view"}),(0,i.jsxs)("code",{className:(0,x.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===t.type,deletion:"DELETION"===t.type}),children:[B&&(0,i.jsx)("span",{className:"diff-text-marker",children:$}),(0,i.jsx)(e1.$6,{html:M,className:"diff-text-inner"})]}),(eg||ev)&&g&&(0,i.jsx)(ih,{diffLine:t,gridCellId:_,shouldListenForEscapeKey:!0,gutterSizeOffset:ej,inlineMarkersRef:eC,cellRef:eN,fileAnchor:v,dispatchMarkersStatus:sc.l,lineMarkersKey:G,annotations:W,conversationListThreads:K,filePath:s,viewerData:H,onCloseFocusMode:sc.l,isRowSelected:!1,lineType:t.type,onCloseConversationList:()=>{el(!1),ey(!1),eh(!1)},onDeleteLineComment:()=>{el(!1),ey(!1),eh(!1)},children:er&&(0,i.jsx)("div",{className:(0,x.$)(" border rounded-2 color-border-default","mt-2 mb-1"),children:(0,i.jsx)(ng,{diffLine:t,diffAnchor:v,batchingEnabled:!0,filePath:s,focusOnMount:!0,isLeftSide:!1,isInDialogMode:!1,isOpen:!0,shouldStartNewConversationWithSuggestedChange:em,lineNumber:t.right??void 0,viewerData:H,onCloseCommentDialog:()=>{el(!1),ey(!1),eh(!1)}})})}),(eo||ec)&&(0,i.jsx)(sf,{openStartConversationDialog:e=>{eh(e),el(!0),ey(!0)},authorAvatarUrl:u??"",authorLogin:m??"",ref:eN,copilotChatReference:void 0,currentHunk:eS,diffAnchor:v,diffLine:t,threads:K,contextMenuOpen:ec,setIsContextMenuOpen:eu,setIsActionBarVisible:ed,annotations:W,hasDraftComment:!1,handleMouseLeaveAddCommentButton:d,handleMouseDownAddCommentButton:c,isLeftSide:!1,isSplit:!0,nextHunk:eI,previousHunk:ek,filePath:s,shouldDisplayComments:g,shouldDisplayMinimizedComments:!1,shouldDisplayCollapseComments:!0,toggleViewingMarkers:sc.l,viewerData:{avatarUrl:u??"",diffViewPreference:"split",lineSpacingPreference:"compact",login:m??"",shouldDisplayComments:g??!0,shouldDisplayEditOptions:!0,tabSizePreference:8,viewerCanComment:p??!1,viewerCanApplySuggestion:h??!1}})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{className:"new-diff-line-number empty-diff-line"}),(0,i.jsx)("td",{className:"new-diff-line-number empty-diff-line"})]})]})})};try{sy.displayName||(sy.displayName="SimpleSplitDiffRow")}catch{}function sx(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(void 0);for(;n.length<t.length;)n.push(void 0)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}}let sv=(0,a.GV)()?function(e){let t,n,i=(0,s.c)(5);i[0]!==e?(t=sx(e),i[0]=e,i[1]=t):t=i[1];let{leftLines:a,rightLines:r}=t;return i[2]!==a||i[3]!==r?(n={leftLines:a,rightLines:r},i[2]=a,i[3]=r,i[4]=n):n=i[4],n}:function(e){let{leftLines:t,rightLines:n}=(0,l.useMemo)(()=>sx(e),[e]);return{leftLines:t,rightLines:n}},sb=(0,l.memo)((0,a.GV)()?function(e){let t,n,a=(0,s.c)(16),{diffLines:r,filePath:l,avatarURL:o,userLogin:d,viewerCanApplySuggestion:c,handleMouseDownOnNumberCell:u,handleMouseEnterCell:m,handleMouseLeaveAddCommentButton:h,handleMouseDownAddCommentButton:f,viewerCanComment:p,shouldDisplayComments:g}=e,{leftLines:y,rightLines:x}=sv(r);a[0]!==r?(t=ts(r.map(sj)),a[0]=r,a[1]=t):t=a[1];let v=t;return a[2]!==o||a[3]!==l||a[4]!==f||a[5]!==u||a[6]!==m||a[7]!==h||a[8]!==v||a[9]!==y||a[10]!==x||a[11]!==g||a[12]!==d||a[13]!==c||a[14]!==p?(n=y.map((e,t)=>{let n=y[t],a=x[t],s=y[t-1],r=(0,A.Po)(y[t+1])?x[t+1]:y[t+1],b=`${(0,A.Po)(n)||!n?`empty-left-diff-${t}`:n.blobLineNumber}-${(0,A.Po)(a)||!a?`empty-right-diff-${t}`:a.blobLineNumber}`;return(0,i.jsx)(sy,{hunksData:v,leftDiffLine:n,rightDiffLine:a,prevDiffLine:s,nextDiffLine:r,filePath:l,handleMouseDownOnNumberCell:u,handleMouseEnterCell:m,handleMouseLeaveAddCommentButton:h,handleMouseDownAddCommentButton:f,avatarURL:o,userLogin:d,viewerCanApplySuggestion:c,viewerCanComment:p,shouldDisplayComments:g},b)}),a[2]=o,a[3]=l,a[4]=f,a[5]=u,a[6]=m,a[7]=h,a[8]=v,a[9]=y,a[10]=x,a[11]=g,a[12]=d,a[13]=c,a[14]=p,a[15]=n):n=a[15],n}:function({diffLines:e,filePath:t,avatarURL:n,userLogin:a,viewerCanApplySuggestion:s,handleMouseDownOnNumberCell:r,handleMouseEnterCell:l,handleMouseLeaveAddCommentButton:o,handleMouseDownAddCommentButton:d,viewerCanComment:c,shouldDisplayComments:u}){let{leftLines:m,rightLines:h}=sv(e),f=ts(e.map(e=>e));return m.map((e,p)=>{let g=m[p],y=h[p],x=m[p-1],v=(0,A.Po)(m[p+1])?h[p+1]:m[p+1],b=`${(0,A.Po)(g)||!g?`empty-left-diff-${p}`:g.blobLineNumber}-${(0,A.Po)(y)||!y?`empty-right-diff-${p}`:y.blobLineNumber}`;return(0,i.jsx)(sy,{hunksData:f,leftDiffLine:g,rightDiffLine:y,prevDiffLine:x,nextDiffLine:v,filePath:t,handleMouseDownOnNumberCell:r,handleMouseEnterCell:l,handleMouseLeaveAddCommentButton:o,handleMouseDownAddCommentButton:d,avatarURL:n,userLogin:a,viewerCanApplySuggestion:s,viewerCanComment:c,shouldDisplayComments:u},b)})});try{sb.displayName||(sb.displayName="SimpleSplitDiffLines")}catch{}function sj(e){return e}let sw=(0,a.GV)()?function(e){let t,n=(0,s.c)(3),{diffAnchor:a,children:r}=e;return n[0]!==r||n[1]!==a?(t=(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":a,children:r}),n[0]=r,n[1]=a,n[2]=t):t=n[2],t}:function({diffAnchor:e,children:t}){return(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})},sC=(0,l.memo)((0,a.GV)()?function(e){let t,n=(0,s.c)(40),{diffEntryData:a,diffLinesManuallyUnhidden:r,baseHelpUrl:l,onHandleLoadDiff:o,copilotChatReference:d,hasExpandedAllRanges:c,isSplitView:u,subjectId:m,tableAriaLabel:h,viewerData:f}=e,p=`diff-${a.pathDigest}`;if(a.isBinary){let e;return n[0]!==p?(e=(0,i.jsx)(sw,{diffAnchor:p,children:"Binary file not shown."}),n[0]=p,n[1]=e):e=n[1],e}if((0,e6.dK)(a)){let e;return n[2]!==p?(e=(0,i.jsx)(sw,{diffAnchor:p,children:"File renamed without changes."}),n[2]=p,n[3]=e):e=n[3],e}if((0,e6.Jc)(a)){let e;return n[4]!==p?(e=(0,i.jsx)(sw,{diffAnchor:p,children:"File copied without changes."}),n[4]=p,n[5]=e):e=n[5],e}if((0,e6.Sn)(a,a.status,a.oldTreeEntry?.mode,a.newTreeEntry?.mode)){let e;return n[6]!==p?(e=(0,i.jsx)(sw,{diffAnchor:p,children:"File mode changed."}),n[6]=p,n[7]=e):e=n[7],e}if(!r&&(0,e6.HI)(a)){let e,t,s=a.truncatedReason;return n[8]!==s?(e=(0,e6.l_)(s),n[8]=s,n[9]=e):e=n[9],n[10]!==p||n[11]!==o||n[12]!==e?(t=(0,i.jsx)(tt,{diffAnchor:p,onLoadDiff:o,children:e}),n[10]=p,n[11]=o,n[12]=e,n[13]=t):t=n[13],t}if((0,e6.s8)(a)){let e;return n[14]!==p?(e=(0,i.jsx)(sw,{diffAnchor:p,children:"Whitespace-only changes."}),n[14]=p,n[15]=e):e=n[15],e}if(!r&&(0,e6.lO)(a)){let e;return n[16]!==p||n[17]!==o?(e=(0,i.jsx)(tt,{diffAnchor:p,onLoadDiff:o,children:"This file was deleted."}),n[16]=p,n[17]=o,n[18]=e):e=n[18],e}if(!r&&(0,e6.xW)(a)){let e,t=`${l}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`;return n[19]!==p||n[20]!==o||n[21]!==t?(e=(0,i.jsxs)(tt,{diffAnchor:p,helpText:"customizing how changed files appear on GitHub.",helpUrl:t,onLoadDiff:o,children:["Some generated files are not rendered by default. Learn more about"," "]}),n[19]=p,n[20]=o,n[21]=t,n[22]=e):e=n[22],e}if(a.isTooBig&&0===a.diffLines.length)if(r){let e,t,a=`${l}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`;return n[23]!==a?(e=(0,i.jsx)(e8.A,{inline:!0,href:a,children:"check out this pull request locally."}),n[23]=a,n[24]=e):e=n[24],n[25]!==p||n[26]!==e?(t=(0,i.jsxs)(sw,{diffAnchor:p,children:["Diff is too big to render. To view,"," ",e]}),n[25]=p,n[26]=e,n[27]=t):t=n[27],t}else{let e;return n[28]!==p||n[29]!==o?(e=(0,i.jsx)(tt,{diffAnchor:p,onLoadDiff:o,children:"Large diffs are not rendered by default."}),n[28]=p,n[29]=o,n[30]=e):e=n[30],e}return a.diffLines?(n[31]!==d||n[32]!==p||n[33]!==a||n[34]!==c||n[35]!==u||n[36]!==m||n[37]!==h||n[38]!==f?(t=(0,i.jsx)(s_,{diffAnchor:p,diffEntryData:a,viewerData:f,copilotChatReference:d,hasExpandedAllRanges:c,isSplitView:u,subjectId:m,tableAriaLabel:h}),n[31]=d,n[32]=p,n[33]=a,n[34]=c,n[35]=u,n[36]=m,n[37]=h,n[38]=f,n[39]=t):t=n[39],t):null}:function({diffEntryData:e,diffLinesManuallyUnhidden:t,baseHelpUrl:n,onHandleLoadDiff:a,copilotChatReference:s,hasExpandedAllRanges:r,isSplitView:l,subjectId:o,tableAriaLabel:d,viewerData:c}){let u=`diff-${e.pathDigest}`;if(e.isBinary)return(0,i.jsx)(sw,{diffAnchor:u,children:"Binary file not shown."});if((0,e6.dK)(e))return(0,i.jsx)(sw,{diffAnchor:u,children:"File renamed without changes."});if((0,e6.Jc)(e))return(0,i.jsx)(sw,{diffAnchor:u,children:"File copied without changes."});if((0,e6.Sn)(e,e.status,e.oldTreeEntry?.mode,e.newTreeEntry?.mode))return(0,i.jsx)(sw,{diffAnchor:u,children:"File mode changed."});if(!t&&(0,e6.HI)(e))return(0,i.jsx)(tt,{diffAnchor:u,onLoadDiff:a,children:(0,e6.l_)(e.truncatedReason)});if((0,e6.s8)(e))return(0,i.jsx)(sw,{diffAnchor:u,children:"Whitespace-only changes."});if(!t&&(0,e6.lO)(e))return(0,i.jsx)(tt,{diffAnchor:u,onLoadDiff:a,children:"This file was deleted."});if(!t&&(0,e6.xW)(e))return(0,i.jsxs)(tt,{diffAnchor:u,helpText:"customizing how changed files appear on GitHub.",helpUrl:`${n}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:a,children:["Some generated files are not rendered by default. Learn more about"," "]});if(e.isTooBig&&0===e.diffLines.length)if(t)return(0,i.jsxs)(sw,{diffAnchor:u,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(e8.A,{inline:!0,href:`${n}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});else return(0,i.jsx)(tt,{diffAnchor:u,onLoadDiff:a,children:"Large diffs are not rendered by default."});return e.diffLines?(0,i.jsx)(s_,{diffAnchor:u,diffEntryData:e,viewerData:c,copilotChatReference:s,hasExpandedAllRanges:r,isSplitView:l,subjectId:o,tableAriaLabel:d}):null}),s_=(0,a.GV)()?function(e){let t,n,a,r,d,c,u,m,h,f,p,g,y,v,b,j,w,C,_,N,S,I=(0,s.c)(87),{diffAnchor:L,viewerData:D,diffEntryData:T,copilotChatReference:A,hasExpandedAllRanges:R,isSplitView:O,subjectId:P,tableAriaLabel:M}=e,$=(0,l.useRef)(null),{clearSelectedLines:B}=er(),[V,U]=(0,l.useState)(null),[q,H]=(0,l.useState)(!1),G=T.newTreeEntry?.lineCount??T.oldTreeEntry?.lineCount??0;I[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,e9.G7)("pr_simple_diffs"),I[0]=t):t=I[0];let K=t;e:{let e=T.diffLines[T.diffLines.length-1];if(e?.blobLineNumber&&e.blobLineNumber<G){let t;I[1]!==T.diffLines||I[2]!==e.blobLineNumber?(t=T.diffLines.concat({__id:tn,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}),I[1]=T.diffLines,I[2]=e.blobLineNumber,I[3]=t):t=I[3],n=t;break e}n=T.diffLines}let W=n,{lineSpacingPreference:z,tabSizePreference:Q}=D,X=Y(),ee=(0,k.Py)(T.pathDigest);I[4]!==B||I[5]!==X||I[6]!==ee?(a=()=>{!ee&&X()&&(B(),eI())},r=[B,X,ee],I[4]=B,I[5]=X,I[6]=ee,I[7]=a,I[8]=r):(a=I[7],r=I[8]),(0,l.useEffect)(a,r),I[9]!==W?(d=(0,E.c7)(W),I[9]=W,I[10]=d):d=I[10];let et=d;I[11]===Symbol.for("react.memo_cache_sentinel")?(c=e=>{U(e)},I[11]=c):c=I[11];let en=c;I[12]!==T.path||I[13]!==R?(u=e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!R&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${T.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},I[12]=T.path,I[13]=R,I[14]=u):u=I[14];let ei=u;I[15]!==V||I[16]!==O?(m=e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${O?`, ${"left"===V?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){if(0===e.querySelectorAll("td.diff-text-cell").length&&!e.matches?.("td.diff-text-cell"))continue;let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else if(1===t.rangeCount){let e=t.toString();if(!e)continue;n.push(e)}else{let e=i.textContent;if(!e)continue;n.push(e)}}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},I[15]=V,I[16]=O,I[17]=m):m=I[17];let ea=m;I[18]!==W?(h=W.some(sN),I[18]=W,I[19]=h):h=I[19];let es=h;I[20]!==A||I[21]!==L||I[22]!==T.path||I[23]!==es||I[24]!==W||I[25]!==G||I[26]!==q||I[27]!==P||I[28]!==D?(f={diffHasHiddenUnicodeCharacters:es,diffLines:W,fileAnchor:L,fileLineCount:G,filePath:T.path,handleDiffSideCellSelectionBlocking:en,showHiddenUnicode:q,tableRef:$,copilotChatReference:A,subjectId:P,viewerData:D},I[20]=A,I[21]=L,I[22]=T.path,I[23]=es,I[24]=W,I[25]=G,I[26]=q,I[27]=P,I[28]=D,I[29]=f):f=I[29];let el=f,eo=J(),{addLineToSelection:ed,selectLine:ec}=er(),eu=(0,k.gW)();I[30]!==ed||I[31]!==T.pathDigest||I[32]!==eo||I[33]!==ec||I[34]!==eu?(p=e=>{let t=e.target,n=t.getAttribute("data-diff-line-key"),i=t.getAttribute("data-diff-side");if(!F(n)||!(0,o.e)(i))return;if(eo()&&e.shiftKey)return void ed({lineKey:n,orientation:i},ek);let a=t.getAttribute("data-line-number");a&&(ec({lineKey:n,firstLineSelectionOnDrag:{orientation:i,lineNumber:parseInt(a),shouldStartConversation:!1,lineKey:n}},ek),eu(T.pathDigest))},I[30]=ed,I[31]=T.pathDigest,I[32]=eo,I[33]=ec,I[34]=eu,I[35]=p):p=I[35];let em=p,eh=Z();I[36]!==ed||I[37]!==eh?(g=e=>{if(1!==e.buttons)return;let t=e.target,n=t.closest("[data-diff-line-key]")?.getAttribute("data-diff-line-key"),i=t.closest("[data-diff-side]")?.getAttribute("data-diff-side");F(n)&&(0,o.e)(i)&&eh()&&ed({lineKey:n,orientation:i},ek)},I[36]=ed,I[37]=eh,I[38]=g):g=I[38];let ef=g;I[39]!==eo?(y=(e,t)=>{let n=eo();if(!n)return!1;let i="left"===e;return"right"===n.endOrientation&&!i&&n.endLineNumber===t||!!n&&"left"===n.endOrientation&&!!i&&n.endLineNumber===t},I[39]=eo,I[40]=y):y=I[40];let ep=y;I[41]!==ed||I[42]!==T.pathDigest||I[43]!==ep||I[44]!==ee||I[45]!==ec||I[46]!==eu?(v=e=>{if(1!==e.buttons)return;let t=e.target,n=t.closest("[data-diff-line-key]")?.getAttribute("data-diff-line-key"),i=t.closest("[data-diff-side]")?.getAttribute("data-diff-side"),a=t.closest("[data-selected]")?.getAttribute("data-selected"),s=t.closest("[data-line-number]")?.getAttribute("data-line-number"),r=s?parseInt(s,10):void 0;!F(n)||!(0,o.e)(i)||n&&(a||!r||ep(i,r)?ed({lineKey:n,orientation:i},ek):ec({lineKey:n,firstLineSelectionOnDrag:{lineNumber:r,orientation:i,lineKey:n,shouldStartConversation:!0}},ek),ee||eu(T.pathDigest))},I[41]=ed,I[42]=T.pathDigest,I[43]=ep,I[44]=ee,I[45]=ec,I[46]=eu,I[47]=v):v=I[47];let eg=v;I[48]!==B||I[49]!==ep?(b=e=>{let t=e.target,n=t.closest("[data-diff-side]")?.getAttribute("data-diff-side"),i=t.closest("[data-line-number]")?.getAttribute("data-line-number"),a=i?parseInt(i,10):void 0;(0,o.e)(n)&&a&&!ep(n,a)&&B()},I[48]=B,I[49]=ep,I[50]=b):b=I[50];let ey=b;I[51]!==es||I[52]!==q?(j=es&&(0,i.jsx)(sd.a,{isShown:q,toggleShowHiddenCharacters:()=>H(!q)}),I[51]=es,I[52]=q,I[53]=j):j=I[53];let ex="compact"===z;I[54]!==ex?(w=(0,x.$)("tab-size","width-full",sl,{[so]:ex}),I[54]=ex,I[55]=w):w=I[55];let ev=`${et}px`,eb=`${2*parseFloat(et)}px`;return I[56]!==ev||I[57]!==eb?(C={"--line-number-cell-width":ev,"--line-number-cell-width-unified":eb},I[56]=ev,I[57]=eb,I[58]=C):C=I[58],I[59]!==T.path||I[60]!==W||I[61]!==el||I[62]!==ey||I[63]!==em||I[64]!==ef||I[65]!==eg||I[66]!==O||I[67]!==et||I[68]!==D.avatarUrl||I[69]!==D.login||I[70]!==D.shouldDisplayComments||I[71]!==D.viewerCanApplySuggestion||I[72]!==D.viewerCanComment?(_=O?(0,i.jsx)(e7.wj,{lineWidth:et,children:K?(0,i.jsx)(sb,{diffLines:W,filePath:T.path,handleMouseDownOnNumberCell:em,handleMouseEnterCell:ef,handleMouseLeaveAddCommentButton:eg,handleMouseDownAddCommentButton:ey,avatarURL:D.avatarUrl,userLogin:D.login,viewerCanApplySuggestion:D.viewerCanApplySuggestion,viewerCanComment:D.viewerCanComment,shouldDisplayComments:D.shouldDisplayComments}):(0,i.jsx)(si,{...el})}):(0,i.jsx)(e7.Qe,{lineWidth:et,children:K?(0,i.jsx)(sg,{diffLines:W,filePath:T.path,handleMouseDownOnNumberCell:em,handleMouseEnterCell:ef,handleMouseLeaveAddCommentButton:eg,handleMouseDownAddCommentButton:ey,avatarURL:D.avatarUrl,userLogin:D.login,viewerCanApplySuggestion:D.viewerCanApplySuggestion,viewerCanComment:D.viewerCanComment,shouldDisplayComments:D.shouldDisplayComments}):(0,i.jsx)(ss,{...el})}),I[59]=T.path,I[60]=W,I[61]=el,I[62]=ey,I[63]=em,I[64]=ef,I[65]=eg,I[66]=O,I[67]=et,I[68]=D.avatarUrl,I[69]=D.login,I[70]=D.shouldDisplayComments,I[71]=D.viewerCanApplySuggestion,I[72]=D.viewerCanComment,I[73]=_):_=I[73],I[74]!==L||I[75]!==V||I[76]!==ei||I[77]!==ea||I[78]!==w||I[79]!==C||I[80]!==_||I[81]!==Q||I[82]!==M?(N=(0,i.jsx)("table",{"aria-label":M,onKeyDown:ei,ref:$,className:w,"data-block-diff-cell-selection":V,"data-diff-anchor":L,"data-tab-size":Q,"data-paste-markdown-skip":!0,onCopy:ea,role:"grid",style:C,children:_}),I[74]=L,I[75]=V,I[76]=ei,I[77]=ea,I[78]=w,I[79]=C,I[80]=_,I[81]=Q,I[82]=M,I[83]=N):N=I[83],I[84]!==j||I[85]!==N?(S=(0,i.jsxs)(i.Fragment,{children:[j,N]}),I[84]=j,I[85]=N,I[86]=S):S=I[86],S}:function({diffAnchor:e,viewerData:t,diffEntryData:n,copilotChatReference:a,hasExpandedAllRanges:s,isSplitView:r,subjectId:d,tableAriaLabel:c}){let u=(0,l.useRef)(null),{clearSelectedLines:m}=er(),[h,f]=(0,l.useState)(null),[p,g]=(0,l.useState)(!1),y=n.newTreeEntry?.lineCount??n.oldTreeEntry?.lineCount??0,v=(0,e9.G7)("pr_simple_diffs"),b=(0,l.useMemo)(()=>{let e=n.diffLines[n.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<y?n.diffLines.concat({__id:tn,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):n.diffLines},[n.diffLines,y]),{lineSpacingPreference:j,tabSizePreference:w}=t,C=Y(),_=(0,k.Py)(n.pathDigest);(0,l.useEffect)(()=>{!_&&C()&&(m(),eI())},[m,C,_]);let N=(0,E.c7)(b),S=(0,l.useCallback)(e=>{f(e)},[f]),I=(0,l.useCallback)(e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!s&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${n.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},[s,n.path]),L=(0,l.useCallback)(e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${r?`, ${"left"===h?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){if(0===e.querySelectorAll("td.diff-text-cell").length&&!e.matches?.("td.diff-text-cell"))continue;let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else if(1===t.rangeCount){let e=t.toString();if(!e)continue;n.push(e)}else{let e=i.textContent;if(!e)continue;n.push(e)}}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},[h,r]),D=(0,l.useMemo)(()=>b.some(e=>(0,tZ.Y)(e.text)),[b]),T={diffHasHiddenUnicodeCharacters:D,diffLines:b,fileAnchor:e,fileLineCount:y,filePath:n.path,handleDiffSideCellSelectionBlocking:S,showHiddenUnicode:p,tableRef:u,copilotChatReference:a,subjectId:d,viewerData:t},A=J(),{addLineToSelection:R,selectLine:O}=er(),P=(0,k.gW)(),M=(0,l.useCallback)(e=>{let t=e.target,i=t.getAttribute("data-diff-line-key"),a=t.getAttribute("data-diff-side");if(!F(i)||!(0,o.e)(a))return;if(A()&&e.shiftKey)return void R({lineKey:i,orientation:a},ek);let s=t.getAttribute("data-line-number");s&&(O({lineKey:i,firstLineSelectionOnDrag:{orientation:a,lineNumber:parseInt(s),shouldStartConversation:!1,lineKey:i}},ek),P(n.pathDigest))},[R,n.pathDigest,A,O,P]),$=Z(),B=(0,l.useCallback)(e=>{if(1!==e.buttons)return;let t=e.target,n=t.closest("[data-diff-line-key]")?.getAttribute("data-diff-line-key"),i=t.closest("[data-diff-side]")?.getAttribute("data-diff-side");F(n)&&(0,o.e)(i)&&$()&&R({lineKey:n,orientation:i},ek)},[$,R]),V=(0,l.useCallback)((e,t)=>{let n=A();if(!n)return!1;let i="left"===e;return"right"===n.endOrientation&&!i&&n.endLineNumber===t||!!n&&"left"===n.endOrientation&&!!i&&n.endLineNumber===t},[A]),U=(0,l.useCallback)(e=>{if(1!==e.buttons)return;let t=e.target,i=t.closest("[data-diff-line-key]")?.getAttribute("data-diff-line-key"),a=t.closest("[data-diff-side]")?.getAttribute("data-diff-side"),s=t.closest("[data-selected]")?.getAttribute("data-selected"),r=t.closest("[data-line-number]")?.getAttribute("data-line-number"),l=r?parseInt(r,10):void 0;!F(i)||!(0,o.e)(a)||i&&(s||!l||V(a,l)?R({lineKey:i,orientation:a},ek):O({lineKey:i,firstLineSelectionOnDrag:{lineNumber:l,orientation:a,lineKey:i,shouldStartConversation:!0}},ek),_||P(n.pathDigest))},[R,n.pathDigest,V,_,O,P]),q=(0,l.useCallback)(e=>{let t=e.target,n=t.closest("[data-diff-side]")?.getAttribute("data-diff-side"),i=t.closest("[data-line-number]")?.getAttribute("data-line-number"),a=i?parseInt(i,10):void 0;(0,o.e)(n)&&a&&!V(n,a)&&m()},[m,V]);return(0,i.jsxs)(i.Fragment,{children:[D&&(0,i.jsx)(sd.a,{isShown:p,toggleShowHiddenCharacters:()=>g(!p)}),(0,i.jsx)("table",{"aria-label":c,onKeyDown:I,ref:u,className:(0,x.$)("tab-size","width-full",sl,{[so]:"compact"===j}),"data-block-diff-cell-selection":h,"data-diff-anchor":e,"data-tab-size":w,"data-paste-markdown-skip":!0,onCopy:L,role:"grid",style:{"--line-number-cell-width":`${N}px`,"--line-number-cell-width-unified":`${2*parseFloat(N)}px`},children:r?(0,i.jsx)(e7.wj,{lineWidth:N,children:v?(0,i.jsx)(sb,{diffLines:b,filePath:n.path,handleMouseDownOnNumberCell:M,handleMouseEnterCell:B,handleMouseLeaveAddCommentButton:U,handleMouseDownAddCommentButton:q,avatarURL:t.avatarUrl,userLogin:t.login,viewerCanApplySuggestion:t.viewerCanApplySuggestion,viewerCanComment:t.viewerCanComment,shouldDisplayComments:t.shouldDisplayComments}):(0,i.jsx)(si,{...T})}):(0,i.jsx)(e7.Qe,{lineWidth:N,children:v?(0,i.jsx)(sg,{diffLines:b,filePath:n.path,handleMouseDownOnNumberCell:M,handleMouseEnterCell:B,handleMouseLeaveAddCommentButton:U,handleMouseDownAddCommentButton:q,avatarURL:t.avatarUrl,userLogin:t.login,viewerCanApplySuggestion:t.viewerCanApplySuggestion,viewerCanComment:t.viewerCanComment,shouldDisplayComments:t.shouldDisplayComments}):(0,i.jsx)(ss,{...T})})})]})};function sN(e){return(0,tZ.Y)(e.text)}try{sw.displayName||(sw.displayName="PlainTextStatus")}catch{}try{sC.displayName||(sC.displayName="DiffLines")}catch{}try{s_.displayName||(s_.displayName="CodeDiffLines")}catch{}var sS=n(8431),sI=n(46251),sk=n(78049);let sL="SubmoduleDiff-module__filesActionList--sbPQt",sD="SubmoduleDiff-module__fileRowLinkItem--Z1ES5",sT="SubmoduleDiff-module__path--hB1wm",sE="SubmoduleDiff-module__fileRow--Y9n2E",sA="SubmoduleDiff-module__linesAdded--tJqtP",sR="SubmoduleDiff-module__linesDeleted--nr9cp",sO=(0,a.GV)()?function(e){let t,n,a,r,l,o,d=(0,s.c)(28),{submodule:u}=e,{basePath:m,changedFiles:h,contentsUrl:f,newCommitOid:p,oldCommitOid:g,status:y,submoduleUrl:x}=u,v=u.summary.length>0&&u.contentsUrl&&"MODIFIED"===y;switch(y){case"ADDED":{let e;d[0]!==f||d[1]!==p?(e=(0,i.jsx)(sM,{commitOid:p,contentsUrl:f,type:"added"}),d[0]=f,d[1]=p,d[2]=e):e=d[2],t=e;break}case"DELETED":case"REMOVED":{let e;d[3]!==f||d[4]!==g?(e=(0,i.jsx)(sM,{commitOid:g,contentsUrl:f,type:"deleted"}),d[3]=f,d[4]=g,d[5]=e):e=d[5],t=e;break}default:{let e;d[6]!==h||d[7]!==f||d[8]!==p||d[9]!==g?(e=(0,i.jsx)(s$,{newCommitOid:p,oldCommitOid:g,changedFiles:h,contentsUrl:f}),d[6]=h,d[7]=f,d[8]=p,d[9]=g,d[10]=e):e=d[10],t=e}}let b=t,j=`px-3 py-2 ${v?"border-bottom bgColor-muted":""}`;return d[11]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(c.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),d[11]=n):n=d[11],d[12]!==m||d[13]!==x?(a=(0,i.jsx)(sP,{basePath:m,submoduleUrl:x}),d[12]=m,d[13]=x,d[14]=a):a=d[14],d[15]!==b||d[16]!==j||d[17]!==a?(r=(0,i.jsxs)("div",{className:j,children:[n,a,b]}),d[15]=b,d[16]=j,d[17]=a,d[18]=r):r=d[18],d[19]!==f||d[20]!==p||d[21]!==g||d[22]!==v||d[23]!==u.summary?(l=v&&(0,i.jsx)(eV.l,{className:sL,showDividers:!0,variant:"full",children:u.summary.map(e=>(0,i.jsx)(sB,{compareUrl:`${f}/compare/${g}...${p}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))}),d[19]=f,d[20]=p,d[21]=g,d[22]=v,d[23]=u.summary,d[24]=l):l=d[24],d[25]!==r||d[26]!==l?(o=(0,i.jsxs)("div",{children:[r,l]}),d[25]=r,d[26]=l,d[27]=o):o=d[27],o}:function({submodule:e}){let{basePath:t,changedFiles:n,contentsUrl:a,newCommitOid:s,oldCommitOid:r,status:o,submoduleUrl:d}=e,u=e.summary.length>0&&e.contentsUrl&&"MODIFIED"===o,m=(0,l.useMemo)(()=>{switch(o){case"ADDED":return(0,i.jsx)(sM,{commitOid:s,contentsUrl:a,type:"added"});case"DELETED":case"REMOVED":return(0,i.jsx)(sM,{commitOid:r,contentsUrl:a,type:"deleted"});default:return(0,i.jsx)(s$,{newCommitOid:s,oldCommitOid:r,changedFiles:n,contentsUrl:a})}},[s,r,o,n,a]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:`px-3 py-2 ${u?"border-bottom bgColor-muted":""}`,children:[(0,i.jsx)(c.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),(0,i.jsx)(sP,{basePath:t,submoduleUrl:d}),m]}),u&&(0,i.jsx)(eV.l,{className:sL,showDividers:!0,variant:"full",children:e.summary.map(e=>(0,i.jsx)(sB,{compareUrl:`${a}/compare/${r}...${s}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))})]})},sP=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{basePath:r,submoduleUrl:l}=e;return a[0]!==r||a[1]!==l?(t=l?(0,i.jsx)(e8.A,{inline:!0,href:l,children:r}):r,a[0]=r,a[1]=l,a[2]=t):t=a[2],a[3]!==t?(n=(0,i.jsxs)(i.Fragment,{children:["Submodule"," ",t," "]}),a[3]=t,a[4]=n):n=a[4],n}:function({basePath:e,submoduleUrl:t}){return(0,i.jsxs)(i.Fragment,{children:["Submodule"," ",t?(0,i.jsx)(e8.A,{inline:!0,href:t,children:e}):e," "]})};function sF(e){return e.slice(0,7)}let sM=(0,a.GV)()?function(e){let t=(0,s.c)(13),{commitOid:n,contentsUrl:a,type:r}=e,l=void 0===n?"":n,o="added"===r?"added at":"deleted from";if(a){let e,n,s,r=`${a}/tree/${l}`;return t[0]!==l?(e=sF(l),t[0]=l,t[1]=e):e=t[1],t[2]!==r||t[3]!==e?(n=(0,i.jsx)(e8.A,{inline:!0,href:r,children:e}),t[2]=r,t[3]=e,t[4]=n):n=t[4],t[5]!==n||t[6]!==o?(s=(0,i.jsxs)(i.Fragment,{children:[o," ",n]}),t[5]=n,t[6]=o,t[7]=s):s=t[7],s}{let e,n;return t[8]!==l?(e=sF(l),t[8]=l,t[9]=e):e=t[9],t[10]!==e||t[11]!==o?(n=(0,i.jsxs)(i.Fragment,{children:[o," ",e]}),t[10]=e,t[11]=o,t[12]=n):n=t[12],n}}:function({commitOid:e="",contentsUrl:t,type:n}){let a="added"===n?"added at":"deleted from";return t?(0,i.jsxs)(i.Fragment,{children:[a," ",(0,i.jsx)(e8.A,{inline:!0,href:`${t}/tree/${e}`,children:sF(e)})]}):(0,i.jsxs)(i.Fragment,{children:[a," ",sF(e)]})},s$=(0,a.GV)()?function(e){let t,n,a,r=(0,s.c)(12),{newCommitOid:l,oldCommitOid:o,changedFiles:d,contentsUrl:c}=e,u=void 0===l?"":l,m=void 0===o?"":o,h=void 0===d?0:d;r[0]!==h||r[1]!==c||r[2]!==u||r[3]!==m?(t=h>0&&c?`${h} ${1===h?"file":"files"}`:`from ${sF(m)} to ${sF(u)}`,r[0]=h,r[1]=c,r[2]=u,r[3]=m,r[4]=t):t=r[4];let f=t;return r[5]!==f||r[6]!==c||r[7]!==u||r[8]!==m?(n=c?(0,i.jsx)(e8.A,{inline:!0,href:`${c}/compare/${m}...${u}`,children:f}):f,r[5]=f,r[6]=c,r[7]=u,r[8]=m,r[9]=n):n=r[9],r[10]!==n?(a=(0,i.jsxs)(i.Fragment,{children:["updated"," ",n]}),r[10]=n,r[11]=a):a=r[11],a}:function({newCommitOid:e="",oldCommitOid:t="",changedFiles:n=0,contentsUrl:a}){let s=n>0&&a?`${n} ${1===n?"file":"files"}`:`from ${sF(t)} to ${sF(e)}`;return(0,i.jsxs)(i.Fragment,{children:["updated"," ",a?(0,i.jsx)(e8.A,{inline:!0,href:`${a}/compare/${t}...${e}`,children:s}):s]})},sB=(0,a.GV)()?function(e){let t,n,a,l,o,d,c=(0,s.c)(16),{compareUrl:u,linesAdded:m,linesDeleted:h,path:f,pathDigest:p,status:g}=e,y=`${u}#diff-${p}`;return c[0]!==g?(t=(0,i.jsx)(sk.E,{status:g}),c[0]=g,c[1]=t):t=c[1],c[2]!==f?(n=(0,i.jsx)("span",{className:sT,children:f}),c[2]=f,c[3]=n):n=c[3],c[4]!==m||c[5]!==h?(a=(m>0||h>0)&&(0,i.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,i.jsx)("div",{className:sA,children:m>0&&(0,i.jsxs)(r.C,{isAddition:!0,children:["+",sV(m)]})}),(0,i.jsx)("div",{className:sR,children:h>0&&(0,i.jsxs)(r.C,{isAddition:!1,children:["-",sV(h)]})})]}),c[4]=m,c[5]=h,c[6]=a):a=c[6],c[7]!==n||c[8]!==a?(l=(0,i.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[n,a]}),c[7]=n,c[8]=a,c[9]=l):l=c[9],c[10]!==t||c[11]!==l?(o=(0,i.jsxs)(sI.B,{gap:"condensed",direction:"horizontal",align:"center",className:sE,children:[t,l]}),c[10]=t,c[11]=l,c[12]=o):o=c[12],c[13]!==y||c[14]!==o?(d=(0,i.jsx)(eV.l.LinkItem,{href:y,className:sD,children:o}),c[13]=y,c[14]=o,c[15]=d):d=c[15],d}:function({compareUrl:e,linesAdded:t,linesDeleted:n,path:a,pathDigest:s,status:l}){return(0,i.jsx)(eV.l.LinkItem,{href:`${e}#diff-${s}`,className:sD,children:(0,i.jsxs)(sI.B,{gap:"condensed",direction:"horizontal",align:"center",className:sE,children:[(0,i.jsx)(sk.E,{status:l}),(0,i.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[(0,i.jsx)("span",{className:sT,children:a}),(t>0||n>0)&&(0,i.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,i.jsx)("div",{className:sA,children:t>0&&(0,i.jsxs)(r.C,{isAddition:!0,children:["+",sV(t)]})}),(0,i.jsx)("div",{className:sR,children:n>0&&(0,i.jsxs)(r.C,{isAddition:!1,children:["-",sV(n)]})})]})]})]})})};function sV(e){return e>999?`${(e/1e3).toFixed(1)}k`:e.toLocaleString()}try{sO.displayName||(sO.displayName="SubmoduleDiff")}catch{}try{sP.displayName||(sP.displayName="SubmodulePath")}catch{}try{sM.displayName||(sM.displayName="SubmoduleCommitChange")}catch{}try{s$.displayName||(s$.displayName="SubmoduleModified")}catch{}try{sB.displayName||(sB.displayName="SubmoduleFileRow")}catch{}let sU=({hasCopilotAccess:e,isBinary:t,isSubmodule:n,path:i,repository:a,status:s})=>!!e&&!t&&!n&&!!i&&"DELETED"!==s&&"REMOVED"!==s&&!!a.id&&!!a.name&&!!a.ownerLogin&&!0,sq=({newCommitOid:e,newTreeEntry:t,oldCommitOid:n,oldTreeEntry:i,path:a,pathDigest:s,repository:r})=>{let l=n&&e?(0,n6.IO9)({repo:r,commitish:n,action:"raw",path:a}):"";return{baseFile:sH({path:i?.path,oid:n,repository:r}),headFile:sH({path:t?.path,oid:e,repository:r}),baseBranchRef:n,id:`#diff-${s}`,type:"file-diff",url:l}},sH=({path:e,oid:t,repository:n})=>e&&t?{type:"file",url:(0,n6.IO9)({repo:n,commitish:t,action:"raw",path:e}),path:e,repoID:n.id,repoName:n.name,repoOwner:n.ownerLogin,ref:t,commitOID:t}:null,sG=(0,a.GV)()?function(e){let t,n=(0,s.c)(8),{isBinary:i,isSubmodule:a,path:r,status:l,repository:o,newCommitOid:d,newTreeEntry:c,oldCommitOid:u,oldTreeEntry:m,pathDigest:h,hasCopilotAccess:f}=e;e:{let e;if(!sU({isBinary:i,isSubmodule:a,path:r,status:l,repository:o,hasCopilotAccess:f})){t=void 0;break e}n[0]!==d||n[1]!==c||n[2]!==u||n[3]!==m||n[4]!==r||n[5]!==h||n[6]!==o?(e=sq({newCommitOid:d,newTreeEntry:c,oldCommitOid:u,oldTreeEntry:m,path:r,pathDigest:h,repository:o}),n[0]=d,n[1]=c,n[2]=u,n[3]=m,n[4]=r,n[5]=h,n[6]=o,n[7]=e):e=n[7],t=e}return t}:function({isBinary:e,isSubmodule:t,path:n,status:i,repository:a,newCommitOid:s,newTreeEntry:r,oldCommitOid:o,oldTreeEntry:d,pathDigest:c,hasCopilotAccess:u}){return(0,l.useMemo)(()=>{if(sU({isBinary:e,isSubmodule:t,path:n,status:i,repository:a,hasCopilotAccess:u}))return sq({newCommitOid:s,newTreeEntry:r,oldCommitOid:o,oldTreeEntry:d,path:n,pathDigest:c,repository:a})},[s,r,o,d,c,a,u,e,t,n,i])},sK="FileReviewThread-module__ReviewThreadContainer--InwxI",sW="FileReviewThread-module__ReviewThreadHeading--oFg3s",sz="FileReviewThread-module__ReviewThreadInnerContainer--jYE3S",sQ="FileReviewThread-module__SpinnerWrapper--zQOoj",sZ=(0,a.GV)()?function(e){let t,n,a,r,d,u,h,f,p,g,y,v,b,j,w,C,_,N,S,I,k,L,D,T,E,A,R=(0,s.c)(69);if(R[0]!==e){let{fileAnchor:i,filePath:s,thread:l,isFirstThread:o,ghostUser:c,manuallyUpdateCommentsWithThisThreadId:u,...m}=e;t=s,d=l,a=o,n=c,r=m,R[0]=e,R[1]=t,R[2]=n,R[3]=a,R[4]=r,R[5]=d}else t=R[1],n=R[2],a=R[3],r=R[4],d=R[5];let O=(0,l.useRef)(null);R[6]===Symbol.for("react.memo_cache_sentinel")?(u=(0,nB.A)("localStorage"),R[6]=u):u=R[6];let P=u,F=d?.isResolved,[M,$]=(0,l.useState)(""),[B,V]=(0,l.useState)(F??!1);R[7]!==F||R[8]!==d.id?(h=()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${d.id}`);null!==e?V(JSON.parse(e)):F&&V(!0)},f=[F,d.id],R[7]=F,R[8]=d.id,R[9]=h,R[10]=f):(h=R[9],f=R[10]),(0,l.useEffect)(h,f),R[11]!==B||R[12]!==d.id?(p=()=>{window.requestAnimationFrame(()=>{P.setItem(`reviewThreadIsCollapsed_${d.id}`,JSON.stringify(!B))}),V(sY)},R[11]=B,R[12]=d.id,R[13]=p):p=R[13];let U=p,{sendAnalyticsEvent:q}=(0,tJ.s)(),{mutate:H}=(0,n4.H)(t,o.zW);R[14]!==H||R[15]!==q||R[16]!==d?(g=()=>{d&&!d.isResolved&&(H({threadId:d.id},{onError:()=>$("Failed to resolve thread"),onSuccess:()=>{V(!0),P.removeItem(`reviewThreadIsCollapsed_${d.id}`)}}),q("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},R[14]=H,R[15]=q,R[16]=d,R[17]=g):g=R[17];let G=g,{mutate:K}=(0,n5.i)(t,o.zW);R[18]!==q||R[19]!==d||R[20]!==K?(y=()=>{d&&(K({threadId:d.id},{onError:()=>$("Failed to unresolve thread"),onSuccess:()=>{V(!1),P.removeItem(`reviewThreadIsCollapsed_${d.id}`)}}),q("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},R[18]=q,R[19]=d,R[20]=K,R[21]=y):y=R[21];let W=y;if(!d||!(d.commentsData?.comments&&d.commentsData.comments.length>0))return null;let z=d?.commentsData?.comments[0]?.reviewVariantType===nS.hH.Automated?d.commentsData?.comments[0]?.automatedComment:null,Q=z&&z.dismissable,Z=z&&z.source===nS.vk.LicenseCompliance,J=!!d.isResolved;R[22]===Symbol.for("react.memo_cache_sentinel")?(v=(0,n7.M3)(),R[22]=v):v=R[22];let Y=v;R[23]!==d.commentsData?.comments?(b=Y&&d.commentsData?.comments?.some(sJ),R[23]=d.commentsData?.comments,R[24]=b):b=R[24];let X=b,ee=d.commentsData?.comments[0]?.createdAt,et=d.commentsData?.comments[0]?.author?.login??"Unknown Author",en=`${F?"Unresolve":"Resolve"} comment`;if(ee){let e;R[25]!==ee?(e=(0,nM.C)(new Date(ee)),R[25]=ee,R[26]=e):e=R[26];let t=e;en=`${F?"Unresolve":"Resolve"} ${et}'s comment, ${t}`}R[27]===Symbol.for("react.memo_cache_sentinel")?(j=(0,i.jsx)(nH,{}),R[27]=j):j=R[27],R[28]===Symbol.for("react.memo_cache_sentinel")?(w=(0,x.$)("px-1",sK),R[28]=w):w=R[28];let ei=B?"Expand comment":"Collapse comment",ea=B?c.ChevronRightIcon:c.ChevronDownIcon;return R[29]!==U||R[30]!==a||R[31]!==ei||R[32]!==ea?(C=(0,i.jsx)(m.K,{"aria-label":ei,icon:ea,size:"small",variant:"invisible",onClick:U,"data-is-first-collapse-button":a}),R[29]=U,R[30]=a,R[31]=ei,R[32]=ea,R[33]=C):C=R[33],R[34]===Symbol.for("react.memo_cache_sentinel")?(_=(0,i.jsx)("h2",{className:sW,children:"Comment on file"}),R[34]=_):_=R[34],R[35]!==d.positioning?.isOutdated?(N=d.positioning?.isOutdated&&(0,i.jsx)(nV.A,{variant:"secondary",children:"Outdated"}),R[35]=d.positioning?.isOutdated,R[36]=N):N=R[36],R[37]!==J?(S=J&&(0,i.jsx)(nV.A,{variant:"secondary",children:"Resolved"}),R[37]=J,R[38]=S):S=R[38],R[39]!==N||R[40]!==S?(I=(0,i.jsxs)("div",{className:sz,children:[N,S]}),R[39]=N,R[40]=S,R[41]=I):I=R[41],R[42]!==C||R[43]!==I?(k=(0,i.jsxs)("div",{className:w,children:[C,_,I]}),R[42]=C,R[43]=I,R[44]=k):k=R[44],R[45]===Symbol.for("react.memo_cache_sentinel")?(L=(0,i.jsxs)("div",{className:sQ,children:[(0,i.jsx)(e2.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),R[45]=L):L=R[45],R[46]!==M?(D=M&&(0,i.jsxs)(nU.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),M]}),R[46]=M,R[47]=D):D=R[47],R[48]!==z||R[49]!==Q||R[50]!==t||R[51]!==n||R[52]!==G||R[53]!==W||R[54]!==B||R[55]!==X||R[56]!==F||R[57]!==J||R[58]!==Z||R[59]!==en||R[60]!==r||R[61]!==d?(T=!B&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n3,{lineMarkersKey:o.zW,batchingEnabled:!0,filePath:t,gridCellId:`${t}-file-level-markers`,isInlineComment:!1,thread:d,shouldLimitHeight:!1,...r,ghostUser:n}),X&&!Q&&!Z&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(eR.Q,{"aria-label":en,onClick:J?W:G,className:"mr-2",children:F?"Unresolve comment":"Resolve comment"}),J&&d.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:d.resolvedBy})," marked this comment as resolved"]})]}),Q&&(0,i.jsx)(ii,{automatedComment:z,thread:d,filePath:t,lineMarkersKey:o.zW,setErrorMessage:$,setIsCollapsed:V,safeLocalStorage:P})]}),R[48]=z,R[49]=Q,R[50]=t,R[51]=n,R[52]=G,R[53]=W,R[54]=B,R[55]=X,R[56]=F,R[57]=J,R[58]=Z,R[59]=en,R[60]=r,R[61]=d,R[62]=T):T=R[62],R[63]!==D||R[64]!==T?(E=(0,i.jsxs)(l.Suspense,{fallback:L,children:[D,T]}),R[63]=D,R[64]=T,R[65]=E):E=R[65],R[66]!==k||R[67]!==E?(A=(0,i.jsx)(n$.t,{fallback:j,children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:O,children:[k,E]})}),R[66]=k,R[67]=E,R[68]=A):A=R[68],A}:function({fileAnchor:e,filePath:t,thread:n,isFirstThread:a,ghostUser:s,manuallyUpdateCommentsWithThisThreadId:r,...d}){let u=(0,l.useRef)(null),h=(0,nB.A)("localStorage"),f=n?.isResolved,[p,g]=(0,l.useState)(""),[y,v]=(0,l.useState)(f??!1);(0,l.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${n.id}`);null!==e?v(JSON.parse(e)):f&&v(!0)},[f,n.id]);let{sendAnalyticsEvent:b}=(0,tJ.s)(),{mutate:j}=(0,n4.H)(t,o.zW),{mutate:w}=(0,n5.i)(t,o.zW);if(!n||!(n.commentsData?.comments&&n.commentsData.comments.length>0))return null;let C=n?.commentsData?.comments[0]?.reviewVariantType===nS.hH.Automated?n.commentsData?.comments[0]?.automatedComment:null,_=C&&C.dismissable,N=C&&C.source===nS.vk.LicenseCompliance,S=!!n.isResolved,I=(0,n7.M3)()&&n.commentsData?.comments?.some(e=>e.state?.toUpperCase()!=="PENDING"),k=n.commentsData?.comments[0]?.createdAt,L=n.commentsData?.comments[0]?.author?.login??"Unknown Author",D=`${f?"Unresolve":"Resolve"} comment`;if(k){let e=(0,nM.C)(new Date(k));D=`${f?"Unresolve":"Resolve"} ${L}'s comment, ${e}`}return(0,i.jsx)(n$.t,{fallback:(0,i.jsx)(nH,{}),children:(0,i.jsxs)("div",{className:"rounded-2 bgColor-default",ref:u,children:[(0,i.jsxs)("div",{className:(0,x.$)("px-1",sK),children:[(0,i.jsx)(m.K,{"aria-label":y?"Expand comment":"Collapse comment",icon:y?c.ChevronRightIcon:c.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{h.setItem(`reviewThreadIsCollapsed_${n.id}`,JSON.stringify(!y))}),v(e=>!e)},"data-is-first-collapse-button":a}),(0,i.jsx)("h2",{className:sW,children:"Comment on file"}),(0,i.jsxs)("div",{className:sz,children:[n.positioning?.isOutdated&&(0,i.jsx)(nV.A,{variant:"secondary",children:"Outdated"}),S&&(0,i.jsx)(nV.A,{variant:"secondary",children:"Resolved"})]})]}),(0,i.jsxs)(l.Suspense,{fallback:(0,i.jsxs)("div",{className:sQ,children:[(0,i.jsx)(e2.A,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:[p&&(0,i.jsxs)(nU.A,{variant:"danger",className:"m-2",children:[(0,i.jsx)(c.StopIcon,{className:"mr-2"}),p]}),!y&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n3,{lineMarkersKey:o.zW,batchingEnabled:!0,filePath:t,gridCellId:`${t}-file-level-markers`,isInlineComment:!1,thread:n,shouldLimitHeight:!1,...d,ghostUser:s}),I&&!_&&!N&&(0,i.jsxs)("div",{className:"d-flex flex-items-center p-2 border-top flex-wrap",children:[(0,i.jsx)(eR.Q,{"aria-label":D,onClick:S?()=>{n&&(w({threadId:n.id},{onError:()=>g("Failed to unresolve thread"),onSuccess:()=>{v(!1),h.removeItem(`reviewThreadIsCollapsed_${n.id}`)}}),b("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{n&&!n.isResolved&&(j({threadId:n.id},{onError:()=>g("Failed to resolve thread"),onSuccess:()=>{v(!0),h.removeItem(`reviewThreadIsCollapsed_${n.id}`)}}),b("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},className:"mr-2",children:f?"Unresolve comment":"Resolve comment"}),S&&n.resolvedBy&&(0,i.jsxs)("span",{className:"fgColor-muted f6",children:[(0,i.jsx)("b",{children:n.resolvedBy})," marked this comment as resolved"]})]}),_&&(0,i.jsx)(ii,{automatedComment:C,thread:n,filePath:t,lineMarkersKey:o.zW,setErrorMessage:g,setIsCollapsed:v,safeLocalStorage:h})]})]})]})})};function sJ(e){return e.state?.toUpperCase()!=="PENDING"}function sY(e){return!e}try{sZ.displayName||(sZ.displayName="FileReviewThread")}catch{}let sX=(0,a.GV)()?function(e){let t,n,a,r,o,d,c,u=(0,s.c)(19);if(u[0]!==e){let{conversationListThreads:i,filePath:s,manuallyUpdateCommentsWithThisThreadId:l,ghostUser:o,...d}=e;t=i,n=s,a=o,r=d,u[0]=e,u[1]=t,u[2]=n,u[3]=a,u[4]=r}else t=u[1],n=u[2],a=u[3],r=u[4];let m=(0,l.useRef)(null);if(u[5]!==t?(o={containerRef:m,markers:t,disabled:!1,focusInStrategy:"closest"},u[5]=t,u[6]=o):o=u[6],nv(o),u[7]!==t||u[8]!==n||u[9]!==a||u[10]!==r){let e;u[12]!==t.length||u[13]!==n||u[14]!==a||u[15]!==r?(e=(e,s)=>(0,i.jsx)("div",{className:(0,x.$)("mt-1 border rounded-2 color-border-default color-shadow-small",s===t.length-1?"mb-1":"mb-2"),"data-first-marker":0===s,"data-marker-id":`${e.id}`,tabIndex:0,children:(0,i.jsx)(sZ,{viewerData:r.viewerData,filePath:n,thread:e,ghostUser:a},e.id)},`review-thread-${e.id}`),u[12]=t.length,u[13]=n,u[14]=a,u[15]=r,u[16]=e):e=u[16],d=t.map(e),u[7]=t,u[8]=n,u[9]=a,u[10]=r,u[11]=d}else d=u[11];return u[17]!==d?(c=(0,i.jsx)("div",{className:"d-flex pt-1 px-1",children:(0,i.jsx)("div",{className:nP,ref:m,children:d})}),u[17]=d,u[18]=c):c=u[18],c}:function({conversationListThreads:e,filePath:t,manuallyUpdateCommentsWithThisThreadId:n,ghostUser:a,...s}){let r=(0,l.useRef)(null);return nv({containerRef:r,markers:e,disabled:!1,focusInStrategy:"closest"}),(0,i.jsx)("div",{className:"d-flex pt-1 px-1",children:(0,i.jsx)("div",{className:nP,ref:r,children:e.map((n,r)=>(0,i.jsx)("div",{className:(0,x.$)("mt-1 border rounded-2 color-border-default color-shadow-small",r===e.length-1?"mb-1":"mb-2"),"data-first-marker":0===r,"data-marker-id":`${n.id}`,tabIndex:0,children:(0,i.jsx)(sZ,{viewerData:s.viewerData,filePath:t,thread:n,ghostUser:a},n.id)},`review-thread-${n.id}`))})})};try{sX.displayName||(sX.displayName="FileMarkers")}catch{}let s0=new Set,s1="b:0-l:null-r:null";function s2(e){switch(e){case"COMMIT":return"Due to the large number of changes in the selected commit, only one file is being shown at a time.";case"RANGE":return"Due to the large number of changes in the selected commit range, only one file is being shown at a time.";default:return"Due to the large number of changes in this pull request, only one file is being shown at a time."}}let s3=(0,a.GV)()?function(e){let t,n,a,d,u,m,h,f,p,y,v,b,j,w,C,_,N,S,I,L,D,T,E=(0,s.c)(140),{ref:A,addFileCommentButtonRef:R,collapsed:O,currentUser:P,diffLines:F,diffManuallyExpanded:M,diffSize:$,helpUrl:B,estimatedDiffHeight:V,fileComments:U,headerStickyOffset:q,hiddenFeatures:H,isAddingFileComment:K,isBinary:W,isSelected:z,isSubmodule:Q,isTooBig:Z,leftSideContent:J,linesAdded:Y,linesChanged:X,linesDeleted:ee,newTreeEntry:et,newCommitOid:en,objectId:ei,oldTreeEntry:ea,oldCommitOid:es,onToggleCollapse:er,path:el,pathDigest:eo,pullRequestGlobalRelayId:ed,repository:ec,richDiffState:eu,rightSideContent:em,setIsAddingFileComment:eh,hasExpandedAllRanges:ef,expandAllContextLines:ep,canExpandOrCollapseLines:eg,status:ey,submodule:ex,truncatedReason:ev,addInjectedContextLines:eb,loadDiff:ej}=e,ew=void 0===V?0:V,eC=void 0===H?s0:H,e_=void 0!==z&&z,eN=Q&&!!ex,eS=!eN&&!eu?.showRichDiff,[eI,ek]=(0,l.useState)(M),eL=(0,k.j5)(),{comparisonView:eD}=(0,k.L3)();E[0]!==F?(t=F.map(s4),E[0]=F,E[1]=t):t=E[1];let eT=t;E[2]!==P.hasCopilotAccess||E[3]!==W||E[4]!==Q||E[5]!==en||E[6]!==et||E[7]!==es||E[8]!==ea||E[9]!==el||E[10]!==eo||E[11]!==ec||E[12]!==ey?(n={isBinary:W,isSubmodule:Q,path:el,status:ey,repository:ec,newCommitOid:en,newTreeEntry:et,oldCommitOid:es,oldTreeEntry:ea,pathDigest:eo,hasCopilotAccess:P.hasCopilotAccess},E[2]=P.hasCopilotAccess,E[3]=W,E[4]=Q,E[5]=en,E[6]=et,E[7]=es,E[8]=ea,E[9]=el,E[10]=eo,E[11]=ec,E[12]=ey,E[13]=n):n=E[13];let eE=sG(n);E[14]!==ej?(a=async()=>{await ej(),ek(!0)},E[14]=ej,E[15]=a):a=E[15];let eA=a,{baseOid:eR,headOid:eO}=(0,k.E4)(),eP=(0,eQ.u)("cotd_ui");E[16]===Symbol.for("react.memo_cache_sentinel")?(d=(0,e9.G7)("pr_simple_diffs"),E[16]=d):d=E[16];let eF=d,{effectiveRange:eM}=(0,k.L3)(),{mutate:e$}=ne();E[17]!==eh?(u=()=>{eh(!0)},E[17]=eh,E[18]=u):u=E[18];let eB=u;E[19]!==eB?(m={F0:{startNewComment:eB,diffLineKey:s1}},E[19]=eB,E[20]=m):m=E[20];let eV=m;E[21]!==eP||E[22]!==e$||E[23]!==eM||E[24]!==eO||E[25]!==el||E[26]!==eh||E[27]!==eR?(h=e=>{let{onCompleted:t,onError:n,submitBatch:i,text:a}=e;eP?e$(new ReviewCommentFactory({filePath:el,effectiveDiffRange:eM,submitBatch:i,text:a}).fileRequestData(),{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment.databaseId),eh(!1)}}):e$({text:a,path:el,submitBatch:i,subjectType:o.Wr.File,comparisonEndOid:eO,comparisonStartOid:eR},{onError:n,onSuccess:e=>{t?.(e.thread.id,e.comment.databaseId),eh(!1)}})},E[21]=eP,E[22]=e$,E[23]=eM,E[24]=eO,E[25]=el,E[26]=eh,E[27]=eR,E[28]=h):h=E[28];let eU=h;E[29]!==R||E[30]!==eh?(f=()=>{eh(!1),R?.current?.focus()},E[29]=R,E[30]=eh,E[31]=f):f=E[31];let eq=f,eH=P?.avatarURL??"",eG=P?.splitPreference,eK=P?.login??"",eW=P?.lineSpacing,ez=P?.shouldDisplayComments,eZ=P?.shouldDisplayEditOptions,eY=P?.tabSize??4,eX=P?.canComment,e0=P?.canApplySuggestion;E[32]!==eH||E[33]!==eG||E[34]!==eK||E[35]!==eW||E[36]!==ez||E[37]!==eZ||E[38]!==eY||E[39]!==eX||E[40]!==e0?(p={avatarUrl:eH,diffViewPreference:eG,login:eK,lineSpacingPreference:eW,shouldDisplayComments:ez,shouldDisplayEditOptions:eZ,tabSizePreference:eY,viewerCanComment:eX,viewerCanApplySuggestion:e0},E[32]=eH,E[33]=eG,E[34]=eK,E[35]=eW,E[36]=ez,E[37]=eZ,E[38]=eY,E[39]=eX,E[40]=e0,E[41]=p):p=E[41];let e1=p,e2=(0,l.useId)(),e3=`heading-${e2}`;e:{if("split"===new URLSearchParams(g.cg?.location.search).get("diff")){y=!0;break e}y="split"===P.splitPreference}let e4=y,e6=et?.lineCount??ea?.lineCount??0;ea?.path,et?.path;t:{let e,t=ea?.path,n=et?.path;if(!t&&!n){v=void 0;break t}e="RENAMED"===ey?`${t} renamed to ${n}`:"DELETED"===ey||"REMOVED"===ey?t:n,v=`Diff for: ${e}`}let e7=v;E[42]!==eT||E[43]!==W||E[44]!==Z||E[45]!==X||E[46]!==en||E[47]!==et||E[48]!==ei||E[49]!==es||E[50]!==ea||E[51]!==el||E[52]!==eo||E[53]!==ey||E[54]!==ev?(b={diffLines:eT,isBinary:W,isTooBig:Z,linesChanged:X,newTreeEntry:et,newCommitOid:en,objectId:ei,oldTreeEntry:ea,oldCommitOid:es,path:el,pathDigest:eo,status:ey,truncatedReason:ev},E[42]=eT,E[43]=W,E[44]=Z,E[45]=X,E[46]=en,E[47]=et,E[48]=ei,E[49]=es,E[50]=ea,E[51]=el,E[52]=eo,E[53]=ey,E[54]=ev,E[55]=b):b=E[55];let e8=b,te=`diff-${eo}`,tt=`diff-${eo}`;E[56]===Symbol.for("react.memo_cache_sentinel")?(j=(0,x.$)(sS.A.diffTargetable,sS.A.diff),E[56]=j):j=E[56];let tn=`${eo}_${eT.length}`;E[57]!==ew?(w=eF?{contentVisibility:"auto",containIntrinsicSize:`auto ${ew}px`}:void 0,E[57]=ew,E[58]=w):w=E[58];let ti=`${void 0===q?0:q}px`;E[59]!==ti?(C={"--header-sticky-offset":ti},E[59]=ti,E[60]=C):C=E[60];let ta=`#diff-${eo}`,ts=eu?.richDiff?.canToggleRichDiff,tr=et?.mode,tl=et?.path,to=ea?.mode,td=ea?.path;E[61]!==O||E[62]!==er?(_=e=>er(e,!O),E[61]=O,E[62]=er,E[63]=_):_=E[63];let tc=eu?.onToggleRichDiff,tu=eu?.showRichDiff;return E[64]!==eg||E[65]!==O||E[66]!==$||E[67]!==ep||E[68]!==ef||E[69]!==e3||E[70]!==eC||E[71]!==W||E[72]!==eL||E[73]!==J||E[74]!==Y||E[75]!==X||E[76]!==ee||E[77]!==el||E[78]!==em||E[79]!==ey||E[80]!==ta||E[81]!==ts||E[82]!==tr||E[83]!==tl||E[84]!==to||E[85]!==td||E[86]!==_||E[87]!==tc||E[88]!==tu?(N=(0,i.jsx)(r.B,{headingId:e3,hiddenFeatures:eC,areLinesExpanded:ef,canExpandOrCollapseLines:eg,fileLinkHref:ta,isCollapsed:O,isBinary:W,size:$,canToggleRichDiff:ts,linesAdded:Y,linesChanged:X,linesDeleted:ee,newMode:tr,newPath:tl,oldMode:to,oldPath:td,patchStatus:ey,path:el,onToggleExpandAllLines:ep,onToggleFileCollapsed:_,onToggleDiffDisplay:tc,additionalLeftSideContent:J,rightSideContent:em,showRichDiff:tu,isInSingleFileMode:eL}),E[64]=eg,E[65]=O,E[66]=$,E[67]=ep,E[68]=ef,E[69]=e3,E[70]=eC,E[71]=W,E[72]=eL,E[73]=J,E[74]=Y,E[75]=X,E[76]=ee,E[77]=el,E[78]=em,E[79]=ey,E[80]=ta,E[81]=ts,E[82]=tr,E[83]=tl,E[84]=to,E[85]=td,E[86]=_,E[87]=tc,E[88]=tu,E[89]=N):N=E[89],E[90]!==C||E[91]!==N?(S=(0,i.jsx)("div",{className:sS.A.diffHeaderWrapper,style:C,children:N}),E[90]=C,E[91]=N,E[92]=S):S=E[92],E[93]!==O||E[94]!==eE||E[95]!==e8||E[96]!==U||E[97]!==eU||E[98]!==ef||E[99]!==B||E[100]!==K||E[101]!==e4||E[102]!==eI||E[103]!==eq||E[104]!==eA||E[105]!==el||E[106]!==ed||E[107]!==eu||E[108]!==eS||E[109]!==eN||E[110]!==ex||E[111]!==e7||E[112]!==e1?(I=O?null:(0,i.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[(0,i.jsxs)(i.Fragment,{children:[U.length>0&&(0,i.jsx)(sX,{conversationListThreads:U,filePath:el}),K&&(0,i.jsx)("div",{className:(0,x.$)("border rounded-2 color-border-default m-1 rounded-2 bgColor-default",sS.A.diffAddFileThread),children:(0,i.jsx)(eJ,{batchingEnabled:!0,filePath:el,fileLevelComment:!0,isLeftSide:void 0,viewerData:e1,onAddComment:eU,onClose:eq})})]}),eN&&(0,i.jsx)(sO,{submodule:ex}),eu?.showRichDiff&&(0,i.jsx)(e5,{queryConfig:eu.queryConfig,initialData:eu.richDiff}),eS&&(0,i.jsx)(sC,{hasExpandedAllRanges:ef,copilotChatReference:eE,diffEntryData:e8,baseHelpUrl:B,subjectId:ed||"",viewerData:e1,isSplitView:e4,diffLinesManuallyUnhidden:eI,onHandleLoadDiff:eA,tableAriaLabel:e7})]}),E[93]=O,E[94]=eE,E[95]=e8,E[96]=U,E[97]=eU,E[98]=ef,E[99]=B,E[100]=K,E[101]=e4,E[102]=eI,E[103]=eq,E[104]=eA,E[105]=el,E[106]=ed,E[107]=eu,E[108]=eS,E[109]=eN,E[110]=ex,E[111]=e7,E[112]=e1,E[113]=I):I=E[113],E[114]!==ew||E[115]!==e3||E[116]!==e_||E[117]!==A||E[118]!==tt||E[119]!==tn||E[120]!==w||E[121]!==S||E[122]!==I?(L=(0,i.jsxs)("div",{"data-estimated-height":ew,role:"region",ref:A,"aria-labelledby":e3,id:tt,className:j,"data-targeted":e_,style:w,children:[S,I]},tn),E[114]=ew,E[115]=e3,E[116]=e_,E[117]=A,E[118]=tt,E[119]=tn,E[120]=w,E[121]=S,E[122]=I,E[123]=L):L=E[123],E[124]!==eD||E[125]!==eL?(D=eL&&(0,i.jsxs)("div",{className:sS.A.diffFooter,children:[(0,i.jsx)(c.InfoIcon,{size:16,"aria-hidden":"true"}),(0,i.jsx)("span",{className:"text-center",children:s2(eD)})]}),E[124]=eD,E[125]=eL,E[126]=D):D=E[126],E[127]!==eb||E[128]!==eT||E[129]!==e6||E[130]!==eC||E[131]!==e4||E[132]!==et||E[133]!==ea||E[134]!==el||E[135]!==eV||E[136]!==te||E[137]!==L||E[138]!==D?(T=(0,i.jsxs)(G,{addInjectedContextLines:eb,diffAnchor:te,diffLines:eT,fileLineCount:e6,path:el,startNewConversationForLineOrFileMap:eV,hiddenFeatures:eC,isSplitView:e4,oldTreeEntry:ea,newTreeEntry:et,children:[L,D]}),E[127]=eb,E[128]=eT,E[129]=e6,E[130]=eC,E[131]=e4,E[132]=et,E[133]=ea,E[134]=el,E[135]=eV,E[136]=te,E[137]=L,E[138]=D,E[139]=T):T=E[139],T}:function({ref:e,addFileCommentButtonRef:t,collapsed:n,currentUser:a,diffLines:s,diffManuallyExpanded:d,diffSize:u,helpUrl:m,estimatedDiffHeight:h=0,fileComments:f,headerStickyOffset:p=0,hiddenFeatures:y=s0,isAddingFileComment:v,isBinary:b,isSelected:j=!1,isSubmodule:w,isTooBig:C,leftSideContent:_,linesAdded:N,linesChanged:S,linesDeleted:I,newTreeEntry:L,newCommitOid:D,objectId:T,oldTreeEntry:E,oldCommitOid:A,onToggleCollapse:R,path:O,pathDigest:P,pullRequestGlobalRelayId:F,repository:$,richDiffState:B,rightSideContent:V,setIsAddingFileComment:U,hasExpandedAllRanges:q,expandAllContextLines:H,canExpandOrCollapseLines:K,status:W,submodule:z,truncatedReason:Q,addInjectedContextLines:Z,loadDiff:J}){let Y=w&&!!z,X=!Y&&!B?.showRichDiff,[ee,et]=(0,l.useState)(d),en=(0,k.j5)(),{comparisonView:ei}=(0,k.L3)(),ea=(0,l.useMemo)(()=>s.map(e=>({...e,key:M(e)})),[s]),es=sG({isBinary:b,isSubmodule:w,path:O,status:W,repository:$,newCommitOid:D,newTreeEntry:L,oldCommitOid:A,oldTreeEntry:E,pathDigest:P,hasCopilotAccess:a.hasCopilotAccess}),er=(0,l.useCallback)(async()=>{await J(),et(!0)},[J]),{baseOid:el,headOid:eo}=(0,k.E4)(),ed=(0,eQ.u)("cotd_ui"),ec=(0,e9.G7)("pr_simple_diffs"),{effectiveRange:eu}=(0,k.L3)(),{mutate:em}=ne(),eh=(0,l.useCallback)(()=>{U(!0)},[U]),ef=(0,l.useMemo)(()=>({F0:{startNewComment:eh,diffLineKey:s1}}),[eh]),ep=(0,l.useMemo)(()=>({avatarUrl:a?.avatarURL??"",diffViewPreference:a?.splitPreference,login:a?.login??"",lineSpacingPreference:a?.lineSpacing,shouldDisplayComments:a?.shouldDisplayComments,shouldDisplayEditOptions:a?.shouldDisplayEditOptions,tabSizePreference:a?.tabSize??4,viewerCanComment:a?.canComment,viewerCanApplySuggestion:a?.canApplySuggestion}),[a.avatarURL,a.canApplySuggestion,a.canComment,a.lineSpacing,a.login,a.shouldDisplayComments,a.shouldDisplayEditOptions,a.splitPreference,a.tabSize]),eg=(0,l.useId)(),ey=`heading-${eg}`,ex=(0,l.useMemo)(()=>"split"===new URLSearchParams(g.cg?.location.search).get("diff")||"split"===a.splitPreference,[a.splitPreference]),ev=L?.lineCount??E?.lineCount??0,eb=(0,l.useMemo)(()=>{let e,t=E?.path,n=L?.path;if(t||n)return e="RENAMED"===W?`${t} renamed to ${n}`:"DELETED"===W||"REMOVED"===W?t:n,`Diff for: ${e}`},[W,E?.path,L?.path]),ej=(0,l.useMemo)(()=>({diffLines:ea,isBinary:b,isTooBig:C,linesChanged:S,newTreeEntry:L,newCommitOid:D,objectId:T,oldTreeEntry:E,oldCommitOid:A,path:O,pathDigest:P,status:W,truncatedReason:Q}),[ea,b,C,S,D,L,T,A,E,O,P,W,Q]);return(0,i.jsxs)(G,{addInjectedContextLines:Z,diffAnchor:`diff-${P}`,diffLines:ea,fileLineCount:ev,path:O,startNewConversationForLineOrFileMap:ef,hiddenFeatures:y,isSplitView:ex,oldTreeEntry:E,newTreeEntry:L,children:[(0,i.jsxs)("div",{"data-estimated-height":h,role:"region",ref:e,"aria-labelledby":ey,id:`diff-${P}`,className:(0,x.$)(sS.A.diffTargetable,sS.A.diff),"data-targeted":j,style:ec?{contentVisibility:"auto",containIntrinsicSize:`auto ${h}px`}:void 0,children:[(0,i.jsx)("div",{className:sS.A.diffHeaderWrapper,style:{"--header-sticky-offset":`${p}px`},children:(0,i.jsx)(r.B,{headingId:ey,hiddenFeatures:y,areLinesExpanded:q,canExpandOrCollapseLines:K,fileLinkHref:`#diff-${P}`,isCollapsed:n,isBinary:b,size:u,canToggleRichDiff:B?.richDiff?.canToggleRichDiff,linesAdded:N,linesChanged:S,linesDeleted:I,newMode:L?.mode,newPath:L?.path,oldMode:E?.mode,oldPath:E?.path,patchStatus:W,path:O,onToggleExpandAllLines:H,onToggleFileCollapsed:e=>R(e,!n),onToggleDiffDisplay:B?.onToggleRichDiff,additionalLeftSideContent:_,rightSideContent:V,showRichDiff:B?.showRichDiff,isInSingleFileMode:en})}),n?null:(0,i.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[(0,i.jsxs)(i.Fragment,{children:[f.length>0&&(0,i.jsx)(sX,{conversationListThreads:f,filePath:O}),v&&(0,i.jsx)("div",{className:(0,x.$)("border rounded-2 color-border-default m-1 rounded-2 bgColor-default",sS.A.diffAddFileThread),children:(0,i.jsx)(eJ,{batchingEnabled:!0,filePath:O,fileLevelComment:!0,isLeftSide:void 0,viewerData:ep,onAddComment:({onCompleted:e,onError:t,submitBatch:n,text:i})=>{ed?em(new ReviewCommentFactory({filePath:O,effectiveDiffRange:eu,submitBatch:n,text:i}).fileRequestData(),{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment.databaseId),U(!1)}}):em({text:i,path:O,submitBatch:n,subjectType:o.Wr.File,comparisonEndOid:eo,comparisonStartOid:el},{onError:t,onSuccess:t=>{e?.(t.thread.id,t.comment.databaseId),U(!1)}})},onClose:()=>{U(!1),t?.current?.focus()}})})]}),Y&&(0,i.jsx)(sO,{submodule:z}),B?.showRichDiff&&(0,i.jsx)(e5,{queryConfig:B.queryConfig,initialData:B.richDiff}),X&&(0,i.jsx)(sC,{hasExpandedAllRanges:q,copilotChatReference:es,diffEntryData:ej,baseHelpUrl:m,subjectId:F||"",viewerData:ep,isSplitView:ex,diffLinesManuallyUnhidden:ee,onHandleLoadDiff:er,tableAriaLabel:eb})]})]},`${P}_${ea.length}`),en&&(0,i.jsxs)("div",{className:sS.A.diffFooter,children:[(0,i.jsx)(c.InfoIcon,{size:16,"aria-hidden":"true"}),(0,i.jsx)("span",{className:"text-center",children:s2(ei)})]})]})};function s4(e){return{...e,key:M(e)}}let s5=(0,a.GV)()?function(e){let t,n,a,o,d,u=(0,s.c)(24),{path:m,pathDigest:h,linesAdded:f,linesChanged:p,linesDeleted:g,oldTreeEntry:y,newTreeEntry:v,status:b}=e,j=(0,l.useId)(),w=`heading-${j}`,[C,_]=(0,l.useState)(!1),N=`diff-${h}`;u[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,x.$)(sS.A.diffTargetable,sS.A.diff),u[0]=t):t=u[0];let S=`${h}_error`,I=v?.mode,k=v?.path,L=y?.mode,D=y?.path;return u[1]!==C?(n=()=>_(!C),u[1]=C,u[2]=n):n=u[2],u[3]!==w||u[4]!==C||u[5]!==f||u[6]!==p||u[7]!==g||u[8]!==m||u[9]!==b||u[10]!==I||u[11]!==k||u[12]!==L||u[13]!==D||u[14]!==n?(a=(0,i.jsx)("div",{className:sS.A.diffHeaderWrapper,children:(0,i.jsx)(r.B,{headingId:w,isCollapsed:C,isBinary:!1,linesAdded:f,linesChanged:p,linesDeleted:g,newMode:I,newPath:k,oldMode:L,oldPath:D,patchStatus:b,path:m,onToggleFileCollapsed:n})}),u[3]=w,u[4]=C,u[5]=f,u[6]=p,u[7]=g,u[8]=m,u[9]=b,u[10]=I,u[11]=k,u[12]=L,u[13]=D,u[14]=n,u[15]=a):a=u[15],u[16]!==C?(o=!C&&(0,i.jsx)("div",{className:"border position-relative rounded-bottom-2",children:(0,i.jsxs)(nq.E,{children:[(0,i.jsx)(nq.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:"medium",className:"fgColor-muted"})}),(0,i.jsx)(nq.E.Heading,{as:"h4",children:"There was an issue loading this file"}),(0,i.jsxs)(nq.E.Description,{children:[" ","Try refreshing the page or if the problem persists"," ",(0,i.jsx)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:(0,i.jsx)("u",{children:"contact support"})}),"."]})]})}),u[16]=C,u[17]=o):o=u[17],u[18]!==w||u[19]!==N||u[20]!==o||u[21]!==S||u[22]!==a?(d=(0,i.jsxs)("div",{role:"region","aria-labelledby":w,id:N,className:t,children:[a,o]},S),u[18]=w,u[19]=N,u[20]=o,u[21]=S,u[22]=a,u[23]=d):d=u[23],d}:function({path:e,pathDigest:t,linesAdded:n,linesChanged:a,linesDeleted:s,oldTreeEntry:o,newTreeEntry:d,status:u}){let m=(0,l.useId)(),h=`heading-${m}`,[f,p]=(0,l.useState)(!1);return(0,i.jsxs)("div",{role:"region","aria-labelledby":h,id:`diff-${t}`,className:(0,x.$)(sS.A.diffTargetable,sS.A.diff),children:[(0,i.jsx)("div",{className:sS.A.diffHeaderWrapper,children:(0,i.jsx)(r.B,{headingId:h,isCollapsed:f,isBinary:!1,linesAdded:n,linesChanged:a,linesDeleted:s,newMode:d?.mode,newPath:d?.path,oldMode:o?.mode,oldPath:o?.path,patchStatus:u,path:e,onToggleFileCollapsed:()=>p(!f)})}),!f&&(0,i.jsx)("div",{className:"border position-relative rounded-bottom-2",children:(0,i.jsxs)(nq.E,{children:[(0,i.jsx)(nq.E.Visual,{children:(0,i.jsx)(c.AlertIcon,{size:"medium",className:"fgColor-muted"})}),(0,i.jsx)(nq.E.Heading,{as:"h4",children:"There was an issue loading this file"}),(0,i.jsxs)(nq.E.Description,{children:[" ","Try refreshing the page or if the problem persists"," ",(0,i.jsx)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:(0,i.jsx)("u",{children:"contact support"})}),"."]})]})})]},`${t}_error`)},s6=(0,l.memo)(s3);try{s3.displayName||(s3.displayName="DiffUnmemoized")}catch{}try{s5.displayName||(s5.displayName="DiffErrorFallback")}catch{}try{s6.displayName||(s6.displayName="Diff")}catch{}},16790:(e,t,n)=>{n.d(t,{eX:()=>d,xe:()=>c,zq:()=>o});var i=n(74848),a=n(68273),s=n(16522),r=n(96540);let l=(0,r.createContext)({loggingPayload:void 0,loggingPrefix:void 0}),o=(0,a.kw)()?function(e){let t,n=(0,s.c)(3),{children:a,loggingInfo:r}=e;return n[0]!==a||n[1]!==r?(t=(0,i.jsx)(l,{value:r,children:a}),n[0]=a,n[1]=r,n[2]=t):t=n[2],t}:function({children:e,loggingInfo:t}){return(0,i.jsx)(l,{value:t,children:e})},d=(0,a.kw)()?function(){let e=(0,r.useContext)(l);return void 0!==e.loggingPayload&&void 0!==e.loggingPrefix}:function(){let e=(0,r.useContext)(l);return void 0!==e.loggingPayload&&void 0!==e.loggingPrefix},c=(0,a.kw)()?function(){return(0,r.useContext)(l)}:function(){return(0,r.useContext)(l)};try{l.displayName||(l.displayName="CommitsLoggingContext")}catch{}try{o.displayName||(o.displayName="CommitsLoggingInfoProvider")}catch{}},17005:(e,t,n)=>{n.d(t,{l:()=>u});var i=n(74848),a=n(16522),s=n(77274),r=n(96379),l=n(96540),o=n(35247),d=n(54508);let c=[{name:"Hate it",value:"VERY_NEGATIVE",icon:s.YS,color:"veryDissatisfied"},{name:"Not great",value:"NEGATIVE",icon:s.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:"POSITIVE",icon:s.Cf,color:"satisfied"},{name:"Love it",value:"VERY_POSITIVE",icon:s.mN,color:"verySatisfied"}];function u(e){let t,n,u,m,h=(0,a.c)(7),{ref:f,mode:p,returnFocusRef:g}=e,y=(0,l.useRef)(null),x=(0,l.useRef)(null),v=(0,l.useRef)(void 0);h[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>({openDialog:e=>{v.current=e,o.W.copilotChatInterviewSurvey?y.current?.openDialog():x.current?.openDialog(e)}}),h[0]=t):t=h[0],(0,l.useImperativeHandle)(f,t),h[1]!==p?(n=async(e,t)=>{let n=[];if(null==e&&n.push("Please select a rating."),t.length>2e3&&n.push("Please keep your feedback within 2000 characters or less."),n.length>0)return n;let i={rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:p};try{(await (0,r.lS)("/github-copilot/feedback",{method:"POST",body:i})).ok||n.push("An error occurred while submitting your feedback.")}catch{n.push("An error occurred while submitting your feedback.")}return n},h[1]=p,h[2]=n):n=h[2];let b=n;return h[3]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsx)(d.E,{ref:y,onClose:e=>{"no-thanks"===e&&x.current?.openDialog(v.current)}}),h[3]=u):u=h[3],h[4]!==b||h[5]!==g?(m=(0,i.jsxs)(i.Fragment,{children:[u,(0,i.jsx)(s.NE,{ref:x,options:c,onSubmit:b,returnFocusRef:g})]}),h[4]=b,h[5]=g,h[6]=m):m=h[6],m}u.displayName="ConversationFeedbackDialog"},18373:(e,t,n)=>{n.d(t,{U:()=>v});var i=n(74848),a=n(16522),s=n(96540),r=n(43883),l=n(21373),o=n(57478),d=n(72511),c=n(15837),u=n(86877),m=n(10576),h=n(46251),f=n(33989),p=n(57387),g=n(38621),y=n(55127),x=n.n(y);function v(e){let t,n,f,y,v,j,w,C,_,N,S,I,k,L,D,T,E,A,R,O,P=(0,a.c)(60),{setOpen:F,count:M,dismissalOptions:$,error:B,isPending:V,delegatedAlertDismissalEnabled:U,codeSecurity:q,onSubmit:H}=e,[G,K]=(0,s.useState)(""),[W,z]=(0,s.useState)(""),[Q,Z]=(0,s.useState)(!1);P[0]!==U||P[1]!==W?(t=!U||!!W.trim(),P[0]=U,P[1]=W,P[2]=t):t=P[2];let J=t,Y=!!G&&J;P[3]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{K(e??"")},P[3]=n):n=P[3];let X=n,ee=q?"alert":"finding";if(P[4]!==M||P[5]!==ee){let e,t,n,i,a,s,r;e=x()(ee,M),t=M>1,n=`Dismiss ${e}`,i=`Select a reason to dismiss ${x()("this",M)} ${e}.`,a=`Request to dismiss ${e}`,s=t?`These ${e} need approval before they can be dismissed. Requests are sent to all approvers.`:`This ${e} needs approval before it can be dismissed. Requests are sent to all approvers.`,r=t?`These ${e} are not valid`:`This ${e} is not valid`,f={title:n,subtitle:i,submitButtonLabel:"Dismiss",delegatedAlertDismissal:{title:a,subtitle:s,submitButtonLabel:"Submit request"},reasons:{falsePositiveDescription:r,usedInTestsDescription:t?`These ${e} are not in production code`:`This ${e} is not in production code`,wontFixDescription:t?`These ${e} are not relevant`:`This ${e} is not relevant`}},P[4]=M,P[5]=ee,P[6]=f}else f=P[6];let{title:et,subtitle:en,submitButtonLabel:ei,delegatedAlertDismissal:ea,reasons:es}=f;P[7]!==es.falsePositiveDescription?(y={value:"FALSE_POSITIVE",label:"False positive",description:es.falsePositiveDescription},P[7]=es.falsePositiveDescription,P[8]=y):y=P[8],P[9]!==es.usedInTestsDescription?(v={value:"USED_IN_TESTS",label:"Used in tests",description:es.usedInTestsDescription},P[9]=es.usedInTestsDescription,P[10]=v):v=P[10],P[11]!==es.wontFixDescription?(j={value:"WONT_FIX",label:"Won't fix",description:es.wontFixDescription},P[11]=es.wontFixDescription,P[12]=j):j=P[12],P[13]!==y||P[14]!==v||P[15]!==j?(w=[y,v,j],P[13]=y,P[14]=v,P[15]=j,P[16]=w):w=P[16];let er=w,el=$?.length?$:er;P[17]!==W||P[18]!==Y||P[19]!==H||P[20]!==G?(C=async()=>{Y?(Z(!1),H({resolution:G,dismissalComment:W})):Z(!0)},P[17]=W,P[18]=Y,P[19]=H,P[20]=G,P[21]=C):C=P[21];let eo=C;P[22]!==F?(_=()=>F(!1),P[22]=F,P[23]=_):_=P[23];let ed=U?ea.title:et,ec=U?ea.subtitle:en;return P[24]!==M||P[25]!==ea||P[26]!==U||P[27]!==V||P[28]!==Y||P[29]!==eo||P[30]!==F||P[31]!==ei?(N=()=>(0,i.jsxs)(p.l.Footer,{children:[(0,i.jsx)(l.Q,{onClick:()=>F(!1),children:"Cancel"}),(0,i.jsxs)(l.Q,{variant:"primary",onClick:eo,disabled:!Y||V,leadingVisual:V?g.SyncIcon:null,children:[(0,i.jsx)("span",{children:U?ea.submitButtonLabel:ei}),M>1&&(0,i.jsx)(o.A,{scheme:"primary",className:"ml-2",children:(0,r.ai)(M)})]})]}),P[24]=M,P[25]=ea,P[26]=U,P[27]=V,P[28]=Y,P[29]=eo,P[30]=F,P[31]=ei,P[32]=N):N=P[32],P[33]!==B?(S=B&&(0,i.jsx)(d.A,{variant:"danger",children:B.message}),P[33]=B,P[34]=S):S=P[34],P[35]===Symbol.for("react.memo_cache_sentinel")?(I=(0,i.jsx)(c.A.Label,{visuallyHidden:!0,children:"Dismissal reason"}),P[35]=I):I=P[35],P[36]!==el?(k=el.map(b),P[36]=el,P[37]=k):k=P[37],P[38]!==V||P[39]!==k?(L=(0,i.jsxs)(c.A,{name:"resolution",onChange:X,disabled:V,children:[I,k]}),P[38]=V,P[39]=k,P[40]=L):L=P[40],P[41]!==U?(D=(0,i.jsx)(u.A.Label,{required:U,children:"Comment"}),P[41]=U,P[42]=D):D=P[42],P[43]===Symbol.for("react.memo_cache_sentinel")?(T=(0,i.jsx)(m.Ay,{placeholder:"Add a comment",rows:5,maxLength:280,name:"dismissal_comment",onChange:e=>z(e.target.value),className:"BaseSharedDismissalDialog-module__dismissalCommentTextarea--xxBPO"}),P[43]=T):T=P[43],P[44]!==Q?(E=Q&&(0,i.jsx)(u.A.Validation,{variant:"error",children:"This field is required"}),P[44]=Q,P[45]=E):E=P[45],P[46]!==V||P[47]!==D||P[48]!==E?(A=(0,i.jsx)("div",{children:(0,i.jsxs)(u.A,{disabled:V,children:[D,T,E]})}),P[46]=V,P[47]=D,P[48]=E,P[49]=A):A=P[49],P[50]!==S||P[51]!==L||P[52]!==A?(R=(0,i.jsxs)(h.B,{gap:"normal",children:[S,L,A]}),P[50]=S,P[51]=L,P[52]=A,P[53]=R):R=P[53],P[54]!==ed||P[55]!==ec||P[56]!==N||P[57]!==R||P[58]!==_?(O=(0,i.jsx)(p.l,{width:"large",height:"auto",onClose:_,title:ed,subtitle:ec,renderFooter:N,children:R}),P[54]=ed,P[55]=ec,P[56]=N,P[57]=R,P[58]=_,P[59]=O):O=P[59],O}function b(e){return(0,i.jsxs)(u.A,{children:[(0,i.jsx)(f.A,{value:e.value}),(0,i.jsx)(u.A.Label,{children:e.label}),(0,i.jsx)(u.A.Caption,{children:e.description})]},e.value)}try{v.displayName||(v.displayName="BaseSharedDismissalDialog")}catch{}},18878:(e,t,n)=>{n.d(t,{p:()=>H,V:()=>q});var i=n(74848),a=n(16522),s=n(53419),r=n(79634),l=n(97286),o=n(38621),d=n(5524),c=n(31021),u=n(86877),m=n(30093),h=n(57387),f=n(96540),p=n(62421),g=n(25641),y=n(35247),x=n(2635),v=n(33592),b=n(40260),j=n(71315),w=n(21373),C=n(69726),_=n(98552),N=n(46251),S=n(20139);let I="ConversationSharingDialog-module__success--zCOcd",k="ConversationSharingDialog-module__successIcon--z1nhd",L="ConversationSharingDialog-module__quickFadeUp--_qvsX",D=e=>{let t,n,r,l,d,c,p,g,D,T,E,A,R,O,P,F,M,$,B,V,U,q,H,G,K,W,z,Q,Z,J=(0,a.c)(94),{closeDialog:Y,threadId:X,returnFocusRef:ee,showThirdPartyMcpWarning:et}=e,en=void 0!==et&&et,ei=(0,x.Pk)(),ea=(0,v.b)(),[es,er]=(0,f.useState)(!1),[el,eo]=(0,f.useState)(!1),[ed,ec]=(0,f.useState)(!1),[eu,em]=(0,f.useState)(!1),{selectedThreadID:eh,ssoOrganizations:ef,apiUrl:ep,threads:eg}=ei;J[0]!==eh||J[1]!==X||J[2]!==eg?(t=eg.get(X||eh),J[0]=eh,J[1]=X,J[2]=eg,J[3]=t):t=J[3];let ey=t;J[4]!==ey?.sharedID?(n=()=>ey?.sharedID||"",J[4]=ey?.sharedID,J[5]=n):n=J[5];let[ex,ev]=(0,f.useState)(n);J[6]!==ey?(r=()=>ey?.sharedMessageID?ey.sharedMessageID:"",J[6]=ey,J[7]=r):r=J[7];let[eb,ej]=(0,f.useState)(r),ew=j.fV.origin,eC=`${ew}/copilot/share/${ex}`;J[8]!==es?(l=()=>{if(es){let e=setTimeout(()=>er(!1),1500);return()=>clearTimeout(e)}},d=[es],J[8]=es,J[9]=l,J[10]=d):(l=J[9],d=J[10]),(0,f.useEffect)(l,d),J[11]!==ed?(c=()=>{if(ed){let e=setTimeout(()=>ec(!1),1500);return()=>clearTimeout(e)}},p=[ed],J[11]=ed,J[12]=c,J[13]=p):(c=J[12],p=J[13]),(0,f.useEffect)(c,p),J[14]!==eC?(g=async()=>{try{await (0,b.D)(eC),er(!0),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},J[14]=eC,J[15]=g):g=J[15];let e_=g;J[16]!==ey?.sharedID||J[17]!==eh||J[18]!==X?(D=()=>{(X||eh)&&ev(ey?.sharedID||"")},J[16]=ey?.sharedID,J[17]=eh,J[18]=X,J[19]=D):D=J[19];let eN=ey?.sharedID;J[20]!==eh||J[21]!==eN||J[22]!==X?(T=[eN,eh,X],J[20]=eh,J[21]=eN,J[22]=X,J[23]=T):T=J[23],(0,f.useEffect)(D,T),J[24]!==ep||J[25]!==ea||J[26]!==eh||J[27]!==ef||J[28]!==X?(E=async()=>{eo(!0);let e=X||eh,t=new S.k(ep,ef),n=await t.shareThread(e,y.W.copilotShareActiveSubthread&&e===eh?ea.FindLastMessageID():"");if(n.ok){eo(!1);let{sharedAt:t,sharedID:i,sharedMessageID:a}=n.payload;ev(i),ec(!0),ej(a),ea.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:i,sharedAt:t,sharedMessageID:a}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:i})}else eo(!1)},J[24]=ep,J[25]=ea,J[26]=eh,J[27]=ef,J[28]=X,J[29]=E):E=J[29];let eS=E;J[30]!==ep||J[31]!==ea||J[32]!==eh||J[33]!==ex||J[34]!==eu||J[35]!==ef||J[36]!==X?(A=async()=>{if(!eu)return void em(!0);em(!1),eo(!0);let e=X||eh,t=new S.k(ep,ef),n=await t.unshareThread(e);if(n.ok){eo(!1),ej("");let{sharedID:t,sharedAt:i,sharedMessageID:a}=n.payload;ea.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:i,sharedMessageID:a}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:ex})}else eo(!1)},J[30]=ep,J[31]=ea,J[32]=eh,J[33]=ex,J[34]=eu,J[35]=ef,J[36]=X,J[37]=A):A=J[37];let eI=A;J[38]!==eS||J[39]!==el||J[40]!==ex?(R=()=>{if(!ex)return(0,i.jsx)(w.Q,{variant:"primary",disabled:el,onClick:eS,children:"Share"})},J[38]=eS,J[39]=el,J[40]=ex,J[41]=R):R=J[41];let ek=R;J[42]!==e_||J[43]!==ex?(O=()=>{if(ex)return(0,i.jsx)(w.Q,{variant:"primary",autoFocus:!0,onClick:e_,children:"Copy link"})},J[42]=e_,J[43]=ex,J[44]=O):O=J[44];let eL=O;J[45]!==eI||J[46]!==el||J[47]!==ex?(P=()=>{if(ex)return(0,i.jsx)(w.Q,{variant:"danger",disabled:el,onClick:eI,children:"Unshare"})},J[45]=eI,J[46]=el,J[47]=ex,J[48]=P):P=J[48];let eD=P;J[49]!==ex||J[50]!==eu?(F=()=>{if(ex&&eu)return(0,i.jsx)(w.Q,{variant:"default",onClick:()=>em(!1),className:"ConversationSharingDialog-module__cancelButton--CL34L",children:"Cancel"})},J[49]=ex,J[50]=eu,J[51]=F):F=J[51];let eT=F;J[52]!==es||J[53]!==el||J[54]!==ex||J[55]!==eu||J[56]!==ed?(M=()=>el?(0,i.jsxs)("div",{className:L,children:[(0,i.jsx)(C.A,{size:"small",className:"ConversationSharingDialog-module__spinner--KpY5f"}),ex?"Unsharing chat...":"Sharing chat..."]}):eu?(0,i.jsx)("div",{className:L,children:(0,i.jsx)(_.A,{size:"medium",className:"ConversationSharingDialog-module__warningText--t4nnB",children:"Confirm unsharing this chat?"})}):es?(0,i.jsxs)("div",{className:L,children:[(0,i.jsx)(o.CheckIcon,{className:k}),(0,i.jsx)(_.A,{size:"medium",className:I,children:"Copied to clipboard"})]}):ed?(0,i.jsxs)("div",{className:L,children:[(0,i.jsx)(o.CheckIcon,{className:k}),(0,i.jsx)(_.A,{size:"medium",className:I,children:"Chat shared"})]}):ex?(0,i.jsxs)("div",{children:[(0,i.jsx)(o.UnlockIcon,{className:"ConversationSharingDialog-module__lockIcon--yCWzZ"}),(0,i.jsx)(_.A,{size:"medium",className:"ConversationSharingDialog-module__mutedText--r3ZSy",children:"Visible to anyone with the link"})]}):(0,i.jsx)("div",{}),J[52]=es,J[53]=el,J[54]=ex,J[55]=eu,J[56]=ed,J[57]=M):M=J[57];let eE=M,eA=ex?"Chat shared":"Share chat";return J[58]!==eb||J[59]!==ex||J[60]!==en?($=(0,i.jsx)(N.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:eb?(0,i.jsx)("span",{children:(0,i.jsx)("span",{className:"ConversationSharingDialog-module__snapshotText--XNu1W",children:"This shared chat is a snapshot, accessible to anyone with the link. It will not update with new messages."})}):ex?(0,i.jsx)("span",{children:`This chat and future messages are visible to anyone with the link. If private repository content
                is included, repository access is required to view.${en?" Third-party MCP tool calling is disabled while this thread is shared.":""}`}):(0,i.jsx)("span",{children:`When shared, this chat and future messages will be visible to anyone with the link. If private repository content is included, repository access is required to view.${en?" Third-party MCP tool calling will be disabled if the thread is shared.":""}`})}),J[58]=eb,J[59]=ex,J[60]=en,J[61]=$):$=J[61],J[62]!==eC||J[63]!==ex?(B=ex&&(0,i.jsx)("div",{className:"ConversationSharingDialog-module__innerContainer--OaIjU",children:(0,i.jsx)("div",{className:"ConversationSharingDialog-module__sharedLinkContainer--jDnVn",children:(0,i.jsxs)(u.A,{id:"share-link",className:"ConversationSharingDialog-module__textInputContainer--jHhX6",children:[(0,i.jsx)(u.A.Label,{children:"Share link"}),(0,i.jsx)(m.A,{size:"large",readOnly:!0,value:ex&&eC,className:"ConversationSharingDialog-module__textInput--DymUf"})]})})}),J[62]=eC,J[63]=ex,J[64]=B):B=J[64],J[65]!==$||J[66]!==B?(V=(0,i.jsxs)(N.B,{direction:"vertical",gap:"condensed",children:[$,B]}),J[65]=$,J[66]=B,J[67]=V):V=J[67],J[68]!==eE?(U=(0,i.jsx)("div",{role:"status",children:eE()}),J[68]=eE,J[69]=U):U=J[69],J[70]!==ek?(q=ek(),J[70]=ek,J[71]=q):q=J[71],J[72]!==eT?(H=eT(),J[72]=eT,J[73]=H):H=J[73],J[74]!==eD?(G=eD(),J[74]=eD,J[75]=G):G=J[75],J[76]!==eL?(K=eL(),J[76]=eL,J[77]=K):K=J[77],J[78]!==q||J[79]!==H||J[80]!==G||J[81]!==K?(W=(0,i.jsxs)(N.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"end",children:[q,H,G,K]}),J[78]=q,J[79]=H,J[80]=G,J[81]=K,J[82]=W):W=J[82],J[83]!==U||J[84]!==W?(z=(0,i.jsxs)(N.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"space-between",className:"ConversationSharingDialog-module__buttonStack--gWe8E",children:[U,W]}),J[83]=U,J[84]=W,J[85]=z):z=J[85],J[86]!==V||J[87]!==z?(Q=(0,i.jsxs)("div",{className:"ConversationSharingDialog-module__container--wNKq6",children:[V,z]}),J[86]=V,J[87]=z,J[88]=Q):Q=J[88],J[89]!==Y||J[90]!==ee||J[91]!==eA||J[92]!==Q?(Z=(0,i.jsx)(h.l,{title:eA,onClose:Y,width:"large",returnFocusRef:ee,children:Q}),J[89]=Y,J[90]=ee,J[91]=eA,J[92]=Q,J[93]=Z):Z=J[93],Z};try{D.displayName||(D.displayName="ConversationSharingDialog")}catch{}var T=n(94236),E=n(1747),A=n(71941),R=n(23475);let O={json:{name:"JSON",mimeType:"application/json",exportHandler:function(e,t,n,i,a){let s,r,l=new Blob([(s=e.map(F),r=Object.fromEntries(t),JSON.stringify({currentUserLogin:n,threadUrl:P(i),threadName:a,messages:s,files:r},null,2))],{type:O.json.mimeType});return{url:URL.createObjectURL(l),exportName:`${$(a)}.json`}}},md:{name:"Markdown",mimeType:"text/markdown",exportHandler:M}};function P(e){return`${window.location.origin}/copilot/c/${e}`}function F(e){return{id:e.id,parentMessageID:e.parentMessageID,intent:e.intent,role:e.role,model:e.model,content:e.content,createdAt:e.createdAt,threadID:e.threadID,references:e.references,skillExecutions:e.skillExecutions}}async function M(e,t,n,i,a){let s=[new File([function(e,t,n,i){let a=e.filter(e=>"root"!==e.id),s=new Map;for(let e of a){let t=e.parentMessageID;if(t){s.has(t)||s.set(t,{childMessageCount:0});let e=s.get(t);e.childMessageCount+=1}}let r=`# Copilot Chat Conversation Export: ${i}

**User:** @${t}
**Thread URL:** ${P(n)}`,l=a.map(e=>{let n="user"===e.role?`## @${t}`:"## Copilot",i=e.content||"",a=`${n}

${i}
`;if(e.parentMessageID){let t=s.get(e.parentMessageID);t&&t.childMessageCount>1&&(a+=`
*System: User retried message*
`)}return a}).join(`
`);return`${r}

${l}`}(e,n,i,a)],`${$(a)}.md`)];if(t.size>0){for(let[,e]of t)for(let t of e)"value"in t&&"string"==typeof t.value&&s.push(new File([t.value],`v${t.version}_${t.name}`));let e=await (0,A._6)(s).blob();return{url:URL.createObjectURL(e),exportName:`${$(a)}.zip`}}{let e=new Blob(s,{type:O.md.mimeType});return{url:URL.createObjectURL(e),exportName:`${$(a)}.md`}}}function $(e){return(0,R.A)(`${new Date().toDateString()} ${e}`)}function B(e){(0,s.BI)("dotcom_chat.activate",{target:e,mode:"immersive"})}function V(e){let t,n,s,r,l=(0,a.c)(18),{fileType:o,threadName:c,threadId:u,currentUserLogin:m,messages:h}=e,f=(0,v.b)(),{items:p,versionedItems:g}=(0,E.xx)();l[0]!==p||l[1]!==g?(t=function(e,t){let n=new Map;for(let[,i]of t){let t=i.map(t=>e.get(t)).filter(e=>void 0!==e).map((e,t)=>({version:t+1,...e}));t.length>0&&t[0]?.type==="file"&&t[0]?.name&&n.set(t[0].name,t)}return n}(p,g),l[0]=p,l[1]=g,l[2]=t):t=l[2];let y=t,x=O[o].name;l[3]!==x?(n=x.toUpperCase(),l[3]=x,l[4]=n):n=l[4];let b=`CONVERSATION_CONTEXT_MENU_EXPORT_${n}`;l[5]!==m||l[6]!==o||l[7]!==y||l[8]!==f||l[9]!==h||l[10]!==b||l[11]!==u||l[12]!==c?(s=async()=>{try{let{url:e,exportName:t}=await O[o].exportHandler(h,y,m,u,c),n=document.createElement("a");n.href=e,n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),B(`${b}_SUCCEEDED`),setTimeout(()=>URL.revokeObjectURL(e),0)}catch{B(`${b}_DOWNLOAD_FAILED`),f.addAmbientError("There was an error exporting the conversation. Please try again.")}},l[5]=m,l[6]=o,l[7]=y,l[8]=f,l[9]=h,l[10]=b,l[11]=u,l[12]=c,l[13]=s):s=l[13];let j=s,w=`Export conversation as ${x}`;return l[14]!==x||l[15]!==j||l[16]!==w?(r=(0,i.jsx)(d.l.Item,{"aria-label":w,onSelect:j,children:x}),l[14]=x,l[15]=j,l[16]=w,l[17]=r):r=l[17],r}try{V.displayName||(V.displayName="ExportActionItem")}catch{}function U(e){let t,n,s=(0,a.c)(6),{threadName:r,threadId:l,currentUserLogin:c,messages:u,selectedThreadID:m}=e;return m!==l?null:(s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(T.W.Anchor,{children:(0,i.jsxs)(d.l.Item,{children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(o.DownloadIcon,{})}),"Export"]})}),s[0]=t):t=s[0],s[1]!==c||s[2]!==u||s[3]!==l||s[4]!==r?(n=(0,i.jsxs)(T.W,{children:[t,(0,i.jsx)(T.W.Overlay,{children:(0,i.jsxs)(d.l,{children:[(0,i.jsx)(V,{threadName:r,fileType:"json",threadId:l,currentUserLogin:c,messages:u}),(0,i.jsx)(V,{threadName:r,fileType:"md",threadId:l,currentUserLogin:c,messages:u})]})})]}),s[1]=c,s[2]=u,s[3]=l,s[4]=r,s[5]=n):n=s[5],n)}try{U.displayName||(U.displayName="ExportActionList")}catch{}function q(e){let t,n,l,c,u,m,h,f,p,y,v,b=(0,a.c)(32),{onOpenDialog:j,showShare:w,hideShareOnDesktop:C,isShared:_,threadName:N,threadId:S}=e,I=void 0===w||w,k=void 0!==C&&C,L=void 0!==_&&_,{canShareThread:D}=(0,r.X)(),{isWaitingOnCopilot:T,messages:E,currentUserLogin:A,selectedThreadID:R}=(0,x.Pk)();b[0]!==E?(t=(0,g.Q7)(E),b[0]=E,b[1]=t):t=b[1];let O=t;b[2]!==E?(n=(0,g.UM)(E),b[2]=E,b[3]=n):n=b[3];let P=n,F=O.length>0||T||P;return b[4]!==j?(l=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),j("rename")},b[4]=j,b[5]=l):l=b[5],b[6]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(o.PencilIcon,{})}),b[6]=c):c=b[6],b[7]!==l?(u=(0,i.jsxs)(d.l.Item,{onSelect:l,children:[c,"Rename"]}),b[7]=l,b[8]=u):u=b[8],b[9]!==D||b[10]!==k||b[11]!==L||b[12]!==j||b[13]!==F||b[14]!==I?(m=I&&D&&(0,i.jsxs)(d.l.Item,{className:k?"ConversationActions-module__hideOnDesktop--J5K5t":void 0,disabled:F,onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),j("share")},children:[(0,i.jsx)(d.l.LeadingVisual,{children:L?(0,i.jsx)(o.UnlockIcon,{}):(0,i.jsx)(o.LockIcon,{})}),"Share"]}),b[9]=D,b[10]=k,b[11]=L,b[12]=j,b[13]=F,b[14]=I,b[15]=m):m=b[15],b[16]!==A||b[17]!==E||b[18]!==R||b[19]!==S||b[20]!==N?(h=(0,i.jsx)(U,{threadName:N,threadId:S,currentUserLogin:A,messages:E,selectedThreadID:R}),b[16]=A,b[17]=E,b[18]=R,b[19]=S,b[20]=N,b[21]=h):h=b[21],b[22]!==j?(f=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),j("delete")},b[22]=j,b[23]=f):f=b[23],b[24]===Symbol.for("react.memo_cache_sentinel")?(p=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(o.TrashIcon,{})}),b[24]=p):p=b[24],b[25]!==f?(y=(0,i.jsxs)(d.l.Item,{variant:"danger",onSelect:f,children:[p,"Delete"]}),b[25]=f,b[26]=y):y=b[26],b[27]!==h||b[28]!==y||b[29]!==u||b[30]!==m?(v=(0,i.jsxs)(i.Fragment,{children:[u,m,h,y]}),b[27]=h,b[28]=y,b[29]=u,b[30]=m,b[31]=v):v=b[31],v}function H(e){let t,n,r,o,d,c,u,m,h=(0,a.c)(35),{visibleDialog:f,onClose:g,threadName:b,threadId:j,selectedThreadId:w,onStartLoading:C,onFinishLoading:_,returnFocusRef:N}=e,{threads:S}=(0,x.Pk)(),I=(0,v.b)(),k=(0,p.G)();h[0]===Symbol.for("react.memo_cache_sentinel")?(t=["copilot-chat-mcps"],h[0]=t):t=h[0],h[1]!==I?(n={queryKey:t,queryFn:async()=>I.service.fetchMCPServers(),placeholderData:G},h[1]=I,h[2]=n):n=h[2];let{data:L}=(0,l.I)(n);h[3]!==L?(r=L||[],h[3]=L,h[4]=r):r=h[4];let T=r,E=y.W.copilotThirdPartyMcp&&T.length>0;h[5]!==g?(o=()=>{(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"}),g()},h[5]=g,h[6]=o):o=h[6];let A=o;h[7]!==I||h[8]!==k||h[9]!==g||h[10]!==_||h[11]!==C||h[12]!==w||h[13]!==j||h[14]!==S?(d=async()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),C();let e=S.get(j);e&&(j===w&&await k({clearTopic:!0,includeThreads:!1}),await I.deleteThread(e)),_(),g()},h[7]=I,h[8]=k,h[9]=g,h[10]=_,h[11]=C,h[12]=w,h[13]=j,h[14]=S,h[15]=d):d=h[15];let R=d;h[16]!==I||h[17]!==g||h[18]!==_||h[19]!==C||h[20]!==j||h[21]!==S?(c=async e=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),C();let t=S.get(j);t&&await I.renameThread(t,e),_(),g()},h[16]=I,h[17]=g,h[18]=_,h[19]=C,h[20]=j,h[21]=S,h[22]=c):c=h[22];let O=c;return h[23]!==A||h[24]!==R||h[25]!==g||h[26]!==N||h[27]!==E||h[28]!==O||h[29]!==j||h[30]!==b||h[31]!==f?(u="delete"===f?(0,i.jsx)(K,{onCancel:g,onConfirm:R,returnFocusRef:N}):"rename"===f?(0,i.jsx)(W,{onCancel:g,currentName:b,onSubmit:O,returnFocusRef:N}):"share"===f?(0,i.jsx)(D,{closeDialog:A,threadId:j,returnFocusRef:N,showThirdPartyMcpWarning:E}):null,h[23]=A,h[24]=R,h[25]=g,h[26]=N,h[27]=E,h[28]=O,h[29]=j,h[30]=b,h[31]=f,h[32]=u):u=h[32],h[33]!==u?(m=(0,i.jsx)(i.Fragment,{children:u}),h[33]=u,h[34]=m):m=h[34],m}function G(e){return e}let K=e=>{let t,n=(0,a.c)(4),{onConfirm:r,onCancel:l,returnFocusRef:o}=e;return n[0]!==l||n[1]!==r||n[2]!==o?(t=(0,i.jsx)(c.K,{title:"Delete chat",onClose:e=>{if("confirm"===e){(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"});let e=o.current?.closest("nav,aside,section");r(),window.setTimeout(()=>{e instanceof HTMLElement&&e.focus()},0)}else(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),l(),window.setTimeout(()=>o.current?.focus(),0)},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this chat? This action cannot be undone."}),n[0]=l,n[1]=r,n[2]=o,n[3]=t):t=n[3],t},W=e=>{let t,n,r,l,o,d,c,p,g,y,x,v,b=(0,a.c)(34),{currentName:j,onCancel:w,onSubmit:C,returnFocusRef:_}=e,[N,S]=(0,f.useState)(void 0),I=(0,f.useRef)(null),k=(0,f.useId)(),L=(0,f.useId)();b[0]!==C?(t=e=>{e.preventDefault();let t=I.current?.value?.trim()??"";t?t.length>100?(S("max_length"),I.current?.focus()):(S(void 0),C(t)):(S("required"),I.current?.focus())},b[0]=C,b[1]=t):t=b[1];let D=t;b[2]!==w?(n=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),w()},b[2]=w,b[3]=n):n=b[3];let T=n;b[4]!==L?(r=(0,i.jsx)("span",{id:L,children:"Rename chat"}),b[4]=L,b[5]=r):r=b[5],b[6]!==T?(l={content:"Cancel",onClick:T},b[6]=T,b[7]=l):l=b[7],b[8]!==k?(o={content:"Update",buttonType:"primary",type:"submit",form:k,onClick:z},b[8]=k,b[9]=o):o=b[9],b[10]!==l||b[11]!==o?(d=[l,o],b[10]=l,b[11]=o,b[12]=d):d=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(u.A.Label,{visuallyHidden:!0,children:"Rename chat"}),b[13]=c):c=b[13];let E=N?"error-message":void 0,A=N?"true":void 0;return b[14]!==j||b[15]!==L||b[16]!==E||b[17]!==A?(p=(0,i.jsx)(m.A,{"aria-labelledby":L,"aria-describedby":E,"aria-invalid":A,ref:I,defaultValue:j,block:!0}),b[14]=j,b[15]=L,b[16]=E,b[17]=A,b[18]=p):p=b[18],b[19]!==N?(g=N&&(0,i.jsx)(u.A.Validation,{id:"error-message",variant:"error",children:"required"===N?"Enter a name":"Name cannot exceed 100 characters"}),b[19]=N,b[20]=g):g=b[20],b[21]!==p||b[22]!==g?(y=(0,i.jsxs)(u.A,{required:!0,children:[c,p,g]}),b[21]=p,b[22]=g,b[23]=y):y=b[23],b[24]!==k||b[25]!==D||b[26]!==y?(x=(0,i.jsx)("form",{id:k,onSubmit:D,children:y}),b[24]=k,b[25]=D,b[26]=y,b[27]=x):x=b[27],b[28]!==T||b[29]!==_||b[30]!==x||b[31]!==r||b[32]!==d?(v=(0,i.jsx)(h.l,{title:r,onClose:T,width:"small",footerButtons:d,initialFocusRef:I,returnFocusRef:_,children:x}),b[28]=T,b[29]=_,b[30]=x,b[31]=r,b[32]=d,b[33]=v):v=b[33],v};try{q.displayName||(q.displayName="ConversationActions")}catch{}try{H.displayName||(H.displayName="ConversationActionDialogs")}catch{}try{K.displayName||(K.displayName="DeleteDialog")}catch{}try{W.displayName||(W.displayName="RenameDialog")}catch{}function z(){return(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}},19336:(e,t,n)=>{n.d(t,{G:()=>h});var i=n(74848),a=n(16522),s=n(34031),r=n(11128),l=n(12357),o=n(90177),d=n(53419),c=n(38621),u=n(81945);let m=[];function h(e){let t,n=(0,a.c)(10),{outputNodeExists:h,isRunning:f,isLoading:p,nodeValue:g,nodeError:y,validationErrors:x,additionalActions:v,onRun:b,onStop:j}=e,w=void 0!==p&&p,C=void 0===x?m:x;return n[0]!==v||n[1]!==w||n[2]!==f||n[3]!==y||n[4]!==g||n[5]!==b||n[6]!==j||n[7]!==h||n[8]!==C?(t=(0,i.jsx)(i.Fragment,{children:h?w?(0,i.jsxs)("div",{className:"ExecutionView-module__loadingState--bX4_m",children:[(0,i.jsx)(u.O,{variant:"rounded",height:"sm",width:"random"}),(0,i.jsx)(u.O,{variant:"rounded",height:"sm",width:"random"}),(0,i.jsx)(u.O,{variant:"rounded",height:"sm",width:"random"})]}):f&&!g?(0,i.jsx)(s.M,{isRunning:f,messages:{running:"Running the loop...",waiting:"Waiting..."}}):C.length>0?(0,i.jsx)(r.n,{errors:C,title:"Oops, this loop is configured incorrectly",additionalActions:v}):y?(0,i.jsx)(r.n,{errors:[y],title:"Oops, there was an error running this loop",additionalActions:v}):g?(0,i.jsx)(l.U,{isRunning:f,nodeValue:g}):(0,i.jsxs)("div",{className:"ExecutionView-module__emptyState--gD9en",children:[(0,i.jsxs)("div",{className:"ExecutionView-module__emptyStateText--awSRT",children:[(0,i.jsx)("h3",{className:"ExecutionView-module__emptyStateTitle--F8TRM",children:"No output yet"}),(0,i.jsx)("span",{children:"Run this loop to generate output"})]}),(0,i.jsx)(o.c,{onClick:()=>{b(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_RUN",mode:"loops"})},onStop:()=>{j(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_STOP",mode:"loops"})},isLoading:f,value:g,variant:"default",leadingVisual:(0,i.jsx)(c.SyncIcon,{})})]}):(0,i.jsx)("p",{children:"No output nodes found in this loop."})}),n[0]=v,n[1]=w,n[2]=f,n[3]=y,n[4]=g,n[5]=b,n[6]=j,n[7]=h,n[8]=C,n[9]=t):t=n[9],t}try{h.displayName||(h.displayName="ExecutionView")}catch{}},21046:(e,t,n)=>{function i(){}function a(){}n.d(t,{FF:()=>i,vV:()=>a})},21132:(e,t,n)=>{n.d(t,{s:()=>i});let i={Loaded:"Loaded",Loading:"Loading",NotLoaded:"NotLoaded"}},21229:(e,t,n)=>{n.d(t,{D:()=>u});var i=n(74848),a=n(16522),s=n(46747),r=n(38621),l=n(86877),o=n(26108),d=n(30093),c=n(96540);function u(e){let t,n,u,m,h,f,p=(0,a.c)(20),{onSearch:g,placeholder:y,"aria-label":x,disabled:v,debounceDelay:b}=e,j=void 0===y?"Search...":y,w=void 0===x?"Search":x,C=void 0!==v&&v,[_,N]=(0,c.useState)(""),S=(0,s.d)(g,void 0===b?200:b);p[0]!==S||p[1]!==g?(t=e=>{let t=e.currentTarget.value;N(t),""===t.trim()?g(""):S(t)},p[0]=S,p[1]=g,p[2]=t):t=p[2];let I=t;p[3]!==g?(n=()=>{N(""),g("")},p[3]=g,p[4]=n):n=p[4];let k=n;return p[5]!==w?(u=(0,i.jsx)(l.A.Label,{visuallyHidden:!0,children:w}),p[5]=w,p[6]=u):u=p[6],p[7]!==k||p[8]!==C||p[9]!==_?(m=""!==_?(0,i.jsx)(o.K,{icon:r.XCircleFillIcon,onClick:k,"aria-label":"Clear search",variant:"invisible",size:"small",disabled:C}):void 0,p[7]=k,p[8]=C,p[9]=_,p[10]=m):m=p[10],p[11]!==I||p[12]!==j||p[13]!==_||p[14]!==m?(h=(0,i.jsx)(d.A,{className:"SearchInput-module__searchInput--PKKMu",placeholder:j,value:_,onChange:I,leadingVisual:r.SearchIcon,trailingAction:m}),p[11]=I,p[12]=j,p[13]=_,p[14]=m,p[15]=h):h=p[15],p[16]!==C||p[17]!==u||p[18]!==h?(f=(0,i.jsx)("div",{className:"SearchInput-module__searchContainer--r7MLn",children:(0,i.jsxs)(l.A,{className:"SearchInput-module__searchInputWrapper--fhRw6",disabled:C,children:[u,h]})}),p[16]=C,p[17]=u,p[18]=h,p[19]=f):f=p[19],f}try{u.displayName||(u.displayName="SearchInput")}catch{}},21502:(e,t,n)=>{n.d(t,{B:()=>r});var i=n(16522),a=n(27912),s=n(96540);function r(e){let t,n=(0,i.c)(2),r=function(e){let t,n,a,r=(0,i.c)(5);r[0]!==e?(t=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,r[0]=e,r[1]=t):t=r[1];let[l,o]=(0,s.useState)(t);return r[2]!==e?(n=()=>{let t=window.matchMedia(e),n=e=>{o(e.matches)};return o(t.matches),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},a=[e],r[2]=e,r[3]=n,r[4]=a):(n=r[3],a=r[4]),(0,s.useEffect)(n,a),l}(void 0===e?a.X:e);return n[0]!==r?(t={isNarrowViewport:r},n[0]=r,n[1]=t):t=n[1],t}},21968:(e,t,n)=>{n.d(t,{O:()=>P});var i=n(74848),a=n(68273),s=n(16522),r=n(96540),l=n(98755),o=n(25407),d=n(26052),c=n(69726),u=n(84268),m=n(56149),h=n(21373),f=n(62935),p=n(72579),g=n(29e3),y=n(66990),x=n(79634),v=n(79431),b=n(11196),j=n(97665),w=n(33578),C=n(90891),_=n(20622),N=n(53885),S=n(96379),I=n(94747);let k=(0,a.Z6)()?function(){let e,t=(0,s.c)(2),n=(0,N.e)(_.uT.changeBase);return t[0]!==n?(e={mutationFn:e=>{let{newBaseBranch:t}=e,i=btoa(t);return(0,S.Sr)(n,{method:"PATCH",body:{new_base_binary:i}})},onSuccess:L},t[0]=n,t[1]=e):e=t[1],(0,I.n)(e)}:function(){let e=(0,N.e)(_.uT.changeBase);return(0,I.n)({mutationFn:({newBaseBranch:t})=>{let n=btoa(t);return(0,S.Sr)(e,{method:"PATCH",body:{new_base_binary:n}})},onSuccess:async e=>{let t=await e.json();if(t.error)throw Error(t.error);let n=await (await (0,C.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message)}})};async function L(e){let t=await e.json();if(t.error)throw Error(t.error);let n=await (await (0,C.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message)}let D="PullRequestHeaderSummary-module__truncateBranch--bdsQu";var T=n(34261),E=n(95807),A=n(99223),R=n(69599),O=n(37212);function P({author:e,baseBranch:t,baseRepositoryDefaultBranch:n="",baseRepositoryName:a="",baseRepositoryOwnerLogin:s="",canChangeBase:p=!1,commitsCount:b,headBranch:C,headRepositoryOwnerLogin:_="",headRepositoryName:N="",isInAdvisoryRepo:S,isEditing:I=!1,mergedBy:L,mergedByName:D,mergedTime:P,pullRequestId:M,pullRequestNumber:$,repositoryId:B,setIsEditing:V,state:U}){var q,H,G;let K,W=(0,j.jE)(),{refListCacheKey:z}=(0,x.X)(),[Q,Z]=(0,r.useState)(!1),[J,Y]=(0,r.useState)(!1),[X,ee]=(0,r.useState)(""),[et,en]=(0,r.useState)(""),ei=(0,R.G7)("render_user_display_name"),ea=(0,T.f)(),es=(0,O.NP)(),{mutate:er}=k(),el=e=>{Y(!1),ee(e)},eo=J?()=>(0,i.jsx)(c.A,{size:"small"}):null,ed=_&&_!==s?`${s}:${t}`:t,ec=function(e,t,n,i,a){if(!t)return"unknown repository";let s=!!t&&t!==e,r=a&&!!n;switch(!0){case s&&r:return`${t}/${n}:${i}`;case s:return`${t}:${i}`;case r:return`${n}:${i}`;default:return i}}(s,_,N,C,S),eu=U===w.Q.Merged?L?{login:L,displayName:D}:null:e,em=(q=U,H=b,G=eu?.login,K=`${H} ${H>1?"commits":"commit"}`,q!==w.Q.Merged?`wants to merge ${K} into`:G?`merged ${K} into`:`${K} merged into`);return(0,i.jsxs)("span",{className:"fgColor-muted d-flex flex-items-center overflow-hidden PullRequestHeaderSummary-module__summaryContainer--iNR1T",children:[eu?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.A,{inline:!0,className:"fgColor-muted text-bold","data-hovercard-url":(0,o.dCN)({owner:eu.login}),href:`/${eu.login}`,children:ei?(0,i.jsx)(d.v,{login:eu.login,profileName:eu.displayName,isAgent:!1}):eu.login})," "]}):null,em,p&&I?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.PI,{cacheKey:z,canCreate:!1,closeOnSelect:!0,currentCommitish:t,defaultBranch:n,hideShowAll:!0,owner:s,repo:a,types:["branch"],onSelectItem:e=>{Z(!0),en(e)}}),(0,i.jsx)(m.ZL,{children:(0,i.jsxs)(g.A,{"aria-labelledby":"confirm-change-base-branch",isOpen:Q,onDismiss:()=>{Z(!1),en(""),ee("")},children:[(0,i.jsx)(g.A.Header,{id:"confirm-change-base-branch",children:"Are you sure you want to change the base?"}),(0,i.jsxs)("div",{className:"p-3",children:[(0,i.jsx)("span",{children:"Some commits from the old base branch may be removed from the timeline, and old review comments may become outdated."}),X&&(0,i.jsx)(v.v,{className:"mt-2",variant:"critical",children:X}),(0,i.jsx)("span",{className:"sr-only","aria-live":"polite",children:J?"Base branch update in progress.":""}),(0,i.jsx)(h.Q,{alignContent:"center","aria-disabled":J?"true":void 0,block:!0,className:"mt-3",disabled:J,leadingVisual:eo,onClick:()=>{Y(!0),er({newBaseBranch:et},{onError:e=>el(e.message),onSuccess:async()=>{try{await Promise.all([W.refetchQueries({queryKey:ea},{throwOnError:!0}),W.refetchQueries({queryKey:es},{throwOnError:!0})]),Y(!1),V?.(!1),Z(!1)}catch{el("Unable to refetch commits. Please refresh the page.")}}})},variant:"primary",children:J?null:"Change base"})]})]})})]}):(0,i.jsx)(F,{branch:t,branchText:ed,repositoryName:a,repositoryOwner:s}),(0,i.jsx)("span",{children:"from "}),(0,i.jsxs)("div",{className:"d-flex flex-items-center overflow-hidden",children:[(0,i.jsx)(F,{branch:C,branchText:ec,repositoryName:N,repositoryOwner:_}),(0,i.jsx)(l.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:_?ec:C})]}),U===w.Q.Merged&&(0,i.jsx)(f.A,{datetime:P}),U===w.Q.Open&&!(0,A.k)()&&(0,i.jsx)(E.i,{processingIndicatorUrl:(0,o.CZ9)({owner:s,repo:a,number:$}),repositoryId:B,pullRequestId:M})]})}let F=(0,a.Z6)()?function(e){let t=(0,s.c)(12),{branchText:n,repositoryOwner:a,repositoryName:r,branch:l}=e;if(r&&a){let e,s,d;t[0]!==l||t[1]!==r||t[2]!==a?(e=(0,o.WJ9)({owner:a,repo:r,branch:l}),t[0]=l,t[1]=r,t[2]=a,t[3]=e):e=t[3];let c=e,u=`${a}/${r}:${l}`;return t[4]!==n||t[5]!==c?(s=(0,i.jsx)(p.A,{href:c,className:D,children:n}),t[4]=n,t[5]=c,t[6]=s):s=t[6],t[7]!==u||t[8]!==s?(d=(0,i.jsx)(b.m,{text:u,children:s}),t[7]=u,t[8]=s,t[9]=d):d=t[9],d}{let e;return t[10]!==n?(e=(0,i.jsx)(p.A,{as:"span",className:D,title:"This repository has been deleted",children:n}),t[10]=n,t[11]=e):e=t[11],e}}:function({branchText:e,repositoryOwner:t,repositoryName:n,branch:a}){if(!n||!t)return(0,i.jsx)(p.A,{as:"span",className:D,title:"This repository has been deleted",children:e});{let s=(0,o.WJ9)({owner:t,repo:n,branch:a});return(0,i.jsx)(b.m,{text:`${t}/${n}:${a}`,children:(0,i.jsx)(p.A,{href:s,className:D,children:e})})}};try{P.displayName||(P.displayName="PullRequestHeaderSummary")}catch{}try{F.displayName||(F.displayName="PullRequestBranchName")}catch{}},22053:(e,t,n)=>{n.d(t,{a:()=>l});var i=n(16522),a=n(50050),s=n(33026),r=n(64917);function l(){let e,t=(0,i.c)(4),n=(0,a.Ud)(d),l=(0,r.I)(o),c=n!==s.kj&&n!==s.qD;if(void 0===l){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!0},t[0]=e):e=t[0],e}if(!1===l){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"shared"},t[1]=e):e=t[1],e}if(c){let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"previousVersion"},t[2]=e):e=t[2],e}return t[3]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!1},t[3]=e):e=t[3],e}function o(e){return e?.owned}function d(e){return e.version}},22116:(e,t,n)=>{n.d(t,{x:()=>c});var i=n(74848),a=n(16522),s=n(53419),r=n(38621),l=n(84268),o=n(76720),d=n(96540);function c(e){let t,n,c,u,m,h,f=(0,a.c)(8),{regionName:p}=e;return f[0]!==p?(t=()=>{let e=`ERROR_FALLBACK_${p.toUpperCase().replace(/\s+/g,"_")}`;(0,s.BI)("dotcom_chat.activate",{target:e,mode:"immersive",message:`${p} error fallback`})},n=[p],f[0]=p,f[1]=t,f[2]=n):(t=f[1],n=f[2]),(0,d.useEffect)(t,n),f[3]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(o.E.Visual,{children:(0,i.jsx)(r.AlertIcon,{size:"medium"})}),u=(0,i.jsx)(o.E.Heading,{children:"Something went wrong"}),f[3]=c,f[4]=u):(c=f[3],u=f[4]),f[5]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(l.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),f[5]=m):m=f[5],f[6]!==p?(h=(0,i.jsx)("div",{className:"ErrorFallback-module__errorFallbackContainer--uGjJA",children:(0,i.jsxs)(o.E,{children:[c,u,(0,i.jsxs)(o.E.Description,{children:[p," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",m,"."]})]})}),f[6]=p,f[7]=h):h=f[7],h}try{c.displayName||(c.displayName="ErrorFallback")}catch{}},24798:(e,t,n)=>{n.d(t,{o:()=>r});var i=n(68273),a=n(16522),s=n(76648);let r=(0,i.Z6)()?function(){let e,t=(0,a.c)(7),n=(0,s.B)()??{};if(n&&"header"in n)return n.header;let{aliveChannel:i,pullRequest:r,bannersData:l,repository:o,urls:d,user:c}=n;return t[0]!==i||t[1]!==l||t[2]!==r||t[3]!==o||t[4]!==d||t[5]!==c?(e={aliveChannel:i,pullRequest:r,bannersData:l,repository:o,urls:d,user:c},t[0]=i,t[1]=l,t[2]=r,t[3]=o,t[4]=d,t[5]=c,t[6]=e):e=t[6],e}:function(){let e=(0,s.B)()??{};if(e&&"header"in e)return e.header;let{aliveChannel:t,pullRequest:n,bannersData:i,repository:a,urls:r,user:l}=e;return{aliveChannel:t,pullRequest:n,bannersData:i,repository:a,urls:r,user:l}}},25506:(e,t,n)=>{n.d(t,{a:()=>s});var i=n(16522),a=n(23967);function s(e){let t,n,s=(0,i.c)(7),{language:r,value:l}=e;s[0]!==r||s[1]!==l?(t=function({language:e,value:t}){var n,i;let s,r=(n=t,/^\t/m.test(n)?"tab":"space");return{indentUnit:function(e,t){if("space"!==t)return 4;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,r),indentWithTabs:"tab"===r,lineWrapping:(i=e,s=(0,a.vL)(i),s?.wrap??!1)}}({language:r,value:l}),s[0]=r,s[1]=l,s[2]=t):t=s[2];let o=t;return s[3]!==o.indentUnit||s[4]!==o.indentWithTabs||s[5]!==o.lineWrapping?(n={indentUnit:o.indentUnit,indentWithTabs:o.indentWithTabs,lineWrapping:o.lineWrapping},s[3]=o.indentUnit,s[4]=o.indentWithTabs,s[5]=o.lineWrapping,s[6]=n):n=s[6],n}},26956:(e,t,n)=>{n.d(t,{Zf:()=>w});var i=n(74848),a=n(16522),s=n(82156),r=n(34164),l=n(96540);let o="ContentView-module__sectionGrid--unHY4";function d(e){let t,n,s,o,d,u,m=(0,a.c)(15),{children:h,width:f,noHeader:p}=e;if(m[0]!==h){for(let e of(t=[],n=[],l.Children.toArray(h)))l.isValidElement(e)&&e.type===c?t.push(e):n.push(e);m[0]=h,m[1]=t,m[2]=n}else t=m[1],n=m[2];m[3]!==p?(s=(0,r.$)("ContentView-module__contentContainer--q5UcY",{"ContentView-module__noHeader--EociJ":p}),m[3]=p,m[4]=s):s=m[4];let g="small"===f,y="medium"===f;return m[5]!==g||m[6]!==y?(o=(0,r.$)("ContentView-module__content--kzPet",{"ContentView-module__small--r1fwP":g,"ContentView-module__medium--TcCTp":y}),m[5]=g,m[6]=y,m[7]=o):o=m[7],m[8]!==t||m[9]!==n||m[10]!==o?(d=(0,i.jsxs)("div",{className:o,children:[t,n]}),m[8]=t,m[9]=n,m[10]=o,m[11]=d):d=m[11],m[12]!==s||m[13]!==d?(u=(0,i.jsx)("div",{className:"ContentView-module__scrollContainer--_BylN",children:(0,i.jsx)("div",{className:s,children:d})}),m[12]=s,m[13]=d,m[14]=u):u=m[14],u}function c(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__banner--rgHMe",children:s}),n[0]=s,n[1]=t):t=n[1],t}function u(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__serviceHeader--DEEHs",children:s}),n[0]=s,n[1]=t):t=n[1],t}function m(e){let t,n,s=(0,a.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)("ContentView-module__section--avH_l",o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,i.jsx)("section",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function h(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h1",{className:"ContentView-module__serviceTitle--PbOYe",children:s}),n[0]=s,n[1]=t):t=n[1],t}function f(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("p",{className:"ContentView-module__serviceDescription--ZNDZz",children:s}),n[0]=s,n[1]=t):t=n[1],t}function p(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__serviceActions--IucKo",children:s}),n[0]=s,n[1]=t):t=n[1],t}function g(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h2",{className:"ContentView-module__sectionTitle--MkQwz",children:s}),n[0]=s,n[1]=t):t=n[1],t}function y(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ContentView-module__sectionGridEmpty--oxnzj",children:s}),n[0]=s,n[1]=t):t=n[1],t}function x(e){let t,n,s,r=(0,a.c)(8),{children:d,loading:c}=e;if(void 0!==c&&c){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:o,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(j)}),r[0]=e):e=r[0],e}if(r[1]!==d){let e=l.Children.toArray(d);t=e.find(b),n=e.filter(v),r[1]=d,r[2]=t,r[3]=n}else t=r[2],n=r[3];let u=n;if(0===u.length&&t){let e;return r[4]!==t?(e=(0,i.jsx)(i.Fragment,{children:t}),r[4]=t,r[5]=e):e=r[5],e}return r[6]!==u?(s=(0,i.jsx)("div",{className:o,children:u}),r[6]=u,r[7]=s):s=r[7],s}function v(e){return!(l.isValidElement(e)&&e.type===y)}function b(e){return l.isValidElement(e)&&e.type===y}function j(e,t){return(0,i.jsx)(s.f,{className:"ContentView-module__skeletonCard--e4yHy"},t)}x.Empty=y,m.Title=g,m.Grid=x;let w={Title:h,Description:f,Actions:p,Container:d,Banner:c,Header:u,Section:m};w.displayName="ContentView",d.displayName="ContentView.Container",c.displayName="ContentView.Banner",u.displayName="ContentView.Header",m.displayName="ContentView.Section",h.displayName="ContentView.Title",f.displayName="ContentView.Description",p.displayName="ContentView.Actions",g.displayName="ContentView.Section.Title",x.displayName="ContentView.Section.Grid",y.displayName="ContentView.Section.Grid.Empty"},27011:(e,t,n)=>{n.d(t,{JA:()=>J,YL:()=>Y,qL:()=>ep,wI:()=>Z,gt:()=>es,xW:()=>ee,wL:()=>ei,a_:()=>en,TV:()=>et,iY:()=>X,wh:()=>ev,kN:()=>ej,JR:()=>eb,L3:()=>b,yo:()=>j,HZ:()=>e_,$W:()=>eS,jT:()=>eC,QV:()=>eN,or:()=>eL,I8:()=>ek,l0:()=>L,Ud:()=>E,uh:()=>A,Fm:()=>R,qg:()=>T,mU:()=>O,y:()=>ew,GR:()=>H,qX:()=>M,SM:()=>ec,ww:()=>C,it:()=>ex,q6:()=>eD,Py:()=>V,j5:()=>w,RH:()=>eP,Fl:()=>ea,Lh:()=>U,ne:()=>el,an:()=>ef,rP:()=>em,_N:()=>eg,ys:()=>ey,pV:()=>eI,mY:()=>P,Yp:()=>S,Kp:()=>I,r$:()=>N,GK:()=>k,zK:()=>q,mF:()=>G,m9:()=>F,E4:()=>_,CQ:()=>eT,WA:()=>er,WK:()=>eR,xJ:()=>eO,Nk:()=>eF,_W:()=>eu,Qb:()=>eh,BI:()=>ed,gW:()=>$,E5:()=>B,Mv:()=>eE,gi:()=>eA});var i=n(68273),a=n(16522),s=n(96540),r=n(70466),l=n(59914),o=n(83873),d=n(82603),c=n(71317),u=n(35311);let m="UNABLE_TO_GENERATE",h="NOT_GENERATED_YET";var f=n(69599),p=n(18799);let g={baseOid:void 0,headOid:void 0},y=[],x=[],v={threads:y,annotations:x,commentsPreference:p.sI.Visible},b=(0,i.Z6)()?()=>(0,o.n)(eM):()=>(0,o.n)(e=>e.comparisonInfo),j=(0,i.Z6)()?()=>(0,o.n)(e$):()=>(0,o.n)(e=>e.comparisonInfoActions),w=(0,i.Z6)()?()=>(0,o.n)(eB):()=>(0,o.n)(e=>e.isSingleFileMode),C=(0,i.Z6)()?()=>(0,o.n)(eV):()=>(0,o.n)(e=>"FULL"!==e.comparisonInfo.comparisonView),_=(0,i.Z6)()?()=>(0,o.n)(eU):()=>(0,o.n)(e=>e.comparisonInfo.selectedRange||g),N=(0,i.Z6)()?()=>(0,o.n)(eq):()=>(0,o.n)(e=>e.pullRequest.id),S=(0,i.Z6)()?()=>(0,o.n)(eH):()=>(0,o.n)(e=>e.pullRequest),I=(0,i.Z6)()?()=>(0,o.n)(eG):()=>(0,o.n)(e=>e.pullRequest.basePath);(0,i.Z6)()||(()=>(0,o.n)(e=>e.pullRequestActions));let k=(0,i.Z6)()?()=>(0,o.n)(eK):()=>(0,o.n)(e=>e.repository),L=(0,i.Z6)()?()=>(0,o.n)(eW):()=>(0,o.n)(e=>e.diffSummaries),D=z([e=>e.diffSummaries],e=>Object.values(e),r.x),T=(0,i.Z6)()?()=>(0,o.n)(ez):()=>(0,o.n)(e=>D(e).length),E=(0,i.Z6)()?()=>(0,o.n)(eQ):()=>(0,o.n)(e=>e.diffSummariesActions);(0,i.Z6)()||(()=>(0,o.n)((0,l.k)(e=>D(e).map(e=>e.path))));let A=((0,i.Z6)(),()=>(0,o.n)(D)),R=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.diffSummaries[e],n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.diffSummaries[e]);(0,i.Z6)(),()=>W().hiddenFiles;let O=((0,i.Z6)(),()=>W().filteredDiffSummaries),P=(0,i.Z6)()?()=>(0,o.n)(eZ):()=>(0,o.n)(e=>e.entries),F=(0,i.Z6)()?()=>(0,o.n)(eJ):()=>(0,o.n)(e=>e.selectedPathDigest),M=(0,i.Z6)()?()=>(0,o.n)(eY):()=>(0,o.n)(e=>e.getSelectedPathDigest),$=(0,i.Z6)()?()=>(0,o.n)(eX):()=>(0,o.n)(e=>e.progressiveDiffsActions.updateSelectedPathDigest),B=(0,i.Z6)()?()=>(0,o.n)(e0):()=>(0,o.n)(e=>e.progressiveDiffsActions.updateSelectedPathDigestAndFetch),V=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>!!e&&t.selectedPathDigest===e,n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>!!e&&t.selectedPathDigest===e),U=(0,i.Z6)()?()=>(0,o.n)(e1):()=>(0,o.n)(e=>e.markerAndDiffNavigationActions),q=(0,i.Z6)()?()=>(0,o.n)(e2):()=>(0,o.n)(e=>e.markerAndDiffNavigation.commentId);(0,i.Z6)()||(()=>(0,o.n)(e=>e.markerAndDiffNavigation.getCommentId));let H=(0,i.Z6)()?()=>(0,o.n)(e3):()=>(0,o.n)(e=>e.markerAndDiffNavigation.getMarkerId),G=(0,i.Z6)()?()=>(0,o.n)(e4):()=>(0,o.n)(e=>e.markerAndDiffNavigation.markerId),K=z([D,e=>e.codeowners,e=>e.diffFilter.state,e=>e.changeGroupGeneration.changeGroups],(e,t,n,i)=>{let a=new Map,s=[],r=i.find(e=>e.id===n.activeChangeGroupId),l=r?.hunkPositions?new Set(Object.keys(r.hunkPositions)):void 0;for(let i of e){var o,c,m,h;let e=(0,d.hG)({diffPath:i.path,codeownersData:t}).isOwnedByViewer;(o=i,c=n,m=e,(!(h=l)||h.has(o.path))&&o.path.toLowerCase().includes(c.filterText.toLowerCase())&&!c.unselectedFileExtensions.has((0,u.QC)(o.path))&&(c.showDeletedFiles||"REMOVED"!==o.changeType&&"DELETED"!==o.changeType)&&(!c.showOnlyManifestFiles||o.isManifestFile)&&(!c.showOnlyOwnedFiles||m)&&(c.showViewedFiles||!o.markedAsViewed)&&(c.showVendoredFiles||!o.isVendored))?(s.push(i),a.set(i.path,!1)):a.set(i.path,!0)}return{hiddenFiles:a,filteredDiffSummaries:s}},r.x),W=(0,i.Z6)()?()=>{let e,t,n=(0,a.c)(4),i=(0,o.n)(K),r=(0,o.n)(e5),l=i.filteredDiffSummaries.length;return n[0]!==l||n[1]!==r?(e=()=>{if(r){let e=`${l} file${1===l?"":"s"} remain${1===l?"s":""}`;(0,c.k)(e,150)}},t=[r,l],n[0]=l,n[1]=r,n[2]=e,n[3]=t):(e=n[2],t=n[3]),(0,s.useEffect)(e,t),i}:()=>{let e=(0,o.n)(K),t=(0,o.n)(e=>e.diffFilter.filtersInteractedWith),n=e.filteredDiffSummaries.length;return(0,s.useEffect)(()=>{if(t){let e=`${n} file${1===n?"":"s"} remain${1===n?"s":""}`;(0,c.k)(e,150)}},[t,n]),e};function z(e,t,n){let i,a;return s=>{let r=e.map(e=>e(s));if(i&&n(r,i))return a;let l=t(...r);return i=r,a=l,l}}let Q=z([e=>e.markers],e=>Object.values(e||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??x)),r.x),Z=((0,i.Z6)(),()=>(0,o.n)(Q)),J=(0,i.Z6)()?()=>(0,o.n)(e6):()=>(0,o.n)(e=>{let t=e.diffFilter.state.activeChangeGroupId;if(t)return e.changeGroupGeneration.changeGroups.find(e=>e.id===t)}),Y=(0,i.Z6)()?()=>(0,o.n)(e7):()=>(0,o.n)(e=>e.diffFilter.state.activeChangeGroupId),X=(0,i.Z6)()?()=>(0,o.n)(e8):()=>(0,o.n)(e=>e.changeGroupGeneration.changeGroups),ee=(0,i.Z6)()?()=>(0,o.n)(e9):()=>(0,o.n)(e=>e.changeGroupGeneration),et=(0,i.Z6)()?()=>(0,o.n)(te):()=>(0,o.n)(e=>e.changeGroupGeneration.unavailableReason?e.changeGroupGeneration.unavailableReason:e.changeGroupGeneration.changeGroups.length<1&&!e.changeGroupGeneration.latestChangeGroupOrchestration?(0,f.G7)("hide_groups_list_for_few_groups")?h:m:null),en=(0,i.Z6)()?()=>(0,o.n)(tt):()=>(0,o.n)(e=>e.changeGroupGeneration.changeGroupGenerationChannel),ei=(0,i.Z6)()?()=>(0,o.n)(tn):()=>(0,o.n)(e=>e.changeGroupGenerationActions),ea=(0,i.Z6)()?()=>(0,o.n)(ti):()=>(0,o.n)(e=>e.changeGroupGeneration.latestChangeGroupOrchestration),es=(0,i.Z6)()?()=>(0,o.n)(ta):()=>(0,o.n)(e=>e.changeGroupGeneration.canAccessChangeGroups),er=(0,i.Z6)()?()=>(0,o.n)(ts):()=>(0,o.n)(e=>e.showChangeGroupPreference),el=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.markers?.[e],n[0]=e,n[1]=t):t=n[1],(0,o.n)((0,l.k)(t))}:e=>(0,o.n)((0,l.k)(t=>t.markers?.[e])),eo=z([e=>e.markers],e=>Object.values(e||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??y)),r.x),ed=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>{let n=eo(t);if(!e)return n;let i=new Set(e);return n.filter(e=>i.has(Number(e.id)))},n[0]=e,n[1]=t):t=n[1],(0,o.n)((0,l.k)(t))}:e=>(0,o.n)((0,l.k)(t=>{let n=eo(t);if(!e)return n;let i=new Set(e);return n.filter(e=>i.has(Number(e.id)))})),ec=(0,i.Z6)()?()=>(0,o.n)(tr):()=>(0,o.n)(e=>e.getThread),eu=(0,i.Z6)()?(e,t,n)=>{let i,s=(0,a.c)(4);return s[0]!==t||s[1]!==n||s[2]!==e?(i=i=>i.markers?.[t]?.[n]?.threads.find(t=>t.id===e),s[0]=t,s[1]=n,s[2]=e,s[3]=i):i=s[3],(0,o.n)(i)}:(e,t,n)=>(0,o.n)(i=>i.markers?.[t]?.[n]?.threads.find(t=>t.id===e)),em=(0,i.Z6)()?(e,t)=>{let n,i=(0,a.c)(3);return i[0]!==e||i[1]!==t?(n=n=>{let i=n.markers?.[e]?.[t],a=i?.threads??y,s=i?.annotations??x,r=n.commentsPreference;return a.length||s.length?{threads:a,annotations:s,commentsPreference:r}:v},i[0]=e,i[1]=t,i[2]=n):n=i[2],(0,o.n)((0,l.k)(n))}:(e,t)=>(0,o.n)((0,l.k)(n=>{let i=n.markers?.[e]?.[t],a=i?.threads??y,s=i?.annotations??x,r=n.commentsPreference;return a.length||s.length?{threads:a,annotations:s,commentsPreference:r}:v})),eh=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>{let n=eo(t),i=e?new Set(e):null,a=0;for(let e of n)e&&(!i||i.has(parseInt(e.id)))&&(e.isResolved||e.positioning?.isOutdated||(a+=e.commentsData?.comments?.length??0));return a},n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>{let n=eo(t),i=e?new Set(e):null,a=0;for(let e of n)e&&(!i||i.has(parseInt(e.id)))&&(e.isResolved||e.positioning?.isOutdated||(a+=e.commentsData?.comments?.length??0));return a}),ef=(0,i.Z6)()?()=>(0,o.n)(tl):()=>(0,o.n)(e=>e.markersActions),ep=(0,i.Z6)()?()=>(0,o.n)(to):()=>(0,o.n)(e=>e.markers),eg=(0,i.Z6)()?()=>(0,o.n)(td):()=>(0,o.n)(e=>e.pendingReviewActions),ey=(0,i.Z6)()?()=>(0,o.n)(tc):()=>(0,o.n)(e=>e.pendingReview),ex=(0,i.Z6)()?()=>(0,o.n)(tu):()=>(0,o.n)(e=>(e.pendingReview?.pendingReviewIDs?.length??0)>0),ev=(0,i.Z6)()?()=>(0,o.n)(tm):()=>(0,o.n)(e=>e.codeownersActions),eb=(0,i.Z6)()?()=>(0,o.n)(th):()=>(0,o.n)(e=>e.filesCollapsedStatusActions),ej=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.collapsedFilesMap?.[e]??!1,n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.collapsedFilesMap?.[e]??!1),ew=(0,i.Z6)()?()=>(0,o.n)(tf):()=>(0,o.n)(e=>e.getCollapsedDiffStatus),eC=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.diffEntries?.[e]??null,n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.diffEntries?.[e]??null),e_=(0,i.Z6)()?()=>(0,o.n)(tp):()=>(0,o.n)(e=>e.diffEntries);(0,i.Z6)()||(()=>(0,o.n)(e=>Object.keys(e.diffEntries).length));let eN=(0,i.Z6)()?()=>(0,o.n)(tg):()=>(0,o.n)(e=>e.diffEntriesActions),eS=(0,i.Z6)()?e=>{let t,n,i=(0,a.c)(4);i[0]!==e?(t=new Set(e.map(ty)),i[0]=e,i[1]=t):t=i[1];let s=t;return i[2]!==s?(n=e=>e.entries.filter(e=>s.has(e.path)),i[2]=s,i[3]=n):n=i[3],(0,o.n)((0,l.k)(n))}:e=>{let t=(0,s.useMemo)(()=>new Set(e.map(e=>e.path)),[e]);return(0,o.n)((0,l.k)(e=>e.entries.filter(e=>t.has(e.path))))},eI=(0,i.Z6)()?()=>(0,o.n)(tx):()=>(0,o.n)(e=>e.progressiveDiffsActions),ek=(0,i.Z6)()?()=>(0,o.n)(tv):()=>(0,o.n)(e=>e.diffFilter.state),eL=(0,i.Z6)()?()=>(0,o.n)(tb):()=>(0,o.n)(e=>e.diffFilterActions),eD=(0,i.Z6)()?()=>(0,o.n)(tj):()=>(0,o.n)(e=>{let t=e.diffFilter.state;return t.filterText.length>0||t.unselectedFileExtensions.size>0||!0===t.showOnlyOwnedFiles||!1===t.showDeletedFiles||!0===t.showOnlyManifestFiles||!1===t.showVendoredFiles||!1===t.showViewedFiles}),eT=(0,i.Z6)()?()=>(0,o.n)(tw):()=>(0,o.n)(e=>e.settingsActions),eE=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.summariesViewedStatus?.[e]??!1,n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.summariesViewedStatus?.[e]??!1),eA=(0,i.Z6)()?()=>(0,o.n)(tC):()=>(0,o.n)(e=>e.summariesViewedCount),eR=(0,i.Z6)()?()=>(0,o.n)(t_):()=>(0,o.n)(e=>e.suggestionBatch),eO=(0,i.Z6)()?()=>(0,o.n)(tN):()=>(0,o.n)(e=>e.suggestionBatchActions),eP=(0,i.Z6)()?()=>(0,o.n)(tS):()=>(0,o.n)(e=>e.suggestionBatch.isSuggestionBatchPending),eF=(0,i.Z6)()?e=>{let t,n=(0,a.c)(2);return n[0]!==e?(t=t=>t.suggestionBatch.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex),n[0]=e,n[1]=t):t=n[1],(0,o.n)(t)}:e=>(0,o.n)(t=>t.suggestionBatch.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex));function eM(e){return e.comparisonInfo}function e$(e){return e.comparisonInfoActions}function eB(e){return e.isSingleFileMode}function eV(e){return"FULL"!==e.comparisonInfo.comparisonView}function eU(e){return e.comparisonInfo.selectedRange||g}function eq(e){return e.pullRequest.id}function eH(e){return e.pullRequest}function eG(e){return e.pullRequest.basePath}function eK(e){return e.repository}function eW(e){return e.diffSummaries}function ez(e){return D(e).length}function eQ(e){return e.diffSummariesActions}function eZ(e){return e.entries}function eJ(e){return e.selectedPathDigest}function eY(e){return e.getSelectedPathDigest}function eX(e){return e.progressiveDiffsActions.updateSelectedPathDigest}function e0(e){return e.progressiveDiffsActions.updateSelectedPathDigestAndFetch}function e1(e){return e.markerAndDiffNavigationActions}function e2(e){return e.markerAndDiffNavigation.commentId}function e3(e){return e.markerAndDiffNavigation.getMarkerId}function e4(e){return e.markerAndDiffNavigation.markerId}function e5(e){return e.diffFilter.filtersInteractedWith}function e6(e){let t=e.diffFilter.state.activeChangeGroupId;if(t)return e.changeGroupGeneration.changeGroups.find(e=>e.id===t)}function e7(e){return e.diffFilter.state.activeChangeGroupId}function e8(e){return e.changeGroupGeneration.changeGroups}function e9(e){return e.changeGroupGeneration}function te(e){return e.changeGroupGeneration.unavailableReason?e.changeGroupGeneration.unavailableReason:e.changeGroupGeneration.changeGroups.length<1&&!e.changeGroupGeneration.latestChangeGroupOrchestration?(0,f.G7)("hide_groups_list_for_few_groups")?h:m:null}function tt(e){return e.changeGroupGeneration.changeGroupGenerationChannel}function tn(e){return e.changeGroupGenerationActions}function ti(e){return e.changeGroupGeneration.latestChangeGroupOrchestration}function ta(e){return e.changeGroupGeneration.canAccessChangeGroups}function ts(e){return e.showChangeGroupPreference}function tr(e){return e.getThread}function tl(e){return e.markersActions}function to(e){return e.markers}function td(e){return e.pendingReviewActions}function tc(e){return e.pendingReview}function tu(e){return(e.pendingReview?.pendingReviewIDs?.length??0)>0}function tm(e){return e.codeownersActions}function th(e){return e.filesCollapsedStatusActions}function tf(e){return e.getCollapsedDiffStatus}function tp(e){return e.diffEntries}function tg(e){return e.diffEntriesActions}function ty(e){return e.path}function tx(e){return e.progressiveDiffsActions}function tv(e){return e.diffFilter.state}function tb(e){return e.diffFilterActions}function tj(e){let t=e.diffFilter.state;return t.filterText.length>0||t.unselectedFileExtensions.size>0||!0===t.showOnlyOwnedFiles||!1===t.showDeletedFiles||!0===t.showOnlyManifestFiles||!1===t.showVendoredFiles||!1===t.showViewedFiles}function tw(e){return e.settingsActions}function tC(e){return e.summariesViewedCount}function t_(e){return e.suggestionBatch}function tN(e){return e.suggestionBatchActions}function tS(e){return e.suggestionBatch.isSuggestionBatchPending}},27028:(e,t,n)=>{n.d(t,{G:()=>F,Q:()=>O});var i=n(74848),a=n(16522),s=n(38621),r=n(5524),l=n(94236),o=n(26108),d=n(21373),c=n(19415),u=n(96540),m=n(21067),h=n(25407),f=n(96379);function p(e,t){let n,i=(0,a.c)(5),s=(t??[]).filter(e=>!e.dismissed);if(i[0]!==s||i[1]!==e){let t;i[3]!==e?(t=t=>t.name===e,i[3]=e,i[4]=t):t=i[4],n=s.filter(t),i[0]=s,i[1]=e,i[2]=n}else n=i[2];return 0===n.length}var g=n(70719),y=n(34164);let x="compact_diff_lines";function v(e){let t,n,s,r,l,o,v,w,C,_,N,S,I,k,L,D=(0,a.c)(19),{userNotices:T}=e,E=p(x,T),{dismissNotice:A}=(I=(0,a.c)(5),k=p(x,T),I[0]!==k||I[1]!==x?(N=()=>{(0,m.M3)()&&!k&&(0,f.DI)((0,h.VB1)({noticeName:x}),{method:"POST"})},I[0]=k,I[1]=x,I[2]=N):N=I[2],L=N,I[3]!==L?(S={dismissNotice:L},I[3]=L,I[4]=S):S=I[4],S);D[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:j,onError:b},D[0]=t):t=D[0];let{mutate:R}=(0,g.U)(t),[O,P]=(0,u.useState)(!0);D[1]!==A||D[2]!==R?(n=()=>{R({lineSpacing:"compact"}),P(!1),A()},D[1]=A,D[2]=R,D[3]=n):n=D[3];let F=n;D[4]!==A?(s=()=>{P(!1),A()},D[4]=A,D[5]=s):s=D[5];let M=s;return E?null:(D[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,y.$)("d-flex flex-column gap-2","DiffCompactLinesPopover-module__PopoverContent--HUydq"),l=(0,i.jsx)("h2",{className:"DiffCompactLinesPopover-module__Heading--hFmwp",children:"Customizable line height"}),o=(0,i.jsx)("p",{children:"The default line height has been increased for improved accessibility. You can choose to enable a more compact line height from the view settings menu."}),D[6]=r,D[7]=l,D[8]=o):(r=D[6],l=D[7],o=D[8]),D[9]!==F?(v=(0,i.jsx)(d.Q,{onClick:F,children:"Enable compact line height"}),D[9]=F,D[10]=v):v=D[10],D[11]!==M?(w=(0,i.jsx)(d.Q,{onClick:M,variant:"invisible",children:"Dismiss"}),D[11]=M,D[12]=w):w=D[12],D[13]!==v||D[14]!==w?(C=(0,i.jsxs)(c.A.Content,{className:r,children:[l,o,(0,i.jsxs)("div",{className:"d-flex gap-2 flex-row w-full flex-wrap",children:[v,w]})]}),D[13]=v,D[14]=w,D[15]=C):C=D[15],D[16]!==O||D[17]!==C?(_=(0,i.jsx)(c.A,{open:O,caret:"top-right",className:"DiffCompactLinesPopover-module__PopoverContainer--A4URR",children:C}),D[16]=O,D[17]=C,D[18]=_):_=D[18],_)}function b(){}function j(){}try{v.displayName||(v.displayName="DiffCompactLinesPopover")}catch{}var w=n(79472);function C(e){let t,n,s,l,o,d=(0,a.c)(16),{whitespacePreferenceAvailable:c,lineSpacingPreferenceAvailable:u,defaultHideWhitespace:m,onUpdateWhitespace:h,reloadOnChange:f}=e,p=void 0===c||c,y=void 0===u||u,{data:x}=(0,w.ID)(),v=(0,w.Qn)(void 0!==m&&m);d[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:N,onError:_},d[0]=t):t=d[0];let{mutate:b}=(0,g.U)(t);d[1]!==v||d[2]!==h||d[3]!==f?(n=()=>{(0,w.bJ)("w",v?"0":"1"),h?.(!v),void 0!==f&&f()},d[1]=v,d[2]=h,d[3]=f,d[4]=n):n=d[4];let j=n;return x&&(p||y)?(d[5]!==v||d[6]!==j||d[7]!==p?(s=p&&(0,i.jsx)(r.l.Item,{selected:v,onSelect:j,children:"Hide whitespace"}),d[5]=v,d[6]=j,d[7]=p,d[8]=s):s=d[8],d[9]!==x||d[10]!==y||d[11]!==b?(l=y&&(0,i.jsx)(r.l.Item,{selected:"compact"===x.lineSpacing,onSelect:()=>b({lineSpacing:"compact"===x.lineSpacing?"relaxed":"compact"}),children:"Compact line height"}),d[9]=x,d[10]=y,d[11]=b,d[12]=l):l=d[12],d[13]!==s||d[14]!==l?(o=(0,i.jsxs)(r.l.Group,{"aria-label":"Format",selectionVariant:"multiple",variant:"subtle",children:[s,l]}),d[13]=s,d[14]=l,d[15]=o):o=d[15],o):null}function _(){}function N(){}try{C.displayName||(C.displayName="DiffLinePresentationToggles")}catch{}function S(e){let t,n,s,l,o,d,c,u=(0,a.c)(17),{reloadOnChange:m}=e,h=void 0!==m&&m,{data:f}=(0,w.ID)(),p=f?.splitPreference;u[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:k,onError:I},u[0]=t):t=u[0];let{mutate:y}=(0,g.U)(t);u[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(r.l.GroupHeading,{children:"Layout"}),u[1]=n):n=u[1];let x="unified"===p;u[2]!==h||u[3]!==y?(s=()=>{y({splitPreference:"unified"}),(0,w.bJ)("diff","unified"),h&&window.location.reload()},u[2]=h,u[3]=y,u[4]=s):s=u[4],u[5]!==x||u[6]!==s?(l=(0,i.jsx)(r.l.Item,{selected:x,onSelect:s,children:"Unified"}),u[5]=x,u[6]=s,u[7]=l):l=u[7];let v="split"===p;return u[8]!==h||u[9]!==y?(o=()=>{y({splitPreference:"split"}),(0,w.bJ)("diff","split"),h&&window.location.reload()},u[8]=h,u[9]=y,u[10]=o):o=u[10],u[11]!==v||u[12]!==o?(d=(0,i.jsx)(r.l.Item,{selected:v,onSelect:o,children:"Split"}),u[11]=v,u[12]=o,u[13]=d):d=u[13],u[14]!==l||u[15]!==d?(c=(0,i.jsxs)(r.l.Group,{selectionVariant:"single",children:[n,l,d]}),u[14]=l,u[15]=d,u[16]=c):c=u[16],c}function I(){}function k(){}try{S.displayName||(S.displayName="DiffViewPreferenceToggle")}catch{}var L=n(18799);function D(){let e,t,n,s=(0,a.c)(7),{data:l}=(0,w.ID)();s[0]===Symbol.for("react.memo_cache_sentinel")?(e={onSuccess:E,onError:T},s[0]=e):e=s[0];let{mutate:o}=(0,g.U)(e);if(!l)return null;let d=l.commentsPreference===L.sI.Collapsed;return s[1]!==d||s[2]!==o?(t=()=>o({commentsPreference:d?L.sI.Visible:L.sI.Collapsed}),s[1]=d,s[2]=o,s[3]=t):t=s[3],s[4]!==d||s[5]!==t?(n=(0,i.jsx)(r.l.Group,{"aria-label":"Comments",selectionVariant:"single",children:(0,i.jsx)(r.l.Item,{role:"menuitemcheckbox",selected:d,onSelect:t,children:"Minimize comments"})}),s[4]=d,s[5]=t,s[6]=n):n=s[6],n}function T(){}function E(){}try{D.displayName||(D.displayName="DiffCommentsPreferenceToggle")}catch{}var A=n(30459);let R=["layout","comments","whitespace","line-spacing"];function O(e){let t,n,s,l,o,d,c,u,m,h=(0,a.c)(29),{additionalPreferences:f,defaultHideWhitespace:p,enabledDiffViewSettings:g,onUpdateWhitespace:y,reloadOnSplitPreferenceChange:x,reloadOnWhitespaceChange:v}=e,b=void 0===g?R:g,j=void 0!==x&&x,w=void 0!==v&&v;h[0]!==b?(t=b.includes("layout")&&b.includes("comments"),h[0]=b,h[1]=t):t=h[1];let _=t;h[2]!==b?(n=b.includes("line-spacing")||b.includes("whitespace"),h[2]=b,h[3]=n):n=h[3];let N=n;h[4]!==b||h[5]!==N?(s=N&&(b.includes("comments")||b.includes("layout")),h[4]=b,h[5]=N,h[6]=s):s=h[6];let I=s;return h[7]!==b||h[8]!==j?(l=b.includes("layout")&&(0,i.jsx)(S,{reloadOnChange:j}),h[7]=b,h[8]=j,h[9]=l):l=h[9],h[10]!==_?(o=_&&(0,i.jsx)(r.l.Divider,{}),h[10]=_,h[11]=o):o=h[11],h[12]!==b?(d=b.includes("comments")&&(0,i.jsx)(D,{}),h[12]=b,h[13]=d):d=h[13],h[14]!==I?(c=I&&(0,i.jsx)(r.l.Divider,{}),h[14]=I,h[15]=c):c=h[15],h[16]!==p||h[17]!==b||h[18]!==y||h[19]!==w||h[20]!==N?(u=N?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(C,{defaultHideWhitespace:p,lineSpacingPreferenceAvailable:b.includes("line-spacing"),whitespacePreferenceAvailable:b.includes("whitespace"),onUpdateWhitespace:y,reloadOnChange:w?P:void 0})}):null,h[16]=p,h[17]=b,h[18]=y,h[19]=w,h[20]=N,h[21]=u):u=h[21],h[22]!==f||h[23]!==c||h[24]!==u||h[25]!==l||h[26]!==o||h[27]!==d?(m=(0,i.jsxs)(i.Fragment,{children:[l,o,d,c,u,f]}),h[22]=f,h[23]=c,h[24]=u,h[25]=l,h[26]=o,h[27]=d,h[28]=m):m=h[28],m}function P(){return window.location.reload()}function F(e){let t,n,d,c,u,m,h=(0,a.c)(21),{additionalPreferences:f,invisible:p,defaultHideWhitespace:g,enabledDiffViewSettings:y,onUpdateWhitespace:x,reloadOnSplitPreferenceChange:b,reloadOnWhitespaceChange:j,small:w,userNotices:C}=e,_=void 0===y?R:y,N=void 0!==b&&b,S=void 0!==j&&j,{sendAnalyticsEvent:I}=(0,A.s)();h[0]!==I?(t=()=>{I("diff_view.settings.open","DIFF_VIEW_SETTINGS_BUTTON")},h[0]=I,h[1]=t):t=h[1];let k=t,L=w?"small":"medium",D=void 0===p||p?"invisible":"default";return h[2]!==k||h[3]!==L||h[4]!==D?(n=(0,i.jsx)(l.W.Anchor,{children:(0,i.jsx)(o.K,{"aria-label":"Open diff view settings",icon:s.GearIcon,size:L,variant:D,onClick:k})}),h[2]=k,h[3]=L,h[4]=D,h[5]=n):n=h[5],h[6]!==f||h[7]!==g||h[8]!==_||h[9]!==x||h[10]!==N||h[11]!==S?(d=(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(r.l,{children:(0,i.jsx)(O,{additionalPreferences:f,defaultHideWhitespace:g,enabledDiffViewSettings:_,onUpdateWhitespace:x,reloadOnSplitPreferenceChange:N,reloadOnWhitespaceChange:S})})}),h[6]=f,h[7]=g,h[8]=_,h[9]=x,h[10]=N,h[11]=S,h[12]=d):d=h[12],h[13]!==n||h[14]!==d?(c=(0,i.jsxs)(l.W,{children:[n,d]}),h[13]=n,h[14]=d,h[15]=c):c=h[15],h[16]!==C?(u=(0,i.jsx)(v,{userNotices:C}),h[16]=C,h[17]=u):u=h[17],h[18]!==c||h[19]!==u?(m=(0,i.jsxs)(i.Fragment,{children:[c,u]}),h[18]=c,h[19]=u,h[20]=m):m=h[20],m}try{O.displayName||(O.displayName="DiffViewSettingsMenuContent")}catch{}try{F.displayName||(F.displayName="DiffViewSettings")}catch{}},28177:(e,t,n)=>{n.d(t,{n:()=>r});var i=n(74848),a=n(16522),s=n(38621);function r(e){let t,n=(0,a.c)(3);if("existing-issue"===e.type){if("open"===e.state){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(s.IssueOpenedIcon,{className:"fgColor-open"}),n[0]=e):e=n[0],e}if("closed"===e.state){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(s.IssueClosedIcon,{className:"fgColor-done"}),n[1]=e):e=n[1],e}}return n[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(s.IssueDraftIcon,{className:"fgColor-draft"}),n[2]=t):t=n[2],t}try{r.displayName||(r.displayName="IssueIcon")}catch{}},30388:(e,t,n)=>{n.d(t,{qJ:()=>N});var i=n(74848),a=n(16522),s=n(96540),r=n(34164),l=n(3433),o=n(40090);let d="ListBlock-module__list--YHbt4",c="ListBlock-module__item--xlbmd",u="ListBlock-module__itemContent--cacSg",m="ListBlock-module__itemClickable--AFcjc";function h(e){let t,n,s=(0,a.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)("ListBlock-module__container--QbgMo",o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,i.jsx)("div",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function f(e){let t,n,s=(0,a.c)(5),{children:l,className:o}=e;return s[0]!==o?(t=(0,r.$)("ListBlock-module__header--meKIf",o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==t?(n=(0,i.jsx)("div",{className:t,children:l}),s[2]=l,s[3]=t,s[4]=n):n=s[4],n}function p(e){let t,n,s,r,l=(0,a.c)(11);if(l[0]!==e?({children:t,loading:s,...n}=e,l[0]=e,l[1]=t,l[2]=n,l[3]=s):(t=l[1],n=l[2],s=l[3]),void 0!==s&&s){let e,t;return l[4]===Symbol.for("react.memo_cache_sentinel")?(e=[void 0,void 0,void 0,void 0,void 0].map(g),l[4]=e):e=l[4],l[5]!==n||l[6]!==e?(t=(0,i.jsx)("ul",{className:d,"data-testid":"list-block-skeleton",...n,children:e}),l[5]=n,l[6]=e,l[7]=t):t=l[7],t}return l[8]!==t||l[9]!==n?(r=(0,i.jsx)("ul",{className:d,...n,children:t}),l[8]=t,l[9]=n,l[10]=r):r=l[10],r}function g(e,t){return(0,i.jsx)(v,{},t)}function y(e){let t,n,o,d=(0,a.c)(47),h=null,f=null,p=null,g=null,y=null;if(d[0]!==e.children){for(let t of s.Children.toArray(e.children))s.isValidElement(t)&&(t.type===b?h=t:t.type===j?f=t:t.type===w?p=t:t.type===C?g=t:t.type===x&&(y=t));d[0]=e.children,d[1]=h,d[2]=f,d[3]=p,d[4]=g,d[5]=y}else h=d[1],f=d[2],p=d[3],g=d[4],y=d[5];d[6]!==p||d[7]!==h||d[8]!==g||d[9]!==f?(t=(0,i.jsxs)(i.Fragment,{children:[h,f,p,g]}),d[6]=p,d[7]=h,d[8]=g,d[9]=f,d[10]=t):t=d[10];let v=t;if("href"in e){let t,n,a,s,o,h;if(d[11]!==e?({href:t,isExternalLink:a,...n}=e,d[11]=e,d[12]=t,d[13]=n,d[14]=a):(t=d[12],n=d[13],a=d[14]),void 0!==a&&a){let e,a,s;return d[15]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.$)(u,m),d[15]=e):e=d[15],d[16]!==v||d[17]!==t||d[18]!==n?(a=(0,i.jsx)("a",{href:t,className:e,target:"_self",rel:"noopener noreferrer",...n,children:v}),d[16]=v,d[17]=t,d[18]=n,d[19]=a):a=d[19],d[20]!==y||d[21]!==a?(s=(0,i.jsxs)("li",{className:c,children:[a,y]}),d[20]=y,d[21]=a,d[22]=s):s=d[22],s}return d[23]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.$)(u,m),d[23]=s):s=d[23],d[24]!==v||d[25]!==t||d[26]!==n?(o=(0,i.jsx)(l.N_,{...n,to:t,className:s,children:v}),d[24]=v,d[25]=t,d[26]=n,d[27]=o):o=d[27],d[28]!==y||d[29]!==o?(h=(0,i.jsxs)("li",{className:c,children:[o,y]}),d[28]=y,d[29]=o,d[30]=h):h=d[30],h}if("onClick"in e){let t,n,a,s,l;return d[31]!==e?({onClick:t,...n}=e,d[31]=e,d[32]=t,d[33]=n):(t=d[32],n=d[33]),d[34]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.$)(u,m),d[34]=a):a=d[34],d[35]!==v||d[36]!==t||d[37]!==n?(s=(0,i.jsx)("button",{...n,className:a,onClick:t,children:v}),d[35]=v,d[36]=t,d[37]=n,d[38]=s):s=d[38],d[39]!==y||d[40]!==s?(l=(0,i.jsxs)("li",{className:c,children:[s,y]}),d[39]=y,d[40]=s,d[41]=l):l=d[41],l}return d[42]!==v?(n=(0,i.jsx)("div",{className:u,children:v}),d[42]=v,d[43]=n):n=d[43],d[44]!==y||d[45]!==n?(o=(0,i.jsxs)("li",{className:c,children:[n,y]}),d[44]=y,d[45]=n,d[46]=o):o=d[46],o}function x(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__actions--LfUWo",children:s}),n[0]=s,n[1]=t):t=n[1],t}function v(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("li",{className:c,children:(0,i.jsx)("div",{className:"ListBlock-module__skeletonItem--ZfJMT",children:(0,i.jsx)(o.r,{lines:2})})}),t[0]=e):e=t[0],e}function b(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__leadingVisual--tOjGr",children:s}),n[0]=s,n[1]=t):t=n[1],t}function j(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h3",{className:"ListBlock-module__title--MZAST",children:s}),n[0]=s,n[1]=t):t=n[1],t}function w(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__description--dTYnl",children:s}),n[0]=s,n[1]=t):t=n[1],t}function C(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:"ListBlock-module__metadata--gtl9k",children:s}),n[0]=s,n[1]=t):t=n[1],t}function _(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("li",{className:"ListBlock-module__emptyState--MymTD",children:s}),n[0]=s,n[1]=t):t=n[1],t}y.LeadingVisual=b,y.Title=j,y.Description=w,y.SecondaryDescription=C,y.Metadata=C,y.Actions=x,y.Skeleton=v;let N=h;N.Header=f,N.List=p,N.Item=y,N.EmptyState=_,N.displayName="ListBlock",f.displayName="ListBlock.Header",p.displayName="ListBlock.List",y.displayName="ListBlock.Item",b.displayName="ListBlock.Item.LeadingVisual",j.displayName="ListBlock.Item.Title",w.displayName="ListBlock.Item.Description",C.displayName="ListBlock.Item.Metadata",x.displayName="ListBlock.Item.Actions",v.displayName="ListBlock.Item.Skeleton",_.displayName="ListBlock.EmptyState";try{h.displayName||(h.displayName="ListBlock")}catch{}},31629:(e,t,n)=>{function i(e){return"github-graphql"===e.type}function a(e){return"loop"===e.type}function s(e){return"text"===e.type}n.d(t,{Tm:()=>i,ir:()=>s,jq:()=>a})},31675:(e,t,n)=>{n.d(t,{A:()=>i});let i={"hide-on-mobile":"responsive-module__hide-on-mobile--lWlU1","hide-on-desktop":"responsive-module__hide-on-desktop--op38F","hide-on-small":"responsive-module__hide-on-small--oDr47","hide-on-medium-up":"responsive-module__hide-on-medium-up--imsgz"}},33026:(e,t,n)=>{n.d(t,{U8:()=>s,kj:()=>i,qD:()=>a});let i="draft",a="latest",s=i},33195:(e,t,n)=>{n.d(t,{u:()=>u});var i=n(74848),a=n(68273),s=n(16522),r=n(46589),l=n(96540),o=n(34164);let d="PullRequestStateLabel-module__unlisted--pcrfP";var c=n(33578);let u=(0,a.Z6)()?function(e){let t,n,a=(0,s.c)(7),{className:l,state:u}=e,h=c.a[u];if(u===c.Q.Unlisted){let e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("span",{className:d,children:[(0,i.jsx)(m,{})," Unlisted"]}),a[0]=e):e=a[0],e}a[1]!==l?(t=(0,o.$)("flex-self-start",l),a[1]=l,a[2]=t):t=a[2];let f=h.status;return a[3]!==h.description||a[4]!==t||a[5]!==f?(n=(0,i.jsx)(r.A,{className:t,status:f,children:h.description}),a[3]=h.description,a[4]=t,a[5]=f,a[6]=n):n=a[6],n}:function({className:e,state:t}){let n=(0,l.useMemo)(()=>c.a[t],[t]);return t===c.Q.Unlisted?(0,i.jsxs)("span",{className:d,children:[(0,i.jsx)(m,{})," Unlisted"]}):(0,i.jsx)(r.A,{className:(0,o.$)("flex-self-start",e),status:n.status,children:n.description})},m=(0,a.Z6)()?function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 3.25C2.5 2.83579 2.83579 2.5 3.25 2.5C3.66421 2.5 4 2.83579 4 3.25C4 3.66421 3.66421 4 3.25 4C2.83579 4 2.5 3.66421 2.5 3.25ZM3.25 1C2.00736 1 1 2.00736 1 3.25C1 4.22966 1.62611 5.06309 2.5 5.37197V10.628C1.62611 10.9369 1 11.7703 1 12.75C1 13.9926 2.00736 15 3.25 15C4.49264 15 5.5 13.9926 5.5 12.75C5.5 11.7703 4.87389 10.9369 4 10.628V5.37197C4.87389 5.06309 5.5 4.22966 5.5 3.25C5.5 2.00736 4.49264 1 3.25 1ZM3.25 12C2.83579 12 2.5 12.3358 2.5 12.75C2.5 13.1642 2.83579 13.5 3.25 13.5C3.66421 13.5 4 13.1642 4 12.75C4 12.3358 3.66421 12 3.25 12Z"}),(0,i.jsx)("path",{d:"M14 7.5C14 8.19036 13.3844 8.75 12.625 8.75C11.8656 8.75 11.25 8.19036 11.25 7.5C11.25 6.80964 11.8656 6.25 12.625 6.25C13.3844 6.25 14 6.80964 14 7.5Z"}),(0,i.jsx)("path",{d:"M14 2.75C14 3.44036 13.3844 4 12.625 4C11.8656 4 11.25 3.44036 11.25 2.75C11.25 2.05964 11.8656 1.5 12.625 1.5C13.3844 1.5 14 2.05964 14 2.75Z"}),(0,i.jsx)("path",{d:"M10.2197 10.7197C10.5126 10.4268 10.9874 10.4268 11.2803 10.7197L14.2803 13.7197C14.5732 14.0126 14.5732 14.4874 14.2803 14.7803C13.9874 15.0732 13.5126 15.0732 13.2197 14.7803L10.2197 11.7803C9.92683 11.4874 9.92683 11.0126 10.2197 10.7197Z"})]}),t[0]=e):e=t[0],e}:function(){return(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 3.25C2.5 2.83579 2.83579 2.5 3.25 2.5C3.66421 2.5 4 2.83579 4 3.25C4 3.66421 3.66421 4 3.25 4C2.83579 4 2.5 3.66421 2.5 3.25ZM3.25 1C2.00736 1 1 2.00736 1 3.25C1 4.22966 1.62611 5.06309 2.5 5.37197V10.628C1.62611 10.9369 1 11.7703 1 12.75C1 13.9926 2.00736 15 3.25 15C4.49264 15 5.5 13.9926 5.5 12.75C5.5 11.7703 4.87389 10.9369 4 10.628V5.37197C4.87389 5.06309 5.5 4.22966 5.5 3.25C5.5 2.00736 4.49264 1 3.25 1ZM3.25 12C2.83579 12 2.5 12.3358 2.5 12.75C2.5 13.1642 2.83579 13.5 3.25 13.5C3.66421 13.5 4 13.1642 4 12.75C4 12.3358 3.66421 12 3.25 12Z"}),(0,i.jsx)("path",{d:"M14 7.5C14 8.19036 13.3844 8.75 12.625 8.75C11.8656 8.75 11.25 8.19036 11.25 7.5C11.25 6.80964 11.8656 6.25 12.625 6.25C13.3844 6.25 14 6.80964 14 7.5Z"}),(0,i.jsx)("path",{d:"M14 2.75C14 3.44036 13.3844 4 12.625 4C11.8656 4 11.25 3.44036 11.25 2.75C11.25 2.05964 11.8656 1.5 12.625 1.5C13.3844 1.5 14 2.05964 14 2.75Z"}),(0,i.jsx)("path",{d:"M10.2197 10.7197C10.5126 10.4268 10.9874 10.4268 11.2803 10.7197L14.2803 13.7197C14.5732 14.0126 14.5732 14.4874 14.2803 14.7803C13.9874 15.0732 13.5126 15.0732 13.2197 14.7803L10.2197 11.7803C9.92683 11.4874 9.92683 11.0126 10.2197 10.7197Z"})]})};try{u.displayName||(u.displayName="PullRequestStateLabel")}catch{}try{m.displayName||(m.displayName="GitPullRequestUnlistedSvg")}catch{}},33578:(e,t,n)=>{n.d(t,{Q:()=>i,a:()=>a});let i={Open:"OPEN",Closed:"CLOSED",Merged:"MERGED",Queued:"QUEUED",Draft:"DRAFT",Unlisted:"UNLISTED"},a={[i.Open]:{description:"Open",status:"pullOpened"},[i.Closed]:{description:"Closed",status:"pullClosed"},[i.Queued]:{description:"Queued",status:"pullQueued"},[i.Merged]:{description:"Merged",status:"pullMerged"},[i.Draft]:{description:"Draft",status:"draft"},[i.Unlisted]:{description:"Unlisted",status:"unlisted"}}},33644:(e,t,n)=>{n.d(t,{A:()=>i});let i={stickyHeader:"use-sticky-header-module__stickyHeader--UQFpz"}},34031:(e,t,n)=>{n.d(t,{M:()=>r});var i=n(74848),a=n(16522),s=n(74807);function r(e){let t,n,r,l,o=(0,a.c)(8),{isRunning:d,messages:c}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t={running:"Running...",waiting:"Waiting..."},o[0]=t):t=o[0];let u=t,m=c||u,h=d?m.running:m.waiting,f=d?"thinking":"static";return o[1]!==f?(n=(0,i.jsx)(s.N,{animationType:f,loopAnimation:!0}),o[1]=f,o[2]=n):n=o[2],o[3]!==h?(r=(0,i.jsx)("div",{className:"RunningDisplay-module__text--nICc0",children:h}),o[3]=h,o[4]=r):r=o[4],o[5]!==n||o[6]!==r?(l=(0,i.jsxs)("div",{className:"RunningDisplay-module__container--dUZ8X",children:[n,r]}),o[5]=n,o[6]=r,o[7]=l):l=o[7],l}try{r.displayName||(r.displayName="RunningDisplay")}catch{}},34261:(e,t,n)=>{n.d(t,{W:()=>u,f:()=>c});var i=n(68273),a=n(16522),s=n(65510),r=n(20622),l=n(53885),o=n(96379),d=n(50129);let c=(0,i.Z6)()?function(){let e,t=(0,a.c)(2),{basePageDataUrl:n}=(0,d.Yu)(),i=`basePageDataURL:${n}`;return t[0]!==i?(e=[r.uT.header,i],t[0]=i,t[1]=e):e=t[1],e}:function(){let{basePageDataUrl:e}=(0,d.Yu)();return[r.uT.header,`basePageDataURL:${e}`]},u=(0,i.Z6)()?function(e){let t,n,i=(0,a.c)(6),d=(0,l.e)(r.uT.header),u=c();return i[0]!==d?(t=async()=>{let e=await (0,o.QJ)(d);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},i[0]=d,i[1]=t):t=i[1],i[2]!==e||i[3]!==u||i[4]!==t?(n={queryKey:u,queryFn:t,initialData:e,staleTime:1/0},i[2]=e,i[3]=u,i[4]=t,i[5]=n):n=i[5],(0,s.U)(n)}:function(e){let t=(0,l.e)(r.uT.header),n=c();return(0,s.U)({queryKey:n,queryFn:async()=>{let e=await (0,o.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},initialData:e,staleTime:1/0})}},35104:(e,t,n)=>{n.d(t,{W:()=>c,Y:()=>d});var i=n(16522),a=n(2635),s=n(33592),r=n(51213),l=n(72303),o=n(53419);function d(e){let t,n,d=(0,i.c)(6),c=(0,s.b)(),u=(0,a.Pk)();d[0]!==c||d[1]!==e||d[2]!==u?(t=async()=>{let t=e.name||e.tag;(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ISSUE",mode:"immersive",threadId:(0,l.W)(u)?.id});let n={type:"text",name:`timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting task '${t}' as an issue..."}`},i=e.repository?` in repository ${e.repository}`:"",a=`
Create a draft issue using the content of the ${e.tag} task${i}.
`;await c.sendChatMessage({thread:(0,l.W)(u),content:a,references:[n],topic:u.currentTopic,context:u.context,customInstructions:u.customInstructions,model:u.model,intent:r.wh.planningAgent})},d[0]=c,d[1]=e,d[2]=u,d[3]=t):t=d[3];let m=t;return d[4]!==m?(n={convertToDraftIssue:m},d[4]=m,d[5]=n):n=d[5],n}function c(e){let t,n,d=(0,i.c)(6),c=(0,s.b)(),u=(0,a.Pk)();d[0]!==c||d[1]!==u||d[2]!==e?(t=async()=>{(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ALL_ISSUES",mode:"immersive",threadId:(0,l.W)(u)?.id});let t=`
Create draft issues for all tasks with the following tags: ${e.join(", ")}.
The tasks should be filed under a new parent issue. If the tasklist has a title, use that as the parent issue title.
`;await c.sendChatMessage({thread:(0,l.W)(u),content:t,references:[{type:"text",name:'timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting all tasks as issues..."}'}],topic:u.currentTopic,context:u.context,customInstructions:u.customInstructions,model:u.model,intent:r.wh.planningAgent})},d[0]=c,d[1]=u,d[2]=e,d[3]=t):t=d[3];let m=t;return d[4]!==m?(n={convertAllToDraftIssues:m},d[4]=m,d[5]=n):n=d[5],n}},36296:(e,t,n)=>{n.d(t,{h:()=>o});var i=n(16522),a=n(8108),s=n(97665),r=n(93161),l=n(48057);function o(){let e,t=(0,i.c)(5),{mutateAsync:n}=(0,a.bB)(),{mutateAsync:o}=(0,a.e9)(),{mutateAsync:d}=(0,a._g)(),c=(0,s.jE)();return t[0]!==c||t[1]!==d||t[2]!==o||t[3]!==n?(e={createProgressHandler:(e,t)=>async i=>{switch(i.type){case"UPDATE_NODE_VALUE":await n({nodeID:i.nodeID,value:i.value,loopID:e,version:t});break;case"UPDATE_NODE_VALUE_PARTIAL":{let n=(0,l.wu)(e,t),a=c.getQueryData(n);if(a){let e={...a,nodes:{...a.nodes,[i.nodeID]:{...a.nodes[i.nodeID]??r.D,value:i.value}}};c.setQueryData(n,e)}break}case"UPDATE_NODE_ERROR":await o({nodeID:i.nodeID,error:i.error,loopID:e,version:t});break;case"SET_RUNNING":await d({nodeID:i.nodeID,loopID:e,version:t})}}},t[0]=c,t[1]=d,t[2]=o,t[3]=n,t[4]=e):e=t[4],e}},36729:(e,t,n)=>{n.d(t,{Vv:()=>s,Wr:()=>r,e:()=>a,zW:()=>i});let i="FILE";function a(e){return"left"===e||"right"===e}let s="empty-diff-line",r={Line:"line",Multiline:"multiline",File:"file"}},36903:(e,t,n)=>{n.d(t,{K3:()=>a,L2:()=>r,as:()=>s});var i=n(16522);function a(e){let t,n,a,s,r=(0,i.c)(12);if(r[0]!==e.language||r[1]!==e.value){let i,s,l=new Blob([e.value]).size;r[5]===Symbol.for("react.memo_cache_sentinel")?(i=new Set(["markdown","html"]),r[5]=i):i=r[5];let o=i;r[6]!==e.value?(s=e.value.split(`
`),r[6]=e.value,r[7]=s):s=r[7],t=s.length,n=o.has(e.language),a=function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(l),r[0]=e.language,r[1]=e.value,r[2]=t,r[3]=n,r[4]=a}else t=r[2],n=r[3],a=r[4];return r[8]!==t||r[9]!==n||r[10]!==a?(s={linesOfCode:t,isPreviewable:n,size:a},r[8]=t,r[9]=n,r[10]=a,r[11]=s):s=r[11],s}function s(e){try{let t=new URL(e,window.location.origin);if(t.origin!==window.location.origin)return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<4)return null;let i=n[0],a=n[1];if(!i||!a)return null;let s=n.slice(4).join("/");return{repoOwner:i,repoName:a,filePath:s}}catch{return null}}function r(e,t,n){return`${e} / ${t} / ${n.split("/").join(" / ")}`}},37212:(e,t,n)=>{n.d(t,{Bz:()=>r,NP:()=>l});var i=n(68273),a=n(99279),s=n(86320);n(13360);let r=a.G.createQueryRouteConfig("pullRequestsCommitsRoute",{path:"/:owner/:repo/pull/:pr_number/commits",queries:[(0,s.Y)()]});function l(){return r.queries.mainQuery.makeQueryKey()}(0,i.Z6)()},37510:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(46996);function a(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let n={title:e.title,description:e.description,nodes:e.nodes},a={title:t.title,description:t.description,nodes:t.nodes};return(0,i.A)(n,a)}},37673:(e,t,n)=>{n.d(t,{K:()=>c});var i=n(74848),a=n(16522),s=n(88752),r=n(96540),l=n(62828),o=n(7812),d=n(1747);function c(e){let t,n,c,u,m,h=(0,a.c)(21),{className:f,messageId:p,messageIndex:g,messageTimestamp:y,references:x,size:v}=e;h[0]!==p||h[1]!==g||h[2]!==y?(t={messageId:p,messageIndex:g,messageTimestamp:y},h[0]=p,h[1]=g,h[2]=y,h[3]=t):t=h[3];let b=(0,l.I)(t),{updateItem:j,versionedItems:w,items:C}=(0,d.xx)();return h[4]!==p||h[5]!==g||h[6]!==y||h[7]!==x||h[8]!==j?(n=()=>{for(let e of x){let t=(0,o.oR)({ref:e,messageIndex:void 0!==g?g:1,messageId:p,timestamp:y});null!=t&&j(t)}},c=[p,g,y,x,j],h[4]=p,h[5]=g,h[6]=y,h[7]=x,h[8]=j,h[9]=n,h[10]=c):(n=h[9],c=h[10]),(0,r.useEffect)(n,c),h[11]!==C||h[12]!==g||h[13]!==w?(u=e=>(0,o.wt)(e,g,w,C),h[11]=C,h[12]=g,h[13]=w,h[14]=u):u=h[14],h[15]!==f||h[16]!==b||h[17]!==x||h[18]!==v||h[19]!==u?(m=(0,i.jsx)(s.t2,{references:x,onClickReference:b,size:v,className:f,getReferenceVersion:u}),h[15]=f,h[16]=b,h[17]=x,h[18]=v,h[19]=u,h[20]=m):m=h[20],m}try{c.displayName||(c.displayName="ChatMessageReferences")}catch{}},38447:(e,t,n)=>{n.d(t,{p:()=>x,E:()=>y});var i=n(74848),a=n(16522),s=n(4559),r=n(25641),l=n(35247),o=n(38621),d=n(96540),c=n(37673),u=n(7812),m=n(1747),h=n(80947);let f="TimelineEvents-module__icon--E6IJb",p="TimelineEvents-module__situationalTimelineEvent--WTQlM TimelineEvents-module__timelineEvent--FV3V3";function g(e){return"text"===e.type&&null!=e.name&&e.name.startsWith("timeline-event:")}function y(e,t){return e.references?.some(e=>g(e)&&(void 0===t||t?.some(t=>e.name.startsWith(`timeline-event: {"type": "${t}"`))))??!1}function x(e){let t,n,s,r=(0,a.c)(10),{message:l,messageIndex:o,isViewingSharedThread:d,isSharedMessage:c,isLatestMessage:u}=e;return r[0]!==l||r[1]!==o?(t=y(l)&&(0,i.jsx)(v,{message:l,messageIndex:o}),r[0]=l,r[1]=o,r[2]=t):t=r[2],r[3]!==u||r[4]!==c||r[5]!==d?(n=(0,i.jsx)(b,{isViewingSharedThread:d,isSharedMessage:c,isLatestMessage:u}),r[3]=u,r[4]=c,r[5]=d,r[6]=n):n=r[6],r[7]!==t||r[8]!==n?(s=(0,i.jsxs)(i.Fragment,{children:[t,n]}),r[7]=t,r[8]=n,r[9]=s):s=r[9],s}function v({message:e,messageIndex:t}){let{updateItem:n}=(0,m.xx)();(0,d.useEffect)(()=>{if(e.references)for(let i of e.references){let a=(0,u.oR)({ref:i,messageIndex:t,messageId:e.id,timestamp:e.createdAt});null!=a&&n(a)}},[e.references,e.id,t,e.createdAt,n]);let a=e.references?.filter(e=>g(e)),l=[];if(a)for(let e of a){let t=JSON.parse(e.name.replace("timeline-event: ","")),n=e.icon||o.CheckIcon;l.push({type:t.type,markdownContent:t.markdownContent,icon:n})}if((0,d.useEffect)(()=>{if(l.length>0&&e.clientSide)for(let e of l){let t=e.markdownContent.replace(/\[([^\]]+)\]\([^)]+\)/g,"$1");(0,s.i)(t)}},[e.id]),a)return(0,i.jsxs)(i.Fragment,{children:[e.references&&e.references.length>0&&(0,i.jsx)(c.K,{className:"TimelineEvents-module__references--lv7xz ChatMessage-module__references--Pi5OH",messageId:e.id,messageTimestamp:e.createdAt,messageIndex:t,references:e.references,size:"medium"}),l.map(({type:n,markdownContent:a,icon:s})=>(0,i.jsxs)("div",{className:"TimelineEvents-module__timelineEvent--FV3V3",children:[(0,i.jsx)(s,{className:f}),(0,i.jsx)(h.G,{autoOpenPreviewPane:!1,markdown:a,messageId:e.id,messageIndex:t,messageTimestamp:e.createdAt,accessibleHeader:(0,r.hV)("Timeline",e.content??"")})]},n))]})}function b(e){let t,n,s,r=(0,a.c)(9),{isSharedMessage:d,isViewingSharedThread:c,isLatestMessage:u}=e;return r[0]!==d||r[1]!==c?(t=d&&!c&&(0,i.jsxs)("div",{className:p,children:[(0,i.jsx)(o.LinkIcon,{className:f})," Messages up to this point are included in shared link"]}),r[0]=d,r[1]=c,r[2]=t):t=r[2],r[3]!==u||r[4]!==c?(n=u&&l.W.copilotDuplicateThread&&c&&(0,i.jsxs)("div",{className:p,children:[(0,i.jsx)(o.RepoForkedIcon,{className:f})," Messages beyond this point will start a new private chat"]}),r[3]=u,r[4]=c,r[5]=n):n=r[5],r[6]!==t||r[7]!==n?(s=(0,i.jsxs)(i.Fragment,{children:[t,n]}),r[6]=t,r[7]=n,r[8]=s):s=r[8],s}try{x.displayName||(x.displayName="TimelineEvents")}catch{}try{v.displayName||(v.displayName="UserMessageTimelineEvent")}catch{}try{b.displayName||(b.displayName="SituationalTimelineEvents")}catch{}},38598:(e,t,n)=>{n.d(t,{i:()=>a,t:()=>i});let i=400,a="/favicons/favicon-copilot.svg"},39029:(e,t,n)=>{n.d(t,{G:()=>c,og:()=>d});var i=n(68273),a=n(16522),s=n(40235),r=n(70170),l=n(70263),o=n(96540);let d=(0,i.Z6)()?function(e,t,n,i){c(e,t,n,i)}:function(e,t,n,i){c(e,t,n,i)},c=(0,i.Z6)()?function(e,t,n,i){let o,d,c,u=(0,a.c)(9),m=(0,l.A)();u[0]!==t||u[1]!==m?(o=()=>{m()&&t()},u[0]=t,u[1]=m,u[2]=o):o=u[2];let h=i??2e3;u[3]!==o||u[4]!==h?(d=(0,r.n)(o,h),u[3]=o,u[4]=h,u[5]=d):d=u[5];let f=d;u[6]!==f||u[7]!==n?(c=e=>{if(n&&e.event_updates)for(let[t,i]of Object.entries(n))!!e.event_updates[t]==!!i&&window.setTimeout(f,e.wait||0);else window.setTimeout(f,e.wait||0)},u[6]=f,u[7]=n,u[8]=c):c=u[8];let p=c;(0,s.x)(e,p)}:function(e,t,n,i){let a=(0,l.A)(),d=(0,o.useMemo)(()=>(0,r.n)(()=>{a()&&t()},i??2e3),[a,t,i]),c=(0,o.useCallback)(e=>{if(n&&e.event_updates)for(let[t,i]of Object.entries(n))!!e.event_updates[t]==!!i&&window.setTimeout(d,e.wait||0);else window.setTimeout(d,e.wait||0)},[d,n]);(0,s.x)(e,c)}},39087:(e,t,n)=>{n.d(t,{J:()=>r,j:()=>s});var i=n(38621),a=n(49851);let s={range:{name:"Range",description:"A numeric value within a specified range",icon:a.FD},text:{name:"Text",description:"Free form text input",icon:a.md},boolean:{name:"Boolean",description:"True or false value",icon:i.BooleanOnIcon},select:{name:"Select",description:"Choose from a list of predefined options",icon:a.wB},date:{name:"Date",description:"Date or macro",icon:i.CalendarIcon}};function r(e,t){return(s[e.metadata.inputType]??s.text)[t]}},39344:(e,t,n)=>{n.d(t,{K:()=>S});var i=n(74848),a=n(16522),s=n(38621),r=n(57478),l=n(84268),o=n(51933),d=n(34164),c=n(96540);let u="IssueTree-module__tree--GQG9_",m="IssueTree-module__item--th4vZ",h="IssueTree-module__tokenContainer--mGoNS",f=c.createContext({hasTrailingVisuals:void 0}),p=c.createContext({level:0});function g(e){let t,n,s,l,o,d,m=(0,a.c)(17),{subIssueCount:h,subIssueHeaderText:p,hasTrailingVisuals:g,children:v}=e,b=void 0===p?"Sub-issues":p,j=void 0!==g&&g;if(m[0]!==v){let e=c.Children.toArray(v);n=e.find(x);let i=(t=e.filter(y)).length-1;if(i>=0&&c.isValidElement(t[i])){let e;m[3]===Symbol.for("react.memo_cache_sentinel")?(e={isLastBranch:!0},m[3]=e):e=m[3],t[i]=c.cloneElement(t[i],e)}m[0]=v,m[1]=t,m[2]=n}else t=m[1],n=m[2];m[4]!==j?(s={hasTrailingVisuals:j},m[4]=j,m[5]=s):s=m[5];let w=s,C=j||void 0;return m[6]!==t||m[7]!==h||m[8]!==b?(l=t.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"IssueTree-module__subHeader--BDblp",children:[b,(0,i.jsx)(r.A,{children:h})]}),(0,i.jsx)("ul",{role:"tree",className:u,children:t})]}),m[6]=t,m[7]=h,m[8]=b,m[9]=l):l=m[9],m[10]!==n||m[11]!==C||m[12]!==l?(o=(0,i.jsxs)("div",{className:"IssueTree-module__container--kYTT7","data-has-trailing-visual":C,children:[n,l]}),m[10]=n,m[11]=C,m[12]=l,m[13]=o):o=m[13],m[14]!==w||m[15]!==o?(d=(0,i.jsx)(f,{value:w,children:o}),m[14]=w,m[15]=o,m[16]=d):d=m[16],d}function y(e){return c.isValidElement(e)&&e.type===b}function x(e){return c.isValidElement(e)&&e.type===v}function v(e){let t,n,s,r=(0,a.c)(4);r[0]===Symbol.for("react.memo_cache_sentinel")?(t={level:0},r[0]=t):t=r[0];let l=t;return r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,d.$)(m,"IssueTree-module__rootItem--hxb6j"),r[1]=n):n=r[1],r[2]!==e?(s=(0,i.jsx)(p,{value:l,children:(0,i.jsx)("div",{className:n,children:(0,i.jsx)(C,{...e})})}),r[2]=e,r[3]=s):s=r[3],s}function b(e){let t,n,s,r,l,o,d,h,f=(0,a.c)(19);f[0]!==e?({children:t,isLastBranch:n,...s}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=s):(t=f[1],n=f[2],s=f[3]);let g=c.Children.toArray(t),y=g.filter(w),x=g.filter(j),{level:v}=c.useContext(p),b=v+1;f[4]!==b?(r={level:b},f[4]=b,f[5]=r):r=f[5];let _=r,N=n&&0===y.length,S=y.length-1;if(n&&S>=0&&c.isValidElement(y[S])){let e;f[6]===Symbol.for("react.memo_cache_sentinel")?(e={isLastBranch:!0},f[6]=e):e=f[6],y[S]=c.cloneElement(y[S],e)}let I=N||void 0;return f[7]!==x||f[8]!==s?(l=(0,i.jsx)(C,{...s,children:x}),f[7]=x,f[8]=s,f[9]=l):l=f[9],f[10]!==y?(o=y.length>0&&(0,i.jsx)("ul",{role:"group",className:u,children:y}),f[10]=y,f[11]=o):o=f[11],f[12]!==I||f[13]!==l||f[14]!==o?(d=(0,i.jsxs)("li",{role:"treeitem","aria-selected":"false",className:m,"data-is-last-rendered":I,children:[l,o]}),f[12]=I,f[13]=l,f[14]=o,f[15]=d):d=f[15],f[16]!==_||f[17]!==d?(h=(0,i.jsx)(p,{value:_,children:d}),f[16]=_,f[17]=d,f[18]=h):h=f[18],h}function j(e){return!(c.isValidElement(e)&&e.type===b)}function w(e){return c.isValidElement(e)&&e.type===b}function C(e){let t,n,s,r,o,d,u,m,h=(0,a.c)(29),{leadingVisual:g,title:y,description:x,trailingBadge:v,trailingVisual:b,href:j,onClick:w,blockedBy:C}=e,{level:N}=c.useContext(p),{hasTrailingVisuals:S}=c.useContext(f),I=null!=C&&C.length>0;h[0]!==N?(t={"--level":N},h[0]=N,h[1]=t):t=h[1];let k=!!w||void 0;h[2]!==N?(n=N>0&&(0,i.jsx)("div",{className:"IssueTree-module__spacer--Z4HHo"}),h[2]=N,h[3]=n):n=h[3],h[4]!==g?(s=(0,i.jsx)("div",{className:"IssueTree-module__leadingVisual--e_q3O",children:g}),h[4]=g,h[5]=s):s=h[5];let L=j?"a":w?"button":"span";return h[6]!==j||h[7]!==w||h[8]!==L||h[9]!==y?(r=(0,i.jsx)(l.A,{as:L,className:"IssueTree-module__title--v0mbM",href:j,onClick:w,children:y}),h[6]=j,h[7]=w,h[8]=L,h[9]=y,h[10]=r):r=h[10],h[11]!==r||h[12]!==v?(o=(0,i.jsxs)("div",{className:"IssueTree-module__content--Ko11D",children:[r,v]}),h[11]=r,h[12]=v,h[13]=o):o=h[13],h[14]!==C||h[15]!==x||h[16]!==I?(d=(null!=x||I)&&(0,i.jsxs)("div",{className:"IssueTree-module__description--b8yCi",children:[I&&(0,i.jsx)(_,{dependencyType:"Blocked by",blockedBy:C}),x]}),h[14]=C,h[15]=x,h[16]=I,h[17]=d):d=h[17],h[18]!==S||h[19]!==b?(u=S&&(0,i.jsx)("div",{className:"IssueTree-module__trailingVisual--SewMY",children:b}),h[18]=S,h[19]=b,h[20]=u):u=h[20],h[21]!==t||h[22]!==k||h[23]!==n||h[24]!==s||h[25]!==o||h[26]!==d||h[27]!==u?(m=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"IssueTree-module__grid--hqjkj",style:t,"data-has-onclick":k,children:[n,s,o,d,u]})}),h[21]=t,h[22]=k,h[23]=n,h[24]=s,h[25]=o,h[26]=d,h[27]=u,h[28]=m):m=h[28],m}function _(e){let t,n,s=(0,a.c)(10),{dependencyType:r,blockedBy:d}=e;if(!d.length)return null;let c=d[0]?.href?"a":d[0]?.onClick?"button":"span",u=d[0]?.href,m=d[0]?.onClick,f=d[0]?.title,p=d[0]?.title;s[0]!==c||s[1]!==u||s[2]!==m||s[3]!==f||s[4]!==p?(t=(0,i.jsx)(l.A,{"data-testid":"blocked-by-link",className:"IssueTree-module__blockedBy--z0s4g",muted:!0,as:c,href:u,onClick:m,title:f,children:p}),s[0]=c,s[1]=u,s[2]=m,s[3]=f,s[4]=p,s[5]=t):t=s[5];let g=t;return s[6]!==d.length||s[7]!==g||s[8]!==r?(n=(0,i.jsx)(o.A,{size:"medium",className:"mr-2",leadingVisual:N,text:d.length>1?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("span",{className:h,children:[r," ",d.length]})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("span",{className:h,children:[r,": ",g]})})}),s[6]=d.length,s[7]=g,s[8]=r,s[9]=n):n=s[9],n}function N(){return(0,i.jsx)(s.BlockedIcon,{"data-testid":"blocked-by-icon",className:"fgColor-danger",size:14})}let S=Object.assign(g,{RootItem:v,Item:b});try{g.displayName||(g.displayName="Tree")}catch{}try{v.displayName||(v.displayName="TreeRootItem")}catch{}try{b.displayName||(b.displayName="TreeItem")}catch{}try{C.displayName||(C.displayName="TreeItemContent")}catch{}try{_.displayName||(_.displayName="IssueDependencies")}catch{}try{S.displayName||(S.displayName="IssueTree")}catch{}},39698:(e,t,n)=>{n.d(t,{i:()=>u});var i=n(68273),a=n(16522),s=n(48845),r=n(20622),l=n(97665),o=n(94747),d=n(69510),c=n(27011);let u=(0,i.Z6)()?function(e,t){let n,i,u,h=(0,a.c)(11),f=(0,c.Kp)(),p=`${f}/page_data/${r.uT.unresolveThread}`,g=(0,l.jE)(),{updateThread:y}=(0,c.an)();return h[0]!==p?(n=async e=>{let{threadId:t}=e,n=await (0,s.q$)(p,{method:"POST",body:{threadId:t}});(0,s.R)(n)},h[0]=p,h[1]=n):n=h[1],h[2]!==f||h[3]!==e||h[4]!==t||h[5]!==g||h[6]!==y?(i=(n,i)=>(y(Number(i.threadId),e,t,m),g.invalidateQueries({queryKey:(0,d.XG)(f)})),h[2]=f,h[3]=e,h[4]=t,h[5]=g,h[6]=y,h[7]=i):i=h[7],h[8]!==n||h[9]!==i?(u={mutationFn:n,onSuccess:i},h[8]=n,h[9]=i,h[10]=u):u=h[10],(0,o.n)(u)}:function(e,t){let n=(0,c.Kp)(),i=`${n}/page_data/${r.uT.unresolveThread}`,a=(0,l.jE)(),{updateThread:u}=(0,c.an)();return(0,o.n)({mutationFn:async({threadId:e})=>{let t=await (0,s.q$)(i,{method:"POST",body:{threadId:e}});(0,s.R)(t)},onSuccess:(i,s)=>(u(Number(s.threadId),e,t,e=>{if(e)return{...e,isResolved:!1,resolvedBy:void 0}}),a.invalidateQueries({queryKey:(0,d.XG)(n)}))})};function m(e){if(e)return{...e,isResolved:!1,resolvedBy:void 0}}},42257:(e,t,n)=>{n.d(t,{d:()=>o});var i=n(74848),a=n(68273),s=n(16522),r=n(99896);let l="AsyncChecksStatusBadge-module__ChecksStatusBadge--Ddd3K",o=(0,a.kw)()?function(e){let t,n,a=(0,s.c)(8),{status:o,oid:d,repo:c,badgeProps:u,descriptionString:m}=e;a[0]!==u?(t=void 0===u?{}:u,a[0]=u,a[1]=t):t=a[1];let h=t,f=void 0===m?"":m,[p,g]=(0,r.ym)(d,c);return a[2]!==h||a[3]!==f||a[4]!==p||a[5]!==g||a[6]!==o?(n=o?(0,i.jsx)(r.B6,{disablePopover:!1,size:"small",statusRollup:o,combinedStatus:p,descriptionText:f,onWillOpenPopup:g,buttonClassName:l,...h}):null,a[2]=h,a[3]=f,a[4]=p,a[5]=g,a[6]=o,a[7]=n):n=a[7],n}:function({status:e,oid:t,repo:n,badgeProps:a={},descriptionString:s=""}){let[o,d]=(0,r.ym)(t,n);return e?(0,i.jsx)(r.B6,{disablePopover:!1,size:"small",statusRollup:e,combinedStatus:o,descriptionText:s,onWillOpenPopup:d,buttonClassName:l,...a}):null};try{o.displayName||(o.displayName="AsyncChecksStatusBadge")}catch{}},42312:(e,t,n)=>{n.d(t,{KL:()=>o,U:()=>m});var i=n(74848),a=n(16522),s=n(71315),r=n(96540);let l=(0,r.createContext)({registerNavigableRef:()=>{},unregisterNavigableRef:()=>{}});function o(e){let t,n,o,m,h,f,p,g=(0,a.c)(9),{children:y}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],g[0]=t):t=g[0];let[x,v]=r.useState(t);g[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{v(t=>t.some(t=>t===e)?t:[...t,e])},g[1]=n):n=g[1];let b=n;g[2]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{v(t=>t.filter(t=>t!==e))},g[2]=o):o=g[2];let j=o;g[3]!==x?(m=()=>{let e=e=>{if(e.altKey&&"F6"===e.key){e.preventDefault();let t=x.filter(u).sort(c);if(0===t.length)return;let n=t.findIndex(d),i=(!e.shiftKey?t[n+1]??t[0]:t[n-1]??t[t.length-1])?.current;if(i){if(!["A","BUTTON","INPUT","SELECT","TEXTAREA"].includes(i.tagName)&&!i.hasAttribute("tabindex")){i.setAttribute("tabindex","-1");let e=()=>{i.removeAttribute("tabindex"),i.removeEventListener("blur",e)};i.addEventListener("blur",e,{once:!0})}i.focus()}}};return s.XC?.addEventListener("keydown",e),()=>{s.XC?.removeEventListener("keydown",e)}},h=[x],g[3]=x,g[4]=m,g[5]=h):(m=g[4],h=g[5]),(0,r.useEffect)(m,h),g[6]===Symbol.for("react.memo_cache_sentinel")?(f={registerNavigableRef:b,unregisterNavigableRef:j},g[6]=f):f=g[6];let w=f;return g[7]!==y?(p=(0,i.jsx)(l,{value:w,children:y}),g[7]=y,g[8]=p):p=g[8],p}function d(e){return e.current?.contains(s.XC?.activeElement||null)}function c(e,t){let n=e.current,i=t.current;return n===i?0:n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}function u(e){return null!==e.current}function m(){let e,t,n=(0,a.c)(4),i=(0,r.useRef)(null),{registerNavigableRef:s,unregisterNavigableRef:o}=(0,r.use)(l);return n[0]!==s||n[1]!==o?(e=()=>(s(i),()=>{o(i)}),t=[s,o],n[0]=s,n[1]=o,n[2]=e,n[3]=t):(e=n[2],t=n[3]),(0,r.useEffect)(e,t),i}try{l.displayName||(l.displayName="NavigableRefContext")}catch{}try{o.displayName||(o.displayName="NavigableRefProvider")}catch{}},42518:(e,t,n)=>{n.d(t,{C:()=>a});var i=n(91348);function a(e,t){let n=(0,i.FT)(e).map(e=>({nodeID:e.id,type:e.type,title:e.title,value:t.nodes[e.id]?.value}));return{type:"loop-execution",loopID:e.id,loopTitle:e.title,createdAt:t.createdAt,version:t.loopVersion,executionID:t.id,output:n}}},43134:(e,t,n)=>{n.d(t,{_T:()=>d,aq:()=>o,qU:()=>l});var i=n(82075),a=n(21046);let s=(0,i.A)("localStorage"),r="copilot-loops-thread-";function l(e){try{let t=`${r}${e}`;return s.getItem(t)}catch(e){return(0,a.FF)("Failed to read loop thread ID from localStorage:",e),null}}function o(e,t){if(null!==t)try{let n=`${r}${e}`;s.setItem(n,t)}catch(e){(0,a.FF)("Failed to store loop thread ID in localStorage:",e)}}function d(e){try{let t=`${r}${e}`;s.removeItem(t)}catch(e){(0,a.FF)("Failed to remove loop thread ID from localStorage:",e)}}},43147:(e,t,n)=>{n.d(t,{w:()=>c});var i=n(74848),a=n(68273),s=n(16522),r=n(98755),l=n(30459),o=n(16790),d=n(68534);let c=(0,a.kw)()?function(e){let t,n,a,c,u,m=(0,s.c)(17),{sha:h,direction:f,className:p}=e,g=void 0===f?"s":f,{sendAnalyticsEvent:y}=(0,l.s)(),{loggingPrefix:x,loggingPayload:v}=(0,o.xe)(),b=(0,o.eX)();m[0]!==v||m[1]!==x||m[2]!==y||m[3]!==b?(t=()=>{b&&y(`${x}click`,"COPY_SHA_CLICKED",v)},m[0]=v,m[1]=x,m[2]=y,m[3]=b,m[4]=t):t=m[4];let j=t;m[5]!==h?(n=(0,d.F)(h),m[5]=h,m[6]=n):n=m[6];let w=`Copy full SHA for ${n}`;return m[7]!==g?(a={direction:g},m[7]=g,m[8]=a):a=m[8],m[9]!==p||m[10]!==h||m[11]!==w||m[12]!==a?(c=(0,i.jsx)(r.T,{textToCopy:h,ariaLabel:w,tooltipProps:a,size:"small",className:p}),m[9]=p,m[10]=h,m[11]=w,m[12]=a,m[13]=c):c=m[13],m[14]!==j||m[15]!==c?(u=(0,i.jsx)("div",{onClick:j,children:c}),m[14]=j,m[15]=c,m[16]=u):u=m[16],u}:function({sha:e,direction:t="s",className:n}){let{sendAnalyticsEvent:a}=(0,l.s)(),{loggingPrefix:s,loggingPayload:c}=(0,o.xe)(),u=(0,o.eX)();return(0,i.jsx)("div",{onClick:()=>{u&&a(`${s}click`,"COPY_SHA_CLICKED",c)},children:(0,i.jsx)(r.T,{textToCopy:e,ariaLabel:`Copy full SHA for ${(0,d.F)(e)}`,tooltipProps:{direction:t},size:"small",className:n})})};try{c.displayName||(c.displayName="CopySHA")}catch{}},43362:(e,t,n)=>{n.d(t,{Be:()=>s,Sl:()=>l,Wp:()=>a,YY:()=>d,jH:()=>o,wm:()=>r});var i=n(36729);function a(e){return e.reduce((e,t)=>(e[t.path]=t,e),{})}function s(e){return e.reduce((e,t)=>(e[t.path]=!!t.markedAsViewed,e),{})}function r(e){let t=e.comments.map(e=>parseInt(e.threadId));return{id:e.id,pendingReviewIDs:t,comments:e.comments}}function l(e){return e.reduce((e,t)=>(e[t.path]=t,e),{})}function o(e,t){if(!e)return;let n={};if(!t)return n;for(let a of t){if(!a.markersMap||0===Object.keys(a.markersMap).length)continue;let t=a.path,s={};for(let t in a.markersMap){let n=a.markersMap[t];if(!n?.threads&&!n?.annotations)continue;let r={threads:[],annotations:[]};if(n.annotations)for(let t of n.annotations){let n=e.annotations[Number(t.id)];n&&r.annotations.push(n)}if(n.threads)for(let i of n.threads){let n=function(e,t){if("FILE"===e)return;let n=e[0];if(!u(n))return;let i=Number(e.slice(1)),a=-1,s="R";if(t.start){a=parseInt(t.start.slice(1));let e=t.start[0];u(e)&&(s=e)}else a=i,s=n;return{endLine:i,endDiffSide:c[n],startLine:a,startDiffSide:c[s],isOutdated:!!t.outdatedReason}}(t,i),a=e.threads[Number(i.id)];a&&n&&(a={...a,positioning:n,subject:n}),a&&r.threads.push(a)}"FILE"===t?s[i.zW]=r:s[t]=r}n[t]=s}return n}function d(e){return{endLine:e.line,endDiffSide:e.side?.toLowerCase()==="right"?"RIGHT":"LEFT",startLine:e.startLine??e.line,startDiffSide:e.startSide?e.startSide?.toLowerCase()==="right"?"RIGHT":"LEFT":e.side?.toLowerCase()==="right"?"RIGHT":"LEFT",isOutdated:!1}}let c={L:"LEFT",R:"RIGHT"};function u(e){return"L"===e||"R"===e}},43883:(e,t,n)=>{n.d(t,{Gl:()=>s,TC:()=>d,ai:()=>r,eh:()=>o});var i=n(21067);let a={};function s(e,t){let n=t?.currency??"USD";return(a[n]||(a[n]=new Intl.NumberFormat((0,i.JK)(),{currency:n,style:"currency"}))).format(e)}function r(e,t){return new Intl.NumberFormat((0,i.JK)(),{maximumFractionDigits:t?.precision}).format(e)}let l=["k","m","b"];function o(e,t){let{suffix:n=!0,capping:i=1/0,precision:a=1}=t??{},s="",o=Math.min(i,e);if(n){let e=c(o);s=l[e-1]||"",o/=1e3**e}let d=r(o,{precision:a})+s;return e>i?`${d}+`:d}function d(e){if(e<=1e4)return 1;let t=c(e);return e/1e3**t>=10?0:1}function c(e){let t=Math.floor(Math.log(Math.max(Math.abs(e),1))/Math.log(1e3));return Math.min(l.length,t)}},44095:(e,t,n)=>{n.d(t,{_:()=>v,m:()=>b});var i=n(74848),a=n(16522),s=n(26100),r=n(2635),l=n(4817),o=n(53419),d=n(38621),c=n(69726),u=n(5524),m=n(96540),h=n(7812),f=n(1747),p=n(48881),g=n(13974),y=n(7026),x=n(20382);function v(e){let t,n,s,u,h,v,j,w,C,_,N=(0,a.c)(36),{yaml:S,isStreaming:I}=e,k=(0,g.p)(I),{selectedThreadID:L}=(0,r.Pk)(),{updateItem:D,openItem:T,openPreviewPane:E}=(0,f.xx)(),{messageId:A,messageIndex:R,messageTimestamp:O,setHasAutoOpenedPreviewPane:P}=(0,p.H)();N[0]!==L?(t=e=>((e,t)=>{try{var n=(0,x.Hh)(e);if("object"!=typeof n||null==n)return null;return"object"==typeof n&&null!==n&&"tag"in n&&"string"==typeof n.tag&&"name"in n&&"string"==typeof n.name&&"content"in n&&"string"==typeof n.content&&(!("repository"in n)||null==n.repository||"string"==typeof n.repository)&&1?n:null}catch{return(0,o.BI)("copilot.planning_spec",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,L),N[0]=L,N[1]=t):t=N[1];let F=t,M=(0,y.M)(S,F,null);e:{let e,t;if(!M){n=null;break e}let i=`planning-spec:${M.tag}#${R}`;N[2]!==O?(e=new Date(O),N[2]=O,N[3]=e):e=N[3],N[4]!==i||N[5]!==I||N[6]!==A||N[7]!==M.content||N[8]!==M.name||N[9]!==M.repository||N[10]!==M.tag||N[11]!==e?(t={name:M.name,tag:M.tag,repository:M.repository,content:M.content,messageId:A,id:i,type:"planning-spec",isUserEdited:!1,isStreaming:I,timestamp:e},N[4]=i,N[5]=I,N[6]=A,N[7]=M.content,N[8]=M.name,N[9]=M.repository,N[10]=M.tag,N[11]=e,N[12]=t):t=N[12],n=t}let $=n;N[13]!==T||N[14]!==E||N[15]!==P?(s=(e,t)=>{let{selectItem:n}=void 0===t?{}:t;T(e.id,n),E(),P(!0)},N[13]=T,N[14]=E,N[15]=P,N[16]=s):s=N[16];let B=s;N[17]!==I||N[18]!==k||N[19]!==B||N[20]!==$||N[21]!==D?(u=()=>{$&&(D($),(I||k)&&B($,{selectItem:!0}))},h=[I,k,B,$,D],N[17]=I,N[18]=k,N[19]=B,N[20]=$,N[21]=D,N[22]=u,N[23]=h):(u=N[22],h=N[23]),(0,m.useEffect)(u,h),N[24]!==B||N[25]!==$?(v=()=>{$&&B($)},N[24]=B,N[25]=$,N[26]=v):v=N[26];let V=v;N[27]!==L?(j=()=>(0,o.BI)("copilot.planning_spec",{type:"BLOCK_RENDERED",mode:"immersive",threadId:L}),w=[L],N[27]=L,N[28]=j,N[29]=w):(j=N[28],w=N[29]),(0,m.useEffect)(j,w),N[30]!==I?(C=()=>I?(0,i.jsx)(c.A,{size:"small",className:l.sX}):(0,i.jsx)(d.NoteIcon,{}),N[30]=I,N[31]=C):C=N[31];let U=C;return N[32]!==U||N[33]!==V||N[34]!==$?(_=(0,i.jsx)(b,{previewItem:$,onClick:V,getIcon:U}),N[32]=U,N[33]=V,N[34]=$,N[35]=_):_=N[35],_}function b(e){let t,n,r,l,o,c,m=(0,a.c)(17),{previewItem:p,onClick:g,getIcon:y}=e,{versionedItems:x,items:v}=(0,f.xx)();m[0]!==v||m[1]!==p||m[2]!==x?(t=p?(0,h.LU)(p.id,x,v):null,m[0]=v,m[1]=p,m[2]=x,m[3]=t):t=m[3];let b=t;m[4]!==y?(n=y?.()||(0,i.jsx)(d.NoteIcon,{}),m[4]=y,m[5]=n):n=m[5],m[6]!==n?(r=(0,i.jsx)(u.l.LeadingVisual,{children:n}),m[6]=n,m[7]=r):r=m[7];let j=p?.name??"";return m[8]!==j?(l=(0,i.jsx)("div",{className:"PlanningSpecBlock-module__title--d0IjJ",children:j}),m[8]=j,m[9]=l):l=m[9],m[10]!==b?(o=null!==b&&(0,i.jsx)(u.l.TrailingVisual,{children:(0,i.jsx)(s.g,{version:b})}),m[10]=b,m[11]=o):o=m[11],m[12]!==g||m[13]!==r||m[14]!==l||m[15]!==o?(c=(0,i.jsx)("div",{className:"PlanningSpecBlock-module__container--UW6_s",children:(0,i.jsx)(u.l,{variant:"full",showDividers:!0,children:(0,i.jsxs)(u.l.Item,{onSelect:g,className:"PlanningSpecBlock-module__item--lxgT1",children:[r,l,o]})})}),m[12]=g,m[13]=r,m[14]=l,m[15]=o,m[16]=c):c=m[16],c}try{v.displayName||(v.displayName="PlanningSpecBlock")}catch{}try{b.displayName||(b.displayName="PlanningSpecBlockDisplay")}catch{}},45363:(e,t,n)=>{n.d(t,{C:()=>g});var i=n(35750),a=n(18150),s=n(61872),r=n(50467),l=n(38621);function o(e){return e.content}var d=n(90122),c=n(31629),u=n(39087),m=n(59370),h=n(53419),f=n(13647);let PromptNodeHandler=class PromptNodeHandler{logTokenUsage(e,t,n){(0,h.BI)("loops.prompt_node.token_usage",{model:n,token_type:e,token_value:t})}async execute(e,t){let n,i=await (0,d.Vq)(e),a="",s=e.metadata?.model;for await(let e of t.chatClient.getChatCompletion(i,s,t.signal))a+=e.content,e.usage&&(n=e.usage),t.onPartialResult?.(a);return n&&(this.logTokenUsage("TOTAL_TOKEN",n.total_tokens,n.model),this.logTokenUsage("PROMPT_TOKEN",n.prompt_tokens,n.model),this.logTokenUsage("COMPLETION_TOKEN",n.completion_tokens,n.model)),{value:a}}validate(e,t){let n=[];return e.metadata?.model&&t?.availableModels&&t.availableModels.length>0&&(t.availableModels.some(t=>t.id===e.metadata?.model)||n.push({error:`Prompt node uses unavailable model: ${e.metadata.model}`,errorType:s.T.UnavailableModel,involvedNodes:[e.id]})),n}constructor(){(0,r._)(this,"type","prompt"),(0,r._)(this,"metadata",{contentFields:["content"],icon:()=>l.CopilotIcon,description:()=>"Use AI to process a node",label:()=>"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown",isExecutable:!0,enabled:()=>!0})}};let GitHubGraphQLNodeHandler=class GitHubGraphQLNodeHandler{async execute(e,t){let n={nodeId:e.id,loopId:t.execution.loopID,version:t.execution.loopVersion,executionId:t.execution.id},i=await t.graphQLClient.getGraphQLResponse(e.content,n,{signal:t.signal});return i?{value:i.data??null}:{value:null}}validate(e,t){return[]}constructor(){(0,r._)(this,"type","github-graphql"),(0,r._)(this,"metadata",{type:"github-graphql",contentFields:["content"],icon:()=>l.MarkGithubIcon,description:()=>"Retrieve data from GitHub",label:()=>"GitHub GraphQL",color:"gray",enabled:f.Ve,outputLabel:"JSON",isExecutable:!0})}};let CodeNodeHandler=class CodeNodeHandler{async execute(e,t){let n=await t.codeExecutor.execute(e.content,e.id,t.signal);if(n.success)return{value:n.result??""};throw Error(n.error??"Code execution failed")}validate(e,t){return[]}constructor(){(0,r._)(this,"type","code"),(0,r._)(this,"metadata",{type:"code",color:"pink",contentFields:["content"],icon:()=>l.CodeIcon,description:()=>"Use classic code to process a node",label:()=>"Code",enabled:f.Ch,outputLabel:"Code output",isExecutable:!0,requiresCodeEvaluation:!0})}};let VisualizeNodeHandler=class VisualizeNodeHandler{async execute(e,t){return{value:o(e)}}validate(e,t){return[]}constructor(){(0,r._)(this,"type","visualize"),(0,r._)(this,"metadata",{type:"visualize",contentFields:["content"],icon:()=>l.GitBranchIcon,description:()=>"Use HTML and CSS to view output",label:()=>"Visualize",color:"olive",enabled:f.a1})}};let TextNodeHandler=class TextNodeHandler{async execute(e,t){let n=t.execution.inputValues?.[e.id],i=void 0!==n?n:o(e);if("date"===e.metadata.inputType&&"string"==typeof i&&(0,m.nS)(i)){let e=(0,m.Qf)(i);if(e)return{value:(0,m.O2)(e)}}return{value:i}}validate(e,t){let n=[],i=e.metadata;if("object"!=typeof i||!i)return n.push({error:"metadata is required for text nodes",errorType:s.T.MissingProperty,involvedNodes:[e.id]}),n;switch(i.inputType){case"boolean":["true","false"].includes(e.content)||n.push({error:'A boolean input must have a value of either "true" or "false"',errorType:s.T.InvalidBooleanValue,involvedNodes:[e.id]});break;case"range":"number"!=typeof i.min&&n.push({error:"A range input must have a min",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]}),"number"!=typeof i.max&&n.push({error:"A range input must have a max",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]});break;case"select":Array.isArray(i.options)&&0!==i.options.length?i.options.includes(e.content)||n.push({error:"A select node must have content equal to one of its options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]}):n.push({error:"A select input must have options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]});break;case"date":e.content?(0,m.Yj)(e.content)||n.push({error:"Date input must be a valid date (YYYY-MM-DD) or date macro (e.g., @today, @today+1d, @today-2w)",errorType:s.T.InvalidDateValue,involvedNodes:[e.id]}):n.push({error:"Date input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]});break;case"text":e.content||n.push({error:"Input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]})}return n}constructor(){(0,r._)(this,"type","text"),(0,r._)(this,"metadata",{type:"text",contentFields:["content"],icon:e=>{if(e&&(0,c.ir)(e)){if("boolean"===e.metadata.inputType)if("true"===e.content)return l.BooleanOnIcon;else return l.BooleanOffIcon;return(0,u.J)(e,"icon")}return l.TypographyIcon},description:e=>e&&(0,c.ir)(e)?(0,u.J)(e,"description"):"Input for nodes",label:e=>e&&(0,c.ir)(e)?(0,u.J)(e,"name"):"Input",color:"blue",enabled:()=>!0})}};let LoopNodeHandler=class LoopNodeHandler{async execute(e,t){return{value:o(e)}}validate(e,t){return[]}constructor(){(0,r._)(this,"type","loop"),(0,r._)(this,"metadata",{type:"loop",contentFields:["content"],icon:()=>l.GitPullRequestIcon,description:()=>"Use an existing pipeline as a node",label:()=>"Pipeline",color:"coral",enabled:f.V2,outputLabel:"Pipeline output",isExecutable:!0})}};var p=new WeakMap;let NodeHandlerRegistry=class NodeHandlerRegistry{registerHandler(e){(0,i._)(this,p).set(e.type,e)}async executeNode(e,t){let n=(0,i._)(this,p).get(e.type);if(!n)throw Error(`No handler registered for node type: ${e.type}`);return n.execute(e,t)}validateNode(e,t){let n=(0,i._)(this,p).get(e.type);return n?n.validate(e,t):[{error:`Unknown node type: ${e.type}`,errorType:s.T.MissingProperty,involvedNodes:[e.id]}]}getMetadata(e){let t=(0,i._)(this,p).get(e);return t?.metadata}getAllMetadata(){return Array.from((0,i._)(this,p).values()).map(e=>e.metadata)}getAllNodeTypes(){return Array.from((0,i._)(this,p).keys())}isExecutable(e){let t=this.getMetadata(e);return t?.isExecutable??!1}requiresCodeEvaluation(e){let t=this.getMetadata(e);return t?.requiresCodeEvaluation??!1}constructor(){(0,a._)(this,p,{writable:!0,value:new Map}),this.registerHandler(new PromptNodeHandler),this.registerHandler(new GitHubGraphQLNodeHandler),this.registerHandler(new CodeNodeHandler),this.registerHandler(new VisualizeNodeHandler),this.registerHandler(new TextNodeHandler),this.registerHandler(new LoopNodeHandler)}};let g=new NodeHandlerRegistry},46461:(e,t,n)=>{n.d(t,{G9:()=>r,Pq:()=>s,Pt:()=>function e(t,n,i=new Set){if(!i.has(t)){for(let a of(i.add(t),n(t),t.children))e(a,n,i);for(let a of t.blockedBy)e(a,n,i);for(let a of t.isBlocking)e(a,n,i)}},YR:()=>function e(t,n){for(let i of(n(t),t.children))e(i,n)},u0:()=>l});var i=n(16522),a=n(1747);async function s(e,t,n=new Set){if(!n.has(e)){for(let i of(n.add(e),await t(e),e.children))await s(i,t,n);for(let i of e.blockedBy)await s(i,t,n);for(let i of e.isBlocking)await s(i,t,n)}}function r(e,t,n,i,a){let s=e.reduce((e,n)=>(e.set(t(n),{item:n,parent:null,children:[],blockedBy:[],isBlocking:[]}),e),new Map);for(let r of e){let e=s.get(t(r)),l=n(r);if(null!=l){let t=s.get(l);t&&e&&(e.parent=t,t.children.push(e))}for(let t of i?.(r)??[]){let n=s.get(t);n&&e&&!n.blockedBy.includes(e)&&(e.blockedBy.includes(n)||e.blockedBy.push(n),n.isBlocking.includes(e)||n.isBlocking.push(e))}for(let t of a?.(r)??[]){let n=s.get(t);n&&e&&!n.isBlocking.includes(e)&&(e.isBlocking.includes(n)||e.isBlocking.push(n),n.blockedBy.includes(e)||n.blockedBy.push(e))}}return s}function l(){let e,t,n=(0,i.c)(6),{items:s,allOpenItems:l,versionedItems:f}=(0,a.xx)();n[0]!==l?(e=new Set(l),n[0]=l,n[1]=e):e=n[1];let p=e;return n[2]!==s||n[3]!==p||n[4]!==f?(t=r([...f.entries()].filter(h).map(e=>{let[,t]=e,n=t.find(e=>p.has(e));if(n)return s.get(n);let i=t.at(-1);return i?s.get(i):void 0}).filter(m),u,c,d,o),n[2]=s,n[3]=p,n[4]=f,n[5]=t):t=n[5],t}function o(e){return e.isBlockingTags}function d(e){return e.blockedByTags}function c(e){return e.parentTag}function u(e){return e.tag}function m(e){return!!e}function h(e){let[t]=e;return t.startsWith("new-issue:")||t.startsWith("existing-issue:")}},46857:(e,t,n)=>{n.d(t,{I:()=>r,O:()=>s});var i=n(91348),a=n(82590);function s(e){for(let n of e.references??[]){var t;if(n.type===a.km&&(t=n)&&"object"==typeof t&&"title"in t&&"nodes"in t){let t={description:n.description,id:n.id,title:n.title,owned:!0,nodes:n.nodes,updatedAt:new Date(e.createdAt).getTime(),visibility:"private"},a=(0,i.kX)(t,[]);return{messageId:e.id,pipeline:a}}}}function r(e,t=!1){for(let n of[...e].reverse()){if("assistant"!==n.role&&!t)continue;let e=s(n);if(e)return e}}},48057:(e,t,n)=>{n.d(t,{Qk:()=>y,rR:()=>v,vx:()=>p,wu:()=>f});var i=n(16522),a=n(97286),s=n(99519),r=n(5533),l=n(33026),o=n(50050),d=n(99993);let c=[400,401,403,404];function u(){let{data:e}=(0,d._N)(h,"latest"),t=(0,o.Ud)(m);return t===l.qD||t===l.kj?e:t}function m(e){return e.version}function h(e){return e?.version}function f(e,t){return["execution",e,t]}function p(){let e,t=(0,i.c)(3),{data:n}=(0,d._N)(g),a=u(),s=n??"",r=a??"";return t[0]!==s||t[1]!==r?(e=f(s,r),t[0]=s,t[1]=r,t[2]=e):e=t[2],e}function g(e){return e?.id}function y(e){let{data:t}=(0,d._N)(x);return v(t??"",u()??"",e)}function x(e){return e?.id}function v(e,t,n){let o,d,c,u,m=(0,i.c)(14),h=(0,s.EY)();m[0]!==e||m[1]!==t?(o=f(e,t),m[0]=e,m[1]=t,m[2]=o):o=m[2],m[3]!==e||m[4]!==h||m[5]!==t?(d=async()=>{if(!e||!t)return null;let n=await h.getExecution(e,t,l.qD);if(!n.success){let e=Error("Error fetching execution.");throw e.cause=n.httpStatus,e}let i=n.data;return h.isExecutionRunning(i.id)!==(0,r.y)(i)?null:i},m[3]=e,m[4]=h,m[5]=t,m[6]=d):d=m[6];let p=!!e&&!!t;return m[7]!==n?(c=n&&{select:n},m[7]=n,m[8]=c):c=m[8],m[9]!==o||m[10]!==d||m[11]!==p||m[12]!==c?(u={queryKey:o,queryFn:d,enabled:p,...c,staleTime:3e5,retry:b},m[9]=o,m[10]=d,m[11]=p,m[12]=c,m[13]=u):u=m[13],(0,a.I)(u)}function b(e,t){return!("number"==typeof t.cause&&c.includes(t.cause))&&e<3}},48881:(e,t,n)=>{n.d(t,{A:()=>a,H:()=>s});var i=n(96540);let a=(0,i.createContext)(null),s=()=>{let e=(0,i.useContext)(a);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{a.displayName||(a.displayName="ContentPreviewBlockContext")}catch{}},48926:(e,t,n)=>{n.d(t,{C:()=>h,j:()=>u});var i=n(74848),a=n(68273),s=n(16522),r=n(61200),l=n(81945),o=n(54571),d=n(62935),c=n(4095);let u=(0,a.kw)()?function(e){let t,n,a,u,h,f=(0,s.c)(19),{commit:p,repo:g,children:y,settings:x,textVariant:v}=e,b=(0,c.NO)(p.oid);f[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],f[0]=t):t=f[0];let[j]=(0,o.I)(m,!0,t),w=b?.onBehalfOf;return f[1]!==x?(n={fontWeight:"normal",fontColor:"fg.muted",avatarSize:16,...x},f[1]=x,f[2]=n):n=f[2],f[3]!==p.committedDate||f[4]!==j?(a=!j&&(0,i.jsx)(d.A,{className:"pl-1",datetime:p.committedDate}),f[3]=p.committedDate,f[4]=j,f[5]=a):a=f[5],f[6]!==j?(u=j&&(0,i.jsx)(l.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"}),f[6]=j,f[7]=u):u=f[7],f[8]!==y||f[9]!==p.authors||f[10]!==p.committer||f[11]!==p.committerAttribution||f[12]!==g||f[13]!==w||f[14]!==n||f[15]!==a||f[16]!==u||f[17]!==v?(h=(0,i.jsxs)(r.jF,{authors:p.authors,committer:p.committer,committerAttribution:p.committerAttribution,onBehalfOf:w,repo:g,includeVerbs:!0,authorSettings:n,textVariant:v,children:[a,u,y]}),f[8]=y,f[9]=p.authors,f[10]=p.committer,f[11]=p.committerAttribution,f[12]=g,f[13]=w,f[14]=n,f[15]=a,f[16]=u,f[17]=v,f[18]=h):h=f[18],h}:function({commit:e,repo:t,children:n,settings:a,textVariant:s}){let u=(0,c.NO)(e.oid),[m]=(0,o.I)(()=>!1,!0,[]);return(0,i.jsxs)(r.jF,{authors:e.authors,committer:e.committer,committerAttribution:e.committerAttribution,onBehalfOf:u?.onBehalfOf,repo:t,includeVerbs:!0,authorSettings:{fontWeight:"normal",fontColor:"fg.muted",avatarSize:16,...a},textVariant:s,children:[!m&&(0,i.jsx)(d.A,{className:"pl-1",datetime:e.committedDate}),m&&(0,i.jsx)(l.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"}),n]})};function m(){return!1}let h=(0,a.kw)()?function(e){let t,n,a,c,u=(0,s.c)(12),{commit:m,repo:h,textVariant:p}=e;u[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],u[0]=t):t=u[0];let[g]=(0,o.I)(f,!0,t);return u[1]!==m.pushedDate||u[2]!==g?(n=!g&&(0,i.jsx)(d.A,{className:"pl-1",datetime:m.pushedDate}),u[1]=m.pushedDate,u[2]=g,u[3]=n):n=u[3],u[4]!==g?(a=g&&(0,i.jsx)(l.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"}),u[4]=g,u[5]=a):a=u[5],u[6]!==m.pusher||u[7]!==h||u[8]!==n||u[9]!==a||u[10]!==p?(c=(0,i.jsxs)(r.Cf,{pusher:m.pusher,repo:h,textVariant:p,children:[n,a]}),u[6]=m.pusher,u[7]=h,u[8]=n,u[9]=a,u[10]=p,u[11]=c):c=u[11],c}:function({commit:e,repo:t,textVariant:n}){let[a]=(0,o.I)(()=>!1,!0,[]);return(0,i.jsxs)(r.Cf,{pusher:e.pusher,repo:t,textVariant:n,children:[!a&&(0,i.jsx)(d.A,{className:"pl-1",datetime:e.pushedDate}),a&&(0,i.jsx)(l.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"})]})};function f(){return!1}try{u.displayName||(u.displayName="CommitAttribution")}catch{}try{h.displayName||(h.displayName="PushAttribution")}catch{}},49912:(e,t,n)=>{n.d(t,{j:()=>s});var i=n(54908),a=n(82590);function s(e){return e.id===a.S$&&"service"in e&&e.service instanceof i.J}},50050:(e,t,n)=>{n.d(t,{Mr:()=>p,NY:()=>y,Ud:()=>g});var i=n(74848),a=n(49835),s=n(96540),r=n(33535),l=n(96868),o=n(16522),d=n(96459),c=n(53380);function u(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};case"SET_VIEW":return{...e,view:t.view};case"SET_SIDE_PANEL_VIEW":return{...e,sidePanelView:t.view};case"SET_VERSION":return{...e,version:t.version};case"SET_STATE":return{...e,...t.state};case"SHOW_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!0};case"HIDE_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!1};case"SHOW_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!0};case"HIDE_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!1};default:return e}}var m=n(53627);let h=(0,s.createContext)(new a.Lj(l.qB)),f=(0,s.createContext)(()=>{});function p({children:e}){let[t,n]=function(){let e,t,n,i,a=(0,o.c)(9),[r]=(0,d.o)();a[0]!==r?(e=(0,c.hW)(r),a[0]=r,a[1]=e):e=a[1];let[l,h]=(0,s.useReducer)(u,e);return a[2]!==l?(t=()=>{let e=(0,c.Ts)(l);(0,m.MM)(e)},a[2]=l,a[3]=t):t=a[3],a[4]!==r||a[5]!==l?(n=[l,r],a[4]=r,a[5]=l,a[6]=n):n=a[6],(0,s.useEffect)(t,n),a[7]!==l?(i=[l,h],a[7]=l,a[8]=i):i=a[8],i}(),a=(0,r.AI)(t);(0,s.useLayoutEffect)(()=>{a.value=t},[t,a]);let l=(0,s.useCallback)(e=>{n(e)},[n]);return(0,i.jsx)(h,{value:a,children:(0,i.jsx)(f,{value:l,children:e})})}function g(e){let t=(0,s.useContext)(h);if(!t)throw Error("useLoopsStateLens can only be used inside a PipesProvider");let n=(0,r.Sk)(t,e);return(0,r.HN)(n)}function y(){return(0,s.useContext)(f)}try{h.displayName||(h.displayName="LoopsStateContext")}catch{}try{f.displayName||(f.displayName="LoopsDispatchContext")}catch{}try{p.displayName||(p.displayName="LoopsStateProvider")}catch{}},50625:(e,t,n)=>{n.d(t,{L:()=>m});var i=n(68273),a=n(16522),s=n(82075),r=n(96540);let{getItem:l,removeItem:o,setItem:d}=(0,s.D)("localStorage"),c=(e,t)=>{let{diffSide:n,filePath:i,line:a,subjectId:s}=e;if(t)return`PullRequest:${s}-File:${i}`;if(void 0!==a&&void 0!==n)return`PullRequest:${s}-File:${i}-Line:${a}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function u(e,t){let n=l(e),i=!!n?.text?.trim();return(0,r.useEffect)(()=>{i&&t?.(n)},[i]),{hasPersistedComment:i,removePersistedCommentFromStorage:()=>{o(e),i=!1,n=null}}}(0,i.GV)();let m=(0,i.GV)()?function(e){let t,n,i,s,r=(0,a.c)(16),{diffSide:l,filePath:o,handlePersistedCommentExists:m,line:h,subjectId:f,threadId:p,fileLevelComment:g}=e;e:{let e;if(p){t=p;break e}r[0]!==l||r[1]!==g||r[2]!==o||r[3]!==h||r[4]!==f||r[5]!==p?(e=p??c({diffSide:l,filePath:o,line:h,subjectId:f},g),r[0]=l,r[1]=g,r[2]=o,r[3]=h,r[4]=f,r[5]=p,r[6]=e):e=r[6],t=e}let y=t,{hasPersistedComment:x,removePersistedCommentFromStorage:v}=u(y,m);r[7]!==y?(n=e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),d(y,t)},r[7]=y,r[8]=n):n=r[8];let b=n;r[9]!==f?(i=e=>{let t={shouldFocus:!0};e.text&&(t={...t,text:e.text}),e.startLine&&(t={...t,startLine:e.startLine,startSide:e.givenLineDiffSide,startLineKey:e.startLineKey,endLineKey:e.endLineKey}),d(c({diffSide:e.givenLineDiffSide,filePath:e.givenFilePath,line:e.givenLine,subjectId:f},e.shouldBeFileLevelComment),t)},r[9]=f,r[10]=i):i=r[10];let j=i;return r[11]!==x||r[12]!==j||r[13]!==b||r[14]!==v?(s={hasPersistedComment:x,persistCommentToStorage:b,persistCommentOnGivenLineToStorage:j,removePersistedCommentFromStorage:v},r[11]=x,r[12]=j,r[13]=b,r[14]=v,r[15]=s):s=r[15],s}:function({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:a,threadId:s,fileLevelComment:l}){let o=(0,r.useMemo)(()=>s||(s??c({diffSide:e,filePath:t,line:i,subjectId:a},l)),[e,t,i,a,s,l]),{hasPersistedComment:m,removePersistedCommentFromStorage:h}=u(o,n);return{hasPersistedComment:m,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),d(o,t)},persistCommentOnGivenLineToStorage:e=>{let t={shouldFocus:!0};e.text&&(t={...t,text:e.text}),e.startLine&&(t={...t,startLine:e.startLine,startSide:e.givenLineDiffSide,startLineKey:e.startLineKey,endLineKey:e.endLineKey}),d(c({diffSide:e.givenLineDiffSide,filePath:e.givenFilePath,line:e.givenLine,subjectId:a},e.shouldBeFileLevelComment),t)},removePersistedCommentFromStorage:h}}},51625:(e,t,n)=>{n.d(t,{_x:()=>a,cP:()=>s,eu:()=>i,pI:()=>r});let i="spark",a="Spark",s="/spark",r="Create web apps with React and TypeScript to prototype ideas, build tools, and more"},53380:(e,t,n)=>{n.d(t,{Ts:()=>s,_A:()=>a,hW:()=>r});var i=n(96868);function a(e){let t={},n=e.get("focusedNode");n&&(t.focusedNodeId=n);let a=e.get("view");a&&Object.values(i.Kh).includes(a)&&(t.view=a);let s=e.get("sidePanel");s&&Object.values(i.Fj).includes(s)&&(t.sidePanelView=s);let r=e.get("version");return r&&(t.version=r),t}function s(e){let t=new URLSearchParams;return e.focusedNodeId&&t.set("focusedNode",e.focusedNodeId),e.view!==i.qB.view&&t.set("view",e.view),e.sidePanelView!==i.qB.sidePanelView&&t.set("sidePanel",e.sidePanelView),e.version!==i.qB.version&&t.set("version",e.version),t}function r(e){return{...i.qB,...a(e)}}},54908:(e,t,n)=>{n.d(t,{J:()=>LoopsService});var i=n(35750),a=n(18150),s=n(85242),r=n(88243),l=n(16213),o=n(91348),d=n(45363),c=n(21046),u=n(90122),m=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap;let NodeRunner=class NodeRunner{async run(e,t,n){let a={graphQLClient:(0,i._)(this,h),chatClient:(0,i._)(this,f),codeExecutor:(0,i._)(this,p),signal:t,onPartialResult:n,execution:e};return d.C.executeNode((0,i._)(this,m),a)}constructor(e,t,n,i){(0,a._)(this,m,{writable:!0,value:void 0}),(0,a._)(this,h,{writable:!0,value:void 0}),(0,a._)(this,f,{writable:!0,value:void 0}),(0,a._)(this,p,{writable:!0,value:void 0}),(0,s._)(this,m,e),(0,s._)(this,h,t),(0,s._)(this,f,n),(0,s._)(this,p,i)}};var g=n(33026),y=new WeakMap,x=new WeakMap,v=new WeakMap,b=new WeakMap,j=new WeakMap,w=new WeakMap,C=new WeakMap,_=new WeakMap,N=new WeakSet,S=new WeakSet,I=new WeakSet;let LoopRunner=class LoopRunner{async run(e,t){let n=(0,o.FT)((0,i._)(this,b));if(0===n.length)throw Error("No output node");await Promise.all(n.map(n=>(0,r._)(this,S,L).call(this,n,e,t)))}stop(e){(0,i._)(this,_).abort(),e((0,i._)(this,j))}constructor(e,t,n,i,r){(0,l._)(this,N),(0,l._)(this,S),(0,l._)(this,I),(0,a._)(this,y,{writable:!0,value:void 0}),(0,a._)(this,x,{writable:!0,value:void 0}),(0,a._)(this,v,{writable:!0,value:void 0}),(0,a._)(this,b,{writable:!0,value:void 0}),(0,a._)(this,j,{writable:!0,value:void 0}),(0,a._)(this,w,{writable:!0,value:void 0}),(0,a._)(this,C,{writable:!0,value:void 0}),(0,a._)(this,_,{writable:!0,value:void 0}),(0,s._)(this,y,n),(0,s._)(this,x,i),(0,s._)(this,v,r),(0,s._)(this,b,e),(0,s._)(this,j,t),(0,s._)(this,w,(0,o.f0)(e.nodes)),(0,s._)(this,C,new Map),(0,s._)(this,_,new AbortController)}};function k(){return(0,i._)(this,_).signal.aborted}async function L(e,t,n){let a=(0,i._)(this,C).get(e.id);if(a)return a;let s=(0,r._)(this,I,D).call(this,e,t,n);return(0,i._)(this,C).set(e.id,s),s}async function D(e,t,n){if((0,r._)(this,N,k).call(this))return null;let a=await n((0,i._)(this,b).id,(0,i._)(this,b).version||g.kj,(0,i._)(this,j));if(!a.success)throw Error("Unable to load execution");let s=a.data,l=s.nodes[e.id]?.value;if(l)return l;let o=[...new Set((0,i._)(this,w).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>(0,i._)(this,b).nodes.find(t=>t.id===e)).filter(e=>!!e),m=await Promise.all(o.map(async e=>[e.id,await (0,r._)(this,S,L).call(this,e,t,n)]));if(m.some(([e,t])=>null===t)||(0,r._)(this,N,k).call(this))return null;let h=Object.fromEntries(m);try{let n,a,l=(a=(n={...e}).content,"string"==typeof a&&(n.content=function(e,t,n=!1){let i=(0,u.ZP)();return e.replace(i,(e,i,a,s)=>{let r=t[i];if(void 0===r)return(0,c.vV)(`Node with ID "${i}" not found in node map`),e;let l=r;if(a){let e=function e(t){if(!t)return null;if("object"==typeof t)return t;if("string"==typeof t)try{return e(JSON.parse(t))}catch{}return null}(r);if(e){let t=function(e,t){if(!t||!e)return null;let n=t.split("."),i=e;for(let e of n){if(null==i||"object"!=typeof i||null===i)return null;i=i[e]}return i}(e,a);if(null!==t)l=t;else throw Error(`Path "${a}" on node with ID "${i}" does not have a value`)}else throw Error(`Cannot access path "${a}" on non-object node with ID "${i}"`)}return String(("string"!=typeof l||n?JSON.stringify(l):l)??e)})}(a,h,d.C.requiresCodeEvaluation(e.type))),n),o=new NodeRunner(l,(0,i._)(this,y),(0,i._)(this,x),(0,i._)(this,v));await t({type:"SET_RUNNING",nodeID:e.id});let m=async n=>{(0,r._)(this,N,k).call(this)||await t({type:"UPDATE_NODE_VALUE_PARTIAL",nodeID:e.id,value:n})},{value:f}=await o.run(s,(0,i._)(this,_).signal,m);return(0,r._)(this,N,k).call(this)||await t({type:"UPDATE_NODE_VALUE",nodeID:e.id,value:f}),f}catch(n){var f;return(0,r._)(this,N,k).call(this)||await t({type:"UPDATE_NODE_ERROR",nodeID:e.id,error:(f=n)instanceof Error?f.message:"string"==typeof f?f:"object"==typeof f?JSON.stringify(f):""}),null}}var T=n(43134),E=n(76746),A=n(53419),R=n(49835),O=new WeakMap,P=new WeakMap,F=new WeakMap,M=new WeakMap,$=new WeakMap,B=new WeakMap,V=new WeakSet;let LoopsService=class LoopsService{getLoop(e,t=g.kj){return(0,i._)(this,O).getLoop(e,t)}getAllLoops(){return(0,i._)(this,O).listLoops()}getLoopVersions(e){return(0,i._)(this,O).listLoopVersions(e)}createLoop(e){return(0,i._)(this,O).createLoop("string"==typeof e?{id:e}:e)}async updateLoop(e,t){let n=await (0,i._)(this,O).getLoop(e,g.kj);if(!n.success)return n;let a=t(n.data);return await (0,i._)(this,O).updateLoop(e,g.kj,a)}async deleteLoop(e){return(0,T._T)(e),(0,i._)(this,O).deleteLoop(e)}async saveLoop(e){let t="string"==typeof e?{id:e}:e;return await (0,i._)(this,O).updateLoop(t.id,g.qD,t)}async restoreLoopVersion(e){return await (0,i._)(this,O).updateLoop(e.id,g.qD,e)}async revertLoop(e){let t=await (0,i._)(this,O).getLoop(e,g.qD);return t.success?(0,i._)(this,O).updateLoop(e,"draft",t.data):t}getExecution(e,t,n){return(0,i._)(this,O).getExecution(e,t,n)}async createExecution(e,t,n){return(0,i._)(this,O).createExecution(e,t,n?.nodes,n?.inputValues)}updateNodeExecution(e,t,n,a,s){return(0,i._)(this,O).updateNodeExecution(e,t,n,a,s)}async updateExecution(e,t,n,a){let s=await (0,i._)(this,O).getExecution(e,t,n);if(!s.success)return s;let r=s.data;for(let[s,l]of Object.entries(a.nodes))r.nodes[s]&&r.nodes[s].value===l.value&&r.nodes[s].error===l.error||await (0,i._)(this,O).updateNodeExecution(e,t,n,s,l);return await (0,i._)(this,O).getExecution(e,t,n)}isExecutionRunning(e){return!!(0,i._)(this,$).get(e)}getRunningExecutions(){return(0,i._)(this,B)}async runPipeline(e,t,n,a){if((0,E.v)(e).length>0)return;let s=new LoopRunner(e,t,(0,i._)(this,P),(0,i._)(this,F),(0,i._)(this,M));(0,i._)(this,$).set(t,s),(0,i._)(this,B).add(t);try{await s.run(n,a),(0,A.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"success"})}catch(n){throw(0,A.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"error"}),n}finally{(0,i._)(this,$).delete(t),(0,i._)(this,B).delete(t)}}stopPipeline(e,t){let n=(0,i._)(this,$).get(e);n&&(n.stop(t),(0,i._)(this,$).delete(e),(0,i._)(this,B).delete(e),(0,A.BI)("dotcom_chat.loops_execution",{execution_id:e,status:"canceled"}))}async shareLoop(e){return await (0,i._)(this,O).shareLoop(e)}async unshareLoop(e){return await (0,i._)(this,O).unshareLoop(e)}constructor(e,t,n,i){(0,l._)(this,V),(0,a._)(this,O,{writable:!0,value:void 0}),(0,a._)(this,P,{writable:!0,value:void 0}),(0,a._)(this,F,{writable:!0,value:void 0}),(0,a._)(this,M,{writable:!0,value:void 0}),(0,a._)(this,$,{writable:!0,value:new Map}),(0,a._)(this,B,{writable:!0,value:new R.yy}),(0,r._)(this,V,U).call(this),(0,s._)(this,O,e),(0,s._)(this,P,t),(0,s._)(this,F,n),(0,s._)(this,M,i)}};function U(){indexedDB.deleteDatabase("copilot-pipes")}},56092:(e,t,n)=>{n.d(t,{H:()=>l});var i=n(96540);let a="undefined"!=typeof globalThis&&void 0!==globalThis.window,s="undefined"!=typeof process&&!1,r={timeout:150,useIdleCallback:!0};function l(e,t={}){let{timeout:n,useIdleCallback:o}={...r,...t};if(!a||s)return void e();let d=()=>{"function"==typeof i.startTransition?(0,i.startTransition)(e):e()},c=globalThis;o&&"function"==typeof c.requestIdleCallback?c.requestIdleCallback(d,{timeout:n}):setTimeout(d,0)}},57944:(e,t,n)=>{n.d(t,{c:()=>AgentsPlugin,q:()=>eL});var i,a=n(50467),s=n(74848),r=n(16522),l=n(81453),o=n(33592),d=n(35247),c=n(82460),u=n(76143),m=n(69599),h=n(53419),f=n(26956),p=n(27912),g=n(79634),y=n(91747),x=n(46251),v=n(96540),b=n(97189),j=n(76977),w=n(47865),C=n(79064),_=n(47723);function N(e,t){try{let n=JSON.parse(e);if(void 0!==n.text){let e=n.selectedRepo?{...n.selectedRepo,private:"private"===n.selectedRepo.visibility}:null,i=n.selectedBranch||"",a=n.selectedAgent,s=n.model?.id;if(!s)try{s=localStorage.getItem(_.Pm)??void 0}catch{}t.current(n.text,e,i,a||"",void 0,s)}else t.current(e,null,"",{})}catch{t.current(e,null,"",{})}}var S=n(93654),I=n(60284),k=n(64894),L=n(67925),D=n(409),T=n(76720),E=n(38621),A=n(94011),R=n(77430),O=n(30459),P=n(11680),F=n(56149),M=n(94236),$=n(5524);let B="AgentsBlankslateBanner-module__banner--DpsVX";var V=n(25641);function U({enterprise:e,requestableOrgs:t,adminableOrgs:n}){let i=!!e?.isAdmin,a=!!e?.policyDisabled,r=t.length+n.length,l=t.find(e=>e.requestedAccess),o=n.length>0?n[0]:t[0],[d,c]=(0,v.useState)(void 0!==l?l:o),[u,m]=(0,v.useState)(d?.isAdmin||!1),[h,f]=(0,v.useState)(d?.requestedAccess||!1),[p,g]=(0,v.useState)(!1),[y,x]=(0,v.useState)(!1),[b,j]=(0,v.useState)(!1),[w,C]=(0,v.useState)(null),N=u&&!a||i,S=r>1&&!i&&!h,{sendClickAnalyticsEvent:I}=(0,O.S)(),k=(0,v.useCallback)(e=>{I({category:"member_feature_request",action:`action.copilot_coding_agent.${e}`,label:`ref_cta:${e};ref_loc:agents_blankslate;`})},[I]),L=(0,v.useCallback)(async()=>{if(d){j(!1),C(null);try{h?(await (0,A.Hy)(d.name),k("request_removed")):(await (0,A.Rp)(d.name),C(`Request sent to ${d.name}.`),k("request")),f(!h)}catch{j(!0),C(`An error occurred while ${h?"removing":"sending"} your feature request. Please try again later.`)}finally{g(!1)}}},[h,d,k]);(0,v.useEffect)(()=>{p&&L()},[L,p]),(0,v.useEffect)(()=>{y&&(async()=>{try{e&&i?(k("enterprise_enable"),window.location.href=(0,_.Wt)(e.name)):d&&(await (0,A.pf)(d.name),C(`Feature enabled for ${d.name}. It may take a few minutes for changes to take effect.`),k("org_enable"))}catch{j(!0),C("An error occurred while enabling the feature. Please try again later.")}})()},[y,i,k]);let D=1===r&&d&&!a?(0,s.jsxs)(s.Fragment,{children:["Access to Copilot coding agent has been disabled by ",(0,s.jsx)("span",{className:"text-bold",children:d.name}),"."]}):`Access to Copilot coding agent has been disabled by your ${a?"enterprise":"organizations"}.`;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.l,{variant:"warning",title:"Copilot coding agent access request",hideTitle:!0,className:B,"data-testid":"agents-access-request-banner",primaryAction:(0,s.jsx)(q,{canOpenMenu:S,canEnableFeature:N,accessRequested:h,isEnabling:y,isRequesting:p,setIsEnabling:x,setIsRequesting:g,setIsOrgAdmin:m,setCurrentOrg:c,adminableOrgs:n,requestableOrgs:t,setNotice:C}),children:(0,s.jsx)(P.l.Description,{children:D})}),w&&(0,s.jsx)("span",{className:`AgentsBlankslateBanner-module__notice--wwdWQ ${b?"AgentsBlankslateBanner-module__error--j2QU3":""}`,"data-testid":"access-request-notice",children:w})]})}function q({adminableOrgs:e,requestableOrgs:t,canOpenMenu:n,canEnableFeature:i,accessRequested:a,isEnabling:r,isRequesting:l,setCurrentOrg:o,setIsOrgAdmin:d,setIsEnabling:c,setIsRequesting:u,setNotice:m}){let[h,f]=(0,v.useState)(!1),p=(0,v.useRef)(null),g=(0,v.useRef)(null),y=(0,v.useId)(),x=`agents-access-banner-action-portal-${y}`;return(0,v.useEffect)(()=>{g.current&&(0,F.cw)(g.current,x)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.l.PrimaryAction,{onClick:n?()=>{m(null),f(!h)}:()=>{i?c(!0):u(!0)},className:!i&&a?"AgentsBlankslateBanner-module__removeAccessButton--eEjZy":"",trailingAction:n?E.TriangleDownIcon:void 0,inactive:r,loading:l,ref:p,children:i?"Enable feature":a?"Remove request":"Request access"}),(0,s.jsx)("div",{ref:g,children:(0,s.jsx)(M.W,{open:h,onOpenChange:f,anchorRef:p,children:(0,s.jsx)(M.W.Overlay,{align:"end",portalContainerName:x,width:"small",children:(0,s.jsxs)($.l,{children:[e.length>0&&(0,s.jsxs)($.l.Group,{children:[(0,s.jsx)($.l.GroupHeading,{children:"Select organization to enable access"}),(0,s.jsx)(H,{orgs:e,setCurrentOrg:o,setIsOrgAdmin:d,setStatus:c})]}),t.length>0&&e.length>0&&(0,s.jsx)($.l.Divider,{}),t.length>0&&(0,s.jsxs)($.l.Group,{children:[(0,s.jsx)($.l.GroupHeading,{children:"Select organization to request access"}),(0,s.jsx)(H,{orgs:t,setCurrentOrg:o,setIsOrgAdmin:d,setStatus:u})]})]})})})})]})}function H({orgs:e,setCurrentOrg:t,setIsOrgAdmin:n,setStatus:i}){return e.map(e=>(0,s.jsxs)($.l.Item,{onSelect:()=>{t(e),n(e.isAdmin),i(!0)},children:[(0,s.jsx)($.l.LeadingVisual,{children:(0,s.jsx)(R.r,{src:e.avatarUrl,square:!0})}),e.name]},e.name))}function G(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(P.l,{variant:"warning",title:"Copilot coding agent access disabled",className:`${B} AgentsBlankslateBanner-module__basic--nJzrr`,hideTitle:!0,"data-testid":"agents-access-disabled-banner",children:(0,s.jsx)(P.l.Description,{children:"Access to Copilot coding agent has been disabled by your administrator."})}),t[0]=e):e=t[0],e}function K(){let e,t,n=(0,r.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(P.l.PrimaryAction,{as:"a",href:V.Zs,children:"Upgrade"}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(P.l,{variant:"upsell",title:"Copilot coding agent access unavailable for plan",className:`${B} AgentsBlankslateBanner-module__upsell--XAdj_`,hideTitle:!0,primaryAction:e,"data-testid":"agents-upgrade-banner",children:(0,s.jsx)(P.l.Description,{children:"This feature is not available on your current plan."})}),n[1]=t):t=n[1],t}try{U.displayName||(U.displayName="AccessRequestBanner")}catch{}try{q.displayName||(q.displayName="RequestAccessAction")}catch{}try{H.displayName||(H.displayName="OrgActionList")}catch{}try{G.displayName||(G.displayName="AccessDisabledBanner")}catch{}try{K.displayName||(K.displayName="UpgradeBanner")}catch{}function W(e){let t,n,i,a,l,o,d,c,u,h,p=(0,r.c)(20),{hasCEorCBAccess:g,memberRequestEntities:y}=e;p[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.G7)("copilot_agents_blankslate_mem_requests"),p[0]=t):t=p[0];let x=t;p[1]!==y?.orgs?.requestable?(n=y?.orgs?.requestable||[],p[1]=y?.orgs?.requestable,p[2]=n):n=p[2];let v=n;p[3]!==y?.orgs?.adminable?(i=y?.orgs?.adminable||[],p[3]=y?.orgs?.adminable,p[4]=i):i=p[4];let b=i,j=v.length+b.length>0,w=x&&y&&(j||y.enterprise);return p[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(T.E.Visual,{children:(0,s.jsx)(E.AgentIcon,{size:24})}),l=(0,s.jsx)(T.E.Heading,{children:"Delegate tasks to GitHub Copilot coding agent"}),o=(0,s.jsx)(T.E.Description,{children:"Let Copilot work independently in the background to complete tasks, and then monitor Copilot's progress."}),d=(0,s.jsx)(T.E.SecondaryAction,{href:"https://docs.github.com/en/copilot/how-tos/agents/copilot-coding-agent/enabling-copilot-coding-agent",children:"Learn more about Copilot coding agent"}),p[5]=a,p[6]=l,p[7]=o,p[8]=d):(a=p[5],l=p[6],o=p[7],d=p[8]),p[9]!==b||p[10]!==g||p[11]!==y||p[12]!==v||p[13]!==w?(c=!0===g&&(w?(0,s.jsx)(U,{enterprise:y.enterprise,requestableOrgs:v,adminableOrgs:b}):(0,s.jsx)(G,{})),p[9]=b,p[10]=g,p[11]=y,p[12]=v,p[13]=w,p[14]=c):c=p[14],p[15]!==g?(u=!1===g&&(0,s.jsx)(K,{}),p[15]=g,p[16]=u):u=p[16],p[17]!==c||p[18]!==u?(h=(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(f.Zf.Container,{width:"large",children:(0,s.jsxs)(T.E,{size:"medium",className:"AgentsBlankslate-module__blankslate--h3RJ8",children:[a,l,o,d,c,u]})})}),p[17]=c,p[18]=u,p[19]=h):h=p[19],h}try{W.displayName||(W.displayName="AgentsBlankslate")}catch{}var z=n(30388);let Q="TaskList-module__button--FzNZb",Z="TaskList-module__counter--suSM7";var J=n(62935);let Y="TaskListItem-module__description--GUKJ9";var X=n(67154),ee=n(82595);let et="PullRequestDiffSummaryText-module__prDiffSummary--EzG14";function en(e){let t,n,i,a,l,o,d,c=(0,r.c)(17),{prDiffSummary:u}=e;return u&&(0!==u.lines_added||0!==u.lines_deleted)?(c[0]!==u.lines_added?(t=u.lines_added.toLocaleString(),c[0]=u.lines_added,c[1]=t):t=c[1],c[2]!==t?(n=(0,s.jsxs)("span",{"aria-hidden":"true",className:`${et} PullRequestDiffSummaryText-module__added--I0cdZ`,children:["+",t]}),c[2]=t,c[3]=n):n=c[3],c[4]!==u.lines_deleted?(i=u.lines_deleted.toLocaleString(),c[4]=u.lines_deleted,c[5]=i):i=c[5],c[6]!==i?(a=(0,s.jsxs)("span",{"aria-hidden":"true",className:`${et} PullRequestDiffSummaryText-module__deleted--M94wu`,children:["-",i]}),c[6]=i,c[7]=a):a=c[7],c[8]!==u.lines_added||c[9]!==u.lines_deleted?(l=function({linesAdded:e,linesDeleted:t}){let n="Lines changed: ";return n+`${e} ${1===e?"addition":"additions"} & ${t} ${1===t?"deletion":"deletions"}`}({linesAdded:u.lines_added,linesDeleted:u.lines_deleted}),c[8]=u.lines_added,c[9]=u.lines_deleted,c[10]=l):l=c[10],c[11]!==l?(o=(0,s.jsx)("span",{className:"sr-only",children:l}),c[11]=l,c[12]=o):o=c[12],c[13]!==n||c[14]!==a||c[15]!==o?(d=(0,s.jsxs)(x.B,{direction:"horizontal",gap:"condensed",children:[n,a,o]}),c[13]=n,c[14]=a,c[15]=o,c[16]=d):d=c[16],d):null}try{en.displayName||(en.displayName="PullRequestDiffSummaryText")}catch{}var ei=n(44334),ea=n(62189),es=n(45244);let er=e=>{let t,n,i,a=(0,r.c)(7),{text:l}=e,[o,d]=(0,v.useState)(null),[c,u]=(0,v.useState)("none");a[0]!==o||a[1]!==l?(t=()=>{if(null===o)return void d(l);if(l!==o){u("exiting");let e=setTimeout(()=>{d(l),u("entering")},400);return()=>clearTimeout(e)}},n=[l,o],a[0]=o,a[1]=l,a[2]=t,a[3]=n):(t=a[2],n=a[3]),(0,v.useEffect)(t,n);let m=`TaskListItem-module__fadeText--giNoG ${"entering"===c?"TaskListItem-module__entering--aB9fl":"exiting"===c?"TaskListItem-module__exiting--m4Koz":null}`;return a[4]!==o||a[5]!==m?(i=(0,s.jsx)("span",{className:m,children:o}),a[4]=o,a[5]=m,a[6]=i):i=a[6],i};function el(e){let t,n,i,a,l,o,d,c,u,m,h,f,p,g=(0,r.c)(41),{state:y,revisionCount:x,startedAt:b,prState:j,prTitle:w,prNwo:C,prNumber:_,prGlobalId:N,prInMergeQueue:S,prDiffSummary:I}=e,[k,L]=(0,v.useState)(null),[D,T]=(0,v.useState)(!1);g[0]!==S||g[1]!==j||g[2]!==y?(t="merged"===j?"Merged":"closed"===j?"Closed":S?"Queued to merge":y&&(0,X.wG)(y)||"",g[0]=S,g[1]=j,g[2]=y,g[3]=t):t=g[3];let E=t;g[4]!==S||g[5]!==j||g[6]!==y?(n=(0,ei.T)(j,S,y),g[4]=S,g[5]=j,g[6]=y,g[7]=n):n=g[7];let A=n;g[8]!==k||g[9]!==A?(i=()=>{if(!k)return void L(A);if(k.icon!==A.icon){T(!0);let e=setTimeout(()=>{L(A),T(!1)},300);return()=>clearTimeout(e)}},a=[A,k],g[8]=k,g[9]=A,g[10]=i,g[11]=a):(i=g[10],a=g[11]),(0,v.useEffect)(i,a);let R=x>0?`${x} revision${x>1?"s":""} \xb7 `:null;g[12]!==N||g[13]!==_||g[14]!==C?(l=(0,ea.t$)(N,C,_),g[12]=N,g[13]=_,g[14]=C,g[15]=l):l=g[15];let O=l;g[16]===Symbol.for("react.memo_cache_sentinel")?(o=(0,ea.zI)(),g[16]=o):o=g[16];let P=o,F=`TaskListItem-module__iconTransition--h8TDX ${D?"TaskListItem-module__fadeOut--TTRa9":""}`;return g[17]!==A||g[18]!==F?(d=(0,s.jsx)(z.qJ.Item.LeadingVisual,{children:(0,s.jsx)(ee.I,{...A,className:F})}),g[17]=A,g[18]=F,g[19]=d):d=g[19],g[20]!==w?(c=(0,s.jsx)(z.qJ.Item.Title,{children:w}),g[20]=w,g[21]=c):c=g[21],g[22]!==I||g[23]!==y?(u=y&&"in_progress"!==y&&I&&(0,s.jsx)(z.qJ.Item.Actions,{children:(0,s.jsx)(en,{prDiffSummary:I})}),g[22]=I,g[23]=y,g[24]=u):u=g[24],g[25]!==b?(m=(0,s.jsx)(J.A,{format:"micro",datetime:b}),g[25]=b,g[26]=m):m=g[26],g[27]!==E?(h=(0,s.jsx)(er,{text:E}),g[27]=E,g[28]=h):h=g[28],g[29]!==_||g[30]!==C||g[31]!==R||g[32]!==m||g[33]!==h?(f=(0,s.jsx)(z.qJ.Item.Description,{children:(0,s.jsxs)("span",{className:Y,children:[C,"#",_," \xb7 started ",m," ago \xb7"," ",R,h]})}),g[29]=_,g[30]=C,g[31]=R,g[32]=m,g[33]=h,g[34]=f):f=g[34],g[35]!==u||g[36]!==f||g[37]!==d||g[38]!==c||g[39]!==O?(p=(0,s.jsxs)(z.qJ.Item,{href:O,isExternalLink:P,children:[d,c,u,f]}),g[35]=u,g[36]=f,g[37]=d,g[38]=c,g[39]=O,g[40]=p):p=g[40],p}function eo(e){let t,n,i,a,l=(0,r.c)(7),{repositoryNwo:o}=e,d=`Creating task in ${o}`;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(z.qJ.Item.LeadingVisual,{children:(0,s.jsx)(ee.I,{icon:E.DotFillIcon,color:"var(--fgColor-attention)"})}),l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(z.qJ.Item.Title,{children:(0,s.jsx)(es.b,{className:"fgColor-muted",children:"Creating task"})}),l[1]=n):n=l[1],l[2]!==o?(i=(0,s.jsxs)(z.qJ.Item.Description,{children:[(0,s.jsx)("span",{className:Y,children:o})," \xb7 Initializing pull request\u2026"]}),l[2]=o,l[3]=i):i=l[3],l[4]!==d||l[5]!==i?(a=(0,s.jsxs)(z.qJ.Item,{"aria-label":d,children:[t,n,i]}),l[4]=d,l[5]=i,l[6]=a):a=l[6],a}try{er.displayName||(er.displayName="FadeText")}catch{}try{el.displayName||(el.displayName="TaskListItem")}catch{}try{(i=function(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(z.qJ.Item.Skeleton,{}),t[0]=e):e=t[0],e}).displayName||(i.displayName="LoadingTaskListItem")}catch{}try{eo.displayName||(eo.displayName="OptimisticTaskListItem")}catch{}function ed(e){let t,n=(0,r.c)(3),{tasks:i,isError:a}=e;return n[0]!==a||n[1]!==i?(t=(0,s.jsx)(z.qJ.List,{id:"tasks-list","aria-labelledby":"open-tab",children:a?(0,s.jsxs)(z.qJ.EmptyState,{children:[(0,s.jsx)(E.AlertIcon,{size:24}),(0,s.jsx)("p",{children:"Sorry, something went wrong"})]}):0===i.length?(0,s.jsx)(z.qJ.EmptyState,{children:(0,s.jsx)("p",{children:"No open tasks yet. Start a new task to see it here."})}):(0,s.jsx)(s.Fragment,{children:i.map(ec)})}),n[0]=a,n[1]=i,n[2]=t):t=n[2],t}function ec(e){return e.isOptimistic?(0,s.jsx)(eo,{title:`Creating: ${e.problemStatement??""}`,repositoryNwo:e.nwo??""},e.clientGeneratedId):e.pull&&(0,s.jsx)(el,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffSummary:e.pull.pr_diff_summary},e.pull.id)}try{ed.displayName||(ed.displayName="OpenTaskList")}catch{}function eu(e){let t,n,i=(0,r.c)(5),{tasks:a,isError:l}=e;return i[0]!==l||i[1]!==a?(t=l?(0,s.jsxs)(z.qJ.EmptyState,{children:[(0,s.jsx)(E.AlertIcon,{size:24}),(0,s.jsx)("p",{children:"Sorry, something went wrong"})]}):0===a.length?(0,s.jsx)(z.qJ.EmptyState,{children:(0,s.jsx)("p",{children:"No closed tasks yet."})}):a.map(em),i[0]=l,i[1]=a,i[2]=t):t=i[2],i[3]!==t?(n=(0,s.jsx)(z.qJ.List,{id:"tasks-list","aria-labelledby":"closed-tab",children:t}),i[3]=t,i[4]=n):n=i[4],n}function em(e){return e.pull?(0,s.jsx)(el,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffSummary:e.pull.pr_diff_summary},e.pull.id):null}try{eu.displayName||(eu.displayName="ClosedTaskList")}catch{}function eh(e){let t,n,i,a,l,o,d,c,u,m,h,f=(0,r.c)(31),{tasks:p,isError:g,activeTab:y,setActiveTab:x}=e;f[0]!==p?(t=p.filter(ep),f[0]=p,f[1]=t):t=f[1];let v=t;f[2]!==p?(n=p.filter(ef),f[2]=p,f[3]=n):n=f[3];let b=n;f[4]!==x?(i=()=>x("open"),f[4]=x,f[5]=i):i=f[5];let j="open"===y;f[6]!==v.length?(a=(0,s.jsx)("span",{className:Z,children:v.length}),f[6]=v.length,f[7]=a):a=f[7],f[8]!==i||f[9]!==j||f[10]!==a?(l=(0,s.jsxs)("button",{onClick:i,role:"tab","aria-selected":j,"aria-controls":"tasks-list",id:"open-tab",className:Q,children:["Open ",a]}),f[8]=i,f[9]=j,f[10]=a,f[11]=l):l=f[11],f[12]!==x?(o=()=>x("closed"),f[12]=x,f[13]=o):o=f[13];let w="closed"===y;return f[14]!==b.length?(d=(0,s.jsx)("span",{className:Z,children:b.length}),f[14]=b.length,f[15]=d):d=f[15],f[16]!==o||f[17]!==w||f[18]!==d?(c=(0,s.jsxs)("button",{onClick:o,role:"tab","aria-selected":w,"aria-controls":"tasks-list",id:"closed-tab",className:Q,children:["Closed ",d]}),f[16]=o,f[17]=w,f[18]=d,f[19]=c):c=f[19],f[20]!==c||f[21]!==l?(u=(0,s.jsx)(z.qJ.Header,{children:(0,s.jsxs)("div",{role:"tablist","aria-label":"Filter pull requests",className:"TaskList-module__filterButtons--DNyGe",children:[l,c]})}),f[20]=c,f[21]=l,f[22]=u):u=f[22],f[23]!==y||f[24]!==b||f[25]!==g||f[26]!==v?(m="open"===y?(0,s.jsx)(ed,{tasks:v,isError:g}):(0,s.jsx)(eu,{tasks:b,isError:g}),f[23]=y,f[24]=b,f[25]=g,f[26]=v,f[27]=m):m=f[27],f[28]!==u||f[29]!==m?(h=(0,s.jsxs)(z.qJ,{children:[u,m]}),f[28]=u,f[29]=m,f[30]=h):h=f[30],h}function ef(e){return!!(e.pull&&("merged"===e.pull.state||"closed"===e.pull.state))}function ep(e){return!e.pull||"merged"!==e.pull.state&&"closed"!==e.pull.state}try{eh.displayName||(eh.displayName="TaskList")}catch{}function eg(){let e,t,n,i=(0,r.c)(7),{agentsEnabled:a,hasCEorCBAccess:o,memberRequestEntities:d}=(0,g.X)();i[0]!==a?(e=(0,m.G7)("copilot_chat_agents_empty_state")&&!a,i[0]=a,i[1]=e):e=i[1];let c=e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(p.P.Sidebar,{children:(0,s.jsx)(l.U,{})}),i[2]=t):t=i[2],i[3]!==o||i[4]!==d||i[5]!==c?(n=(0,s.jsx)(b.Fn,{children:(0,s.jsxs)(p.P,{"data-testid":"agents-layout",children:[t,(0,s.jsx)(p.P.ColumnLeft,{children:c?(0,s.jsx)(W,{hasCEorCBAccess:o,memberRequestEntities:d}):(0,s.jsx)(ey,{})})]})}),i[3]=o,i[4]=d,i[5]=c,i[6]=n):n=i[6],n}function ey(){let e,t,n,i,a,l,m,p,b,_,T,E,A,R,O,P,F,M,$,B,V,U,q,H=(0,r.c)(39),[G,K]=(0,v.useState)("open"),{sessionsPollingInterval:W,showCopilotCodingAgentPremiumRequestsBanner:z,tasks:Q,pullRequestsMap:Z}=(0,g.X)(),J=(0,y.u)("copilot_agent_task_list_v2"),Y=(0,v.useRef)(!1);H[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],H[0]=e):e=H[0];let[X,ee]=(0,v.useState)(e);(0,j._)(),H[1]!==Z||H[2]!==Q||H[3]!==W?(t={sessionsPollingInterval:W,initialTasks:Q,initialPullRequestsMap:Z},H[1]=Z,H[2]=Q,H[3]=W,H[4]=t):t=H[4];let{tasks:et,isError:en}=(0,S.si)(t);H[5]===Symbol.for("react.memo_cache_sentinel")?(n={onError:(e,t)=>{ee(n=>[...n,{...t,error:e,baseRef:t.baseRef,timestamp:new Date().toISOString()}])}},H[5]=n):n=H[5];let{createTask:ei}=(0,w.Z)(n),ea=(0,o.b)();H[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>((0,u.D)("Agents \xb7 GitHub Copilot"),(0,h.BI)("agent_sessions.task_view",{target:"AGENTS_VIEW_LOADED",defaultToTask:d.W.defaultToTaskInput,defaultToTaskControl:d.W.defaultToTaskControl,askModeDropdown:d.W.askModeDropdown}),()=>{Y.current||(0,h.BI)("dotcom_chat.activate",{target:"AGENTS_BOUNCE_TO_CHAT",mode:"immersive",bounceToUrl:document.location.href,defaultToTask:d.W.defaultToTaskInput,defaultToTaskControl:d.W.defaultToTaskControl})}),a=[],H[6]=i,H[7]=a):(i=H[6],a=H[7]),(0,v.useEffect)(i,a),H[8]!==ea?(l=()=>{ea.selectThread(null,{includeThreads:!1,clearTopic:!0})},m=[ea],H[8]=ea,H[9]=l,H[10]=m):(l=H[9],m=H[10]),(0,v.useEffect)(l,m),H[11]!==ei||H[12]!==ea?(p=async(e,t,n,i,a,s,r)=>{Y.current=!0;let l=e.trim();""!==l&&n&&""!==n.trim()&&(t?(K("open"),ei({nwo:t.nameWithOwner,problemStatement:l,baseRef:n,eventType:"agents_page",eventContent:l,selectedAgent:i,modelId:s,createPullRequest:r})):ea.sendChatMessage({content:l,thread:null,references:[]}))},H[11]=ei,H[12]=ea,H[13]=p):p=H[13];let es=p;U=(0,r.c)(5),q=(0,v.useRef)(es),U[0]!==es?(M=()=>{q.current=es},$=[es],U[0]=es,U[1]=M,U[2]=$):(M=U[1],$=U[2]),(0,v.useEffect)(M,$),U[3]===Symbol.for("react.memo_cache_sentinel")?(B=()=>{let e=C.Jt.getTaskEntrypointMessage();e&&(C.Jt.setTaskEntrypointMessage(null),N(e.message,q))},V=[],U[3]=B,U[4]=V):(B=U[3],V=U[4]),(0,v.useEffect)(B,V),H[14]!==ei||H[15]!==X?(b=e=>{let t=X[e];t&&(ee(t=>t.filter((t,n)=>n!==e)),ei({nwo:t.nwo,problemStatement:t.problemStatement,baseRef:t.baseRef,eventType:"agents_page"}))},H[14]=ei,H[15]=X,H[16]=b):b=H[16];let er=b,[el,eo]=(0,v.useState)(!1);return H[17]!==el||H[18]!==z?(_=z&&!el&&(0,s.jsx)(f.Zf.Banner,{children:(0,s.jsx)(k.C,{onBannerDismiss:()=>eo(!0)})}),H[17]=el,H[18]=z,H[19]=_):_=H[19],H[20]===Symbol.for("react.memo_cache_sentinel")?(T=(0,s.jsxs)(f.Zf.Header,{children:[(0,s.jsx)(f.Zf.Title,{children:"Agents"}),(0,s.jsx)(f.Zf.Description,{children:"Delegate tasks to GitHub Copilot coding agent to work on in the background, and then monitor Copilot's progress."})]}),H[20]=T):T=H[20],H[21]!==es?(E=(0,s.jsx)(I.Q,{handleUserSubmit:es,eventType:"agents_page"}),H[21]=es,H[22]=E):E=H[22],H[23]!==X||H[24]!==er?(A=X.length>0&&(0,s.jsx)(x.B,{direction:"vertical",className:"AgentsView-module__failedTaskCreationBanners--bUn1A",children:X.map((e,t)=>(0,s.jsx)(L.Q,{problemStatement:e?.problemStatement,handleRetry:()=>er(t),handleDismiss:()=>{ee(e=>e.filter((e,n)=>n!==t))}},`${e?.nwo}-${e?.problemStatement}-${e?.timestamp}`))}),H[23]=X,H[24]=er,H[25]=A):A=H[25],H[26]!==E||H[27]!==A?(R=(0,s.jsxs)(f.Zf.Section,{children:[E,A]}),H[26]=E,H[27]=A,H[28]=R):R=H[28],H[29]!==G||H[30]!==en||H[31]!==J||H[32]!==et?(O=(0,s.jsx)(f.Zf.Section,{children:J?(0,s.jsx)(c.f,{title:"Recent sessions",initialResultCount:25,showPillMenu:!0}):(0,s.jsx)(eh,{tasks:et,isError:en,activeTab:G,setActiveTab:K})}),H[29]=G,H[30]=en,H[31]=J,H[32]=et,H[33]=O):O=H[33],H[34]===Symbol.for("react.memo_cache_sentinel")?(P=(0,s.jsx)(D.C,{}),H[34]=P):P=H[34],H[35]!==R||H[36]!==O||H[37]!==_?(F=(0,s.jsxs)(f.Zf.Container,{noHeader:!0,width:"small",children:[_,T,R,O,P]}),H[35]=R,H[36]=O,H[37]=_,H[38]=F):F=H[38],F}try{eg.displayName||(eg.displayName="AgentsViewWrapper")}catch{}try{ey.displayName||(ey.displayName="AgentsView")}catch{}var ex=n(55248),ev=n(51213),eb=n(79184),ej=n(98866),ew=n(72259),eC=n(73678),e_=n(25811),eN=n(86101),eS=n(78223);function eI(e){let t,n,i=(0,r.c)(5),{selectedAgent:a}=e,{plan:l}=(0,eb.xR)(),[o,c]=(0,ej.N)(),{models:u}=(0,ew.h)(),[m]=(0,e_.s)(),h=a??m,{data:f}=(0,eN.B)(h.topLevelAgentId?Number(h.topLevelAgentId):null);return d.W.codingAgentModelSelection&&(d.W.codingAgentModelSelectionAllSkus||l===ev.UH.IndividualPro||l===ev.UH.IndividualProPlus)&&(0,eS.CF)(h,f?.slug)&&u&&0!==u.length?(i[0]!==c?(t=e=>{c(e)},i[0]=c,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,s.jsx)(eC.Y,{onUpdateModel:t,selectedModelId:o}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n):null}try{eI.displayName||(eI.displayName="SlashCommandModelPicker")}catch{}let ek=/\/copilot\/agents/,eL=`${V.Jz}/agents`;let AgentsPlugin=class AgentsPlugin{constructor(e=!1,t,n=!1){(0,a._)(this,"id",_.Dv),(0,a._)(this,"displayName",_.Ff),(0,a._)(this,"createTaskFromInput",void 0),(0,a._)(this,"handleUserSubmitRef",void 0),(0,a._)(this,"agentsEnabled",void 0),(0,a._)(this,"skipSyncRouteToThread",!0),(0,a._)(this,"components",[{id:"agents-view",Component:eg,routes:[ek]}]),(0,a._)(this,"slashCommand",{key:"task",name:"Task",description:"Give Copilot coding agent a background task",icon:E.AgentIcon,isNew:!0,order:1,enabled:()=>this.agentsEnabled,disabledAction:e=>{e(eL,{preventTurbo:!0})},execute:async(e,t,n)=>!(this.agentsEnabled&&t.selectedThreadID&&(0,m.G7)("copilot_immersive_task_within_chat_thread"))&&(this.agentsEnabled&&this.createTaskFromInput&&this.handleUserSubmitRef?N(e,this.handleUserSubmitRef):(C.Jt.setTaskEntrypointMessage(e),n(eL,{preventTurbo:!0})),!0),suggestions:["Identify and suggest improvements to slow or inefficient code","Find and refactor duplicated code","Suggest more descriptive variable and function names"],mode:{name:ev.II.Task,icon:E.AgentIcon,supportsAutocompletion:!0,placeholder:"Make a change in your codebase",supportsModelSwitching:d.W.codingAgentModelSelection},customModelPicker:({selectedAgent:e})=>(0,s.jsx)(eI,{selectedAgent:e})}),(0,a._)(this,"navigationItems",[{id:_.Dv,displayName:"Agents",href:_.pr,icon:ex.p}]),this.createTaskFromInput=e,this.handleUserSubmitRef=t,this.agentsEnabled=n}}},59370:(e,t,n)=>{function i(e){return/^@today([+-]\d+[dwmy])?$/.test(e)}function a(e){if(e.startsWith("@"))return!1;let t=new Date(e);return!isNaN(t.getTime())&&(!e.match(/^\d{4}-\d{2}-\d{2}$/)||l(t)===e)}function s(e){return i(e)||a(e)}function r(e){return e.startsWith("@")&&!i(e)?null:i(e)?function(e){if(!i(e))return{date:null,error:`Invalid macro format: ${e}`};let t=new Date;if("@today"===e)return{date:t};let n=e.match(/^@today([+-])(\d+)([dwmy])$/);if(!n)return{date:null,error:`Invalid macro format: ${e}`};let[,a,s,r]=n;if(!a||!s||!r)return{date:null,error:`Invalid macro format: ${e}`};let l=parseInt(s,10),o="+"===a,d=new Date(t);switch(r){case"d":d.setDate(d.getDate()+(o?l:-l));break;case"w":d.setDate(d.getDate()+(o?7*l:-(7*l)));break;case"m":d.setMonth(d.getMonth()+(o?l:-l));break;case"y":d.setFullYear(d.getFullYear()+(o?l:-l));break;default:return{date:null,error:`Invalid unit: ${r}`}}return{date:d}}(e).date:a(e)?new Date(e):null}function l(e){let t=e.toISOString();return t.split("T")[0]??t.substring(0,10)}n.d(t,{O2:()=>l,Qf:()=>r,Yj:()=>s,nS:()=>i})},59432:(e,t,n)=>{n.d(t,{b:()=>sC});var i,a,s,r,l,o=n(74848),d=n(68273),c=n(16522),u=n(70719),m=n(79472),h=n(18799),f=n(69599),p=n(83494),g=n(70843),y=n(57387),x=n(87555),v=n(34164),b=n(96540),j=n(70170),w=n(56051),C=n(5524),_=n(57478),N=n(96459),S=n(53627),I=n(82603),k=n(27011);let L=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,v=(0,c.c)(62),{ref:L,basePath:T,fileFilterMenuOptions:E,fileFilterState:A,filterSize:R,viewerLogin:O,setFileFilterState:P}=e,[F]=(0,N.o)();v[0]!==T?(t={basePath:T},v[0]=T,v[1]=t):t=v[1];let{data:M}=(0,I.dG)(t),$=(0,b.useRef)(null);v[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({focus:()=>{$.current?.focus()}}),v[2]=n):n=v[2],(0,b.useImperativeHandle)(L,n),v[3]!==A?(i={...A},v[3]=A,v[4]=i):i=v[4];let{filterText:B,fileExtensions:V,unselectedFileExtensions:U,showOnlyOwnedFiles:q,showDeletedFiles:H,showOnlyManifestFiles:G,showVendoredFiles:K,showViewedFiles:W}=i,{canSeeDeletedFilesFilter:z,canSeeOnlyManifestFilesFilter:Q,canSeeVendorFilesFilter:Z}=E,J=(0,k.q6)(),{clearAllFilters:Y}=(0,k.or)(),{canSeeCodeownersFilter:X}=E,ee=0;if(M){let e;X=M.isViewerOneOfMultipleCodeowners,v[5]!==M.ownershipByPath?(e=Object.values(M.ownershipByPath).filter(D),v[5]=M.ownershipByPath,v[6]=e):e=v[6],ee=e.length}let et=(0,b.useRef)((0,j.s)(e=>ei({filterText:e}),250)),en=(e,t)=>{let n=U;"selectFileExtension"===e?n=new Set([...U].filter(e=>e!==t.extension)):"unselectFileExtension"===e&&(n=new Set([...U,t.extension]));let i=Object.keys(V).filter(e=>!n.has(e)),a=new URLSearchParams(F);a.delete("file-filters[]"),i.map(e=>{a.append("file-filters[]",e)}),ei({unselectedFileExtensions:n},a)};v[7]!==P?(a=(e,t)=>{t&&(0,S.MM)(t),P({...e})},v[7]=P,v[8]=a):a=v[8];let ei=a;v[9]!==Y||v[10]!==F?(s=()=>{let e=new URLSearchParams(F);e.delete("file-filters[]"),e.delete("owned-by[]"),e.delete("show-deleted-files"),e.delete("manifests"),e.delete("show-vendored-files"),e.delete("show-viewed-files"),(0,S.MM)(e),Y()},v[9]=Y,v[10]=F,v[11]=s):s=v[11];let ea=s;return v[12]!==et?(r=e=>et.current(e),v[12]=et,v[13]=r):r=v[13],v[14]!==X||v[15]!==ee||v[16]!==ei||v[17]!==F||v[18]!==q||v[19]!==O?(l=X&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.l.Divider,{}),(0,o.jsx)(C.l.Group,{selectionVariant:"single",children:(0,o.jsx)(C.l.Item,{selected:q,onSelect:()=>{if(!O)return;let e=new URLSearchParams(F);q?e.delete("owned-by[]",O):e.set("owned-by[]",O),ei({showOnlyOwnedFiles:!q},e)},children:(0,o.jsxs)(o.Fragment,{children:["Only files owned by you ",(0,o.jsx)(_.A,{children:ee})]})})})]}),v[14]=X,v[15]=ee,v[16]=ei,v[17]=F,v[18]=q,v[19]=O,v[20]=l):l=v[20],v[21]===Symbol.for("react.memo_cache_sentinel")?(d=(0,o.jsx)(C.l.Divider,{}),v[21]=d):d=v[21],v[22]!==Q||v[23]!==ei||v[24]!==F||v[25]!==G?(u=Q&&(0,o.jsx)(C.l.Item,{selected:G,onSelect:()=>{let e=new URLSearchParams(F);e.set("manifests",`${!G}`),ei({showOnlyManifestFiles:!G},e)},children:"Only manifest files"}),v[22]=Q,v[23]=ei,v[24]=F,v[25]=G,v[26]=u):u=v[26],v[27]!==z||v[28]!==ei||v[29]!==F||v[30]!==H?(m=z&&(0,o.jsx)(C.l.Item,{selected:H,onSelect:()=>{let e=new URLSearchParams(F);e.set("show-deleted-files",`${!H}`),ei({showDeletedFiles:!H},e)},children:"Deleted files"}),v[27]=z,v[28]=ei,v[29]=F,v[30]=H,v[31]=m):m=v[31],v[32]!==Z||v[33]!==ei||v[34]!==F||v[35]!==K?(h=Z&&(0,o.jsx)(C.l.Item,{selected:K,onSelect:()=>{let e=new URLSearchParams(F);e.set("show-vendored-files",`${!K}`),ei({showVendoredFiles:!K},e)},children:"Vendored files"}),v[32]=Z,v[33]=ei,v[34]=F,v[35]=K,v[36]=h):h=v[36],v[37]!==ei||v[38]!==F||v[39]!==W?(f=()=>{let e=new URLSearchParams(F);e.set("show-viewed-files",`${!W}`),ei({showViewedFiles:!W},e)},v[37]=ei,v[38]=F,v[39]=W,v[40]=f):f=v[40],v[41]!==W||v[42]!==f?(p=(0,o.jsx)(C.l.Item,{selected:W,onSelect:f,children:"Viewed files"}),v[41]=W,v[42]=f,v[43]=p):p=v[43],v[44]!==m||v[45]!==h||v[46]!==p||v[47]!==u?(g=(0,o.jsxs)(C.l.Group,{"aria-label":"More",selectionVariant:"multiple",children:[u,m,h,p]}),v[44]=m,v[45]=h,v[46]=p,v[47]=u,v[48]=g):g=v[48],v[49]!==g||v[50]!==l?(y=(0,o.jsxs)(o.Fragment,{children:[l,d,g]}),v[49]=g,v[50]=l,v[51]=y):y=v[51],v[52]!==V||v[53]!==R||v[54]!==B||v[55]!==J||v[56]!==ea||v[57]!==en||v[58]!==y||v[59]!==r||v[60]!==U?(x=(0,o.jsx)(w.kF,{filterSize:R,filterText:B,fileExtensions:V,unselectedFileExtensions:U,onFilterTextChange:r,onFilterChange:en,onClearAllFilters:ea,isFilteringActive:J,additionalFilterGroups:y,ref:$}),v[52]=V,v[53]=R,v[54]=B,v[55]=J,v[56]=ea,v[57]=en,v[58]=y,v[59]=r,v[60]=U,v[61]=x):x=v[61],x}:function({ref:e,basePath:t,fileFilterMenuOptions:n,fileFilterState:i,filterSize:a,viewerLogin:s,setFileFilterState:r}){let[l]=(0,N.o)(),{data:d}=(0,I.dG)({basePath:t}),c=(0,b.useRef)(null);(0,b.useImperativeHandle)(e,()=>({focus:()=>{c.current?.focus()}}));let{filterText:u,fileExtensions:m,unselectedFileExtensions:h,showOnlyOwnedFiles:f,showDeletedFiles:p,showOnlyManifestFiles:g,showVendoredFiles:y,showViewedFiles:x}={...i},{canSeeDeletedFilesFilter:v,canSeeOnlyManifestFilesFilter:L,canSeeVendorFilesFilter:D}=n,T=(0,k.q6)(),{clearAllFilters:E}=(0,k.or)(),{canSeeCodeownersFilter:A}=n,R=0;d&&(A=d.isViewerOneOfMultipleCodeowners,R=Object.values(d.ownershipByPath).filter(e=>e.isOwnedByViewer).length);let O=(0,b.useRef)((0,j.s)(e=>P({filterText:e}),250)),P=(0,b.useCallback)((e,t)=>{t&&(0,S.MM)(t),r({...e})},[r]),F=(0,b.useCallback)(()=>{let e=new URLSearchParams(l);e.delete("file-filters[]"),e.delete("owned-by[]"),e.delete("show-deleted-files"),e.delete("manifests"),e.delete("show-vendored-files"),e.delete("show-viewed-files"),(0,S.MM)(e),E()},[l,E]);return(0,o.jsx)(w.kF,{filterSize:a,filterText:u,fileExtensions:m,unselectedFileExtensions:h,onFilterTextChange:e=>O.current(e),onFilterChange:(e,t)=>{let n=h;"selectFileExtension"===e?n=new Set([...h].filter(e=>e!==t.extension)):"unselectFileExtension"===e&&(n=new Set([...h,t.extension]));let i=Object.keys(m).filter(e=>!n.has(e)),a=new URLSearchParams(l);a.delete("file-filters[]"),i.map(e=>{a.append("file-filters[]",e)}),P({unselectedFileExtensions:n},a)},onClearAllFilters:F,isFilteringActive:T,additionalFilterGroups:(0,o.jsxs)(o.Fragment,{children:[A&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.l.Divider,{}),(0,o.jsx)(C.l.Group,{selectionVariant:"single",children:(0,o.jsx)(C.l.Item,{selected:f,onSelect:()=>{if(!s)return;let e=new URLSearchParams(l);f?e.delete("owned-by[]",s):e.set("owned-by[]",s),P({showOnlyOwnedFiles:!f},e)},children:(0,o.jsxs)(o.Fragment,{children:["Only files owned by you ",(0,o.jsx)(_.A,{children:R})]})})})]}),(0,o.jsx)(C.l.Divider,{}),(0,o.jsxs)(C.l.Group,{"aria-label":"More",selectionVariant:"multiple",children:[L&&(0,o.jsx)(C.l.Item,{selected:g,onSelect:()=>{let e=new URLSearchParams(l);e.set("manifests",`${!g}`),P({showOnlyManifestFiles:!g},e)},children:"Only manifest files"}),v&&(0,o.jsx)(C.l.Item,{selected:p,onSelect:()=>{let e=new URLSearchParams(l);e.set("show-deleted-files",`${!p}`),P({showDeletedFiles:!p},e)},children:"Deleted files"}),D&&(0,o.jsx)(C.l.Item,{selected:y,onSelect:()=>{let e=new URLSearchParams(l);e.set("show-vendored-files",`${!y}`),P({showVendoredFiles:!y},e)},children:"Vendored files"}),(0,o.jsx)(C.l.Item,{selected:x,onSelect:()=>{let e=new URLSearchParams(l);e.set("show-viewed-files",`${!x}`),P({showViewedFiles:!x},e)},children:"Viewed files"})]})]}),ref:c})};function D(e){return e.isOwnedByViewer}try{L.displayName||(L.displayName="FileFilter")}catch{}var T=n(38621),E=n(11196),A=n(84268),R=n(60569),O=n(25556),P=n(35311),F=n(78049),M=n(34535),$=n(71315),B=n(77046);function V(e){if(!e||!$.cg)return;let t=$.cg.scrollY??0,n=e.getBoundingClientRect().top+t-10-60;$.cg.scrollTo({top:n,left:0}),e.focus()}let U=(0,b.memo)(function(e){let t,n=(0,c.c)(3),{changeType:i,isSymlink:a}=e;return n[0]!==i||n[1]!==a?(t=(0,o.jsx)(F.E,{status:i,isSymlink:a}),n[0]=i,n[1]=a,n[2]=t):t=n[2],t});U.displayName="FileStatusIconItem";let q=(0,b.memo)(function(e){let t,n,i,a,s,r,l,d,u,m,h=(0,c.c)(41),{file:f,depth:p,onSelect:g}=e,y=(0,b.useRef)(null),x=(0,b.useRef)(null),v=`#diff-${f.diff.pathDigest}`;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:y,mouseRowRef:y},h[0]=t):t=h[0];let j=(0,M.Z)(t),w=f.diff.totalCommentsCount??0,C=f.diff.highestAnnotationLevel,_=(0,k.E5)(),N=(0,k.Py)(f.diff.pathDigest),I=f.fileName??"This file",L=null;switch(w>0&&(I+=` has ${w<10?w:"9+"} ${w>1?"comments":"comment"}`),C){case"WARNING":{let e;I+=`${w>0?" and":""} has warning annotations`,h[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{className:"pl-1 fgColor-attention",children:(0,o.jsx)(T.AlertIcon,{})}),h[1]=e):e=h[1],L=e;break}case"NOTICE":{let e;I+=`${w>0?" and":""} has notice annotations`,h[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{className:"pl-1 fgColor-default",children:(0,o.jsx)(T.InfoIcon,{})}),h[2]=e):e=h[2],L=e;break}case"FAILURE":{let e;I+=`${w>0?" and":""} has failure annotations`,h[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{className:"pl-1 fgColor-danger",children:(0,o.jsx)(T.XCircleFillIcon,{})}),h[3]=e):e=h[3],L=e}}h[4]!==L||h[5]!==I?(n={screenReaderText:I,annotationElement:L},h[4]=L,h[5]=I,h[6]=n):n=h[6];let{screenReaderText:D,annotationElement:O}=n;h[7]!==N?(i=()=>{if(y.current&&N){let e=window.setTimeout(()=>{let e=$.XC?.getElementById("diff_file_tree")?.parentElement,t=y.current.offsetTop,n=$.cg?.innerHeight??0;e&&(e.scrollTop=t-n/2)},0);return()=>{window.clearTimeout(e)}}},h[7]=N,h[8]=i):i=h[8],h[9]!==f.diff.pathDigest||h[10]!==N?(a=[f.diff.pathDigest,N],h[9]=f.diff.pathDigest,h[10]=N,h[11]=a):a=h[11],(0,b.useEffect)(i,a),h[12]!==v||h[13]!==f.diff.pathDigest||h[14]!==g||h[15]!==_?(s=e=>{if(e.nativeEvent instanceof KeyboardEvent){if(y?.current!==document.activeElement)return void e.preventDefault();if("Enter"===e.key||" "===e.key){e.preventDefault(),_(f.diff.pathDigest),(0,S.Zu)(`diff-${f.diff.pathDigest}`),(0,S.kd)(window.location.href),g?.(),$.cg?.requestAnimationFrame(()=>{V(document.getElementById(`diff-${f.diff.pathDigest}`))});return}}if(e.nativeEvent instanceof MouseEvent){if(e.metaKey||e.ctrlKey||1===e.button){e.preventDefault(),window.open(v,"_blank");return}_(f.diff.pathDigest),(0,S.Zu)(`diff-${f.diff.pathDigest}`),(0,S.kd)(window.location.href),g?.(),$.cg?.requestAnimationFrame(()=>{V(document.getElementById(`diff-${f.diff.pathDigest}`))})}},h[12]=v,h[13]=f.diff.pathDigest,h[14]=g,h[15]=_,h[16]=s):s=h[16];let P=s,F=f.fileName??"";h[17]!==v||h[18]!==F?(r=(0,o.jsx)(A.A,{href:v,muted:!0,ref:x,role:"presentation",className:"fgColor-default",tabIndex:-1,onClick:W,children:F}),h[17]=v,h[18]=F,h[19]=r):r=h[19];let q=r;return h[20]!==f.diff.changeType||h[21]!==f.diff.isSymlink?(l=(0,o.jsx)(R.G.LeadingVisual,{children:(0,o.jsx)(U,{changeType:f.diff.changeType,isSymlink:f.diff.isSymlink})}),h[20]=f.diff.changeType,h[21]=f.diff.isSymlink,h[22]=l):l=h[22],h[23]!==q||h[24]!==F||h[25]!==j?(d=j?(0,o.jsx)(E.m,{text:F,direction:"ne",children:q}):q,h[23]=q,h[24]=F,h[25]=j,h[26]=d):d=h[26],h[27]!==O||h[28]!==C||h[29]!==w?(u=(!!w||C)&&(0,o.jsx)(R.G.TrailingVisual,{children:(0,o.jsxs)("div",{className:"d-flex flex-items-center flex-row",children:[!!w&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.CommentIcon,{}),(0,o.jsx)("div",{className:"ml-1 text-bold fgColor-default f6",children:w<10?w:"9+"})]}),O]})}),h[27]=O,h[28]=C,h[29]=w,h[30]=u):u=h[30],h[31]!==p||h[32]!==f.diff.path||h[33]!==f.diff.pathDigest||h[34]!==N||h[35]!==P||h[36]!==D||h[37]!==l||h[38]!==d||h[39]!==u?(m=(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(R.G.Item,{defaultExpanded:!0,"aria-label":D,"aria-level":p,current:N,id:f.diff.path,onSelect:P,ref:y,className:B.A["file-tree-row"],children:[l,d,u]},f.diff.pathDigest)}),h[31]=p,h[32]=f.diff.path,h[33]=f.diff.pathDigest,h[34]=N,h[35]=P,h[36]=D,h[37]=l,h[38]=d,h[39]=u,h[40]=m):m=h[40],m}),H=(0,b.memo)(function e({directory:t,depth:n=0,leadingPath:i="",sortByDiffOrder:a,onSelect:s,fileNodeRenderer:r}){let l=i?`${i}/`:"",d=(0,b.useRef)(null),c=(0,b.useRef)(null),u=(0,M.Z)({focusRowRef:c,mouseRowRef:d});if(!t.files.length&&1===t.directories.length)return(0,o.jsx)(o.Fragment,{children:t.directories.map(i=>(0,o.jsx)(e,{depth:0===n?1:n,directory:i,leadingPath:`${l}${t.name}`,sortByDiffOrder:a,onSelect:s,fileNodeRenderer:r},i.path))});function m(){return(0,o.jsx)(G,{directory:t,depth:n,sortByDiffOrder:a,onSelect:s,fileNodeRenderer:r})}return 0===n?m():(0,o.jsxs)(R.G.Item,{ref:c,defaultExpanded:!0,id:t.path,children:[(0,o.jsx)(R.G.LeadingVisual,{children:(0,o.jsx)(R.G.DirectoryIcon,{})}),(0,o.jsx)("span",{ref:d,children:`${l}${t.name}`}),u&&(0,o.jsx)(O.m,{"data-testid":`${t.name}-directory-item-tooltip`,id:`${t.name}-directory-item-tooltip`,contentRef:c,"aria-label":`${l}${t.name}`,open:!0,direction:"ne"}),(0,o.jsx)(R.G.SubTree,{children:m()})]},t.path)}),G=(0,b.memo)(function(e){let t,n,i,a=(0,c.c)(17),{directory:s,fileNodeRenderer:r,sortByDiffOrder:l,depth:d,onSelect:u}=e,m=void 0===d?0:d;a[0]!==s.directories||a[1]!==s.files||a[2]!==l?(t=s.files.map(z).concat(s.directories.map(Q)),l?t.sort(Z):t.sort(J),a[0]=s.directories,a[1]=s.files,a[2]=l,a[3]=t):t=a[3];let h=t;if(a[4]!==m||a[5]!==r||a[6]!==h||a[7]!==u||a[8]!==l){let e;a[10]!==m||a[11]!==r||a[12]!==u||a[13]!==l?(e=e=>"file"!==e.pathType?(0,o.jsx)(H,{depth:m+1,directory:e.node,fileNodeRenderer:r,sortByDiffOrder:l,onSelect:u},e.path):r?r({onSelect:u,file:e.node,depth:m+1}):(0,o.jsx)(q,{depth:m+1,file:e.node,onSelect:u},e.path),a[10]=m,a[11]=r,a[12]=u,a[13]=l,a[14]=e):e=a[14],n=h.map(e),a[4]=m,a[5]=r,a[6]=h,a[7]=u,a[8]=l,a[9]=n}else n=a[9];return a[15]!==n?(i=(0,o.jsx)(o.Fragment,{children:n}),a[15]=n,a[16]=i):i=a[16],i}),K=(0,b.memo)(function(e){let t,n,i,a=(0,c.c)(10),{diffs:s,fileNodeRenderer:r,sortByDiffOrder:l,className:d,onSelect:u}=e;a[0]!==s?(t=(0,P.xY)(s),a[0]=s,a[1]=t):t=a[1];let m=t;return a[2]!==r||a[3]!==m||a[4]!==u||a[5]!==l?(n=(0,o.jsx)(H,{directory:m,fileNodeRenderer:r,sortByDiffOrder:l,onSelect:u}),a[2]=r,a[3]=m,a[4]=u,a[5]=l,a[6]=n):n=a[6],a[7]!==d||a[8]!==n?(i=(0,o.jsx)(R.G,{"aria-label":"File Tree",className:d,children:n}),a[7]=d,a[8]=n,a[9]=i):i=a[9],i});try{q.displayName||(q.displayName="File")}catch{}try{H.displayName||(H.displayName="Directory")}catch{}try{G.displayName||(G.displayName="DirectoryRendering")}catch{}try{K.displayName||(K.displayName="PullRequestDiffFileTree")}catch{}function W(e){return e.preventDefault()}function z(e){return{path:e.filePath,pathType:"file",node:e,sortOrder:e.sortOrder}}function Q(e){return{path:e.path,pathType:"directory",node:e,sortOrder:e.sortOrder}}function Z(e,t){return e.sortOrder-t.sortOrder}function J(e,t){return(0,P.wH)(e.path,t.path)}var Y=n(75202),X=n(81960),ee=n(69726);let et="GroupsList-module__GroupsListContainer--x6dMy",en="GroupsList-module__GroupsListItemsShiftLeft--PGMNM",ei="GroupsList-module__GroupItem--vAFCe",ea="GroupsList-module__GroupsListToggle--KO5Om";var es=n(82130);let er=(0,d.Z6)()?function(){let e,t,n=(0,c.c)(5),{sendPullRequestAnalyticsEvent:i}=(0,es.q)(),a=(0,k.JA)();n[0]!==a||n[1]!==i?(e=e=>{let{isErrorState:t,unavailableReason:n,userPreferenceDisabled:s,hasGroups:r}=e,l=void 0!==t&&t,o=void 0!==s&&s,d=void 0!==r&&r;i("change_groups.presented","CHANGE_GROUPS_PRESENTED",{presented_and_visible:d&&!l&&!o,presented_and_not_visible:d&&!l&&o,has_groups:d,is_error_state:l,selected_group_id:a?.id,browser_width:"undefined"!=typeof window?window.innerWidth:0,...n&&{unavailable_reason:n},...a&&{selected_group_name:a.name}})},n[0]=a,n[1]=i,n[2]=e):e=n[2];let s=e;return n[3]!==s?(t={sendChangeGroupsPresentedEvent:s},n[3]=s,n[4]=t):t=n[4],t}:function(){let{sendPullRequestAnalyticsEvent:e}=(0,es.q)(),t=(0,k.JA)();return{sendChangeGroupsPresentedEvent:(0,b.useCallback)(({isErrorState:n=!1,unavailableReason:i,userPreferenceDisabled:a=!1,hasGroups:s=!1})=>{e("change_groups.presented","CHANGE_GROUPS_PRESENTED",{presented_and_visible:s&&!n&&!a,presented_and_not_visible:s&&!n&&a,has_groups:s,is_error_state:n,selected_group_id:t?.id,browser_width:"undefined"!=typeof window?window.innerWidth:0,...i&&{unavailable_reason:i},...t&&{selected_group_name:t.name}})},[e,t])}};var el=n(26108),eo=n(64451),ed=n(86877),ec=n(46720),eu=n(10576),em=n(21373);let eh=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(16),{onClose:r,onSubmit:l,returnFocusRef:d,feedbackOptions:u,precheckOther:m}=e,h=void 0!==m&&m,[f,p]=(0,b.useState)(!1);s[0]!==h?(t=h?["OTHER"]:[],s[0]=h,s[1]=t):t=s[1];let[g,x]=(0,b.useState)(t),[v,j]=(0,b.useState)("");s[2]!==g||s[3]!==l||s[4]!==v?(n=e=>{e.preventDefault(),p(!0),g.length&&l({type:"NEGATIVE",feedbackChoice:g,textResponse:v})},s[2]=g,s[3]=l,s[4]=v,s[5]=n):n=s[5];let w=n;return s[6]!==f||s[7]!==g||s[8]!==u||s[9]!==w||s[10]!==v?(i=()=>(0,o.jsxs)("form",{onSubmit:w,children:[(0,o.jsxs)(y.l.Body,{children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)(eo.A,{onChange:x,required:!0,children:[(0,o.jsx)(eo.A.Label,{children:"Category"}),u.map(e=>(0,o.jsxs)(ed.A,{id:`feedback_choice_${e.value}`,children:[(0,o.jsx)(ec.A,{value:e.value,checked:g.includes(e.value)}),(0,o.jsx)(ed.A.Label,{children:e.label})]},e.value)),f&&!g.length&&(0,o.jsx)(eo.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,o.jsxs)(ed.A,{id:"text_response",children:[(0,o.jsx)(ed.A.Label,{children:"How should we improve this response?"}),(0,o.jsx)(eu.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:v,resize:"vertical",onChange:e=>j(e.currentTarget.value)})]})]}),(0,o.jsx)(y.l.Footer,{children:(0,o.jsx)(em.Q,{type:"submit",disabled:f&&(!v||!g),children:"Submit"})})]}),s[6]=f,s[7]=g,s[8]=u,s[9]=w,s[10]=v,s[11]=i):i=s[11],s[12]!==r||s[13]!==d||s[14]!==i?(a=(0,o.jsx)(y.l,{onClose:r,title:"Provide additional feedback",subtitle:"Please help us improve Groups by Copilot by sharing more details about these generated groups.",returnFocusRef:d,renderBody:i}),s[12]=r,s[13]=d,s[14]=i,s[15]=a):a=s[15],a}:function({onClose:e,onSubmit:t,returnFocusRef:n,feedbackOptions:i,precheckOther:a=!1}){let[s,r]=(0,b.useState)(!1),[l,d]=(0,b.useState)(a?["OTHER"]:[]),[c,u]=(0,b.useState)(""),m=e=>{e.preventDefault(),r(!0),l.length&&t({type:"NEGATIVE",feedbackChoice:l,textResponse:c})};return(0,o.jsx)(y.l,{onClose:e,title:"Provide additional feedback",subtitle:"Please help us improve Groups by Copilot by sharing more details about these generated groups.",returnFocusRef:n,renderBody:()=>(0,o.jsxs)("form",{onSubmit:m,children:[(0,o.jsxs)(y.l.Body,{children:[(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsxs)(eo.A,{onChange:d,required:!0,children:[(0,o.jsx)(eo.A.Label,{children:"Category"}),i.map(e=>(0,o.jsxs)(ed.A,{id:`feedback_choice_${e.value}`,children:[(0,o.jsx)(ec.A,{value:e.value,checked:l.includes(e.value)}),(0,o.jsx)(ed.A.Label,{children:e.label})]},e.value)),s&&!l.length&&(0,o.jsx)(eo.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,o.jsxs)(ed.A,{id:"text_response",children:[(0,o.jsx)(ed.A.Label,{children:"How should we improve this response?"}),(0,o.jsx)(eu.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:c,resize:"vertical",onChange:e=>u(e.currentTarget.value)})]})]}),(0,o.jsx)(y.l.Footer,{children:(0,o.jsx)(em.Q,{type:"submit",disabled:s&&(!c||!l),children:"Submit"})})]})})};try{eh.displayName||(eh.displayName="NegativeFeedbackForm")}catch{}let ef=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(5),{disabled:a,onSubmit:s}=e;return i[0]!==s?(t=()=>s({type:"POSITIVE"}),i[0]=s,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,o.jsx)(el.K,{size:"small",variant:"invisible",disabled:a,icon:T.ThumbsupIcon,"aria-label":"Positive feedback",onClick:t}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}:function({disabled:e,onSubmit:t}){return(0,o.jsx)(el.K,{size:"small",variant:"invisible",disabled:e,icon:T.ThumbsupIcon,"aria-label":"Positive feedback",onClick:()=>t({type:"POSITIVE"})})},ep=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(12),{disabled:l,onSubmit:d,feedbackOptions:u}=e,[m,h]=(0,b.useState)(!1),f=(0,b.useRef)(null);r[0]!==d?(t=e=>{d(e),h(!1)},r[0]=d,r[1]=t):t=r[1];let p=t;return r[2]!==m||r[3]!==u||r[4]!==p?(n=m&&(0,o.jsx)(eh,{onClose:()=>h(!1),onSubmit:p,returnFocusRef:f,feedbackOptions:u}),r[2]=m,r[3]=u,r[4]=p,r[5]=n):n=r[5],r[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>h(!0),r[6]=i):i=r[6],r[7]!==l?(a=(0,o.jsx)(el.K,{ref:f,size:"small",variant:"invisible",disabled:l,icon:T.ThumbsdownIcon,"aria-label":"Negative feedback",onClick:i}),r[7]=l,r[8]=a):a=r[8],r[9]!==n||r[10]!==a?(s=(0,o.jsxs)(o.Fragment,{children:[n,a]}),r[9]=n,r[10]=a,r[11]=s):s=r[11],s}:function({disabled:e,onSubmit:t,feedbackOptions:n}){let[i,a]=(0,b.useState)(!1),s=(0,b.useRef)(null);return(0,o.jsxs)(o.Fragment,{children:[i&&(0,o.jsx)(eh,{onClose:()=>a(!1),onSubmit:e=>{t(e),a(!1)},returnFocusRef:s,feedbackOptions:n}),(0,o.jsx)(el.K,{ref:s,size:"small",variant:"invisible",disabled:e,icon:T.ThumbsdownIcon,"aria-label":"Negative feedback",onClick:()=>a(!0)})]})};try{ef.displayName||(ef.displayName="PositiveFeedbackButton")}catch{}try{ep.displayName||(ep.displayName="NegativeFeedbackButton")}catch{}var eg=n(20622),ey=n(53885),ex=n(94747),ev=n(48845);let eb=(0,d.Z6)()?function(){let e,t=(0,c.c)(2),n=(0,ey.e)(eg.uT.submitCopilotGroupsFeedback);return t[0]!==n?(e={mutationFn:async e=>{let{type:t,feedbackChoice:i,textResponse:a}=e,s={feedback:t};a&&(s.text_response=a),i&&i.length>0&&(s.feedback_choice=i);let r=await (0,ev.q$)(n,{method:"POST",headers:{Accept:"application/json"},body:s}),l=await (0,ev.hp)(r);return(0,ev.R)(r,l),l}},t[0]=n,t[1]=e):e=t[1],(0,ex.n)(e)}:function(){let e=(0,ey.e)(eg.uT.submitCopilotGroupsFeedback);return(0,ex.n)({mutationFn:async({type:t,feedbackChoice:n,textResponse:i})=>{let a={feedback:t};i&&(a.text_response=i),n&&n.length>0&&(a.feedback_choice=n);let s=await (0,ev.q$)(e,{method:"POST",headers:{Accept:"application/json"},body:a}),r=await (0,ev.hp)(s);return(0,ev.R)(s,r),r}})},ej=(0,d.Z6)()?e=>{let t,n,i,a,s,r=(0,c.c)(15),{onNegativeFeedbackSubmit:l}=e,[d,u]=(0,b.useState)(),{mutate:m}=eb(),h=(0,k.xW)().changeGroupFeedbackOptions;r[0]!==m?(t=e=>{u(e.type),m(e)},r[0]=m,r[1]=t):t=r[1];let f=t;r[2]!==f||r[3]!==l?(n=e=>{l(),f(e)},r[2]=f,r[3]=l,r[4]=n):n=r[4];let p=n;return r[5]!==f||r[6]!==d?(i="NEGATIVE"!==d&&(0,o.jsx)(ef,{disabled:!!d,onSubmit:f}),r[5]=f,r[6]=d,r[7]=i):i=r[7],r[8]!==h||r[9]!==p||r[10]!==d?(a="POSITIVE"!==d&&(0,o.jsx)(ep,{disabled:!!d,onSubmit:p,feedbackOptions:h}),r[8]=h,r[9]=p,r[10]=d,r[11]=a):a=r[11],r[12]!==i||r[13]!==a?(s=(0,o.jsxs)("div",{className:"d-flex",children:[i,a]}),r[12]=i,r[13]=a,r[14]=s):s=r[14],s}:({onNegativeFeedbackSubmit:e})=>{let[t,n]=(0,b.useState)(),{mutate:i}=eb(),a=(0,k.xW)().changeGroupFeedbackOptions,s=e=>{n(e.type),i(e)};return(0,o.jsxs)("div",{className:"d-flex",children:["NEGATIVE"!==t&&(0,o.jsx)(ef,{disabled:!!t,onSubmit:s}),"POSITIVE"!==t&&(0,o.jsx)(ep,{disabled:!!t,onSubmit:t=>{e(),s(t)},feedbackOptions:a})]})},ew=(0,d.Z6)()?e=>{let t,n,i=(0,c.c)(5),{className:a,onNegativeFeedbackSubmit:s}=e;return i[0]!==s?(t=(0,o.jsx)(Y.t,{fallback:null,children:(0,o.jsx)(ej,{onNegativeFeedbackSubmit:s})}),i[0]=s,i[1]=t):t=i[1],i[2]!==a||i[3]!==t?(n=(0,o.jsx)("div",{className:a,children:t}),i[2]=a,i[3]=t,i[4]=n):n=i[4],n}:({className:e,onNegativeFeedbackSubmit:t})=>(0,o.jsx)("div",{className:e,children:(0,o.jsx)(Y.t,{fallback:null,children:(0,o.jsx)(ej,{onNegativeFeedbackSubmit:t})})});try{ej.displayName||(ej.displayName="Feedback")}catch{}try{ew.displayName||(ew.displayName="GroupsFeedback")}catch{}var eC=n(70263),e_=n(40235),eN=n(97286),eS=n(96379);function eI(e){switch(e){case"CREATED":case"RUNNING":case"STARTED":case"WAITING":return!1;default:return!0}}function ek(e){switch(e){case"ABANDONED":case"FAILED":case"SKIPPED":return!0;default:return!1}}function eL({baseSha:e,headSha:t,changeGroupsURL:n}){return[eg.uT.changeGroups,n,`baseSha:${e}`,`headSha:${t}`]}let eD=(0,d.Z6)()?function(e,t){let n,i,a,s,r,l=(0,c.c)(15),o=(0,ey.e)(eg.uT.changeGroups);l[0]!==t||l[1]!==o||l[2]!==e?(n=eL({headSha:e,baseSha:t,changeGroupsURL:o}),l[0]=t,l[1]=o,l[2]=e,l[3]=n):n=l[3];let d=n,{updateChangeGroupGeneration:u}=(0,k.wL)(),m=(0,k.xW)();l[4]!==m?(i=()=>{let e=m.latestChangeGroupOrchestration?.state;if(e&&eI(e))return m},l[4]=m,l[5]=i):i=l[5];let h=i;return l[6]!==o||l[7]!==u?(a=async()=>{let e=await (0,eS.QJ)(o);if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json();return u(t),t},l[6]=o,l[7]=u,l[8]=a):a=l[8],l[9]!==h?(s=h(),l[9]=h,l[10]=s):s=l[10],l[11]!==d||l[12]!==a||l[13]!==s?(r={queryKey:d,queryFn:a,initialData:s,staleTime:1/0},l[11]=d,l[12]=a,l[13]=s,l[14]=r):r=l[14],(0,eN.I)(r)}:function(e,t){let n=(0,ey.e)(eg.uT.changeGroups),i=eL({headSha:e,baseSha:t,changeGroupsURL:n}),{updateChangeGroupGeneration:a}=(0,k.wL)(),s=(0,k.xW)(),r=(0,b.useCallback)(()=>{let e=s.latestChangeGroupOrchestration?.state;if(e&&eI(e))return s},[s]);return(0,eN.I)({queryKey:i,queryFn:async()=>{let e=await (0,eS.QJ)(n);if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json();return a(t),t},initialData:r(),staleTime:1/0})},eT=(0,d.Z6)()?function(e,t,n){let i,a,s=(0,c.c)(7),r=(0,eC.A)(),{refetch:l}=eD(n,t);s[0]!==r||s[1]!==l?(i=(0,j.n)(()=>{r()&&l()},2e3),s[0]=r,s[1]=l,s[2]=i):i=s[2];let o=i;s[3]!==t||s[4]!==n||s[5]!==o?(a=e=>{e?.base_commit_oid===t&&e?.head_commit_oid===n&&window.setTimeout(()=>o(),e.wait||0)},s[3]=t,s[4]=n,s[5]=o,s[6]=a):a=s[6];let d=a;(0,e_.x)(e,d)}:function(e,t,n){let i=(0,eC.A)(),{refetch:a}=eD(n,t),s=(0,b.useMemo)(()=>(0,j.n)(()=>{i()&&a()},2e3),[i,a]),r=(0,b.useMemo)(()=>e=>{e?.base_commit_oid===t&&e?.head_commit_oid===n&&window.setTimeout(()=>s(),e.wait||0)},[t,n,s]);(0,e_.x)(e,r)};function eE(e){switch(e){case"DIFF_TOO_LARGE":case"TOO_MANY_GROUPS":return"Groups are unavailable because the PR exceeds the size limit.";case"DIFF_TOO_SMALL":case"TOO_FEW_GROUPS":return"Grouping was skipped because all changes are closely related.";default:return"Copilot was unable to generate groups for this pull request."}}var eA=n(82075);let eR=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f=(0,c.c)(46),{groups:p,activeGroupId:g,onSelectGroup:y,onClearActiveGroup:x,isLoadingState:j}=e,{sendPullRequestAnalyticsEvent:w}=(0,es.q)(),{sendChangeGroupsPresentedEvent:N}=er(),{fullDiff:S}=(0,k.L3)(),I=(0,k.a_)(),L=(0,k.TV)(),D=(0,k.r$)(),E=(0,b.useRef)(null),{error:A}=eD(S.headOid,S.baseOid),R=!!A&&!j;eT(I,S.baseOid,S.headOid),f[0]!==p.length||f[1]!==j||f[2]!==N||f[3]!==R||f[4]!==L?(t=()=>{j||(R||L?N({isErrorState:!0,unavailableReason:L||void 0}):p.length>0?N({isErrorState:!1,hasGroups:!0}):N({isErrorState:!1,hasGroups:!1}))},f[0]=p.length,f[1]=j,f[2]=N,f[3]=R,f[4]=L,f[5]=t):t=f[5],f[6]!==p||f[7]!==j||f[8]!==N||f[9]!==R||f[10]!==L?(n=[p,j,R,L,N],f[6]=p,f[7]=j,f[8]=N,f[9]=R,f[10]=L,f[11]=n):n=f[11],(0,b.useEffect)(t,n),f[12]!==x||f[13]!==w?(i=()=>{w("groups_list.clear_group","GROUPS_LIST_ITEM"),x()},f[12]=x,f[13]=w,f[14]=i):i=f[14];let O=i;f[15]!==O?(a=()=>{O(),requestAnimationFrame(()=>{E.current?.focus()})},f[15]=O,f[16]=a):a=f[16];let P=a,F=p.length>0,{isCollapsed:M,handleToggleCollapsed:$}=e$(D);f[17]!==$?(s=()=>{$(),requestAnimationFrame(()=>{E.current?.focus()})},f[17]=$,f[18]=s):s=f[18];let B=s;f[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(X.A,{as:"h2",className:"h6",children:"Groups by Copilot"}),f[19]=r):r=f[19];let V=r;return f[20]===Symbol.for("react.memo_cache_sentinel")?(l=(0,v.$)(et),f[20]=l):l=f[20],f[21]!==p.length||f[22]!==$||f[23]!==F||f[24]!==M||f[25]!==j?(d=j?(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center fgColor-muted pt-2 px-2 pb-1",children:[V,(0,o.jsx)("span",{className:"ml-auto d-flex flex-items-center",children:(0,o.jsx)(ee.A,{size:"small","aria-label":"Loading change groups"})})]}):(0,o.jsxs)("button",{className:(0,v.$)("d-flex flex-row flex-items-center fgColor-muted",ea),onClick:$,"aria-expanded":!M,ref:E,children:[V,M&&F&&(0,o.jsx)(_.A,{scheme:"secondary",className:"mx-2",children:p.length}),M?(0,o.jsx)(T.ChevronDownIcon,{className:"ml-auto"}):(0,o.jsx)(T.ChevronUpIcon,{className:"ml-auto"})]}),f[21]=p.length,f[22]=$,f[23]=F,f[24]=M,f[25]=j,f[26]=d):d=f[26],f[27]!==g||f[28]!==p||f[29]!==O||f[30]!==P||f[31]!==F||f[32]!==M||f[33]!==y||f[34]!==B?(u=F&&(0,o.jsxs)("div",{className:(0,v.$)("mt-n2",en),children:[M&&!g?(0,o.jsx)("div",{className:"pb-2"}):(0,o.jsxs)(C.l,{children:[!M&&(0,o.jsx)(C.l.Item,{active:void 0===g,onSelect:O,children:"All files"},"All files"),p.toSorted(eO).map(e=>(0,o.jsx)(eF,{group:e,activeGroupId:g,onSelectGroup:y,isListCollapsed:M,onClickGroupWhenCollapsed:P},e.id)).filter(Boolean)]}),!M&&(0,o.jsx)(ew,{className:"ml-2",onNegativeFeedbackSubmit:B})]}),f[27]=g,f[28]=p,f[29]=O,f[30]=P,f[31]=F,f[32]=M,f[33]=y,f[34]=B,f[35]=u):u=f[35],f[36]!==F||f[37]!==M||f[38]!==j||f[39]!==R||f[40]!==L?(m=!M&&!F&&!j&&(0,o.jsx)("div",{className:"px-2 pb-2 pt-0 f6 fgColor-muted",children:L?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"mb-0 d-inline",children:eE(L)})," ",(0,o.jsx)(eP,{})]}):R&&(0,o.jsx)("p",{className:"mb-0",children:"No groups created"})}),f[36]=F,f[37]=M,f[38]=j,f[39]=R,f[40]=L,f[41]=m):m=f[41],f[42]!==m||f[43]!==d||f[44]!==u?(h=(0,o.jsxs)("div",{className:l,children:[d,u,m]}),f[42]=m,f[43]=d,f[44]=u,f[45]=h):h=f[45],h}:function({groups:e,activeGroupId:t,onSelectGroup:n,onClearActiveGroup:i,isLoadingState:a}){let{sendPullRequestAnalyticsEvent:s}=(0,es.q)(),{sendChangeGroupsPresentedEvent:r}=er(),{fullDiff:l}=(0,k.L3)(),d=(0,k.a_)(),c=(0,k.TV)(),u=(0,k.r$)(),m=(0,b.useRef)(null),{error:h}=eD(l.headOid,l.baseOid),f=!!h&&!a;eT(d,l.baseOid,l.headOid),(0,b.useEffect)(()=>{a||(f||c?r({isErrorState:!0,unavailableReason:c||void 0}):e.length>0?r({isErrorState:!1,hasGroups:!0}):r({isErrorState:!1,hasGroups:!1}))},[e,a,f,c,r]);let p=()=>{s("groups_list.clear_group","GROUPS_LIST_ITEM"),i()},g=()=>{p(),requestAnimationFrame(()=>{m.current?.focus()})},y=e.length>0,{isCollapsed:x,handleToggleCollapsed:j}=e$(u),w=(0,o.jsx)(X.A,{as:"h2",className:"h6",children:"Groups by Copilot"});return(0,o.jsxs)("div",{className:(0,v.$)(et),children:[a?(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center fgColor-muted pt-2 px-2 pb-1",children:[w,(0,o.jsx)("span",{className:"ml-auto d-flex flex-items-center",children:(0,o.jsx)(ee.A,{size:"small","aria-label":"Loading change groups"})})]}):(0,o.jsxs)("button",{className:(0,v.$)("d-flex flex-row flex-items-center fgColor-muted",ea),onClick:j,"aria-expanded":!x,ref:m,children:[w,x&&y&&(0,o.jsx)(_.A,{scheme:"secondary",className:"mx-2",children:e.length}),x?(0,o.jsx)(T.ChevronDownIcon,{className:"ml-auto"}):(0,o.jsx)(T.ChevronUpIcon,{className:"ml-auto"})]}),y&&(0,o.jsxs)("div",{className:(0,v.$)("mt-n2",en),children:[x&&!t?(0,o.jsx)("div",{className:"pb-2"}):(0,o.jsxs)(C.l,{children:[!x&&(0,o.jsx)(C.l.Item,{active:void 0===t,onSelect:p,children:"All files"},"All files"),e.toSorted((e,t)=>t.priority-e.priority).map(e=>(0,o.jsx)(eF,{group:e,activeGroupId:t,onSelectGroup:n,isListCollapsed:x,onClickGroupWhenCollapsed:g},e.id)).filter(Boolean)]}),!x&&(0,o.jsx)(ew,{className:"ml-2",onNegativeFeedbackSubmit:()=>{j(),requestAnimationFrame(()=>{m.current?.focus()})}})]}),!x&&!y&&!a&&(0,o.jsx)("div",{className:"px-2 pb-2 pt-0 f6 fgColor-muted",children:c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"mb-0 d-inline",children:eE(c)})," ",(0,o.jsx)(eP,{})]}):f&&(0,o.jsx)("p",{className:"mb-0",children:"No groups created"})})]})};function eO(e,t){return t.priority-e.priority}let eP=(0,d.Z6)()?function(){let e,t,n,i,a=(0,c.c)(9),s=(0,b.useRef)(null),{mutate:r}=eb(),[l,d]=(0,b.useState)(!1),u=(0,k.xW)().changeGroupFeedbackOptions;a[0]!==r?(e=e=>{r(e),d(!1)},a[0]=r,a[1]=e):e=a[1];let m=e;return a[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(A.A,{className:"d-inline",as:"button",ref:s,inline:!0,muted:!0,onClick:()=>d(!0),children:"Give feedback"}),a[2]=t):t=a[2],a[3]!==l||a[4]!==u||a[5]!==m?(n=l&&(0,o.jsx)(eh,{feedbackOptions:u,onSubmit:m,onClose:()=>d(!1),returnFocusRef:s,precheckOther:!0}),a[3]=l,a[4]=u,a[5]=m,a[6]=n):n=a[6],a[7]!==n?(i=(0,o.jsxs)(o.Fragment,{children:[t,n]}),a[7]=n,a[8]=i):i=a[8],i}:function(){let e=(0,b.useRef)(null),{mutate:t}=eb(),[n,i]=(0,b.useState)(!1),a=(0,k.xW)().changeGroupFeedbackOptions;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(A.A,{className:"d-inline",as:"button",ref:e,inline:!0,muted:!0,onClick:()=>i(!0),children:"Give feedback"}),n&&(0,o.jsx)(eh,{feedbackOptions:a,onSubmit:e=>{t(e),i(!1)},onClose:()=>i(!1),returnFocusRef:e,precheckOther:!0})]})},eF=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(20),{group:d,activeGroupId:u,isListCollapsed:m,onSelectGroup:h,onClickGroupWhenCollapsed:f}=e,{sendPullRequestAnalyticsEvent:p}=(0,es.q)(),g=(0,b.useRef)(null);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:g,mouseRowRef:g},l[0]=t):t=l[0];let y=(0,M.Z)(t);l[1]!==d.id||l[2]!==h||l[3]!==p?(n=()=>{p("groups_list.select_group","GROUPS_LIST_ITEM"),h(d.id)},l[1]=d.id,l[2]=h,l[3]=p,l[4]=n):n=l[4];let x=n,j=u===d.id;if(m&&!j)return null;let w=`${d.name}-${m?"collapsed":"expanded"}`,_=m?void 0:x;l[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,v.$)(ei,"PRIVATE_TreeView-item-content-text"),l[5]=i):i=l[5],l[6]!==d.name?(a=(0,o.jsx)("div",{className:i,children:d.name}),l[6]=d.name,l[7]=a):a=l[7],l[8]!==m||l[9]!==f?(s=m?(0,o.jsx)(C.l.TrailingAction,{as:"button",label:"Clear active group",icon:T.XIcon,onClick:e=>{e.preventDefault(),e.stopPropagation(),f()}}):null,l[8]=m,l[9]=f,l[10]=s):s=l[10],l[11]!==j||l[12]!==w||l[13]!==_||l[14]!==a||l[15]!==s?(r=(0,o.jsxs)(C.l.Item,{active:j,onSelect:_,ref:g,children:[a,s]},w),l[11]=j,l[12]=w,l[13]=_,l[14]=a,l[15]=s,l[16]=r):r=l[16];let N=r;if(y){let e;return l[17]!==d.name||l[18]!==N?(e=(0,o.jsx)(E.m,{text:d.name,direction:"ne",children:N}),l[17]=d.name,l[18]=N,l[19]=e):e=l[19],e}return N}:function({group:e,activeGroupId:t,isListCollapsed:n,onSelectGroup:i,onClickGroupWhenCollapsed:a}){let{sendPullRequestAnalyticsEvent:s}=(0,es.q)(),r=(0,b.useRef)(null),l=(0,M.Z)({focusRowRef:r,mouseRowRef:r}),d=t===e.id;if(n&&!d)return null;let c=(0,o.jsxs)(C.l.Item,{active:d,onSelect:n?void 0:()=>{s("groups_list.select_group","GROUPS_LIST_ITEM"),i(e.id)},ref:r,children:[(0,o.jsx)("div",{className:(0,v.$)(ei,"PRIVATE_TreeView-item-content-text"),children:e.name}),n?(0,o.jsx)(C.l.TrailingAction,{as:"button",label:"Clear active group",icon:T.XIcon,onClick:e=>{e.preventDefault(),e.stopPropagation(),a()}}):null]},`${e.name}-${n?"collapsed":"expanded"}`);return l?(0,o.jsx)(E.m,{text:e.name,direction:"ne",children:c}):c};function eM(e){return`GroupsListIsCollapsed_${e}`}function e$(e){let t=(0,eA.A)("localStorage"),[n,i]=(0,b.useState)(!1),{sendPullRequestAnalyticsEvent:a}=(0,es.q)();return(0,b.useEffect)(()=>{let n=t.getItem(eM(e));null!==n&&i(JSON.parse(n))},[]),{isCollapsed:n,handleToggleCollapsed:()=>{let s=!n;$.cg?.requestAnimationFrame(()=>{t.setItem(eM(e),JSON.stringify(s))}),i(()=>s),a("groups_list.toggle_collapse","GROUPS_LIST_TOGGLE",{is_collapsed:s})}}}try{eR.displayName||(eR.displayName="GroupsList")}catch{}try{eP.displayName||(eP.displayName="FeedbackButton")}catch{}try{eF.displayName||(eF.displayName="GroupItem")}catch{}let eB="PullRequestFileTree-module__sidebar--A_ZKx",eV="PullRequestFileTree-module__FileTreeScrollable--tm_BE",eU="pr-file-tree",eq=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,p,g=(0,c.c)(35),{className:y,fileFilter:x,filteredDiffs:j,onFileSelected:w,onSetFilterState:C,allowPullRequestGroups:_}=e,N=void 0!==_&&_,S=(0,k.iY)(),I=(0,k.YL)(),L=(0,k.ww)(),D=(0,k.Fl)(),T=(0,k.WA)(),{sendChangeGroupsPresentedEvent:E}=er();g[0]!==D?(t=D&&!eI(D.state),g[0]=D,g[1]=t):t=g[1];let A=t,R=(0,k.TV)();g[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,f.G7)("hide_groups_list_for_few_groups"),g[2]=n):n=g[2];let O=n&&("TOO_FEW_GROUPS"===R||"DIFF_TOO_SMALL"===R||"NOT_GENERATED_YET"===R);return g[3]!==N||g[4]!==S.length||g[5]!==L||g[6]!==E||g[7]!==T?(i=()=>{N&&S.length>0&&!L&&!T&&E({isErrorState:!1,userPreferenceDisabled:!0,hasGroups:!0})},a=[N,L,T,E,S.length],g[3]=N,g[4]=S.length,g[5]=L,g[6]=E,g[7]=T,g[8]=i,g[9]=a):(i=g[8],a=g[9]),(0,b.useEffect)(i,a),g[10]!==I||g[11]!==N||g[12]!==S||g[13]!==L||g[14]!==A||g[15]!==C||g[16]!==O||g[17]!==T?(s=N&&!L&&T&&!O&&(0,o.jsx)(eR,{activeGroupId:I,groups:S,onClearActiveGroup:()=>{C({activeChangeGroupId:void 0})},onSelectGroup:e=>{C({activeChangeGroupId:e})},isLoadingState:A||!1}),g[10]=I,g[11]=N,g[12]=S,g[13]=L,g[14]=A,g[15]=C,g[16]=O,g[17]=T,g[18]=s):s=g[18],g[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("span",{children:"File tree failed to load."}),g[19]=r):r=g[19],g[20]!==y?(l=(0,v.$)("d-flex flex-column min-height-0",y),g[20]=y,g[21]=l):l=g[21],g[22]!==x?(d=(0,o.jsx)("div",{className:"pb-3 pr-lg-3",children:x}),g[22]=x,g[23]=d):d=g[23],g[24]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("h2",{className:"sr-only",children:"File tree"}),g[24]=u):u=g[24],g[25]!==j||g[26]!==w?(m=(0,o.jsxs)("div",{className:eV,children:[u,(0,o.jsx)(K,{diffs:j,fileNodeRenderer:eH,sortByDiffOrder:!0,onSelect:w,className:"pr-lg-3"})]}),g[25]=j,g[26]=w,g[27]=m):m=g[27],g[28]!==m||g[29]!==l||g[30]!==d?(h=(0,o.jsx)(Y.t,{fallback:r,children:(0,o.jsxs)("div",{className:l,id:eU,children:[d,m]})}),g[28]=m,g[29]=l,g[30]=d,g[31]=h):h=g[31],g[32]!==h||g[33]!==s?(p=(0,o.jsxs)("div",{className:"d-flex flex-column height-fit",children:[s,h]}),g[32]=h,g[33]=s,g[34]=p):p=g[34],p}:function({className:e,fileFilter:t,filteredDiffs:n,onFileSelected:i,onSetFilterState:a,allowPullRequestGroups:s=!1}){let r=(0,b.useCallback)(e=>(0,o.jsx)(eG,{...e},e.file.filePath),[]),l=(0,k.iY)(),d=(0,k.YL)(),c=(0,k.ww)(),u=(0,k.Fl)(),m=(0,k.WA)(),{sendChangeGroupsPresentedEvent:h}=er(),p=u&&!eI(u.state),g=(0,k.TV)(),y=(0,f.G7)("hide_groups_list_for_few_groups");return(0,b.useEffect)(()=>{s&&l.length>0&&!c&&!m&&h({isErrorState:!1,userPreferenceDisabled:!0,hasGroups:!0})},[s,c,m,h,l.length]),(0,o.jsxs)("div",{className:"d-flex flex-column height-fit",children:[s&&!c&&m&&!(y&&("TOO_FEW_GROUPS"===g||"DIFF_TOO_SMALL"===g||"NOT_GENERATED_YET"===g))&&(0,o.jsx)(eR,{activeGroupId:d,groups:l,onClearActiveGroup:()=>{a({activeChangeGroupId:void 0})},onSelectGroup:e=>{a({activeChangeGroupId:e})},isLoadingState:p||!1}),(0,o.jsx)(Y.t,{fallback:(0,o.jsx)("span",{children:"File tree failed to load."}),children:(0,o.jsxs)("div",{className:(0,v.$)("d-flex flex-column min-height-0",e),id:eU,children:[(0,o.jsx)("div",{className:"pb-3 pr-lg-3",children:t}),(0,o.jsxs)("div",{className:eV,children:[(0,o.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,o.jsx)(K,{diffs:n,fileNodeRenderer:r,sortByDiffOrder:!0,onSelect:i,className:"pr-lg-3"})]})]})})]})};function eH(e){return(0,o.jsx)(eG,{...e},e.file.filePath)}let eG=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(14);l[0]!==e?({file:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t.diff?(i=Object.values(t.diff?.markersMap??{}).flatMap(eW),l[3]=t.diff,l[4]=i):i=l[4];let d=i,u=(0,k.Qb)(d);l[5]!==u||l[6]!==t.diff?(a={...t.diff,totalCommentsCount:u},l[5]=u,l[6]=t.diff,l[7]=a):a=l[7],l[8]!==t||l[9]!==a?(s={...t,diff:a},l[8]=t,l[9]=a,l[10]=s):s=l[10];let m=s;return l[11]!==m||l[12]!==n?(r=(0,o.jsx)(q,{file:m,...n}),l[11]=m,l[12]=n,l[13]=r):r=l[13],r}:function({file:e,...t}){let n=(0,b.useMemo)(()=>Object.values(e.diff?.markersMap??{}).flatMap(e=>e.threads.map(e=>e.id)),[e.diff]),i=(0,k.Qb)(n),a=(0,b.useMemo)(()=>({...e,diff:{...e.diff,totalCommentsCount:i}}),[e,i]);return(0,o.jsx)(q,{file:a,...t})});try{eq.displayName||(eq.displayName="PullRequestFileTree")}catch{}try{eG.displayName||(eG.displayName="PullRequestFile")}catch{}function eK(e){return e.id}function eW(e){return e.threads.map(eK)}var ez=n(11680),eQ=n(25407);let eZ=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(17),{pageLimits:r,repository:l,urls:d,isDiffVirtualizationEnabled:u}=e,m=r.filesLimitExceeded||r.reviewThreadsLimitExceeded||r.annotationsLimitExceeded;s[0]!==r.annotationsLimit||s[1]!==r.annotationsLimitExceeded||s[2]!==r.filesLimit||s[3]!==r.filesLimitExceeded||s[4]!==r.reviewThreadsLimit||s[5]!==r.reviewThreadsLimitExceeded?(t=()=>{let e=[];r.filesLimitExceeded&&e.push(`${r.filesLimit} files`),r.reviewThreadsLimitExceeded&&e.push(`${r.reviewThreadsLimit} comments`),r.annotationsLimitExceeded&&e.push(`${r.annotationsLimit} alerts`);let t="";return 1===e.length?t=`${e[0]}`:2===e.length?t=`${e[0]} and ${e[1]}`:3===e.length&&(t=`${e[0]}, ${e[1]}, and ${e[2]}`),"Only the first "+t+" are currently being shown."},s[0]=r.annotationsLimit,s[1]=r.annotationsLimitExceeded,s[2]=r.filesLimit,s[3]=r.filesLimitExceeded,s[4]=r.reviewThreadsLimit,s[5]=r.reviewThreadsLimitExceeded,s[6]=t):t=s[6];let h=t;s[7]!==l?(n=async function(){let e=new FormData;e.append("feature_name","prx_files"),await (0,eS.DI)((0,eQ.ZD8)({repo:l}),{body:e,method:"POST"})},s[7]=l,s[8]=n):n=s[8];let f=n;s[9]!==f||s[10]!==u||s[11]!==h||s[12]!==m||s[13]!==d.files?(i=function(){return!m&&u?(0,o.jsxs)(o.Fragment,{children:["Virtualization has been enabled to improve performance."," ",(0,o.jsx)(A.A,{inline:!0,href:`${d.files}?new_files_changed=false`,onClick:f,rel:"noreferrer",children:"Switch back"})," ","to the classic page."]}):(0,o.jsxs)(o.Fragment,{children:[u&&(0,o.jsxs)("span",{children:["Virtualization has been enabled to improve performance."," "]}),(0,o.jsxs)("span",{children:[h()," To see more,"," ",(0,o.jsx)(A.A,{inline:!0,href:`${d.files}?new_files_changed=false`,onClick:f,rel:"noreferrer",children:"switch back"})," ","to the classic page."]})]})},s[9]=f,s[10]=u,s[11]=h,s[12]=m,s[13]=d.files,s[14]=i):i=s[14];let p=i;return m||u?(s[15]!==p?(a=(0,o.jsx)(ez.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:p(),className:"mb-3"}),s[15]=p,s[16]=a):a=s[16],a):null}:function({pageLimits:e,repository:t,urls:n,isDiffVirtualizationEnabled:i}){let a,s,r,l=e.filesLimitExceeded||e.reviewThreadsLimitExceeded||e.annotationsLimitExceeded;async function d(){let e=new FormData;e.append("feature_name","prx_files"),await (0,eS.DI)((0,eQ.ZD8)({repo:t}),{body:e,method:"POST"})}return l||i?(0,o.jsx)(ez.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:(r="Virtualization has been enabled to improve performance.",!l&&i?(0,o.jsxs)(o.Fragment,{children:[r," ",(0,o.jsx)(A.A,{inline:!0,href:`${n.files}?new_files_changed=false`,onClick:d,rel:"noreferrer",children:"Switch back"})," ","to the classic page."]}):(0,o.jsxs)(o.Fragment,{children:[i&&(0,o.jsxs)("span",{children:[r," "]}),(0,o.jsxs)("span",{children:[(a=[],e.filesLimitExceeded&&a.push(`${e.filesLimit} files`),e.reviewThreadsLimitExceeded&&a.push(`${e.reviewThreadsLimit} comments`),e.annotationsLimitExceeded&&a.push(`${e.annotationsLimit} alerts`),s="",1===a.length?s=`${a[0]}`:2===a.length?s=`${a[0]} and ${a[1]}`:3===a.length&&(s=`${a[0]}, ${a[1]}, and ${a[2]}`),"Only the first "+s+" are currently being shown.")," To see more,"," ",(0,o.jsx)(A.A,{inline:!0,href:`${n.files}?new_files_changed=false`,onClick:d,rel:"noreferrer",children:"switch back"})," ","to the classic page."]})]})),className:"mb-3"}):null};try{eZ.displayName||(eZ.displayName="PageLimitsBanner")}catch{}let eJ="ViewedFileProgress-module__ProgressContainer--ZQ1e8",eY="ViewedFileProgress-module__FilesCountText--q4rKx",eX="ViewedFileProgress-module__ViewedText--vvFsM",e0=(0,d.Z6)()?e=>{let t,n,i,a,s=(0,c.c)(5),{progress:r}=e;s[0]===Symbol.for("react.memo_cache_sentinel")?(t={transform:"rotate(-90deg)"},s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--borderColor-default, var(--color-border-default))",strokeWidth:"2"}),s[1]=n):n=s[1];let l=38-38*r;return s[2]===Symbol.for("react.memo_cache_sentinel")?(i={transition:"stroke-dashoffset 0.35s"},s[2]=i):i=s[2],s[3]!==l?(a=(0,o.jsxs)("svg",{"data-circumference":"38",height:"16",role:"presentation",style:t,width:"16",children:[n,(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--fgColor-done, var(--color-done-fg))",strokeDasharray:38,strokeDashoffset:l,strokeLinecap:"round",strokeWidth:"2",style:i})]}),s[3]=l,s[4]=a):a=s[4],a}:({progress:e})=>(0,o.jsxs)("svg",{"data-circumference":"38",height:"16",role:"presentation",style:{transform:"rotate(-90deg)"},width:"16",children:[(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--borderColor-default, var(--color-border-default))",strokeWidth:"2"}),(0,o.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--fgColor-done, var(--color-done-fg))",strokeDasharray:38,strokeDashoffset:38-38*e,strokeLinecap:"round",strokeWidth:"2",style:{transition:"stroke-dashoffset 0.35s"}})]}),e1=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(14),{totalFilesCount:u}=e,m=(0,k.gi)();if(0===u)return null;let h=(m??0)/u||0;return d[0]!==h?(t=(0,o.jsx)(e0,{progress:h}),d[0]=h,d[1]=t):t=d[1],d[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,v.$)("ml-1",eJ),d[2]=n):n=d[2],d[3]!==m?(i=(0,o.jsx)("span",{className:eY,children:m}),d[3]=m,d[4]=i):i=d[4],d[5]!==u?(a=(0,o.jsx)("span",{className:eY,children:u}),d[5]=u,d[6]=a):a=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)("span",{className:eX,children:"viewed"}),d[7]=s):s=d[7],d[8]!==i||d[9]!==a?(r=(0,o.jsxs)("span",{className:n,children:[i," /"," ",a," ",s]}),d[8]=i,d[9]=a,d[10]=r):r=d[10],d[11]!==t||d[12]!==r?(l=(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[t,r]}),d[11]=t,d[12]=r,d[13]=l):l=d[13],l}:function({totalFilesCount:e}){let t=(0,k.gi)();return 0===e?null:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[(0,o.jsx)(e0,{progress:(t??0)/e||0}),(0,o.jsxs)("span",{className:(0,v.$)("ml-1",eJ),children:[(0,o.jsx)("span",{className:eY,children:t})," /"," ",(0,o.jsx)("span",{className:eY,children:e})," ",(0,o.jsx)("span",{className:eX,children:"viewed"})]})]})};try{e0.displayName||(e0.displayName="ProgressIcon")}catch{}try{e1.displayName||(e1.displayName="ViewedFileProgress")}catch{}function e2(e){let t=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),n=document.querySelector(`#${e} div[role="dialog"]`);(t||n)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}var e3=n(30093),e4=n(94236),e5=n(77430);function e6(e,t){return new Set([...e.filter(e=>{let{thread:n,previewInfo:i}=e;return function(e,t){let{filterText:n,showResolvedThreads:i}=t;if(!i&&e.isResolved||!t.showOutdatedThreads&&e.isOutdated)return!1;if(n){let t=n.toLowerCase();if(!e.authorLogin.toLowerCase().includes(t)&&!e.body.toLowerCase().includes(t)&&!e.path.toLowerCase().includes(t))return!1}return!t.selectedAuthor||e.authorLogin===t.selectedAuthor}({authorLogin:i.firstComment?.author?.login??"",body:i.firstComment?.body??"",id:i.threadId,isResolved:n?.isResolved??!1,isOutdated:n?.isOutdated??!1,path:i.path},t)}).map(e=>e.previewInfo.threadId??"")])}let e7={filterText:"",showResolvedThreads:!0,showOutdatedThreads:!0},e8=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x=(0,c.c)(42),{authorList:b,className:j,filterState:w,onFilterStateChange:_}=e;x[0]!==w||x[1]!==_?(t=e=>{_({...w,filterText:e})},x[0]=w,x[1]=_,x[2]=t):t=x[2];let N=t;x[3]!==w||x[4]!==_?(n=()=>{_({...w,showResolvedThreads:!w.showResolvedThreads})},x[3]=w,x[4]=_,x[5]=n):n=x[5];let S=n;x[6]!==w||x[7]!==_?(i=()=>{_({...w,showOutdatedThreads:!w.showOutdatedThreads})},x[6]=w,x[7]=_,x[8]=i):i=x[8];let I=i;x[9]!==w||x[10]!==_?(a=e=>{if(w.selectedAuthor===e)return _({...w,selectedAuthor:void 0});_({...w,selectedAuthor:e})},x[9]=w,x[10]=_,x[11]=a):a=x[11];let k=a;return x[12]!==j?(s=(0,v.$)("d-flex flex-row gap-2 flex-nowrap",j),x[12]=j,x[13]=s):s=x[13],x[14]!==N?(r=e=>N(e.target.value),x[14]=N,x[15]=r):r=x[15],x[16]!==w.filterText||x[17]!==r?(l=(0,o.jsx)(e3.A,{block:!0,"aria-label":"Filter comments",leadingVisual:T.SearchIcon,placeholder:"Filter comments",value:w.filterText,onChange:r}),x[16]=w.filterText,x[17]=r,x[18]=l):l=x[18],x[19]===Symbol.for("react.memo_cache_sentinel")?(d=(0,o.jsx)(e4.W.Anchor,{children:(0,o.jsx)(em.Q,{"aria-label":"Additional comment filters",className:"flex-shink-0",leadingVisual:T.FilterIcon,trailingAction:T.TriangleDownIcon,children:"Filter"})}),x[19]=d):d=x[19],x[20]!==S?(u=()=>S(),x[20]=S,x[21]=u):u=x[21],x[22]!==w.showResolvedThreads||x[23]!==u?(m=(0,o.jsx)(C.l.Item,{selected:w.showResolvedThreads,onSelect:u,children:"Show resolved comments"}),x[22]=w.showResolvedThreads,x[23]=u,x[24]=m):m=x[24],x[25]!==I?(h=()=>I(),x[25]=I,x[26]=h):h=x[26],x[27]!==w.showOutdatedThreads||x[28]!==h?(f=(0,o.jsx)(C.l.Item,{selected:w.showOutdatedThreads,onSelect:h,children:"Show outdated comments"}),x[27]=w.showOutdatedThreads,x[28]=h,x[29]=f):f=x[29],x[30]!==b||x[31]!==w.selectedAuthor||x[32]!==k?(p=b.length>1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.l.Divider,{}),(0,o.jsxs)(C.l.Group,{children:[(0,o.jsx)(C.l.GroupHeading,{children:"Filter by"}),b.map(e=>(0,o.jsxs)(C.l.Item,{selected:w.selectedAuthor===e.login,onSelect:()=>k(e.login),children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(e5.r,{src:e.avatarUrl})}),e.login]},e.login))]})]}),x[30]=b,x[31]=w.selectedAuthor,x[32]=k,x[33]=p):p=x[33],x[34]!==m||x[35]!==f||x[36]!==p?(g=(0,o.jsxs)(e4.W,{children:[d,(0,o.jsx)(e4.W.Overlay,{width:"small",children:(0,o.jsxs)(C.l,{selectionVariant:"single",children:[m,f,p]})})]}),x[34]=m,x[35]=f,x[36]=p,x[37]=g):g=x[37],x[38]!==g||x[39]!==s||x[40]!==l?(y=(0,o.jsxs)("div",{className:s,children:[l,g]}),x[38]=g,x[39]=s,x[40]=l,x[41]=y):y=x[41],y}:function({authorList:e,className:t,filterState:n,onFilterStateChange:i}){return(0,o.jsxs)("div",{className:(0,v.$)("d-flex flex-row gap-2 flex-nowrap",t),children:[(0,o.jsx)(e3.A,{block:!0,"aria-label":"Filter comments",leadingVisual:T.SearchIcon,placeholder:"Filter comments",value:n.filterText,onChange:e=>{var t;return t=e.target.value,void i({...n,filterText:t})}}),(0,o.jsxs)(e4.W,{children:[(0,o.jsx)(e4.W.Anchor,{children:(0,o.jsx)(em.Q,{"aria-label":"Additional comment filters",className:"flex-shink-0",leadingVisual:T.FilterIcon,trailingAction:T.TriangleDownIcon,children:"Filter"})}),(0,o.jsx)(e4.W.Overlay,{width:"small",children:(0,o.jsxs)(C.l,{selectionVariant:"single",children:[(0,o.jsx)(C.l.Item,{selected:n.showResolvedThreads,onSelect:()=>void i({...n,showResolvedThreads:!n.showResolvedThreads}),children:"Show resolved comments"}),(0,o.jsx)(C.l.Item,{selected:n.showOutdatedThreads,onSelect:()=>void i({...n,showOutdatedThreads:!n.showOutdatedThreads}),children:"Show outdated comments"}),e.length>1&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.l.Divider,{}),(0,o.jsxs)(C.l.Group,{children:[(0,o.jsx)(C.l.GroupHeading,{children:"Filter by"}),e.map(e=>(0,o.jsxs)(C.l.Item,{selected:n.selectedAuthor===e.login,onSelect:()=>(e=>{if(n.selectedAuthor===e)return i({...n,selectedAuthor:void 0});i({...n,selectedAuthor:e})})(e.login),children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(e5.r,{src:e.avatarUrl})}),e.login]},e.login))]})]})]})})]})]})};try{e8.displayName||(e8.displayName="CommentsFilter")}catch{}var e9=n(61219),te=n(98091),tt=n(58615),tn=n(72511),ti=n(26607);let ta="ConversationHeader-module__file-name-overflow--Ymb0e",ts=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x=(0,c.c)(47),{firstCommentId:j,isCollapsed:w,isOutdated:C,isResolved:_,line:N,onToggleCollapsed:S,onNavigateToDiffComment:I,path:k,rightSideContent:L,threadId:D,headingLevel:R}=e,O=void 0===R?"h3":R;x[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eA.A)("localStorage"),x[0]=t):t=x[0];let P=t,[F,M]=(0,b.useState)(w);x[1]!==D?(n=()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${D}`);null!==e&&M(JSON.parse(e))},x[1]=D,x[2]=n):n=x[2],x[3]!==F||x[4]!==D?(i=[F,D],x[3]=F,x[4]=D,x[5]=i):i=x[5],(0,b.useEffect)(n,i),x[6]!==F||x[7]!==S||x[8]!==D?(a=()=>{P.setItem(`reviewThreadIsCollapsed_${D}`,JSON.stringify(!F)),M(tr),S()},x[6]=F,x[7]=S,x[8]=D,x[9]=a):a=x[9];let $=a,B=F&&"rounded-2",V=F&&"border-bottom-0";x[10]!==B||x[11]!==V?(s=(0,v.$)("d-flex flex-row flex-items-center px-2 py-1 bgColor-muted rounded-top-2 border-bottom",B,V),x[10]=B,x[11]=V,x[12]=s):s=x[12];let U=F?"Open review comment":"Close review comment",q=F?T.ChevronRightIcon:T.ChevronDownIcon;x[13]!==$||x[14]!==q||x[15]!==U?(r=(0,o.jsx)(el.K,{"aria-label":U,icon:q,size:"small",variant:"invisible",onClick:$}),x[13]=$,x[14]=q,x[15]=U,x[16]=r):r=x[16],x[17]===Symbol.for("react.memo_cache_sentinel")?(l=(0,v.$)(ta,"d-inline text-mono no-wrap overflow-hidden direction-rtl fgColor-default"),x[17]=l):l=x[17];let H=`#r${j}`;x[18]!==I||x[19]!==k||x[20]!==H?(d=(0,o.jsxs)(A.A,{className:l,onClick:I,href:H,muted:!0,children:["\u200E",k,"\u200E"]}),x[18]=I,x[19]=k,x[20]=H,x[21]=d):d=x[21],x[22]!==k||x[23]!==d?(u=(0,o.jsx)(E.m,{direction:"n",text:k,type:"label",children:d}),x[22]=k,x[23]=d,x[24]=u):u=x[24],x[25]!==N?(m=!!N&&(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal no-wrap ml-2",children:["Line ",N]}),x[25]=N,x[26]=m):m=x[26],x[27]!==O||x[28]!==u||x[29]!==m?(h=(0,o.jsxs)(X.A,{as:O,className:"d-flex flex-items-center flex-1 min-width-0 mr-2 ml-1 f6 text-semibold",children:[u,m]}),x[27]=O,x[28]=u,x[29]=m,x[30]=h):h=x[30],x[31]!==_?(f=_&&(0,o.jsx)(ti.A,{size:"large",className:"mx-1",variant:"secondary",children:"Resolved"}),x[31]=_,x[32]=f):f=x[32],x[33]!==C||x[34]!==_?(p=C&&!_&&(0,o.jsx)(ti.A,{size:"large",className:"mx-1",variant:"attention",children:"Outdated"}),x[33]=C,x[34]=_,x[35]=p):p=x[35];let G=`#r${j}`;return x[36]!==I||x[37]!==G?(g=(0,o.jsx)(el.K,{as:"a","aria-label":"Jump to the comment in the diff",tooltipDirection:"se",icon:T.FileSymlinkFileIcon,variant:"invisible",href:G,onClick:I}),x[36]=I,x[37]=G,x[38]=g):g=x[38],x[39]!==L||x[40]!==r||x[41]!==h||x[42]!==f||x[43]!==p||x[44]!==g||x[45]!==s?(y=(0,o.jsxs)("div",{className:s,children:[r,h,f,p,g,L]}),x[39]=L,x[40]=r,x[41]=h,x[42]=f,x[43]=p,x[44]=g,x[45]=s,x[46]=y):y=x[46],y}:function({firstCommentId:e,isCollapsed:t,isOutdated:n,isResolved:i,line:a,onToggleCollapsed:s,onNavigateToDiffComment:r,path:l,rightSideContent:d,threadId:c,headingLevel:u="h3"}){let m=(0,eA.A)("localStorage"),[h,f]=(0,b.useState)(t);return(0,b.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${c}`);null!==e&&f(JSON.parse(e))},[h,c]),(0,o.jsxs)("div",{className:(0,v.$)("d-flex flex-row flex-items-center px-2 py-1 bgColor-muted rounded-top-2 border-bottom",h&&"rounded-2",h&&"border-bottom-0"),children:[(0,o.jsx)(el.K,{"aria-label":h?"Open review comment":"Close review comment",icon:h?T.ChevronRightIcon:T.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{m.setItem(`reviewThreadIsCollapsed_${c}`,JSON.stringify(!h)),f(e=>!e),s()}}),(0,o.jsxs)(X.A,{as:u,className:"d-flex flex-items-center flex-1 min-width-0 mr-2 ml-1 f6 text-semibold",children:[(0,o.jsx)(E.m,{direction:"n",text:l,type:"label",children:(0,o.jsxs)(A.A,{className:(0,v.$)(ta,"d-inline text-mono no-wrap overflow-hidden direction-rtl fgColor-default"),onClick:r,href:`#r${e}`,muted:!0,children:["\u200E",l,"\u200E"]})}),!!a&&(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal no-wrap ml-2",children:["Line ",a]})]}),i&&(0,o.jsx)(ti.A,{size:"large",className:"mx-1",variant:"secondary",children:"Resolved"}),n&&!i&&(0,o.jsx)(ti.A,{size:"large",className:"mx-1",variant:"attention",children:"Outdated"}),(0,o.jsx)(el.K,{as:"a","aria-label":"Jump to the comment in the diff",tooltipDirection:"se",icon:T.FileSymlinkFileIcon,variant:"invisible",href:`#r${e}`,onClick:r}),d]})};function tr(e){return!e}try{ts.displayName||(ts.displayName="ConversationHeader")}catch{}let tl="ThreadHeader-module__ThreadHeaderIconButton--RGjVM";var to=n(97695),td=n(39698),tc=n(21067);let tu=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(35),{firstCommentId:u,isCollapsed:m,onToggleCollapsed:h,onNavigateToDiffComment:f,threadPreview:p,headingLevel:g,isResolved:y,isOutdated:x,lineKey:v}=e,{sendPullRequestAnalyticsEvent:j}=(0,es.q)(),[w,C]=(0,b.useState)(void 0),_=p.previewInfo,{line:N}=_;d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,tc.M3)(),d[0]=t):t=d[0];let S=t,{mutate:I}=(0,to.H)(_.path,v);d[1]!==m||d[2]!==y||d[3]!==h||d[4]!==_.threadId||d[5]!==I?(n=()=>{y||I({threadId:_.threadId},{onError:()=>C("Failed to resolve thread"),onSuccess:()=>{m||h()}})},d[1]=m,d[2]=y,d[3]=h,d[4]=_.threadId,d[5]=I,d[6]=n):n=d[6];let k=n,{mutate:L}=(0,td.i)(_.path,v);d[7]!==m||d[8]!==y||d[9]!==h||d[10]!==j||d[11]!==p||d[12]!==L?(i=async()=>{!p||y&&(L({threadId:p.previewInfo.threadId},{onError:()=>C("Failed to unresolve thread"),onSuccess:()=>{m&&h()}}),j("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},d[7]=m,d[8]=y,d[9]=h,d[10]=j,d[11]=p,d[12]=L,d[13]=i):i=d[13];let D=i;return d[14]!==k||d[15]!==D||d[16]!==y?(a=S?(0,o.jsx)(el.K,{"aria-label":y?"Unresolve conversation":"Resolve conversation",tooltipDirection:"sw",icon:y?T.CheckCircleFillIcon:T.CheckCircleIcon,"data-thread-resolved":y,className:tl,variant:"invisible",onClick:y?D:k}):null,d[14]=k,d[15]=D,d[16]=y,d[17]=a):a=d[17],d[18]!==u||d[19]!==g||d[20]!==m||d[21]!==x||d[22]!==y||d[23]!==N||d[24]!==f||d[25]!==h||d[26]!==_.path||d[27]!==_.threadId||d[28]!==a?(s=(0,o.jsx)(ts,{firstCommentId:u,isCollapsed:m,isOutdated:x,isResolved:y,line:N,path:_.path,rightSideContent:a,onNavigateToDiffComment:f,onToggleCollapsed:h,threadId:_.threadId,headingLevel:g}),d[18]=u,d[19]=g,d[20]=m,d[21]=x,d[22]=y,d[23]=N,d[24]=f,d[25]=h,d[26]=_.path,d[27]=_.threadId,d[28]=a,d[29]=s):s=d[29],d[30]!==w?(r=w&&(0,o.jsxs)(tn.A,{variant:"danger",className:"m-2",children:[(0,o.jsx)(T.StopIcon,{className:"mr-2"}),w]}),d[30]=w,d[31]=r):r=d[31],d[32]!==s||d[33]!==r?(l=(0,o.jsxs)(o.Fragment,{children:[s,r]}),d[32]=s,d[33]=r,d[34]=l):l=d[34],l}:function({firstCommentId:e,isCollapsed:t,onToggleCollapsed:n,onNavigateToDiffComment:i,threadPreview:a,headingLevel:s,isResolved:r,isOutdated:l,lineKey:d}){let{sendPullRequestAnalyticsEvent:c}=(0,es.q)(),[u,m]=(0,b.useState)(void 0),h=a.previewInfo,{line:f}=h,p=(0,tc.M3)(),{mutate:g}=(0,to.H)(h.path,d),{mutate:y}=(0,td.i)(h.path,d),x=async()=>{!a||r&&(y({threadId:a.previewInfo.threadId},{onError:()=>m("Failed to unresolve thread"),onSuccess:()=>{t&&n()}}),c("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ts,{firstCommentId:e,isCollapsed:t,isOutdated:l,isResolved:r,line:f,path:h.path,rightSideContent:p?(0,o.jsx)(el.K,{"aria-label":r?"Unresolve conversation":"Resolve conversation",tooltipDirection:"sw",icon:r?T.CheckCircleFillIcon:T.CheckCircleIcon,"data-thread-resolved":r,className:tl,variant:"invisible",onClick:r?x:()=>{r||g({threadId:h.threadId},{onError:()=>m("Failed to resolve thread"),onSuccess:()=>{t||n()}})}}):null,onNavigateToDiffComment:i,onToggleCollapsed:n,threadId:h.threadId,headingLevel:s}),u&&(0,o.jsxs)(tn.A,{variant:"danger",className:"m-2",children:[(0,o.jsx)(T.StopIcon,{className:"mr-2"}),u]})]})};try{tu.displayName||(tu.displayName="ThreadHeader")}catch{}var tm=n(24494);let th=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(4),{commentAuthors:a}=e;return a.length<1?null:(i[0]!==a?(t=a.map(tf),i[0]=a,i[1]=t):t=i[1],i[2]!==t?(n=(0,o.jsx)(tm.A,{children:t}),i[2]=t,i[3]=n):n=i[3],n)}:function({commentAuthors:e}){return e.length<1?null:(0,o.jsx)(tm.A,{children:e.map(({login:e,avatarUrl:t})=>(0,o.jsx)(e5.r,{alt:e,size:18,src:t},e))})};function tf(e){let{login:t,avatarUrl:n}=e;return(0,o.jsx)(e5.r,{alt:t,size:18,src:n},t)}try{th.displayName||(th.displayName="PreviewAuthors")}catch{}var tp=n(36729),tg=n(73017);let ty="PendingCommentPreview-module__commentBody--hkwI8",tx=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(30),{commentPreview:u,onNavigateToDiffComment:m,tabSize:h}=e,[f,p]=(0,b.useState)(!1),g=u.commentId,{navigateToSelectedComment:y}=(0,k.Lh)();d[0]!==u.commentsData?(t=u.commentsData??{comments:[]},d[0]=u.commentsData,d[1]=t):t=d[1],d[2]!==g||d[3]!==t?(n=tv(g,t),d[2]=g,d[3]=t,d[4]=n):n=d[4];let x=n,j=u.threadPreviewComments.length,w=`${j} previous ${1===j?"comment":"comments"}`;d[5]!==g||d[6]!==y||d[7]!==m?(i=()=>{let e=parseInt(g);y(e);let t=window.location.pathname+window.location.search;(0,S.kd)(`${t}#r${e}`),m(g)},d[5]=g,d[6]=y,d[7]=m,d[8]=i):i=d[8];let C=i,_=u.isOutdated||!1,N=u.isResolved||!1,I=u.line,L=u.path;d[9]===Symbol.for("react.memo_cache_sentinel")?(a=()=>p(tj),d[9]=a):a=d[9];let D=u.threadId,E=parseInt(u.commentId);return d[10]!==u.line||d[11]!==u.path||d[12]!==u.threadId||d[13]!==f||d[14]!==C||d[15]!==E||d[16]!==_||d[17]!==N?(s=(0,o.jsx)(ts,{isCollapsed:f,isOutdated:_,isResolved:N,line:I,path:L,onNavigateToDiffComment:C,onToggleCollapsed:a,threadId:D,firstCommentId:E}),d[10]=u.line,d[11]=u.path,d[12]=u.threadId,d[13]=f,d[14]=C,d[15]=E,d[16]=_,d[17]=N,d[18]=s):s=d[18],d[19]!==x||d[20]!==u||d[21]!==f||d[22]!==C||d[23]!==j||d[24]!==w||d[25]!==h?(r=!f&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(te.i,{diffTableClassName:"border-0",diffLines:u.subject?.diffLines,className:"m-0 border-0",tabSize:h||4})}),j>0&&(0,o.jsx)("div",{className:"my-2 px-2",children:(0,o.jsx)(em.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:T.ChevronRightIcon,variant:"invisible",onClick:C,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:w}),(0,o.jsx)(th,{commentAuthors:x})]})})}),(0,o.jsx)(tg.$6,{className:(0,v.$)("markdown-body",ty),html:tb(u)})]}),d[19]=x,d[20]=u,d[21]=f,d[22]=C,d[23]=j,d[24]=w,d[25]=h,d[26]=r):r=d[26],d[27]!==s||d[28]!==r?(l=(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[s,r]}),d[27]=s,d[28]=r,d[29]=l):l=d[29],l}:function({commentPreview:e,onNavigateToDiffComment:t,tabSize:n}){let[i,a]=(0,b.useState)(!1),s=e.commentId,{navigateToSelectedComment:r}=(0,k.Lh)(),l=tv(s,e.commentsData??{comments:[]}),d=e.threadPreviewComments.length,c=`${d} previous ${1===d?"comment":"comments"}`,u=(0,b.useCallback)(()=>{let e=parseInt(s);r(e);let n=window.location.pathname+window.location.search;(0,S.kd)(`${n}#r${e}`),t(s)},[s,r,t]);return(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,o.jsx)(ts,{isCollapsed:i,isOutdated:e.isOutdated||!1,isResolved:e.isResolved||!1,line:e.line,path:e.path,onNavigateToDiffComment:u,onToggleCollapsed:()=>a(e=>!e),threadId:e.threadId,firstCommentId:parseInt(e.commentId)}),!i&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(te.i,{diffTableClassName:"border-0",diffLines:e.subject?.diffLines,className:"m-0 border-0",tabSize:n||4})}),d>0&&(0,o.jsx)("div",{className:"my-2 px-2",children:(0,o.jsx)(em.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:T.ChevronRightIcon,variant:"invisible",onClick:u,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:c}),(0,o.jsx)(th,{commentAuthors:l})]})})}),(0,o.jsx)(tg.$6,{className:(0,v.$)("markdown-body",ty),html:tb(e)})]})]})});function tv(e,t){let n=new Set;return(t?.comments??[]).reduce((t,i)=>{if(!i||i.id===e)return t;let a=i.author?.login??"",s=i.author?.avatarUrl??"",r=i.author?.id??"",l=i.author?.url??"";return n.has(a)||(t.push({avatarUrl:s,login:a,id:r,url:l}),n.add(a)),t},[])}function tb(e){let t=(e.commentsData?.comments??[]).find(t=>t&&String(t.databaseId)===e.commentId);return t?.bodyHTML??""}try{tx.displayName||(tx.displayName="PendingCommentPreview")}catch{}function tj(e){return!e}function tw(e){return`panel-thread-collapsed-state-${e}`}let tC=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(39),{onNavigateToDiffComment:d,tabSize:u,threadPreview:m,headingLevel:h}=e,{previewInfo:f}=m,{threadId:p,firstComment:g}=f,y=g?.id,x=f.path,{navigateToSelectedComment:v}=(0,k.Lh)(),b=(0,k.SM)(),j=f.subject?.endDiffSide==="RIGHT"?"R":"L",w=f.subject?.originalEndLine?`${j}${f.subject.originalEndLine}`:tp.zW,C=b(Number(f.threadId),f.path,w),_=C?.isResolved||!1,N=f.isOutdated||!1;l[0]!==g?.databaseId||l[1]!==N||l[2]!==v||l[3]!==d||l[4]!==f.originalDiffPathUri?(t=()=>{let e=g?.databaseId;if(e){if(N&&f.originalDiffPathUri){let e=new URL(f.originalDiffPathUri);e.searchParams.set("new_files_changed","true"),window.location.href=e.toString()}else{v(e);let t=window.location.pathname+window.location.search;(0,S.kd)(`${t}#r${e}`)}d()}},l[0]=g?.databaseId,l[1]=N,l[2]=v,l[3]=d,l[4]=f.originalDiffPathUri,l[5]=t):t=l[5];let I=t;l[6]!==p?(n=tw(p),l[6]=p,l[7]=n):n=l[7];let[L,D]=(0,tt.M)(n,!1),E=f.threadPreviewComments.length,A=0===E?"No replies":`${E} ${1===E?"reply":"replies"}`,R={...C,id:C?.id??"",commentsData:{comments:[]}};if(!g||!R)return null;let O=tv(f.commentId,C?.commentsData??{comments:[]}),P=g?.databaseId;return l[8]!==L||l[9]!==D?(i=()=>D(!L),l[8]=L,l[9]=D,l[10]=i):i=l[10],l[11]!==h||l[12]!==L||l[13]!==N||l[14]!==_||l[15]!==w||l[16]!==I||l[17]!==P||l[18]!==i||l[19]!==m?(a=(0,o.jsx)(tu,{firstCommentId:P,isCollapsed:L,threadPreview:m,onNavigateToDiffComment:I,onToggleCollapsed:i,headingLevel:h,isResolved:_,isOutdated:N,lineKey:w}),l[11]=h,l[12]=L,l[13]=N,l[14]=_,l[15]=w,l[16]=I,l[17]=P,l[18]=i,l[19]=m,l[20]=a):a=l[20],l[21]!==O||l[22]!==y||l[23]!==x||l[24]!==g||l[25]!==L||l[26]!==N||l[27]!==_||l[28]!==w||l[29]!==I||l[30]!==f.originalDiffPathUri||l[31]!==f.subject?.diffLines||l[32]!==A||l[33]!==u||l[34]!==p?(s=!L&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(te.i,{diffTableClassName:"border-0",diffLines:f?.subject?.diffLines,className:"m-0 border-0",tabSize:u||4})}),(0,o.jsx)("div",{children:(0,o.jsx)(e9.U,{lineMarkersKey:w,hideActions:!0,isInlineComment:!1,comment:g,filePath:x,index:0,isAnchorable:!1,isOutdated:N,isThreadResolved:_,threadId:p,originalDiffPathUri:f.originalDiffPathUri,headingLevel:"h3"},y)}),(0,o.jsx)("div",{className:"mb-2 px-2",children:(0,o.jsx)(em.Q,{"aria-label":`View ${A}`,size:"small",trailingVisual:T.ChevronRightIcon,variant:"invisible",onClick:I,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:A}),(0,o.jsx)(th,{commentAuthors:O})]})})})]}),l[21]=O,l[22]=y,l[23]=x,l[24]=g,l[25]=L,l[26]=N,l[27]=_,l[28]=w,l[29]=I,l[30]=f.originalDiffPathUri,l[31]=f.subject?.diffLines,l[32]=A,l[33]=u,l[34]=p,l[35]=s):s=l[35],l[36]!==a||l[37]!==s?(r=(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[a,s]}),l[36]=a,l[37]=s,l[38]=r):r=l[38],r}:function({onNavigateToDiffComment:e,tabSize:t,threadPreview:n,headingLevel:i}){let{previewInfo:a}=n,{threadId:s,firstComment:r}=a,l=r?.id,d=a.path,{navigateToSelectedComment:c}=(0,k.Lh)(),u=(0,k.SM)(),m=a.subject?.endDiffSide==="RIGHT"?"R":"L",h=a.subject?.originalEndLine?`${m}${a.subject.originalEndLine}`:tp.zW,f=u(Number(a.threadId),a.path,h),p=f?.isResolved||!1,g=a.isOutdated||!1,y=()=>{let t=r?.databaseId;if(t){if(g&&a.originalDiffPathUri){let e=new URL(a.originalDiffPathUri);e.searchParams.set("new_files_changed","true"),window.location.href=e.toString()}else{c(t);let e=window.location.pathname+window.location.search;(0,S.kd)(`${e}#r${t}`)}e()}},[x,v]=(0,tt.M)(tw(s),!1),b=a.threadPreviewComments.length,j=0===b?"No replies":`${b} ${1===b?"reply":"replies"}`,w={...f,id:f?.id??"",commentsData:{comments:[]}};if(!r||!w)return null;let C=tv(a.commentId,f?.commentsData??{comments:[]});return(0,o.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,o.jsx)(tu,{firstCommentId:r?.databaseId,isCollapsed:x,threadPreview:n,onNavigateToDiffComment:y,onToggleCollapsed:()=>v(!x),headingLevel:i,isResolved:p,isOutdated:g,lineKey:h}),!x&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,o.jsx)(te.i,{diffTableClassName:"border-0",diffLines:a?.subject?.diffLines,className:"m-0 border-0",tabSize:t||4})}),(0,o.jsx)("div",{children:(0,o.jsx)(e9.U,{lineMarkersKey:h,hideActions:!0,isInlineComment:!1,comment:r,filePath:d,index:0,isAnchorable:!1,isOutdated:g,isThreadResolved:p,threadId:s,originalDiffPathUri:a.originalDiffPathUri,headingLevel:"h3"},l)}),(0,o.jsx)("div",{className:"mb-2 px-2",children:(0,o.jsx)(em.Q,{"aria-label":`View ${j}`,size:"small",trailingVisual:T.ChevronRightIcon,variant:"invisible",onClick:y,children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,o.jsx)("span",{children:j}),(0,o.jsx)(th,{commentAuthors:C})]})})})]})]})});try{tC.displayName||(tC.displayName="ThreadPreview")}catch{}var t_=n(4559),tN=n(76720);let tS=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(11),{heading:r,description:l,icon:d,headingLevel:u}=e,m=void 0===u?"h1":u;return s[0]!==d?(t=(0,o.jsx)(tN.E.Visual,{children:(0,o.jsx)(d,{size:"medium"})}),s[0]=d,s[1]=t):t=s[1],s[2]!==r||s[3]!==m?(n=(0,o.jsx)(tN.E.Heading,{as:m,children:r}),s[2]=r,s[3]=m,s[4]=n):n=s[4],s[5]!==l?(i=l&&(0,o.jsx)(tN.E.Description,{children:l}),s[5]=l,s[6]=i):i=s[6],s[7]!==t||s[8]!==n||s[9]!==i?(a=(0,o.jsxs)(tN.E,{children:[t,n,i]}),s[7]=t,s[8]=n,s[9]=i,s[10]=a):a=s[10],a}:function({heading:e,description:t,icon:n,headingLevel:i="h1"}){return(0,o.jsxs)(tN.E,{children:[(0,o.jsx)(tN.E.Visual,{children:(0,o.jsx)(n,{size:"medium"})}),(0,o.jsx)(tN.E.Heading,{as:i,children:e}),t&&(0,o.jsx)(tN.E.Description,{children:t})]})};try{tS.displayName||(tS.displayName="ZeroState")}catch{}var tI=n(69510);let tk=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h=(0,c.c)(27),{filteredThreadIds:f,onClose:p,pageLimits:g,pathName:y,isOpen:x,setThreadPreviews:v,tabSize:w}=e;h[0]!==y?(t={pathName:y},h[0]=y,h[1]=t):t=h[1];let{data:C}=(0,tI._l)(t),_=void 0===C?[]:C;(0,b.useEffect)(()=>{v(_)},[_,v]);let N=(0,b.useRef)(null);h[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,j.s)(t_.i,300),h[2]=n):n=h[2];let S=n,I=_.length>0;h[3]!==p?(i=()=>{p()},h[3]=p,h[4]=i):i=h[4];let k=i;h[5]!==f||h[6]!==k||h[7]!==w?(a=e=>e&&f.has(e.previewInfo.threadId)?(0,o.jsx)(tC,{tabSize:w,threadPreview:e,onNavigateToDiffComment:k,headingLevel:"h2"},e.previewInfo.threadId):null,h[5]=f,h[6]=k,h[7]=w,h[8]=a):a=h[8];let L=_.map(a).filter(Boolean);return h[9]!==S||h[10]!==x||h[11]!==L.length?(s=()=>{x&&S(L.length>0?`${L.length} ${1===L.length?"comment":"comments"}`:"No comments found",{element:N.current})},h[9]=S,h[10]=x,h[11]=L.length,h[12]=s):s=h[12],h[13]!==S||h[14]!==x||h[15]!==L?(r=[x,S,L],h[13]=S,h[14]=x,h[15]=L,h[16]=r):r=h[16],(0,b.useEffect)(s,r),h[17]!==g.reviewThreadsLimit||h[18]!==g.reviewThreadsLimitExceeded?(l=g.reviewThreadsLimitExceeded&&(0,o.jsx)(ez.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${g.reviewThreadsLimit} comments are currently being shown.`,className:"mb-3"}),h[17]=g.reviewThreadsLimit,h[18]=g.reviewThreadsLimitExceeded,h[19]=l):l=h[19],h[20]!==I||h[21]!==L?(d=L.length>0?(0,o.jsx)(b.Suspense,{fallback:(0,o.jsx)(ee.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:L})}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tS,{description:"Comments will show up here as soon as there are some.",heading:I?"No comments match the current filter":"No comments on changes yet",icon:T.CommentIcon,headingLevel:"h2"})}),h[20]=I,h[21]=L,h[22]=d):d=h[22],h[23]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:N}),h[23]=u):u=h[23],h[24]!==l||h[25]!==d?(m=(0,o.jsxs)(o.Fragment,{children:[l,d,u]}),h[24]=l,h[25]=d,h[26]=m):m=h[26],m}:function({filteredThreadIds:e,onClose:t,pageLimits:n,pathName:i,isOpen:a,setThreadPreviews:s,tabSize:r}){let{data:l=[]}=(0,tI._l)({pathName:i});(0,b.useEffect)(()=>{s(l)},[l,s]);let d=(0,b.useRef)(null),c=(0,b.useMemo)(()=>(0,j.s)(t_.i,300),[]),u=l.length>0,m=(0,b.useCallback)(()=>{t()},[t]),h=l.map(t=>t&&e.has(t.previewInfo.threadId)?(0,o.jsx)(tC,{tabSize:r,threadPreview:t,onNavigateToDiffComment:m,headingLevel:"h2"},t.previewInfo.threadId):null).filter(Boolean);return(0,b.useEffect)(()=>{a&&c(h.length>0?`${h.length} ${1===h.length?"comment":"comments"}`:"No comments found",{element:d.current})},[a,c,h]),(0,o.jsxs)(o.Fragment,{children:[n.reviewThreadsLimitExceeded&&(0,o.jsx)(ez.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${n.reviewThreadsLimit} comments are currently being shown.`,className:"mb-3"}),h.length>0?(0,o.jsx)(b.Suspense,{fallback:(0,o.jsx)(ee.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:h})}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tS,{description:"Comments will show up here as soon as there are some.",heading:u?"No comments match the current filter":"No comments on changes yet",icon:T.CommentIcon,headingLevel:"h2"})}),(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:d})]})},tL=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f=(0,c.c)(25);f[0]!==e?({pathName:t,toggleSidesheetRef:i,...n}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=i):(t=f[1],n=f[2],i=f[3]),f[4]===Symbol.for("react.memo_cache_sentinel")?(a=[],f[4]=a):a=f[4];let[p,g]=(0,b.useState)(a),[x,v]=(0,b.useState)(tD);f[5]!==x||f[6]!==p?(s=e6(p,x),f[5]=x,f[6]=p,f[7]=s):s=f[7];let j=s,w=(0,b.useRef)(null);if(f[8]!==p){for(let e of(r=[],p)){let t=e.previewInfo.firstComment;t?.author&&!r.some(e=>e.login===t.author?.login)&&("Copilot"===t.author.login?r.unshift(t.author):r.push(t.author))}f[8]=p,f[9]=r}else r=f[9];let C=r;return n.isOpen?(f[10]===Symbol.for("react.memo_cache_sentinel")?(l={narrow:"fullscreen",regular:"right",wide:"right"},f[10]=l):l=f[10],f[11]!==C||f[12]!==x||f[13]!==n.onClose?(d=e=>{let{dialogLabelId:t}=e;return(0,o.jsxs)(y.l.Header,{children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full pl-2",children:[(0,o.jsx)(y.l.Title,{id:t,children:"Comments"}),(0,o.jsx)(el.K,{ref:w,"aria-label":"Close comments panel",icon:T.XIcon,variant:"invisible",onClick:n.onClose})]}),(0,o.jsx)(e8,{authorList:C,className:"mt-2 width-full",filterState:x,onFilterStateChange:v})]})},f[11]=C,f[12]=x,f[13]=n.onClose,f[14]=d):d=f[14],f[15]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(ee.A,{})}),f[15]=u):u=f[15],f[16]!==j||f[17]!==t||f[18]!==n?(m=(0,o.jsx)(b.Suspense,{fallback:u,children:(0,o.jsx)(tk,{...n,filteredThreadIds:j,pathName:t,setThreadPreviews:g})}),f[16]=j,f[17]=t,f[18]=n,f[19]=m):m=f[19],f[20]!==n.onClose||f[21]!==d||f[22]!==m||f[23]!==i?(h=(0,o.jsx)(y.l,{initialFocusRef:w,position:l,returnFocusRef:i,onClose:n.onClose,renderHeader:d,children:m}),f[20]=n.onClose,f[21]=d,f[22]=m,f[23]=i,f[24]=h):h=f[24],h):null}:function(e){let{pathName:t,toggleSidesheetRef:n,...i}=e,[a,s]=(0,b.useState)([]),[r,l]=(0,b.useState)(()=>({...e7})),d=e6(a,r),c=(0,b.useRef)(null),u=(0,b.useMemo)(()=>{let e=[];for(let t of a){let n=t.previewInfo.firstComment;n?.author&&!e.some(e=>e.login===n.author?.login)&&("Copilot"===n.author.login?e.unshift(n.author):e.push(n.author))}return e},[a]);return i.isOpen?(0,o.jsx)(y.l,{initialFocusRef:c,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:n,onClose:i.onClose,renderHeader:({dialogLabelId:e})=>(0,o.jsxs)(y.l.Header,{children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full pl-2",children:[(0,o.jsx)(y.l.Title,{id:e,children:"Comments"}),(0,o.jsx)(el.K,{ref:c,"aria-label":"Close comments panel",icon:T.XIcon,variant:"invisible",onClick:i.onClose})]}),(0,o.jsx)(e8,{authorList:u,className:"mt-2 width-full",filterState:r,onFilterStateChange:l})]}),children:(0,o.jsx)(b.Suspense,{fallback:(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(ee.A,{})}),children:(0,o.jsx)(tk,{...i,filteredThreadIds:d,pathName:t,setThreadPreviews:s})})}):null});try{tk.displayName||(tk.displayName="CommentsSidePanelContent")}catch{}try{tL.displayName||(tL.displayName="CommentsSidePanel")}catch{}function tD(){return{...e7}}let tT=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(18),{isFileTreeExpanded:u,pageLimits:m,pullRequest:h,tabSize:f}=e,[p,g]=(0,b.useState)(!1),y=(0,b.useRef)(null),x=(0,k.Qb)(),{sendPullRequestAnalyticsEvent:v}=(0,es.q)();return d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(em.Q,{"aria-label":"The comments side panel cannot currently be opened.",leadingVisual:T.CommentDiscussionIcon,size:"small",variant:"invisible"}),d[0]=t):t=d[0],d[1]!==v?(n=()=>{v("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),e2(),g(!0)},d[1]=v,d[2]=n):n=d[2],d[3]!==u?(i=u&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Comments"}),d[3]=u,d[4]=i):i=d[4],d[5]!==x||d[6]!==n||d[7]!==i?(a=(0,o.jsx)(em.Q,{ref:y,"aria-label":"Open comments side panel",count:x,leadingVisual:T.CommentDiscussionIcon,size:"small",onClick:n,children:i}),d[5]=x,d[6]=n,d[7]=i,d[8]=a):a=d[8],d[9]===Symbol.for("react.memo_cache_sentinel")?(s=()=>g(!1),d[9]=s):s=d[9],d[10]!==p||d[11]!==m||d[12]!==h.pathName||d[13]!==f?(r=(0,o.jsx)(tL,{isOpen:p,pageLimits:m,pathName:h.pathName,tabSize:f,toggleSidesheetRef:y,onClose:s}),d[10]=p,d[11]=m,d[12]=h.pathName,d[13]=f,d[14]=r):r=d[14],d[15]!==a||d[16]!==r?(l=(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(Y.t,{fallback:t,children:[a,r]})}),d[15]=a,d[16]=r,d[17]=l):l=d[17],l}:function({isFileTreeExpanded:e,pageLimits:t,pullRequest:n,tabSize:i}){let[a,s]=(0,b.useState)(!1),r=(0,b.useRef)(null),l=(0,k.Qb)(),{sendPullRequestAnalyticsEvent:d}=(0,es.q)();return(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(Y.t,{fallback:(0,o.jsx)(em.Q,{"aria-label":"The comments side panel cannot currently be opened.",leadingVisual:T.CommentDiscussionIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(em.Q,{ref:r,"aria-label":"Open comments side panel",count:l,leadingVisual:T.CommentDiscussionIcon,size:"small",onClick:()=>{d("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),e2(),s(!0)},children:e&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Comments"})}),(0,o.jsx)(tL,{isOpen:a,pageLimits:t,pathName:n.pathName,tabSize:i,toggleSidesheetRef:r,onClose:()=>s(!1)})]})})};try{tT.displayName||(tT.displayName="OpenCommentsSidePanelButton")}catch{}var tE=n(86909);function tA(e,t){return new Set(e.filter(e=>(function(e,t){if(t){let n=t.toLowerCase();if(!e.annotationLevel.toLowerCase().includes(n)&&!e.message.toLowerCase().includes(n)&&!e.path.toLowerCase().includes(n)&&!e.title?.toLowerCase().includes(n)&&!e.checkRun.name?.toLowerCase().includes(n)&&!e.appAvatarAltText.toLowerCase().includes(n)&&!e.checkSuiteName?.toLowerCase().includes(n))return!1}return!0})(e,t)).map(e=>e.id))}let tR=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(8),{className:s,filteredText:r,onFilteredTextChange:l}=e;return a[0]!==l?(t=e=>l(e.target.value),a[0]=l,a[1]=t):t=a[1],a[2]!==r||a[3]!==t?(n=(0,o.jsx)(e3.A,{block:!0,"aria-label":"Filter alerts\u2026",leadingVisual:T.SearchIcon,placeholder:"Filter alerts\u2026",value:r,onChange:t}),a[2]=r,a[3]=t,a[4]=n):n=a[4],a[5]!==s||a[6]!==n?(i=(0,o.jsx)("div",{className:s,children:n}),a[5]=s,a[6]=n,a[7]=i):i=a[7],i}:function({className:e,filteredText:t,onFilteredTextChange:n}){return(0,o.jsx)("div",{className:e,children:(0,o.jsx)(e3.A,{block:!0,"aria-label":"Filter alerts\u2026",leadingVisual:T.SearchIcon,placeholder:"Filter alerts\u2026",value:t,onChange:e=>n(e.target.value)})})};try{tR.displayName||(tR.displayName="AlertsFilter")}catch{}let tO="AlertsSidePanel-module__annotationsHeaderFileName--JzcsF",tP=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u=(0,c.c)(25),{databaseId:m,lineNumber:h,path:f,toggleCollapsed:p,isCollapsed:g,onNavigateToAnnotation:y,annotationLevel:x}=e,b=g?"Expand annotation":"Collapse annotation",j=g?T.ChevronRightIcon:T.ChevronDownIcon;u[0]!==b||u[1]!==j||u[2]!==p?(t=(0,o.jsx)(el.K,{"aria-label":b,icon:j,size:"small",variant:"invisible",className:"mr-1",onClick:p}),u[0]=b,u[1]=j,u[2]=p,u[3]=t):t=u[3];let w=tE.Gt[x];u[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,v.$)("overflow-hidden text-mono text-semibold f6 no-wrap",tO),u[4]=n):n=u[4];let C=`#annotation_${m}`;u[5]!==y||u[6]!==f||u[7]!==C?(i=(0,o.jsxs)(A.A,{className:n,href:C,onClick:y,muted:!0,children:["\u200E",f]}),u[5]=y,u[6]=f,u[7]=C,u[8]=i):i=u[8],u[9]!==f||u[10]!==i?(a=(0,o.jsx)(E.m,{direction:"n",text:f,type:"label",children:i}),u[9]=f,u[10]=i,u[11]=a):a=u[11],u[12]!==h?(s=(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal ml-2 no-wrap",children:["Line ",h]}),u[12]=h,u[13]=s):s=u[13],u[14]!==t||u[15]!==w||u[16]!==a||u[17]!==s?(r=(0,o.jsxs)("h2",{className:"d-flex flex-items-center flex-1 min-width-0 ml-1 mr-2",children:[t,w,a,s]}),u[14]=t,u[15]=w,u[16]=a,u[17]=s,u[18]=r):r=u[18];let _=`#annotation_${m}`;return u[19]!==y||u[20]!==_?(l=(0,o.jsx)(el.K,{as:"a","aria-label":"Jump to the alert in the diff",tooltipDirection:"se",icon:T.FileSymlinkFileIcon,variant:"invisible",href:_,onClick:y}),u[19]=y,u[20]=_,u[21]=l):l=u[21],u[22]!==r||u[23]!==l?(d=(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center py-1 px-2 bgColor-inset rounded-top-2 border-bottom",children:[r,l]}),u[22]=r,u[23]=l,u[24]=d):d=u[24],d}:function({databaseId:e,lineNumber:t,path:n,toggleCollapsed:i,isCollapsed:a,onNavigateToAnnotation:s,annotationLevel:r}){return(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center py-1 px-2 bgColor-inset rounded-top-2 border-bottom",children:[(0,o.jsxs)("h2",{className:"d-flex flex-items-center flex-1 min-width-0 ml-1 mr-2",children:[(0,o.jsx)(el.K,{"aria-label":a?"Expand annotation":"Collapse annotation",icon:a?T.ChevronRightIcon:T.ChevronDownIcon,size:"small",variant:"invisible",className:"mr-1",onClick:i}),tE.Gt[r],(0,o.jsx)(E.m,{direction:"n",text:n,type:"label",children:(0,o.jsxs)(A.A,{className:(0,v.$)("overflow-hidden text-mono text-semibold f6 no-wrap",tO),href:`#annotation_${e}`,onClick:s,muted:!0,children:["\u200E",n]})}),(0,o.jsxs)("span",{className:"f6 fgColor-muted text-normal ml-2 no-wrap",children:["Line ",t]})]}),(0,o.jsx)(el.K,{as:"a","aria-label":"Jump to the alert in the diff",tooltipDirection:"se",icon:T.FileSymlinkFileIcon,variant:"invisible",href:`#annotation_${e}`,onClick:s})]})},tF=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h=(0,c.c)(26),{annotations:f,onClose:p,isOpen:g,pageLimits:x,returnFocusRef:v}=e,[w,C]=(0,b.useState)(""),_=tA(f,w),N=(0,b.useRef)(null),S=f.length>0,I=(0,k.j5)(),{navigateToSelectedAnnotation:L}=(0,k.Lh)();h[0]!==I||h[1]!==L||h[2]!==p?(t=e=>{I&&L(e),p()},h[0]=I,h[1]=L,h[2]=p,h[3]=t):t=h[3];let D=t,E=f.map(e=>e&&_.has(e.id)?(0,o.jsx)(tM,{annotation:e,handleNavigateToAnnotation:D},e.id):null).filter(Boolean),A=(0,b.useRef)(null);h[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,j.s)(t_.i,300),h[4]=n):n=h[4];let R=n;return(h[5]!==E||h[6]!==g?(i=()=>{g&&R(E.length>0?`${E.length} ${1===E.length?"alert":"alerts"}`:"No alerts found",{element:A.current})},a=[g,R,E],h[5]=E,h[6]=g,h[7]=i,h[8]=a):(i=h[7],a=h[8]),(0,b.useEffect)(i,a),g)?(h[9]===Symbol.for("react.memo_cache_sentinel")?(s={narrow:"fullscreen",regular:"right",wide:"right"},h[9]=s):s=h[9],h[10]!==w||h[11]!==p?(r=e=>{let{dialogLabelId:t}=e;return(0,o.jsxs)(y.l.Header,{children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between width-full pl-2",children:[(0,o.jsx)(X.A,{as:"h1",className:"f4 text-bold",id:t,children:"Alerts"}),(0,o.jsx)(el.K,{ref:N,"aria-label":"Close alerts panel",icon:T.XIcon,variant:"invisible",onClick:p})]}),(0,o.jsx)(tR,{className:"mt-2 width-full",filteredText:w,onFilteredTextChange:C})]})},h[10]=w,h[11]=p,h[12]=r):r=h[12],h[13]!==x.annotationsLimit||h[14]!==x.annotationsLimitExceeded?(l=x.annotationsLimitExceeded&&(0,o.jsx)(ez.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${x.annotationsLimit} alerts are currently being shown.`,className:"mb-3"}),h[13]=x.annotationsLimit,h[14]=x.annotationsLimitExceeded,h[15]=l):l=h[15],h[16]!==E||h[17]!==S?(d=E.length>0?(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:E}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tS,{heading:S?"No alerts match the current filter":"No alerts on changes yet",icon:T.AlertIcon})}),h[16]=E,h[17]=S,h[18]=d):d=h[18],h[19]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:A}),h[19]=u):u=h[19],h[20]!==p||h[21]!==v||h[22]!==r||h[23]!==l||h[24]!==d?(m=(0,o.jsxs)(y.l,{initialFocusRef:N,onClose:p,position:s,returnFocusRef:v,renderHeader:r,children:[l,d,u]}),h[20]=p,h[21]=v,h[22]=r,h[23]=l,h[24]=d,h[25]=m):m=h[25],m):null}:function({annotations:e,onClose:t,isOpen:n,pageLimits:i,returnFocusRef:a}){let[s,r]=(0,b.useState)(""),l=tA(e,s),d=(0,b.useRef)(null),c=e.length>0,u=(0,k.j5)(),{navigateToSelectedAnnotation:m}=(0,k.Lh)(),h=(0,b.useCallback)(e=>{u&&m(e),t()},[t,u,m]),f=e.map(e=>e&&l.has(e.id)?(0,o.jsx)(tM,{annotation:e,handleNavigateToAnnotation:h},e.id):null).filter(Boolean),p=(0,b.useRef)(null),g=(0,b.useMemo)(()=>(0,j.s)(t_.i,300),[]);return((0,b.useEffect)(()=>{n&&g(f.length>0?`${f.length} ${1===f.length?"alert":"alerts"}`:"No alerts found",{element:p.current})},[n,g,f]),n)?(0,o.jsxs)(y.l,{initialFocusRef:d,onClose:t,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:a,renderHeader:({dialogLabelId:e})=>(0,o.jsxs)(y.l.Header,{children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between width-full pl-2",children:[(0,o.jsx)(X.A,{as:"h1",className:"f4 text-bold",id:e,children:"Alerts"}),(0,o.jsx)(el.K,{ref:d,"aria-label":"Close alerts panel",icon:T.XIcon,variant:"invisible",onClick:t})]}),(0,o.jsx)(tR,{className:"mt-2 width-full",filteredText:s,onFilteredTextChange:r})]}),children:[i.annotationsLimitExceeded&&(0,o.jsx)(ez.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${i.annotationsLimit} alerts are currently being shown.`,className:"mb-3"}),f.length>0?(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:f}):(0,o.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,o.jsx)(tS,{heading:c?"No alerts match the current filter":"No alerts on changes yet",icon:T.AlertIcon})}),(0,o.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:p})]}):null}),tM=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(18),{annotation:r,handleNavigateToAnnotation:l}=e,{isCollapsed:d,handleToggleCollapsed:u}=(0,tE.Vv)(r);return s[0]!==r.databaseId||s[1]!==l?(t=()=>l(r.databaseId),s[0]=r.databaseId,s[1]=l,s[2]=t):t=s[2],s[3]!==r.annotationLevel||s[4]!==r.databaseId||s[5]!==r.endLine||s[6]!==r.path||s[7]!==u||s[8]!==d||s[9]!==t?(n=(0,o.jsx)(tP,{databaseId:r.databaseId,lineNumber:r.endLine,annotationLevel:r.annotationLevel,path:r.path,toggleCollapsed:u,isCollapsed:d,onNavigateToAnnotation:t}),s[3]=r.annotationLevel,s[4]=r.databaseId,s[5]=r.endLine,s[6]=r.path,s[7]=u,s[8]=d,s[9]=t,s[10]=n):n=s[10],s[11]!==r||s[12]!==d?(i=!d&&(0,o.jsx)(tE.YH,{annotation:r,inSidePanel:!0}),s[11]=r,s[12]=d,s[13]=i):i=s[13],s[14]!==r.id||s[15]!==n||s[16]!==i?(a=(0,o.jsxs)("div",{className:"border rounded-2 bgColor-default overflow-hidden",children:[n,i]},r.id),s[14]=r.id,s[15]=n,s[16]=i,s[17]=a):a=s[17],a}:function({annotation:e,handleNavigateToAnnotation:t}){let{isCollapsed:n,handleToggleCollapsed:i}=(0,tE.Vv)(e);return(0,o.jsxs)("div",{className:"border rounded-2 bgColor-default overflow-hidden",children:[(0,o.jsx)(tP,{databaseId:e.databaseId,lineNumber:e.endLine,annotationLevel:e.annotationLevel,path:e.path,toggleCollapsed:i,isCollapsed:n,onNavigateToAnnotation:()=>t(e.databaseId)}),!n&&(0,o.jsx)(tE.YH,{annotation:e,inSidePanel:!0})]},e.id)};try{tP.displayName||(tP.displayName="AnnotationHeader")}catch{}try{tF.displayName||(tF.displayName="AlertsSidePanel")}catch{}try{tM.displayName||(tM.displayName="SidePanelAlert")}catch{}let t$=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(11),{isFileTreeExpanded:s,pageLimits:r,className:l}=e,[d,u]=(0,b.useState)(!1),m=(0,b.useRef)(null);a[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>u(!1),a[0]=t):t=a[0];let h=t,f=(0,k.wI)(),{sendPullRequestAnalyticsEvent:p}=(0,es.q)();if(!f)return null;a[1]!==f?(n=Object.values(f),a[1]=f,a[2]=n):n=a[2];let g=n,y=g.length;return a[3]!==g||a[4]!==l||a[5]!==s||a[6]!==r||a[7]!==p||a[8]!==d||a[9]!==y?(i=y>0?(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(Y.t,{fallback:(0,o.jsx)(el.K,{inactive:!0,"aria-label":"The alerts side panel cannot currently be opened.",icon:T.AlertIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(em.Q,{ref:m,className:l,"aria-label":"Open alerts side panel",count:y,leadingVisual:T.AlertIcon,size:"small",onClick:()=>{p("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),e2(),u(!0)},children:s&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Alerts"})}),(0,o.jsx)(tF,{annotations:g,isOpen:d,pageLimits:r,returnFocusRef:m,onClose:h})]})}):null,a[3]=g,a[4]=l,a[5]=s,a[6]=r,a[7]=p,a[8]=d,a[9]=y,a[10]=i):i=a[10],i}:function({isFileTreeExpanded:e,pageLimits:t,className:n}){let[i,a]=(0,b.useState)(!1),s=(0,b.useRef)(null),r=(0,b.useCallback)(()=>a(!1),[]),l=(0,k.wI)(),{sendPullRequestAnalyticsEvent:d}=(0,es.q)();if(!l)return null;let c=Object.values(l),u=c.length;return u>0?(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(Y.t,{fallback:(0,o.jsx)(el.K,{inactive:!0,"aria-label":"The alerts side panel cannot currently be opened.",icon:T.AlertIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(em.Q,{ref:s,className:n,"aria-label":"Open alerts side panel",count:u,leadingVisual:T.AlertIcon,size:"small",onClick:()=>{d("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),e2(),a(!0)},children:e&&(0,o.jsx)("span",{className:"d-none d-xl-block",children:"Alerts"})}),(0,o.jsx)(tF,{annotations:c,isOpen:i,pageLimits:t,returnFocusRef:s,onClose:r})]})}):null};try{t$.displayName||(t$.displayName="OpenAlertsPanelButton")}catch{}var tB=n(70109),tV=n(42255),tU=n(46251),tq=n(31604),tH=n(33578);let tG={approve:"approve",comment:"comment",requestChanges:"request changes"},tK=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(10),{onSuccess:r,onError:l}=e,o=(0,ey.e)(eg.uT.submitReview);return s[0]!==o?(t=async e=>{let{body:t,event:n,headSha:i}=e;return(0,eS.Sr)(`${o}`,{method:"PUT",headers:{Accept:"application/json"},body:{body:t,event:n,headSha:i}})},s[0]=o,s[1]=t):t=s[1],s[2]!==r?(n=async e=>{let t=await e.json(),n=t.error||"Unknown error occurred";if(!e.ok)throw Error(n);r(t)},s[2]=r,s[3]=n):n=s[3],s[4]!==l?(i=e=>{l(e)},s[4]=l,s[5]=i):i=s[5],s[6]!==t||s[7]!==n||s[8]!==i?(a={mutationFn:t,onSuccess:n,onError:i},s[6]=t,s[7]=n,s[8]=i,s[9]=a):a=s[9],(0,ex.n)(a)}:function({onSuccess:e,onError:t}){let n=(0,ey.e)(eg.uT.submitReview);return(0,ex.n)({mutationFn:async({body:e,event:t,headSha:i})=>(0,eS.Sr)(`${n}`,{method:"PUT",headers:{Accept:"application/json"},body:{body:e,event:t,headSha:i}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})},tW=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(10),{onSuccess:r,onError:l}=e,o=(0,ey.e)(eg.uT.abandonReview);return s[0]!==o?(t=async()=>(0,eS.Sr)(`${o}`,{method:"DELETE",headers:{Accept:"application/json"}}),s[0]=o,s[1]=t):t=s[1],s[2]!==r?(n=async e=>{let t=await e.json(),n=t.error||"Unknown error occurred";if(!e.ok)throw Error(n);r(t)},s[2]=r,s[3]=n):n=s[3],s[4]!==l?(i=e=>{l(e)},s[4]=l,s[5]=i):i=s[5],s[6]!==t||s[7]!==n||s[8]!==i?(a={mutationFn:t,onSuccess:n,onError:i},s[6]=t,s[7]=n,s[8]=i,s[9]=a):a=s[9],(0,ex.n)(a)}:function({onSuccess:e,onError:t}){let n=(0,ey.e)(eg.uT.abandonReview);return(0,ex.n)({mutationFn:async()=>(0,eS.Sr)(`${n}`,{method:"DELETE",headers:{Accept:"application/json"}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})};var tz=n(46747);let{getItem:tQ,removeItem:tZ,setItem:tJ}=(0,eA.D)("localStorage"),tY=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(11),[r,l]=(0,b.useState)(!1),o=`Review:${e}`;s[0]!==o?(t=()=>tQ(o),s[0]=o,s[1]=t):t=s[1];let[d,u]=(0,b.useState)(t);s[2]!==o?(n=()=>{tZ(o),u(null)},s[2]=o,s[3]=n):n=s[3];let m=n;s[4]!==r||s[5]!==o?(i=(e,t)=>{if(!r)try{let n={event:e,text:t};tJ(o,n),u(n)}catch{l(!0)}},s[4]=r,s[5]=o,s[6]=i):i=s[6];let h=(0,tz.d)(i,1e3);return s[7]!==h||s[8]!==d||s[9]!==m?(a={persistedReview:d,persistReviewToStorage:h,removePersistedReviewFromStorage:m},s[7]=h,s[8]=d,s[9]=m,s[10]=a):a=s[10],a}:function(e){let[t,n]=(0,b.useState)(!1),i=(0,b.useMemo)(()=>`Review:${e}`,[e]),[a,s]=(0,b.useState)(()=>tQ(i)),r=(0,b.useCallback)(()=>{tZ(i),s(null)},[i]);return{persistedReview:a,persistReviewToStorage:(0,tz.d)((e,a)=>{if(!t)try{let t={event:e,text:a};tJ(i,t),s(t)}catch{n(!0)}},1e3),removePersistedReviewFromStorage:r}},tX="ReviewMenuButton-module__ReviewMenuButton--uK7FN",t0="ReviewMenuButton-module__CommentBoxContainer--Un2Pq",t1="ReviewMenuButton-module__SubmitReviewButton--ZSu4L",t2="ReviewMenuButton-module__ErrorMessage--bglZe",t3="ReviewMenuButton-module__ExpandSection--sAB8o",t4="ReviewMenuButton-module__AnchoredReviewBody--nirqE",t5=[];function t6(e,t){let n=(0,k.BI)(e),i=(0,k.l0)();return(0,b.useMemo)(()=>{let a=e??t5;if(void 0===n||void 0===i)return[];let s=[];for(let e of Object.keys(t)){let r=t[e];if(!r)continue;let l=0,{path:o,diffLines:d}=r,c=i[o];if(c){let e=function(e,t){if(!e||!e.markersMap)return[];let n=e.markersMap.FILE;if(void 0===n)return[];let i=[];for(let a of n.threads){if(void 0===a.id)continue;let n=t.find(e=>Number(e.id)===a.id);if(!n)continue;let s=n.commentsData?.comments.slice(0,-1),r=[];for(let e of s??[])e.author&&r.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let l=(n.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:n.id,commentId:(t.databaseId??0).toString(),isOutdated:n.isOutdated??!1,isResolved:!1,path:e.path,subjectType:"FILE",commentsData:n.commentsData,threadPreviewComments:r}));i.push(...l)}return i}(c,n);e.length>0&&(s.push(...e),a=a.filter(t=>!e.some(e=>e.threadId===t.toString()))),d.map(e=>{let t=function(e,t,n,i,a,s){let r="DELETION"!==t.type?`R${t.right}`:`L${t.left}`;if(!n||!n.markersMap)return{pendingCommentsReturnArray:[],markersFoundInLine:[]};let l=n.markersMap[r],o=[],d=[];if(l){for(let t of l.threads){let n;if(void 0===t.id)continue;let l=i.find(e=>Number(e.id)===t.id);if(!l)continue;let c=parseInt(r.slice(1))||0,u=-1,m=5;t.start&&(n="L"===t.start[0]?"LEFT":"RIGHT",u=parseInt(t.start.slice(1))||-1),-1!==u&&(m=c-u),m>a&&(m=a+1);let h=s.slice(a+1-m,a+1);for(let e=0;e<h.length;e++)h[e]?.type==="HUNK"&&h.splice(0,e+1);let f=l.commentsData?.comments.slice(0,-1),p=[];for(let e of f??[])e.author&&p.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});o.push(t.id),l.commentsData&&(d=d.concat(l.commentsData.comments.filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:l.id,commentId:(t.databaseId??0).toString(),isOutdated:l.isOutdated??!1,isResolved:!1,line:c,path:e,subject:{diffLines:h,endLine:c,startDiffSide:n,startLine:-1===u?null:u},subjectType:t.subjectType??"LINE",commentsData:l.commentsData,threadPreviewComments:p}))))}return{pendingCommentsReturnArray:d,markersFoundInLine:o}}return{pendingCommentsReturnArray:[],markersFoundInLine:[]}}(r.path,e,c,n,l,d);l++,void 0!==t&&(s.push(...t.pendingCommentsReturnArray),a=a.filter(e=>!t.markersFoundInLine.includes(e)))})}}return[...s,...function(e,t){let n=[];for(let i of e){let e=t[i];if(!e)continue;let a=e.commentsData?.comments.slice(0,-1),s=[];for(let e of a??[])e.author&&s.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let r=(e.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:e.id,commentId:(t.databaseId??0).toString(),isOutdated:e.isOutdated??!1,isResolved:!1,path:"",subjectType:t.subjectType??"LINE",commentsData:e.commentsData,threadPreviewComments:s}));n.push(...r)}return n}(a,n)]},[e,n,i,t])}var t7=n(29255),t8=n(55461),t9=n(15837),ne=n(33989),nt=n(55255);let nn="ReviewMenu-module__Radio--i3DSd",ni="ReviewMenu-module__RadioGroup--uQwUG",na="ReviewMenu-module__RadioText--dXY49",ns=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(13),{isPROpen:s,reviewEvent:r,viewerAllowedNonCommentReviewTypes:l,viewerCanWriteToRepo:d,viewerHasViolatedPushPolicy:u,viewerIsAuthor:m,viewerIsCopilotAttributed:h,handleReviewEventChange:f,handleReviewSubmit:g}=e;return s?(a[0]!==g?(t={"pull-request-files-changed:submit-review":g},a[0]=g,a[1]=t):t=a[1],a[2]!==f||a[3]!==r||a[4]!==l||a[5]!==d||a[6]!==u||a[7]!==m||a[8]!==h?(n=(0,o.jsx)(nr,{reviewEvent:r,viewerAllowedNonCommentReviewTypes:l,viewerCanWriteToRepo:d,viewerHasViolatedPushPolicy:u,viewerIsAuthor:m,viewerIsCopilotAttributed:h,onReviewEventChange:f}),a[2]=f,a[3]=r,a[4]=l,a[5]=d,a[6]=u,a[7]=m,a[8]=h,a[9]=n):n=a[9],a[10]!==t||a[11]!==n?(i=(0,o.jsx)(p.tL,{commands:t,children:n}),a[10]=t,a[11]=n,a[12]=i):i=a[12],i):null}:function({isPROpen:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r,handleReviewEventChange:l,handleReviewSubmit:d}){return e?(0,o.jsx)(p.tL,{commands:{"pull-request-files-changed:submit-review":d},children:(0,o.jsx)(nr,{reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r,onReviewEventChange:l})}):null},nr=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g=(0,c.c)(34),{onReviewEventChange:y,reviewEvent:x,viewerAllowedNonCommentReviewTypes:v,viewerCanWriteToRepo:b,viewerHasViolatedPushPolicy:j,viewerIsAuthor:w,viewerIsCopilotAttributed:C}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(t9.A.Label,{visuallyHidden:!0,children:"Review Event"}),g[0]=t):t=g[0];let _=x===tG.comment;g[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t8.ZH)(tG.comment),g[1]=n):n=g[1],g[2]!==_?(i=(0,o.jsx)(nl,{checked:_,label:n,subLabel:"Submit general feedback without explicit approval.",value:tG.comment}),g[2]=_,g[3]=i):i=g[3];let N=x===tG.approve;g[4]!==v?(a=v.includes("APPROVE"),g[4]=v,g[5]=a):a=g[5];let S=!a;g[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t8.ZH)(tG.approve),g[6]=s):s=g[6],g[7]!==C?(r=nc(C),g[7]=C,g[8]=r):r=g[8];let I=!!j;g[9]!==I||g[10]!==v||g[11]!==w?(l=no(w,I,v),g[9]=I,g[10]=v,g[11]=w,g[12]=l):l=g[12],g[13]!==l||g[14]!==N||g[15]!==S||g[16]!==r?(d=(0,o.jsx)(nl,{checked:N,disabled:S,label:s,subLabel:r,value:tG.approve,disabledTooltip:l}),g[13]=l,g[14]=N,g[15]=S,g[16]=r,g[17]=d):d=g[17];let k=x===tG.requestChanges;g[18]!==v?(u=v.includes("REQUEST_CHANGES"),g[18]=v,g[19]=u):u=g[19];let L=!u;g[20]!==v||g[21]!==w?(m=nd(w,v),g[20]=v,g[21]=w,g[22]=m):m=g[22],g[23]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t8.ZH)(tG.requestChanges),g[23]=h):h=g[23];let D=b?"Submit feedback that must be addressed before merging.":"Submit feedback suggesting changes.";return g[24]!==k||g[25]!==L||g[26]!==m||g[27]!==D?(f=(0,o.jsx)(nl,{checked:k,disabled:L,disabledTooltip:m,label:h,value:tG.requestChanges,subLabel:D}),g[24]=k,g[25]=L,g[26]=m,g[27]=D,g[28]=f):f=g[28],g[29]!==y||g[30]!==d||g[31]!==f||g[32]!==i?(p=(0,o.jsxs)(t9.A,{name:"reviewEvent",onChange:y,className:ni,children:[t,i,d,f]}),g[29]=y,g[30]=d,g[31]=f,g[32]=i,g[33]=p):p=g[33],p}:function({onReviewEventChange:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r}){return(0,o.jsxs)(t9.A,{name:"reviewEvent",onChange:e,className:ni,children:[(0,o.jsx)(t9.A.Label,{visuallyHidden:!0,children:"Review Event"}),(0,o.jsx)(nl,{checked:t===tG.comment,label:(0,t8.ZH)(tG.comment),subLabel:"Submit general feedback without explicit approval.",value:tG.comment}),(0,o.jsx)(nl,{checked:t===tG.approve,disabled:!n.includes("APPROVE"),label:(0,t8.ZH)(tG.approve),subLabel:nc(r),value:tG.approve,disabledTooltip:no(s,!!a,n)}),(0,o.jsx)(nl,{checked:t===tG.requestChanges,disabled:!n.includes("REQUEST_CHANGES"),disabledTooltip:nd(s,n),label:(0,t8.ZH)(tG.requestChanges),value:tG.requestChanges,subLabel:i?"Submit feedback that must be addressed before merging.":"Submit feedback suggesting changes."})]})}),nl=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(18),{checked:d,disabled:u,disabledTooltip:m,label:h,subLabel:f,value:p}=e;l[0]!==d||l[1]!==p?(t=(0,o.jsx)(ne.A,{checked:d,value:p,className:nn}),l[0]=d,l[1]=p,l[2]=t):t=l[2],l[3]!==h?(n=(0,o.jsx)("span",{className:"text-bold",children:h}),l[3]=h,l[4]=n):n=l[4],l[5]!==f?(i=(0,o.jsx)("span",{className:na,children:f}),l[5]=f,l[6]=i):i=l[6],l[7]!==n||l[8]!==i?(a=(0,o.jsxs)(ed.A.Label,{className:"d-flex flex-column",children:[n,i]}),l[7]=n,l[8]=i,l[9]=a):a=l[9],l[10]!==u||l[11]!==t||l[12]!==a?(s=(0,o.jsxs)(ed.A,{disabled:u,children:[t,a]}),l[10]=u,l[11]=t,l[12]=a,l[13]=s):s=l[13];let g=s;return l[14]!==u||l[15]!==m||l[16]!==g?(r=u&&m?(0,o.jsx)(nt.A,{text:m,children:g}):g,l[14]=u,l[15]=m,l[16]=g,l[17]=r):r=l[17],r}:function({checked:e,disabled:t,disabledTooltip:n,label:i,subLabel:a,value:s}){let r=(0,o.jsxs)(ed.A,{disabled:t,children:[(0,o.jsx)(ne.A,{checked:e,value:s,className:nn}),(0,o.jsxs)(ed.A.Label,{className:"d-flex flex-column",children:[(0,o.jsx)("span",{className:"text-bold",children:i}),(0,o.jsx)("span",{className:na,children:a})]})]});return t&&n?(0,o.jsx)(nt.A,{text:n,children:r}):r};function no(e,t,n){return e?"Pull request authors can't approve their own pull requests.":t?"Users that pushed changes to this pull request after it was opened can't approve":n.includes("APPROVE")?"":"Only users with explicit access to this repository may approve pull requests"}function nd(e,t){return e?"Pull request authors can't request changes on their own pull requests.":t.includes("REQUEST_CHANGES")?"":"Only users with explicit access to this repository may request changes on pull requests"}function nc(e){return e?"Only users who did not collaborate with Copilot will satisfy review requirements.":"Submit feedback and approve merging these changes."}try{ns.displayName||(ns.displayName="ReviewTypeSelector")}catch{}try{nr.displayName||(nr.displayName="ReviewRadioButtons")}catch{}try{nl.displayName||(nl.displayName="RadioButton")}catch{}var nu=n(4908),nm=n(23398);let nh=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h=(0,c.c)(23),{totalPendingComments:f,commentsList:p,handleNavigateToDiffComment:g}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={defaultOpen:!0,closeOnOutsideClick:!1},h[0]=t):t=h[0];let{getDetailsProps:y,open:x}=(0,nu.A)(t);return f?(h[1]!==y?(n=y(),h[1]=y,h[2]=n):n=h[2],h[3]!==x?(i=x&&(0,o.jsx)(T.ChevronDownIcon,{className:"fgColor-muted"}),h[3]=x,h[4]=i):i=h[4],h[5]!==x?(a=!x&&(0,o.jsx)(T.ChevronRightIcon,{className:"fgColor-muted"}),h[5]=x,h[6]=a):a=h[6],h[7]!==f?(s=(0,o.jsxs)(X.A,{as:"h2",className:"f5",children:["Pending comments ",(0,o.jsx)(_.A,{children:f})]}),h[7]=f,h[8]=s):s=h[8],h[9]!==i||h[10]!==a||h[11]!==s?(r=(0,o.jsx)(nm.A.Summary,{children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2 mt-4 mb-2",children:[i,a,s]})}),h[9]=i,h[10]=a,h[11]=s,h[12]=r):r=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)(ee.A,{}),h[13]=l):l=h[13],h[14]!==p||h[15]!==g?(d=p?.map(e=>(0,o.jsx)(tx,{commentPreview:e,onNavigateToDiffComment:g},e.threadId)),h[14]=p,h[15]=g,h[16]=d):d=h[16],h[17]!==d?(u=(0,o.jsx)(b.Suspense,{fallback:l,children:(0,o.jsx)("div",{className:"d-flex flex-column gap-3",children:d})}),h[17]=d,h[18]=u):u=h[18],h[19]!==n||h[20]!==r||h[21]!==u?(m=(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(nm.A,{...n,children:[r,u]})}),h[19]=n,h[20]=r,h[21]=u,h[22]=m):m=h[22],m):null}:function({totalPendingComments:e,commentsList:t,handleNavigateToDiffComment:n}){let{getDetailsProps:i,open:a}=(0,nu.A)({defaultOpen:!0,closeOnOutsideClick:!1});return e?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(nm.A,{...i(),children:[(0,o.jsx)(nm.A.Summary,{children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2 mt-4 mb-2",children:[a&&(0,o.jsx)(T.ChevronDownIcon,{className:"fgColor-muted"}),!a&&(0,o.jsx)(T.ChevronRightIcon,{className:"fgColor-muted"}),(0,o.jsxs)(X.A,{as:"h2",className:"f5",children:["Pending comments ",(0,o.jsx)(_.A,{children:e})]})]})}),(0,o.jsx)(b.Suspense,{fallback:(0,o.jsx)(ee.A,{}),children:(0,o.jsx)("div",{className:"d-flex flex-column gap-3",children:t?.map(e=>(0,o.jsx)(tx,{commentPreview:e,onNavigateToDiffComment:n},e.threadId))})})]})}):null};try{nh.displayName||(nh.displayName="ReviewCommentsSection")}catch{}var nf=n(56149);let np=(0,d.Z6)()?e=>{let t,n,i,a=(0,c.c)(4),{portalName:s}=e,r=(0,b.useRef)(null);return a[0]!==s?(t=()=>{r.current&&(0,nf.cw)(r.current,s)},n=[s],a[0]=s,a[1]=t,a[2]=n):(t=a[1],n=a[2]),(0,b.useEffect)(t,n),a[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)("div",{ref:r,className:"position-absolute"}),a[3]=i):i=a[3],i}:({portalName:e})=>{let t=(0,b.useRef)(null);return(0,b.useEffect)(()=>{t.current&&(0,nf.cw)(t.current,e)},[e]),(0,o.jsx)("div",{ref:t,className:"position-absolute"})};try{np.displayName||(np.displayName="OverlayPortalContainer")}catch{}let ng="review-menu-portal-root";function ny({viewerIsAuthor:e,viewerAllowedNonCommentReviewTypes:t,isPROpen:n}){let i=t.includes("APPROVE"),a=t.includes("REQUEST_CHANGES");switch(!0){case!n:return{isHidden:!1,text:"comments"};case e:case i:case a:return{isHidden:!1,text:"review"};default:return{isHidden:!1,text:"comments"}}}let nx=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,x,v,j,w,C,_,N,S,I,L,D,E,A,R,O,P,F,M,$,B=(0,c.c)(123),{currentUserLogin:V,pullRequest:U,repository:q,redirectOnMutation:H}=e,G=void 0===H||H,{author:K,pathName:W,state:z,viewerAllowedNonCommentReviewTypes:Q,viewerHasViolatedPushPolicy:Z,viewerIsCopilotAttributed:J,comparison:Y}=U,ee=(0,k.ys)(),et=(0,k.HZ)(),{persistedReview:en,persistReviewToStorage:ei,removePersistedReviewFromStorage:ea}=tY(W),er=t6(ee?.pendingReviewIDs,et),eo=er?.length??0,ed=K?.login===V,ec=z!==tH.Q.Closed&&z!==tH.Q.Merged,eu="WRITE"===q.viewerPermission||"ADMIN"===q.viewerPermission,eh=Y.headOid,[ef,ep]=(0,tV.A)("none"),[eg,ey]=(0,tV.A)("idle"),[ex,ev]=(0,tV.A)(),[eb,ej]=(0,tV.A)(en?.event??tG.comment);B[0]!==ee?.pendingReviewIDs?(t=ee?.pendingReviewIDs??[],B[0]=ee?.pendingReviewIDs,B[1]=t):t=B[1];let ew=t.length>0,eC=(0,b.useRef)(null),e_=en?.text??"",eN=(0,b.useRef)(e_),[eS,eI]=(0,tV.A)(!!en?.text),ek="submitting"===eg||!eS&&eb===tG.comment&&!eo,{sendPullRequestAnalyticsEvent:eL}=(0,es.q)();B[2]!==ei||B[3]!==eb||B[4]!==eI?(n=e=>{eN.current=e,eI(!!e.trim()),ei(eb,e)},B[2]=ei,B[3]=eb,B[4]=eI,B[5]=n):n=B[5];let eD=n;B[6]!==ei||B[7]!==ej?(i=e=>{Object.values(tG).includes(e)&&(ej(e),ei(e,eN.current))},B[6]=ei,B[7]=ej,B[8]=i):i=B[8];let eT=i;B[9]!==G||B[10]!==ea?(a=e=>{let{redirectUrl:t}=e;ea(),G&&(window.location.href=t)},B[9]=G,B[10]=ea,B[11]=a):a=B[11],B[12]!==ev||B[13]!==ey?(s=e=>{ey("idle"),ev(e.message)},B[12]=ev,B[13]=ey,B[14]=s):s=B[14],B[15]!==a||B[16]!==s?(r={onSuccess:a,onError:s},B[15]=a,B[16]=s,B[17]=r):r=B[17];let{mutate:eE}=tK(r);B[18]!==G||B[19]!==ea?(l=e=>{let{redirectUrl:t}=e;ea(),G&&(window.location.href=t)},B[18]=G,B[19]=ea,B[20]=l):l=B[20],B[21]!==ev||B[22]!==ey?(d=e=>{ey("idle"),ev(e.message)},B[21]=ev,B[22]=ey,B[23]=d):d=B[23],B[24]!==l||B[25]!==d?(u={onSuccess:l,onError:d},B[24]=l,B[25]=d,B[26]=u):u=B[26];let{mutate:eA}=tW(u);B[27]!==ex||B[28]!==eh||B[29]!==eb||B[30]!==eL||B[31]!==ev||B[32]!==ey||B[33]!==ek||B[34]!==eE?(m=()=>{ek||(ex&&ev(void 0),ey("submitting"),eL("submit_review_dialog.submit","SUBMIT_REVIEW_BUTTON"),eE({body:eN.current,event:eb,headSha:eh}))},B[27]=ex,B[28]=eh,B[29]=eb,B[30]=eL,B[31]=ev,B[32]=ey,B[33]=ek,B[34]=eE,B[35]=m):m=B[35];let eR=m;B[36]!==eA||B[37]!==ex||B[38]!==ee?.pendingReviewIDs||B[39]!==eL||B[40]!==ev||B[41]!==ey?(h=()=>{0===(ee?.pendingReviewIDs??[]).length||confirm("Are you sure you want to cancel? You will lose all your pending comments.")&&(ex&&ev(void 0),ey("canceling"),eL("submit_review_dialog.cancel","CANCEL_REVIEW_BUTTON"),eA())},B[36]=eA,B[37]=ex,B[38]=ee?.pendingReviewIDs,B[39]=eL,B[40]=ev,B[41]=ey,B[42]=h):h=B[42],ee?.pendingReviewIDs;let eO=h;B[43]!==ec||B[44]!==Q||B[45]!==ed?(f=ny({isPROpen:ec,viewerAllowedNonCommentReviewTypes:Q,viewerIsAuthor:ed}),B[43]=ec,B[44]=Q,B[45]=ed,B[46]=f):f=B[46];let eP=f;B[47]!==eL||B[48]!==ep?(p=()=>{window.innerWidth<768?ep("dialog"):ep("anchored"),eL("submit_review_dialog.open","REVIEW_CHANGES_BUTTON")},B[47]=eL,B[48]=ep,B[49]=p):p=B[49];let eF=p;B[50]!==ep?(g=()=>{ep("none")},B[50]=ep,B[51]=g):g=B[51];let eM=g;B[52]!==ep?(x=()=>{ep("none")},B[52]=ep,B[53]=x):x=B[53];let e$=x;B[54]!==eM||B[55]!==eF||B[56]!==ef?(v=()=>{"none"===ef?eF():eM()},B[54]=eM,B[55]=eF,B[56]=ef,B[57]=v):v=B[57];let eB=v;B[58]!==er||B[59]!==e$||B[60]!==eT||B[61]!==eR||B[62]!==e_||B[63]!==ec||B[64]!==eD||B[65]!==eb||B[66]!==eo||B[67]!==Q||B[68]!==eu||B[69]!==Z||B[70]!==ed||B[71]!==J?(j=(0,o.jsx)(nj,{initialReviewBody:e_,isPROpen:ec,onReviewBodyChange:eD,reviewEvent:eb,viewerAllowedNonCommentReviewTypes:Q,viewerCanWriteToRepo:eu,viewerHasViolatedPushPolicy:Z,viewerIsAuthor:ed,viewerIsCopilotAttributed:J,commentsList:er,totalPendingComments:eo,handleNavigateToDiffComment:e$,handleReviewSubmit:eR,handleReviewEventChange:eT}),B[58]=er,B[59]=e$,B[60]=eT,B[61]=eR,B[62]=e_,B[63]=ec,B[64]=eD,B[65]=eb,B[66]=eo,B[67]=Q,B[68]=eu,B[69]=Z,B[70]=ed,B[71]=J,B[72]=j):j=B[72];let eV=j;if(eP.isHidden)return null;B[73]!==ex||B[74]!==eM||B[75]!==eO||B[76]!==eR||B[77]!==ew||B[78]!==eP||B[79]!==eg||B[80]!==ek?(w=()=>(0,o.jsx)(nb,{errorMessage:ex,hasPendingReviews:ew,reviewSubmissionState:eg,handleReviewCancel:eO,handleCloseReviewDialog:eM,handleReviewSubmit:eR,submitDisabled:ek,reviewMenuButtonDisplayState:eP}),B[73]=ex,B[74]=eM,B[75]=eO,B[76]=eR,B[77]=ew,B[78]=eP,B[79]=eg,B[80]=ek,B[81]=w):w=B[81];let eU=w,eq=eo||void 0;B[82]!==eB||B[83]!==eP.text||B[84]!==eq?(C=(0,o.jsxs)(em.Q,{count:eq,className:tX,trailingAction:T.TriangleDownIcon,variant:"primary",onClick:eB,size:"small",ref:eC,children:["Submit ",eP.text]}),B[82]=eB,B[83]=eP.text,B[84]=eq,B[85]=C):C=B[85],B[86]===Symbol.for("react.memo_cache_sentinel")?(_=(0,o.jsx)(np,{portalName:ng}),B[86]=_):_=B[86];let eH="anchored"===ef;return B[87]===Symbol.for("react.memo_cache_sentinel")?(N={regular:"anchored",narrow:"fullscreen"},B[87]=N):N=B[87],B[88]===Symbol.for("react.memo_cache_sentinel")?(S={disabled:!0},I={role:"dialog","aria-labelledby":"anchored-review-title","aria-modal":"true",portalContainerName:ng},B[88]=S,B[89]=I):(S=B[88],I=B[89]),B[90]!==eP.text?(L=(0,o.jsxs)(X.A,{as:"h1",className:"flex-1 f5",variant:"small",id:"anchored-review-title",children:["Finish your ",eP.text]}),B[90]=eP.text,B[91]=L):L=B[91],B[92]!==ew||B[93]!==ep?(D=ew&&(0,o.jsx)(el.K,{icon:T.MaximizeIcon,className:t3,variant:"invisible","aria-label":"Expand this section",onClick:()=>ep("dialog")}),B[92]=ew,B[93]=ep,B[94]=D):D=B[94],B[95]!==eM?(E=(0,o.jsx)(el.K,{icon:T.XIcon,variant:"invisible","aria-label":"Close",onClick:eM}),B[95]=eM,B[96]=E):E=B[96],B[97]!==D||B[98]!==E?(A=(0,o.jsxs)(tU.B,{direction:"horizontal",align:"center",gap:"none",children:[D,E]}),B[97]=D,B[98]=E,B[99]=A):A=B[99],B[100]!==L||B[101]!==A?(R=(0,o.jsxs)(tU.B,{direction:"horizontal",align:"center",justify:"space-between",className:"py-2 border-bottom pl-3 pr-2",children:[L,A]}),B[100]=L,B[101]=A,B[102]=R):R=B[102],B[103]!==eV?(O=(0,o.jsx)("div",{className:t4,children:eV}),B[103]=eV,B[104]=O):O=B[104],B[105]!==eU?(P=(0,o.jsx)("div",{className:"p-3 border-top",children:(0,o.jsx)(eU,{})}),B[105]=eU,B[106]=P):P=B[106],B[107]!==eM||B[108]!==eH||B[109]!==R||B[110]!==O||B[111]!==P?(F=(0,o.jsxs)(tq.T,{open:eH,anchorRef:eC,width:"xlarge",onClose:eM,displayCloseButton:!1,variant:N,renderAnchor:null,focusZoneSettings:S,overlayProps:I,children:[R,O,P]}),B[107]=eM,B[108]=eH,B[109]=R,B[110]=O,B[111]=P,B[112]=F):F=B[112],B[113]!==eV||B[114]!==eU||B[115]!==eM||B[116]!==ef||B[117]!==eP.text?(M="dialog"===ef&&(0,o.jsx)(y.l,{onClose:eM,returnFocusRef:eC,"aria-label":"Review changes",position:{narrow:"fullscreen",regular:"right",wide:"right"},title:`Finish your ${eP.text}`,renderFooter:()=>(0,o.jsx)(y.l.Footer,{children:(0,o.jsx)(eU,{})}),children:eV}),B[113]=eV,B[114]=eU,B[115]=eM,B[116]=ef,B[117]=eP.text,B[118]=M):M=B[118],B[119]!==C||B[120]!==F||B[121]!==M?($=(0,o.jsxs)(o.Fragment,{children:[C,_,F,M]}),B[119]=C,B[120]=F,B[121]=M,B[122]=$):$=B[122],$}:function({currentUserLogin:e,pullRequest:t,repository:n,redirectOnMutation:i=!0}){let{author:a,pathName:s,state:r,viewerAllowedNonCommentReviewTypes:l,viewerHasViolatedPushPolicy:d,viewerIsCopilotAttributed:c,comparison:u}=t,m=(0,k.ys)(),h=(0,k.HZ)(),{persistedReview:f,persistReviewToStorage:p,removePersistedReviewFromStorage:g}=tY(s),x=t6(m?.pendingReviewIDs,h),v=x?.length??0,j=a?.login===e,w=r!==tH.Q.Closed&&r!==tH.Q.Merged,C="WRITE"===n.viewerPermission||"ADMIN"===n.viewerPermission,_=u.headOid,[N,S]=(0,tV.A)("none"),[I,L]=(0,tV.A)("idle"),[D,E]=(0,tV.A)(),[A,R]=(0,tV.A)(f?.event??tG.comment),O=(m?.pendingReviewIDs??[]).length>0,P=(0,b.useRef)(null),F=f?.text??"",M=(0,b.useRef)(F),[$,B]=(0,tV.A)(!!f?.text),V="submitting"===I||!$&&A===tG.comment&&!v,{sendPullRequestAnalyticsEvent:U}=(0,es.q)(),q=(0,b.useCallback)(e=>{M.current=e,B(!!e.trim()),p(A,e)},[p,A,B]),H=(0,b.useCallback)(e=>{Object.values(tG).includes(e)&&(R(e),p(e,M.current))},[p,R]),{mutate:G}=tK({onSuccess:({redirectUrl:e})=>{g(),i&&(window.location.href=e)},onError:e=>{L("idle"),E(e.message)}}),{mutate:K}=tW({onSuccess:({redirectUrl:e})=>{g(),i&&(window.location.href=e)},onError:e=>{L("idle"),E(e.message)}}),W=(0,b.useCallback)(()=>{V||(D&&E(void 0),L("submitting"),U("submit_review_dialog.submit","SUBMIT_REVIEW_BUTTON"),G({body:M.current,event:A,headSha:_}))},[D,_,A,U,E,L,V,G]),z=(0,b.useCallback)(()=>{0===(m?.pendingReviewIDs??[]).length||confirm("Are you sure you want to cancel? You will lose all your pending comments.")&&(D&&E(void 0),L("canceling"),U("submit_review_dialog.cancel","CANCEL_REVIEW_BUTTON"),K())},[K,D,m?.pendingReviewIDs,U,E,L]),Q=(0,b.useMemo)(()=>ny({isPROpen:w,viewerAllowedNonCommentReviewTypes:l,viewerIsAuthor:j}),[l,j,w]),Z=(0,b.useCallback)(()=>{window.innerWidth<768?S("dialog"):S("anchored"),U("submit_review_dialog.open","REVIEW_CHANGES_BUTTON")},[U,S]),J=(0,b.useCallback)(()=>{S("none")},[S]),Y=(0,b.useCallback)(()=>{S("none")},[S]),ee=(0,b.useCallback)(()=>{"none"===N?Z():J()},[J,Z,N]),et=(0,b.useMemo)(()=>(0,o.jsx)(nj,{initialReviewBody:F,isPROpen:w,onReviewBodyChange:q,reviewEvent:A,viewerAllowedNonCommentReviewTypes:l,viewerCanWriteToRepo:C,viewerHasViolatedPushPolicy:d,viewerIsAuthor:j,viewerIsCopilotAttributed:c,commentsList:x,totalPendingComments:v,handleNavigateToDiffComment:Y,handleReviewSubmit:W,handleReviewEventChange:H}),[x,Y,H,W,F,w,q,A,v,l,C,d,j,c]);if(Q.isHidden)return null;let en=()=>(0,o.jsx)(nb,{errorMessage:D,hasPendingReviews:O,reviewSubmissionState:I,handleReviewCancel:z,handleCloseReviewDialog:J,handleReviewSubmit:W,submitDisabled:V,reviewMenuButtonDisplayState:Q});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(em.Q,{count:v||void 0,className:tX,trailingAction:T.TriangleDownIcon,variant:"primary",onClick:ee,size:"small",ref:P,children:["Submit ",Q.text]}),(0,o.jsx)(np,{portalName:ng}),(0,o.jsxs)(tq.T,{open:"anchored"===N,anchorRef:P,width:"xlarge",onClose:J,displayCloseButton:!1,variant:{regular:"anchored",narrow:"fullscreen"},renderAnchor:null,focusZoneSettings:{disabled:!0},overlayProps:{role:"dialog","aria-labelledby":"anchored-review-title","aria-modal":"true",portalContainerName:ng},children:[(0,o.jsxs)(tU.B,{direction:"horizontal",align:"center",justify:"space-between",className:"py-2 border-bottom pl-3 pr-2",children:[(0,o.jsxs)(X.A,{as:"h1",className:"flex-1 f5",variant:"small",id:"anchored-review-title",children:["Finish your ",Q.text]}),(0,o.jsxs)(tU.B,{direction:"horizontal",align:"center",gap:"none",children:[O&&(0,o.jsx)(el.K,{icon:T.MaximizeIcon,className:t3,variant:"invisible","aria-label":"Expand this section",onClick:()=>S("dialog")}),(0,o.jsx)(el.K,{icon:T.XIcon,variant:"invisible","aria-label":"Close",onClick:J})]})]}),(0,o.jsx)("div",{className:t4,children:et}),(0,o.jsx)("div",{className:"p-3 border-top",children:(0,o.jsx)(en,{})})]}),"dialog"===N&&(0,o.jsx)(y.l,{onClose:J,returnFocusRef:P,"aria-label":"Review changes",position:{narrow:"fullscreen",regular:"right",wide:"right"},title:`Finish your ${Q.text}`,renderFooter:()=>(0,o.jsx)(y.l.Footer,{children:(0,o.jsx)(en,{})}),children:et})]})},nv=(0,d.Z6)()?e=>{let t,n,i,a,s,r,l=(0,c.c)(13);l[0]!==e?({ref:a,initialValue:t,onChange:n,...i}=e,l[0]=e,l[1]=t,l[2]=n,l[3]=i,l[4]=a):(t=l[1],n=l[2],i=l[3],a=l[4]);let[d,u]=(0,tV.A)(t);l[5]!==n||l[6]!==u?(s=e=>{u(e),n(e)},l[5]=n,l[6]=u,l[7]=s):s=l[7];let m=s;return l[8]!==m||l[9]!==i||l[10]!==a||l[11]!==d?(r=(0,o.jsx)(tB.S,{...i,value:d,onChange:m,ref:a}),l[8]=m,l[9]=i,l[10]=a,l[11]=d,l[12]=r):r=l[12],r}:({ref:e,initialValue:t,onChange:n,...i})=>{let[a,s]=(0,tV.A)(t),r=(0,b.useCallback)(e=>{s(e),n(e)},[s,n]);return(0,o.jsx)(tB.S,{...i,value:a,onChange:r,ref:e})};nv.displayName="ControlledCommentBox";let nb=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m=(0,c.c)(28),{errorMessage:h,handleReviewCancel:f,handleCloseReviewDialog:p,handleReviewSubmit:g,hasPendingReviews:y,submitDisabled:x,reviewMenuButtonDisplayState:v,reviewSubmissionState:b}=e,j="canceling"===b,w="submitting"===b;m[0]!==h?(t=h&&(0,o.jsxs)(tn.A,{className:t2,variant:"danger",children:[(0,o.jsx)(T.StopIcon,{className:"mr-2"}),h]}),m[0]=h,m[1]=t):t=m[1],m[2]!==f||m[3]!==y||m[4]!==j||m[5]!==w||m[6]!==v.text?(n=y?(0,o.jsx)(em.Q,{disabled:j||w,loading:j,onClick:f,tabIndex:0,variant:"danger",children:(0,o.jsxs)(tU.B,{direction:"horizontal",align:"center",children:["Discard ",v.text]})}):(0,o.jsx)("div",{}),m[2]=f,m[3]=y,m[4]=j,m[5]=w,m[6]=v.text,m[7]=n):n=m[7];let C=j||w;m[8]!==p||m[9]!==C?(i=(0,o.jsx)(em.Q,{onClick:p,disabled:C,children:"Cancel"}),m[8]=p,m[9]=C,m[10]=i):i=m[10];let _=x||w;return m[11]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(t7.U,{keys:"Mod+enter"}),m[11]=a):a=m[11],m[12]!==v.text?(s=(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-center",children:["Submit ",v.text]}),m[12]=v.text,m[13]=s):s=m[13],m[14]!==g||m[15]!==w||m[16]!==_||m[17]!==s?(r=(0,o.jsx)(em.Q,{disabled:_,variant:"primary",onClick:g,loading:w,className:t1,trailingVisual:a,children:s}),m[14]=g,m[15]=w,m[16]=_,m[17]=s,m[18]=r):r=m[18],m[19]!==i||m[20]!==r?(l=(0,o.jsxs)("div",{className:"d-flex flex-row gap-2",children:[i,r]}),m[19]=i,m[20]=r,m[21]=l):l=m[21],m[22]!==n||m[23]!==l?(d=(0,o.jsxs)("div",{className:"d-flex flex-row flex-1 flex-items-center flex-justify-between gap-2",children:[n,l]}),m[22]=n,m[23]=l,m[24]=d):d=m[24],m[25]!==t||m[26]!==d?(u=(0,o.jsxs)(o.Fragment,{children:[t,d]}),m[25]=t,m[26]=d,m[27]=u):u=m[27],u}:function({errorMessage:e,handleReviewCancel:t,handleCloseReviewDialog:n,handleReviewSubmit:i,hasPendingReviews:a,submitDisabled:s,reviewMenuButtonDisplayState:r,reviewSubmissionState:l}){let d="canceling"===l,c="submitting"===l;return(0,o.jsxs)(o.Fragment,{children:[e&&(0,o.jsxs)(tn.A,{className:t2,variant:"danger",children:[(0,o.jsx)(T.StopIcon,{className:"mr-2"}),e]}),(0,o.jsxs)("div",{className:"d-flex flex-row flex-1 flex-items-center flex-justify-between gap-2",children:[a?(0,o.jsx)(em.Q,{disabled:d||c,loading:d,onClick:t,tabIndex:0,variant:"danger",children:(0,o.jsxs)(tU.B,{direction:"horizontal",align:"center",children:["Discard ",r.text]})}):(0,o.jsx)("div",{}),(0,o.jsxs)("div",{className:"d-flex flex-row gap-2",children:[(0,o.jsx)(em.Q,{onClick:n,disabled:d||c,children:"Cancel"}),(0,o.jsx)(em.Q,{disabled:s||c,variant:"primary",onClick:i,loading:c,className:t1,trailingVisual:(0,o.jsx)(t7.U,{keys:"Mod+enter"}),children:(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-center",children:["Submit ",r.text]})})]})]})]})},nj=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(24),{initialReviewBody:d,isPROpen:u,onReviewBodyChange:m,reviewEvent:h,viewerAllowedNonCommentReviewTypes:f,viewerCanWriteToRepo:p,viewerHasViolatedPushPolicy:g,viewerIsAuthor:y,viewerIsCopilotAttributed:x,commentsList:v,totalPendingComments:j,handleNavigateToDiffComment:w,handleReviewSubmit:C,handleReviewEventChange:_}=e,N=(0,b.useRef)(null);return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=window.setTimeout(()=>N.current?.focus());return()=>{window.clearTimeout(e)}},n=[],l[0]=t,l[1]=n):(t=l[0],n=l[1]),(0,b.useEffect)(t,n),l[2]!==C||l[3]!==d||l[4]!==m?(i=(0,o.jsx)(nv,{ref:N,label:"Add review comment",placeholder:"Leave a comment",className:t0,initialValue:d,onChange:m,onPrimaryAction:C}),l[2]=C,l[3]=d,l[4]=m,l[5]=i):i=l[5],l[6]!==_||l[7]!==C||l[8]!==u||l[9]!==h||l[10]!==f||l[11]!==p||l[12]!==g||l[13]!==y||l[14]!==x?(a=(0,o.jsx)(ns,{isPROpen:u,reviewEvent:h,viewerAllowedNonCommentReviewTypes:f,viewerCanWriteToRepo:p,viewerHasViolatedPushPolicy:g,viewerIsAuthor:y,viewerIsCopilotAttributed:x,handleReviewEventChange:_,handleReviewSubmit:C}),l[6]=_,l[7]=C,l[8]=u,l[9]=h,l[10]=f,l[11]=p,l[12]=g,l[13]=y,l[14]=x,l[15]=a):a=l[15],l[16]!==v||l[17]!==w||l[18]!==j?(s=(0,o.jsx)(nh,{totalPendingComments:j,commentsList:v,handleNavigateToDiffComment:w}),l[16]=v,l[17]=w,l[18]=j,l[19]=s):s=l[19],l[20]!==i||l[21]!==a||l[22]!==s?(r=(0,o.jsxs)(o.Fragment,{children:[i,a,s]}),l[20]=i,l[21]=a,l[22]=s,l[23]=r):r=l[23],r}:function({initialReviewBody:e,isPROpen:t,onReviewBodyChange:n,reviewEvent:i,viewerAllowedNonCommentReviewTypes:a,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:l,viewerIsCopilotAttributed:d,commentsList:c,totalPendingComments:u,handleNavigateToDiffComment:m,handleReviewSubmit:h,handleReviewEventChange:f}){let p=(0,b.useRef)(null);return(0,b.useEffect)(()=>{let e=window.setTimeout(()=>p.current?.focus());return()=>{window.clearTimeout(e)}},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nv,{ref:p,label:"Add review comment",placeholder:"Leave a comment",className:t0,initialValue:e,onChange:n,onPrimaryAction:h}),(0,o.jsx)(ns,{isPROpen:t,reviewEvent:i,viewerAllowedNonCommentReviewTypes:a,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:l,viewerIsCopilotAttributed:d,handleReviewEventChange:f,handleReviewSubmit:h}),(0,o.jsx)(nh,{totalPendingComments:u,commentsList:c,handleNavigateToDiffComment:m})]})};try{nx.displayName||(nx.displayName="ReviewMenuButton")}catch{}try{(i=ReviewMenuBody).displayName||(i.displayName="ReviewMenuBody")}catch{}try{(a=ReviewMenuFooter).displayName||(a.displayName="ReviewMenuFooter")}catch{}try{nb.displayName||(nb.displayName="ReviewMenuFooterComponent")}catch{}try{nj.displayName||(nj.displayName="ReviewMenuBodyComponent")}catch{}var nw=n(27028),nC=n(39029);let n_="RefreshButton-module__refresh--gOrN1";var nN=n(91747),nS=n(43073),nI=n(3433);let nk=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(6),{aliveChannel:s,pathName:r}=e,[l,d]=(0,b.useState)(!1),u=(0,nS.E)(),m=(0,nN.u)("combined_pr_changes_route")?`${r}/changes`:`${r}/files`,{markComparisonOutdated:h}=(0,k.yo)();a[0]!==h?(t=()=>{h(),d(!0)},a[0]=h,a[1]=t):t=a[1];let f=t;if(a[2]===Symbol.for("react.memo_cache_sentinel")?(n={git_updated:!0},a[2]=n):n=a[2],(0,nC.G)(s,f,n),!l)return null;if(u){let e;return a[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(nD,{}),a[3]=e):e=a[3],e}return a[4]!==m?(i=(0,o.jsx)(nL,{refreshUrl:m}),a[4]=m,a[5]=i):i=a[5],i}:function({aliveChannel:e,pathName:t}){let[n,i]=(0,b.useState)(!1),a=(0,nS.E)(),s=(0,nN.u)("combined_pr_changes_route")?`${t}/changes`:`${t}/files`,{markComparisonOutdated:r}=(0,k.yo)();return((0,nC.G)(e,()=>{r(),i(!0)},{git_updated:!0}),n)?a?(0,o.jsx)(nD,{}):(0,o.jsx)(nL,{refreshUrl:s}):null},nL=(0,d.Z6)()?function(e){let t,n,i=(0,c.c)(5),{refreshUrl:a}=e;i[0]!==a?(t=e=>{e.preventDefault(),window.location.href=a},i[0]=a,i[1]=t):t=i[1];let s=t;return i[2]!==s||i[3]!==a?(n=(0,o.jsx)(em.Q,{as:A.A,variant:"invisible",href:a,className:n_,leadingVisual:T.SyncIcon,size:"small",onClick:s,children:"Refresh"}),i[2]=s,i[3]=a,i[4]=n):n=i[4],n}:function({refreshUrl:e}){return(0,o.jsx)(em.Q,{as:A.A,variant:"invisible",href:e,className:n_,leadingVisual:T.SyncIcon,size:"small",onClick:t=>{t.preventDefault(),window.location.href=e},children:"Refresh"})},nD=(0,d.Z6)()?function(){let e,t,n=(0,c.c)(4),i=(0,nI.zy)(),[a,s]=(0,b.useState)(!1);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=async()=>{s(!0)},n[0]=e):e=n[0];let r=e;return n[1]!==a||n[2]!==i.pathname?(t=(0,o.jsx)(em.Q,{as:nI.N_,to:i.pathname,variant:"invisible",className:n_,leadingVisual:T.SyncIcon,size:"small",onClick:r,loading:a,preventScrollReset:!0,children:"Refresh"}),n[1]=a,n[2]=i.pathname,n[3]=t):t=n[3],t}:function(){let e=(0,nI.zy)(),[t,n]=(0,b.useState)(!1),i=async()=>{n(!0)};return(0,o.jsx)(em.Q,{as:nI.N_,to:e.pathname,variant:"invisible",className:n_,leadingVisual:T.SyncIcon,size:"small",onClick:i,loading:t,preventScrollReset:!0,children:"Refresh"})};try{nk.displayName||(nk.displayName="RefreshButton")}catch{}try{nL.displayName||(nL.displayName="NavigatorRefreshButton")}catch{}try{nD.displayName||(nD.displayName="DataRouterRefreshButton")}catch{}var nT=n(40523),nE=n(68874),nA=n(14808);function nR(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,v,j,w,_,N,S,I,k,L=(0,c.c)(77),{ref:D,items:T,onMultiSelect:E,onSingleSelect:A,onApply:R,onCancel:O,buttonProps:P,anchorLabel:F,variant:M,title:$,dialogProps:B}=e,V=void 0===M?"overlay":M,U=(0,b.useRef)(null),[q,H]=(0,b.useState)(!1),[G,K]=(0,b.useState)();L[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>({open:()=>H(!0)}),L[0]=t):t=L[0],(0,b.useImperativeHandle)(D,t),L[1]!==T?(n=T.reduce(nB,{single:[],multiple:[]}),L[1]=T,L[2]=n):n=L[2];let W=n;L[3]!==W?(i=()=>W,L[3]=W,L[4]=i):i=L[4];let[z,Q]=(0,b.useState)(i);L[5]!==z?.multiple||L[6]!==z?.single?(a=e=>{Q({single:z?.single.map(t=>t.id===e.id?{...t,selected:!t.selected}:t.selected?{...t,selected:!1}:t)||[],multiple:z?.multiple||[]})},L[5]=z?.multiple,L[6]=z?.single,L[7]=a):a=L[7];let Z=a;L[8]!==z?.multiple||L[9]!==z?.single?(s=e=>{let t=z?.multiple.map(t=>t.id===e.id?{...t,selected:!t.selected}:t)||[];Q({single:z?.single||[],multiple:t})},L[8]=z?.multiple,L[9]=z?.single,L[10]=s):s=L[10];let J=s;L[11]!==z?.multiple||L[12]!==E||L[13]!==W?.multiple?(r=E?W?.multiple.filter(nM).length:z?.multiple.filter(n$).length||0,L[11]=z?.multiple,L[12]=E,L[13]=W?.multiple,L[14]=r):r=L[14];let Y=r;L[15]!==G?.multiple?(l=G?.multiple.filter(nF).length||0,L[15]=G?.multiple,L[16]=l):l=L[16];let X=l,ee=Y&&0!==X?`${X} commit${X>1?"s":""} selected`:"Select commits";L[17]!==z||L[18]!==R?(d=()=>{K(z),H(!1),R&&R(z?.multiple.filter(nP)||[])},L[17]=z,L[18]=R,L[19]=d):d=L[19];let et=d;L[20]!==O||L[21]!==W?(u=()=>{Q(W),K(W),O?.()},L[20]=O,L[21]=W,L[22]=u):u=L[22];let en=u;L[23]!==q?(m=()=>H(!q),L[23]=q,L[24]=m):m=L[24];let ei=F||ee;L[25]!==P||L[26]!==m||L[27]!==ei?(h=(0,o.jsx)(em.Q,{ref:U,onClick:m,...P,children:ei}),L[25]=P,L[26]=m,L[27]=ei,L[28]=h):h=L[28],L[29]!==z?.single||L[30]!==G?.multiple||L[31]!==W?(f=()=>{Q({single:z?.single||[],multiple:G?.multiple||W.multiple}),H(!1)},L[29]=z?.single,L[30]=G?.multiple,L[31]=W,L[32]=f):f=L[32],L[33]===Symbol.for("react.memo_cache_sentinel")?(p={focusOutBehavior:"wrap",focusableElementFilter:nO},L[33]=p):p=L[33],L[34]!==en?(g=()=>{en(),H(!1)},L[34]=en,L[35]=g):g=L[35],L[36]!==z?.single||L[37]!==A||L[38]!==W?(y=A?W.single:z?.single||[],L[36]=z?.single,L[37]=A,L[38]=W,L[39]=y):y=L[39],L[40]!==Z||L[41]!==A||L[42]!==V?(x=e=>{A?A(e):Z(e),"modal"!==V&&H(!1)},L[40]=Z,L[41]=A,L[42]=V,L[43]=x):x=L[43],L[44]!==y||L[45]!==x?(v=(0,o.jsx)(nV,{selectionVariant:"single",items:y,onSelect:x,showGroupHeading:!1}),L[44]=y,L[45]=x,L[46]=v):v=L[46],L[47]!==z?.multiple||L[48]!==E||L[49]!==W?(j=E?W.multiple:z?.multiple||[],L[47]=z?.multiple,L[48]=E,L[49]=W,L[50]=j):j=L[50];let ea=E??J;return L[51]!==j||L[52]!==ea?(w=(0,o.jsx)(nV,{selectionVariant:"multiple",items:j,onSelect:ea}),L[51]=j,L[52]=ea,L[53]=w):w=L[53],L[54]!==v||L[55]!==w?(_=(0,o.jsx)("div",{className:"CommitSelector-module__CommitSelectorContainer--_atPn",children:(0,o.jsxs)(C.l,{role:"listbox",selectionVariant:"single","aria-label":"Selection",children:[v,w]})}),L[54]=v,L[55]=w,L[56]=_):_=L[56],L[57]!==en||L[58]!==Y||L[59]!==et||L[60]!==V?(N=Y&&"modal"!==V?(0,o.jsx)(nA.G9,{footerButtons:[{content:"Apply",onClick:et,action:"save"},{content:"Clear",onClick:en,action:"cancel"}]}):null,L[57]=en,L[58]=Y,L[59]=et,L[60]=V,L[61]=N):N=L[61],L[62]!==_||L[63]!==N?(S=(0,o.jsxs)("div",{className:"CommitSelector-module__CommitSelectorWrapper--Wp_n9",children:[_,N]}),L[62]=_,L[63]=N,L[64]=S):S=L[64],L[65]!==B||L[66]!==q||L[67]!==et||L[68]!==f||L[69]!==g||L[70]!==S||L[71]!==$||L[72]!==V?(I=(0,o.jsx)(nA.KA,{open:q,anchorRef:U,headingId:"select-label",onClose:f,variant:V,focusZoneSettings:p,title:$,dialogProps:B,selectSave:et,selectCancel:g,children:S}),L[65]=B,L[66]=q,L[67]=et,L[68]=f,L[69]=g,L[70]=S,L[71]=$,L[72]=V,L[73]=I):I=L[73],L[74]!==h||L[75]!==I?(k=(0,o.jsxs)(o.Fragment,{children:[h,I]}),L[74]=h,L[75]=I,L[76]=k):k=L[76],k}function nO(e){return"BUTTON"!==e.tagName}function nP(e){return e.selected}function nF(e){return e.selected}function nM(e){return e.selected}function n$(e){return e.selected}function nB(e,t){return"single"===t.selectionVariant?{...e,single:[...e.single,t]}:"multiple"===t.selectionVariant?{...e,multiple:[...e.multiple,t]}:e}function nV(e){let t,n=(0,c.c)(5),{items:i,onSelect:a,selectionVariant:s,showGroupHeading:r}=e,l=void 0===r||r;return n[0]!==i||n[1]!==a||n[2]!==s||n[3]!==l?(t=(0,o.jsx)(nA.LR,{selectionVariant:s,items:i,showGroupHeading:l,onSelect:a}),n[0]=i,n[1]=a,n[2]=s,n[3]=l,n[4]=t):t=n[4],t}try{nR.displayName||(nR.displayName="CommitSelector")}catch{}try{nV.displayName||(nV.displayName="CommitSelectorBody")}catch{}function nU({endOid:e,startOid:t,firstCommitInRange:n}){return n&&e&&n===e?`Commit ${e.slice(0,7)}`:t&&e?`${t.slice(0,7)}..${e.slice(0,7)}`:"All commits"}var nq=n(68534);let nH=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,g,y,x,v,j,w,C=(0,c.c)(71),{ownerLogin:_,repositoryName:N,pullRequestNumber:S,commits:I,lastReviewOid:L,variant:D}=e,E=void 0===D?"default":D,{baseOid:A,headOid:R}=(0,k.E4)(),O=(0,k.ww)(),{fullDiff:P}=(0,k.L3)(),{baseOid:F}=P,M=(0,nN.u)("combined_pr_changes_route");C[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.G7)("verbose_commit_selector_announcements"),C[0]=t):t=C[0];let $=t,B=(0,b.useRef)(null);C[1]!==I?(n=I.map(nG),C[1]=I,C[2]=n):n=C[2];let V=n;e:{if(!A){i=void 0;break e}if(A===F){i=V[0];break e}let e=V.findIndex(e=>e===A);if(e<0){i=void 0;break e}i=V[e+1]}let U=i;C[3]!==R||C[4]!==U||C[5]!==A?(a=nU({endOid:R,startOid:A,firstCommitInRange:U}),C[3]=R,C[4]=U,C[5]=A,C[6]=a):a=C[6];let q=a;t:{let e,t;if(!A||!R){s=void 0;break t}let n=A?V.indexOf(A)+1:-1;C[7]!==V||C[8]!==R?(e=R?V.indexOf(R):-1,C[7]=V,C[8]=R,C[9]=e):e=C[9];let i=e;if(n<0||i<0){s=void 0;break t}C[10]!==i||C[11]!==n?(t={start:n,end:i},C[10]=i,C[11]=n,C[12]=t):t=C[12],s=t}let H=s;C[13]!==H?(r=()=>H,C[13]=H,C[14]=r):r=C[14];let[G,K]=(0,b.useState)(r);n:{let e;if(!G){let e;C[15]===Symbol.for("react.memo_cache_sentinel")?(e=new Set,C[15]=e):e=C[15],l=e;break n}C[16]!==V||C[17]!==G.end||C[18]!==G.start?(e=new Set(V.slice(G.start,G.end+1)),C[16]=V,C[17]=G.end,C[18]=G.start,C[19]=e):e=C[19],l=e}let W=l;if(C[20]!==V||C[21]!==I||C[22]!==R||C[23]!==O||C[24]!==L||C[25]!==W||C[26]!==A){let e,t,n;d=[];let i=`${I.length} commit${1!==I.length?"s":""}`,a=!O;C[28]!==i||C[29]!==a?(e={id:"all-commits",label:"All commits",description:i,descriptionVariant:"block",selectionVariant:"single",selected:a},C[28]=i,C[29]=a,C[30]=e):e=C[30],d.push(e);let s=I[I.length-1]?.oid,r=!1,l=!1;if(L)if(s)if(L===s)t="No new commits since last review",r=!0;else{let e=V.indexOf(L),n=e>=0?V.length-e-1:I.length;t=`${n} commit${1!==n?"s":""}`,l=A===L&&R===s}else t="No commits available",r=!0;else t="No previous review found",r=!0;for(let[e,i]of(C[31]!==l||C[32]!==t||C[33]!==r?(n={id:"changes-since-review",label:"Changes since your last review",description:t,descriptionVariant:"block",selectionVariant:"single",selected:l,disabled:r},C[31]=l,C[32]=t,C[33]=r,C[34]=n):n=C[34],d.push(n),I.entries()))d.push({id:i.oid,label:i.messageHeadline,description:`${i.actorLogin} committed ${(0,nE.V)(new Date(i.createdAt))}`,descriptionVariant:"block",selectionVariant:"multiple",selected:W.has(i.oid),groupId:1,groupTitle:0===e?"Select a range of commits":void 0,trailingVisual:i.shortOid});C[20]=V,C[21]=I,C[22]=R,C[23]=O,C[24]=L,C[25]=W,C[26]=A,C[27]=d}else d=C[27];let z=d;C[35]!==M||C[36]!==_||C[37]!==S||C[38]!==N?(u=e=>{let t;if(M)if("unfiltered"===e.type)t=(0,eQ.tvs)({owner:_,repo:N,number:S});else if("range"===e.type){let n=e.fromPRBase?"BASE":e.baseOid;t=(0,eQ.zLJ)({owner:_,repo:N,number:S,base:n,head:e.endOid})}else t=(0,eQ.zLJ)({owner:_,repo:N,number:S,head:e.oid});else if("unfiltered"===e.type)t=(0,eQ.jrm)({owner:_,repo:N,number:S});else if("range"===e.type){let n=e.fromPRBase?void 0:e.baseOid;t=(0,eQ.nSV)({owner:_,repo:N,number:S,base:n,head:e.endOid})}else t=(0,eQ.yIb)({owner:_,repo:N,number:S,commit:e.oid});window.location.href=t},C[35]=M,C[36]=_,C[37]=S,C[38]=N,C[39]=u):u=C[39];let Q=u;C[40]!==F||C[41]!==I||C[42]!==L||C[43]!==Q?(m=e=>{if("all-commits"===e.id)Q({type:"unfiltered"});else if("changes-since-review"===e.id&&L){let e=I[I.length-1]?.oid;e&&Q({type:"range",fromPRBase:L===F,baseOid:L,endOid:e})}},C[40]=F,C[41]=I,C[42]=L,C[43]=Q,C[44]=m):m=C[44];let Z=m;C[45]!==V||C[46]!==W||C[47]!==G?(h=e=>{let t,n=V.indexOf(e.id),i=W.has(e.id)?"removed":"added";if(G){if(G.start!==G.end||"removed"!==i){let{newStartIndex:e,newEndIndex:a}=function(e,t,n,i){let a,s;return"added"===i?(a=Math.min(e,t),s=Math.max(e,n)):e===t?(a=t+1,s=n):(a=t,s=e-1),{newStartIndex:a,newEndIndex:s}}(n,G.start,G.end,i);t={start:e,end:a}}}else t="added"===i?{start:n,end:n}:void 0;if(t){if(void 0!==t.start&&t.start===t.end){let e=t.start+1,n=V[t.start];if(n){let t=(0,nq.F)(n),i=$?`Commit ${t} selected`:`Commit ${e} selected`;(0,t_.i)(i)}}else if(void 0!==t.start&&void 0!==t.end){let e=t.start+1,n=t.end+1,i=V[t.start],a=V[t.end];if(i&&a){let t=(0,nq.F)(i),s=(0,nq.F)(a),r=$?`Commits ${t} to ${s} selected`:`Commits ${e} to ${n} selected`;(0,t_.i)(r)}}}else(0,t_.i)("No commits selected");K(t)},C[45]=V,C[46]=W,C[47]=G,C[48]=h):h=C[48];let J=h;C[49]!==F||C[50]!==V||C[51]!==H?.end||C[52]!==H?.start||C[53]!==Q||C[54]!==G?(g=()=>{let e,t;G&&(G.start!==H?.start||G.end!==H?.end)&&((G.start>0||G.end<V.length-1||1===V.length)&&(e=G.start>0?V[G.start-1]:F,t=V[G.end]),e&&t?G.start===G.end?Q({type:"single",oid:t}):Q({type:"range",fromPRBase:e===F,baseOid:e,endOid:t}):Q({type:"unfiltered"}))},C[49]=F,C[50]=V,C[51]=H?.end,C[52]=H?.start,C[53]=Q,C[54]=G,C[55]=g):g=C[55],H?.start,H?.end;let Y=g;C[56]!==H?(y=()=>{K(H)},C[56]=H,C[57]=y):y=C[57];let X=y;C[58]===Symbol.for("react.memo_cache_sentinel")?(x=(0,o.jsx)(p.ak,{commands:{"pull-request-files-changed:open-commits-list":()=>{B.current?.open()}}}),C[58]=x):x=C[58];let ee="condensed"===E?void 0:T.VersionsIcon,et="condensed"===E?"invisible":"default";return C[59]!==ee||C[60]!==et?(v={id:"changes-selector-button",size:"small",leadingVisual:ee,variant:et,trailingAction:T.TriangleDownIcon},C[59]=ee,C[60]=et,C[61]=v):v=C[61],C[62]===Symbol.for("react.memo_cache_sentinel")?(j={height:"large"},C[62]=j):j=C[62],C[63]!==q||C[64]!==z||C[65]!==Y||C[66]!==X||C[67]!==J||C[68]!==Z||C[69]!==v?(w=(0,o.jsxs)(o.Fragment,{children:[x,(0,o.jsx)(nR,{buttonProps:v,anchorLabel:q,ref:B,dialogProps:j,items:z,onSingleSelect:Z,onMultiSelect:J,onApply:Y,onCancel:X,variant:"modal",title:"Select commits to view"})]}),C[63]=q,C[64]=z,C[65]=Y,C[66]=X,C[67]=J,C[68]=Z,C[69]=v,C[70]=w):w=C[70],w}:function({ownerLogin:e,repositoryName:t,pullRequestNumber:n,commits:i,lastReviewOid:a,variant:s="default"}){let{baseOid:r,headOid:l}=(0,k.E4)(),d=(0,k.ww)(),{fullDiff:{baseOid:c}}=(0,k.L3)(),u=(0,nN.u)("combined_pr_changes_route"),m=(0,f.G7)("verbose_commit_selector_announcements"),h=(0,b.useRef)(null),g=(0,b.useMemo)(()=>i.map(e=>e.oid),[i]),y=(0,b.useMemo)(()=>{if(!r)return;if(r===c)return g[0];let e=g.findIndex(e=>e===r);if(!(e<0))return g[e+1]},[c,g,r]),x=nU({endOid:l,startOid:r,firstCommitInRange:y}),v=(0,b.useMemo)(()=>{if(!r||!l)return;let e=r?g.indexOf(r)+1:-1,t=l?g.indexOf(l):-1;if(!(e<0)&&!(t<0))return{start:e,end:t}},[r,l,g]),[j,w]=(0,b.useState)(()=>v),C=(0,b.useMemo)(()=>j?new Set(g.slice(j.start,j.end+1)):new Set,[j,g]),_=(0,b.useMemo)(()=>{let e,t=[];t.push({id:"all-commits",label:"All commits",description:`${i.length} commit${1!==i.length?"s":""}`,descriptionVariant:"block",selectionVariant:"single",selected:!d});let n=i[i.length-1]?.oid,s=!1,o=!1;if(a)if(n)if(a===n)e="No new commits since last review",s=!0;else{let t=g.indexOf(a),s=t>=0?g.length-t-1:i.length;e=`${s} commit${1!==s?"s":""}`,o=r===a&&l===n}else e="No commits available",s=!0;else e="No previous review found",s=!0;for(let[n,a]of(t.push({id:"changes-since-review",label:"Changes since your last review",description:e,descriptionVariant:"block",selectionVariant:"single",selected:o,disabled:s}),i.entries()))t.push({id:a.oid,label:a.messageHeadline,description:`${a.actorLogin} committed ${(0,nE.V)(new Date(a.createdAt))}`,descriptionVariant:"block",selectionVariant:"multiple",selected:C.has(a.oid),groupId:1,groupTitle:0===n?"Select a range of commits":void 0,trailingVisual:a.shortOid});return t},[i,d,a,r,l,C,g]),N=(0,b.useCallback)(i=>{let a;if(u)if("unfiltered"===i.type)a=(0,eQ.tvs)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?"BASE":i.baseOid;a=(0,eQ.zLJ)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eQ.zLJ)({owner:e,repo:t,number:n,head:i.oid});else if("unfiltered"===i.type)a=(0,eQ.jrm)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?void 0:i.baseOid;a=(0,eQ.nSV)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,eQ.yIb)({owner:e,repo:t,number:n,commit:i.oid});window.location.href=a},[e,t,n,u]),S=(0,b.useCallback)((e,t,n,i)=>{let a,s;return"added"===i?(a=Math.min(e,t),s=Math.max(e,n)):e===t?(a=t+1,s=n):(a=t,s=e-1),{newStartIndex:a,newEndIndex:s}},[]),I=(0,b.useCallback)(e=>{let t,n=g.indexOf(e.id),i=C.has(e.id)?"removed":"added";if(j){if(j.start!==j.end||"removed"!==i){let{newStartIndex:e,newEndIndex:a}=S(n,j.start,j.end,i);t={start:e,end:a}}}else t="added"===i?{start:n,end:n}:void 0;if(t){if(void 0!==t.start&&t.start===t.end){let e=t.start+1,n=g[t.start];if(n){let t=(0,nq.F)(n),i=m?`Commit ${t} selected`:`Commit ${e} selected`;(0,t_.i)(i)}}else if(void 0!==t.start&&void 0!==t.end){let e=t.start+1,n=t.end+1,i=g[t.start],a=g[t.end];if(i&&a){let t=(0,nq.F)(i),s=(0,nq.F)(a),r=m?`Commits ${t} to ${s} selected`:`Commits ${e} to ${n} selected`;(0,t_.i)(r)}}}else(0,t_.i)("No commits selected");w(t)},[g,C,j,S,w,m]),L=(0,b.useCallback)(()=>{let e,t;j&&(j.start!==v?.start||j.end!==v?.end)&&((j.start>0||j.end<g.length-1||1===g.length)&&(e=j.start>0?g[j.start-1]:c,t=g[j.end]),e&&t?j.start===j.end?N({type:"single",oid:t}):N({type:"range",fromPRBase:e===c,baseOid:e,endOid:t}):N({type:"unfiltered"}))},[j,v?.start,v?.end,g,c,N]),D=(0,b.useCallback)(()=>{w(v)},[w,v]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.ak,{commands:{"pull-request-files-changed:open-commits-list":()=>{h.current?.open()}}}),(0,o.jsx)(nR,{buttonProps:{id:"changes-selector-button",size:"small",leadingVisual:"condensed"===s?void 0:T.VersionsIcon,variant:"condensed"===s?"invisible":"default",trailingAction:T.TriangleDownIcon},anchorLabel:x,ref:h,dialogProps:{height:"large"},items:_,onSingleSelect:e=>{if("all-commits"===e.id)N({type:"unfiltered"});else if("changes-since-review"===e.id&&a){let e=i[i.length-1]?.oid;e&&N({type:"range",fromPRBase:a===c,baseOid:a,endOid:e})}},onMultiSelect:I,onApply:L,onCancel:D,variant:"modal",title:"Select commits to view"})]})};function nG(e){return e.oid}try{nH.displayName||(nH.displayName="ChangesSelector")}catch{}var nK=n(33644),nW=n(2694),nz=n(81070),nQ=n(33195);let nZ="PullRequestFilesToolbar-module__is-stuck--pCXhL",nJ="PullRequestFilesToolbar-module__show-when-stuck--ONyyF",nY="PullRequestFilesToolbar-module__hide-when-stuck-large--jRjpF",nX="PullRequestFilesToolbar-module__pr-title-details--NZamC",n0="PullRequestFilesToolbar-module__pr-sticky-title--Fu24T",n1="PullRequestFilesToolbar-module__file-controls--XN2fA",n2="PullRequestFilesToolbar-module__file-controls-navigation--Ti_xo",n3="PullRequestFilesToolbar-module__file-controls-divider--oWuSw",n4="PullRequestFilesToolbar-module__toolbar--bXrnB",n5="PullRequestFilesToolbar-module__simple-toolbar--q_1hU",n6="PullRequestFilesToolbar-module__stickyHeaderActivationThreshold--hlyC0";var n7=n(21968),n8=n(34261),n9=n(89155);let ie=(0,d.Z6)()?function(){let e,t,n,i=(0,c.c)(7),a=(0,k.Kp)(),{updateWhitespace:s}=(0,k.yo)();return i[0]!==a?(e=async e=>{let{hideWhitespace:t}=e,n=`${a}/page_data/${eg.uT.updateWhitespacePreference}`,i=await (0,ev.q$)(n,{method:"POST",body:{w:+!!t}}),s=await (0,ev.hp)(i);return(0,ev.R)(i,s),s},i[0]=a,i[1]=e):e=i[1],i[2]!==s?(t=e=>{s(e.ignoreWhitespace)},i[2]=s,i[3]=t):t=i[3],i[4]!==e||i[5]!==t?(n={mutationFn:e,onSuccess:t},i[4]=e,i[5]=t,i[6]=n):n=i[6],(0,ex.n)(n)}:function(){let e=(0,k.Kp)(),{updateWhitespace:t}=(0,k.yo)();return(0,ex.n)({mutationFn:async({hideWhitespace:t})=>{let n=`${e}/page_data/${eg.uT.updateWhitespacePreference}`,i=await (0,ev.q$)(n,{method:"POST",body:{w:+!!t}}),a=await (0,ev.hp)(i);return(0,ev.R)(i,a),a},onSuccess:e=>{t(e.ignoreWhitespace)}})};var it=n(73783),ii=n(61583);let ia=(0,d.Z6)()?function(){let e,t,n,i=(0,c.c)(9),a=(0,k.mU)(),s=(0,k.$W)(a),r=(0,k.qX)(),l=is;i[0]!==s||i[1]!==r?(e=()=>{if(s.length>0){let e,t=r(),n=t?s.findIndex(e=>e.pathDigest===t):0;e=n<=0?s.length-1:n-1;let i=s[e];i&&l(i.pathDigest)}},i[0]=s,i[1]=r,i[2]=e):e=i[2];let o=e;i[3]!==s||i[4]!==r?(t=()=>{if(s.length>0){let e,t=r(),n=t?s.findIndex(e=>e.pathDigest===t):0;e=n>=s.length-1||n<0?0:n+1;let i=s[e];i&&l(i.pathDigest)}},i[3]=s,i[4]=r,i[5]=t):t=i[5];let d=t;return i[6]!==d||i[7]!==o?(n={navigateToPrevious:o,navigateToNext:d},i[6]=d,i[7]=o,i[8]=n):n=i[8],n}:function(){let e=(0,k.mU)(),t=(0,k.$W)(e),n=(0,k.qX)(),i=(0,b.useCallback)(e=>{(0,ii.pk)(`diff-${e}`),(0,S.kd)(window.location.href)},[]);return{navigateToPrevious:(0,b.useCallback)(()=>{if(t.length>0){let e,a=n(),s=a?t.findIndex(e=>e.pathDigest===a):0;e=s<=0?t.length-1:s-1;let r=t[e];r&&i(r.pathDigest)}},[t,n,i]),navigateToNext:(0,b.useCallback)(()=>{if(t.length>0){let e,a=n(),s=a?t.findIndex(e=>e.pathDigest===a):0;e=s>=t.length-1||s<0?0:s+1;let r=t[e];r&&i(r.pathDigest)}},[t,n,i])}};function is(e){(0,ii.pk)(`diff-${e}`),(0,S.kd)(window.location.href)}var ir=n(19415);let il="SingleFileModeOnboardingPopover-module__PopoverContainer--wtwv5",io="SingleFileModeOnboardingPopover-module__PopoverContent--zQnno",id="SingleFileModeOnboardingPopover-module__Heading--BRcrc";function ic(e){return(e??[]).filter(e=>!e.dismissed)}let iu=(0,d.Z6)()?function(e,t){let n,i=(0,c.c)(5),a=ic(t);if(i[0]!==a||i[1]!==e){let t;i[3]!==e?(t=t=>t.name===e,i[3]=e,i[4]=t):t=i[4],n=a.filter(t),i[0]=a,i[1]=e,i[2]=n}else n=i[2];return 0===n.length}:function(e,t){return 0===ic(t).filter(t=>t.name===e).length},im=(0,d.Z6)()?function(e,t){let n,i,a=(0,c.c)(5),s=iu(e,t);a[0]!==s||a[1]!==e?(n=()=>{(0,tc.M3)()&&!s&&(0,eS.DI)((0,eQ.VB1)({noticeName:e}),{method:"POST"})},a[0]=s,a[1]=e,a[2]=n):n=a[2];let r=n;return a[3]!==r?(i={dismissNotice:r},a[3]=r,a[4]=i):i=a[4],i}:function(e,t){let n=iu(e,t);return{dismissNotice:(0,b.useCallback)(()=>{(0,tc.M3)()&&!n&&(0,eS.DI)((0,eQ.VB1)({noticeName:e}),{method:"POST"})},[n,e])}},ih="single_file_mode",ip=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u=(0,c.c)(12),{userNotices:m}=e,h=iu(ih,m),f=(0,k.j5)(),[p,g]=(0,b.useState)(!0),{dismissNotice:y}=im(ih,m);u[0]!==y?(t=()=>{y(),g(!1)},u[0]=y,u[1]=t):t=u[1];let x=t;return!f||h?null:(u[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,v.$)("d-flex flex-column gap-2",io),i=(0,o.jsx)(X.A,{as:"h3",variant:"small",className:id,children:"You're in single-file mode"}),a=(0,o.jsx)("p",{children:"Due to the large number of changes in this pull request, only one file is being shown at a time."}),u[2]=n,u[3]=i,u[4]=a):(n=u[2],i=u[3],a=u[4]),u[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)("strong",{children:"Previous"}),u[5]=s):s=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsxs)("p",{children:["Use the ",s," and ",(0,o.jsx)("strong",{children:"Next"})," buttons to move between files."]}),u[6]=r):r=u[6],u[7]!==x?(l=(0,o.jsxs)(ir.A.Content,{className:n,children:[i,a,r,(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsx)(em.Q,{onClick:x,children:"OK, got it"})})]}),u[7]=x,u[8]=l):l=u[8],u[9]!==p||u[10]!==l?(d=(0,o.jsx)(ir.A,{className:il,open:p,children:l}),u[9]=p,u[10]=l,u[11]=d):d=u[11],d)}:function({userNotices:e}){let t=iu(ih,e),n=(0,k.j5)(),[i,a]=(0,b.useState)(!0),{dismissNotice:s}=im(ih,e);return!n||t?null:(0,o.jsx)(ir.A,{className:il,open:i,children:(0,o.jsxs)(ir.A.Content,{className:(0,v.$)("d-flex flex-column gap-2",io),children:[(0,o.jsx)(X.A,{as:"h3",variant:"small",className:id,children:"You're in single-file mode"}),(0,o.jsx)("p",{children:"Due to the large number of changes in this pull request, only one file is being shown at a time."}),(0,o.jsxs)("p",{children:["Use the ",(0,o.jsx)("strong",{children:"Previous"})," and ",(0,o.jsx)("strong",{children:"Next"})," buttons to move between files."]}),(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsx)(em.Q,{onClick:()=>{s(),a(!1)},children:"OK, got it"})})]})})};try{ip.displayName||(ip.displayName="SingleFileModeOnboardingPopover")}catch{}var ig=n(44569);let iy=(0,d.Z6)()?function(e){let t,n,i,a,s,r=(0,c.c)(12),{userNotices:l}=e,d=(0,ig.zw)(),{navigateToPrevious:u,navigateToNext:m}=ia();return r[0]!==u?(t=(0,o.jsx)(el.K,{icon:T.ChevronUpIcon,"aria-label":d?"Previous file (K)":"Previous file",size:"small",onClick:u,"data-hotkey":"k"}),r[0]=u,r[1]=t):t=r[1],r[2]!==m?(n=(0,o.jsx)(el.K,{icon:T.ChevronDownIcon,"aria-label":d?"Next file (J)":"Next file",size:"small",onClick:m,"data-hotkey":"j"}),r[2]=m,r[3]=n):n=r[3],r[4]!==t||r[5]!==n?(i=(0,o.jsxs)(it.A,{children:[t,n]}),r[4]=t,r[5]=n,r[6]=i):i=r[6],r[7]!==l?(a=(0,o.jsx)(ip,{userNotices:l}),r[7]=l,r[8]=a):a=r[8],r[9]!==i||r[10]!==a?(s=(0,o.jsxs)("div",{className:"position-relative",children:[i,a]}),r[9]=i,r[10]=a,r[11]=s):s=r[11],s}:function({userNotices:e}){let t=(0,ig.zw)(),{navigateToPrevious:n,navigateToNext:i}=ia();return(0,o.jsxs)("div",{className:"position-relative",children:[(0,o.jsxs)(it.A,{children:[(0,o.jsx)(el.K,{icon:T.ChevronUpIcon,"aria-label":t?"Previous file (K)":"Previous file",size:"small",onClick:n,"data-hotkey":"k"}),(0,o.jsx)(el.K,{icon:T.ChevronDownIcon,"aria-label":t?"Next file (J)":"Next file",size:"small",onClick:i,"data-hotkey":"j"})]}),(0,o.jsx)(ip,{userNotices:e})]})};try{iy.displayName||(iy.displayName="ReviewNavigationButtonGroup")}catch{}let ix=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,v,j,w,_,N=(0,c.c)(49),{pageLimits:S,pullRequest:I,hideWhitespace:L,onUpdateWhitespace:D,additionalPreferences:E}=e,[A,R]=(0,b.useState)(!1),[O,P]=(0,b.useState)(!1),[F,M]=(0,b.useState)(!1),[$,B]=(0,b.useState)(!1),V=(0,b.useRef)(null),U=(0,k.wI)(),q=(0,k.Qb)(),{sendPullRequestAnalyticsEvent:H}=(0,es.q)();N[0]!==U?(t=U?Object.values(U):[],N[0]=U,N[1]=t):t=N[1];let G=t,K=G.length;N[2]!==H?(n=()=>{H("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),e2(),R(!0),M(!1)},N[2]=H,N[3]=n):n=N[3];let W=n;N[4]!==H?(i=()=>{H("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),e2(),P(!0),M(!1)},N[4]=H,N[5]=i):i=N[5];let z=i;return N[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(e4.W.Anchor,{children:(0,o.jsx)(el.K,{ref:V,icon:T.KebabHorizontalIcon,variant:"default",size:"small","aria-label":"More options"})}),N[6]=a):a=N[6],N[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.CommentDiscussionIcon,{})}),N[7]=s):s=N[7],N[8]!==q?(r=q>0&&(0,o.jsx)(C.l.TrailingVisual,{children:q}),N[8]=q,N[9]=r):r=N[9],N[10]!==W||N[11]!==r?(l=(0,o.jsxs)(C.l.Item,{onSelect:W,children:[s,"Comments",r]}),N[10]=W,N[11]=r,N[12]=l):l=N[12],N[13]!==z||N[14]!==K?(d=K>0&&(0,o.jsxs)(C.l.Item,{onSelect:z,children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.AlertIcon,{})}),"Alerts",(0,o.jsx)(C.l.TrailingVisual,{children:K})]}),N[13]=z,N[14]=K,N[15]=d):d=N[15],N[16]!==l||N[17]!==d?(u=(0,o.jsxs)(C.l.Group,{children:[l,d]}),N[16]=l,N[17]=d,N[18]=u):u=N[18],N[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,o.jsx)(C.l.Divider,{}),N[19]=m):m=N[19],N[20]===Symbol.for("react.memo_cache_sentinel")?(h=(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.GearIcon,{})}),N[20]=h):h=N[20],N[21]===Symbol.for("react.memo_cache_sentinel")?(f=(0,o.jsx)(e4.W.Anchor,{children:(0,o.jsxs)(C.l.Item,{children:[h,"Settings",(0,o.jsx)(C.l.TrailingVisual,{children:(0,o.jsx)(T.ChevronRightIcon,{})})]})}),N[21]=f):f=N[21],N[22]!==E||N[23]!==L||N[24]!==D?(p=(0,o.jsx)(e4.W.Overlay,{side:"outside-bottom",align:"end",children:(0,o.jsx)(C.l,{children:(0,o.jsx)(nw.Q,{reloadOnWhitespaceChange:!0,onUpdateWhitespace:D,defaultHideWhitespace:L,additionalPreferences:E})})}),N[22]=E,N[23]=L,N[24]=D,N[25]=p):p=N[25],N[26]!==$||N[27]!==p?(g=(0,o.jsx)(C.l.Group,{children:(0,o.jsxs)(e4.W,{open:$,onOpenChange:B,children:[f,p]})}),N[26]=$,N[27]=p,N[28]=g):g=N[28],N[29]!==g||N[30]!==u?(y=(0,o.jsx)(e4.W.Overlay,{align:"end",children:(0,o.jsxs)(C.l,{children:[u,m,g]})}),N[29]=g,N[30]=u,N[31]=y):y=N[31],N[32]!==F||N[33]!==y?(x=(0,o.jsxs)(e4.W,{open:F,onOpenChange:M,children:[a,y]}),N[32]=F,N[33]=y,N[34]=x):x=N[34],N[35]===Symbol.for("react.memo_cache_sentinel")?(v=()=>R(!1),N[35]=v):v=N[35],N[36]!==A||N[37]!==S||N[38]!==I.pathName?(j=(0,o.jsx)(tL,{isOpen:A,pageLimits:S,pathName:I.pathName,toggleSidesheetRef:V,onClose:v}),N[36]=A,N[37]=S,N[38]=I.pathName,N[39]=j):j=N[39],N[40]!==O||N[41]!==G||N[42]!==S||N[43]!==K?(w=K>0&&(0,o.jsx)(tF,{annotations:G,isOpen:O,pageLimits:S,returnFocusRef:V,onClose:()=>P(!1)}),N[40]=O,N[41]=G,N[42]=S,N[43]=K,N[44]=w):w=N[44],N[45]!==x||N[46]!==j||N[47]!==w?(_=(0,o.jsxs)(o.Fragment,{children:[x,j,w]}),N[45]=x,N[46]=j,N[47]=w,N[48]=_):_=N[48],_}:function({pageLimits:e,pullRequest:t,hideWhitespace:n,onUpdateWhitespace:i,additionalPreferences:a}){let[s,r]=(0,b.useState)(!1),[l,d]=(0,b.useState)(!1),[c,u]=(0,b.useState)(!1),[m,h]=(0,b.useState)(!1),f=(0,b.useRef)(null),p=(0,k.wI)(),g=(0,k.Qb)(),{sendPullRequestAnalyticsEvent:y}=(0,es.q)(),x=p?Object.values(p):[],v=x.length,j=(0,b.useCallback)(()=>{y("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),e2(),r(!0),u(!1)},[y]),w=(0,b.useCallback)(()=>{y("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),e2(),d(!0),u(!1)},[y]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(e4.W,{open:c,onOpenChange:u,children:[(0,o.jsx)(e4.W.Anchor,{children:(0,o.jsx)(el.K,{ref:f,icon:T.KebabHorizontalIcon,variant:"default",size:"small","aria-label":"More options"})}),(0,o.jsx)(e4.W.Overlay,{align:"end",children:(0,o.jsxs)(C.l,{children:[(0,o.jsxs)(C.l.Group,{children:[(0,o.jsxs)(C.l.Item,{onSelect:j,children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.CommentDiscussionIcon,{})}),"Comments",g>0&&(0,o.jsx)(C.l.TrailingVisual,{children:g})]}),v>0&&(0,o.jsxs)(C.l.Item,{onSelect:w,children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.AlertIcon,{})}),"Alerts",(0,o.jsx)(C.l.TrailingVisual,{children:v})]})]}),(0,o.jsx)(C.l.Divider,{}),(0,o.jsx)(C.l.Group,{children:(0,o.jsxs)(e4.W,{open:m,onOpenChange:h,children:[(0,o.jsx)(e4.W.Anchor,{children:(0,o.jsxs)(C.l.Item,{children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.GearIcon,{})}),"Settings",(0,o.jsx)(C.l.TrailingVisual,{children:(0,o.jsx)(T.ChevronRightIcon,{})})]})}),(0,o.jsx)(e4.W.Overlay,{side:"outside-bottom",align:"end",children:(0,o.jsx)(C.l,{children:(0,o.jsx)(nw.Q,{reloadOnWhitespaceChange:!0,onUpdateWhitespace:i,defaultHideWhitespace:n,additionalPreferences:a})})})]})})]})})]}),(0,o.jsx)(tL,{isOpen:s,pageLimits:e,pathName:t.pathName,toggleSidesheetRef:f,onClose:()=>r(!1)}),v>0&&(0,o.jsx)(tF,{annotations:x,isOpen:l,pageLimits:e,returnFocusRef:f,onClose:()=>d(!1)})]})};try{ix.displayName||(ix.displayName="ToolbarMoreMenu")}catch{}let iv=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(9),{changeGroupsPreferenceAvailable:r,showChangeGroups:l,onShowChangeGroupsChange:d}=e,{sendPullRequestAnalyticsEvent:u}=(0,es.q)();if(!r)return;s[0]!==d||s[1]!==u||s[2]!==l?(t=()=>{let e=!l;u(e?"change_group_preference.show":"change_group_preference.hide","CHANGE_GROUP_PREFERENCE_TOGGLE"),d(e)},s[0]=d,s[1]=u,s[2]=l,s[3]=t):t=s[3];let m=t;return s[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(C.l.Divider,{}),s[4]=n):n=s[4],s[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(C.l.Description,{variant:"block",children:"Organize changes into groups with Copilot"}),s[5]=i):i=s[5],s[6]!==m||s[7]!==l?(a=(0,o.jsxs)(o.Fragment,{children:[n,(0,o.jsx)(C.l.Group,{"aria-label":"Change Groups",selectionVariant:"single",children:(0,o.jsxs)(C.l.Item,{selected:l,onSelect:m,children:["Show changes by group",i]})})]}),s[6]=m,s[7]=l,s[8]=a):a=s[8],a}:function({changeGroupsPreferenceAvailable:e,showChangeGroups:t,onShowChangeGroupsChange:n}){let{sendPullRequestAnalyticsEvent:i}=(0,es.q)();if(e)return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.l.Divider,{}),(0,o.jsx)(C.l.Group,{"aria-label":"Change Groups",selectionVariant:"single",children:(0,o.jsxs)(C.l.Item,{selected:t,onSelect:()=>{let e=!t;i(e?"change_group_preference.show":"change_group_preference.hide","CHANGE_GROUP_PREFERENCE_TOGGLE"),n(e)},children:["Show changes by group",(0,o.jsx)(C.l.Description,{variant:"block",children:"Organize changes into groups with Copilot"})]})})]})};try{iv.displayName||(iv.displayName="ChangeGroupsPreferences")}catch{}var ib=n(3585);function ij(e){let t=new Map;if(!e)return t;for(let[n,i]of Object.entries(e))for(let e of Object.values(i))for(let i of e?.threads??[])for(let e of i.commentsData?.comments??[])void 0!==e.databaseId&&null!==e.databaseId&&t.set(e.databaseId,{comment:e,path:n});return t}function iw(e,t){if(!e||0===t.length)return[];let n=ij(e),i=[];for(let e of t){let t=n.get(e.commentDatabaseId);t&&i.push({commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:t.path,bodyHTML:t.comment.bodyHTML})}return i}var iC=n(3252);function i_(e,t){if(!e||0===t.length)return[];let n=ij(e),i=[];for(let e of t){let t=n.get(e.commentDatabaseId);if(!t)continue;let{comment:a,path:s}=t,r=(0,iC.T)(a.body);r&&!(e.suggestionIndex>=r.length)&&i.push({threadId:String(e.commentDatabaseId),path:s,suggestion:r})}return i}var iN=n(88008);let iS=(0,d.Z6)()?function(e,t){let n,i,a,s=(0,c.c)(11),r=(0,ey.e)(eg.uT.submitSuggestedChanges),l=(0,k.WK)(),o=(0,k.qL)(),{clearSuggestionBatch:d}=(0,k.xJ)();return s[0]!==r||s[1]!==o||s[2]!==l?(n=async e=>{let{currentOid:t,message:n}=e,i=i_(o,l.activeBatch);if(0===i.length)throw Error("No valid suggestions found in batch");let a=await (0,eS.Sr)(r,{method:"POST",headers:{Accept:"application/json"},body:{changes:i,currentOid:t,message:n}}),s=await (0,ev.hp)(a);return(0,ev.R)(a,s),s},s[0]=r,s[1]=o,s[2]=l,s[3]=n):n=s[3],s[4]!==d||s[5]!==t||s[6]!==e?(i=()=>{d(),(0,iN.hW)(e,t),$.cg?.location.reload()},s[4]=d,s[5]=t,s[6]=e,s[7]=i):i=s[7],s[8]!==n||s[9]!==i?(a={mutationFn:n,onSuccess:i},s[8]=n,s[9]=i,s[10]=a):a=s[10],(0,ex.n)(a)}:function(e,t){let n=(0,ey.e)(eg.uT.submitSuggestedChanges),i=(0,k.WK)(),a=(0,k.qL)(),{clearSuggestionBatch:s}=(0,k.xJ)();return(0,ex.n)({mutationFn:async({currentOid:e,message:t})=>{let s=i_(a,i.activeBatch);if(0===s.length)throw Error("No valid suggestions found in batch");let r=await (0,eS.Sr)(n,{method:"POST",headers:{Accept:"application/json"},body:{changes:s,currentOid:e,message:t}}),l=await (0,ev.hp)(r);return(0,ev.R)(r,l),l},onSuccess:()=>{s(),(0,iN.hW)(e,t),$.cg?.location.reload()}})},iI=(0,d.Z6)()?function(){let e,t,n,i=(0,c.c)(8),a=(0,k.Kp)(),{updateChangeGroupPreference:s}=(0,k.wL)(),{updateDiffFilter:r}=(0,k.or)();return i[0]!==a?(e=async e=>{let{showChangeGroups:t}=e,n=`${a}/page_data/${eg.uT.updateShowChangeGroupsPreference}`,i=await (0,ev.q$)(n,{method:"POST",headers:{"Content-Type":"application/json"},body:{show_change_groups:t?"true":"false"}}),s=await (0,ev.hp)(i);return(0,ev.R)(i,s),s},i[0]=a,i[1]=e):e=i[1],i[2]!==s||i[3]!==r?(t=e=>{let{showChangeGroups:t}=e;s(t),t||r({activeChangeGroupId:void 0})},i[2]=s,i[3]=r,i[4]=t):t=i[4],i[5]!==e||i[6]!==t?(n={mutationFn:e,onMutate:t},i[5]=e,i[6]=t,i[7]=n):n=i[7],(0,ex.n)(n)}:function(){let e=(0,k.Kp)(),{updateChangeGroupPreference:t}=(0,k.wL)(),{updateDiffFilter:n}=(0,k.or)();return(0,ex.n)({mutationFn:async({showChangeGroups:t})=>{let n=`${e}/page_data/${eg.uT.updateShowChangeGroupsPreference}`,i=await (0,ev.q$)(n,{method:"POST",headers:{"Content-Type":"application/json"},body:{show_change_groups:t?"true":"false"}}),a=await (0,ev.hp)(i);return(0,ev.R)(i,a),a},onMutate:({showChangeGroups:e})=>{t(e),e||n({activeChangeGroupId:void 0})}})};var ik=n(39837);let iL=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(10),{bodyHtml:r,isLoading:l,onClose:d}=e,u=(0,b.useRef)(null),m=(0,b.useRef)(null);s[0]!==r?(t=r.includes("No description provided."),s[0]=r,s[1]=t):t=s[1];let h=t;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={narrow:"fullscreen",regular:"right",wide:"right"},s[2]=n):n=s[2],s[3]!==r||s[4]!==h||s[5]!==l?(i=l?(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(ee.A,{})}):(0,o.jsx)(ik.A,{verifiedHTML:r,className:h?"fgColor-muted":void 0}),s[3]=r,s[4]=h,s[5]=l,s[6]=i):i=s[6],s[7]!==d||s[8]!==i?(a=(0,o.jsx)(y.l,{title:"Overview",initialFocusRef:u,position:n,returnFocusRef:m,onClose:d,children:i}),s[7]=d,s[8]=i,s[9]=a):a=s[9],a}:function({bodyHtml:e,isLoading:t,onClose:n}){let i=(0,b.useRef)(null),a=(0,b.useRef)(null),s=e.includes("No description provided.");return(0,o.jsx)(y.l,{title:"Overview",initialFocusRef:i,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:a,onClose:n,children:t?(0,o.jsx)("div",{className:"d-flex flex-justify-center",children:(0,o.jsx)(ee.A,{})}):(0,o.jsx)(ik.A,{verifiedHTML:e,className:s?"fgColor-muted":void 0})})};try{iL.displayName||(iL.displayName="OverviewSidePanel")}catch{}let iD=(0,d.Z6)()?function(){let e,t=(0,c.c)(2),n=(0,ey.e)(eg.uT.description);return t[0]!==n?(e={queryKey:[eg.uT.description,n],queryFn:async()=>{let e=await (0,eS.QJ)(n);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},staleTime:1/0},t[0]=n,t[1]=e):e=t[1],(0,eN.I)(e)}:function(){let e=(0,ey.e)(eg.uT.description);return(0,eN.I)({queryKey:[eg.uT.description,e],queryFn:async()=>{let t=await (0,eS.QJ)(e);if(!t.ok)throw Error(`HTTP ${t.status}`);return await t.json()},staleTime:1/0})},iT=(0,d.Z6)()?function(e){let t,n=(0,c.c)(1),{refetch:i}=iD();n[0]===Symbol.for("react.memo_cache_sentinel")?(t={body_updated:!0},n[0]=t):t=n[0],(0,nC.og)(e,i,t)}:function(e){let{refetch:t}=iD();(0,nC.og)(e,t,{body_updated:!0})},iE=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(10),{aliveChannel:r}=e,[l,d]=(0,b.useState)(!1),u=(0,b.useRef)(null),{sendPullRequestAnalyticsEvent:m}=(0,es.q)(),{data:h,isLoading:f}=iD();iT(r);let p=h?.bodyHtml||'<p class="text-italic">No description provided.</p>';return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(el.K,{inactive:!0,"aria-label":"The overview side panel cannot currently be opened.",icon:T.InfoIcon,size:"small",variant:"invisible"}),s[0]=t):t=s[0],s[1]!==m?(n=(0,o.jsx)(el.K,{ref:u,"aria-label":"Open overview side panel",icon:T.InfoIcon,size:"small",onClick:()=>{m("overview_side_panel.open","OVERVIEW_SIDE_PANEL_BUTTON"),e2(),d(!0)}}),s[1]=m,s[2]=n):n=s[2],s[3]!==p||s[4]!==f||s[5]!==l?(i=l&&(0,o.jsx)(iL,{bodyHtml:p,isLoading:f,onClose:()=>d(!1)}),s[3]=p,s[4]=f,s[5]=l,s[6]=i):i=s[6],s[7]!==n||s[8]!==i?(a=(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(Y.t,{fallback:t,children:[n,i]})}),s[7]=n,s[8]=i,s[9]=a):a=s[9],a}:function({aliveChannel:e}){let[t,n]=(0,b.useState)(!1),i=(0,b.useRef)(null),{sendPullRequestAnalyticsEvent:a}=(0,es.q)(),{data:s,isLoading:r}=iD();iT(e);let l=s?.bodyHtml||'<p class="text-italic">No description provided.</p>';return(0,o.jsx)("div",{className:"d-flex flex-items-center",children:(0,o.jsxs)(Y.t,{fallback:(0,o.jsx)(el.K,{inactive:!0,"aria-label":"The overview side panel cannot currently be opened.",icon:T.InfoIcon,size:"small",variant:"invisible"}),children:[(0,o.jsx)(el.K,{ref:i,"aria-label":"Open overview side panel",icon:T.InfoIcon,size:"small",onClick:()=>{a("overview_side_panel.open","OVERVIEW_SIDE_PANEL_BUTTON"),e2(),n(!0)}}),t&&(0,o.jsx)(iL,{bodyHtml:l,isLoading:r,onClose:()=>n(!1)})]})})};try{iE.displayName||(iE.displayName="OpenOverviewSidePanelButton")}catch{}let iA=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f=(0,c.c)(24);f[0]!==e?({aliveChannel:t,repository:s,pullRequest:i,bannersData:n,urls:r,user:l,userNotices:d,...a}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=i,f[4]=a,f[5]=s,f[6]=r,f[7]=l,f[8]=d):(t=f[1],n=f[2],i=f[3],a=f[4],s=f[5],r=f[6],l=f[7],d=f[8]);let{data:p}=(0,n8.W)(),{pullRequest:g}=p;f[9]!==t||f[10]!==n||f[11]!==i||f[12]!==s||f[13]!==r||f[14]!==l?(u={aliveChannel:t,repository:s,pullRequest:i,bannersData:n,urls:r,user:l},f[9]=t,f[10]=n,f[11]=i,f[12]=s,f[13]=r,f[14]=l,f[15]=u):u=f[15],(0,n8.W)(u),(0,n9.F)(t),f[16]!==i||f[17]!==g?(m={...i,...g},f[16]=i,f[17]=g,f[18]=m):m=f[18];let y=m;return f[19]!==a||f[20]!==s||f[21]!==y||f[22]!==d?(h=(0,o.jsx)(iR,{repository:s,pullRequest:y,userNotices:d,...a}),f[19]=a,f[20]=s,f[21]=y,f[22]=d,f[23]=h):h=f[23],h}:function({aliveChannel:e,repository:t,pullRequest:n,bannersData:i,urls:a,user:s,userNotices:r,...l}){let{data:{pullRequest:d}}=(0,n8.W)();(0,n8.W)({aliveChannel:e,repository:t,pullRequest:n,bannersData:i,urls:a,user:s}),(0,n9.F)(e);let c={...n,...d};return(0,o.jsx)(iR,{repository:t,pullRequest:c,userNotices:r,...l})},iR=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y,x,j,w,C,N,S,I,L,D,T,A,R,O,P,F,M,$,B,V,U,q,H,G,K,W,z,Q=(0,c.c)(148),{changeGroupsPreferenceAvailable:Z,commits:J,currentUserLogin:Y,fileFilter:X,isFileTreeExpanded:ee,lastReviewOid:et,pageLimits:en,pullRequest:ei,repository:ea,shouldShowViewedFilesCount:es,totalFilesCount:er,treeToggleElement:el,userNotices:eo}=e,ed=(0,nN.u)("batch_suggested_changes"),ec=(0,nN.u)("pull_request_overview_panel"),{mutate:eu}=ie(),{clearSuggestionBatch:eh,removeSuggestionFromBatch:ef}=(0,k.xJ)(),{mutate:ep}=iS(ei.pathName,ei.comparison.headOid),{mutate:eg}=iI(),ey=(0,k.WA)(),ex=ei.pathName,{hideWhitespace:ev,fullDiff:eb}=(0,k.L3)(),[ej,ew]=(0,b.useState)(!1),eC=es||!ee,[e_,eN]=(0,b.useState)(!1),eS=(0,k.j5)(),eI=(0,k.RH)(),ek=(0,k.WK)(),eL=(0,k.qL)(),[eD,eT]=(0,b.useState)(!1),eE=(0,k.Kp)(),eA=(0,k.L3)(),eR=iw(eL,ek.activeBatch),eO=eR.length;Q[0]!==eu?(t=e=>{eu({hideWhitespace:e})},Q[0]=eu,Q[1]=t):t=Q[1];let eP=t;Q[2]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e[0]&&ew(!e[0].isIntersecting)},Q[2]=n):n=Q[2];let[eF,eM]=(0,nW.B)(n);Q[3]!==eA.fullDiff.headOid||Q[4]!==eE||Q[5]!==ef||Q[6]!==ek.activeBatch?(i=e=>{ef(e),(0,iN.CE)(eE,eA.fullDiff.headOid,ek.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex))},Q[3]=eA.fullDiff.headOid,Q[4]=eE,Q[5]=ef,Q[6]=ek.activeBatch,Q[7]=i):i=Q[7];let e$=i;Q[8]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{eT(!0)},Q[8]=a):a=Q[8];let eB=a;Q[9]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{eT(!1)},Q[9]=s):s=Q[9];let eV=s;Q[10]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{eN(!0)},Q[10]=r):r=Q[10];let eU=r;Q[11]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{eN(!1)},Q[11]=l):l=Q[11];let eq=l;Q[12]!==eh||Q[13]!==eA.fullDiff.headOid||Q[14]!==eV||Q[15]!==eE?(d=()=>{eh(),(0,iN.hW)(eE,eA.fullDiff.headOid),eV(),eN(!1)},Q[12]=eh,Q[13]=eA.fullDiff.headOid,Q[14]=eV,Q[15]=eE,Q[16]=d):d=Q[16];let eH=d;Q[17]!==ep||Q[18]!==eb.headOid||Q[19]!==eV?(u=(e,t,n)=>{ep({message:e,currentOid:eb.headOid},{onSuccess:()=>{eV(),n()},onError:e=>{t(e)}})},Q[17]=ep,Q[18]=eb.headOid,Q[19]=eV,Q[20]=u):u=Q[20];let eG=u;Q[21]!==eg?(m=e=>{eg({showChangeGroups:e})},Q[21]=eg,Q[22]=m):m=Q[22];let eK=m,eW=eR.map(iO);Q[23]!==eF||Q[24]!==eM?(h=(0,o.jsx)(nz.X,{className:n6,onObserve:eF,onUnobserve:eM}),Q[23]=eF,Q[24]=eM,Q[25]=h):h=Q[25];let ez=ej&&nZ;Q[26]!==ez?(f=(0,v.$)(nK.A.stickyHeader,n4,ez),Q[26]=ez,Q[27]=f):f=Q[27],Q[28]===Symbol.for("react.memo_cache_sentinel")?(p=(0,o.jsx)("h2",{className:"sr-only",children:"Pull Request Toolbar"}),Q[28]=p):p=Q[28],Q[29]!==el?(g=(0,o.jsx)("div",{children:el}),Q[29]=el,Q[30]=g):g=Q[30],Q[31]!==ei.state?(y=(0,o.jsx)("div",{className:nJ,children:(0,o.jsx)(nQ.u,{state:ei.state})}),Q[31]=ei.state,Q[32]=y):y=Q[32],Q[33]!==J||Q[34]!==et||Q[35]!==ei.number||Q[36]!==ea.name||Q[37]!==ea.ownerLogin?(x=(0,o.jsx)("div",{className:nY,children:(0,o.jsx)(nH,{commits:J,lastReviewOid:et,ownerLogin:ea.ownerLogin,pullRequestNumber:ei.number,repositoryName:ea.name})}),Q[33]=J,Q[34]=et,Q[35]=ei.number,Q[36]=ea.name,Q[37]=ea.ownerLogin,Q[38]=x):x=Q[38],Q[39]===Symbol.for("react.memo_cache_sentinel")?(j=(0,v.$)(nJ,"min-width-0"),w=(0,v.$)("d-flex mb-n1",nX),Q[39]=j,Q[40]=w):(j=Q[39],w=Q[40]);let eQ=ei.title;Q[41]===Symbol.for("react.memo_cache_sentinel")?(C=(0,v.$)("f5 text-bold overflow-hidden no-wrap",n0),Q[41]=C):C=Q[41],Q[42]!==ei.title?(N=(0,o.jsx)("a",{href:"#top",className:"d-flex overflow-hidden fgColor-default",children:(0,o.jsx)("bdi",{className:C,children:ei.title})}),Q[42]=ei.title,Q[43]=N):N=Q[43],Q[44]!==ei.title||Q[45]!==N?(S=(0,o.jsx)(E.m,{type:"label",direction:"s",text:eQ,children:N}),Q[44]=ei.title,Q[45]=N,Q[46]=S):S=Q[46],Q[47]!==ei.number?(I=(0,o.jsxs)("span",{className:"f5 text-normal pl-2 fgColor-muted d-inline",children:["#",ei.number]}),Q[47]=ei.number,Q[48]=I):I=Q[48],Q[49]!==S||Q[50]!==I?(L=(0,o.jsxs)("div",{className:w,children:[S,I]}),Q[49]=S,Q[50]=I,Q[51]=L):L=Q[51],Q[52]!==J||Q[53]!==et||Q[54]!==ei.number||Q[55]!==ea.name||Q[56]!==ea.ownerLogin?(D=(0,o.jsx)(nH,{commits:J,lastReviewOid:et,ownerLogin:ea.ownerLogin,pullRequestNumber:ei.number,repositoryName:ea.name,variant:"condensed"}),Q[52]=J,Q[53]=et,Q[54]=ei.number,Q[55]=ea.name,Q[56]=ea.ownerLogin,Q[57]=D):D=Q[57],Q[58]===Symbol.for("react.memo_cache_sentinel")?(T=(0,v.$)("d-none d-lg-flex flex-items-center min-width-0",nX),Q[58]=T):T=Q[58],Q[59]===Symbol.for("react.memo_cache_sentinel")?(A=(0,o.jsx)("div",{className:"border-left mx-1 pr-1 d-block",style:{width:"1px",height:"16px"}}),Q[59]=A):A=Q[59],Q[60]!==ei.author||Q[61]!==ei.baseBranch||Q[62]!==ei.commitsCount||Q[63]!==ei.headBranch||Q[64]!==ei.headRepositoryName||Q[65]!==ei.headRepositoryOwnerLogin||Q[66]!==ei.id||Q[67]!==ei.isInAdvisoryRepo||Q[68]!==ei.mergedBy||Q[69]!==ei.mergedByName||Q[70]!==ei.number||Q[71]!==ei.state||Q[72]!==ea.id||Q[73]!==ea.name||Q[74]!==ea.ownerLogin?(R=(0,o.jsxs)("div",{className:T,children:[A,(0,o.jsx)(n7.O,{author:ei.author,baseBranch:ei.baseBranch,baseRepositoryOwnerLogin:ea.ownerLogin,baseRepositoryName:ea.name,commitsCount:ei.commitsCount,headBranch:ei.headBranch,headRepositoryOwnerLogin:ei.headRepositoryOwnerLogin,headRepositoryName:ei.headRepositoryName,isInAdvisoryRepo:ei.isInAdvisoryRepo,mergedBy:ei.mergedBy,mergedByName:ei.mergedByName,state:ei.state,pullRequestId:ei.id,pullRequestNumber:ei.number,repositoryId:ea.id})]}),Q[60]=ei.author,Q[61]=ei.baseBranch,Q[62]=ei.commitsCount,Q[63]=ei.headBranch,Q[64]=ei.headRepositoryName,Q[65]=ei.headRepositoryOwnerLogin,Q[66]=ei.id,Q[67]=ei.isInAdvisoryRepo,Q[68]=ei.mergedBy,Q[69]=ei.mergedByName,Q[70]=ei.number,Q[71]=ei.state,Q[72]=ea.id,Q[73]=ea.name,Q[74]=ea.ownerLogin,Q[75]=R):R=Q[75],Q[76]!==D||Q[77]!==R?(O=(0,o.jsxs)("div",{className:"f6 text-normal d-flex flex-items-center ml-n2",children:[D,R]}),Q[76]=D,Q[77]=R,Q[78]=O):O=Q[78],Q[79]!==L||Q[80]!==O?(P=(0,o.jsxs)(tU.B,{direction:"vertical",gap:"none",className:j,children:[L,O]}),Q[79]=L,Q[80]=O,Q[81]=P):P=Q[81],Q[82]!==g||Q[83]!==y||Q[84]!==x||Q[85]!==P?(F=(0,o.jsxs)(tU.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:[g,y,x,P]}),Q[82]=g,Q[83]=y,Q[84]=x,Q[85]=P,Q[86]=F):F=Q[86],Q[87]!==ex||Q[88]!==ei.aliveChannel?(M=(0,o.jsx)(nk,{aliveChannel:ei.aliveChannel,pathName:ex}),Q[87]=ex,Q[88]=ei.aliveChannel,Q[89]=M):M=Q[89],Q[90]!==es||Q[91]!==er?($=es&&(0,o.jsx)(e1,{totalFilesCount:er}),Q[90]=es,Q[91]=er,Q[92]=$):$=Q[92];let eZ=!ee&&X;return Q[93]!==eS||Q[94]!==er||Q[95]!==eo?(B=eS&&er>1&&(0,o.jsx)("div",{className:n2,children:(0,o.jsx)(iy,{userNotices:eo})}),Q[93]=eS,Q[94]=er,Q[95]=eo,Q[96]=B):B=Q[96],Q[97]!==$||Q[98]!==eZ||Q[99]!==B?(V=(0,o.jsxs)("div",{className:n1,children:[$,eZ,B]}),Q[97]=$,Q[98]=eZ,Q[99]=B,Q[100]=V):V=Q[100],Q[101]!==eC?(U=eC&&(0,o.jsx)("div",{className:n3,"data-testid":"file-controls-divider"}),Q[101]=eC,Q[102]=U):U=Q[102],Q[103]!==ed||Q[104]!==Z||Q[105]!==Y||Q[106]!==eB||Q[107]!==eU||Q[108]!==ev||Q[109]!==ee||Q[110]!==eI||Q[111]!==eK||Q[112]!==eP||Q[113]!==ec||Q[114]!==en||Q[115]!==ei||Q[116]!==ea||Q[117]!==ey||Q[118]!==eO||Q[119]!==eo?(q=eI&&ed?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(em.Q,{variant:"danger",size:"small",onClick:eU,children:"Discard batch"}),(0,o.jsxs)(em.Q,{variant:"primary",size:"small",onClick:eB,children:["Commit suggestions ",(0,o.jsx)(_.A,{className:"ml-1 color-fg-inherit",children:eO})]})]}):(0,o.jsxs)(o.Fragment,{children:[ec&&(0,o.jsx)(iE,{aliveChannel:ei.aliveChannel}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(tT,{pageLimits:en,pullRequest:ei,isFileTreeExpanded:ee})}),(0,o.jsx)(t$,{className:"d-none d-sm-flex",pageLimits:en,isFileTreeExpanded:ee}),Y&&(0,o.jsx)(nx,{currentUserLogin:Y,pullRequest:ei,repository:ea}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(nw.G,{invisible:!1,reloadOnWhitespaceChange:!0,onUpdateWhitespace:eP,defaultHideWhitespace:ev,small:!0,userNotices:eo,additionalPreferences:(0,o.jsx)(iv,{changeGroupsPreferenceAvailable:Z,showChangeGroups:ey,onShowChangeGroupsChange:eK})})}),(0,o.jsx)("div",{className:"d-flex d-sm-none",children:(0,o.jsx)(ix,{pageLimits:en,pullRequest:ei,hideWhitespace:ev,onUpdateWhitespace:eP,additionalPreferences:(0,o.jsx)(iv,{changeGroupsPreferenceAvailable:Z,showChangeGroups:ey,onShowChangeGroupsChange:eK})})})]}),Q[103]=ed,Q[104]=Z,Q[105]=Y,Q[106]=eB,Q[107]=eU,Q[108]=ev,Q[109]=ee,Q[110]=eI,Q[111]=eK,Q[112]=eP,Q[113]=ec,Q[114]=en,Q[115]=ei,Q[116]=ea,Q[117]=ey,Q[118]=eO,Q[119]=eo,Q[120]=q):q=Q[120],Q[121]!==M||Q[122]!==V||Q[123]!==U||Q[124]!==q?(H=(0,o.jsxs)(tU.B,{direction:"horizontal",align:"center",children:[M,V,U,q]}),Q[121]=M,Q[122]=V,Q[123]=U,Q[124]=q,Q[125]=H):H=Q[125],Q[126]!==f||Q[127]!==F||Q[128]!==H?(G=(0,o.jsxs)(tU.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:f,children:[p,F,H]}),Q[126]=f,Q[127]=F,Q[128]=H,Q[129]=G):G=Q[129],Q[130]!==eG||Q[131]!==eV||Q[132]!==eH||Q[133]!==e$||Q[134]!==eD||Q[135]!==ek.activeBatch.length||Q[136]!==eW?(K=eD&&eW.length>0&&(0,o.jsx)(ib.$,{authorLogins:[],batchSize:ek.activeBatch.length,onClose:eV,onCommit:eG,defaultCommitMessage:"Apply suggestions from code review",suggestions:eW,onRemoveSuggestion:e$,onDiscardBatch:eH}),Q[130]=eG,Q[131]=eV,Q[132]=eH,Q[133]=e$,Q[134]=eD,Q[135]=ek.activeBatch.length,Q[136]=eW,Q[137]=K):K=Q[137],Q[138]!==eH||Q[139]!==eq||Q[140]!==e_||Q[141]!==eO?(W=(0,o.jsx)(nT.G,{isOpen:e_,onConfirm:eH,onCancel:eq,suggestionsCount:eO}),Q[138]=eH,Q[139]=eq,Q[140]=e_,Q[141]=eO,Q[142]=W):W=Q[142],Q[143]!==h||Q[144]!==G||Q[145]!==K||Q[146]!==W?(z=(0,o.jsxs)(o.Fragment,{children:[h,G,K,W]}),Q[143]=h,Q[144]=G,Q[145]=K,Q[146]=W,Q[147]=z):z=Q[147],z}:function({changeGroupsPreferenceAvailable:e,commits:t,currentUserLogin:n,fileFilter:i,isFileTreeExpanded:a,lastReviewOid:s,pageLimits:r,pullRequest:l,repository:d,shouldShowViewedFilesCount:c,totalFilesCount:u,treeToggleElement:m,userNotices:h}){let f=(0,nN.u)("batch_suggested_changes"),p=(0,nN.u)("pull_request_overview_panel"),{mutate:g}=ie(),{clearSuggestionBatch:y,removeSuggestionFromBatch:x}=(0,k.xJ)(),{mutate:j}=iS(l.pathName,l.comparison.headOid),{mutate:w}=iI(),C=(0,k.WA)(),N=l.pathName,{hideWhitespace:S,fullDiff:I}=(0,k.L3)(),[L,D]=(0,b.useState)(!1),T=c||!a,[A,R]=(0,b.useState)(!1),O=(0,k.j5)(),P=(0,k.RH)(),F=(0,k.WK)(),M=(0,k.qL)(),[$,B]=(0,b.useState)(!1),V=(0,k.Kp)(),U=(0,k.L3)(),q=iw(M,F.activeBatch),H=q.length,G=e=>{g({hideWhitespace:e})},[K,W]=(0,nW.B)(e=>{e[0]&&D(!e[0].isIntersecting)}),z=(0,b.useCallback)(e=>{x(e),(0,iN.CE)(V,U.fullDiff.headOid,F.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex))},[x,F,V,U]),Q=(0,b.useCallback)(()=>{B(!0)},[]),Z=(0,b.useCallback)(()=>{B(!1)},[]),J=(0,b.useCallback)(()=>{R(!0)},[]),Y=(0,b.useCallback)(()=>{R(!1)},[]),X=(0,b.useCallback)(()=>{y(),(0,iN.hW)(V,U.fullDiff.headOid),Z(),R(!1)},[y,V,U,Z]),ee=(0,b.useCallback)((e,t,n)=>{j({message:e,currentOid:I.headOid},{onSuccess:()=>{Z(),n()},onError:e=>{t(e)}})},[I,j,Z]),et=e=>{w({showChangeGroups:e})},en=q.map(e=>({commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:e.path,bodyHTML:e.bodyHTML}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nz.X,{className:n6,onObserve:K,onUnobserve:W}),(0,o.jsxs)(tU.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:(0,v.$)(nK.A.stickyHeader,n4,L&&nZ),children:[(0,o.jsx)("h2",{className:"sr-only",children:"Pull Request Toolbar"}),(0,o.jsxs)(tU.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:[(0,o.jsx)("div",{children:m}),(0,o.jsx)("div",{className:nJ,children:(0,o.jsx)(nQ.u,{state:l.state})}),(0,o.jsx)("div",{className:nY,children:(0,o.jsx)(nH,{commits:t,lastReviewOid:s,ownerLogin:d.ownerLogin,pullRequestNumber:l.number,repositoryName:d.name})}),(0,o.jsxs)(tU.B,{direction:"vertical",gap:"none",className:(0,v.$)(nJ,"min-width-0"),children:[(0,o.jsxs)("div",{className:(0,v.$)("d-flex mb-n1",nX),children:[(0,o.jsx)(E.m,{type:"label",direction:"s",text:l.title,children:(0,o.jsx)("a",{href:"#top",className:"d-flex overflow-hidden fgColor-default",children:(0,o.jsx)("bdi",{className:(0,v.$)("f5 text-bold overflow-hidden no-wrap",n0),children:l.title})})}),(0,o.jsxs)("span",{className:"f5 text-normal pl-2 fgColor-muted d-inline",children:["#",l.number]})]}),(0,o.jsxs)("div",{className:"f6 text-normal d-flex flex-items-center ml-n2",children:[(0,o.jsx)(nH,{commits:t,lastReviewOid:s,ownerLogin:d.ownerLogin,pullRequestNumber:l.number,repositoryName:d.name,variant:"condensed"}),(0,o.jsxs)("div",{className:(0,v.$)("d-none d-lg-flex flex-items-center min-width-0",nX),children:[(0,o.jsx)("div",{className:"border-left mx-1 pr-1 d-block",style:{width:"1px",height:"16px"}}),(0,o.jsx)(n7.O,{author:l.author,baseBranch:l.baseBranch,baseRepositoryOwnerLogin:d.ownerLogin,baseRepositoryName:d.name,commitsCount:l.commitsCount,headBranch:l.headBranch,headRepositoryOwnerLogin:l.headRepositoryOwnerLogin,headRepositoryName:l.headRepositoryName,isInAdvisoryRepo:l.isInAdvisoryRepo,mergedBy:l.mergedBy,mergedByName:l.mergedByName,state:l.state,pullRequestId:l.id,pullRequestNumber:l.number,repositoryId:d.id})]})]})]})]}),(0,o.jsxs)(tU.B,{direction:"horizontal",align:"center",children:[(0,o.jsx)(nk,{aliveChannel:l.aliveChannel,pathName:N}),(0,o.jsxs)("div",{className:n1,children:[c&&(0,o.jsx)(e1,{totalFilesCount:u}),!a&&i,O&&u>1&&(0,o.jsx)("div",{className:n2,children:(0,o.jsx)(iy,{userNotices:h})})]}),T&&(0,o.jsx)("div",{className:n3,"data-testid":"file-controls-divider"}),P&&f?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(em.Q,{variant:"danger",size:"small",onClick:J,children:"Discard batch"}),(0,o.jsxs)(em.Q,{variant:"primary",size:"small",onClick:Q,children:["Commit suggestions ",(0,o.jsx)(_.A,{className:"ml-1 color-fg-inherit",children:H})]})]}):(0,o.jsxs)(o.Fragment,{children:[p&&(0,o.jsx)(iE,{aliveChannel:l.aliveChannel}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(tT,{pageLimits:r,pullRequest:l,isFileTreeExpanded:a})}),(0,o.jsx)(t$,{className:"d-none d-sm-flex",pageLimits:r,isFileTreeExpanded:a}),n&&(0,o.jsx)(nx,{currentUserLogin:n,pullRequest:l,repository:d}),(0,o.jsx)("div",{className:"d-none d-sm-flex",children:(0,o.jsx)(nw.G,{invisible:!1,reloadOnWhitespaceChange:!0,onUpdateWhitespace:G,defaultHideWhitespace:S,small:!0,userNotices:h,additionalPreferences:(0,o.jsx)(iv,{changeGroupsPreferenceAvailable:e,showChangeGroups:C,onShowChangeGroupsChange:et})})}),(0,o.jsx)("div",{className:"d-flex d-sm-none",children:(0,o.jsx)(ix,{pageLimits:r,pullRequest:l,hideWhitespace:S,onUpdateWhitespace:G,additionalPreferences:(0,o.jsx)(iv,{changeGroupsPreferenceAvailable:e,showChangeGroups:C,onShowChangeGroupsChange:et})})})]})]})]}),$&&en.length>0&&(0,o.jsx)(ib.$,{authorLogins:[],batchSize:F.activeBatch.length,onClose:Z,onCommit:ee,defaultCommitMessage:"Apply suggestions from code review",suggestions:en,onRemoveSuggestion:z,onDiscardBatch:X}),(0,o.jsx)(nT.G,{isOpen:A,onConfirm:X,onCancel:Y,suggestionsCount:H})]})};function iO(e){return{commentDatabaseId:e.commentDatabaseId,suggestionIndex:e.suggestionIndex,path:e.path,bodyHTML:e.bodyHTML}}try{iA.displayName||(iA.displayName="LivePullRequestFilesToolbar")}catch{}try{iR.displayName||(iR.displayName="PullRequestFilesToolbar")}catch{}function iP(e,t){(0,b.useMemo)(()=>{if(e&&t){for(let n of t)if(n.markersMap)for(let t in n.markersMap){let i=n.markersMap[t];if(i?.threads)for(let n of i.threads){let i=function(e,t){if("FILE"===e)return;let n=e[0];if(!iM(n))throw Error(`Invalid diff side character: ${n}`);let i=Number(e.slice(1)),a=-1,s="R";if(t.start){a=parseInt(t.start.slice(1));let e=t.start[0];iM(e)&&(s=e)}else a=i,s=n;return{endLine:i,endDiffSide:iF[n],startLine:a,startDiffSide:iF[s],isOutdated:!!t.outdatedReason}}(t,n),a=e.threads[Number(n.id)];if(a&&i){let{isOutdated:e,...t}=i;a.positioning=i,a.subject=t}}}}},[t,e])}let iF={L:"LEFT",R:"RIGHT"};function iM(e){return"L"===e||"R"===e}let i$="DiffComparisonViewer-module__Container--nndHZ",iB="DiffComparisonViewer-module__HiddenPane--pMKU7",iV="DiffComparisonViewer-module__PaneContain--PQMad",iU="DiffComparisonViewer-module__PaneOverflowVisible--fmHF4",iq="DiffComparisonViewer-module__RegularTreeToggle--_Zt7h",iH="DiffComparisonViewer-module__MobileTreeToggle--lAOrS",iG="DiffComparisonViewer-module__Pane--FbQgQ",iK="DiffComparisonViewer-module__WideExpanded--a6hBe",iW="DiffComparisonViewer-module__WideCollapsed--nAjUj",iz="DiffComparisonViewer-module__CompactHidden--NQ1CL",iQ="DiffComparisonViewer-module__CompactOverlay--ZnZLv",iZ="DiffComparisonViewer-module__CompactInline--jndVg",iJ="DiffComparisonViewer-module__Content--Cv2ab",iY="DiffComparisonViewer-module__SkeletonWrapper--eZhhq",iX="DiffComparisonViewer-module__SkeletonIconWrapper--e2YmQ";var i0=n(83873),i1=n(24798),i2=n(50129);function i3({basePath:e,selectedRange:t}){return[eg.uT.baseComparisonInfo,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`]}let i4=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l=(0,c.c)(17),{basePath:o,headSha:d,baseSha:u,shouldFetch:m}=e;if(l[0]!==o||l[1]!==u||l[2]!==d){let e=new URLSearchParams;u===d?e.append("range",d??""):u&&d?e.append("range",`${u}..${d}`):d&&e.append("range",d),t=o,n=eg.uT.baseComparisonInfo,i=e.toString(),l[0]=o,l[1]=u,l[2]=d,l[3]=t,l[4]=n,l[5]=i}else t=l[3],n=l[4],i=l[5];let h=`${t}/page_data/${n}?${i}`,f=u??"base-sha-not-provided";l[6]!==o||l[7]!==d||l[8]!==f?(a=i3({basePath:o,selectedRange:{baseOid:f,headOid:d}}),l[6]=o,l[7]=d,l[8]=f,l[9]=a):a=l[9];let p=a;return l[10]!==h||l[11]!==d?(s=async()=>{if(!d)return;let e=await (0,eS.QJ)(h);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()??void 0},l[10]=h,l[11]=d,l[12]=s):s=l[12],l[13]!==p||l[14]!==m||l[15]!==s?(r={queryKey:p,queryFn:s,staleTime:1/0,enabled:m},l[13]=p,l[14]=m,l[15]=s,l[16]=r):r=l[16],(0,eN.I)(r)}:function({basePath:e,headSha:t,baseSha:n,shouldFetch:i}){let a=new URLSearchParams;n===t?a.append("range",t??""):n&&t?a.append("range",`${n}..${t}`):t&&a.append("range",t);let s=`${e}/page_data/${eg.uT.baseComparisonInfo}?${a.toString()}`,r=i3({basePath:e,selectedRange:{baseOid:n??"base-sha-not-provided",headOid:t}});return(0,eN.I)({queryKey:r,queryFn:async()=>{if(!t)return;let e=await (0,eS.QJ)(s);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()??void 0},staleTime:1/0,enabled:i})},i5=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g,y=(0,c.c)(36),{fileFilter:x,isFileTreeExpanded:j,shouldShowViewedFilesCount:w,totalFilesCount:C,treeToggleElement:_,userNotices:N}=e;y[0]===Symbol.for("react.memo_cache_sentinel")?(t=["line-spacing"],y[0]=t):t=y[0];let S=t,[I,L]=(0,b.useState)(!1),D=(0,k.j5)(),T=w||!j;y[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e[0]&&L(!e[0].isIntersecting)},y[1]=n):n=y[1];let[E,A]=(0,nW.B)(n);y[2]!==E||y[3]!==A?(i=(0,o.jsx)(nz.X,{className:n6,onObserve:E,onUnobserve:A}),y[2]=E,y[3]=A,y[4]=i):i=y[4];let R=I&&nZ;y[5]!==R?(a=(0,v.$)(nK.A.stickyHeader,n5,R),y[5]=R,y[6]=a):a=y[6],y[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)("h2",{className:"sr-only",children:"Diff Comparison Toolbar"}),y[7]=s):s=y[7],y[8]!==_?(r=(0,o.jsx)(tU.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:(0,o.jsx)("div",{children:_})}),y[8]=_,y[9]=r):r=y[9],y[10]!==w||y[11]!==C?(l=w&&(0,o.jsx)(e1,{totalFilesCount:C}),y[10]=w,y[11]=C,y[12]=l):l=y[12];let O=!j&&x;return y[13]!==D||y[14]!==C||y[15]!==N?(d=D&&C>1&&(0,o.jsx)("div",{className:n2,children:(0,o.jsx)(iy,{userNotices:N})}),y[13]=D,y[14]=C,y[15]=N,y[16]=d):d=y[16],y[17]!==d||y[18]!==l||y[19]!==O?(u=(0,o.jsxs)("div",{className:n1,children:[l,O,d]}),y[17]=d,y[18]=l,y[19]=O,y[20]=u):u=y[20],y[21]!==T?(m=T&&(0,o.jsx)("div",{className:n3,"data-testid":"file-controls-divider"}),y[21]=T,y[22]=m):m=y[22],y[23]!==N?(h=(0,o.jsx)(nw.G,{invisible:!1,small:!0,enabledDiffViewSettings:S,userNotices:N}),y[23]=N,y[24]=h):h=y[24],y[25]!==u||y[26]!==m||y[27]!==h?(f=(0,o.jsxs)(tU.B,{direction:"horizontal",align:"center",children:[u,m,h]}),y[25]=u,y[26]=m,y[27]=h,y[28]=f):f=y[28],y[29]!==f||y[30]!==a||y[31]!==r?(p=(0,o.jsxs)(tU.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:a,children:[s,r,f]}),y[29]=f,y[30]=a,y[31]=r,y[32]=p):p=y[32],y[33]!==p||y[34]!==i?(g=(0,o.jsxs)(o.Fragment,{children:[i,p]}),y[33]=p,y[34]=i,y[35]=g):g=y[35],g}:function({fileFilter:e,isFileTreeExpanded:t,shouldShowViewedFilesCount:n,totalFilesCount:i,treeToggleElement:a,userNotices:s}){let[r,l]=(0,b.useState)(!1),d=(0,k.j5)(),c=n||!t,[u,m]=(0,nW.B)(e=>{e[0]&&l(!e[0].isIntersecting)});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nz.X,{className:n6,onObserve:u,onUnobserve:m}),(0,o.jsxs)(tU.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:(0,v.$)(nK.A.stickyHeader,n5,r&&nZ),children:[(0,o.jsx)("h2",{className:"sr-only",children:"Diff Comparison Toolbar"}),(0,o.jsx)(tU.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:(0,o.jsx)("div",{children:a})}),(0,o.jsxs)(tU.B,{direction:"horizontal",align:"center",children:[(0,o.jsxs)("div",{className:n1,children:[n&&(0,o.jsx)(e1,{totalFilesCount:i}),!t&&e,d&&i>1&&(0,o.jsx)("div",{className:n2,children:(0,o.jsx)(iy,{userNotices:s})})]}),c&&(0,o.jsx)("div",{className:n3,"data-testid":"file-controls-divider"}),(0,o.jsx)(nw.G,{invisible:!1,small:!0,enabledDiffViewSettings:["line-spacing"],userNotices:s})]})]})]})};try{i5.displayName||(i5.displayName="BasicDiffComparisonViewToolbar")}catch{}var i6=n(8624),i7=n(39467),i8=n(54571),i9=n(71833);let ae="diff-comparison-viewer-container",at=(0,d.Z6)()?function(e,t,n,i){let a,s,r,l,d,u,m,h,f,p,g,y,x,v=(0,c.c)(40);v[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],v[0]=a):a=v[0];let[j]=(0,i8.I)(aa,!0,a),w=(0,b.useRef)(null),C=(0,b.useRef)(null),_=t?"expanded":"collapsed";v[1]!==_?(s={wideMode:_,compactMode:"none"},v[1]=_,v[2]=s):s=v[2];let[N,S]=(0,b.useState)(s);v[3]!==i?(r=()=>{S(ai),(0,i9.B)(!0,i),requestAnimationFrame(()=>w.current?.focus())},v[3]=i,v[4]=r):r=v[4];let I=r;v[5]!==i?(l=()=>{S({wideMode:"collapsed",compactMode:"none"}),(0,i9.B)(!1,i),requestAnimationFrame(()=>w.current?.focus())},v[5]=i,v[6]=l):l=v[6];let k=l;v[7]!==n?(d=()=>{let e="overlay";if(n){let t=window.innerWidth;(0,i7.nn)(t)>i7.Gy.large&&(e="inline")}S(t=>({...t,compactMode:e})),requestAnimationFrame(()=>C.current?.focus())},v[7]=n,v[8]=d):d=v[8];let L=d;v[9]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{S(an),requestAnimationFrame(()=>C.current?.focus())},v[9]=u):u=v[9];let D=u;v[10]!==L||v[11]!==I||v[12]!==N.compactMode||v[13]!==N.wideMode?(m=()=>{let e=!1,t=document.getElementById(ae);if(t){let n=t.getBoundingClientRect().width;e=0===n&&$.cg?$.cg.innerWidth>=1012:n>=1012}else $.cg&&(e=$.cg.innerWidth>=1012);e?"collapsed"===N.wideMode&&I():"none"===N.compactMode&&L()},v[10]=L,v[11]=I,v[12]=N.compactMode,v[13]=N.wideMode,v[14]=m):m=v[14];let T=m,E="expanded"===N.wideMode,A="expanded"===N.wideMode?"Collapse file tree":"Expand file tree";v[15]!==k||v[16]!==I||v[17]!==N.wideMode?(h=()=>{"expanded"===N.wideMode?k():I()},v[15]=k,v[16]=I,v[17]=N.wideMode,v[18]=h):h=v[18],v[19]!==e||v[20]!==h||v[21]!==E||v[22]!==A?(f=(0,o.jsx)(i6.L,{expanded:E,alignment:"left",ariaLabel:A,tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:w,className:iq,onToggleExpanded:h,size:"small"}),v[19]=e,v[20]=h,v[21]=E,v[22]=A,v[23]=f):f=v[23];let R=f,O="none"!==N.compactMode,P="none"!==N.compactMode?"Collapse file tree":"Expand file tree";v[24]!==L||v[25]!==N.compactMode?(p=()=>{"none"!==N.compactMode?D():L()},v[24]=L,v[25]=N.compactMode,v[26]=p):p=v[26],v[27]!==e||v[28]!==O||v[29]!==P||v[30]!==p?(g=(0,o.jsx)(i6.L,{expanded:O,alignment:"left",ariaLabel:P,tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:C,className:iH,onToggleExpanded:p,size:"small"}),v[27]=e,v[28]=O,v[29]=P,v[30]=p,v[31]=g):g=v[31];let F=g;v[32]!==F||v[33]!==R?(y=(0,o.jsxs)(o.Fragment,{children:[F,R]}),v[32]=F,v[33]=R,v[34]=y):y=v[34];let M=y,B=j&&!t;return v[35]!==T||v[36]!==B||v[37]!==M||v[38]!==N?(x={splitPagePaneHidden:B,treeViewState:N,collapseMobileTree:D,expandTree:T,treeToggleElement:M},v[35]=T,v[36]=B,v[37]=M,v[38]=N,v[39]=x):x=v[39],x}:function(e,t,n,i){let[a]=(0,i8.I)(()=>!1,!0,[]),s=(0,b.useRef)(null),r=(0,b.useRef)(null),[l,d]=(0,b.useState)({wideMode:t?"expanded":"collapsed",compactMode:"none"}),c=(0,b.useCallback)(()=>{d(e=>({...e,wideMode:"expanded"})),(0,i9.B)(!0,i),requestAnimationFrame(()=>s.current?.focus())},[i]),u=(0,b.useCallback)(()=>{d({wideMode:"collapsed",compactMode:"none"}),(0,i9.B)(!1,i),requestAnimationFrame(()=>s.current?.focus())},[i]),m=(0,b.useCallback)(()=>{let e="overlay";if(n){let t=window.innerWidth;(0,i7.nn)(t)>i7.Gy.large&&(e="inline")}d(t=>({...t,compactMode:e})),requestAnimationFrame(()=>r.current?.focus())},[n]),h=(0,b.useCallback)(()=>{d(e=>({...e,compactMode:"none"})),requestAnimationFrame(()=>r.current?.focus())},[]),f=(0,b.useCallback)(()=>{let e=!1,t=document.getElementById(ae);if(t){let n=t.getBoundingClientRect().width;e=0===n&&$.cg?$.cg.innerWidth>=1012:n>=1012}else $.cg&&(e=$.cg.innerWidth>=1012);e?"collapsed"===l.wideMode&&c():"none"===l.compactMode&&m()},[l.wideMode,l.compactMode,c,m]),p=(0,b.useMemo)(()=>(0,o.jsx)(i6.L,{expanded:"expanded"===l.wideMode,alignment:"left",ariaLabel:"expanded"===l.wideMode?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:s,className:iq,onToggleExpanded:()=>{"expanded"===l.wideMode?u():c()},size:"small"}),[l.wideMode,e,u,c]),g=(0,b.useMemo)(()=>(0,o.jsx)(i6.L,{expanded:"none"!==l.compactMode,alignment:"left",ariaLabel:"none"!==l.compactMode?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:r,className:iH,onToggleExpanded:()=>{"none"!==l.compactMode?h():m()},size:"small"}),[l.compactMode,e,h,m]);return{splitPagePaneHidden:a&&!t,treeViewState:l,collapseMobileTree:h,expandTree:f,treeToggleElement:(0,b.useMemo)(()=>(0,o.jsxs)(o.Fragment,{children:[g,p]}),[g,p])}};function an(e){return{...e,compactMode:"none"}}function ai(e){return{...e,wideMode:"expanded"}}function aa(){return!1}let as=(0,d.Z6)()?function(){let e,t,n,i=(0,c.c)(7),a=(0,ey.e)(eg.uT.generateChangeGroups),{updateChangeGroupGeneration:s}=(0,k.wL)();return i[0]!==a?(e=async()=>{let e=await (0,ev.q$)(a,{method:"POST"}),t=await (0,ev.hp)(e);return(0,ev.R)(e,t),t},i[0]=a,i[1]=e):e=i[1],i[2]!==s?(t=e=>{s(e)},i[2]=s,i[3]=t):t=i[3],i[4]!==e||i[5]!==t?(n={mutationFn:e,onSuccess:t},i[4]=e,i[5]=t,i[6]=n):n=i[6],(0,ex.n)(n)}:function(){let e=(0,ey.e)(eg.uT.generateChangeGroups),{updateChangeGroupGeneration:t}=(0,k.wL)();return(0,ex.n)({mutationFn:async()=>{let t=await (0,ev.q$)(e,{method:"POST"}),n=await (0,ev.hp)(t);return(0,ev.R)(t,n),n},onSuccess:e=>{t(e)}})},ar=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(11),{changeGroupsEnabled:s}=e,r=(0,k.gt)(),l=(0,k.iY)(),o=!!(l&&l.length>0),d=(0,nN.u)("generate_groups_on_files_view"),{mutate:u}=as(),m=(0,k.Fl)();a[0]!==m?(t=m&&(ek(m.state)||!eI(m.state)),a[0]=m,a[1]=t):t=a[1];let h=t,f=(0,k.ww)(),p=(0,b.useRef)(!1);a[2]!==r||a[3]!==s||a[4]!==u||a[5]!==o||a[6]!==f||a[7]!==h||a[8]!==d?(n=()=>{p.current||!d||!s||!r||o||f||h||(u(),p.current=!0)},i=[r,d,u,o,h,f,s],a[2]=r,a[3]=s,a[4]=u,a[5]=o,a[6]=f,a[7]=h,a[8]=d,a[9]=n,a[10]=i):(n=a[9],i=a[10]),(0,b.useEffect)(n,i)}:function({changeGroupsEnabled:e}){let t=(0,k.gt)(),n=(0,k.iY)(),i=!!(n&&n.length>0),a=(0,nN.u)("generate_groups_on_files_view"),{mutate:s}=as(),r=(0,k.Fl)(),l=r&&(ek(r.state)||!eI(r.state)),o=(0,k.ww)(),d=(0,b.useRef)(!1);(0,b.useEffect)(()=>{d.current||!a||!e||!t||i||o||l||(s(),d.current=!0)},[t,a,s,i,l,o,e])};var al=n(81945);let ao=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(4),{lines:s}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={padding:"var(--base-size-6) var(--base-size-8)",borderColor:"var(--borderColor-muted)"},a[0]=t):t=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)("div",{className:"border-bottom bgColor-muted rounded-top-2",style:t,children:(0,o.jsx)("div",{className:"d-flex flex-items-center",style:{height:"var(--control-small-size)"},children:(0,o.jsx)(al.O,{height:"sm",variant:"rounded",width:"random"})})}),a[1]=n):n=a[1],a[2]!==s?(i=(0,o.jsxs)("div",{className:"border borderColor-muted rounded",children:[n,(0,o.jsx)("div",{className:"d-flex flex-column gap-2 p-3",children:Array.from({length:s||5}).map(ad)})]}),a[2]=s,a[3]=i):i=a[3],i}:function({lines:e}){return(0,o.jsxs)("div",{className:"border borderColor-muted rounded",children:[(0,o.jsx)("div",{className:"border-bottom bgColor-muted rounded-top-2",style:{padding:"var(--base-size-6) var(--base-size-8)",borderColor:"var(--borderColor-muted)"},children:(0,o.jsx)("div",{className:"d-flex flex-items-center",style:{height:"var(--control-small-size)"},children:(0,o.jsx)(al.O,{height:"sm",variant:"rounded",width:"random"})})}),(0,o.jsx)("div",{className:"d-flex flex-column gap-2 p-3",children:Array.from({length:e||5}).map((e,t)=>(0,o.jsx)(al.O,{height:"sm",variant:"rounded",width:"random"},`loading-skeleton-${t}`))})]})};function ad(e,t){return(0,o.jsx)(al.O,{height:"sm",variant:"rounded",width:"random"},`loading-skeleton-${t}`)}try{ao.displayName||(ao.displayName="EntireDiffLoadingSkeleton")}catch{}var ac=n(19976);let au=(0,d.Z6)()?function(){let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsx)(tN.E,{border:!1,spacious:!0,children:(0,o.jsx)(tN.E.Heading,{children:"No files matched your search"})})}),t[0]=e):e=t[0],e}:function(){return(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsx)(tN.E,{border:!1,spacious:!0,children:(0,o.jsx)(tN.E.Heading,{children:"No files matched your search"})})})};try{au.displayName||(au.displayName="FilesChangedFilterBlankSlate")}catch{}var am=n(59523),ah=n(16549),af=n(66358);let ap=(0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(17),{pullRequestBasePath:r,className:l,diffPath:d,viewerLogin:u}=e,m=(0,b.useId)();s[0]!==r||s[1]!==d?(t={basePath:r,diffPath:d},s[0]=r,s[1]=d,s[2]=t):t=s[2];let h=(0,I.o5)(t);if(!h)return null;let{isOwnedByViewer:f,owners:p,ruleLineNumber:g,ruleUrl:y}=h.data;if(!(f||p.length>0))return null;s[3]!==f||s[4]!==p||s[5]!==g||s[6]!==u?(n=ag(f,p,g,u),s[3]=f,s[4]=p,s[5]=g,s[6]=u,s[7]=n):n=s[7];let x=n;return s[8]!==l||s[9]!==f||s[10]!==y||s[11]!==m?(i=y?(0,o.jsx)(A.A,{"aria-labelledby":m,href:y,className:l,muted:!f,children:(0,o.jsx)(T.ShieldLockIcon,{})}):(0,o.jsx)(T.ShieldLockIcon,{className:l}),s[8]=l,s[9]=f,s[10]=y,s[11]=m,s[12]=i):i=s[12],s[13]!==i||s[14]!==x||s[15]!==m?(a=(0,o.jsx)(E.m,{id:m,"aria-label":x,text:x,children:i}),s[13]=i,s[14]=x,s[15]=m,s[16]=a):a=s[16],a}:function({pullRequestBasePath:e,className:t,diffPath:n,viewerLogin:i}){let a=(0,b.useId)(),s=(0,I.o5)({basePath:e,diffPath:n});if(!s)return null;let{isOwnedByViewer:r,owners:l,ruleLineNumber:d,ruleUrl:c}=s.data;if(!(r||l.length>0))return null;let u=ag(r,l,d,i);return(0,o.jsx)(E.m,{id:a,"aria-label":u,text:u,children:c?(0,o.jsx)(A.A,{"aria-labelledby":a,href:c,className:t,muted:!r,children:(0,o.jsx)(T.ShieldLockIcon,{})}):(0,o.jsx)(T.ShieldLockIcon,{className:t})})};function ag(e,t,n,i){let a="Owned by ",s=t;return e&&(a+="you",i&&(s=t.filter(e=>e!==`@${i}`)),s.length>0&&(a+=" along with ")),a+=s.join(", "),n&&(a+=` (from CODEOWNERS line ${n})`),a}try{ap.displayName||(ap.displayName="CodeownersBadge")}catch{}var ay=n(78252),ax=n(31675);let av="BlobActionsMenu-module__hiddenIcon--EJrTU",ab=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,p,g=(0,c.c)(46),{oid:y,path:x,repo:v,branchName:b,isViewable:j,isDeleteable:w,isEditable:_,shouldShowEditOptions:N,copilotDiffChatProps:S,returnToPullRequestPath:I,onCommentOnFile:k,onCopyPath:L,onExpandLines:D,areLinesExpanded:E,richDiffToggle:A,codeownersText:R,codeownersUrl:O}=e,P=void 0===w||w,F=void 0===_||_,M=void 0===N||N;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(e4.W.Anchor,{children:(0,o.jsx)(el.K,{icon:T.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible",size:"small"})}),g[0]=t):t=g[0],g[1]!==A?(n=A?.richDiff?.canToggleRichDiff&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(C.l.Item,{className:ax.A["hide-on-medium-up"],onSelect:A.onToggle,children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)("span",{className:A.isRichDiff?av:void 0,children:(0,o.jsx)(T.CheckIcon,{})})}),"Source diff"]}),(0,o.jsxs)(C.l.Item,{className:ax.A["hide-on-medium-up"],onSelect:A.onToggle,children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)("span",{className:A.isRichDiff?void 0:av,children:(0,o.jsx)(T.CheckIcon,{})})}),"Rich diff"]}),(0,o.jsx)(C.l.Divider,{className:ax.A["hide-on-medium-up"]})]}),g[1]=A,g[2]=n):n=g[2],g[3]!==S?(i=S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ay.$,{...S}),(0,o.jsx)(C.l.Divider,{})]}),g[3]=S,g[4]=i):i=g[4],g[5]!==k?(a=k&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(C.l.Item,{className:ax.A["hide-on-desktop"],onSelect:k,children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.CommentIcon,{})}),"Comment on this file"]}),(0,o.jsx)(C.l.Divider,{className:ax.A["hide-on-desktop"]})]}),g[5]=k,g[6]=a):a=g[6],g[7]!==L?(s=L&&(0,o.jsxs)(C.l.Item,{className:ax.A["hide-on-desktop"],onSelect:L,children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.CopyIcon,{})}),"Copy file name"]}),g[7]=L,g[8]=s):s=g[8],g[9]!==E||g[10]!==D?(r=D&&(0,o.jsxs)(C.l.Item,{className:ax.A["hide-on-desktop"],onSelect:D,children:[(0,o.jsx)(C.l.LeadingVisual,{children:E?(0,o.jsx)(T.FoldIcon,{}):(0,o.jsx)(T.UnfoldIcon,{})}),(0,o.jsx)("span",{children:E?"Collapse non-diff lines":"Expand all lines"})]}),g[9]=E,g[10]=D,g[11]=r):r=g[11],g[12]!==L||g[13]!==D?(l=(L||D)&&(0,o.jsx)(C.l.Divider,{className:ax.A["hide-on-desktop"]}),g[12]=L,g[13]=D,g[14]=l):l=g[14],g[15]!==y||g[16]!==x||g[17]!==v.name||g[18]!==v.ownerLogin?(d=(0,eQ.nD_)({repo:v.name,owner:v.ownerLogin,filePath:x,commitish:y}),g[15]=y,g[16]=x,g[17]=v.name,g[18]=v.ownerLogin,g[19]=d):d=g[19];let $=void 0===j||j?void 0:"Action unavailable";return g[20]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.EyeIcon,{})}),g[20]=u):u=g[20],g[21]!==d||g[22]!==$?(m=(0,o.jsxs)(C.l.LinkItem,{href:d,inactiveText:$,children:[u,"View file"]}),g[21]=d,g[22]=$,g[23]=m):m=g[23],g[24]!==b||g[25]!==P||g[26]!==F||g[27]!==x||g[28]!==v.name||g[29]!==v.ownerLogin||g[30]!==I||g[31]!==M?(h=b&&M&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(C.l.LinkItem,{href:(0,eQ.Nyd)({repo:v.name,owner:v.ownerLogin,filePath:x,commitish:b,returnToPrPath:I}),inactiveText:F?void 0:"Action unavailable",children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.PencilIcon,{})}),"Edit file"]}),(0,o.jsxs)(C.l.LinkItem,{variant:"danger",href:(0,eQ.Y65)({repo:v.name,owner:v.ownerLogin,filePath:x,commitish:b}),inactiveText:P?void 0:"Action unavailable",children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.TrashIcon,{})}),"Delete file"]})]}),g[24]=b,g[25]=P,g[26]=F,g[27]=x,g[28]=v.name,g[29]=v.ownerLogin,g[30]=I,g[31]=M,g[32]=h):h=g[32],g[33]!==R||g[34]!==O?(f=R&&O&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.l.Divider,{className:ax.A["hide-on-desktop"]}),(0,o.jsxs)(C.l.LinkItem,{className:ax.A["hide-on-desktop"],href:O,children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.ShieldLockIcon,{})}),R]})]}),g[33]=R,g[34]=O,g[35]=f):f=g[35],g[36]!==r||g[37]!==l||g[38]!==m||g[39]!==h||g[40]!==f||g[41]!==n||g[42]!==i||g[43]!==a||g[44]!==s?(p=(0,o.jsxs)(e4.W,{children:[t,(0,o.jsx)(e4.W.Overlay,{children:(0,o.jsxs)(C.l,{children:[n,i,a,s,r,l,m,h,f]})})]}),g[36]=r,g[37]=l,g[38]=m,g[39]=h,g[40]=f,g[41]=n,g[42]=i,g[43]=a,g[44]=s,g[45]=p):p=g[45],p}:function({oid:e,path:t,repo:n,branchName:i,isViewable:a=!0,isDeleteable:s=!0,isEditable:r=!0,shouldShowEditOptions:l=!0,copilotDiffChatProps:d,returnToPullRequestPath:c,onCommentOnFile:u,onCopyPath:m,onExpandLines:h,areLinesExpanded:f,richDiffToggle:p,codeownersText:g,codeownersUrl:y}){return(0,o.jsxs)(e4.W,{children:[(0,o.jsx)(e4.W.Anchor,{children:(0,o.jsx)(el.K,{icon:T.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible",size:"small"})}),(0,o.jsx)(e4.W.Overlay,{children:(0,o.jsxs)(C.l,{children:[p?.richDiff?.canToggleRichDiff&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(C.l.Item,{className:ax.A["hide-on-medium-up"],onSelect:p.onToggle,children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)("span",{className:p.isRichDiff?av:void 0,children:(0,o.jsx)(T.CheckIcon,{})})}),"Source diff"]}),(0,o.jsxs)(C.l.Item,{className:ax.A["hide-on-medium-up"],onSelect:p.onToggle,children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)("span",{className:p.isRichDiff?void 0:av,children:(0,o.jsx)(T.CheckIcon,{})})}),"Rich diff"]}),(0,o.jsx)(C.l.Divider,{className:ax.A["hide-on-medium-up"]})]}),d&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ay.$,{...d}),(0,o.jsx)(C.l.Divider,{})]}),u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(C.l.Item,{className:ax.A["hide-on-desktop"],onSelect:u,children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.CommentIcon,{})}),"Comment on this file"]}),(0,o.jsx)(C.l.Divider,{className:ax.A["hide-on-desktop"]})]}),m&&(0,o.jsxs)(C.l.Item,{className:ax.A["hide-on-desktop"],onSelect:m,children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.CopyIcon,{})}),"Copy file name"]}),h&&(0,o.jsxs)(C.l.Item,{className:ax.A["hide-on-desktop"],onSelect:h,children:[(0,o.jsx)(C.l.LeadingVisual,{children:f?(0,o.jsx)(T.FoldIcon,{}):(0,o.jsx)(T.UnfoldIcon,{})}),(0,o.jsx)("span",{children:f?"Collapse non-diff lines":"Expand all lines"})]}),(m||h)&&(0,o.jsx)(C.l.Divider,{className:ax.A["hide-on-desktop"]}),(0,o.jsxs)(C.l.LinkItem,{href:(0,eQ.nD_)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:a?void 0:"Action unavailable",children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.EyeIcon,{})}),"View file"]}),i&&l&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(C.l.LinkItem,{href:(0,eQ.Nyd)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:i,returnToPrPath:c}),inactiveText:r?void 0:"Action unavailable",children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.PencilIcon,{})}),"Edit file"]}),(0,o.jsxs)(C.l.LinkItem,{variant:"danger",href:(0,eQ.Y65)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:i}),inactiveText:s?void 0:"Action unavailable",children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.TrashIcon,{})}),"Delete file"]})]}),g&&y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.l.Divider,{className:ax.A["hide-on-desktop"]}),(0,o.jsxs)(C.l.LinkItem,{className:ax.A["hide-on-desktop"],href:y,children:[(0,o.jsx)(C.l.LeadingVisual,{children:(0,o.jsx)(T.ShieldLockIcon,{})}),g]})]})]})})]})};try{ab.displayName||(ab.displayName="BlobActionsMenu")}catch{}let aj="MarkAsViewedButton-module__viewed--czELS",aw="MarkAsViewedButton-module__iconOnly--tQ1ah",aC=(0,d.Z6)()?function(e,t){let n,i,a,s,r=(0,c.c)(10),{onSuccess:l,onError:o}=t,d=`${e}/file_review`;return r[0]!==d?(n=async e=>{let{viewedStatus:t,path:n}=e,i=await (0,eS.Sr)(`${d}`,{method:t?"POST":"DELETE",headers:{Accept:"application/json"},body:{path:n,viewed:t?"viewed":void 0,_method:t?void 0:"delete"}}),a=await i.json();if(i.ok)return a;throw Error(a.error||"Unknown error occurred",{cause:i.status})},r[0]=d,r[1]=n):n=r[1],r[2]!==l?(i=()=>{l()},r[2]=l,r[3]=i):i=r[3],r[4]!==o?(a=e=>{o(e)},r[4]=o,r[5]=a):a=r[5],r[6]!==n||r[7]!==i||r[8]!==a?(s={mutationFn:n,onSuccess:i,onError:a},r[6]=n,r[7]=i,r[8]=a,r[9]=s):s=r[9],(0,ex.n)(s)}:function(e,{onSuccess:t,onError:n}){let i=`${e}/file_review`;return(0,ex.n)({mutationFn:async({viewedStatus:e,path:t})=>{let n=await (0,eS.Sr)(`${i}`,{method:e?"POST":"DELETE",headers:{Accept:"application/json"},body:{path:t,viewed:e?"viewed":void 0,_method:e?void 0:"delete"}}),a=await n.json();if(n.ok)return a;throw Error(a.error||"Unknown error occurred",{cause:n.status})},onSuccess:()=>{t()},onError:e=>{n(e)}})},a_=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(27),{basePath:u,inactive:m,inactiveTooltip:h,path:f,setIsCollapsed:p}=e,g=void 0!==m&&m,y=(0,k.Mv)(f);d[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:aS,onError:aN},d[0]=t):t=d[0];let{mutate:x}=aC(u,t),{setDiffViewed:b}=(0,k.Ud)(),j=(0,k.j5)(),{navigateToNext:w}=ia();d[1]!==g||d[2]!==j||d[3]!==y||d[4]!==w||d[5]!==f||d[6]!==b||d[7]!==p||d[8]!==x?(n=()=>{g||(x({viewedStatus:!y,path:f}),b(f,!y),j?w():p(!y))},d[1]=g,d[2]=j,d[3]=y,d[4]=w,d[5]=f,d[6]=b,d[7]=p,d[8]=x,d[9]=n):n=d[9];let C=n;d[10]!==y?(i=y?(0,o.jsx)(T.CheckboxFillIcon,{className:"color-fg-accent"}):(0,o.jsx)("svg",{"aria-hidden":"true",fill:"none",height:"16",role:"img",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{clipRule:"evenodd",d:"M2.5 2.75C2.5 2.61193 2.61193 2.5 2.75 2.5H13.25C13.3881 2.5 13.5 2.61193 13.5 2.75V13.25C13.5 13.3881 13.3881 13.5 13.25 13.5H2.75C2.61193 13.5 2.5 13.3881 2.5 13.25V2.75ZM2.75 1C1.7835 1 1 1.7835 1 2.75V13.25C1 14.2165 1.7835 15 2.75 15H13.25C14.2165 15 15 14.2165 15 13.25V2.75C15 1.7835 14.2165 1 13.25 1H2.75Z",fill:"currentColor",fillRule:"evenodd"})}),d[10]=y,d[11]=i):i=d[11];let _=i,N=y?"Viewed":"Not Viewed";d[12]!==_?(a=()=>_,d[12]=_,d[13]=a):a=d[13];let S=y&&aj;d[14]!==S?(s=(0,v.$)(S,aw),d[14]=S,d[15]=s):s=d[15],d[16]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("span",{className:ax.A["hide-on-mobile"],children:"Viewed"}),d[16]=r):r=d[16],d[17]!==C||d[18]!==g||d[19]!==y||d[20]!==N||d[21]!==a||d[22]!==s?(l=(0,o.jsx)(em.Q,{"aria-pressed":y,"aria-label":N,inactive:g,size:"small",variant:"default",leadingVisual:a,className:s,onClick:C,children:r}),d[17]=C,d[18]=g,d[19]=y,d[20]=N,d[21]=a,d[22]=s,d[23]=l):l=d[23];let I=l;if(!g||!h)return I;{let e;return d[24]!==I||d[25]!==h?(e=(0,o.jsx)(E.m,{text:h,children:I}),d[24]=I,d[25]=h,d[26]=e):e=d[26],e}}:function({basePath:e,inactive:t=!1,inactiveTooltip:n,path:i,setIsCollapsed:a}){let s=(0,k.Mv)(i),{mutate:r}=aC(e,{onSuccess:()=>{},onError:()=>{}}),{setDiffViewed:l}=(0,k.Ud)(),d=(0,k.j5)(),{navigateToNext:c}=ia(),u=(0,b.useCallback)(()=>{t||(r({viewedStatus:!s,path:i}),l(i,!s),d?c():a(!s))},[r,t,s,i,l,d,c,a]),m=(0,b.useMemo)(()=>s?(0,o.jsx)(T.CheckboxFillIcon,{className:"color-fg-accent"}):(0,o.jsx)("svg",{"aria-hidden":"true",fill:"none",height:"16",role:"img",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{clipRule:"evenodd",d:"M2.5 2.75C2.5 2.61193 2.61193 2.5 2.75 2.5H13.25C13.3881 2.5 13.5 2.61193 13.5 2.75V13.25C13.5 13.3881 13.3881 13.5 13.25 13.5H2.75C2.61193 13.5 2.5 13.3881 2.5 13.25V2.75ZM2.75 1C1.7835 1 1 1.7835 1 2.75V13.25C1 14.2165 1.7835 15 2.75 15H13.25C14.2165 15 15 14.2165 15 13.25V2.75C15 1.7835 14.2165 1 13.25 1H2.75Z",fill:"currentColor",fillRule:"evenodd"})}),[s]),h=(0,o.jsx)(em.Q,{"aria-pressed":s,"aria-label":s?"Viewed":"Not Viewed",inactive:t,size:"small",variant:"default",leadingVisual:()=>m,className:(0,v.$)(s&&aj,aw),onClick:u,children:(0,o.jsx)("span",{className:ax.A["hide-on-mobile"],children:"Viewed"})});return t&&n?(0,o.jsx)(E.m,{text:n,children:h}):h};function aN(){}function aS(){}try{a_.displayName||(a_.displayName="MarkAsViewedButton")}catch{}var aI=n(79634);function ak({basePath:e,effectiveRange:t,path:n}){return[eg.uT.richDiff,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`,`path:${n}`]}let aL=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(11),{basePath:s,path:r}=e,l=(0,k.L3)();a[0]!==s||a[1]!==l||a[2]!==r?(t=ak({basePath:s,path:r,...l}),a[0]=s,a[1]=l,a[2]=r,a[3]=t):t=a[3];let o=t;a[4]!==s||a[5]!==l||a[6]!==r?(n={path:r,basePath:s,...l,signal:void 0},a[4]=s,a[5]=l,a[6]=r,a[7]=n):n=a[7];let d=n;return a[8]!==d||a[9]!==o?(i={fetcher:aD,key:o,args:d},a[8]=d,a[9]=o,a[10]=i):i=a[10],i}:function({basePath:e,path:t}){let n=(0,k.L3)();return{fetcher:aD,key:ak({basePath:e,path:t,...n}),args:{path:t,basePath:e,...n,signal:void 0}}};async function aD({basePath:e,fullDiff:t,effectiveRange:n,path:i,signal:a}){let s=new URLSearchParams;s.append("path",i),n.baseOid===t.baseOid?s.append("range",n.headOid):s.append("range",`${n.baseOid}..${n.headOid}`);let r=`${e}/page_data/${eg.uT.richDiff}?${s.toString()}`;try{let e=await (0,eS.Sr)(r,{signal:a});if(a?.aborted)return;let t=await (0,ev.hp)(e);return(0,ev.R)(e,t),t??void 0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}}var aT=n(15697);function aE(e,t){if(e.type!==t.type)return!1;let n="CONTEXT"===e.type||"ADDITION"===e.type,i="DELETION"===e.type;return n&&e.right===t.line||i&&e.left===t.line}function aA({diffSummary:e,commentPreference:t,lineSpacingPreference:n,isCollapsed:i}){let a=n===h.Ud.Compact?20:25;if(i)return 42;if(e?.linesChanged&&e.linesChanged>400)return 175;if(e?.changeType==="DELETED"||e?.changeType==="REMOVED")return 177;let s=e?Math.max(1,Math.ceil(e.linesChanged/5)):1,r=e?.changeType==="MODIFIED"?6*s*a:0,l=0,o=0;if(t===h.sI.Visible){let t=0,n=0;for(let i of Object.values(e?.markersMap||{}))t+=i.threads.length,n+=i.annotations.length;l=500*t,o=300*n}let d=e?.linesChanged??1;return e?.changeType==="ADDED"&&(d+=1),42+a*d+l+o+r}function aR({diffManuallyExpanded:e,headBranchName:t,headRepoName:n,headRepoOwner:i,diffLines:a,path:s,isSelected:r=!1,reviewed:l,...d}){let c=(0,k.Kp)(),u=(0,k.JA)(),{fetchContextLines:m}=(0,k.QV)(),h=(0,k.L3)(),p=h.hideWhitespace?"1":"0",g=aL({basePath:c,path:s}),y=(0,b.useRef)(null),x=(0,b.useRef)(null),{helpUrl:j}=(0,aI.X)(),w=(0,k.kN)(s),{updateAllFilesCollapsedStatus:C,updateFileCollapsedStatus:_}=(0,k.JR)(),N=(0,k.GR)(),[L,D]=(0,b.useState)(!1),[E,A]=(0,b.useState)(d.richDiff?.defaultToRichDiff??!1),R=(0,f.G7)("pr_simple_diffs"),O=(0,k.Fm)(s),P=(0,b.useMemo)(()=>{if(R)return aA({diffSummary:O,commentPreference:d.currentUser.commentsPreference,lineSpacingPreference:d.currentUser.lineSpacing,isCollapsed:w})},[d.currentUser.commentsPreference,d.currentUser.lineSpacing,O,w,R]),F=(0,k.ne)(s),M=(0,I.dG)({basePath:c}),B=(0,I.hG)({diffPath:s,codeownersData:M?.data}),V=(0,b.useMemo)(()=>F?F[tp.zW]?.threads??[]:[],[F]),U=(0,b.useMemo)(()=>u?function(e,t,n){let i=[],a=t.hunkPositions[n];if(!a)return i;let s=0,r=a[0];if(!r)return i;let l=!1;for(let t of e)if(l){if(i.push(t),aE(t,r.endLine)&&(l=!1,!(r=a[++s])))break}else aE(t,r.startLine)&&(l=!0,i.push(r.headerLine),i.push(t));return i}(a,u,s):a,[u,s,a]),q=(0,b.useCallback)(()=>{_(s,!1)},[s,_]),H=(0,b.useRef)(!0),G=(0,b.useCallback)(()=>{let e=N();e&&w&&F&&Object.values(F).some(t=>t.threads.some(t=>String(t.id)===String(e))||t.annotations.some(t=>String(t.id)===String(e)))&&q()},[w,q,N,F]),K=(0,b.useCallback)(()=>{(0,S.K3)(),G()},[G]),W=(0,b.useCallback)(()=>{(0,ii.o9)()===d.pathDigest&&w&&q()},[d.pathDigest,q,w]),z=(0,b.useCallback)(()=>{G(),W(),H.current=!1},[G,W]);(0,b.useEffect)(()=>{z()},[]),(0,b.useEffect)(()=>{if(!r){H.current=!0;return}H.current&&(W(),H.current=!1)},[W,r]),(0,b.useEffect)(()=>($.cg?.addEventListener("hashchange",z),()=>{$.cg?.removeEventListener("hashchange",z)}),[z]);let Q=(0,b.useCallback)((e,t,n)=>{if(n&&n.altKey)C(e);else{if(_(t,e),!e)return;$.cg?.requestAnimationFrame(()=>{let e=y.current?.getBoundingClientRect();!e||e.top<60&&$.cg?.scrollTo({top:e.top+$.cg.scrollY-60})})}},[C,_]),Z=(0,b.useRef)((0,aT.B)({diffSummary:O})),[J,Y]=(0,b.useState)(!1),X=(0,b.useCallback)(async e=>{K(),Z.current.push(e),m({contextLineRanges:Z.current,path:s,w:p})},[K,m,s,p]),ee=(0,b.useCallback)(async()=>{await m({contextLineRanges:[],path:s})},[m,s]),et=(0,b.useMemo)(()=>{if(d.isBinary||d.isSubmodule||d.isTooBig||(0,am.dK)({linesChanged:d.linesChanged,newTreeEntry:d.newTreeEntry,oldTreeEntry:d.oldTreeEntry,status:d.status,truncatedReason:d.truncatedReason}))return!1;if(J)return!0;if(0===U.length)return!1;if((U[1]?.blobLineNumber||0)>1)return!0;let e=U.length,t=U[e-1]?.blobLineNumber||0,n=d.newTreeEntry?.lineCount||0;return!!(t<n)||!!(e-1<n)},[d.isBinary,d.isSubmodule,d.isTooBig,d.linesChanged,d.newTreeEntry,d.oldTreeEntry,d.status,d.truncatedReason,U,J]),en=(0,b.useCallback)(async()=>{let e,t;Z.current=[],J||Z.current.push({start:1,end:Math.max(d.oldTreeEntry?.lineCount??0,d.newTreeEntry?.lineCount??0)});let n=document.activeElement;await m({contextLineRanges:Z.current,path:s,w:p}),Y(!J),n&&(e=null,t=null,n&&(n.hasAttribute("data-grid-cell-id")&&(e=n.getAttribute("data-grid-cell-id")),n.hasAttribute("data-file-path")&&(t=n.getAttribute("data-file-path"))),setTimeout(()=>{if(e){let t=document.querySelector(`[data-grid-cell-id="${e}"]`);if(t)return void t.focus()}if(t){let e=document.querySelector(`button[data-file-path="${t}"]`);e&&e.focus()}},0))},[J,d.oldTreeEntry?.lineCount,d.newTreeEntry?.lineCount,m,s,p]),ei=(0,b.useCallback)(()=>A(!E),[E]),ea=(0,b.useMemo)(()=>d.richDiff?.canToggleRichDiff?{richDiff:d.richDiff,isRichDiff:E,onToggle:ei}:void 0,[d.richDiff,E,ei]),es=(0,b.useMemo)(()=>B&&(B.isOwnedByViewer||B.owners.length>0)?ag(B.isOwnedByViewer,B.owners,void 0,d.currentUser.login):void 0,[B,d.currentUser.login]),er=(0,b.useMemo)(()=>B?.ruleUrl,[B]),eo=(0,b.useMemo)(()=>d.currentUser.canComment?()=>D(!0):void 0,[d.currentUser.canComment]),ed=(0,b.useCallback)(()=>navigator.clipboard?.writeText(s),[s]),ec=(0,b.useMemo)(()=>et?en:void 0,[et,en]),eu=(0,b.useMemo)(()=>({richDiff:d.richDiff,showRichDiff:E,onToggleRichDiff:A,queryConfig:g}),[d.richDiff,E,g]),em=(0,b.useMemo)(()=>{let e=new Set([]);return u&&e.add(af.YR.diffStats).add(af.YR.expandLines),h.fullDiff.headOid!==h.effectiveRange.headOid&&e.add(af.YR.markAsViewed),e},[u,h.effectiveRange.headOid,h.fullDiff.headOid]),{disabledFeatures:eh,disabledReasons:ef}=(0,b.useMemo)(()=>{let e=new Set([]),t=new Map;return u&&(e.add(af.YR.markAsViewed),t.set(af.YR.markAsViewed,"This file can only be marked as viewed on the \u201CAll files\u201D page")),{disabledFeatures:e,disabledReasons:t}},[u]);return(0,o.jsx)(ah.oO,{loadDiff:ee,...d,addFileCommentButtonRef:x,diffManuallyExpanded:e,estimatedDiffHeight:P,fileComments:V,hiddenFeatures:em,isAddingFileComment:L,isSelected:r,leftSideContent:(0,o.jsx)(b.Suspense,{children:(0,o.jsx)(ap,{className:(0,v.$)("px-1 flex-items-center flex-order-2 flex-sm-order-1",ax.A["hide-on-mobile"]),diffPath:s,pullRequestBasePath:c,viewerLogin:d.currentUser.login})}),rightSideContent:(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[!em.has(af.YR.markAsViewed)&&(0,o.jsx)(a_,{path:s,basePath:c,inactive:eh.has(af.YR.markAsViewed)||!!u,inactiveTooltip:ef.get(af.YR.markAsViewed),setIsCollapsed:e=>Q(e,s)}),d.currentUser.canComment&&(0,o.jsx)(el.K,{ref:x,icon:T.CommentIcon,"aria-label":"Comment on this file","aria-expanded":L,variant:"invisible",size:"small",onClick:e=>{w&&Q(!1,s),D(!0),e.stopPropagation()},className:ax.A["hide-on-mobile"]}),(0,o.jsx)(ab,{oid:"REMOVED"===d.status&&d.oldCommitOid?d.oldCommitOid:d.newCommitOid||"",path:s,repo:{name:n||d.repository.name,ownerLogin:i||d.repository.ownerLogin},isViewable:!d.isSubmodule,isDeleteable:!d.isSubmodule,isEditable:!d.isSubmodule,shouldShowEditOptions:d.currentUser.shouldDisplayEditOptions,branchName:t,returnToPullRequestPath:c,onCommentOnFile:eo,onCopyPath:ed,onExpandLines:ec,areLinesExpanded:J,richDiffToggle:ea,codeownersText:es,codeownersUrl:er})]}),canExpandOrCollapseLines:et,expandAllContextLines:en,hasExpandedAllRanges:J,addInjectedContextLines:X,onToggleCollapse:(e,t)=>Q(t,s,e),path:s,ref:y,setIsAddingFileComment:D,collapsed:w,helpUrl:j,linesAdded:O?.linesAdded||d.linesAdded||0,linesChanged:O?.linesChanged||d.linesChanged||0,linesDeleted:O?.linesDeleted||d.linesDeleted||0,diffLines:U,richDiffState:eu})}try{aR.displayName||(aR.displayName="PullRequestDiff")}catch{}var aO=n(29731),aP=n(8431);let aF=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u=(0,c.c)(15),{ariaLabel:h,testId:f,id:p,approximateLineCount:g,approximateDiffHeight:y}=e,{data:x}=(0,m.ID)(),v=x?.lineSpacing==="compact"?20:25,b=y??v*(void 0===g?5:g);return u[0]!==f?(t=(0,aO.G)(f),u[0]=f,u[1]=t):t=u[1],u[2]!==b?(n={minHeight:b},u[2]=b,u[3]=n):n=u[3],u[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(al.O,{height:"sm",variant:"rounded",width:"random"}),a=(0,o.jsx)(al.O,{height:"sm",variant:"rounded",width:"random"}),s=(0,o.jsx)(al.O,{height:"sm",variant:"rounded",width:"random"}),r=(0,o.jsx)(al.O,{height:"sm",variant:"rounded",width:"random"}),u[4]=i,u[5]=a,u[6]=s,u[7]=r):(i=u[4],a=u[5],s=u[6],r=u[7]),u[8]!==n?(l=(0,o.jsx)("div",{className:"border borderColor-muted",children:(0,o.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",style:n,children:[i,a,s,r]})}),u[8]=n,u[9]=l):l=u[9],u[10]!==h||u[11]!==p||u[12]!==t||u[13]!==l?(d=(0,o.jsx)("div",{className:aP.A.diffTargetable,role:"region","aria-label":h,...t,id:p,children:l}),u[10]=h,u[11]=p,u[12]=t,u[13]=l,u[14]=d):d=u[14],d}:function({ariaLabel:e,testId:t,id:n,approximateLineCount:i=5,approximateDiffHeight:a}){let{data:s}=(0,m.ID)(),r=s?.lineSpacing==="compact"?20:25;return(0,o.jsx)("div",{className:aP.A.diffTargetable,role:"region","aria-label":e,...(0,aO.G)(t),id:n,children:(0,o.jsx)("div",{className:"border borderColor-muted",children:(0,o.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",style:{minHeight:a??r*i},children:[(0,o.jsx)(al.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(al.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(al.O,{height:"sm",variant:"rounded",width:"random"}),(0,o.jsx)(al.O,{height:"sm",variant:"rounded",width:"random"})]})})})});try{aF.displayName||(aF.displayName="DiffEntryLoadingSkeleton")}catch{}let aM=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s=(0,c.c)(15),{progressiveDiffEntry:r,approximateLineCount:l}=e,d=void 0===l?5:l,{loadMore:u}=(0,k.pV)(),m=(0,nN.u)("pulls-files-skip-prefer-any-solo-entry"),[h,f]=(0,b.useState)(!1);s[0]!==h||s[1]!==u||s[2]!==r||s[3]!==m?(t=e=>{e[0]?.isIntersecting&&!h&&(f(!0),u(r,{preferAnySoloEntry:!m}))},s[0]=h,s[1]=u,s[2]=r,s[3]=m,s[4]=t):t=s[4],s[5]===Symbol.for("react.memo_cache_sentinel")?(n={rootMargin:"-72px"},s[5]=n):n=s[5];let[p,g]=(0,nW.B)(t,n),y=`Loading ${r.path}`,x=`lazy-load-${r.path}`,v=`diff-${r.pathDigest}`;return s[6]!==d||s[7]!==y||s[8]!==x||s[9]!==v?(i=(0,o.jsx)(aF,{ariaLabel:y,testId:x,id:v,approximateLineCount:d}),s[6]=d,s[7]=y,s[8]=x,s[9]=v,s[10]=i):i=s[10],s[11]!==p||s[12]!==i||s[13]!==g?(a=(0,o.jsx)(nz.X,{onObserve:p,onUnobserve:g,children:i}),s[11]=p,s[12]=i,s[13]=g,s[14]=a):a=s[14],a}:function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,k.pV)(),i=(0,nN.u)("pulls-files-skip-prefer-any-solo-entry"),[a,s]=(0,b.useState)(!1),[r,l]=(0,nW.B)(t=>{t[0]?.isIntersecting&&!a&&(s(!0),n(e,{preferAnySoloEntry:!i}))},{rootMargin:"-72px"});return(0,o.jsx)(nz.X,{onObserve:r,onUnobserve:l,children:(0,o.jsx)(aF,{ariaLabel:`Loading ${e.path}`,testId:`lazy-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})})});try{aM.displayName||(aM.displayName="LazyDiffEntryLoadingSkeleton")}catch{}let a$=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(10),{progressiveDiffEntry:s,approximateLineCount:r}=e,l=void 0===r?5:r,{loadMore:d}=(0,k.pV)(),u=(0,nN.u)("pulls-files-skip-prefer-any-solo-entry");a[0]!==d||a[1]!==s||a[2]!==u?(t=()=>{d(s,{preferAnySoloEntry:!u})},n=[d,s,u],a[0]=d,a[1]=s,a[2]=u,a[3]=t,a[4]=n):(t=a[3],n=a[4]),(0,b.useEffect)(t,n);let m=`Loading ${s.path}`,h=`eager-load-${s.path}`,f=`diff-${s.pathDigest}`;return a[5]!==l||a[6]!==m||a[7]!==h||a[8]!==f?(i=(0,o.jsx)(aF,{ariaLabel:m,testId:h,id:f,approximateLineCount:l}),a[5]=l,a[6]=m,a[7]=h,a[8]=f,a[9]=i):i=a[9],i}:function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,k.pV)(),i=(0,nN.u)("pulls-files-skip-prefer-any-solo-entry");return(0,b.useEffect)(()=>{n(e,{preferAnySoloEntry:!i})},[n,e,i]),(0,o.jsx)(aF,{ariaLabel:`Loading ${e.path}`,testId:`eager-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{a$.displayName||(a$.displayName="EagerDiffEntryLoadingSkeleton")}catch{}let aB=(0,b.memo)((0,d.Z6)()?function(e){let t,n=(0,c.c)(9),{linesAdded:i,linesChanged:a,linesDeleted:s,newTreeEntry:r,oldTreeEntry:l,path:d,pathDigest:u,status:m}=e;return n[0]!==i||n[1]!==a||n[2]!==s||n[3]!==r||n[4]!==l||n[5]!==d||n[6]!==u||n[7]!==m?(t=(0,o.jsx)(ah.Ao,{linesAdded:i,linesChanged:a,linesDeleted:s,newTreeEntry:r,oldTreeEntry:l,path:d,pathDigest:u,status:m}),n[0]=i,n[1]=a,n[2]=s,n[3]=r,n[4]=l,n[5]=d,n[6]=u,n[7]=m,n[8]=t):t=n[8],t}:function({linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:i,oldTreeEntry:a,path:s,pathDigest:r,status:l}){return(0,o.jsx)(ah.Ao,{linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:i,oldTreeEntry:a,path:s,pathDigest:r,status:l})});try{aB.displayName||(aB.displayName="PullRequestDiffEntryErrorFallback")}catch{}var aV=n(90047),aU=n(73189);let aq=(0,b.memo)((0,d.Z6)()?function(e){let t,n=(0,c.c)(5),{progressiveDiffEntry:i,approximateLineCount:a}=e,s=void 0===a?5:a,r=`Loading ${i.path}`,l=`hidden-load-${i.path}`,d=`diff-${i.pathDigest}`;return n[0]!==s||n[1]!==r||n[2]!==l||n[3]!==d?(t=(0,o.jsx)(aF,{ariaLabel:r,testId:l,id:d,approximateLineCount:s}),n[0]=s,n[1]=r,n[2]=l,n[3]=d,n[4]=t):t=n[4],t}:function({progressiveDiffEntry:e,approximateLineCount:t=5}){return(0,o.jsx)(aF,{ariaLabel:`Loading ${e.path}`,testId:`hidden-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{aq.displayName||(aq.displayName="HiddenDiffEntryLoadingSkeleton")}catch{}let aH=(0,b.memo)(aK,(e,t)=>e.progressiveDiffEntry.pathDigest===t.progressiveDiffEntry.pathDigest&&e.progressiveDiffEntry.renderMode===t.progressiveDiffEntry.renderMode&&e.currentUser.splitPreference===t.currentUser.splitPreference&&e.currentUser.commentsPreference===t.currentUser.commentsPreference&&e.currentUser.lineSpacing===t.currentUser.lineSpacing),aG=(0,d.Z6)();function aK(e){return aG?function(e){let t,n,i,a,s,r=(0,c.c)(72),{currentUser:l,diffManuallyExpanded:d,headBranchName:u,headRepoName:m,headRepoOwner:h,onScrollToAndFocusEntry:f,progressiveDiffEntry:p,pullRequestGlobalRelayId:g,repository:y,testRenderFn:x}=e,j=(0,k.Py)(p.pathDigest),w=(0,k.jT)(p.path),C=(0,k.Fm)(p.path),_=(0,k.j5)();x&&x();let N=(0,b.useRef)(!1);r[0]!==j||r[1]!==f||r[2]!==p.pathDigest||r[3]!==p.renderMode?(t=()=>{if(N.current)return;let e=$.fV.hash??"",t=(0,ii.pd)(e)??"";if((t=t.replace("diff-","").replace("#",""))!==p.pathDigest&&(N.current=!0),!(j&&["LAZY_AUTO_LOAD","EAGER_AUTO_LOAD"].includes(p.renderMode))){if(j&&"HIDE"!==p.renderMode){let e=$.cg?.location.hash.substring(1)??"";if(!(0,ii.yI)(e)||"RENDER"===p.renderMode){let e=$.cg?.document.activeElement;if(e?.closest("#diff-file-tree-filter"))return;f(p.pathDigest)}}N.current=!0}},r[0]=j,r[1]=f,r[2]=p.pathDigest,r[3]=p.renderMode,r[4]=t):t=r[4];let S=p?.renderMode;if(r[5]!==j||r[6]!==f||r[7]!==p.pathDigest||r[8]!==S?(n=[j,f,p.pathDigest,S],r[5]=j,r[6]=f,r[7]=p.pathDigest,r[8]=S,r[9]=n):n=r[9],(0,b.useEffect)(t,n),!p)return null;if("HIDE"===p.renderMode||"LAZY_AUTO_LOAD"===p.renderMode||"EAGER_AUTO_LOAD"===p.renderMode){let e,t,n,i;r[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o.Fragment,{}),r[10]=e):e=r[10];let a=e,s=C?.linesChanged??5;if((C?.changeType==="REMOVED"||C?.changeType==="DELETED")&&(s=5),"HIDE"===p.renderMode){let e;r[11]!==s||r[12]!==p?(e=(0,o.jsx)(aq,{progressiveDiffEntry:p,approximateLineCount:s}),r[11]=s,r[12]=p,r[13]=e):e=r[13],a=e}else if("LAZY_AUTO_LOAD"===p.renderMode){let e;r[14]!==s||r[15]!==p?(e=(0,o.jsx)(aM,{progressiveDiffEntry:p,approximateLineCount:s}),r[14]=s,r[15]=p,r[16]=e):e=r[16],a=e}else if("EAGER_AUTO_LOAD"===p.renderMode){let e;r[17]!==s||r[18]!==p?(e=(0,o.jsx)(a$,{progressiveDiffEntry:p,approximateLineCount:s}),r[17]=s,r[18]=p,r[19]=e):e=r[19],a=e}let l=`diff-${p.pathDigest}`;r[20]===Symbol.for("react.memo_cache_sentinel")?(t=(0,v.$)(aP.A.diffTargetable,aP.A.diff),r[20]=t):t=r[20];let d=`${p.pathDigest}_${p.path}`,c=`#diff-${p.pathDigest}`,u=C?.linesAdded??0,m=C?.linesChanged??0,h=C?.linesDeleted??0;return r[21]!==_||r[22]!==p.path||r[23]!==m||r[24]!==h||r[25]!==c||r[26]!==u?(n=(0,o.jsx)("div",{className:aP.A.diffHeaderWrapper,children:(0,o.jsx)(aV.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:c,canToggleRichDiff:!1,linesAdded:u,linesChanged:m,linesDeleted:h,newPath:p.path,patchStatus:"",path:p.path,onToggleExpandAllLines:aU.l,onToggleFileCollapsed:aU.l,onToggleDiffDisplay:aU.l,isInSingleFileMode:_})}),r[21]=_,r[22]=p.path,r[23]=m,r[24]=h,r[25]=c,r[26]=u,r[27]=n):n=r[27],r[28]!==j||r[29]!==a||r[30]!==n||r[31]!==l||r[32]!==d?(i=(0,o.jsxs)("div",{role:"region",id:l,className:t,"data-targeted":j,children:[n,a]},d),r[28]=j,r[29]=a,r[30]=n,r[31]=l,r[32]=d,r[33]=i):i=r[33],i}if(!w){let e;return r[34]!==p.path||r[35]!==p.pathDigest?(e=(0,o.jsx)(aB,{linesAdded:0,linesChanged:0,linesDeleted:0,path:p.path,pathDigest:p.pathDigest,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"}),r[34]=p.path,r[35]=p.pathDigest,r[36]=e):e=r[36],e}r[37]!==w?(i=(0,o.jsx)(aB,{...w}),r[37]=w,r[38]=i):i=r[38];let I=w.reviewed??!1;return r[39]!==l||r[40]!==w.diffLines||r[41]!==w.diffSize||r[42]!==w.helpUrl||r[43]!==w.isBinary||r[44]!==w.isSubmodule||r[45]!==w.isTooBig||r[46]!==w.linesAdded||r[47]!==w.linesChanged||r[48]!==w.linesDeleted||r[49]!==w.newCommitOid||r[50]!==w.newTreeEntry||r[51]!==w.objectId||r[52]!==w.oldCommitOid||r[53]!==w.oldTreeEntry||r[54]!==w.path||r[55]!==w.pathDigest||r[56]!==w.richDiff||r[57]!==w.status||r[58]!==w.submodule||r[59]!==w.truncatedReason||r[60]!==d||r[61]!==u||r[62]!==m||r[63]!==h||r[64]!==j||r[65]!==g||r[66]!==y||r[67]!==I?(a=(0,o.jsx)(aR,{changeType:w.status,currentUser:l,diffLines:w.diffLines,diffManuallyExpanded:d,diffSize:w.diffSize,headBranchName:u,headRepoName:m,headRepoOwner:h,helpUrl:w.helpUrl,isBinary:w.isBinary,isSelected:j,isSubmodule:w.isSubmodule,isTooBig:w.isTooBig,linesAdded:w.linesAdded,linesChanged:w.linesChanged,linesDeleted:w.linesDeleted,newCommitOid:w.newCommitOid,newTreeEntry:w.newTreeEntry,objectId:w.objectId,oldCommitOid:w.oldCommitOid,oldTreeEntry:w.oldTreeEntry,path:w.path,pathDigest:w.pathDigest,pullRequestGlobalRelayId:g,repository:y,reviewed:I,richDiff:w.richDiff,status:w.status,submodule:w.submodule,truncatedReason:w.truncatedReason}),r[39]=l,r[40]=w.diffLines,r[41]=w.diffSize,r[42]=w.helpUrl,r[43]=w.isBinary,r[44]=w.isSubmodule,r[45]=w.isTooBig,r[46]=w.linesAdded,r[47]=w.linesChanged,r[48]=w.linesDeleted,r[49]=w.newCommitOid,r[50]=w.newTreeEntry,r[51]=w.objectId,r[52]=w.oldCommitOid,r[53]=w.oldTreeEntry,r[54]=w.path,r[55]=w.pathDigest,r[56]=w.richDiff,r[57]=w.status,r[58]=w.submodule,r[59]=w.truncatedReason,r[60]=d,r[61]=u,r[62]=m,r[63]=h,r[64]=j,r[65]=g,r[66]=y,r[67]=I,r[68]=a):a=r[68],r[69]!==i||r[70]!==a?(s=(0,o.jsx)(Y.t,{fallback:i,children:a}),r[69]=i,r[70]=a,r[71]=s):s=r[71],s}(e):function({currentUser:e,diffManuallyExpanded:t,headBranchName:n,headRepoName:i,headRepoOwner:a,onScrollToAndFocusEntry:s,progressiveDiffEntry:r,pullRequestGlobalRelayId:l,repository:d,testRenderFn:c}){let u=(0,k.Py)(r.pathDigest),m=(0,k.jT)(r.path),h=(0,k.Fm)(r.path),f=(0,k.j5)();c&&c();let p=(0,b.useRef)(!1);if((0,b.useEffect)(()=>{if(p.current)return;let e=$.fV.hash??"",t=(0,ii.pd)(e)??"";if((t=t.replace("diff-","").replace("#",""))!==r.pathDigest&&(p.current=!0),!(u&&["LAZY_AUTO_LOAD","EAGER_AUTO_LOAD"].includes(r.renderMode))){if(u&&"HIDE"!==r.renderMode){let e=$.cg?.location.hash.substring(1)??"";if(!(0,ii.yI)(e)||"RENDER"===r.renderMode){let e=$.cg?.document.activeElement;if(e?.closest("#diff-file-tree-filter"))return;s(r.pathDigest)}}p.current=!0}},[u,s,r.pathDigest,r?.renderMode]),!r)return null;if("HIDE"===r.renderMode||"LAZY_AUTO_LOAD"===r.renderMode||"EAGER_AUTO_LOAD"===r.renderMode){let e=(0,o.jsx)(o.Fragment,{}),t=h?.linesChanged??5;return(h?.changeType==="REMOVED"||h?.changeType==="DELETED")&&(t=5),"HIDE"===r.renderMode?e=(0,o.jsx)(aq,{progressiveDiffEntry:r,approximateLineCount:t}):"LAZY_AUTO_LOAD"===r.renderMode?e=(0,o.jsx)(aM,{progressiveDiffEntry:r,approximateLineCount:t}):"EAGER_AUTO_LOAD"===r.renderMode&&(e=(0,o.jsx)(a$,{progressiveDiffEntry:r,approximateLineCount:t})),(0,o.jsxs)("div",{role:"region",id:`diff-${r.pathDigest}`,className:(0,v.$)(aP.A.diffTargetable,aP.A.diff),"data-targeted":u,children:[(0,o.jsx)("div",{className:aP.A.diffHeaderWrapper,children:(0,o.jsx)(aV.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${r.pathDigest}`,canToggleRichDiff:!1,linesAdded:h?.linesAdded??0,linesChanged:h?.linesChanged??0,linesDeleted:h?.linesDeleted??0,newPath:r.path,patchStatus:"",path:r.path,onToggleExpandAllLines:aU.l,onToggleFileCollapsed:aU.l,onToggleDiffDisplay:aU.l,isInSingleFileMode:f})}),e]},`${r.pathDigest}_${r.path}`)}return m?(0,o.jsx)(Y.t,{fallback:(0,o.jsx)(aB,{...m}),children:(0,o.jsx)(aR,{changeType:m.status,currentUser:e,diffLines:m.diffLines,diffManuallyExpanded:t,diffSize:m.diffSize,headBranchName:n,headRepoName:i,headRepoOwner:a,helpUrl:m.helpUrl,isBinary:m.isBinary,isSelected:u,isSubmodule:m.isSubmodule,isTooBig:m.isTooBig,linesAdded:m.linesAdded,linesChanged:m.linesChanged,linesDeleted:m.linesDeleted,newCommitOid:m.newCommitOid,newTreeEntry:m.newTreeEntry,objectId:m.objectId,oldCommitOid:m.oldCommitOid,oldTreeEntry:m.oldTreeEntry,path:m.path,pathDigest:m.pathDigest,pullRequestGlobalRelayId:l,repository:d,reviewed:m.reviewed??!1,richDiff:m.richDiff,status:m.status,submodule:m.submodule,truncatedReason:m.truncatedReason})}):(0,o.jsx)(aB,{linesAdded:0,linesChanged:0,linesDeleted:0,path:r.path,pathDigest:r.pathDigest,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})}(e)}try{aH.displayName||(aH.displayName="ProgressivePullRequestDiffEntry")}catch{}try{aK.displayName||(aK.displayName="ProgressivePullRequestDiffEntryUnmemoized")}catch{}let aW=(0,d.Z6)()?function(){let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsxs)(tN.E,{border:!1,spacious:!0,children:[(0,o.jsx)(tN.E.Heading,{children:"No changes to show"}),(0,o.jsx)(tN.E.Description,{children:"This commit does not include any file changes"})]})}),t[0]=e):e=t[0],e}:function(){return(0,o.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,o.jsxs)(tN.E,{border:!1,spacious:!0,children:[(0,o.jsx)(tN.E.Heading,{children:"No changes to show"}),(0,o.jsx)(tN.E.Description,{children:"This commit does not include any file changes"})]})})};try{aW.displayName||(aW.displayName="EmptyPullRequestBlankSlate")}catch{}let az="PullRequestDiffsAnimation-module__wrapper--j5QjR",aQ="PullRequestDiffsAnimation-module__imageContainer--ISOgX",aZ="PullRequestDiffsAnimation-module__image--MMHno",aJ="PullRequestDiffsAnimation-module__firstFrameImage--DV3ZK",aY="PullRequestDiffsAnimation-module__animatedImage--yjDlC",aX="PullRequestDiffsAnimation-module__reducedMotionImage--cBS3Y";var a0=n(69895);let a1=n.p+"mona-hifive-first-frame-0d428028d4d7.png",a2=n.p+"mona-hifive-reduced-motion-3a22d8eb870c.png",a3=n.p+"mona-hifive-loop-once-8c78f1af57d0.gif",a4=(0,d.Z6)()?()=>{let e,t,n,i,a,s,r,l,d=(0,c.c)(12),u=(0,a0.j)(),m=(0,b.useRef)(null),h=(0,b.useRef)(null);d[0]!==u?(e=e=>{e?(e=>{let t;if(u)return;let n=new IntersectionObserver((e,n)=>{for(let i of e)i.isIntersecting&&(t=setTimeout(()=>{i.target.style.display="none",m.current&&(m.current.style.opacity="1"),n.unobserve(i.target)},1e3))},{threshold:1});return h.current=n,n.observe(e),()=>{n.disconnect(),t&&clearTimeout(t)}})(e):h.current&&(h.current.disconnect(),h.current=null)},d[0]=u,d[1]=e):e=d[1];let f=e;return d[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)("img",{src:a3,alt:"GIF of two octocats high fiving each other",className:(0,v.$)(aZ,aY),ref:m}),d[2]=t):t=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,v.$)(aZ,aJ),d[3]=n):n=d[3],d[4]!==f?(i=(0,o.jsx)("img",{src:a1,alt:"Two octocats",className:n,ref:f}),d[4]=f,d[5]=i):i=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)("img",{src:a2,alt:"Two octocats high fiving each other",className:(0,v.$)(aZ,aX)}),d[6]=a):a=d[6],d[7]!==i?(s=(0,o.jsxs)("div",{className:aQ,children:[t,i,a]}),d[7]=i,d[8]=s):s=d[8],d[9]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)("span",{className:"fgColor-muted",children:"You made it to the end!"}),d[9]=r):r=d[9],d[10]!==s?(l=(0,o.jsxs)("div",{className:az,children:[s,r]}),d[10]=s,d[11]=l):l=d[11],l}:()=>{let e=(0,a0.j)(),t=(0,b.useRef)(null),n=(0,b.useRef)(null);return(0,o.jsxs)("div",{className:az,children:[(0,o.jsxs)("div",{className:aQ,children:[(0,o.jsx)("img",{src:a3,alt:"GIF of two octocats high fiving each other",className:(0,v.$)(aZ,aY),ref:t}),(0,o.jsx)("img",{src:a1,alt:"Two octocats",className:(0,v.$)(aZ,aJ),ref:i=>{i?(i=>{let a;if(e)return;let s=new IntersectionObserver((e,n)=>{for(let i of e)i.isIntersecting&&(a=setTimeout(()=>{i.target.style.display="none",t.current&&(t.current.style.opacity="1"),n.unobserve(i.target)},1e3))},{threshold:1});return n.current=s,s.observe(i),()=>{s.disconnect(),a&&clearTimeout(a)}})(i):n.current&&(n.current.disconnect(),n.current=null)}}),(0,o.jsx)("img",{src:a2,alt:"Two octocats high fiving each other",className:(0,v.$)(aZ,aX)})]}),(0,o.jsx)("span",{className:"fgColor-muted",children:"You made it to the end!"})]})},a5=(0,b.memo)(a4);try{a4.displayName||(a4.displayName="PullRequestDiffsAnimationComponent")}catch{}try{a5.displayName||(a5.displayName="PullRequestDiffsAnimation")}catch{}let a6=(0,d.Z6)()?function(){let e,t,n,i,a=(0,c.c)(4),s=(0,b.useRef)(!0);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Map,a[0]=e):e=a[0];let r=(0,b.useRef)(e);a[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>r.current,a[1]=t):t=a[1];let l=t;a[2]===Symbol.for("react.memo_cache_sentinel")?(n=(e,t)=>{let{focusPathName:n}=void 0===t?{}:t,i=l().get(e);if(!i)return;let a=i,r=i.querySelector("button");n&&(r=i.querySelector("a"));let o=$.cg?.location.hash.substring(1)??"";if((0,ii.yI)(o)){let e=o.split("-")[0],t=i.querySelector(`[data-line-anchor=diff-${e}]`);t&&(r=a=t)}else s.current||(a=null);if(a){let e=$.cg?.scrollY??0,t=a.getBoundingClientRect().top+e-57-60;$.cg?.scrollTo({top:t,left:0})}r&&r.focus(),s.current=!1},a[2]=n):n=a[2];let o=n;return a[3]===Symbol.for("react.memo_cache_sentinel")?(i={onScrollToAndFocusEntry:o,getTargetableEntriesMap:l},a[3]=i):i=a[3],i}:function(){let e=(0,b.useRef)(!0),t=(0,b.useRef)(new Map),n=(0,b.useCallback)(()=>t.current,[]);return{onScrollToAndFocusEntry:(0,b.useCallback)((t,{focusPathName:i}={})=>{let a=n().get(t);if(!a)return;let s=a,r=a.querySelector("button");i&&(r=a.querySelector("a"));let l=$.cg?.location.hash.substring(1)??"";if((0,ii.yI)(l)){let e=l.split("-")[0],t=a.querySelector(`[data-line-anchor=diff-${e}]`);t&&(r=s=t)}else e.current||(s=null);if(s){let e=$.cg?.scrollY??0,t=s.getBoundingClientRect().top+e-57-60;$.cg?.scrollTo({top:t,left:0})}r&&r.focus(),e.current=!1},[n]),getTargetableEntriesMap:n}},a7=(0,b.memo)(a9),a8=(0,d.Z6)();function a9(e){return a8?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(37),{currentUser:u,filteredDiffSummaries:m,headBranchName:h,headRepoName:f,headRepoOwner:p,onSetFilterState:g,pullRequestGlobalRelayId:y,repository:x,showPullRequestGroups:v}=e,[j]=(0,b.useState)(!1),w=(0,b.useRef)(null),C=(0,k.$W)(m),_=(0,k.JA)(),{startQueue:N}=(0,k.pV)();d[0]!==N?(t=()=>{N()},n=[N],d[0]=N,d[1]=t,d[2]=n):(t=d[1],n=d[2]),(0,b.useEffect)(t,n);let{onScrollToAndFocusEntry:S,getTargetableEntriesMap:I}=a6(),L=(0,k.qg)(),D=C.length>=15;if(0===L){let e;return d[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(aW,{}),d[3]=e):e=d[3],e}if(0===m.length){let e;return d[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(au,{}),d[4]=e):e=d[4],e}if(d[5]!==_||d[6]!==g||d[7]!==v?(i=v&&_?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,o.jsx)("span",{className:"fgColor-accent",children:(0,o.jsx)(A.A,{href:"",onClick:e=>{e.preventDefault(),g({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,o.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",_.name]}),_.description?.trim()?(0,o.jsx)("p",{children:_.description}):null]}):null,d[5]=_,d[6]=g,d[7]=v,d[8]=i):i=d[8],d[9]!==u||d[10]!==C||d[11]!==j||d[12]!==I||d[13]!==h||d[14]!==f||d[15]!==p||d[16]!==S||d[17]!==y||d[18]!==x){let e;d[20]!==u||d[21]!==j||d[22]!==I||d[23]!==h||d[24]!==f||d[25]!==p||d[26]!==S||d[27]!==y||d[28]!==x?(e=e=>(0,o.jsx)("div",{ref:t=>{let n=I();t?n.set(e.pathDigest,t):n.delete(e.pathDigest)},children:(0,o.jsx)(aH,{currentUser:u,diffManuallyExpanded:j,headBranchName:h,headRepoName:f,headRepoOwner:p,pullRequestGlobalRelayId:y,onScrollToAndFocusEntry:S,progressiveDiffEntry:e,repository:x})},e.pathDigest),d[20]=u,d[21]=j,d[22]=I,d[23]=h,d[24]=f,d[25]=p,d[26]=S,d[27]=y,d[28]=x,d[29]=e):e=d[29],a=C.map(e),d[9]=u,d[10]=C,d[11]=j,d[12]=I,d[13]=h,d[14]=f,d[15]=p,d[16]=S,d[17]=y,d[18]=x,d[19]=a}else a=d[19];return d[30]!==D?(s=D&&(0,o.jsx)(a5,{}),d[30]=D,d[31]=s):s=d[31],d[32]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(ac.nq,{}),d[32]=r):r=d[32],d[33]!==i||d[34]!==a||d[35]!==s?(l=(0,o.jsxs)("div",{ref:w,"data-hpc":!0,"data-testid":"progressive-diffs-list",className:"d-flex flex-column gap-3",children:[i,a,s,r]}),d[33]=i,d[34]=a,d[35]=s,d[36]=l):l=d[36],l}(e):function({currentUser:e,filteredDiffSummaries:t,headBranchName:n,headRepoName:i,headRepoOwner:a,onSetFilterState:s,pullRequestGlobalRelayId:r,repository:l,showPullRequestGroups:d}){let[c,u]=(0,b.useState)(!1),m=(0,b.useRef)(null),h=(0,k.$W)(t),f=(0,k.JA)(),{startQueue:p}=(0,k.pV)();(0,b.useEffect)(()=>{p()},[p]);let{onScrollToAndFocusEntry:g,getTargetableEntriesMap:y}=a6(),x=(0,k.qg)(),v=h.length;return 0===x?(0,o.jsx)(aW,{}):0===t.length?(0,o.jsx)(au,{}):(0,o.jsxs)("div",{ref:m,"data-hpc":!0,"data-testid":"progressive-diffs-list",className:"d-flex flex-column gap-3",children:[d&&f?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,o.jsx)("span",{className:"fgColor-accent",children:(0,o.jsx)(A.A,{href:"",onClick:e=>{e.preventDefault(),s({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,o.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",f.name]}),f.description?.trim()?(0,o.jsx)("p",{children:f.description}):null]}):null,h.map(t=>(0,o.jsx)("div",{ref:e=>{let n=y();e?n.set(t.pathDigest,e):n.delete(t.pathDigest)},children:(0,o.jsx)(aH,{currentUser:e,diffManuallyExpanded:c,headBranchName:n,headRepoName:i,headRepoOwner:a,pullRequestGlobalRelayId:r,onScrollToAndFocusEntry:g,progressiveDiffEntry:t,repository:l})},t.pathDigest)),v>=15&&(0,o.jsx)(a5,{}),(0,o.jsx)(ac.nq,{})]})}(e)}try{a7.displayName||(a7.displayName="PullRequestDiffsList")}catch{}try{a9.displayName||(a9.displayName="PullRequestDiffsListUnmemoized")}catch{}var se=n(38943),st=n(51220);let sn="PullRequestVirtualizedDiffRow-module__virtualizedDiffRow--mhuB6",si=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(56),{virtualRow:s,virtualizedDiffEntry:r,diffEntry:l,diffSummary:d,scrollMargin:u,measureElement:m,currentUser:h,headBranchName:f,headRepoName:p,headRepoOwner:g,pullRequestGlobalRelayId:y,repository:x}=e,v=(0,k.y)(),b=(0,k.Py)(l?.pathDigest);if(!r)return null;let j=`translateY(${s.start-u}px)`;a[0]!==j?(t={transform:j},a[0]=j,a[1]=t):t=a[1];let w=t;if("NotLoaded"===r.loadingStatus){let e,t,n,i=r.path??"";if(a[2]!==h.commentsPreference||a[3]!==h.lineSpacing||a[4]!==d||a[5]!==v||a[6]!==i){let t=v(i);e=aA({diffSummary:d,commentPreference:h.commentsPreference,lineSpacingPreference:h.lineSpacing,isCollapsed:t}),a[2]=h.commentsPreference,a[3]=h.lineSpacing,a[4]=d,a[5]=v,a[6]=i,a[7]=e}else e=a[7];let l=e,c=`Loading ${r.path}`,u=`lazy-load-${r.path}`,f=`diff-${r.pathDigest}`;return a[8]!==l||a[9]!==c||a[10]!==u||a[11]!==f?(t=(0,o.jsx)(aF,{ariaLabel:c,testId:u,id:f,approximateDiffHeight:l}),a[8]=l,a[9]=c,a[10]=u,a[11]=f,a[12]=t):t=a[12],a[13]!==l||a[14]!==m||a[15]!==t||a[16]!==s.index||a[17]!==w||a[18]!==r.pathDigest?(n=(0,o.jsx)("div",{style:w,className:sn,ref:m,"data-index":s.index,"data-path-digest":r.pathDigest,"data-estimated-height":l,children:t}),a[13]=l,a[14]=m,a[15]=t,a[16]=s.index,a[17]=w,a[18]=r.pathDigest,a[19]=n):n=a[19],n}if(!l)return null;let C=-(s.start-u),_=l.reviewed??!1;return a[20]!==h||a[21]!==l.diffLines||a[22]!==l.diffSize||a[23]!==l.helpUrl||a[24]!==l.isBinary||a[25]!==l.isSubmodule||a[26]!==l.isTooBig||a[27]!==l.linesAdded||a[28]!==l.linesChanged||a[29]!==l.linesDeleted||a[30]!==l.newCommitOid||a[31]!==l.newTreeEntry||a[32]!==l.objectId||a[33]!==l.oldCommitOid||a[34]!==l.oldTreeEntry||a[35]!==l.path||a[36]!==l.pathDigest||a[37]!==l.richDiff||a[38]!==l.status||a[39]!==l.submodule||a[40]!==l.truncatedReason||a[41]!==f||a[42]!==p||a[43]!==g||a[44]!==b||a[45]!==y||a[46]!==x||a[47]!==C||a[48]!==_?(n=(0,o.jsx)(aR,{changeType:l.status,currentUser:h,diffLines:l.diffLines,diffManuallyExpanded:!1,diffSize:l.diffSize,headerStickyOffset:C,headBranchName:f,headRepoName:p,headRepoOwner:g,helpUrl:l.helpUrl,isBinary:l.isBinary,isSelected:b,isSubmodule:l.isSubmodule,isTooBig:l.isTooBig,linesAdded:l.linesAdded,linesChanged:l.linesChanged,linesDeleted:l.linesDeleted,newCommitOid:l.newCommitOid,newTreeEntry:l.newTreeEntry,objectId:l.objectId,oldCommitOid:l.oldCommitOid,oldTreeEntry:l.oldTreeEntry,path:l.path,pathDigest:l.pathDigest,pullRequestGlobalRelayId:y,repository:x,reviewed:_,richDiff:l.richDiff,status:l.status,submodule:l.submodule,truncatedReason:l.truncatedReason}),a[20]=h,a[21]=l.diffLines,a[22]=l.diffSize,a[23]=l.helpUrl,a[24]=l.isBinary,a[25]=l.isSubmodule,a[26]=l.isTooBig,a[27]=l.linesAdded,a[28]=l.linesChanged,a[29]=l.linesDeleted,a[30]=l.newCommitOid,a[31]=l.newTreeEntry,a[32]=l.objectId,a[33]=l.oldCommitOid,a[34]=l.oldTreeEntry,a[35]=l.path,a[36]=l.pathDigest,a[37]=l.richDiff,a[38]=l.status,a[39]=l.submodule,a[40]=l.truncatedReason,a[41]=f,a[42]=p,a[43]=g,a[44]=b,a[45]=y,a[46]=x,a[47]=C,a[48]=_,a[49]=n):n=a[49],a[50]!==l.pathDigest||a[51]!==m||a[52]!==n||a[53]!==s.index||a[54]!==w?(i=(0,o.jsx)("div",{style:w,className:sn,ref:m,"data-index":s.index,"data-path-digest":l.pathDigest,children:n}),a[50]=l.pathDigest,a[51]=m,a[52]=n,a[53]=s.index,a[54]=w,a[55]=i):i=a[55],i}:function({virtualRow:e,virtualizedDiffEntry:t,diffEntry:n,diffSummary:i,scrollMargin:a,measureElement:s,currentUser:r,headBranchName:l,headRepoName:d,headRepoOwner:c,pullRequestGlobalRelayId:u,repository:m}){let h=(0,k.y)(),f=(0,k.Py)(n?.pathDigest);if(!t)return null;let p={transform:`translateY(${e.start-a}px)`};if("NotLoaded"===t.loadingStatus){let n=h(t.path??""),a=aA({diffSummary:i,commentPreference:r.commentsPreference,lineSpacingPreference:r.lineSpacing,isCollapsed:n});return(0,o.jsx)("div",{style:p,className:sn,ref:s,"data-index":e.index,"data-path-digest":t.pathDigest,"data-estimated-height":a,children:(0,o.jsx)(aF,{ariaLabel:`Loading ${t.path}`,testId:`lazy-load-${t.path}`,id:`diff-${t.pathDigest}`,approximateDiffHeight:a})})}return n?(0,o.jsx)("div",{style:p,className:sn,ref:s,"data-index":e.index,"data-path-digest":n.pathDigest,children:(0,o.jsx)(aR,{changeType:n.status,currentUser:r,diffLines:n.diffLines,diffManuallyExpanded:!1,diffSize:n.diffSize,headerStickyOffset:-(e.start-a),headBranchName:l,headRepoName:d,headRepoOwner:c,helpUrl:n.helpUrl,isBinary:n.isBinary,isSelected:f,isSubmodule:n.isSubmodule,isTooBig:n.isTooBig,linesAdded:n.linesAdded,linesChanged:n.linesChanged,linesDeleted:n.linesDeleted,newCommitOid:n.newCommitOid,newTreeEntry:n.newTreeEntry,objectId:n.objectId,oldCommitOid:n.oldCommitOid,oldTreeEntry:n.oldTreeEntry,path:n.path,pathDigest:n.pathDigest,pullRequestGlobalRelayId:u,repository:m,reviewed:n.reviewed??!1,richDiff:n.richDiff,status:n.status,submodule:n.submodule,truncatedReason:n.truncatedReason})}):null});try{si.displayName||(si.displayName="MemoizedVirtualizedDiffRow")}catch{}var sa=n(56092);function ss({currentUser:e,filteredDiffSummaries:t,headBranchName:n,headRepoName:i,headRepoOwner:a,onSetFilterState:s,pullRequestGlobalRelayId:r,repository:l,showPullRequestGroups:d}){let c=(0,b.useRef)(null),[u,m]=(0,b.useState)(0),p=(0,k.$W)(t),g=(0,k.JA)(),{startQueue:y,loadMore:x}=(0,k.pV)(),v=(0,k.qg)(),j=(0,k.l0)(),w=(0,k.HZ)(),C=p.length,_=(0,k.y)(),N=(0,k.m9)();(0,b.useEffect)(()=>{y()},[y]);let S=(0,b.useCallback)(t=>{let n=p[t];if(!n)return 0;let i=j[n.path??""],a=_(n.path??"");return aA({diffSummary:i,commentPreference:e?.commentsPreference??h.sI.Visible,lineSpacingPreference:e?.lineSpacing??h.Ud.Relaxed,isCollapsed:a})},[p,j,_,e?.commentsPreference,e?.lineSpacing]),I=(0,b.useCallback)(e=>p[e]?.pathDigest??e,[p]);(0,b.useEffect)(()=>{y()},[y]),(0,b.useEffect)(()=>{c.current&&m(c.current.offsetTop)},[]);let L=(0,f.G7)("pull_request_files_debug_virtualization"),[D]=(0,nI.ok)(),T=D.get("_overscan"),E=T?parseInt(T,10):null,R=L&&E&&!isNaN(E)&&E>0?E:5,O=(0,b.useMemo)(()=>{let e=new Map;for(let[t,n]of p.entries())e.set(n.pathDigest,t);return e},[p]),P=(0,b.useCallback)(e=>{let t=document.querySelector("[data-path-digest]:focus-within")?.getAttribute("data-path-digest"),n=t?O.get(t)??-1:-1,i=N?O.get(N)??-1:-1;return n<0&&i<0?(0,se.vp)(e):Array.from(new Set([...(0,se.vp)(e),...[n,i].filter(e=>e>-1)])).sort((e,t)=>e-t)},[O,N]),F=(0,st.XW)({count:p.length,estimateSize:S,getItemKey:I,overscan:R,scrollMargin:u,gap:16,rangeExtractor:P,debug:L}),M=F.getVirtualItems(),$=(0,b.useMemo)(()=>{for(let e of M){let t=p[e.index];if(t?.loadingStatus==="NotLoaded")return e.index}return -1},[M,p]),B=(0,b.useRef)(null);return((0,b.useEffect)(()=>{if(!N){B.current=null;return}if(B.current===N)return;let e=O.get(N);if(void 0===e)return;let t=p[e];t?.loadingStatus==="NotLoaded"?x(t):((0,sa.H)(()=>{F.scrollToIndex(e)}),B.current=N)},[N,O,p,x,F]),(0,b.useEffect)(()=>{if(-1===$)return;let e=p[$];e&&x(e)},[$,p,x]),0===v)?(0,o.jsx)(aW,{}):0===p.length?(0,o.jsx)(au,{}):(0,o.jsxs)("div",{ref:c,"data-hpc":!0,"data-testid":"virtualized-diffs-list",className:"d-flex flex-column gap-3",children:[d&&g?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,o.jsx)("span",{className:"fgColor-accent",children:(0,o.jsx)(A.A,{href:"",onClick:e=>{e.preventDefault(),s({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,o.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",g.name]}),g.description?.trim()?(0,o.jsx)("p",{children:g.description}):null]}):null,(0,o.jsx)("div",{className:"PullRequestVirtualizedDiffsList-module__virtualized-diff-row--khMB_",style:{height:`${F.getTotalSize()}px`},children:M.map(t=>{let s=p[t.index];return(0,o.jsx)(si,{virtualRow:t,virtualizedDiffEntry:s,diffEntry:w[s?.path??""],diffSummary:j[s?.path??""],scrollMargin:F.options.scrollMargin,measureElement:F.measureElement,currentUser:e,headBranchName:n,headRepoName:i,headRepoOwner:a,pullRequestGlobalRelayId:r,repository:l},t.key)})}),C>=15&&(0,o.jsx)(a5,{}),(0,o.jsx)(ac.nq,{})]})}try{ss.displayName||(ss.displayName="PullRequestVirtualizedDiffsList")}catch{}var sr=n(48926),sl=n(43147),so=n(13071),sd=n(3536),sc=n(66108);let su=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,u,m,h,f,g,y,x,v,b,j,w,C,_,S,I,k,L=(0,c.c)(79),{commit:D,pullRequest:E,commits:R,repository:O}=e;L[0]!==R?(t=void 0===R?[]:R,L[0]=R,L[1]=t):t=L[1];let P=t,{helpUrl:F}=(0,aI.X)();e:{let e,t,i;if(0===P.length){let e;L[2]===Symbol.for("react.memo_cache_sentinel")?(e={prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1},L[2]=e):e=L[2],n=e;break e}let a=D.oid,s=P.findIndex(e=>e.oid===a);if(-1===s){let e;L[3]===Symbol.for("react.memo_cache_sentinel")?(e={prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1},L[3]=e):e=L[3],n=e;break e}let r=s>0?P[s-1]:null,l=s<P.length-1?P[s+1]:null,o=E?.number||0;if(L[4]!==l||L[5]!==r||L[6]!==O.name||L[7]!==O.ownerLogin||L[8]!==o){let n={owner:O.ownerLogin,repo:O.name,number:o};e=r?(0,eQ.zLJ)({...n,head:r.oid}):null,t=l?(0,eQ.zLJ)({...n,head:l.oid}):null,L[4]=l,L[5]=r,L[6]=O.name,L[7]=O.ownerLogin,L[8]=o,L[9]=e,L[10]=t}else e=L[9],t=L[10];let d=t;L[11]!==d||L[12]!==e?(i={prevCommitUrl:e,nextCommitUrl:d,canNavigate:!0},L[11]=d,L[12]=e,L[13]=i):i=L[13],n=i}let{prevCommitUrl:M,nextCommitUrl:$,canNavigate:B}=n,V=(0,N.Z)(),U=D.oid;L[14]!==U||L[15]!==O.name||L[16]!==O.ownerLogin?(i=(0,eQ.$Qz)({owner:O.ownerLogin,repo:O.name,commitish:U}),L[14]=U,L[15]=O.name,L[16]=O.ownerLogin,L[17]=i):i=L[17];let q=(0,sd.I)(`${i}/deferred_commit_data`);return L[18]!==D.shortMessageMarkdown?(a=(0,o.jsx)(tg.JR,{html:D.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word"}),L[18]=D.shortMessageMarkdown,L[19]=a):a=L[19],L[20]!==D.bodyMessageHtml?(s=D.bodyMessageHtml&&(0,o.jsx)(tg.JR,{html:D.bodyMessageHtml,className:"ws-pre-wrap f6 wb-break-word text-mono mt-2"}),L[20]=D.bodyMessageHtml,L[21]=s):s=L[21],L[22]!==a||L[23]!==s?(r=(0,o.jsxs)("div",{className:"flex-1",children:[a,s]}),L[22]=a,L[23]=s,L[24]=r):r=L[24],L[25]!==B||L[26]!==$||L[27]!==M?(l=B&&(0,o.jsx)("div",{className:"d-flex",children:(0,o.jsxs)(it.A,{children:[(0,o.jsx)(em.Q,{as:sc.N,"aria-label":M?"Previous commit":"No previous commit",to:M??"",inactive:!M,size:"small",leadingVisual:T.ChevronLeftIcon,children:"Prev"}),(0,o.jsx)(em.Q,{as:sc.N,"aria-label":$?"Next commit":"No next commit",to:$??"",inactive:!$,size:"small",trailingVisual:T.ChevronRightIcon,children:"Next"})]})}),L[25]=B,L[26]=$,L[27]=M,L[28]=l):l=L[28],L[29]!==U||L[30]!==O?(d=(0,eQ.IO9)({repo:O,action:"tree",commitish:U}),L[29]=U,L[30]=O,L[31]=d):d=L[31],L[32]!==d?(u=(0,o.jsx)(em.Q,{as:A.A,href:d,leadingVisual:T.FileCodeIcon,size:"small",children:"Browse files"}),L[32]=d,L[33]=u):u=L[33],L[34]!==u||L[35]!==l?(m=(0,o.jsxs)("div",{className:"d-flex flex-items-center flex-self-start gap-2 ml-2",children:[l,u]}),L[34]=u,L[35]=l,L[36]=m):m=L[36],L[37]!==m||L[38]!==r?(h=(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between border-bottom p-3 bgColor-inset flex-items-center",children:[r,m]}),L[37]=m,L[38]=r,L[39]=h):h=L[39],L[40]===Symbol.for("react.memo_cache_sentinel")?(f={fontColor:"fg.default"},L[40]=f):f=L[40],L[41]!==D.oid||L[42]!==q||L[43]!==F||L[44]!==O?(g=(0,o.jsx)(so.C,{deferredData:q,oid:D.oid,repo:O,helpUrl:F}),L[41]=D.oid,L[42]=q,L[43]=F,L[44]=O,L[45]=g):g=L[45],L[46]!==D||L[47]!==O||L[48]!==g?(y=(0,o.jsx)(sr.j,{commit:D,repo:O,settings:f,textVariant:"muted",children:g}),L[46]=D,L[47]=O,L[48]=g,L[49]=y):y=L[49],L[50]===Symbol.for("react.memo_cache_sentinel")?(x=(0,o.jsx)("span",{className:"color-fg-muted",children:"commit"}),L[50]=x):x=L[50],L[51]!==U||L[52]!==O.name||L[53]!==O.ownerLogin?(v=(0,eQ.$Qz)({owner:O.ownerLogin,repo:O.name,commitish:U}),L[51]=U,L[52]=O.name,L[53]=O.ownerLogin,L[54]=v):v=L[54],L[55]!==U?(b=(0,nq.F)(U),L[55]=U,L[56]=b):b=L[56],L[57]!==b?(j=(0,o.jsx)("code",{children:b}),L[57]=b,L[58]=j):j=L[58],L[59]!==v||L[60]!==j?(w=(0,o.jsx)(A.A,{href:v,className:"Link--primary",children:j}),L[59]=v,L[60]=j,L[61]=w):w=L[61],L[62]!==U?(C=(0,o.jsx)(sl.w,{sha:U,direction:"sw"}),L[62]=U,L[63]=C):C=L[63],L[64]!==w||L[65]!==C?(_=(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2 text-mono",children:[x,w,C]}),L[64]=w,L[65]=C,L[66]=_):_=L[66],L[67]!==y||L[68]!==_?(S=(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between px-3 py-2 f5",children:[y,_]}),L[67]=y,L[68]=_,L[69]=S):S=L[69],L[70]!==B||L[71]!==V||L[72]!==$||L[73]!==M?(I=B&&(0,o.jsx)(p.ak,{commands:{"pull-request-files-changed:go-to-previous-commit":()=>M&&V(M),"pull-request-files-changed:go-to-next-commit":()=>$&&V($)}}),L[70]=B,L[71]=V,L[72]=$,L[73]=M,L[74]=I):I=L[74],L[75]!==h||L[76]!==S||L[77]!==I?(k=(0,o.jsxs)("div",{className:"d-flex flex-column border rounded-2 overflow-hidden mb-3",children:[h,S,I]}),L[75]=h,L[76]=S,L[77]=I,L[78]=k):k=L[78],k}:function({commit:e,pullRequest:t,commits:n=[],repository:i}){let{helpUrl:a}=(0,aI.X)(),{prevCommitUrl:s,nextCommitUrl:r,canNavigate:l}=(0,b.useMemo)(()=>{if(0===n.length)return{prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1};let a=e.oid,s=n.findIndex(e=>e.oid===a);if(-1===s)return{prevCommitUrl:null,nextCommitUrl:null,canNavigate:!1};let r=s>0?n[s-1]:null,l=s<n.length-1?n[s+1]:null,o={owner:i.ownerLogin,repo:i.name,number:t?.number||0};return{prevCommitUrl:r?(0,eQ.zLJ)({...o,head:r.oid}):null,nextCommitUrl:l?(0,eQ.zLJ)({...o,head:l.oid}):null,canNavigate:!0}},[n,e,t,i]),d=(0,N.Z)(),c=e.oid,u=(0,sd.I)(`${(0,eQ.$Qz)({owner:i.ownerLogin,repo:i.name,commitish:c})}/deferred_commit_data`);return(0,o.jsxs)("div",{className:"d-flex flex-column border rounded-2 overflow-hidden mb-3",children:[(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between border-bottom p-3 bgColor-inset flex-items-center",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)(tg.JR,{html:e.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word"}),e.bodyMessageHtml&&(0,o.jsx)(tg.JR,{html:e.bodyMessageHtml,className:"ws-pre-wrap f6 wb-break-word text-mono mt-2"})]}),(0,o.jsxs)("div",{className:"d-flex flex-items-center flex-self-start gap-2 ml-2",children:[l&&(0,o.jsx)("div",{className:"d-flex",children:(0,o.jsxs)(it.A,{children:[(0,o.jsx)(em.Q,{as:sc.N,"aria-label":s?"Previous commit":"No previous commit",to:s??"",inactive:!s,size:"small",leadingVisual:T.ChevronLeftIcon,children:"Prev"}),(0,o.jsx)(em.Q,{as:sc.N,"aria-label":r?"Next commit":"No next commit",to:r??"",inactive:!r,size:"small",trailingVisual:T.ChevronRightIcon,children:"Next"})]})}),(0,o.jsx)(em.Q,{as:A.A,href:(0,eQ.IO9)({repo:i,action:"tree",commitish:c}),leadingVisual:T.FileCodeIcon,size:"small",children:"Browse files"})]})]}),(0,o.jsxs)("div",{className:"d-flex flex-row flex-justify-between px-3 py-2 f5",children:[(0,o.jsx)(sr.j,{commit:e,repo:i,settings:{fontColor:"fg.default"},textVariant:"muted",children:(0,o.jsx)(so.C,{deferredData:u,oid:e.oid,repo:i,helpUrl:a})}),(0,o.jsxs)("div",{className:"d-flex flex-items-center gap-2 text-mono",children:[(0,o.jsx)("span",{className:"color-fg-muted",children:"commit"}),(0,o.jsx)(A.A,{href:(0,eQ.$Qz)({owner:i.ownerLogin,repo:i.name,commitish:c}),className:"Link--primary",children:(0,o.jsx)("code",{children:(0,nq.F)(c)})}),(0,o.jsx)(sl.w,{sha:c,direction:"sw"})]})]}),l&&(0,o.jsx)(p.ak,{commands:{"pull-request-files-changed:go-to-previous-commit":()=>s&&d(s),"pull-request-files-changed:go-to-next-commit":()=>r&&d(r)}})]})};try{su.displayName||(su.displayName="PullRequestCommitHeader")}catch{}let sm=(0,d.Z6)()?function(){let e,t,n=(0,c.c)(3),{handleHashUpdate:i}=(0,k.Lh)();n[0]!==i?(e=()=>{let e=()=>{i()};return i(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},t=[i],n[0]=i,n[1]=e,n[2]=t):(e=n[1],t=n[2]),(0,b.useEffect)(e,t)}:function(){let{handleHashUpdate:e}=(0,k.Lh)();(0,b.useEffect)(()=>{let t=()=>{e()};return e(),window.addEventListener("hashchange",t),()=>{window.removeEventListener("hashchange",t)}},[e])};var sh=n(21132);let sf=(0,b.memo)((0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d=(0,c.c)(68),{diffEntryPathDigest:u,currentUser:m,diffManuallyExpanded:h,filteredDiffSummaries:f,headBranchName:p,headRepoName:g,headRepoOwner:y,pullRequestGlobalRelayId:x,repository:j,onScrollToAndFocusEntry:w}=e,C=(0,k.m9)()||u,_=(0,k.mY)();if(d[0]!==C||d[1]!==_){let e;d[3]!==C?(e=e=>e.pathDigest===C,d[3]=C,d[4]=e):e=d[4],t=_.find(e),d[0]=C,d[1]=_,d[2]=t}else t=d[2];let N=t,S=(0,k.Fm)(N?.path||""),I=N?.path||"",L=(0,k.jT)(I),D=(0,k.j5)(),T=(0,b.useRef)(!1);d[5]!==w||d[6]!==N?.loadingStatus||d[7]!==C?(n=()=>{T.current||N?.loadingStatus===sh.s.Loaded&&(w(C,{focusPathName:!0}),T.current=!0)},d[5]=w,d[6]=N?.loadingStatus,d[7]=C,d[8]=n):n=d[8];let E=N?.loadingStatus;if(d[9]!==w||d[10]!==C||d[11]!==E?(i=[w,E,C],d[9]=w,d[10]=C,d[11]=E,d[12]=i):i=d[12],(0,b.useEffect)(n,i),!f.some(e=>e.path===I)){let e;return d[13]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(au,{}),d[13]=e):e=d[13],e}if(N&&N.loadingStatus!==sh.s.Loaded){let e,t,n,i,a=`Loading ${I}`,s=`eager-load-${I}`,r=`diff-${I}`;d[14]!==a||d[15]!==s||d[16]!==r?(e=(0,o.jsx)(aF,{ariaLabel:a,testId:s,approximateLineCount:5,id:r}),d[14]=a,d[15]=s,d[16]=r,d[17]=e):e=d[17];let l=e,c=`diff-${I}`;d[18]===Symbol.for("react.memo_cache_sentinel")?(t=(0,v.$)(aP.A.diffTargetable,aP.A.diff),d[18]=t):t=d[18];let u=`${C}_${I}`,m=`#diff-${C}`,h=S?.linesAdded??0,f=S?.linesChanged??0,p=S?.linesDeleted??0;return d[19]!==I||d[20]!==D||d[21]!==m||d[22]!==h||d[23]!==f||d[24]!==p?(n=(0,o.jsx)("div",{className:aP.A.diffHeaderWrapper,children:(0,o.jsx)(aV.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:m,canToggleRichDiff:!1,linesAdded:h,linesChanged:f,linesDeleted:p,newPath:I,patchStatus:"",path:I,onToggleExpandAllLines:aU.l,onToggleFileCollapsed:aU.l,onToggleDiffDisplay:aU.l,isInSingleFileMode:D})}),d[19]=I,d[20]=D,d[21]=m,d[22]=h,d[23]=f,d[24]=p,d[25]=n):n=d[25],d[26]!==l||d[27]!==c||d[28]!==u||d[29]!==n?(i=(0,o.jsxs)("div",{role:"region",id:c,className:t,"data-targeted":!1,"data-hpc":!0,children:[n,l]},u),d[26]=l,d[27]=c,d[28]=u,d[29]=n,d[30]=i):i=d[30],i}if(!L){let e;return d[31]!==I||d[32]!==u?(e=(0,o.jsx)(aB,{linesAdded:0,linesChanged:0,linesDeleted:0,path:I,pathDigest:u,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"}),d[31]=I,d[32]=u,d[33]=e):e=d[33],e}d[34]!==L?(a=(0,o.jsx)(aB,{...L}),d[34]=L,d[35]=a):a=d[35];let A=L.reviewed??!1;return d[36]!==L.diffLines||d[37]!==L.diffSize||d[38]!==L.helpUrl||d[39]!==L.isBinary||d[40]!==L.isTooBig||d[41]!==L.linesAdded||d[42]!==L.linesChanged||d[43]!==L.linesDeleted||d[44]!==L.newCommitOid||d[45]!==L.newTreeEntry||d[46]!==L.objectId||d[47]!==L.oldCommitOid||d[48]!==L.oldTreeEntry||d[49]!==L.path||d[50]!==L.pathDigest||d[51]!==L.richDiff||d[52]!==L.status||d[53]!==L.submodule||d[54]!==L.truncatedReason||d[55]!==m||d[56]!==h||d[57]!==p||d[58]!==g||d[59]!==y||d[60]!==x||d[61]!==j||d[62]!==A?(s=(0,o.jsx)(aR,{changeType:L.status,currentUser:m,diffLines:L.diffLines,diffManuallyExpanded:h,diffSize:L.diffSize,headBranchName:p,headRepoName:g,headRepoOwner:y,helpUrl:L.helpUrl,isBinary:L.isBinary,isSelected:!1,isTooBig:L.isTooBig,linesAdded:L.linesAdded,linesChanged:L.linesChanged,linesDeleted:L.linesDeleted,newCommitOid:L.newCommitOid,newTreeEntry:L.newTreeEntry,objectId:L.objectId,oldCommitOid:L.oldCommitOid,oldTreeEntry:L.oldTreeEntry,path:L.path,pathDigest:L.pathDigest,pullRequestGlobalRelayId:x,repository:j,reviewed:A,richDiff:L.richDiff,status:L.status,submodule:L.submodule,truncatedReason:L.truncatedReason}),d[36]=L.diffLines,d[37]=L.diffSize,d[38]=L.helpUrl,d[39]=L.isBinary,d[40]=L.isTooBig,d[41]=L.linesAdded,d[42]=L.linesChanged,d[43]=L.linesDeleted,d[44]=L.newCommitOid,d[45]=L.newTreeEntry,d[46]=L.objectId,d[47]=L.oldCommitOid,d[48]=L.oldTreeEntry,d[49]=L.path,d[50]=L.pathDigest,d[51]=L.richDiff,d[52]=L.status,d[53]=L.submodule,d[54]=L.truncatedReason,d[55]=m,d[56]=h,d[57]=p,d[58]=g,d[59]=y,d[60]=x,d[61]=j,d[62]=A,d[63]=s):s=d[63],d[64]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(ac.nq,{}),d[64]=r):r=d[64],d[65]!==a||d[66]!==s?(l=(0,o.jsxs)(Y.t,{fallback:a,children:[s,r]}),d[65]=a,d[66]=s,d[67]=l):l=d[67],l}:function({diffEntryPathDigest:e,currentUser:t,diffManuallyExpanded:n,filteredDiffSummaries:i,headBranchName:a,headRepoName:s,headRepoOwner:r,pullRequestGlobalRelayId:l,repository:d,onScrollToAndFocusEntry:c}){let u=(0,k.m9)()||e,m=(0,k.mY)().find(e=>e.pathDigest===u),h=(0,k.Fm)(m?.path||""),f=m?.path||"",p=(0,k.jT)(f),g=(0,k.j5)(),y=(0,b.useRef)(!1);if((0,b.useEffect)(()=>{y.current||m?.loadingStatus===sh.s.Loaded&&(c(u,{focusPathName:!0}),y.current=!0)},[c,m?.loadingStatus,u]),!i.some(e=>e.path===f))return(0,o.jsx)(au,{});if(m&&m.loadingStatus!==sh.s.Loaded){let e=(0,o.jsx)(aF,{ariaLabel:`Loading ${f}`,testId:`eager-load-${f}`,approximateLineCount:5,id:`diff-${f}`});return(0,o.jsxs)("div",{role:"region",id:`diff-${f}`,className:(0,v.$)(aP.A.diffTargetable,aP.A.diff),"data-targeted":!1,"data-hpc":!0,children:[(0,o.jsx)("div",{className:aP.A.diffHeaderWrapper,children:(0,o.jsx)(aV.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${u}`,canToggleRichDiff:!1,linesAdded:h?.linesAdded??0,linesChanged:h?.linesChanged??0,linesDeleted:h?.linesDeleted??0,newPath:f,patchStatus:"",path:f,onToggleExpandAllLines:aU.l,onToggleFileCollapsed:aU.l,onToggleDiffDisplay:aU.l,isInSingleFileMode:g})}),e]},`${u}_${f}`)}return p?(0,o.jsxs)(Y.t,{fallback:(0,o.jsx)(aB,{...p}),children:[(0,o.jsx)(aR,{changeType:p.status,currentUser:t,diffLines:p.diffLines,diffManuallyExpanded:n,diffSize:p.diffSize,headBranchName:a,headRepoName:s,headRepoOwner:r,helpUrl:p.helpUrl,isBinary:p.isBinary,isSelected:!1,isTooBig:p.isTooBig,linesAdded:p.linesAdded,linesChanged:p.linesChanged,linesDeleted:p.linesDeleted,newCommitOid:p.newCommitOid,newTreeEntry:p.newTreeEntry,objectId:p.objectId,oldCommitOid:p.oldCommitOid,oldTreeEntry:p.oldTreeEntry,path:p.path,pathDigest:p.pathDigest,pullRequestGlobalRelayId:l,repository:d,reviewed:p.reviewed??!1,richDiff:p.richDiff,status:p.status,submodule:p.submodule,truncatedReason:p.truncatedReason}),(0,o.jsx)(ac.nq,{})]}):(0,o.jsx)(aB,{linesAdded:0,linesChanged:0,linesDeleted:0,path:f,pathDigest:e,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})});try{sf.displayName||(sf.displayName="SingleFileModePullRequestDiffEntry")}catch{}let sp=(0,b.memo)(function({currentUser:e,filteredDiffSummaries:t,headBranchName:n,headRepoName:i,headRepoOwner:a,pullRequestGlobalRelayId:s,repository:r}){let l=(0,k.HZ)(),d=(0,b.useMemo)(()=>Object.values(l??{}).filter(e=>null!==e),[l])[0],c=(0,k.m9)(),{onScrollToAndFocusEntry:u,getTargetableEntriesMap:m}=a6(),h=(0,k.qg)(),f=(0,k.uh)()[0],p=(0,k.zK)(),g=(0,k.mF)(),{navigateToSelectedComment:y,navigateToSelectedAnnotation:x}=(0,k.Lh)(),v=(0,b.useRef)(!0),j=(0,k.mY)().find(e=>e.pathDigest===c),{loadMore:w}=(0,k.pV)(),C=(0,b.useCallback)(()=>{p?y(p):g&&!isNaN(Number(g))?x(Number(g)):c&&j?w(j):!c&&f?.pathDigest&&(0,S.Zu)(`diff-${f.pathDigest}`)},[f?.pathDigest,w,x,y,g,p,c,j]);if((0,b.useEffect)(()=>{v.current&&(C(),v.current=!1)},[]),0===h)return(0,o.jsx)(aW,{});if(0===t.length)return(0,o.jsx)(au,{});let _=c||d?.pathDigest||f?.pathDigest;return _?(0,o.jsx)("div",{ref:e=>{let t=m();e?t.set(_,e):t.delete(_)},children:(0,o.jsx)(sf,{diffEntryPathDigest:_,currentUser:e,diffManuallyExpanded:!1,filteredDiffSummaries:t,headBranchName:n,headRepoName:i,headRepoOwner:a,pullRequestGlobalRelayId:s,repository:r,onScrollToAndFocusEntry:u})}):null});try{sp.displayName||(sp.displayName="SingleFileModeDiffEntryNavigator")}catch{}let sg=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(20),{basePath:s,baseSha:r,forceUnifiedView:l,headSha:d,initialData:u,treeCollapsedByDefault:m,treeEnableInlineCompactMode:h,userCanComment:f,useChangeGroups:p,useInlineComments:g,useEditOptions:y,useFileTree:x,useAdvancedToolbar:v,useBasicToolbar:b}=e,j=p??!1,w=g??!1,C=y??!1,_=x??!1,N=v??!1,S=b??!1,I=f??!0,k=l??!1,L=m??!1,D=h??!1;a[0]!==j||a[1]!==D||a[2]!==w||a[3]!==C||a[4]!==_||a[5]!==N||a[6]!==S||a[7]!==I||a[8]!==k||a[9]!==L?(t={useChangeGroups:j,useInlineComments:w,useEditOptions:C,useFileTree:_,useAdvancedToolbar:N,useBasicToolbar:S,userCanComment:I,forceUnifiedView:k,treeCollapsedByDefault:L,treeEnableInlineCompactMode:D},a[0]=j,a[1]=D,a[2]=w,a[3]=C,a[4]=_,a[5]=N,a[6]=S,a[7]=I,a[8]=k,a[9]=L,a[10]=t):t=a[10];let T=t,E=u?u.pullRequest.comparison.headOid:d,A=u?u.pullRequest.comparison.baseOid:r;if(!E)throw Error("DiffComparisonViewer: headSha is required if initialData is not provided");let R=!u;a[11]!==s||a[12]!==A||a[13]!==E||a[14]!==R?(n={basePath:s,headSha:E,baseSha:A,shouldFetch:R},a[11]=s,a[12]=A,a[13]=E,a[14]=R,a[15]=n):n=a[15];let{data:O,isLoading:P}=i4(n),F=u??O;return a[16]!==T||a[17]!==F||a[18]!==P?(i=(0,o.jsx)(o.Fragment,{children:F&&!P?(0,o.jsx)(i2.Kg,{basePageDataUrl:F.pullRequest.pathName,children:(0,o.jsx)(i0.v,{initData:F,children:(0,o.jsx)(sy,{...F,configOpts:T})})}):(0,o.jsxs)("div",{className:"width-full",children:[(0,o.jsx)("div",{className:iY,children:(0,o.jsx)("div",{className:iX,children:(0,o.jsx)(al.O,{width:"lg",height:"lg",variant:"rounded"})})}),(0,o.jsxs)("div",{className:"d-flex flex-column gap-3 p-3",children:[(0,o.jsx)(ao,{lines:4}),(0,o.jsx)(ao,{lines:8}),(0,o.jsx)(ao,{lines:5})]})]})}),a[16]=T,a[17]=F,a[18]=P,a[19]=i):i=a[19],i}:function({basePath:e,baseSha:t,forceUnifiedView:n,headSha:i,initialData:a,treeCollapsedByDefault:s,treeEnableInlineCompactMode:r,userCanComment:l,useChangeGroups:d,useInlineComments:c,useEditOptions:u,useFileTree:m,useAdvancedToolbar:h,useBasicToolbar:f}){let p=(0,b.useMemo)(()=>({useChangeGroups:d??!1,useInlineComments:c??!1,useEditOptions:u??!1,useFileTree:m??!1,useAdvancedToolbar:h??!1,useBasicToolbar:f??!1,userCanComment:l??!0,forceUnifiedView:n??!1,treeCollapsedByDefault:s??!1,treeEnableInlineCompactMode:r??!1}),[d,c,u,m,h,f,l,n,s,r]),g=a?a.pullRequest.comparison.headOid:i,y=a?a.pullRequest.comparison.baseOid:t;if(!g)throw Error("DiffComparisonViewer: headSha is required if initialData is not provided");let{data:x,isLoading:v}=i4({basePath:e,headSha:g,baseSha:y,shouldFetch:!a}),j=a??x;return(0,o.jsx)(o.Fragment,{children:j&&!v?(0,o.jsx)(i2.Kg,{basePageDataUrl:j.pullRequest.pathName,children:(0,o.jsx)(i0.v,{initData:j,children:(0,o.jsx)(sy,{...j,configOpts:p})})}):(0,o.jsxs)("div",{className:"width-full",children:[(0,o.jsx)("div",{className:iY,children:(0,o.jsx)("div",{className:iX,children:(0,o.jsx)(al.O,{width:"lg",height:"lg",variant:"rounded"})})}),(0,o.jsxs)("div",{className:"d-flex flex-column gap-3 p-3",children:[(0,o.jsx)(ao,{lines:4}),(0,o.jsx)(ao,{lines:8}),(0,o.jsx)(ao,{lines:5})]})]})})},sy=(0,d.Z6)()?function(e){let t,n,i,a,s,r,l,d,j,w,C,_,N,S,D,T,E,A,R,O,P,F,M,$,B,V,U,q=(0,c.c)(123),{codeowners:H,commit:G,commits:K,configOpts:W,diffSummaries:z,fileFilter:Q,pullRequest:Z,repository:J,markers:Y,pageLimits:X,urls:ee,user:et,isSingleFileMode:en,virtualizeDiffEntries:ei}=e;iP(Y,z),(0,g.L)(!0),sm();let ea=sj(et);q[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.G7)("pull_request_files_virtualization_without_min_threshold"),q[0]=t):t=q[0];let es=t;q[1]===Symbol.for("react.memo_cache_sentinel")?(n={onSuccess:sb,onError:sv},q[1]=n):n=q[1];let{mutate:er}=(0,u.U)(n),{data:el}=(0,m.ID)(ea);q[2]!==el?.commentsPreference||q[3]!==er?(i=()=>{er({commentsPreference:el?.commentsPreference===h.sI.Visible?h.sI.Collapsed:h.sI.Visible})},q[2]=el?.commentsPreference,q[3]=er,q[4]=i):i=q[4],el?.commentsPreference;let eo=i;el?.commentsPreference,el?.lineSpacing,el?.splitPreference;let ed=et.currentUserAvatarUrl||"",ec=et.currentUserLogin||"",eu=W.forceUnifiedView?"unified":el?.splitPreference??"unified",em=W.useInlineComments??!1,eh=W.useEditOptions??!1,ef=el?.lineSpacing??"relaxed",ep=W.userCanComment&&et.canComment,eg=el?.commentsPreference??"visible";q[5]!==ep||q[6]!==eg||q[7]!==ed||q[8]!==ec||q[9]!==eu||q[10]!==em||q[11]!==eh||q[12]!==ef||q[13]!==et.canApplySuggestion||q[14]!==et.hasCopilotAccess||q[15]!==et.tabSize?(a={avatarURL:ed,login:ec,tabSize:et.tabSize,splitPreference:eu,shouldDisplayComments:em,shouldDisplayEditOptions:eh,lineSpacing:ef,canComment:ep,canApplySuggestion:et.canApplySuggestion,commentsPreference:eg,hasCopilotAccess:et.hasCopilotAccess},q[5]=ep,q[6]=eg,q[7]=ed,q[8]=ec,q[9]=eu,q[10]=em,q[11]=eh,q[12]=ef,q[13]=et.canApplySuggestion,q[14]=et.hasCopilotAccess,q[15]=et.tabSize,q[16]=a):a=q[16];let ey=a,{updateCommentsPreference:ex}=(0,k.CQ)();q[17]!==el?.commentsPreference||q[18]!==ex?(s=()=>{ex(el?.commentsPreference??h.sI.Visible)},q[17]=el?.commentsPreference,q[18]=ex,q[19]=s):s=q[19];let ev=el?.commentsPreference;q[20]!==ev||q[21]!==ex?(r=[ev,ex],q[20]=ev,q[21]=ex,q[22]=r):r=q[22],(0,b.useEffect)(s,r);let{splitPagePaneHidden:eb,treeViewState:ej,treeToggleElement:ew,collapseMobileTree:eC,expandTree:e_}=at(eU,et.isFileTreeExpanded&&!W.treeCollapsedByDefault,W.treeEnableInlineCompactMode,ey);q[23]!==H||q[24]!==Z.pathName?(l={basePath:Z.pathName},H&&(l.initialData=H),q[23]=H,q[24]=Z.pathName,q[25]=l):l=q[25];let{data:eN}=(0,I.dG)(l),{setCodeowners:eS}=(0,k.wh)();q[26]!==eN||q[27]!==eS?(d=()=>{eS(eN)},j=[eN,eS],q[26]=eN,q[27]=eS,q[28]=d,q[29]=j):(d=q[28],j=q[29]),(0,b.useEffect)(d,j);let eI=(0,k.qg)();q[30]===Symbol.for("react.memo_cache_sentinel")?(w=[],q[30]=w):w=q[30];let[ek]=(0,i8.I)(sx,!0,w),eL=es||ei,eD=(0,k.I8)(),{updateDiffFilter:eT}=(0,k.or)();q[31]!==Q.initialState||q[32]!==eT?(C=()=>{eT({...Q.initialState,unselectedFileExtensions:new Set(Q.initialState.unselectedFileExtensions)})},_=[eT,Q.initialState],q[31]=Q.initialState,q[32]=eT,q[33]=C,q[34]=_):(C=q[33],_=q[34]),(0,b.useEffect)(C,_);let eE=(0,k.mU)();q[35]!==eT?(N=e=>{eT(e,!0)},q[35]=eT,q[36]=N):N=q[36];let eA=N;q[37]!==eC||q[38]!==ej.compactMode?(S=()=>{"none"!==ej.compactMode&&eC()},q[37]=eC,q[38]=ej.compactMode,q[39]=S):S=q[39];let eR=S,eO=(0,b.useRef)(null),eP="expanded"!==ej.wideMode?"small":"medium";q[40]!==ey.login||q[41]!==eD||q[42]!==Q.menuOptions||q[43]!==eA||q[44]!==Z.pathName||q[45]!==eP?(D=(0,o.jsx)(L,{ref:eO,basePath:Z.pathName,fileFilterMenuOptions:Q.menuOptions,fileFilterState:eD,setFileFilterState:eA,viewerLogin:ey.login,filterSize:eP}),q[40]=ey.login,q[41]=eD,q[42]=Q.menuOptions,q[43]=eA,q[44]=Z.pathName,q[45]=eP,q[46]=D):D=q[46];let eF=D,eM=(0,k.gt)(),e$=z.length>0,eV=W.useChangeGroups&&eM&&e$;q[47]!==eV?(T={changeGroupsEnabled:eV},q[47]=eV,q[48]=T):T=q[48],ar(T);let{aliveChannel:eH,bannersData:eG}=(0,i1.o)();q[49]!==e_?(E=()=>{e_(),window.requestAnimationFrame(()=>{eO.current?.focus()})},q[49]=e_,q[50]=E):E=q[50];let eK=E;q[51]!==eK||q[52]!==eo?(A=(0,o.jsx)(p.ak,{commands:{"pull-request-files-changed:collapse-expand-comments":eo,"pull-request-files-changed:focus-file-tree-filter":eK}}),q[51]=eK,q[52]=eo,q[53]=A):A=q[53],q[54]!==eF||q[55]!==eH||q[56]!==eV||q[57]!==eG||q[58]!==eC||q[59]!==K||q[60]!==W.useAdvancedToolbar||q[61]!==W.useBasicToolbar||q[62]!==eI||q[63]!==eE||q[64]!==eR||q[65]!==eA||q[66]!==X||q[67]!==Z||q[68]!==J||q[69]!==ew||q[70]!==ej.compactMode||q[71]!==ej.wideMode||q[72]!==ee||q[73]!==et?(R=W.useAdvancedToolbar||W.useBasicToolbar?(0,o.jsxs)(o.Fragment,{children:[W.useAdvancedToolbar&&(0,o.jsx)(iA,{changeGroupsPreferenceAvailable:eV,commits:K,currentUserLogin:et.currentUserLogin,fileFilter:eF,isFileTreeExpanded:"expanded"===ej.wideMode,lastReviewOid:et.lastReviewOid,pageLimits:X,pullRequest:Z,repository:J,shouldShowViewedFilesCount:et.shouldShowViewedFilesCount,totalFilesCount:eI,treeToggleElement:ew,bannersData:eG,urls:ee,user:et,aliveChannel:eH}),W.useBasicToolbar&&(0,o.jsx)(i5,{fileFilter:eF,isFileTreeExpanded:"expanded"===ej.wideMode,shouldShowViewedFilesCount:et.shouldShowViewedFilesCount,totalFilesCount:eI,treeToggleElement:ew,userNotices:et.userNotices}),"overlay"===ej.compactMode&&(0,o.jsx)(y.l,{onClose:()=>eC(),position:{narrow:"fullscreen",regular:"left",wide:"left"},title:"Files",className:"p-0",children:(0,o.jsx)(eq,{allowPullRequestGroups:eV,fileFilter:eF,filteredDiffs:eE,onFileSelected:eR,onSetFilterState:eA})})]}):null,q[54]=eF,q[55]=eH,q[56]=eV,q[57]=eG,q[58]=eC,q[59]=K,q[60]=W.useAdvancedToolbar,q[61]=W.useBasicToolbar,q[62]=eI,q[63]=eE,q[64]=eR,q[65]=eA,q[66]=X,q[67]=Z,q[68]=J,q[69]=ew,q[70]=ej.compactMode,q[71]=ej.wideMode,q[72]=ee,q[73]=et,q[74]=R):R=q[74],q[75]!==eF||q[76]!==eV||q[77]!==W.useBasicToolbar||q[78]!==W.useFileTree||q[79]!==eE||q[80]!==eR||q[81]!==eA||q[82]!==eb||q[83]!==ej.compactMode||q[84]!==ej.wideMode?(O=W.useFileTree?(0,o.jsx)(x.O7.Pane,{position:"start",sticky:!0,offsetHeader:W.useBasicToolbar?"50px":"60px","aria-label":"File tree",padding:"none",className:(0,v.$)(iG,eb&&iB,"expanded"===ej.wideMode&&iK,"collapsed"===ej.wideMode&&iW,"none"===ej.compactMode&&iz,"overlay"===ej.compactMode&&iQ,"inline"===ej.compactMode&&iZ,iU),divider:{regular:"inline"===ej.compactMode?"none":"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:"inline"!==ej.compactMode,children:(0,o.jsx)(eq,{allowPullRequestGroups:eV,className:(0,v.$)(eB,iV),fileFilter:eF,filteredDiffs:eE,onFileSelected:eR,onSetFilterState:eA})}):null,q[75]=eF,q[76]=eV,q[77]=W.useBasicToolbar,q[78]=W.useFileTree,q[79]=eE,q[80]=eR,q[81]=eA,q[82]=eb,q[83]=ej.compactMode,q[84]=ej.wideMode,q[85]=O):O=q[85];let eW="inline"===ej.compactMode;q[86]!==eW?(P={narrow:!1,regular:eW},q[86]=eW,q[87]=P):P=q[87];let ez="expanded"===ej.wideMode&&iK;return q[88]!==ez?(F=(0,v.$)(iJ,ez),q[88]=ez,q[89]=F):F=q[89],q[90]!==G||q[91]!==K||q[92]!==Z||q[93]!==J?(M=G&&(0,o.jsx)(su,{commit:G,pullRequest:Z,commits:K,repository:J}),q[90]=G,q[91]=K,q[92]=Z,q[93]=J,q[94]=M):M=q[94],q[95]!==eL||q[96]!==X||q[97]!==J||q[98]!==ee?($=(0,o.jsx)(eZ,{pageLimits:X,repository:J,urls:ee,isDiffVirtualizationEnabled:eL}),q[95]=eL,q[96]=X,q[97]=J,q[98]=ee,q[99]=$):$=q[99],q[100]!==ey||q[101]!==eE||q[102]!==eA||q[103]!==eL||q[104]!==ek||q[105]!==en||q[106]!==Z.globalRelayId||q[107]!==Z.headBranch||q[108]!==Z.headRepositoryName||q[109]!==Z.headRepositoryOwnerLogin||q[110]!==J?(B=eL&&!ek?(0,o.jsx)(ss,{currentUser:ey,headBranchName:Z.headBranch,headRepoName:Z.headRepositoryName,headRepoOwner:Z.headRepositoryOwnerLogin,onSetFilterState:eA,pullRequestGlobalRelayId:Z.globalRelayId,filteredDiffSummaries:eE,repository:J,showPullRequestGroups:!0}):(0,o.jsx)(o.Fragment,{children:en?(0,o.jsx)(sp,{currentUser:ey,filteredDiffSummaries:eE,headBranchName:Z.headBranch,headRepoName:Z.headRepositoryName,headRepoOwner:Z.headRepositoryOwnerLogin,pullRequestGlobalRelayId:Z.globalRelayId,repository:J}):(0,o.jsx)(a7,{currentUser:ey,headBranchName:Z.headBranch,headRepoName:Z.headRepositoryName,headRepoOwner:Z.headRepositoryOwnerLogin,onSetFilterState:eA,pullRequestGlobalRelayId:Z.globalRelayId,filteredDiffSummaries:eE,repository:J,showPullRequestGroups:!0})}),q[100]=ey,q[101]=eE,q[102]=eA,q[103]=eL,q[104]=ek,q[105]=en,q[106]=Z.globalRelayId,q[107]=Z.headBranch,q[108]=Z.headRepositoryName,q[109]=Z.headRepositoryOwnerLogin,q[110]=J,q[111]=B):B=q[111],q[112]!==P||q[113]!==F||q[114]!==M||q[115]!==$||q[116]!==B?(V=(0,o.jsxs)(x.O7.Content,{as:"div",width:"full",hidden:P,padding:"none",className:F,children:[M,$,B]}),q[112]=P,q[113]=F,q[114]=M,q[115]=$,q[116]=B,q[117]=V):V=q[117],q[118]!==A||q[119]!==R||q[120]!==O||q[121]!==V?(U=(0,o.jsxs)(o.Fragment,{children:[A,R,O,V]}),q[118]=A,q[119]=R,q[120]=O,q[121]=V,q[122]=U):U=q[122],U}:function({codeowners:e,commit:t,commits:n,configOpts:i,diffSummaries:a,fileFilter:s,pullRequest:r,repository:l,markers:d,pageLimits:c,urls:j,user:w,isSingleFileMode:C,virtualizeDiffEntries:_}){iP(d,a),(0,g.L)(!0),sm();let N=sj(w),S=(0,f.G7)("pull_request_files_virtualization_without_min_threshold"),{mutate:D}=(0,u.U)({onSuccess:()=>{},onError:()=>{}}),{data:T}=(0,m.ID)(N),E=(0,b.useCallback)(()=>{D({commentsPreference:T?.commentsPreference===h.sI.Visible?h.sI.Collapsed:h.sI.Visible})},[T?.commentsPreference,D]),A=(0,b.useMemo)(()=>({avatarURL:w.currentUserAvatarUrl||"",login:w.currentUserLogin||"",tabSize:w.tabSize,splitPreference:i.forceUnifiedView?"unified":T?.splitPreference??"unified",shouldDisplayComments:i.useInlineComments??!1,shouldDisplayEditOptions:i.useEditOptions??!1,lineSpacing:T?.lineSpacing??"relaxed",canComment:i.userCanComment&&w.canComment,canApplySuggestion:w.canApplySuggestion,commentsPreference:T?.commentsPreference??"visible",hasCopilotAccess:w.hasCopilotAccess}),[i.forceUnifiedView,i.useEditOptions,i.useInlineComments,i.userCanComment,T?.commentsPreference,T?.lineSpacing,T?.splitPreference,w.canApplySuggestion,w.canComment,w.currentUserAvatarUrl,w.currentUserLogin,w.hasCopilotAccess,w.tabSize]),{updateCommentsPreference:R}=(0,k.CQ)();(0,b.useEffect)(()=>{R(T?.commentsPreference??h.sI.Visible)},[T?.commentsPreference,R]);let{splitPagePaneHidden:O,treeViewState:P,treeToggleElement:F,collapseMobileTree:M,expandTree:$}=at(eU,w.isFileTreeExpanded&&!i.treeCollapsedByDefault,i.treeEnableInlineCompactMode,A),B={basePath:r.pathName};e&&(B.initialData=e);let{data:V}=(0,I.dG)(B),{setCodeowners:U}=(0,k.wh)();(0,b.useEffect)(()=>{U(V)},[V,U]);let q=(0,k.qg)(),[H]=(0,i8.I)(()=>!1,!0,[]),G=S||_,K=(0,k.I8)(),{updateDiffFilter:W}=(0,k.or)();(0,b.useEffect)(()=>{W({...s.initialState,unselectedFileExtensions:new Set(s.initialState.unselectedFileExtensions)})},[W,s.initialState]);let z=(0,k.mU)(),Q=(0,b.useCallback)(e=>{W(e,!0)},[W]),Z=(0,b.useCallback)(()=>{"none"!==P.compactMode&&M()},[M,P.compactMode]),J=(0,b.useRef)(null),Y=(0,b.useMemo)(()=>(0,o.jsx)(L,{ref:J,basePath:r.pathName,fileFilterMenuOptions:s.menuOptions,fileFilterState:K,setFileFilterState:Q,viewerLogin:A.login,filterSize:"expanded"!==P.wideMode?"small":"medium"}),[r.pathName,s.menuOptions,K,Q,A.login,P.wideMode]),X=(0,k.gt)(),ee=a.length>0,et=i.useChangeGroups&&X&&ee;ar({changeGroupsEnabled:et});let{aliveChannel:en,bannersData:ei}=(0,i1.o)(),ea=(0,b.useCallback)(()=>{$(),window.requestAnimationFrame(()=>{J.current?.focus()})},[$]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.ak,{commands:{"pull-request-files-changed:collapse-expand-comments":E,"pull-request-files-changed:focus-file-tree-filter":ea}}),i.useAdvancedToolbar||i.useBasicToolbar?(0,o.jsxs)(o.Fragment,{children:[i.useAdvancedToolbar&&(0,o.jsx)(iA,{changeGroupsPreferenceAvailable:et,commits:n,currentUserLogin:w.currentUserLogin,fileFilter:Y,isFileTreeExpanded:"expanded"===P.wideMode,lastReviewOid:w.lastReviewOid,pageLimits:c,pullRequest:r,repository:l,shouldShowViewedFilesCount:w.shouldShowViewedFilesCount,totalFilesCount:q,treeToggleElement:F,bannersData:ei,urls:j,user:w,aliveChannel:en}),i.useBasicToolbar&&(0,o.jsx)(i5,{fileFilter:Y,isFileTreeExpanded:"expanded"===P.wideMode,shouldShowViewedFilesCount:w.shouldShowViewedFilesCount,totalFilesCount:q,treeToggleElement:F,userNotices:w.userNotices}),"overlay"===P.compactMode&&(0,o.jsx)(y.l,{onClose:()=>M(),position:{narrow:"fullscreen",regular:"left",wide:"left"},title:"Files",className:"p-0",children:(0,o.jsx)(eq,{allowPullRequestGroups:et,fileFilter:Y,filteredDiffs:z,onFileSelected:Z,onSetFilterState:Q})})]}):null,i.useFileTree?(0,o.jsx)(x.O7.Pane,{position:"start",sticky:!0,offsetHeader:i.useBasicToolbar?"50px":"60px","aria-label":"File tree",padding:"none",className:(0,v.$)(iG,O&&iB,"expanded"===P.wideMode&&iK,"collapsed"===P.wideMode&&iW,"none"===P.compactMode&&iz,"overlay"===P.compactMode&&iQ,"inline"===P.compactMode&&iZ,iU),divider:{regular:"inline"===P.compactMode?"none":"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:"inline"!==P.compactMode,children:(0,o.jsx)(eq,{allowPullRequestGroups:et,className:(0,v.$)(eB,iV),fileFilter:Y,filteredDiffs:z,onFileSelected:Z,onSetFilterState:Q})}):null,(0,o.jsxs)(x.O7.Content,{as:"div",width:"full",hidden:{narrow:!1,regular:"inline"===P.compactMode},padding:"none",className:(0,v.$)(iJ,"expanded"===P.wideMode&&iK),children:[t&&(0,o.jsx)(su,{commit:t,pullRequest:r,commits:n,repository:l}),(0,o.jsx)(eZ,{pageLimits:c,repository:l,urls:j,isDiffVirtualizationEnabled:G}),G&&!H?(0,o.jsx)(ss,{currentUser:A,headBranchName:r.headBranch,headRepoName:r.headRepositoryName,headRepoOwner:r.headRepositoryOwnerLogin,onSetFilterState:Q,pullRequestGlobalRelayId:r.globalRelayId,filteredDiffSummaries:z,repository:l,showPullRequestGroups:!0}):(0,o.jsx)(o.Fragment,{children:C?(0,o.jsx)(sp,{currentUser:A,filteredDiffSummaries:z,headBranchName:r.headBranch,headRepoName:r.headRepositoryName,headRepoOwner:r.headRepositoryOwnerLogin,pullRequestGlobalRelayId:r.globalRelayId,repository:l}):(0,o.jsx)(a7,{currentUser:A,headBranchName:r.headBranch,headRepoName:r.headRepositoryName,headRepoOwner:r.headRepositoryOwnerLogin,onSetFilterState:Q,pullRequestGlobalRelayId:r.globalRelayId,filteredDiffSummaries:z,repository:l,showPullRequestGroups:!0})})]})]})};function sx(){return!1}function sv(){}function sb(){}let sj=(0,d.Z6)()?function(e){let t,n=(0,c.c)(5),i=(0,m.C0)(e.viewSettings.splitPreference),a=(0,m.Qn)(e.viewSettings.hideWhitespace);return n[0]!==e.viewSettings.commentsPreference||n[1]!==e.viewSettings.lineSpacing||n[2]!==i||n[3]!==a?(t={hideWhitespace:a,splitPreference:i,lineSpacing:e.viewSettings.lineSpacing,commentsPreference:e.viewSettings.commentsPreference},n[0]=e.viewSettings.commentsPreference,n[1]=e.viewSettings.lineSpacing,n[2]=i,n[3]=a,n[4]=t):t=n[4],t}:function(e){let t=(0,m.C0)(e.viewSettings.splitPreference),n=(0,m.Qn)(e.viewSettings.hideWhitespace);return(0,b.useMemo)(()=>({hideWhitespace:n,splitPreference:t,lineSpacing:e.viewSettings.lineSpacing,commentsPreference:e.viewSettings.commentsPreference}),[e.viewSettings.commentsPreference,e.viewSettings.lineSpacing,t,n])},sw=(0,d.Z6)()?function(e){let t,n,i,a=(0,c.c)(7);return a[0]!==e.className?(t=(0,v.$)(i$,e.className),a[0]=e.className,a[1]=t):t=a[1],a[2]!==e.children?(n=(0,o.jsx)(x.O7,{children:e.children}),a[2]=e.children,a[3]=n):n=a[3],a[4]!==t||a[5]!==n?(i=(0,o.jsx)("div",{id:ae,className:t,children:n}),a[4]=t,a[5]=n,a[6]=i):i=a[6],i}:function(e){return(0,o.jsx)("div",{id:ae,className:(0,v.$)(i$,e.className),children:(0,o.jsx)(x.O7,{children:e.children})})},sC=Object.assign({},{Container:sw,Header:x.O7.Header,Viewer:sg});try{(s=Some).displayName||(s.displayName="Some")}catch{}try{(r=Some).displayName||(r.displayName="Some")}catch{}try{sg.displayName||(sg.displayName="BaseDiffComparisonViewer")}catch{}try{sy.displayName||(sy.displayName="InternalDiffComparisonViewer")}catch{}try{(l=FilterFilterComponent).displayName||(l.displayName="FilterFilterComponent")}catch{}try{sw.displayName||(sw.displayName="Container")}catch{}try{sC.displayName||(sC.displayName="DiffComparisonViewer")}catch{}},61219:(e,t,n)=>{n.d(t,{U:()=>ev});var i=n(74848),a=n(68273),s=n(16522),r=n(42118),l=n(26156),o=n(18559),d=n(81156),c=n(63352),u=n(73189),m=n(78809),h=n(73017),f=n(71315),p=n(43258),g=n(38621),y=n(72511),x=n(31021),v=n(34164),b=n(96540),j=n(25407),w=n(94747),C=n(27011),_=n(1932),N=n(96379);let S=(0,a.Z6)()?function(){let e,t=(0,s.c)(2),{updateThreads:n}=(0,C.an)();return t[0]!==n?(e={mutationFn:I,onSuccess:(e,t)=>{n((0,_.jM)(e=>{let n=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===t.userLogin));if(0!==n.length)for(let e of n)e&&(e.viewerCanBlockFromOrg=!1,e.viewerCanUnblockFromOrg=!0,e.isHidden=t.shouldHideComment||e.isHidden,e.minimizedReason=t.hiddenReason||null)}))}},t[0]=n,t[1]=e):e=t[1],(0,w.n)(e)}:function(){let{updateThreads:e}=(0,C.an)();return(0,w.n)({mutationFn:async({duration:e,hiddenReason:t,organizationLogin:n,notifyBlockedUser:i,shouldHideComment:a,userLogin:s})=>{let r=new FormData;r.append("duration",e),r.append("hide_comment",a.toString()),t&&r.append("hidden_reason",t),r.append("login",s),r.append("send_notification",i.toString()),await (0,N.DI)((0,j.ggd)({owner:n}),{method:"POST",body:r,redirect:"manual"})},onSuccess:(t,n)=>{e((0,_.jM)(e=>{let t=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===n.userLogin));if(0!==t.length)for(let e of t)e&&(e.viewerCanBlockFromOrg=!1,e.viewerCanUnblockFromOrg=!0,e.isHidden=n.shouldHideComment||e.isHidden,e.minimizedReason=n.hiddenReason||null)}))}})};async function I(e){let{duration:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:a,shouldHideComment:s,userLogin:r}=e,l=new FormData;l.append("duration",t),l.append("hide_comment",s.toString()),n&&l.append("hidden_reason",n),l.append("login",r),l.append("send_notification",a.toString()),await (0,N.DI)((0,j.ggd)({owner:i}),{method:"POST",body:l,redirect:"manual"})}var k=n(48845);let L=(0,a.Z6)()?function(e){let t,n,i,a=(0,s.c)(15),{filePath:r,lineMarkersKey:l,onSuccess:o}=e,d=(0,C.Kp)(),{deleteThreadComment:c}=(0,C.an)(),{onCommentThreadDeleted:u}=(0,C.Ud)(),m=(0,C.SM)(),{removePendingComment:h}=(0,C._N)();return a[0]!==d||a[1]!==r||a[2]!==m||a[3]!==l?(t=async e=>{let{commentId:t,threadId:n}=e,i=m(Number(n),r,l)?.commentsData?.comments?.find(e=>e.id===t);if(!i)return;let a=`${d}/page_data/review_comments/${i.databaseId}`,s=await (0,k.q$)(`${a}`,{method:"DELETE"});if(204===s.status||200===s.status)return;let o=await (0,k.hp)(s);(0,k.R)(s,o)},a[0]=d,a[1]=r,a[2]=m,a[3]=l,a[4]=t):t=a[4],a[5]!==c||a[6]!==r||a[7]!==l||a[8]!==u||a[9]!==o||a[10]!==h?(n=(e,t)=>{let{commentId:n,threadId:i}=t,a=c(Number(i),n,r,l);h(Number(i)),"thread_deleted"===a&&("thread_deleted"===a&&u({path:r,threadID:i}),o?.())},a[5]=c,a[6]=r,a[7]=l,a[8]=u,a[9]=o,a[10]=h,a[11]=n):n=a[11],a[12]!==t||a[13]!==n?(i={mutationFn:t,onSuccess:n},a[12]=t,a[13]=n,a[14]=i):i=a[14],(0,w.n)(i)}:function({filePath:e,lineMarkersKey:t,onSuccess:n}){let i=(0,C.Kp)(),{deleteThreadComment:a}=(0,C.an)(),{onCommentThreadDeleted:s}=(0,C.Ud)(),r=(0,C.SM)(),{removePendingComment:l}=(0,C._N)();return(0,w.n)({mutationFn:async({commentId:n,threadId:a})=>{let s=r(Number(a),e,t)?.commentsData?.comments?.find(e=>e.id===n);if(!s)return;let l=`${i}/page_data/review_comments/${s.databaseId}`,o=await (0,k.q$)(`${l}`,{method:"DELETE"});if(204===o.status||200===o.status)return;let d=await (0,k.hp)(o);(0,k.R)(o,d)},onSuccess:(i,{commentId:r,threadId:o})=>{let d=a(Number(o),r,e,t);l(Number(o)),"thread_deleted"===d&&("thread_deleted"===d&&s({path:e,threadID:o}),n?.())}})};var D=n(20622);let T=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(9),l=(0,C.Kp)(),o=`${l}/page_data/${D.uT.hideComment}`,{updateThreadComment:d}=(0,C.an)();return r[0]!==o?(n=async e=>{let{commentDatabaseId:t,reason:n}=e,i=await (0,k.q$)(o,{method:"POST",body:{classifier:n,commentId:t}}),a=await (0,k.hp)(i);return(0,k.R)(i,a),a},r[0]=o,r[1]=n):n=r[1],r[2]!==e||r[3]!==t||r[4]!==d?(i=n=>{d({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!0,minimizedReason:n.reason}}})},r[2]=e,r[3]=t,r[4]=d,r[5]=i):i=r[5],r[6]!==n||r[7]!==i?(a={mutationFn:n,onSuccess:i},r[6]=n,r[7]=i,r[8]=a):a=r[8],(0,w.n)(a)}:function(e,t){let n=(0,C.Kp)(),i=`${n}/page_data/${D.uT.hideComment}`,{updateThreadComment:a}=(0,C.an)();return(0,w.n)({mutationFn:async({commentDatabaseId:e,reason:t})=>{let n=await (0,k.q$)(i,{method:"POST",body:{classifier:t,commentId:e}}),a=await (0,k.hp)(n);return(0,k.R)(n,a),a},onSuccess:n=>{a({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!0,minimizedReason:n.reason}}})}})},E=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(9),l=(0,C.Kp)(),{updateThreadComment:o}=(0,C.an)();return r[0]!==l?(n=async e=>{let{commentDatabaseId:t,reaction:n,viewerHasReacted:i}=e,a=`${l}/page_data/${i?D.uT.removeCommentReaction:D.uT.addCommentReaction}`,s=await (0,k.q$)(a,{method:"POST",body:{reaction:n,commentId:t}}),r=await (0,k.hp)(s);return(0,k.R)(s,r),r},r[0]=l,r[1]=n):n=r[1],r[2]!==e||r[3]!==t||r[4]!==o?(i=(n,i)=>{o({threadID:parseInt(i.threadId),filePath:e,lineMarkersKey:t,match:e=>e.databaseId===i.commentDatabaseId,transform:e=>{if(e)return{...e,reactionGroups:n.reactionGroups}}})},r[2]=e,r[3]=t,r[4]=o,r[5]=i):i=r[5],r[6]!==n||r[7]!==i?(a={mutationFn:n,onSuccess:i},r[6]=n,r[7]=i,r[8]=a):a=r[8],(0,w.n)(a)}:function(e,t){let n=(0,C.Kp)(),{updateThreadComment:i}=(0,C.an)();return(0,w.n)({mutationFn:async({commentDatabaseId:e,reaction:t,viewerHasReacted:i})=>{let a=`${n}/page_data/${i?D.uT.removeCommentReaction:D.uT.addCommentReaction}`,s=await (0,k.q$)(a,{method:"POST",body:{reaction:t,commentId:e}}),r=await (0,k.hp)(s);return(0,k.R)(s,r),r},onSuccess:(n,a)=>{i({threadID:parseInt(a.threadId),filePath:e,lineMarkersKey:t,match:e=>e.databaseId===a.commentDatabaseId,transform:e=>{if(e)return{...e,reactionGroups:n.reactionGroups}}})}})},A=(0,a.Z6)()?function(){let e,t=(0,s.c)(2),{updateThreads:n}=(0,C.an)();return t[0]!==n?(e={mutationFn:R,onSuccess:(e,t)=>{n((0,_.jM)(e=>{let n=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===t.userLogin));if(0!==n.length)for(let e of n)e&&(e.viewerCanBlockFromOrg=!0,e.viewerCanUnblockFromOrg=!1)}))}},t[0]=n,t[1]=e):e=t[1],(0,w.n)(e)}:function(){let{updateThreads:e}=(0,C.an)();return(0,w.n)({mutationFn:async({organizationLogin:e,userLogin:t})=>{await (0,k.q$)(`${(0,j.ggd)({owner:e})}/${(0,j.QU3)(t)}`,{method:"DELETE",redirect:"manual"})},onSuccess:(t,n)=>{e((0,_.jM)(e=>{let t=e.flatMap(e=>e.commentsData?.comments.filter(e=>e.author?.login===n.userLogin));if(0!==t.length)for(let e of t)e&&(e.viewerCanBlockFromOrg=!0,e.viewerCanUnblockFromOrg=!1)}))}})};async function R(e){let{organizationLogin:t,userLogin:n}=e;await (0,k.q$)(`${(0,j.ggd)({owner:t})}/${(0,j.QU3)(n)}`,{method:"DELETE",redirect:"manual"})}let O=(0,a.Z6)()?function(e,t){let n,i,a,r=(0,s.c)(9),l=(0,C.Kp)(),o=`${l}/page_data/${D.uT.unhideComment}`,{updateThreadComment:d}=(0,C.an)();return r[0]!==o?(n=async e=>{let{commentDatabaseId:t}=e,n=await (0,k.q$)(o,{method:"POST",body:{commentId:t}}),i=await (0,k.hp)(n);return(0,k.R)(n,i),i},r[0]=o,r[1]=n):n=r[1],r[2]!==e||r[3]!==t||r[4]!==d?(i=n=>{d({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:P})},r[2]=e,r[3]=t,r[4]=d,r[5]=i):i=r[5],r[6]!==n||r[7]!==i?(a={mutationFn:n,onSuccess:i},r[6]=n,r[7]=i,r[8]=a):a=r[8],(0,w.n)(a)}:function(e,t){let n=(0,C.Kp)(),i=`${n}/page_data/${D.uT.unhideComment}`,{updateThreadComment:a}=(0,C.an)();return(0,w.n)({mutationFn:async({commentDatabaseId:e})=>{let t=await (0,k.q$)(i,{method:"POST",body:{commentId:e}}),n=await (0,k.hp)(t);return(0,k.R)(t,n),n},onSuccess:n=>{a({threadID:n.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===n.commentDatabaseId,transform:e=>{if(e)return{...e,isHidden:!1,minimizedReason:null}}})}})};function P(e){if(e)return{...e,isHidden:!1,minimizedReason:null}}let F=(0,a.Z6)()?function(e){let t,n,i,a=(0,s.c)(10),{filePath:r,lineMarkersKey:l,onSuccess:o}=e,d=(0,C.Kp)(),c=`${d}/page_data/${D.uT.updateReviewComment}`,{updateThreadComment:u}=(0,C.an)();return a[0]!==c?(t=async e=>{let{commentId:t,bodyVersion:n,body:i}=e,a=await (0,k.q$)(`${c}${n?`?body_version=${n}`:""}`,{method:"PUT",body:{body:i,commentId:t}}),s=await (0,k.hp)(a);return(0,k.R)(a,s),s},a[0]=c,a[1]=t):t=a[1],a[2]!==r||a[3]!==l||a[4]!==o||a[5]!==u?(n=e=>{u({threadID:e.threadId,filePath:r,lineMarkersKey:l,match:t=>t.databaseId===e.commentDatabaseId,transform:t=>{if(t)return{...t,body:e.body,bodyHTML:e.bodyHTML,bodyVersion:e.bodyVersion}}}),o?.()},a[2]=r,a[3]=l,a[4]=o,a[5]=u,a[6]=n):n=a[6],a[7]!==t||a[8]!==n?(i={mutationFn:t,onSuccess:n},a[7]=t,a[8]=n,a[9]=i):i=a[9],(0,w.n)(i)}:function({filePath:e,lineMarkersKey:t,onSuccess:n}){let i=(0,C.Kp)(),a=`${i}/page_data/${D.uT.updateReviewComment}`,{updateThreadComment:s}=(0,C.an)();return(0,w.n)({mutationFn:async({commentId:e,bodyVersion:t,body:n})=>{let i=await (0,k.q$)(`${a}${t?`?body_version=${t}`:""}`,{method:"PUT",body:{body:n,commentId:e}}),s=await (0,k.hp)(i);return(0,k.R)(i,s),s},onSuccess:i=>{s({threadID:i.threadId,filePath:e,lineMarkersKey:t,match:e=>e.databaseId===i.commentDatabaseId,transform:e=>{if(e)return{...e,body:i.body,bodyHTML:i.bodyHTML,bodyVersion:i.bodyVersion}}}),n?.()}})};var M=n(34784),$=n(8748),B=n(50625),V=n(93642),U=n(70109);let q="ReviewThreadComment-module__ReviewThreadContainer--mI1dg",H="ReviewThreadComment-module__anchorable--bXoU8",G="ReviewThreadComment-module__ReviewThreadWrapper--zXqpP",K="ReviewThreadComment-module__ReviewThreadBox--Ddyuz",W="ReviewThreadComment-module__ReviewThreadInnerContainer--xw85s",z="ReviewThreadComment-module__ReplyWrapper--yIUaX",Q="ReviewThreadComment-module__SafeHTMLBox--SVSQJ",Z="ReviewThreadComment-module__SafeHTMLBoxWrapped--NYuTu",J="ReviewThreadComment-module__BodyHTMLContainer--O6lsx";var Y=n(40961),X=n(80081),ee=n(3252);let et=(0,a.Z6)()?function(){let e,t=(0,s.c)(2),n=(0,C.Kp)(),i=`${n}/page_data/${D.uT.submitSuggestedChanges}`;return t[0]!==i?(e={mutationFn:async e=>{let{changes:t,currentOid:n,message:a}=e,s=await (0,k.q$)(i,{method:"POST",body:{changes:t,currentOid:n,message:a}}),r=await (0,k.hp)(s);return(0,k.R)(s,r),r},onSuccess:en},t[0]=i,t[1]=e):e=t[1],(0,w.n)(e)}:function(){let e=(0,C.Kp)(),t=`${e}/page_data/${D.uT.submitSuggestedChanges}`;return(0,w.n)({mutationFn:async({changes:e,currentOid:n,message:i})=>{let a=await (0,k.q$)(t,{method:"POST",body:{changes:e,currentOid:n,message:i}}),s=await (0,k.hp)(a);return(0,k.R)(a,s),s},onSuccess:()=>{f.cg?.location.reload()}})};function en(){f.cg?.location.reload()}var ei=n(91747),ea=n(2265),es=n(30459),er=n(26607),el=n(21373),eo=n(88008);let ed=(0,a.GV)()?function(e){let t,n,a,r,l,o=(0,s.c)(28),{onOpenDialog:d,suggestedChange:c}=e,{sendAnalyticsEvent:u}=(0,es.s)(),m=(0,b.useRef)(null),h=c.commentDatabaseId||0;o[0]!==c.suggestionIndex||o[1]!==h?(t={commentDatabaseId:h,suggestionIndex:c.suggestionIndex},o[0]=c.suggestionIndex,o[1]=h,o[2]=t):t=o[2];let f=(0,C.Nk)(t),p=(0,C.RH)(),g=(0,ei.u)("batch_suggested_changes"),{addSuggestionToBatch:y,removeSuggestionFromBatch:x}=(0,C.xJ)(),v=(0,C.WK)(),j=(0,C.Kp)(),w=(0,C.L3)();o[3]!==y||o[4]!==w||o[5]!==j||o[6]!==u||o[7]!==c.commentDatabaseId||o[8]!==c.suggestionIndex||o[9]!==v?(n=()=>{if(!c.commentDatabaseId)return;let e={commentDatabaseId:c.commentDatabaseId,suggestionIndex:c.suggestionIndex};y(e),(0,eo.CE)(j,w.fullDiff.headOid,[...v.activeBatch,e]),u("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")},o[3]=y,o[4]=w,o[5]=j,o[6]=u,o[7]=c.commentDatabaseId,o[8]=c.suggestionIndex,o[9]=v,o[10]=n):n=o[10];let _=n;o[11]!==w||o[12]!==j||o[13]!==x||o[14]!==u||o[15]!==c.commentDatabaseId||o[16]!==c.suggestionIndex||o[17]!==v?(a=()=>{if(!c.commentDatabaseId)return;let e={commentDatabaseId:c.commentDatabaseId,suggestionIndex:c.suggestionIndex};x(e),(0,eo.CE)(j,w.fullDiff.headOid,v.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex)),u("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},o[11]=w,o[12]=j,o[13]=x,o[14]=u,o[15]=c.commentDatabaseId,o[16]=c.suggestionIndex,o[17]=v,o[18]=a):a=o[18];let N=a;o[19]!==d?(r=()=>{d(m)},o[19]=d,o[20]=r):r=o[20];let S=r;return o[21]!==g||o[22]!==_||o[23]!==S||o[24]!==N||o[25]!==f||o[26]!==p?(l=(0,i.jsx)("div",{className:"d-flex flex-row flex-items-center",children:g&&f?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(er.A,{variant:"attention",children:"Pending in batch"}),(0,i.jsx)("div",{className:"ml-auto",children:(0,i.jsx)(el.Q,{variant:"danger",onClick:N,children:"Remove from batch"})})]}):(0,i.jsxs)("div",{className:"d-flex gap-2 ml-auto flex-wrap-reverse",children:[!p&&(0,i.jsx)(el.Q,{variant:"default",onClick:S,ref:m,children:"Apply suggestion"}),g&&(0,i.jsx)(el.Q,{variant:"primary",onClick:_,children:"Add suggestion to batch"})]})}),o[21]=g,o[22]=_,o[23]=S,o[24]=N,o[25]=f,o[26]=p,o[27]=l):l=o[27],l}:function({onOpenDialog:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,es.s)(),a=(0,b.useRef)(null),s=(0,C.Nk)({commentDatabaseId:t.commentDatabaseId||0,suggestionIndex:t.suggestionIndex}),r=(0,C.RH)(),l=(0,ei.u)("batch_suggested_changes"),{addSuggestionToBatch:o,removeSuggestionFromBatch:d}=(0,C.xJ)(),c=(0,C.WK)(),u=(0,C.Kp)(),m=(0,C.L3)(),h=(0,b.useCallback)(()=>{if(!t.commentDatabaseId)return;let e={commentDatabaseId:t.commentDatabaseId,suggestionIndex:t.suggestionIndex};o(e),(0,eo.CE)(u,m.fullDiff.headOid,[...c.activeBatch,e]),n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")},[o,t.commentDatabaseId,t.suggestionIndex,c,u,m,n]),f=(0,b.useCallback)(()=>{if(!t.commentDatabaseId)return;let e={commentDatabaseId:t.commentDatabaseId,suggestionIndex:t.suggestionIndex};d(e),(0,eo.CE)(u,m.fullDiff.headOid,c.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex)),n("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},[d,t.commentDatabaseId,t.suggestionIndex,c,u,m,n]),p=(0,b.useCallback)(()=>{e(a)},[e]);return(0,i.jsx)("div",{className:"d-flex flex-row flex-items-center",children:l&&s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(er.A,{variant:"attention",children:"Pending in batch"}),(0,i.jsx)("div",{className:"ml-auto",children:(0,i.jsx)(el.Q,{variant:"danger",onClick:f,children:"Remove from batch"})})]}):(0,i.jsxs)("div",{className:"d-flex gap-2 ml-auto flex-wrap-reverse",children:[!r&&(0,i.jsx)(el.Q,{variant:"default",onClick:p,ref:a,children:"Apply suggestion"}),l&&(0,i.jsx)(el.Q,{variant:"primary",onClick:h,children:"Add suggestion to batch"})]})})};try{ed.displayName||(ed.displayName="ApplyOrAddToBatch")}catch{}var ec=n(3585);let eu=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(5),{reason:r,className:l}=e,o=void 0===l?"m-2":l;return a[0]!==r?(t=(0,i.jsx)("small",{className:"fgColor-muted",children:r}),a[0]=r,a[1]=t):t=a[1],a[2]!==o||a[3]!==t?(n=(0,i.jsx)("div",{className:o,children:t}),a[2]=o,a[3]=t,a[4]=n):n=a[4],n}:function({reason:e,className:t="m-2"}){return(0,i.jsx)("div",{className:t,children:(0,i.jsx)("small",{className:"fgColor-muted",children:e})})};try{eu.displayName||(eu.displayName="CodeSuggestionUnavailable")}catch{}let em=(0,a.GV)()?function(e){let t,n,a,r,l,o,d,c,u,m,h,f,p=(0,s.c)(38),{suggestedChange:g}=e,{setIsDialogOpen:y}=(0,ea.W)(),[x,v]=(0,b.useState)(!1),j=(0,b.useRef)(void 0),w=(0,ei.u)("batch_suggested_changes"),_=(0,C.WK)();p[0]!==w||p[1]!==g||p[2]!==_?(t=w&&void 0!==g.commentDatabaseId&&null!==g.commentDatabaseId&&_.activeBatch.some(e=>e.commentDatabaseId===g.commentDatabaseId&&e.suggestionIndex===g.suggestionIndex),p[0]=w,p[1]=g,p[2]=_,p[3]=t):t=p[3];let N=t;p[4]!==g?(n=(0,X.EJ)(g,[]),p[4]=g,p[5]=n):n=p[5];let{isValid:S,reason:I}=n;p[6]!==g?(a=[g],p[6]=g,p[7]=a):a=p[7];let k=a;p[8]!==k?(r=k.map(eh),p[8]=k,p[9]=r):r=p[9];let L=r;p[10]!==y?(l=e=>{v(e),y?.(e)},p[10]=y,p[11]=l):l=p[11];let D=l;p[12]!==D?(o=()=>{if(D(!1),j.current){let e=j.current.current;setTimeout(()=>e?.focus())}},p[12]=D,p[13]=o):o=p[13];let T=o;p[14]!==D?(d=e=>{D(!0),j.current=e},p[14]=D,p[15]=d):d=p[15];let E=d,{mutate:A}=et(),{fullDiff:R}=(0,C.L3)(),{headOid:O}=R;p[16]!==k||p[17]!==T||p[18]!==O||p[19]!==A?(c=(e,t,n)=>{A({changes:k,message:e,currentOid:O},{onSuccess:()=>{T(),n()},onError:e=>{t(e,"submitSuggestedChanges","Failed to submit suggested changes")}})},p[16]=k,p[17]=T,p[18]=O,p[19]=A,p[20]=c):c=p[20];let P=c;return p[21]!==E||p[22]!==g?(u=(0,i.jsx)(ed,{suggestedChange:g,onOpenDialog:E}),p[21]=E,p[22]=g,p[23]=u):u=p[23],p[24]!==N||p[25]!==S||p[26]!==I?(m=!N&&!S&&I&&(0,i.jsx)(eu,{reason:I,className:"m-0"}),p[24]=N,p[25]=S,p[26]=I,p[27]=m):m=p[27],p[28]!==L||p[29]!==k.length||p[30]!==T||p[31]!==P||p[32]!==x?(h=x&&(0,i.jsx)(ec.$,{authorLogins:L,batchSize:k.length,onClose:T,onCommit:P}),p[28]=L,p[29]=k.length,p[30]=T,p[31]=P,p[32]=x,p[33]=h):h=p[33],p[34]!==u||p[35]!==m||p[36]!==h?(f=(0,i.jsxs)("div",{className:"border-top p-2",children:[u,m,h]}),p[34]=u,p[35]=m,p[36]=h,p[37]=f):f=p[37],f}:function({suggestedChange:e}){let{setIsDialogOpen:t}=(0,ea.W)(),[n,a]=(0,b.useState)(!1),s=(0,b.useRef)(void 0),r=(0,ei.u)("batch_suggested_changes"),l=(0,C.WK)(),o=r&&void 0!==e.commentDatabaseId&&null!==e.commentDatabaseId&&l.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex),{isValid:d,reason:c}=(0,X.EJ)(e,[]),u=(0,b.useMemo)(()=>[e],[e]),m=u.map(e=>e.authorLogin),h=(0,b.useCallback)(e=>{a(e),t?.(e)},[t]),f=(0,b.useCallback)(()=>{if(h(!1),s.current){let e=s.current.current;setTimeout(()=>e?.focus())}},[h]),p=(0,b.useCallback)(e=>{h(!0),s.current=e},[h,s]),{mutate:g}=et(),{fullDiff:{headOid:y}}=(0,C.L3)(),x=(0,b.useCallback)((e,t,n)=>{g({changes:u,message:e,currentOid:y},{onSuccess:()=>{f(),n()},onError:e=>{t(e,"submitSuggestedChanges","Failed to submit suggested changes")}})},[u,f,y,g]);return(0,i.jsxs)("div",{className:"border-top p-2",children:[(0,i.jsx)(ed,{suggestedChange:e,onOpenDialog:p}),!o&&!d&&c&&(0,i.jsx)(eu,{reason:c,className:"m-0"}),n&&(0,i.jsx)(ec.$,{authorLogins:m,batchSize:u.length,onClose:f,onCommit:x})]})};function eh(e){return e.authorLogin}try{em.displayName||(em.displayName="CodeSuggestionActions")}catch{}let ef=(0,a.GV)()?function(e,t,n,i,a){let r,l,o=(0,s.c)(19),[d,c]=(0,b.useState)();o[0]!==a.lineRange||o[1]!==t.author?.login||o[2]!==t.databaseId||o[3]!==t.id||o[4]!==t.subjectType||o[5]!==e||o[6]!==n||o[7]!==i?(r=()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let s=[...e.current.getElementsByClassName("js-apply-changes")];if(s.length>0){let e=[];for(let r=0;r<s.length;r++){let l=s[r];if(!l)continue;let o=l.closest("div.js-suggested-changes-blob");if(!o||!a.lineRange)continue;let d=(0,ee.y)(o);e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,commentDatabaseId:t.databaseId,path:n,ref:l,suggestion:d,lineRange:a.lineRange,threadId:i,suggestionIndex:r})}c(e)}},o[0]=a.lineRange,o[1]=t.author?.login,o[2]=t.databaseId,o[3]=t.id,o[4]=t.subjectType,o[5]=e,o[6]=n,o[7]=i,o[8]=r):r=o[8];let u=t.author?.login;return o[9]!==a.lineRange||o[10]!==t.bodyHTML||o[11]!==t.databaseId||o[12]!==t.id||o[13]!==t.subjectType||o[14]!==e||o[15]!==n||o[16]!==u||o[17]!==i?(l=[a.lineRange,u,t.bodyHTML,t.databaseId,t.id,t.subjectType,e,n,i],o[9]=a.lineRange,o[10]=t.bodyHTML,o[11]=t.databaseId,o[12]=t.id,o[13]=t.subjectType,o[14]=e,o[15]=n,o[16]=u,o[17]=i,o[18]=l):l=o[18],(0,b.useLayoutEffect)(r,l),d}:function(e,t,n,i,a){let[s,r]=(0,b.useState)();return(0,b.useLayoutEffect)(()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let s=[...e.current.getElementsByClassName("js-apply-changes")];if(s.length>0){let e=[];for(let r=0;r<s.length;r++){let l=s[r];if(!l)continue;let o=l.closest("div.js-suggested-changes-blob");if(!o||!a.lineRange)continue;let d=(0,ee.y)(o);e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,commentDatabaseId:t.databaseId,path:n,ref:l,suggestion:d,lineRange:a.lineRange,threadId:i,suggestionIndex:r})}r(e)}},[a.lineRange,t.author?.login,t.bodyHTML,t.databaseId,t.id,t.subjectType,e,n,i]),s},ep=(0,a.GV)()?function(e){let t,n,a=(0,s.c)(12),{applySuggestedChangesValidationData:r,comment:l,commentBodyRef:o,filePath:d,isOutdated:c,isThreadResolved:u,suggestedChangesConfig:m,databaseId:h,viewerCanApplySuggestion:f}=e,{state:p}=(0,C.Yp)(),g=(0,C.ww)(),y=ef(o,l,d,h,r);return a[0]!==r||a[1]!==l||a[2]!==g||a[3]!==c||a[4]!==u||a[5]!==p||a[6]!==y||a[7]!==m||a[8]!==f?(t=y?.length?y.map(e=>{let{isValid:t,reason:n}=(0,X.o_)({suggestedChange:e,hasCommitRange:g,isOutdated:c,isPending:"PENDING"===l.state.toUpperCase(),isResolved:u,pullRequestIsClosed:void 0===p||"CLOSED"===p||"MERGED"===p,pullRequestIsInMergeQueue:"QUEUED"===p,userCanApplySuggestion:!!f,applySuggestedChangesValidationData:r,suggestedChangesConfig:m});return!t&&n?(0,Y.createPortal)((0,i.jsx)(eu,{reason:n}),e.ref):(0,Y.createPortal)((0,i.jsx)(em,{suggestedChange:e}),e.ref)}):null,a[0]=r,a[1]=l,a[2]=g,a[3]=c,a[4]=u,a[5]=p,a[6]=y,a[7]=m,a[8]=f,a[9]=t):t=a[9],a[10]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),a[10]=t,a[11]=n):n=a[11],n}:function({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,filePath:a,isOutdated:s,isThreadResolved:r,suggestedChangesConfig:l,databaseId:o,viewerCanApplySuggestion:d}){let{state:c}=(0,C.Yp)(),u=(0,C.ww)(),m=ef(n,t,a,o,e);return(0,i.jsx)(i.Fragment,{children:m?.length?m.map(n=>{let{isValid:a,reason:o}=(0,X.o_)({suggestedChange:n,hasCommitRange:u,isOutdated:s,isPending:"PENDING"===t.state.toUpperCase(),isResolved:r,pullRequestIsClosed:void 0===c||"CLOSED"===c||"MERGED"===c,pullRequestIsInMergeQueue:"QUEUED"===c,userCanApplySuggestion:!!d,applySuggestedChangesValidationData:e,suggestedChangesConfig:l});return!a&&o?(0,Y.createPortal)((0,i.jsx)(eu,{reason:o}),n.ref):(0,Y.createPortal)((0,i.jsx)(em,{suggestedChange:n}),n.ref)}):null})};try{ep.displayName||(ep.displayName="SuggestedChangeView")}catch{}var eg=n(30721),ey=n(83494),ex=n(20459);let ev=(0,a.GV)()?function(e){let t,n,a,j,w,_,N,I,k,D,R,P,Y,X,ee,et,en,ei,ea,es,er,el,eo,ed,ec,eu,em,eh,ef,ev,ej,ew,eC,e_,eN,eS,eI,ek,eL,eD,eT,eE,eA,eR,eO=(0,s.c)(176),{isAnchorable:eP,index:eF,isInlineComment:eM,isLastChild:e$,isOutdated:eB,isThreadResolved:eV,lineMarkersKey:eU,anchorPrefix:eq,comment:eH,disableDialogMode:eG,enableDialogMode:eK,filePath:eW,gridCellId:ez,hideActions:eQ,isFirstComment:eZ,isInDialogMode:eJ,onDeleteLineComment:eY,onQuoteReply:eX,threadCommentCount:e0,threadId:e1,threadPositionNumber:e2,suggestedChangesConfig:e3,applySuggestedChangesValidationData:e4,viewerData:e5,ghostUser:e6,originalDiffPathUri:e7,headingLevel:e8}=e,e9=void 0!==eP&&eP,te=void 0===eF?0:eF,tt=void 0!==eZ&&eZ,tn=void 0===eX?u.l:eX,ti=void 0===e6?d.t.ghostUser:e6,ta=void 0===e8?"h3":e8,{addToast:ts}=(0,p.Y6)(),[tr,tl]=(0,b.useState)(!1),[to,td]=(0,b.useState)(eH.isHidden),[tc,tu]=(0,b.useState)(!1),[tm,th]=(0,b.useState)(eH.body),[tf,tp]=(0,b.useState)(!1),[tg,ty]=(0,b.useState)(!1),[tx,tv]=(0,b.useState)(""),tb=(0,C.Kp)(),tj="FILE"===eH.subjectType;eO[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{let{text:t}=e;t&&th(t)},eO[0]=t):t=eO[0],eO[1]!==tb||eO[2]!==eH.id||eO[3]!==eW||eO[4]!==tj?(n={subjectId:tb,filePath:eW,fileLevelComment:tj,threadId:eH.id,handlePersistedCommentExists:t},eO[1]=tb,eO[2]=eH.id,eO[3]=eW,eO[4]=tj,eO[5]=n):n=eO[5];let{persistCommentToStorage:tw,removePersistedCommentFromStorage:tC}=(0,B.L)(n),t_=(0,b.useRef)(null),tN=(0,b.useRef)(null),tS=(0,b.useRef)(null),[tI,tk]=(0,b.useState)("");eO[6]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{t_.current?.focus()},eO[6]=a):a=eO[6];let tL=a;eO[7]!==tr?(j=()=>{if(tr){let e=window.setTimeout(tL);return()=>{window.clearTimeout(e)}}},w=[tr],eO[7]=tr,eO[8]=j,eO[9]=w):(j=eO[8],w=eO[9]),(0,b.useEffect)(j,w),eO[10]!==eY?(_=()=>{tu(!1),ty(!1),eY?.()},eO[10]=eY,eO[11]=_):_=eO[11],eO[12]!==eW||eO[13]!==eU||eO[14]!==_?(N={filePath:eW,lineMarkersKey:eU,onSuccess:_},eO[12]=eW,eO[13]=eU,eO[14]=_,eO[15]=N):N=eO[15];let{mutate:tD}=L(N);eO[16]!==eG?(I=async()=>{eG?.(),tu(!0)},eO[16]=eG,eO[17]=I):I=eO[17];let tT=I;eO[18]!==ts||eO[19]!==eH.id||eO[20]!==tD||eO[21]!==eK||eO[22]!==eW||eO[23]!==ez||eO[24]!==e1?(k=e=>{"confirm"===e?(ty(!0),tD({commentId:eH.id,threadId:e1,filePath:eW},{onError:()=>{tu(!1),ts({type:"error",message:"Failed to delete comment"}),ty(!1)}})):(ez&&eK?.(ez),tu(!1),ty(!1))},eO[18]=ts,eO[19]=eH.id,eO[20]=tD,eO[21]=eK,eO[22]=eW,eO[23]=ez,eO[24]=e1,eO[25]=k):k=eO[25];let tE=k,{mutate:tA}=T(eW,eU);eO[26]!==eH.databaseId||eO[27]!==tA?(D=e=>{if(!eH.databaseId)throw Error("Comment not found");tA({commentDatabaseId:eH.databaseId,reason:e},{onError:()=>{tp(!1),tk("Failed to hide comment")},onSuccess:()=>td(!0)})},eO[26]=eH.databaseId,eO[27]=tA,eO[28]=D):D=eO[28];let tR=D,{mutate:tO}=O(eW,eU);eO[29]!==eH.databaseId||eO[30]!==tO?(R=()=>{if(!eH.databaseId)throw Error("Comment not found");tO({commentDatabaseId:eH.databaseId},{onError:()=>{tp(!1),tk("Failed to unhide comment")},onSuccess:()=>td(!1)})},eO[29]=eH.databaseId,eO[30]=tO,eO[31]=R):R=eO[31];let tP=R,{mutate:tF}=S();eO[32]!==tF?(P=(e,t,n,i,a,s)=>tF({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:a,userLogin:s},{onError:()=>tk("Failed to block user"),onSuccess:()=>{t&&td(!0)}}),eO[32]=tF,eO[33]=P):P=eO[33];let tM=P,{mutate:t$}=A();eO[34]!==t$?(Y=(e,t)=>t$({organizationLogin:e,userLogin:t},{onError:()=>tk("Failed to unblock user")}),eO[34]=t$,eO[35]=Y):Y=eO[35];let tB=Y,{mutate:tV}=E(eW,eU);eO[36]!==ts||eO[37]!==eH.databaseId||eO[38]!==tV||eO[39]!==e1?(X=(e,t)=>{if(!eH.databaseId)throw Error("Comment not found");setTimeout(()=>tS.current?.focus(),0),tV({commentDatabaseId:eH.databaseId,threadId:e1,reaction:e,viewerHasReacted:t},{onError:()=>{tp(!1),ts({type:"error",message:"Failed to react to comment"})}})},eO[36]=ts,eO[37]=eH.databaseId,eO[38]=tV,eO[39]=e1,eO[40]=X):X=eO[40];let tU=X;eO[41]===Symbol.for("react.memo_cache_sentinel")?(ee=()=>{tl(!0)},eO[41]=ee):ee=eO[41];let tq=ee;eO[42]!==eH.body||eO[43]!==tC?(et=()=>{tl(!1),tC(),th(eH.body)},eO[42]=eH.body,eO[43]=tC,eO[44]=et):et=eO[44];let tH=et;eO[45]!==tw?(en=e=>{tw({text:e}),th(e),tv(void 0)},eO[45]=tw,eO[46]=en):en=eO[46];let tG=en;eO[47]!==tC?(ei=()=>{tl(!1),tp(!1),tC()},eO[47]=tC,eO[48]=ei):ei=eO[48],eO[49]!==eW||eO[50]!==eU||eO[51]!==ei?(ea={filePath:eW,lineMarkersKey:eU,onSuccess:ei},eO[49]=eW,eO[50]=eU,eO[51]=ei,eO[52]=ea):ea=eO[52];let{mutate:tK}=F(ea);eO[53]!==ts||eO[54]!==tm||eO[55]!==eH.bodyVersion||eO[56]!==eH.databaseId||eO[57]!==e3?.sourceContentFromDiffLines||eO[58]!==tK?(es=()=>{tp(!0);let e=(0,V.u)(tm,e3?.sourceContentFromDiffLines??"");if(!e.isValid){tv(e.errorMessage),tp(!1);return}tK({commentId:String(eH.databaseId),body:tm,bodyVersion:eH.bodyVersion},{onError:()=>{tp(!1),ts({type:"error",message:"Failed to update comment"})}})},eO[53]=ts,eO[54]=tm,eO[55]=eH.bodyVersion,eO[56]=eH.databaseId,eO[57]=e3?.sourceContentFromDiffLines,eO[58]=tK,eO[59]=es):es=eO[59],e3?.sourceContentFromDiffLines;let tW=es;eO[60]!==eH.databaseId?(er=eH.databaseId?.toString(),eO[60]=eH.databaseId,eO[61]=er):er=eO[61];let tz=er,tQ=tz?`${void 0===eq?"r":eq}${tz}`:void 0;eO[62]!==tQ?(el=tQ&&f.fV?new URL(`${f.fV.pathname}#${tQ}`,f.fV.origin).toString():"",eO[62]=tQ,eO[63]=el):el=eO[63];let tZ=el,tJ=(0,b.useRef)(null);eO[64]!==tQ||eO[65]!==tz||eO[66]!==e9?(eo={isAnchorable:e9,commentId:tz,commentAnchor:tQ,containerRef:tJ},eO[64]=tQ,eO[65]=tz,eO[66]=e9,eO[67]=eo):eo=eO[67],(0,$.u)(eo);let tY=te>0,tX=te>1,t0=tr?"editing":to?"hidden":"visible";eO[68]!==ta?(ed={as:ta},eO[68]=ta,eO[69]=ed):ed=eO[69];let t1=ed,t2=eH.author?.avatarUrl??ti.avatarUrl,t3=eH.reference.text??`#${eH.reference.number}`;eO[70]!==eH||eO[71]!==tZ||eO[72]!==t3?(ec={...eH,url:tZ,referenceText:t3},eO[70]=eH,eO[71]=tZ,eO[72]=t3,eO[73]=ec):ec=eO[73];let t4=eH.author?.login??ti.login,t5=eH.reference?.author?.login??"";eO[74]===Symbol.for("react.memo_cache_sentinel")?(eu={},eO[74]=eu):eu=eO[74];let t6="copilot"===eH.reviewVariantType?"copilot-pull-request-reviewer":void 0,t7="copilot"===eH.reviewVariantType?l.S.Bot:void 0;eO[75]!==eQ||eO[76]!==to||eO[77]!==eB||eO[78]!==tY||eO[79]!==tM||eO[80]!==tT||eO[81]!==tR||eO[82]!==tn||eO[83]!==tB||eO[84]!==tP||eO[85]!==e7||eO[86]!==t1||eO[87]!==t2||eO[88]!==ec||eO[89]!==t4||eO[90]!==t5||eO[91]!==t6||eO[92]!==t7?(em={headingProps:t1,avatarUrl:t2,comment:ec,commentRef:tJ,deleteComment:tT,editComment:tq,editHistoryComponent:void 0,hideComment:tR,onBlock:tM,onUnblock:tB,onMinimize:td,onSuccessfulBlock:eb,isMinimized:to,commentAuthorLogin:t4,navigate:u.l,commentSubjectAuthorLogin:t5,onReplySelect:tn,unhideComment:tP,hideActions:eQ,isReply:tY,forceInlineAvatar:!0,containerStyle:eu,originalDiffPathUri:e7,isOutdated:eB,commentAuthorSlug:t6,commentAuthorType:t7},eO[75]=eQ,eO[76]=to,eO[77]=eB,eO[78]=tY,eO[79]=tM,eO[80]=tT,eO[81]=tR,eO[82]=tn,eO[83]=tB,eO[84]=tP,eO[85]=e7,eO[86]=t1,eO[87]=t2,eO[88]=ec,eO[89]=t4,eO[90]=t5,eO[91]=t6,eO[92]=t7,eO[93]=em):em=eO[93];let t8=em;eO[94]!==te||eO[95]!==tY||eO[96]!==e2?(eh=()=>tY?void 0!==e2?`Reply ${te} to Comment ${e2}`:`Reply ${te}`:void 0!==e2?`Comment ${e2}`:"Comment",eO[94]=te,eO[95]=tY,eO[96]=e2,eO[97]=eh):eh=eO[97];let t9=eh;eO[98]!==eH.body||eO[99]!==tr||eO[100]!==tn?(ef=()=>{if(tr)return;let e=f.cg?.getSelection(),t=e?.anchorNode?{anchorNode:e.anchorNode,range:e.getRangeAt(0)}:null;tn((0,ex.E)(tJ?.current,t,eH.body))},eO[98]=eH.body,eO[99]=tr,eO[100]=tn,eO[101]=ef):ef=eO[101];let ne=ef;eO[102]===Symbol.for("react.memo_cache_sentinel")?(ev=(0,eg.E7)(),eO[102]=ev):ev=eO[102];let nt=ev;eO[103]!==ne?(ej={"pull-requests-diff-view:quote-reply":ne},eO[103]=ne,eO[104]=ej):ej=eO[104];let nn=e9?tQ:void 0,ni=eM?eJ?0:-1:0,na=eH.id;eO[105]!==t9||eO[106]!==eJ?(ew=eJ?{role:"document","aria-roledescription":"comment","aria-label":t9()}:{},eO[105]=t9,eO[106]=eJ,eO[107]=ew):ew=eO[107];let ns=e9&&H,nr="hidden"===t0&&"pb-2";return eO[108]!==ns||eO[109]!==nr?(eC=(0,v.$)(q,ns,nr),eO[108]=ns,eO[109]=nr,eO[110]=eC):eC=eO[110],eO[111]!==tX||eO[112]!==tY?(e_=tX&&(0,i.jsx)("div",{className:G,"data-is-reply":tY,children:(0,i.jsx)("div",{className:K})}),eO[111]=tX,eO[112]=tY,eO[113]=e_):e_=eO[113],eO[114]!==t8||eO[115]!==eQ?(eN=eQ?void 0:(0,i.jsx)(M.RelayEnvironmentProvider,{environment:nt,children:(0,i.jsx)(o.p,{...t8})}),eO[114]=t8,eO[115]=eQ,eO[116]=eN):eN=eO[116],eO[117]!==eH.body||eO[118]!==t8||eO[119]!==eJ||eO[120]!==eB||eO[121]!==eN||eO[122]!==e0?(eS=(0,i.jsx)(l.v,{...t8,commentBody:eH.body,threadCommentCount:e0,isInDialogMode:eJ,actions:eN,isOutdated:eB}),eO[117]=eH.body,eO[118]=t8,eO[119]=eJ,eO[120]=eB,eO[121]=eN,eO[122]=e0,eO[123]=eS):eS=eO[123],eO[124]!==tX||eO[125]!==eS?(eI=(0,i.jsx)("div",{className:W,"data-is-nested-reply":tX,children:eS}),eO[124]=tX,eO[125]=eS,eO[126]=eI):eI=eO[126],eO[127]!==tI?(ek=tI&&(0,i.jsxs)(y.A,{variant:"danger",className:"m-3",children:[(0,i.jsx)(g.StopIcon,{className:"mr-2"}),tI]}),eO[127]=tI,eO[128]=ek):ek=eO[128],eO[129]!==e$||eO[130]!==tY?(eL=tY&&(0,i.jsx)("div",{className:z,"data-is-last-child":e$}),eO[129]=e$,eO[130]=tY,eO[131]=eL):eL=eO[131],eO[132]!==tm||eO[133]!==t0||eO[134]!==tx||eO[135]!==tY||eO[136]!==tf||eO[137]!==tH||eO[138]!==tG||eO[139]!==tW||eO[140]!==e3?(eD="editing"===t0&&(0,i.jsx)("div",{className:(0,v.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",tY?"pl-0":"pl-2"),children:(0,i.jsxs)(U.S,{ref:t_,label:"Update comment",value:tm,onChange:tG,onPrimaryAction:tW,suggestedChangesConfig:e3,markdownErrorMessage:tx,children:[(0,i.jsx)(r.xR,{variant:"default",onClick:tH,children:"Cancel"}),(0,i.jsx)(r.xR,{disabled:tf||!tm.length,loading:tf,variant:"primary",onClick:tW,children:"Update"})]})}),eO[132]=tm,eO[133]=t0,eO[134]=tx,eO[135]=tY,eO[136]=tf,eO[137]=tH,eO[138]=tG,eO[139]=tW,eO[140]=e3,eO[141]=eD):eD=eO[141],eO[142]!==e4||eO[143]!==eH||eO[144]!==t0||eO[145]!==tc||eO[146]!==eW||eO[147]!==tE||eO[148]!==tg||eO[149]!==eB||eO[150]!==tY||eO[151]!==eV||eO[152]!==tU||eO[153]!==e3||eO[154]!==e5?.viewerCanApplySuggestion?(eT="visible"===t0&&(0,i.jsxs)("div",{className:J,"data-is-reply":tY,children:[eH.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.vb,{ref:tN,className:(0,v.$)("markdown-body",Q,Z),"comment-testid":`Comment body html for comment ${eH.id}`,html:eH.bodyHTML}),"copilot"===eH.reviewVariantType&&(0,i.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,i.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===eH.reviewVariantType&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(c.Z,{commentUrl:eH.url,commentId:eH.databaseId?.toString()??""})}),eH.reactionGroups&&(0,i.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,i.jsx)(m.P,{ref:tS,reactionGroups:eH.reactionGroups,onReact:tU,canReact:eH.viewerCanReact})})]}),e4&&(0,i.jsx)(ep,{comment:eH,commentBodyRef:tN,filePath:eW,isOutdated:eB,isThreadResolved:eV,databaseId:eH.databaseId,suggestedChangesConfig:e3,applySuggestedChangesValidationData:e4,viewerCanApplySuggestion:e5?.viewerCanApplySuggestion})]}),tc&&(0,i.jsx)(x.K,{title:"Delete comment?",confirmButtonContent:"Delete",confirmButtonType:"danger",confirmButtonLoading:tg,onClose:tE,children:"Are you sure you want to delete this comment?"})]}),eO[142]=e4,eO[143]=eH,eO[144]=t0,eO[145]=tc,eO[146]=eW,eO[147]=tE,eO[148]=tg,eO[149]=eB,eO[150]=tY,eO[151]=eV,eO[152]=tU,eO[153]=e3,eO[154]=e5?.viewerCanApplySuggestion,eO[155]=eT):eT=eO[155],eO[156]!==tY||eO[157]!==eL||eO[158]!==eD||eO[159]!==eT?(eE=(0,i.jsxs)("div",{className:G,"data-is-reply":tY,children:[eL,eD,eT]}),eO[156]=tY,eO[157]=eL,eO[158]=eD,eO[159]=eT,eO[160]=eE):eE=eO[160],eO[161]!==eH.id||eO[162]!==tt||eO[163]!==nn||eO[164]!==ni||eO[165]!==ew||eO[166]!==eC||eO[167]!==e_||eO[168]!==eI||eO[169]!==ek||eO[170]!==eE||eO[171]!==e1?(eA=(0,i.jsxs)("div",{ref:tJ,id:nn,tabIndex:ni,"data-first-thread-comment":tt,"data-marker-navigation-comment-thread-id":e1,"data-marker-navigation-comment-id":na,...ew,className:eC,children:[e_,eI,ek,eE]}),eO[161]=eH.id,eO[162]=tt,eO[163]=nn,eO[164]=ni,eO[165]=ew,eO[166]=eC,eO[167]=e_,eO[168]=eI,eO[169]=ek,eO[170]=eE,eO[171]=e1,eO[172]=eA):eA=eO[172],eO[173]!==ej||eO[174]!==eA?(eR=(0,i.jsx)(ey.tL,{commands:ej,children:eA}),eO[173]=ej,eO[174]=eA,eO[175]=eR):eR=eO[175],eR}:function({isAnchorable:e=!1,index:t=0,isInlineComment:n,isLastChild:a,isOutdated:s,isThreadResolved:j,lineMarkersKey:w,anchorPrefix:_="r",comment:N,disableDialogMode:I,enableDialogMode:k,filePath:D,gridCellId:R,hideActions:P,isFirstComment:Y=!1,isInDialogMode:X,onDeleteLineComment:ee,onQuoteReply:et=u.l,threadCommentCount:en,threadId:ei,threadPositionNumber:ea,suggestedChangesConfig:es,applySuggestedChangesValidationData:er,viewerData:el,ghostUser:eo=d.t.ghostUser,originalDiffPathUri:ed,headingLevel:ec="h3"}){let{addToast:eu}=(0,p.Y6)(),[em,eh]=(0,b.useState)(!1),[ef,ev]=(0,b.useState)(N.isHidden),[eb,ej]=(0,b.useState)(!1),[ew,eC]=(0,b.useState)(N.body),[e_,eN]=(0,b.useState)(!1),[eS,eI]=(0,b.useState)(!1),[ek,eL]=(0,b.useState)(""),eD=(0,C.Kp)(),{persistCommentToStorage:eT,removePersistedCommentFromStorage:eE}=(0,B.L)({subjectId:eD,filePath:D,fileLevelComment:"FILE"===N.subjectType,threadId:N.id,handlePersistedCommentExists:({text:e})=>{e&&eC(e)}}),eA=(0,b.useRef)(null),eR=(0,b.useRef)(null),eO=(0,b.useRef)(null),[eP,eF]=(0,b.useState)(""),eM=()=>{eA.current?.focus()};(0,b.useEffect)(()=>{if(em){let e=window.setTimeout(eM);return()=>{window.clearTimeout(e)}}},[em]);let{mutate:e$}=L({filePath:D,lineMarkersKey:w,onSuccess:()=>{ej(!1),eI(!1),ee?.()}}),eB=async()=>{I?.(),ej(!0)},{mutate:eV}=T(D,w),{mutate:eU}=O(D,w),{mutate:eq}=S(),{mutate:eH}=A(),{mutate:eG}=E(D,w),{mutate:eK}=F({filePath:D,lineMarkersKey:w,onSuccess:()=>{eh(!1),eN(!1),eE()}}),eW=(0,b.useCallback)(()=>{eN(!0);let e=(0,V.u)(ew,es?.sourceContentFromDiffLines??"");if(!e.isValid){eL(e.errorMessage),eN(!1);return}eK({commentId:String(N.databaseId),body:ew,bodyVersion:N.bodyVersion},{onError:()=>{eN(!1),eu({type:"error",message:"Failed to update comment"})}})},[eu,ew,N,es?.sourceContentFromDiffLines,eK]),ez=N.databaseId?.toString(),eQ=ez?`${_}${ez}`:void 0,eZ=eQ&&f.fV?new URL(`${f.fV.pathname}#${eQ}`,f.fV.origin).toString():"",eJ=(0,b.useRef)(null);(0,$.u)({isAnchorable:e,commentId:ez,commentAnchor:eQ,containerRef:eJ});let eY=t>0,eX=t>1,e0=em?"editing":ef?"hidden":"visible",e1={headingProps:{as:ec},avatarUrl:N.author?.avatarUrl??eo.avatarUrl,comment:{...N,url:eZ,referenceText:N.reference.text??`#${N.reference.number}`},commentRef:eJ,deleteComment:eB,editComment:()=>{eh(!0)},editHistoryComponent:void 0,hideComment:e=>{if(!N.databaseId)throw Error("Comment not found");eV({commentDatabaseId:N.databaseId,reason:e},{onError:()=>{eN(!1),eF("Failed to hide comment")},onSuccess:()=>ev(!0)})},onBlock:(e,t,n,i,a,s)=>eq({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:a,userLogin:s},{onError:()=>eF("Failed to block user"),onSuccess:()=>{t&&ev(!0)}}),onUnblock:(e,t)=>eH({organizationLogin:e,userLogin:t},{onError:()=>eF("Failed to unblock user")}),onMinimize:ev,onSuccessfulBlock:()=>{setTimeout(()=>f.cg?.location.reload(),800)},isMinimized:ef,commentAuthorLogin:N.author?.login??eo.login,navigate:u.l,commentSubjectAuthorLogin:N.reference?.author?.login??"",onReplySelect:et,unhideComment:()=>{if(!N.databaseId)throw Error("Comment not found");eU({commentDatabaseId:N.databaseId},{onError:()=>{eN(!1),eF("Failed to unhide comment")},onSuccess:()=>ev(!1)})},hideActions:P,isReply:eY,forceInlineAvatar:!0,containerStyle:{},originalDiffPathUri:ed,isOutdated:s,commentAuthorSlug:"copilot"===N.reviewVariantType?"copilot-pull-request-reviewer":void 0,commentAuthorType:"copilot"===N.reviewVariantType?l.S.Bot:void 0},e2=(0,b.useMemo)(()=>(0,eg.E7)(),[]);return(0,i.jsx)(ey.tL,{commands:{"pull-requests-diff-view:quote-reply":()=>{if(em)return;let e=f.cg?.getSelection(),t=e?.anchorNode?{anchorNode:e.anchorNode,range:e.getRangeAt(0)}:null;et((0,ex.E)(eJ?.current,t,N.body))}},children:(0,i.jsxs)("div",{ref:eJ,id:e?eQ:void 0,tabIndex:n?X?0:-1:0,"data-first-thread-comment":Y,"data-marker-navigation-comment-thread-id":ei,"data-marker-navigation-comment-id":N.id,...X?{role:"document","aria-roledescription":"comment","aria-label":eY?void 0!==ea?`Reply ${t} to Comment ${ea}`:`Reply ${t}`:void 0!==ea?`Comment ${ea}`:"Comment"}:{},className:(0,v.$)(q,e&&H,"hidden"===e0&&"pb-2"),children:[eX&&(0,i.jsx)("div",{className:G,"data-is-reply":eY,children:(0,i.jsx)("div",{className:K})}),(0,i.jsx)("div",{className:W,"data-is-nested-reply":eX,children:(0,i.jsx)(l.v,{...e1,commentBody:N.body,threadCommentCount:en,isInDialogMode:X,actions:P?void 0:(0,i.jsx)(M.RelayEnvironmentProvider,{environment:e2,children:(0,i.jsx)(o.p,{...e1})}),isOutdated:s})}),eP&&(0,i.jsxs)(y.A,{variant:"danger",className:"m-3",children:[(0,i.jsx)(g.StopIcon,{className:"mr-2"}),eP]}),(0,i.jsxs)("div",{className:G,"data-is-reply":eY,children:[eY&&(0,i.jsx)("div",{className:z,"data-is-last-child":a}),"editing"===e0&&(0,i.jsx)("div",{className:(0,v.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",eY?"pl-0":"pl-2"),children:(0,i.jsxs)(U.S,{ref:eA,label:"Update comment",value:ew,onChange:e=>{eT({text:e}),eC(e),eL(void 0)},onPrimaryAction:eW,suggestedChangesConfig:es,markdownErrorMessage:ek,children:[(0,i.jsx)(r.xR,{variant:"default",onClick:()=>{eh(!1),eE(),eC(N.body)},children:"Cancel"}),(0,i.jsx)(r.xR,{disabled:e_||!ew.length,loading:e_,variant:"primary",onClick:eW,children:"Update"})]})}),"visible"===e0&&(0,i.jsxs)("div",{className:J,"data-is-reply":eY,children:[N.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.vb,{ref:eR,className:(0,v.$)("markdown-body",Q,Z),"comment-testid":`Comment body html for comment ${N.id}`,html:N.bodyHTML}),"copilot"===N.reviewVariantType&&(0,i.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,i.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,i.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===N.reviewVariantType&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(c.Z,{commentUrl:N.url,commentId:N.databaseId?.toString()??""})}),N.reactionGroups&&(0,i.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,i.jsx)(m.P,{ref:eO,reactionGroups:N.reactionGroups,onReact:(e,t)=>{if(!N.databaseId)throw Error("Comment not found");setTimeout(()=>eO.current?.focus(),0),eG({commentDatabaseId:N.databaseId,threadId:ei,reaction:e,viewerHasReacted:t},{onError:()=>{eN(!1),eu({type:"error",message:"Failed to react to comment"})}})},canReact:N.viewerCanReact})})]}),er&&(0,i.jsx)(ep,{comment:N,commentBodyRef:eR,filePath:D,isOutdated:s,isThreadResolved:j,databaseId:N.databaseId,suggestedChangesConfig:es,applySuggestedChangesValidationData:er,viewerCanApplySuggestion:el?.viewerCanApplySuggestion})]}),eb&&(0,i.jsx)(x.K,{title:"Delete comment?",confirmButtonContent:"Delete",confirmButtonType:"danger",confirmButtonLoading:eS,onClose:e=>{"confirm"===e?(eI(!0),e$({commentId:N.id,threadId:ei,filePath:D},{onError:()=>{ej(!1),eu({type:"error",message:"Failed to delete comment"}),eI(!1)}})):(R&&k?.(R),ej(!1),eI(!1))},children:"Are you sure you want to delete this comment?"})]})]})]})})};function eb(){setTimeout(ej,800)}function ej(){return f.cg?.location.reload()}try{ev.displayName||(ev.displayName="ReviewThreadComment")}catch{}},61282:(e,t,n)=>{n.d(t,{V:()=>h});var i=n(74848),a=n(16522),s=n(96540),r=n(38621),l=n(26108),o=n(21373),d=n(69726),c=n(57387),u=n(54571);let m=(0,s.lazy)(()=>Promise.all([n.e(3088),n.e(43934),n.e(82216),n.e(6488),n.e(42892),n.e(99418),n.e(30587),n.e(72471),n.e(55229),n.e(4712),n.e(3086),n.e(82081),n.e(51220),n.e(28546),n.e(40420),n.e(67602),n.e(26744),n.e(57026),n.e(18312),n.e(347),n.e(89332),n.e(16769),n.e(22993),n.e(25407),n.e(83494),n.e(83463),n.e(87670),n.e(40771),n.e(66990),n.e(29665),n.e(4817),n.e(91232),n.e(37294),n.e(2635),n.e(30721),n.e(99808),n.e(52302),n.e(81171),n.e(67071),n.e(41474),n.e(1631),n.e(10422),n.e(52643),n.e(59014)]).then(n.bind(n,68747)).then(e=>({default:e.NewAgentTaskButtonContent})));function h(e){let t,n,d,h,g,y,x=(0,a.c)(26),{isIconButton:v,icon:b,label:j,onOpen:w,onClose:C,setContentOpen:_,open:N,currentRepo:S,currentReference:I,hideRepoSelector:k,eventType:L,size:D,tooltipDirection:T,variant:E}=e,A=void 0===b?r.AgentIcon:b,R=void 0===j?"New agent session":j,[O,P]=(0,s.useState)(!!N);x[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],x[0]=t):t=x[0];let[F]=(0,u.I)(f,!0,t),M=(0,s.useRef)(null);x[1]!==w?(n=()=>{P(!0),w?.()},x[1]=w,x[2]=n):n=x[2];let $=n;x[3]!==C||x[4]!==_?(d=()=>{P(!1),C?.(),_?.(!1)},x[3]=C,x[4]=_,x[5]=d):d=x[5];let B=d,V=S?`${R} in ${S.ownerLogin}/${S.name}`:R;return x[6]!==$||x[7]!==A||x[8]!==v||x[9]!==R||x[10]!==D||x[11]!==T||x[12]!==E?(h=v?(0,i.jsx)(l.K,{ref:M,icon:A,"aria-label":R,size:D,tooltipDirection:T,variant:E,onClick:$}):(0,i.jsx)(o.Q,{ref:M,onClick:$,leadingVisual:A,size:D,children:R}),x[6]=$,x[7]=A,x[8]=v,x[9]=R,x[10]=D,x[11]=T,x[12]=E,x[13]=h):h=x[13],x[14]!==I||x[15]!==S||x[16]!==V||x[17]!==L||x[18]!==B||x[19]!==k||x[20]!==O||x[21]!==F?(g=O&&!F&&(0,i.jsx)(c.l,{title:V,onClose:B,returnFocusRef:M,position:{narrow:"fullscreen"},children:(0,i.jsx)(c.l.Body,{className:"p-0",children:(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)(p,{}),children:(0,i.jsx)(m,{currentRepo:S,currentReference:I,hideRepoSelector:k,setOpen:B,eventType:L})})})}),x[14]=I,x[15]=S,x[16]=V,x[17]=L,x[18]=B,x[19]=k,x[20]=O,x[21]=F,x[22]=g):g=x[22],x[23]!==h||x[24]!==g?(y=(0,i.jsxs)(i.Fragment,{children:[h,g]}),x[23]=h,x[24]=g,x[25]=y):y=x[25],y}function f(){return!1}function p(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"d-flex flex-column flex-items-center p-6",children:(0,i.jsx)(d.A,{srText:"Loading\u2026"})}),t[0]=e):e=t[0],e}try{m.displayName||(m.displayName="LazyNewAgentTaskButtonContent")}catch{}try{h.displayName||(h.displayName="NewAgentTaskButton")}catch{}try{p.displayName||(p.displayName="FallbackContent")}catch{}},61872:(e,t,n)=>{n.d(t,{T:()=>i});let i={MissingProperty:"MissingProperty",CycleDetected:"CycleDetected",NonexistentNode:"NonexistentNode",DisconnectedNode:"DisconnectedNode",InvalidBooleanValue:"InvalidBooleanValue",InvalidRangeValue:"InvalidRangeValue",InvalidSelectValue:"InvalidSelectValue",InvalidFileType:"InvalidFileType",EmptyInputValue:"EmptyInputValue",InvalidDateValue:"InvalidDateValue",UnavailableModel:"UnavailableModel"}},62421:(e,t,n)=>{n.d(t,{G:()=>l});var i=n(16522),a=n(96459),s=n(25641),r=n(33592);function l(){let e,t=(0,i.c)(3),n=(0,r.b)(),l=(0,a.Z)();return t[0]!==n||t[1]!==l?(e=async e=>{window.location.pathname!==s.Jz&&(l(s.Jz),await n.selectThread(null,e))},t[0]=n,t[1]=l,t[2]=e):e=t[2],e}},62828:(e,t,n)=>{n.d(t,{I:()=>o});var i=n(16522),a=n(47789),s=n(35247),r=n(7812),l=n(1747);function o(e){let t,n=(0,i.c)(8),{messageId:o,messageIndex:d,messageTimestamp:c}=e,{openPreviewPane:u,openItem:m,updateItem:h}=(0,l.xx)(),f=(0,a.qw)();return n[0]!==o||n[1]!==d||n[2]!==c||n[3]!==m||n[4]!==u||n[5]!==f||n[6]!==h?(t=(e,t)=>{let n=null;switch(e.type){case"file":n=(0,r.by)(e,o,c);break;case"file-diff":n=(0,r.g)(e,o,c);break;case"thread-scoped-file":n=(0,r.oR)({ref:e,messageIndex:d,messageId:o,timestamp:c});break;case"draft-issue":case"draft-update-issue":n=(0,r.oR)({ref:e,messageIndex:d,messageId:o});break;case"issue":n=(0,r.SI)(e,o);break;case"job":s.W.immersiveJobResultPreview&&(n=(0,r.wN)(e,o));break;default:for(let t of f)if(t.previewComponents?.[e.type]){n=(0,r.Bx)(e,o);break}}n&&(t?.preventDefault(),h(n),m(n.id),u())},n[0]=o,n[1]=d,n[2]=c,n[3]=m,n[4]=u,n[5]=f,n[6]=h,n[7]=t):t=n[7],t}},64894:(e,t,n)=>{n.d(t,{C:()=>o});var i=n(74848),a=n(16522),s=n(11680),r=n(96379),l=n(96540);function o(e){let t,n,o,d=(0,a.c)(4),{onBannerDismiss:c,enabled:u}=e,[m,h]=(0,l.useState)(!1);return!(void 0===u||u)||m?null:(d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-bold",children:"Copilot coding agent now uses fewer premium requests!"})," From now on, each session uses just one premium request."]}),n=(0,i.jsx)(s.l.PrimaryAction,{as:"a",href:"https://docs.github.com/copilot/concepts/copilot-billing/understanding-and-managing-requests-in-copilot",children:"Learn more"}),d[0]=t,d[1]=n):(t=d[0],n=d[1]),d[2]!==c?(o=(0,i.jsx)(s.l,{variant:"upsell",title:"Copilot premium requests announcement",hideTitle:!0,description:t,primaryAction:n,onDismiss:async()=>{h(!0),c&&c(),await (0,r.DI)("/settings/dismiss-notice/copilot_coding_agent_premium_requests_banner",{method:"POST"})}}),d[2]=c,d[3]=o):o=d[3],o)}try{o.displayName||(o.displayName="PremiumRequestsBanner")}catch{}},64917:(e,t,n)=>{n.d(t,{I:()=>s});var i=n(16522),a=n(99993);function s(e,t){let n=(0,i.c)(2),{data:s}=(0,a._N)(e,t);if(void 0===s){let t;return n[0]!==e?(t=e(void 0),n[0]=e,n[1]=t):t=n[1],t}return s}},65529:(e,t,n)=>{n.d(t,{as:()=>h,fp:()=>m,vQ:()=>u});var i=n(47865),a=n(76977),s=n(93654),r=n(2635),l=n(53419),o=n(96540);let d="copilot-chat-spec-task";function c(e,t){if(e&&t)return`${d}::${e}::${t}`}function u(e){let{selectedThreadID:t}=(0,r.Pk)(),n=c((0,r.Pk)().selectedThreadID,e.tag),[a,s]=(0,o.useState)(null);(0,o.useEffect)(()=>{s(null)},[e.id]);let u=(0,o.useCallback)(e=>{let n;e instanceof i.c||(e=Error("An unexpected error occurred. Please try again.",{cause:e})),s(e),e&&"status"in e&&"number"==typeof e.status&&(n=e.status),(0,l.BI)("copilot.spec_mode.pr_creation.failure",{http_status:n,error_message:e.message,mode:"immersive",threadId:t})},[t]),{createTask:m,isCreating:h}=(0,i.Z)({onError:u}),f=e.name,p=(0,o.useMemo)(()=>((e.name?`${e.name}

${e.description}`:e.description)||e.tag).trim(),[e.name,e.description,e.tag]);return{start:(0,o.useCallback)(i=>{if(h)return;s(null),(0,l.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_START",mode:"immersive",threadId:t});let a=i?.nameWithOwner??e.repository;if(!a)return void u(Error("Repository is required to start a task"));let r=a.split("/");2===r.length&&r[0]&&r[1]?n?m({nwo:a,baseRef:i?.branch,selectedAgent:i?.subAgent?{typeName:"customSubAgent",subAgentSlug:i.subAgent}:void 0,problemStatement:p,title:f,eventType:d},n):u(Error("Unable to generate task ID - thread or task tag missing")):u(Error('Invalid repository format. Expected "owner/repo"'))},[m,n,u,h,p,e.repository,t,f]),isStarting:h,error:a}}function m(e){let t=(0,r.Pk)(),n=e.map(e=>c(t.selectedThreadID,e.tag));(0,a._)();let{tasks:i,isLoading:l}=(0,s.si)({});return(0,o.useMemo)(()=>n.map(e=>!e||l||0===i.length?{isLoading:!!e&&l,pullRequest:void 0}:function(e){if(0===e.length)return{isLoading:!1,pullRequest:void 0};let t={isLoading:!1,pullRequest:void 0};for(let n of e){if(n.isLoading)return{isLoading:!0,pullRequest:void 0};if(n.pullRequest?.state==="closed")continue;let e=n.pullRequest?.created_at,i=t.pullRequest?.created_at;e&&(!i||new Date(e).getTime()>new Date(i).getTime())&&(t=n)}return t}(i.filter(t=>t.event_identifiers?.includes(e)).map(e=>({isLoading:!!e?.isOptimistic,pullRequest:e.pull})))),[n,i,l])}function h(e){return m(e?[e]:[])[0]??{isLoading:!1,pullRequest:void 0}}},68534:(e,t,n)=>{n.d(t,{F:()=>i});function i(e){return e.slice(0,7)}},68874:(e,t,n)=>{n.d(t,{o:()=>u,V:()=>c});var i=n(74848),a=n(69497),s=n(12683);let r=[{unit:"month",ms:2592e6},{unit:"day",ms:864e5},{unit:"hour",ms:36e5},{unit:"minute",ms:6e4},{unit:"second",ms:1e3}],l=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:void 0,timeZoneName:"short"}),o=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}),d=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"});function c(e,t=!0){let n="",i=new Date,a=i.getTime()-e.getTime(),s=r.find(e=>e.ms<a);if(s&&"month"!==s.unit){let e=Math.floor(a/s.ms);n="day"===s.unit&&1===e?"yesterday":`${e} ${s.unit}${e>1?"s":""} ago`}else{let a=e.getFullYear()===i.getFullYear()?d:o;n=`${t?"on ":""}${a.format(e)}`}return n}function u({timestamp:e,usePreposition:t=!0,linkUrl:n,sx:r}){let o=c(e,t),d=l.format(e);return n?(0,i.jsx)(s.N_,{sx:{...r},href:n,target:"_blank",className:"Ago-module__AgoTimestampLink--cfwj_",children:(0,i.jsx)(a.A,{inline:!0,title:d,children:(0,i.jsx)("span",{title:d,className:"Ago-module__timestampText--rtBsS",children:o})})}):(0,i.jsx)(a.A,{inline:!0,title:d,children:(0,i.jsx)(s.EY,{title:d,sx:r,children:o})})}try{u.displayName||(u.displayName="Ago")}catch{}},69510:(e,t,n)=>{n.d(t,{XG:()=>c,_l:()=>m});var i=n(68273),a=n(16522),s=n(65510),r=n(20622),l=n(96379);function o(e){return null!==e&&"object"==typeof e&&"previewInfo"in e}function d(e){return{thread:{id:e.threadId,isResolved:e.isResolved,isOutdated:e.isOutdated,line:e.line,subjectType:e.subjectType,subject:e.subject,commentsData:e.commentsData},previewInfo:{threadId:e.threadId,commentId:e.commentId,path:e.path,threadPreviewComments:e.threadPreviewComments,originalDiffPathUri:e.originalDiffPathUri,firstComment:e.firstComment,subject:e.subject}}}function c(e){return[r.uT.threadPreviews,e]}function u(e){let t=`${e}/page_data/${r.uT.threadPreviews}`;return{queryKey:c(e),queryFn:async()=>{let e=await (0,l.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);let n=await e.json();return n.length>0&&!o(n[0])?n.map(d):n}}}let m=(0,i.Z6)()?function(e){let t,n,i,r=(0,a.c)(8),{pathName:l,initialData:c}=e;r[0]!==l?(t=u(l),r[0]=l,r[1]=t):t=r[1];let{queryFn:m,queryKey:h}=t;r[2]!==c?(n=c&&c.length>0&&!o(c[0])?c.map(d):c,r[2]=c,r[3]=n):n=r[3];let f=n;return r[4]!==m||r[5]!==h||r[6]!==f?(i={queryKey:h,queryFn:m,initialData:f,staleTime:1/0},r[4]=m,r[5]=h,r[6]=f,r[7]=i):i=r[7],(0,s.U)(i)}:function({pathName:e,initialData:t}){let{queryFn:n,queryKey:i}=u(e),a=t&&t.length>0&&!o(t[0])?t.map(d):t;return(0,s.U)({queryKey:i,queryFn:n,initialData:a,staleTime:1/0})}},70109:(e,t,n)=>{n.d(t,{S:()=>o});var i=n(74848),a=n(68273),s=n(16522),r=n(42118),l=n(27011);let o=(0,a.GV)()?e=>{let t,n,a,o,d,c,u,m,h=(0,s.c)(22);h[0]!==e?({ref:n,children:t,...a}=e,h[0]=e,h[1]=t,h[2]=n,h[3]=a):(t=h[1],n=h[2],a=h[3]);let f=(0,l.Yp)(),{baseRepository:p}=(0,l.GK)(),g=(0,l.L3)();h[4]!==f.id?(o={id:f.id},h[4]=f.id,h[5]=o):o=h[5];let y=`${p.ownerLogin}/${p.name}`;h[6]!==p.id||h[7]!==y?(d={databaseId:p.id,nwo:y,slashCommandsEnabled:!1},h[6]=p.id,h[7]=y,h[8]=d):d=h[8],h[9]!==g.effectiveRange.baseOid||h[10]!==g.effectiveRange.headOid?(c={startCommitOid:g.effectiveRange.baseOid,endCommitOid:g.effectiveRange.headOid},h[9]=g.effectiveRange.baseOid,h[10]=g.effectiveRange.headOid,h[11]=c):c=h[11],h[12]!==f.number||h[13]!==o||h[14]!==d||h[15]!==c?(u={type:"pull_request",id:o,pullRequestNumber:f.number,repository:d,comparison:c},h[12]=f.number,h[13]=o,h[14]=d,h[15]=c,h[16]=u):u=h[16];let x=u;return h[17]!==t||h[18]!==n||h[19]!==a||h[20]!==x?(m=(0,i.jsx)(r.hF,{...a,ref:n,placeholder:"Leave a comment",actions:t,subject:x,showLabel:!1}),h[17]=t,h[18]=n,h[19]=a,h[20]=x,h[21]=m):m=h[21],m}:({ref:e,children:t,...n})=>{let a=(0,l.Yp)(),{baseRepository:s}=(0,l.GK)(),o=(0,l.L3)(),d={type:"pull_request",id:{id:a.id},pullRequestNumber:a.number,repository:{databaseId:s.id,nwo:`${s.ownerLogin}/${s.name}`,slashCommandsEnabled:!1},comparison:{startCommitOid:o.effectiveRange.baseOid,endCommitOid:o.effectiveRange.headOid}};return(0,i.jsx)(r.hF,{...n,ref:e,placeholder:"Leave a comment",actions:t,subject:d,showLabel:!1})};o.displayName="ConversationCommentBox"},70719:(e,t,n)=>{n.d(t,{U:()=>d});var i=n(16522),a=n(96379),s=n(97665),r=n(94747),l=n(79472),o=n(21067);function d(e){let t,n,a,o,d=(0,i.c)(10),{onSuccess:u,onError:m}=e,h=(0,s.jE)();return d[0]!==h?(t=async e=>{h.setQueryData((0,l.w$)(),t=>({...t,...e}))},d[0]=h,d[1]=t):t=d[1],d[2]!==u?(n=()=>{u()},d[2]=u,d[3]=n):n=d[3],d[4]!==m?(a=e=>{m(e)},d[4]=m,d[5]=a):a=d[5],d[6]!==t||d[7]!==n||d[8]!==a?(o={mutationFn:c,onMutate:t,onSuccess:n,onError:a},d[6]=t,d[7]=n,d[8]=a,d[9]=o):o=d[9],(0,r.n)(o)}async function c(e){let{commentsPreference:t,lineSpacing:n,splitPreference:i}=e;if(!(0,o.M3)())return;let s={};t&&(s={...s,commentsPreference:t}),n&&(s={...s,lineSpacing:n}),i&&(s={...s,diff:i});let r=await (0,a.Sr)("/users/diffview",{method:"POST",headers:{Accept:"application/json"},body:s}),l=await r.json();if(r.ok)return l;throw Error(l.error||"Unknown error occurred",{cause:r.status})}},70840:(e,t,n)=>{n.d(t,{G:()=>x});var i=n(74848),a=n(16522),s=n(34522),r=n(73189),l=n(97286),o=n(24880),d=n(73017),c=n(96379),u=n(38621),m=n(69726),h=n(40090),f=n(34164),p=n(74022),g=n(96540),y=n(25506);function x({content:e,className:t,fallbackToRaw:n=!1,hideHeadingAnchors:s=!1,useLoadingSkeletonWithOptions:r}){let y=function(e,t,n){let i,s,r,l=(0,a.c)(8),[o,d]=(0,g.useState)(e),[c,u]=(0,g.useState)(t);2e3!==l[0]?(i=(0,p.A)(d,2e3),l[0]=2e3,l[1]=i):i=l[1];let m=i;return l[2]!==c||l[3]!==t||l[4]!==m||l[5]!==e?(s=()=>{t!==c?(m.cancel(),d(e),u(t)):m(e)},r=[m,e,t,c],l[2]=c,l[3]=t,l[4]=m,l[5]=e,l[6]=s,l[7]=r):(s=l[6],r=l[7]),(0,g.useEffect)(s,r),o}(e.value,e.name,2e3),{status:x,data:b}=(0,l.I)({queryKey:["copilot-immersive","MarkdownPreview",y,e.name],queryFn:async()=>{let t=await (0,c.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:y,filename:e.name}});if(!t.ok)throw Error(`Failed to load rendered markdown (${t.status} on ${t.url})`);return await t.json()},placeholderData:o.rX,staleTime:1/0});return(0,i.jsx)("div",{className:(0,f.$)("readme html-blob blob","MarkdownPreview-module__markdownPreview--KrJBX",s&&"MarkdownPreview-module__hideHeadingAnchors--wU3US",t),children:"pending"===x?r?(0,i.jsx)("div",{"aria-label":"Loading Markdown preview\u2026",role:"status","aria-live":"polite",children:r.map((e,t)=>(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)(h.r,{size:e.size,lines:e.lines})},t))}):(0,i.jsx)("div",{className:"MarkdownPreview-module__spinner--rHtSt",children:(0,i.jsx)(m.A,{srText:"Loading Markdown preview\u2026"})}):"error"===x?n?(0,i.jsx)(v,{content:e}):(0,i.jsxs)("div",{className:"MarkdownPreview-module__error--Kjmwv",children:[(0,i.jsx)("span",{className:"MarkdownPreview-module__errorIcon--msbkW",children:(0,i.jsx)(u.StopIcon,{size:24})}),(0,i.jsx)("h2",{className:"MarkdownPreview-module__errorHeader--yOGh9",children:"Markdown rendering failed"}),(0,i.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,i.jsx)(d.$6,{className:"markdown-body",html:b.html})})}function v(e){let t,n,l,o,d=(0,a.c)(13),{content:c}=e,u=(0,g.useId)();d[0]!==c.value?(t={value:c.value,language:"markdown"},d[0]=c.value,d[1]=t):t=d[1];let m=(0,y.a)(t);return d[2]!==c.name||d[3]!==u?(n=(0,i.jsxs)("span",{id:u,className:"sr-only",children:[c.name," raw markdown contents"]}),d[2]=c.name,d[3]=u,d[4]=n):n=d[4],d[5]!==m||d[6]!==c.name||d[7]!==c.value||d[8]!==u?(l=(0,i.jsx)(s.default,{ariaLabelledBy:u,fileName:c.name,isReadOnly:!0,spacing:m,value:c.value,onChange:r.l,hideHelp:!0}),d[5]=m,d[6]=c.name,d[7]=c.value,d[8]=u,d[9]=l):l=d[9],d[10]!==n||d[11]!==l?(o=(0,i.jsxs)(i.Fragment,{children:[n,l]}),d[10]=n,d[11]=l,d[12]=o):o=d[12],o}try{x.displayName||(x.displayName="MarkdownPreview")}catch{}try{v.displayName||(v.displayName="RawMarkdownPreview")}catch{}},70843:(e,t,n)=>{n.d(t,{L:()=>s});var i=n(16522),a=n(96540);function s(e){let t,n,s=(0,i.c)(3);s[0]!==e?(t=()=>{if(!e)return;let t=document.querySelector(".footer");if(t)return t.hidden=!0,()=>{t.hidden=!1}},n=[e],s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,a.useEffect)(t,n)}},71317:(e,t,n)=>{n.d(t,{k:()=>a});var i=n(71315);function a(e,t=0){if(void 0===i.XC)return;let n=i.XC.getElementById("screenReaderAnnouncementDiv")??void 0;if(n||(n=function(){if(void 0===i.XC)return;let e=i.XC.createElement("div");return e.classList.add("sr-only","mt-n1"),e.id="screenReaderAnnouncementDiv",e.setAttribute("role","alert"),e.setAttribute("data-testid","screenReaderAnnouncement"),e.setAttribute("aria-live","assertive"),i.XC.body.appendChild(e),e}()),!n)return;let s=n.textContent===e?`${e}\u00A0`:e;setTimeout(()=>{n&&(n.textContent=s)},t)}},71833:(e,t,n)=>{n.d(t,{B:()=>s});var i=n(25407),a=n(96379);async function s(e,t){if(!t)return;let n=new FormData;n.set("file_tree_visible",e?"true":"false"),(0,a.DI)((0,i.h6D)(t),{method:"PUT",body:n,headers:{Accept:"application/json"}})}},72994:(e,t,n)=>{n.d(t,{c:()=>s,t:()=>a});var i=n(35247);function a(e){return e&&0!==e.length?i.W.draftIssueProjectsWithID?e.filter(e=>!!e.title||!!e.id):e.filter(e=>!!e.title).map(e=>e.title):[]}function s(e){return e&&0!==e.length?e.filter(e=>"string"==typeof e?""!==e.trim():!!e.title||!!e.id).map(e=>"string"==typeof e?{title:e}:e):[]}},73262:(e,t,n)=>{n.d(t,{K:()=>c});var i=n(74848),a=n(16522),s=n(96540),r=n(21373),l=n(34164),o=n(48505),d=n(18373);function c(e){let t,n,c,u,m,h,f,p,g,y,x=(0,a.c)(21),{automatedComment:v,isButtonDisabled:b,dismissError:j,onDismiss:w,onReopen:C,className:_}=e,[N,S]=(0,s.useState)(!1),{isDismissable:I,isReopenable:k,resourceName:L,toggleButtonLabel:D}=(h=(0,a.c)(6),p=!(f=v.isDismissed),g="alert",v.source===o.vk.CodeQuality&&(g="finding"),y=f?`Reopen ${g}`:`Dismiss ${g}`,h[0]!==p||h[1]!==f||h[2]!==f||h[3]!==g||h[4]!==y?(m={isDismissed:f,isDismissable:p,isReopenable:f,resourceName:g,toggleButtonLabel:y},h[0]=p,h[1]=f,h[2]=f,h[3]=g,h[4]=y,h[5]=m):m=h[5],m),T=b||!v.viewerCanDismiss,E=b||!v.viewerCanReopen;return x[0]!==v||x[1]!==N||x[2]!==j||x[3]!==w?(t=N&&(0,i.jsx)(d.U,{setOpen:S,count:1,error:j,dismissalOptions:v.dismissalOptions,onSubmit:e=>{let{resolution:t,dismissalComment:n}=e;return w({reason:t,resolutionNote:n},{onSuccess:()=>S(!1)})},delegatedAlertDismissalEnabled:!1,codeSecurity:v.source===o.vk.CodeScanning}),x[0]=v,x[1]=N,x[2]=j,x[3]=w,x[4]=t):t=x[4],x[5]!==_||x[6]!==T||x[7]!==I||x[8]!==L||x[9]!==D?(n=I&&(0,i.jsxs)("div",{className:(0,l.$)("d-flex flex-items-center flex-wrap",_),children:[(0,i.jsx)(r.Q,{"aria-label":D,className:"mr-2",onClick:()=>S(!0),disabled:T,children:D}),(0,i.jsxs)("span",{className:"fgColor-muted f6",children:["Dismissing the ",L," will mark this conversation as resolved."]})]}),x[5]=_,x[6]=T,x[7]=I,x[8]=L,x[9]=D,x[10]=n):n=x[10],x[11]!==_||x[12]!==E||x[13]!==k||x[14]!==C||x[15]!==D?(c=k&&(0,i.jsx)("div",{className:(0,l.$)("d-flex flex-items-center flex-wrap",_),children:(0,i.jsx)(r.Q,{"aria-label":D,onClick:C,disabled:E,children:D})}),x[11]=_,x[12]=E,x[13]=k,x[14]=C,x[15]=D,x[16]=c):c=x[16],x[17]!==t||x[18]!==n||x[19]!==c?(u=(0,i.jsxs)(i.Fragment,{children:[t,n,c]}),x[17]=t,x[18]=n,x[19]=c,x[20]=u):u=x[20],u}try{c.displayName||(c.displayName="BaseAutomatedReviewCommentActions")}catch{}},74156:(e,t,n)=>{n.d(t,{N:()=>nF});var i,a,s=n(16522),r=n(57944),l=n(50467),o=n(74848),d=n(59432),c=n(11680),u=n(38621);function m(e){let t,n,i,a=(0,s.c)(12),{headSha:r,basePath:l,isSessionRunning:m,isSessionReadonly:h,agentDisplayName:f}=e,p=void 0===f?"Agent":f;a[0]!==p||a[1]!==h||a[2]!==m?(t=m&&(0,o.jsx)(c.l,{variant:"info",title:`${p} is working`,description:h?`${p} code review in progress.`:`${p} is still working. Changes will automatically appear once they have been committed to the branch.`,hideTitle:!0,icon:(0,o.jsx)(u.InfoIcon,{}),className:"PullRequestFilesChangedPreview-module__banner--KQCNJ"}),a[0]=p,a[1]=h,a[2]=m,a[3]=t):t=a[3];let g=!h;return a[4]!==l||a[5]!==r||a[6]!==h||a[7]!==g?(n=(0,o.jsx)(d.b.Container,{children:(0,o.jsx)(d.b.Viewer,{headSha:r,basePath:l,forceUnifiedView:!0,treeEnableInlineCompactMode:!0,useFileTree:!0,useBasicToolbar:!0,useInlineComments:h,userCanComment:g},l)}),a[4]=l,a[5]=r,a[6]=h,a[7]=g,a[8]=n):n=a[8],a[9]!==t||a[10]!==n?(i=(0,o.jsxs)("div",{className:"PullRequestFilesChangedPreview-module__container--mKeOB",children:[t,n]}),a[9]=t,a[10]=n,a[11]=i):i=a[11],i}try{m.displayName||(m.displayName="PullRequestFilesChangedPreview")}catch{}function h(e){let t,n=(0,s.c)(6),{reference:i}=e,{headSha:a,basePath:r,isSessionRunning:l,isSessionReadonly:d,agentDisplayName:c}=i;return n[0]!==c||n[1]!==r||n[2]!==a||n[3]!==d||n[4]!==l?(t=(0,o.jsx)(m,{headSha:a,basePath:r,isSessionRunning:l,isSessionReadonly:d,agentDisplayName:c}),n[0]=c,n[1]=r,n[2]=a,n[3]=d,n[4]=l,n[5]=t):t=n[5],t}try{h.displayName||(h.displayName="PullRequestFilesChangedPluginPreview")}catch{}var f=n(70840),p=n(39837),g=n(35247),y=n(77430),x=n(62935),v=n(84268),b=n(72579),j=n(16051),w=n(81960),C=n(98755),_=n(99896),N=n(10422),S=n(96540),I=n(25407),k=n(96379);let L="PullRequestOverviewPreview-module__sessionStatusWrapper--TEpIE",D="PullRequestOverviewPreview-module__separator--EAqT5",T="PullRequestOverviewPreview-module__summaryHeader--KeZPa",E="PullRequestOverviewPreview-module__summaryMetadata--R418e",A="PullRequestOverviewPreview-module__modelDisplay--HH7SO",R="PullRequestOverviewPreview-module__modelIcon--NuGXS";function O(e){let t,n,i,a,r,l,d,c,u=(0,s.c)(22),{headSha:m,repositoryNwo:h,commitAliveChannel:f}=e;u[0]!==h?(t=h?.split("/")??[],u[0]=h,u[1]=t):t=u[1];let[p,g]=t,y=void 0===p?"":p,x=void 0===g?"":g;u[2]!==x||u[3]!==y?(n={ownerLogin:y,name:x},u[2]=x,u[3]=y,u[4]=n):n=u[4];let[v,b]=function(e,t){let n,i,a=(0,s.c)(6),[r,l]=(0,S.useState)();a[0]!==e||a[1]!==t?(n=async()=>{if(!e||!t)return void l(void 0);let n=(0,I.vki)(t,e),i=await (0,k.lS)(n);i.ok&&l(await i.json())},a[0]=e,a[1]=t,a[2]=n):n=a[2];let o=n;return a[3]!==r||a[4]!==o?(i=[r,o],a[3]=r,a[4]=o,a[5]=i):i=a[5],i}(m,n);u[5]!==f?(i={stateChannel:f,deployedChannel:null,reviewStateChannel:null,workflowsChannel:null,mergeQueueChannel:null,headRefChannel:null,baseRefChannel:null,gitMergeStateChannel:null,pullRequestChannel:null},u[5]=f,u[6]=i):i=u[6];let j=i;if(u[7]!==j||u[8]!==b?(a={channels:j,refetchQuery:b},u[7]=j,u[8]=b,u[9]=a):a=u[9],(0,N.cY)(a),u[10]!==b||u[11]!==m||u[12]!==h?(r=()=>{m&&h&&b()},l=[m,h,b],u[10]=b,u[11]=m,u[12]=h,u[13]=r,u[14]=l):(r=u[13],l=u[14]),(0,S.useEffect)(r,l),!m||!h||!v||0===v.checkRuns.length)return null;u[15]!==v?(d=()=>{if(!v?.checkRuns)return"";let e=v.checkRuns.length,t=v.checkRuns.filter(P).length;return`${t}/${e}`},u[15]=v,u[16]=d):d=u[16];let w=d,C=function(e){switch(e){case"SUCCEEDED":return"success";case"FAILED":case"UNSUCCESSFUL":return"failure";default:return"pending"}}(v?.checksHeaderState||""),L=w();return u[17]!==v||u[18]!==b||u[19]!==C||u[20]!==L?(c=(0,o.jsx)("span",{className:"PullRequestOverviewPreview-module__checksButton--yqdFS",children:(0,o.jsx)(_.B6,{statusRollup:C,combinedStatus:v,onWillOpenPopup:b,size:"small",variant:"default",descriptionText:L})}),u[17]=v,u[18]=b,u[19]=C,u[20]=L,u[21]=c):c=u[21],c}function P(e){return"success"===e.state}try{O.displayName||(O.displayName="ChecksStatusButton")}catch{}var F=n(88984),M=n(55127),$=n.n(M),B=n(69599);function V(e){let t,n,i,a,r,l,d,c,m,h,_,N,S,I,k,P,M,V,U,q,H,G=(0,s.c)(64),{title:K,number:W,body:z,bodyHTML:Q,repositoryNwo:Z,baseRef:J,headRef:Y,headSha:X,sessionState:ee,sessionUpdatedAt:et,sessionCount:en,premiumRequestCount:ei,selectedModel:ea,isSingleSessionView:es,commitAliveChannel:er,isCopilotCodingAgent:el}=e;G[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,B.G7)("mission_control_use_body_html"),G[0]=t):t=G[0];let eo=t;G[1]!==ee?(n=()=>{if(!ee)return null;switch(ee){case"completed":return(0,o.jsx)(u.CheckCircleFillIcon,{className:"PullRequestOverviewPreview-module__iconCompleted--XBgZD",size:16});case"failed":case"timed_out":return(0,o.jsx)(u.XCircleFillIcon,{className:"PullRequestOverviewPreview-module__iconFailed--bZUms",size:16});case"in_progress":return(0,o.jsx)(F.w,{});default:return null}},G[1]=ee,G[2]=n):n=G[2];let ed=n;G[3]!==ee||G[4]!==et?(i=()=>(0,o.jsxs)("span",{className:L,children:["completed"===ee&&(0,o.jsx)("span",{children:"Completed"}),"failed"===ee&&(0,o.jsx)("span",{children:"Failed"}),"timed_out"===ee&&(0,o.jsx)("span",{children:"Timed out"}),"in_progress"===ee&&(0,o.jsx)("span",{children:"Started"}),et&&(0,o.jsx)(x.A,{date:new Date(et),tense:"past"})]}),G[3]=ee,G[4]=et,G[5]=i):i=G[5];let ec=i;G[6]!==J||G[7]!==Y||G[8]!==Z?(a=()=>(0,o.jsxs)(o.Fragment,{children:[Z&&(0,o.jsx)(v.A,{href:`/${Z}`,className:"PullRequestOverviewPreview-module__repositoryName--O0p8d",children:Z}),J&&Y&&(0,o.jsxs)("span",{className:"PullRequestOverviewPreview-module__branchWrapper--IIzXz",children:[(0,o.jsxs)("span",{className:"PullRequestOverviewPreview-module__branchComparison--QaaJZ",children:[(0,o.jsx)(b.A,{href:`/${Z}/tree/${J}`,children:J}),(0,o.jsx)(u.ArrowLeftIcon,{}),(0,o.jsx)(b.A,{href:`/${Z}/tree/${Y}`,children:Y})]}),(0,o.jsx)("span",{className:"PullRequestOverviewPreview-module__copyButtonWrapper--LAwSf",children:(0,o.jsx)(C.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:Y})})]})]}),G[6]=J,G[7]=Y,G[8]=Z,G[9]=a):a=G[9];let eu=a;G[10]!==K?(r=(0,o.jsx)("span",{children:K}),G[10]=K,G[11]=r):r=G[11];let em=`/${Z}/pull/${W}`;G[12]!==W||G[13]!==em?(l=(0,o.jsxs)(v.A,{className:"PullRequestOverviewPreview-module__pullNumber--LvQ2Y",href:em,children:["#",W]}),G[12]=W,G[13]=em,G[14]=l):l=G[14],G[15]!==r||G[16]!==l?(d=(0,o.jsx)(j.z.TitleArea,{children:(0,o.jsx)(j.z.Title,{className:"PullRequestOverviewPreview-module__titleContainer--lTxTc",as:"h1",children:(0,o.jsxs)("span",{children:[r," ",l]})})}),G[15]=r,G[16]=l,G[17]=d):d=G[17],G[18]!==ed?(c=ed(),G[18]=ed,G[19]=c):c=G[19],G[20]!==ec?(m=ec(),G[20]=ec,G[21]=m):m=G[21],G[22]!==m||G[23]!==c?(h=(0,o.jsxs)("span",{className:L,children:[c,m]}),G[22]=m,G[23]=c,G[24]=h):h=G[24],G[25]!==Z||G[26]!==et?(_=et&&Z&&(0,o.jsx)("span",{className:D,children:" \xb7 "}),G[25]=Z,G[26]=et,G[27]=_):_=G[27],G[28]!==eu?(N=eu(),G[28]=eu,G[29]=N):N=G[29];let eh=X||"",ef=Z||"";G[30]!==er||G[31]!==eh||G[32]!==ef?(S=(0,o.jsx)(O,{headSha:eh,repositoryNwo:ef,commitAliveChannel:er}),G[30]=er,G[31]=eh,G[32]=ef,G[33]=S):S=G[33],G[34]!==h||G[35]!==_||G[36]!==N||G[37]!==S?(I=(0,o.jsx)(j.z.Description,{children:(0,o.jsxs)("div",{className:"PullRequestOverviewPreview-module__sessionStatus--Wu0ff",children:[h,_,N,S]})}),G[34]=h,G[35]=_,G[36]=N,G[37]=S,G[38]=I):I=G[38],G[39]!==I||G[40]!==d?(k=(0,o.jsxs)(j.z,{children:[d,I]}),G[39]=I,G[40]=d,G[41]=k):k=G[41];let ep=g.W.codingAgentModelSelection?!es&&ei>0&&void 0!==en&&en>0?T:"PullRequestOverviewPreview-module__summaryHeaderModelOnly--KXbJj":T;return G[42]===Symbol.for("react.memo_cache_sentinel")?(P=(0,o.jsx)(w.A,{as:"h2",className:"PullRequestOverviewPreview-module__summaryHeading--xI39Z",children:"Summary"}),G[42]=P):P=G[42],G[43]!==el||G[44]!==es||G[45]!==ei||G[46]!==ea||G[47]!==en||G[48]!==et?(M=g.W.codingAgentModelSelection&&el?!es&&ei>0&&void 0!==en&&en>0?(0,o.jsxs)("div",{className:E,children:[ea&&(0,o.jsxs)("span",{className:A,children:[ea.logoURL?(0,o.jsx)(y.r,{alt:`${ea.vendor} logo`,square:!0,size:18,src:ea.logoURL,className:R}):(0,o.jsx)(u.CopilotIcon,{className:R}),(0,o.jsx)("span",{children:ea.displayName})]}),(0,o.jsxs)("span",{children:[ea&&(0,o.jsx)("span",{className:D,children:" \xb7 "}),en," ",$()("session",en)]}),ei&&(0,o.jsxs)("span",{children:[(0,o.jsx)("span",{className:D,children:" \xb7 "}),ei," premium ",$()("request",ei)]}),et&&(0,o.jsxs)("span",{children:[(0,o.jsx)("span",{className:D,children:" \xb7 "}),"Last updated ",(0,o.jsx)(x.A,{date:new Date(et),tense:"past"})]})]}):(0,o.jsx)("div",{className:E,children:ea&&(0,o.jsxs)("span",{className:A,children:[ea.logoURL?(0,o.jsx)(y.r,{alt:`${ea.vendor} logo`,square:!0,size:18,src:ea.logoURL,className:R}):(0,o.jsx)(u.CopilotIcon,{className:R}),(0,o.jsx)("span",{children:ea.displayName})]})}):(0,o.jsx)("div",{className:E,children:!es&&ei>0&&void 0!==en&&en>0&&(0,o.jsxs)(o.Fragment,{children:[en," ",$()("session",en),ei&&(0,o.jsxs)("span",{children:[" ","\xb7 ",ei," premium ",$()("request",ei)]}),et&&(0,o.jsxs)("span",{children:[" ","\xb7 Last updated ",(0,o.jsx)(x.A,{date:new Date(et),tense:"past"})]})]})}),G[43]=el,G[44]=es,G[45]=ei,G[46]=ea,G[47]=en,G[48]=et,G[49]=M):M=G[49],G[50]!==ep||G[51]!==M?(V=(0,o.jsxs)("div",{className:ep,children:[P,M]}),G[50]=ep,G[51]=M,G[52]=V):V=G[52],G[53]!==z||G[54]!==Q||G[55]!==W||G[56]!==Z?(U=(0,o.jsx)("div",{className:"PullRequestOverviewPreview-module__summaryContent--YREy7",children:eo&&Q?(0,o.jsx)("div",{className:"PullRequestOverviewPreview-module__markdownBody--BLhsD",children:(0,o.jsx)(p.A,{verifiedHTML:Q})}):z?(0,o.jsx)(f.G,{content:{value:z,name:`pull-request-${W}-${Z}.md`},hideHeadingAnchors:!0,fallbackToRaw:!0,useLoadingSkeletonWithOptions:[{size:"bodyMedium",lines:3},{size:"titleLarge",lines:1},{size:"bodyMedium",lines:8}]}):(0,o.jsx)("p",{className:"PullRequestOverviewPreview-module__emptyDescription--X5Q_t",children:"No description provided."})}),G[53]=z,G[54]=Q,G[55]=W,G[56]=Z,G[57]=U):U=G[57],G[58]!==V||G[59]!==U?(q=(0,o.jsxs)("div",{className:"PullRequestOverviewPreview-module__summaryBox--S2PyJ",children:[V,U]}),G[58]=V,G[59]=U,G[60]=q):q=G[60],G[61]!==k||G[62]!==q?(H=(0,o.jsxs)("div",{className:"PullRequestOverviewPreview-module__container--BrFOa",children:[k,q]}),G[61]=k,G[62]=q,G[63]=H):H=G[63],H}try{V.displayName||(V.displayName="PullRequestOverviewPreview")}catch{}function U(e){let t,n=(0,s.c)(2),{reference:i}=e;return"pr-overview"!==i.type?null:(n[0]!==i?(t=(0,o.jsx)(V,{...i}),n[0]=i,n[1]=t):t=n[1],t)}try{U.displayName||(U.displayName="PullRequestOverviewPluginPreview")}catch{}var q=n(76143),H=n(33592),G=n(1747),K=n(21502),W=n(42312),z=n(27912),Q=n(3433),Z=n(76977),J=n(86101),Y=n(78223),X=n(46251),ee=n(53419),et=n(26108);function en(e){let t,n=(0,s.c)(4),{isContentPreviewOpen:i,openPreviewPane:a}=e,r=(0,W.U)();return n[0]!==r||n[1]!==i||n[2]!==a?(t=!i&&(0,o.jsx)(et.K,{icon:u.SidebarExpandIcon,"aria-label":"Open workbench",size:"small",onClick:()=>{a(),(0,ee.BI)("dotcom_chat.activate",{target:"OPEN_PREVIEW_PANE_BUTTON",mode:"immersive",context:"agent_sessions"})},ref:r}),n[0]=r,n[1]=i,n[2]=a,n[3]=t):t=n[3],t}try{en.displayName||(en.displayName="PreviewPaneButton")}catch{}var ei=n(77180),ea=n(4007),es=n(32870),er=n(94236),el=n(5524),eo=n(99223),ed=n(13107),ec=n(2635);function eu(e){let t,n,i,a,r,l,d,c,m,h,f,p,g,y,x,v,b,j,w,C,_,N,I,k,L,D=(0,s.c)(57),{pull:T}=e;D[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,B.G7)("open_agent_session_in_vscode_insiders"),D[0]=t):t=D[0];let E=t;D[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,B.G7)("open_agent_session_in_vscode_stable"),D[1]=n):n=D[1];let A=n;D[2]!==T.global_relay_id||D[3]!==T.head_ref_name||D[4]!==T.repository_nwo?(i=(0,ei.UU)(T.repository_nwo,T.global_relay_id,T.head_ref_name),D[2]=T.global_relay_id,D[3]=T.head_ref_name,D[4]=T.repository_nwo,D[5]=i):i=D[5];let R=i;D[6]!==T.global_relay_id||D[7]!==T.head_ref_name||D[8]!==T.repository_nwo?(a=(0,ei.PZ)(T.repository_nwo,T.global_relay_id,T.head_ref_name),D[6]=T.global_relay_id,D[7]=T.head_ref_name,D[8]=T.repository_nwo,D[9]=a):a=D[9];let O=a;D[10]!==T.number||D[11]!==T.repository_nwo?(r=(0,ei.NI)(T.repository_nwo,T.number),D[10]=T.number,D[11]=T.repository_nwo,D[12]=r):r=D[12];let P=r;D[13]!==T.head_ref_name||D[14]!==T.repository_id?(l=(0,ei.U6)(T.repository_id,T.head_ref_name),D[13]=T.head_ref_name,D[14]=T.repository_id,D[15]=l):l=D[15];let F=l,{openFeedback:M,FeedbackDialog:$}=(0,es.f)(),V=(0,ec.A3)("optedInToUserFeedback"),U=(0,S.useRef)(null);D[16]!==M?(d=()=>M(),D[16]=M,D[17]=d):d=D[17];let q=d;D[18]!==T.url?(c=()=>{window.open(T.url,"_blank")},D[18]=T.url,D[19]=c):c=D[19];let H=c;D[20]===Symbol.for("react.memo_cache_sentinel")?(m=(0,eo.k)(),D[20]=m):m=D[20];let G=m;D[21]!==T.head_ref_name||D[22]!==T.repository_id?(h=(0,ed.QS)(T.repository_id,T.head_ref_name),D[21]=T.head_ref_name,D[22]=T.repository_id,D[23]=h):h=D[23];let K=!!h&&!G;return D[24]===Symbol.for("react.memo_cache_sentinel")?(f=(0,o.jsx)(er.W.Anchor,{children:(0,o.jsx)(et.K,{icon:u.KebabHorizontalIcon,variant:"invisible","aria-label":"More options",size:"small"})}),D[24]=f):f=D[24],D[25]===Symbol.for("react.memo_cache_sentinel")?(p=(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.GitPullRequestIcon,{})}),D[25]=p):p=D[25],D[26]!==H?(g=(0,o.jsxs)(el.l.Item,{onSelect:H,children:[p,"View pull request"]}),D[26]=H,D[27]=g):g=D[27],D[28]!==q||D[29]!==V?(y=V&&(0,o.jsxs)(el.l.Item,{onSelect:q,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.CommentIcon,{})}),"Give feedback"]}),D[28]=q,D[29]=V,D[30]=y):y=D[30],D[31]===Symbol.for("react.memo_cache_sentinel")?(x=(0,o.jsx)(el.l.Divider,{}),D[31]=x):x=D[31],D[32]===Symbol.for("react.memo_cache_sentinel")?(v=(0,o.jsx)(el.l.GroupHeading,{children:"Open in"}),D[32]=v):v=D[32],D[33]!==R?(b=A&&(0,o.jsxs)(el.l.Item,{onSelect:R,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.VscodeIcon,{})}),"Open in VS Code"]}),D[33]=R,D[34]=b):b=D[34],D[35]!==O?(j=E&&(0,o.jsxs)(el.l.Item,{onSelect:O,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.VscodeIcon,{})}),"Open in VS Code Insiders"]}),D[35]=O,D[36]=j):j=D[36],D[37]===Symbol.for("react.memo_cache_sentinel")?(w=(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.DesktopDownloadIcon,{})}),D[37]=w):w=D[37],D[38]!==P?(C=(0,o.jsxs)(el.l.Item,{onSelect:P,children:[w,"Checkout with GitHub Desktop"]}),D[38]=P,D[39]=C):C=D[39],D[40]!==F||D[41]!==K?(_=K&&(0,o.jsxs)(el.l.Item,{onSelect:F,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.TerminalIcon,{})}),"Open in Codespaces"]}),D[40]=F,D[41]=K,D[42]=_):_=D[42],D[43]!==b||D[44]!==j||D[45]!==C||D[46]!==_?(N=(0,o.jsxs)(el.l.Group,{children:[v,b,j,C,_]}),D[43]=b,D[44]=j,D[45]=C,D[46]=_,D[47]=N):N=D[47],D[48]!==g||D[49]!==y||D[50]!==N?(I=(0,o.jsxs)(er.W,{anchorRef:U,children:[f,(0,o.jsx)(er.W.Overlay,{align:"end",children:(0,o.jsxs)(el.l,{children:[g,y,x,N]})})]}),D[48]=g,D[49]=y,D[50]=N,D[51]=I):I=D[51],D[52]!==$?(k=(0,o.jsx)($,{returnFocusRef:U}),D[52]=$,D[53]=k):k=D[53],D[54]!==I||D[55]!==k?(L=(0,o.jsxs)(o.Fragment,{children:[I,k]}),D[54]=I,D[55]=k,D[56]=L):L=D[56],L}try{eu.displayName||(eu.displayName="TaskHeaderMobileMenu")}catch{}var em=n(50129),eh=n(79684);function ef(e){let t,n,i=(0,s.c)(4),{pull:a}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(eh.B.Item,{href:"/copilot/agents",children:"Agents"}),i[0]=t):t=i[0];let r=!a,l=a?.title;return i[1]!==r||i[2]!==l?(n=(0,o.jsxs)(eh.B,{children:[t,(0,o.jsx)(eh.B.Item,{loading:r,children:l})]}),i[1]=r,i[2]=l,i[3]=n):n=i[3],n}try{ef.displayName||(ef.displayName="TaskBreadcrumbs")}catch{}var ep=n(34164);function eg(e){let t,n,i,a,r,l,d,c=(0,s.c)(19),{pull:u,session:m,isContentPreviewOpen:h,openPreviewPane:f}=e,p=`/${u?.repository_nwo}/pull/${u?.number}`,g=(0,ec.A3)("optedInToUserFeedback");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,ep.$)("TaskHeader-module__container--mszgP"),c[0]=t):t=c[0],c[1]!==u?(n=(0,o.jsx)("div",{className:"TaskHeader-module__leftControls--gPjSp",children:(0,o.jsx)(ef,{pull:u})}),c[1]=u,c[2]=n):n=c[2],c[3]!==g||c[4]!==u||c[5]!==m?(i=u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"TaskHeader-module__desktopButtons--bONYA",children:[g&&(0,o.jsx)(es.O,{sessionId:m?.id}),(0,o.jsx)(ei.FS,{pull:u,session:m}),(0,o.jsx)(ea.N,{pullUrl:u.url,taskId:u.global_relay_id,repoNwo:u.repository_nwo})]}),(0,o.jsx)("div",{className:"TaskHeader-module__mobileMenu--CAeut",children:(0,o.jsx)(eu,{pull:u})})]}),c[3]=g,c[4]=u,c[5]=m,c[6]=i):i=c[6],c[7]!==h||c[8]!==f?(a=(0,o.jsx)(en,{isContentPreviewOpen:h,openPreviewPane:f}),c[7]=h,c[8]=f,c[9]=a):a=c[9],c[10]!==i||c[11]!==a?(r=(0,o.jsx)("div",{className:"TaskHeader-module__rightControls--ujKcE",children:(0,o.jsxs)(X.B,{direction:"horizontal",align:"center",gap:"condensed",children:[i,a]})}),c[10]=i,c[11]=a,c[12]=r):r=c[12],c[13]!==n||c[14]!==r?(l=(0,o.jsxs)("div",{className:t,children:[n,r]}),c[13]=n,c[14]=r,c[15]=l):l=c[15],c[16]!==p||c[17]!==l?(d=(0,o.jsx)(em.Kg,{basePageDataUrl:p,children:l}),c[16]=p,c[17]=l,c[18]=d):d=c[18],d}try{eg.displayName||(eg.displayName="TaskHeader")}catch{}var ey=n(81453),ex=n(51213),ev=n(79196),eb=n(7812),ej=n(57478),ew=n(97189),eC=n(13038),e_=n(32051),eN=n(89466),eS=n(40235),eI=n(74022),ek=n(86476),eL=n(34001),eD=n(67154),eT=n(86296),eE=n(72259),eA=n(49806);function eR(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(ew.Fn,{children:(0,o.jsx)(G.BH,{children:(0,o.jsx)(eO,{})})}),t[0]=e):e=t[0],e}function eO(){var e;let t,n,i,a,r,l,d,c,m,h,f,p,y,x,v,b,j,w,C,_,N,I,k,L,D,T,E,A,R,O,P,F,M,$,B,V=(0,s.c)(107),{data:U}=(0,eN.J)();V[0]!==U?(t=void 0===U?{}:U,V[0]=U,V[1]=t):t=V[1];let{pull:X,sessions:ee,sessionsPollingInterval:et,currentUser:en}=t,ei=X?.id??0,ea=et??0;V[2]!==ee||V[3]!==ei||V[4]!==ea?(n={pullId:ei,initialData:ee,sessionsPollingInterval:ea},V[2]=ee,V[3]=ei,V[4]=ea,V[5]=n):n=V[5];let{data:es}=(0,eL.t)(n),er=(0,G.tZ)(),{openPreviewPane:el,closePreviewPane:eo,openItem:ed,closeItem:ec,updateItem:eu,allOpenItems:em}=(0,G.xx)(),[eh]=(0,Q.ok)(),ef=em?.length??0,{isNarrowViewport:ep}=(0,K.B)(),ew=!!es?.length;V[6]!==eh?(i=eh.get("session_id"),V[6]=eh,V[7]=i):i=V[7];let eD=!!i;V[8]!==es?(a=es?.toSorted(eB)[0],V[8]=es,V[9]=a):a=V[9];let eR=a,eO=es?.length??0;V[10]!==es?(r=es?.reduce(e$,0)||0,V[10]=es,V[11]=r):r=V[11];let eV=r,eU=!!(en&&en?.id===es?.[0]?.user_id);V[12]!==es?(l=es?.some(eM)??!1,V[12]=es,V[13]=l):l=V[13];let eq=l;V[14]!==es?(d=es?.every(eF)??!1,V[14]=es,V[15]=d):d=V[15];let eH=d,eG=(0,H.b)(),{models:eK}=(0,eE.h)(),eW=g.W.codingAgentModelSelection?eK:void 0,ez=(0,W.U)();V[16]!==es?(c=es?.find(eP),V[16]=es,V[17]=c):c=V[17];let eQ=c??es?.[0],{data:eZ}=(0,J.B)(eQ?.agent_id??null),eJ=eZ?.display_name,eY=eZ?.slug;V[18]!==eY?(m=(0,Y.sS)(eY),V[18]=eY,V[19]=m):m=V[19];let eX=m,e0=X?.id||0,e1=!!X?.id;V[20]!==X||V[21]!==e0||V[22]!==e1?(h={pullRequestId:e0,includeBody:!1,initialData:X,enabled:e1},V[20]=X,V[21]=e0,V[22]=e1,V[23]=h):h=V[23];let{data:e2,refetchBody:e3,refetchPullRequest:e4}=(0,ek.Y)(h);e=e2?.aliveChannel,(F=(0,s.c)(7))[0]!==e4?(R=(0,eI.A)(e4,2e3,{leading:!1,trailing:!0}),F[0]=e4,F[1]=R):R=F[1],M=R,F[2]!==e3?(O=(0,eI.A)(e3,2e3,{leading:!1,trailing:!0}),F[2]=e3,F[3]=O):O=F[3],$=O,F[4]!==$||F[5]!==M?(P=e=>{(e.event_updates?.git_updated||e.event_updates?.title_updated)&&M(),e.event_updates?.body_updated&&$()},F[4]=$,F[5]=M,F[6]=P):P=F[6],B=P,(0,eS.x)(e,B),V[24]===Symbol.for("react.memo_cache_sentinel")?(f=new Set,V[24]=f):f=V[24];let e5=(0,S.useRef)(f),e6=(0,S.useRef)(void 0),e7=(0,S.useRef)(void 0);V[25]!==ef?(p=()=>{0===ef&&e5.current.clear()},y=[ef],V[25]=ef,V[26]=p,V[27]=y):(p=V[26],y=V[27]),(0,S.useEffect)(p,y),V[28]!==eJ||V[29]!==em||V[30]!==eW||V[31]!==ec||V[32]!==eU||V[33]!==eH||V[34]!==e2||V[35]!==eD||V[36]!==eq||V[37]!==eX||V[38]!==ep||V[39]!==eR?.last_updated_at||V[40]!==eR?.model||V[41]!==eR?.state||V[42]!==ed||V[43]!==el||V[44]!==eV||V[45]!==X||V[46]!==eO||V[47]!==eu?(x=()=>{if(!e2)return;void 0!==e2.id&&void 0!==e6.current&&e6.current!==e2.id&&(e5.current.clear(),e7.current=void 0),e6.current=e2?.id;let e=e2.changed_files??0,t=e2.head_sha,n=eO>0&&e>0,i=eR?.model,a=i&&eW?eW.find(e=>e.id===(0,eA.H)(i)):void 0,s={...(0,eb.Bx)({body:e2?.body??"",bodyHTML:e2?.body_html,title:e2.title,number:e2.number,type:"pr-overview",repositoryNwo:e2.repository_nwo,baseRef:e2.base_ref_name,headRef:e2.head_ref_name,headSha:t,sessionState:eR?.state,sessionUpdatedAt:eR?.last_updated_at,sessionCount:eO,premiumRequestCount:eV,selectedModel:a,isSingleSessionView:!eU,commitAliveChannel:e2.commit_alive_channel,isCopilotCodingAgent:eX},ex.Wp),disableCloseButton:!0,icon:u.NoteIcon},r=X&&n?{...(0,eb.Bx)({type:"pr-files-changed",headSha:t,basePath:`/${e2.repository_nwo}/pull/${e2.number}`,isSessionRunning:eq,isSessionReadonly:eH,agentDisplayName:eJ},ex.Wp),disableCloseButton:!0,trailingComponent:(0,o.jsx)(ej.A,{children:e}),icon:u.FileIcon}:null;for(let e of(eu(s),r&&eu(r),em))e.includes("pr-files-changed:")&&!n&&ec(e);let l=em.includes(s.id),d=r&&em.includes(r.id),c=!e5.current.has(s.id)&&!l,m=r&&!e5.current.has(r.id)&&!d;c&&(ed(s.id,!eD),ep||el()),m&&(ed(r.id,eD),eD&&!ep&&el()),e5.current.add(s.id),r&&e5.current.add(r.id)},V[28]=eJ,V[29]=em,V[30]=eW,V[31]=ec,V[32]=eU,V[33]=eH,V[34]=e2,V[35]=eD,V[36]=eq,V[37]=eX,V[38]=ep,V[39]=eR?.last_updated_at,V[40]=eR?.model,V[41]=eR?.state,V[42]=ed,V[43]=el,V[44]=eV,V[45]=X,V[46]=eO,V[47]=eu,V[48]=x):x=V[48];let e8=eR?.state,e9=eR?.last_updated_at,te=eR?.model;V[49]!==eJ||V[50]!==em||V[51]!==eW||V[52]!==ec||V[53]!==eo||V[54]!==eU||V[55]!==eH||V[56]!==e2||V[57]!==eD||V[58]!==eq||V[59]!==eX||V[60]!==ep||V[61]!==ed||V[62]!==ef||V[63]!==el||V[64]!==eV||V[65]!==X||V[66]!==eO||V[67]!==e8||V[68]!==e9||V[69]!==te||V[70]!==eu?(v=[e2,eu,ed,ec,el,eo,eD,X,ef,e8,e9,te,eO,eV,em,ep,eU,eq,eH,eW,eJ,eX],V[49]=eJ,V[50]=em,V[51]=eW,V[52]=ec,V[53]=eo,V[54]=eU,V[55]=eH,V[56]=e2,V[57]=eD,V[58]=eq,V[59]=eX,V[60]=ep,V[61]=ed,V[62]=ef,V[63]=el,V[64]=eV,V[65]=X,V[66]=eO,V[67]=e8,V[68]=e9,V[69]=te,V[70]=eu,V[71]=v):v=V[71],(0,S.useEffect)(x,v),V[72]!==eo||V[73]!==el?(b=e=>{e?el():eo()},V[72]=eo,V[73]=el,V[74]=b):b=V[74];let tt=b;V[75]!==e2?.title?(j=()=>{let e=e2?.title;e?(0,q.D)(`${e} \xb7 Task \xb7 GitHub Copilot`):(0,q.D)("Task \xb7 GitHub Copilot")},V[75]=e2?.title,V[76]=j):j=V[76];let tn=e2?.title;return V[77]!==tn?(w=[tn],V[77]=tn,V[78]=w):w=V[78],(0,S.useEffect)(j,w),V[79]!==eG?(C=()=>{eG.selectThread(null,{includeThreads:!1,clearTopic:!0})},_=[eG],V[79]=eG,V[80]=C,V[81]=_):(C=V[80],_=V[81]),(0,S.useEffect)(C,_),(0,Z._)(),V[82]!==er||V[83]!==tt?(N=[er,tt],V[82]=er,V[83]=tt,V[84]=N):N=V[84],V[85]!==e2||V[86]!==er||V[87]!==ew||V[88]!==eR||V[89]!==el?(I=ew&&(0,o.jsx)(z.P.Header,{children:(0,o.jsx)(eg,{pull:e2,session:eR,isContentPreviewOpen:er,openPreviewPane:el})}),V[85]=e2,V[86]=er,V[87]=ew,V[88]=eR,V[89]=el,V[90]=I):I=V[90],V[91]===Symbol.for("react.memo_cache_sentinel")?(k=(0,o.jsx)(z.P.Sidebar,{children:(0,o.jsx)(ey.U,{})}),V[91]=k):k=V[91],V[92]===Symbol.for("react.memo_cache_sentinel")?(L=(0,o.jsx)(z.P.ColumnLeft,{children:(0,o.jsx)(eT.pP,{})}),V[92]=L):L=V[92],V[93]!==ew||V[94]!==ez?(D=ew&&(0,o.jsx)(z.P.ColumnRight,{children:(0,o.jsx)(ev.U,{returnFocusRef:ez,disableActionsMenu:!0,disableResourcePanel:!0,className:"TaskView-module__contentPreview--NFDAQ"})}),V[93]=ew,V[94]=ez,V[95]=D):D=V[95],V[96]!==N||V[97]!==I||V[98]!==D?(T=(0,o.jsxs)(z.P,{mainColumn:"left","data-hpc":!0,secondaryColumnState:N,slimLineTopTabs:g.W.copilotWorkbenchSlimLineTopTabs,children:[I,k,L,D]}),V[96]=N,V[97]=I,V[98]=D,V[99]=T):T=V[99],V[100]!==e2||V[101]!==T?(E=(0,o.jsx)(e_.mE,{pull:e2,children:T}),V[100]=e2,V[101]=T,V[102]=E):E=V[102],V[103]!==en||V[104]!==eU||V[105]!==E?(A=(0,o.jsx)(eC.Q,{currentUser:en,currentUserIsSessionOwner:eU,children:E}),V[103]=en,V[104]=eU,V[105]=E,V[106]=A):A=V[106],A}function eP(e){return"in_progress"===e.state}function eF(e){return(0,eD.SS)(e)}function eM(e){return"in_progress"===e.state}function e$(e,t){return e+t.premium_requests}function eB(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()}try{eR.displayName||(eR.displayName="TaskViewWrapper")}catch{}try{eO.displayName||(eO.displayName="TaskView")}catch{}var eV=n(47723);let eU=/\/copilot\/tasks\/pull\/([a-zA-Z0-9-_]+)/;let TasksPlugin=class TasksPlugin{get previewComponents(){return{"pr-overview":U,"pr-files-changed":h}}constructor(){(0,l._)(this,"id",eV.v),(0,l._)(this,"displayName",eV.Ns),(0,l._)(this,"skipSyncRouteToThread",!0),(0,l._)(this,"components",[{id:eV.kF,Component:eR,routes:[eU]}])}};var eq=n(65411),eH=n(82590),eG=n(85094),eK=n(47970),eW=n(21373),ez=n(46665),eQ=n(46857);function eZ(e){let t,n,i,a,r,l,d,c,m,h=(0,s.c)(26),{loop:f,headerButton:p,isStreaming:g}=e,[y,x]=(0,S.useState)(!0);if(!f)return null;h[0]!==y?(t=()=>x(!y),h[0]=y,h[1]=t):t=h[1];let v=t,b=g&&"LoopBlock-module__streaming--kzTU_";h[2]!==b?(n=(0,ep.$)("LoopBlock-module__container--F3X80",b),h[2]=b,h[3]=n):n=h[3];let j=!y&&"LoopBlock-module__headerCollapsed--Yoo66";return h[4]!==j?(i=(0,ep.$)("LoopBlock-module__header--Bmyfz",j),h[4]=j,h[5]=i):i=h[5],h[6]!==y?(a=y?(0,o.jsx)(u.ChevronDownIcon,{size:16}):(0,o.jsx)(u.ChevronRightIcon,{size:16}),h[6]=y,h[7]=a):a=h[7],h[8]!==f.title?(r=(0,o.jsx)("span",{className:"LoopBlock-module__buttonText--pH2DI",children:f.title}),h[8]=f.title,h[9]=r):r=h[9],h[10]!==a||h[11]!==r||h[12]!==v?(l=(0,o.jsx)(eW.Q,{variant:"invisible",onClick:v,className:"LoopBlock-module__expandButton--kYkwN",leadingVisual:a,children:r}),h[10]=a,h[11]=r,h[12]=v,h[13]=l):l=h[13],h[14]!==p||h[15]!==i||h[16]!==l?(d=(0,o.jsxs)("div",{className:i,children:[l,p]}),h[14]=p,h[15]=i,h[16]=l,h[17]=d):d=h[17],h[18]!==y||h[19]!==g||h[20]!==f.nodes?(c=y&&(0,o.jsx)("div",{className:"LoopBlock-module__content--SQW7_",children:f.nodes.map((e,t)=>{let n=g&&t===f.nodes.length-1;return(0,o.jsxs)("div",{className:"LoopBlock-module__node--GZLd9",children:[(0,o.jsx)("div",{className:"LoopBlock-module__iconContainer--QF1t5",children:(0,o.jsx)(u.CheckCircleFillIcon,{size:16,className:"LoopBlock-module__checkIcon--_Toxw"})}),n&&!e.title?null:(0,o.jsx)("span",{className:"LoopBlock-module__nodeTitle--upYDV",children:e.title})]},e.id)})}),h[18]=y,h[19]=g,h[20]=f.nodes,h[21]=c):c=h[21],h[22]!==c||h[23]!==n||h[24]!==d?(m=(0,o.jsxs)("div",{className:n,children:[d,c]}),h[22]=c,h[23]=n,h[24]=d,h[25]=m):m=h[25],m}try{eZ.displayName||(eZ.displayName="LoopBlockContent")}catch{}var eJ=n(91348),eY=n(12465),eX=n(37510),e0=n(99993);function e1(e){let t,n,i,a,r=(0,s.c)(15),{isStreaming:l}=e,d=function(){let{message:e}=(0,ez.V)(),t=(0,eQ.O)(e);return t?.pipeline??null}(),{mutate:c}=(0,eY.P)(),{data:u}=(0,e0._N)();r[0]!==u||r[1]!==d||r[2]!==c?(t=()=>{if(!u||!d)return;let e=(0,eJ.kX)({...d,id:u.id},[]);c({loopID:u.id,updateFn:()=>e})},r[0]=u,r[1]=d,r[2]=c,r[3]=t):t=r[3];let m=t;r[4]!==l||r[5]!==u||r[6]!==d?(n=u&&!l&&!(0,eX.S)(u,d),r[4]=l,r[5]=u,r[6]=d,r[7]=n):n=r[7];let h=n;r[8]!==m||r[9]!==h?(i=h?(0,o.jsx)(eW.Q,{variant:"invisible",onClick:m,children:"Restore"}):null,r[8]=m,r[9]=h,r[10]=i):i=r[10];let f=i;return r[11]!==l||r[12]!==d||r[13]!==f?(a=(0,o.jsx)(eZ,{loop:d,headerButton:f,isStreaming:l}),r[11]=l,r[12]=d,r[13]=f,r[14]=a):a=r[14],a}try{e1.displayName||(e1.displayName="LoopBlock")}catch{}let e2="data-loop-block",e3=(0,eG.F)(e2),e4={div:(e,t)=>{let n=(0,eG.k)(e,e2);return n?(0,o.jsx)(e1,{...n}):t}};function e5(){return{transformMarkdown:e=>(0,eK.YR)(e,"code",e=>{"loop"===e.lang&&(e.data={hName:"div",hProperties:{[e3]:JSON.stringify({isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eK.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&e3 in i.properties&&n.children.splice(t,1,i)}),reactComponents:e4}}var e6=n(54908),e7=n(35750),e8=n(18150),e9=n(85242),te=n(88243),tt=n(16213),tn=n(25641),ti=n(46062),ta=new WeakMap,ts=new WeakMap,tr=new WeakMap,tl=new WeakSet,to=new WeakMap;let ChatCompletionsClient=class ChatCompletionsClient{async *getChatCompletion(e,t,n){let i=(0,ti.wv)(),a=t??i.id,s=await (0,e7._)(this,ta).getAuthToken(),r=await (0,tn.p)({basePath:(0,e7._)(this,ts),body:{messages:e,model:a,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:s,integrationId:(0,e7._)(this,to).integrationID,realIp:(0,e7._)(this,tr),signal:n});if(!r.ok){let e=await r.response?.text()??"Unknown error",t=e;try{let n=JSON.parse(e);t=n.error?.message||r.error}catch(e){}throw(0,ee.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}!n?.aborted&&r.body&&(yield*(0,te._)(this,tl,td).call(this,r.body,n))}constructor(e,t,n=""){(0,tt._)(this,tl),(0,e8._)(this,to,{get:tc,set:void 0}),(0,e8._)(this,ta,{writable:!0,value:void 0}),(0,e8._)(this,ts,{writable:!0,value:void 0}),(0,e8._)(this,tr,{writable:!0,value:void 0}),(0,e9._)(this,ts,e),(0,e9._)(this,ta,t),(0,e9._)(this,tr,n)}};async function*td(e,t){let n=new TextDecoder("utf-8"),i=e.getReader(),a="";try{for(;;){if(t?.aborted)return;let{done:e,value:s}=await i.read();if(e)break;for(a+=n.decode(s);;){if(a.startsWith("data: [DONE]"))return;let e=a.indexOf(`

`);if(-1===e)break;let t=a.slice(0,e).replace(/^data:\s+/,"");if(""===t){a=a.slice(e+2);continue}try{let e=JSON.parse(t),n=e.choices?.[0]?.delta?.content??"",i=e.model,a=e.usage?{prompt_tokens:e.usage.prompt_tokens,completion_tokens:e.usage.completion_tokens,total_tokens:e.usage.total_tokens,model:i}:void 0;(n||a)&&(yield{content:n,usage:a})}catch{}a=a.slice(e+2)}}}finally{i.releaseLock()}}function tc(){return{integrationID:"copilot-chat"}}var tu=n(21046);let tm=["SAML"],th={FORBIDDEN:["SAML error"]};function tf(e,t){var n;if("errors"in(e="errors"in(n=e)?{...n,errors:n.errors.filter(e=>!tm.includes(e.type)&&!th[e.type]?.includes(e.message))}:n)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,ee.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let n=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw(0,tu.vV)(n),(0,ee.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:n}),Error("Failed to fetch data.")}return!0}var tp=n(13647),tg=new WeakMap,ty=new WeakMap,tx=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t,n){if((0,tp.Xg)()){let n=await (0,e7._)(this,tx).executeGraphQL(e,t.loopId,t.version,t.executionId,t.nodeId);if(!n.success)throw Error(`GraphQL execution failed: ${n.error}`);if(tf(n.data))return n.data}let i={"X-Copilot-Api-Token":(await (0,e7._)(this,ty).getAuthToken()).value},a={query:e};a.loopId=t.loopId,a.version=t.version,a.executionId=t.executionId,a.nodeId=t.nodeId;let s=await (0,k.Sr)((0,e7._)(this,tg),{method:"POST",body:a,headers:i,signal:n?.signal});if(s.ok){let e=await s.json();if(tf(e,s.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e,t,n){(0,e8._)(this,tg,{writable:!0,value:void 0}),(0,e8._)(this,ty,{writable:!0,value:void 0}),(0,e8._)(this,tx,{writable:!0,value:void 0}),(0,e9._)(this,tg,e),(0,e9._)(this,ty,t),(0,e9._)(this,tx,n)}};var tv=n(26956),tb=n(30388);let tj="LoopsView-module__sectionHeader--EgQsl",tw="LoopsView-module__sectionTitle--UPWoU";var tC=n(93505),t_=n(80770),tN=n(21229),tS=n(58615),tI=n(49912),tk=n(17005),tL=n(57387),tD=n(72511),tT=n(86877),tE=n(10576),tA=n(76746),tR=n(99519),tO=n(76219);function tP({isOpen:e,onClose:t}){let[n,i]=(0,S.useState)(""),[a,s]=(0,S.useState)(!1),[r,l]=(0,S.useState)(null),d=(0,tR.EY)(),c=(0,Q.Zp)(),{availableModels:u}=(0,tO.U)(),m=(0,S.useMemo)(()=>{if(!n.trim())return{isValid:!1,errors:[]};try{let e=JSON.parse(n),t=(0,tA.v)(e,{availableModels:u});if(t.length>0)return{isValid:!1,errors:t.map(e=>e.error)};return{isValid:!0,errors:[],loop:e}}catch(e){return{isValid:!1,errors:[`Invalid JSON: ${e instanceof Error?e.message:"Syntax error"}`]}}},[n,u]),h=async()=>{if(m.isValid&&m.loop&&!a){s(!0),l(null),(0,ee.BI)("dotcom_chat.activate",{target:"CREATE_LOOP_FROM_JSON",mode:"loops"});try{let e={...m.loop,id:crypto.randomUUID(),updatedAt:Date.now(),owned:!0,visibility:"private"};await d.createLoop(e),c(`${tn.Jz}/l/${e.id}`),t()}catch(e){l(e instanceof Error?e.message:"Failed to create loop. Please try again.")}finally{s(!1)}}};return e?(0,o.jsx)(tL.l,{title:"Create loop from JSON",onClose:t,width:"large",height:"large",renderBody:()=>(0,o.jsxs)("div",{className:"CreateLoopFromJsonDialog-module__container--yEYu1",children:[r&&(0,o.jsx)(tD.A,{variant:"danger",children:r}),(0,o.jsx)("div",{className:"CreateLoopFromJsonDialog-module__header--UNUms",children:(0,o.jsx)("p",{className:"CreateLoopFromJsonDialog-module__description--vfsKH",children:"Paste a valid loop JSON object to create a new loop."})}),(0,o.jsxs)(tT.A,{className:"CreateLoopFromJsonDialog-module__formControl--vBsuV",children:[(0,o.jsx)(tT.A.Label,{visuallyHidden:!0,children:"Loop JSON"}),(0,o.jsx)(tE.Ay,{className:"CreateLoopFromJsonDialog-module__textarea--OHmSD",value:n,onChange:e=>i(e.target.value),placeholder:"Paste your loop JSON here...",resize:"none",spellCheck:!1,autoComplete:"off"}),m.errors.length>0?(0,o.jsx)(tT.A.Validation,{variant:"error",children:(0,o.jsx)("div",{children:m.errors[0]})}):m.isValid&&m.loop?(0,o.jsx)(tT.A.Validation,{variant:"success",children:"Valid loop detected!"}):(0,o.jsx)("span",{className:"CreateLoopFromJsonDialog-module__spacer--JbIGC"})]})]}),renderFooter:()=>(0,o.jsxs)(tL.l.Footer,{children:[(0,o.jsx)(eW.Q,{onClick:t,children:"Cancel"}),(0,o.jsx)(eW.Q,{onClick:h,variant:"primary",inactive:!m.isValid||a,loading:a,children:"Create loop"})]})}):null}try{tP.displayName||(tP.displayName="CreateLoopFromJsonDialog")}catch{}function tF(e){let t,n,i,a,r,l,d,c,m,h,f,p,g,y,x,v,b=(0,s.c)(28),{showExamples:j,onShowExamples:w}=e,C=void 0===j||j,_=(0,S.useRef)(null),N=(0,S.useRef)(null),[I,k]=(0,S.useState)(!1),L=(0,ec.A3)("optedInToUserFeedback");b[0]!==L?(t=L?(0,o.jsx)(eW.Q,{variant:"link",onClick:()=>{_.current?.openDialog(),(0,ee.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:"Give feedback"}):null,b[0]=L,b[1]=t):t=b[1];let D=t;return b[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(et.K,{icon:u.BookIcon,as:"a",href:"https://docs.github.com/copilot","aria-label":"Copilot Loops documentation",target:"_blank",rel:"noopener noreferrer",variant:"invisible",onClick:tB}),b[2]=n):n=b[2],b[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(er.W.Anchor,{children:(0,o.jsx)(et.K,{icon:u.KebabHorizontalIcon,"aria-label":"Menu",variant:"invisible",onClick:t$})}),b[3]=i):i=b[3],b[4]!==w||b[5]!==C?(a=!C&&w&&(0,o.jsxs)(el.l.Item,{onSelect:()=>{w(),(0,ee.BI)("dotcom_chat.activate",{target:"LOOPS_SHOW_EXAMPLES",mode:"loops"})},children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.LightBulbIcon,{})}),"Show examples"]}),b[4]=w,b[5]=C,b[6]=a):a=b[6],b[7]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{k(!0),(0,ee.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_CREATE_FROM_JSON",mode:"loops"})},b[7]=r):r=b[7],b[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsxs)(el.l.Item,{onSelect:r,children:["Create from JSON",(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.UploadIcon,{})})]}),b[8]=l):l=b[8],b[9]!==a?(d=(0,o.jsxs)(el.l.Group,{children:[a,l]}),b[9]=a,b[10]=d):d=b[10],b[11]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)(el.l.Divider,{}),b[11]=c):c=b[11],b[12]!==L?(m=L&&(0,o.jsxs)(el.l.Item,{onSelect:()=>{_.current?.openDialog(),(0,ee.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:["Give feedback",(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.CommentIcon,{})})]}),b[12]=L,b[13]=m):m=b[13],b[14]===Symbol.for("react.memo_cache_sentinel")?(h=(0,o.jsxs)(el.l.LinkItem,{href:"/settings/copilot",onClick:tM,children:[(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(u.GearIcon,{})}),"Settings"]}),b[14]=h):h=b[14],b[15]!==m?(f=(0,o.jsxs)(el.l.Group,{children:[m,h]}),b[15]=m,b[16]=f):f=b[16],b[17]!==f||b[18]!==d?(p=(0,o.jsxs)(er.W,{anchorRef:N,children:[i,(0,o.jsx)(er.W.Overlay,{width:"small",children:(0,o.jsxs)(el.l,{children:[d,c,f]})})]}),b[17]=f,b[18]=d,b[19]=p):p=b[19],b[20]===Symbol.for("react.memo_cache_sentinel")?(g=(0,o.jsx)(tk.l,{ref:_,mode:"immersive",returnFocusRef:N}),b[20]=g):g=b[20],b[21]===Symbol.for("react.memo_cache_sentinel")?(y=()=>k(!1),b[21]=y):y=b[21],b[22]!==I?(x=(0,o.jsx)(tP,{isOpen:I,onClose:y}),b[22]=I,b[23]=x):x=b[23],b[24]!==D||b[25]!==p||b[26]!==x?(v=(0,o.jsx)("div",{className:"LoopsViewHeader-module__header--miwmH",children:(0,o.jsxs)("div",{className:"LoopsViewHeader-module__rightControls--tpwkz",children:[D,n,p,g,x]})}),b[24]=D,b[25]=p,b[26]=x,b[27]=v):v=b[27],v}function tM(){return(0,ee.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"loops"})}function t$(){return(0,ee.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"loops"})}function tB(){return(0,ee.BI)("dotcom_chat.activate",{target:"LOOPS_HELP_BUTTON_CLICKED",mode:"loops"})}try{tF.displayName||(tF.displayName="LoopsViewHeader")}catch{}let tV={altText:"GitHub battle royale report",assetPath:"/images/modules/loops/BattleRoyal.png",loop:{title:"GitHub battle royale",description:"Compare two GitHub users based on their pull request contributions and metrics",nodes:[{id:"1",type:"text",title:"Start Date",description:"The date 30 days ago from today",content:"@today-30d",metadata:{inputType:"date"}},{id:"2",type:"text",title:"First Username",description:"GitHub username for the first contestant",content:"jonrohan",metadata:{inputType:"text"}},{id:"3",type:"text",title:"Second Username",description:"GitHub username for the second contestant",content:"colebemis",metadata:{inputType:"text"}},{id:"4",type:"text",title:"Repository",description:"The repository to analyze (in owner/name format)",content:"primer/react",metadata:{inputType:"text"}},{id:"5",type:"github-graphql",title:"First User PRs",description:"Fetch PRs for the first user",content:`query {
  search(query: "repo:{{4}} author:{{2}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Second User PRs",description:"Fetch PRs for the second user",content:`query {
  search(query: "repo:{{4}} author:{{3}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"7",type:"prompt",title:"Battle Analysis",description:"Compare the two users and determine a winner",content:`You're a GitHub Battle Royale announcer. Compare the following metrics between these two contestants based on their pull request data:

# Battle Royal \u{1F934}\u{1F5E1}\u{FE0F}\u{1F478}

1. Total PRs created
2. PR merge rate
3. Lines of code changed (additions + deletions)
4. Average commits per PR
5. PR velocity (PRs per month)

User 1 ({{2}}) data: {{5}}
User 2 ({{3}}) data: {{6}}

Analyze each metric and assign points (1-10) for each category. Then declare an overall winner with a dramatic announcement. Format your response as an exciting battle commentary.`}]},icon:u.FlameIcon},tU={altText:"GitHub repo feature announcement magazine",assetPath:"/images/modules/loops/NewsFlash.png",loop:{title:"Multi-Repo GitHub feature announcement magazine",description:"Creates a tabloid-style frontpage focusing on new features and enhancements across multiple GitHub repositories",nodes:[{id:"repo1",type:"text",title:"Repository 1",description:"First repository to analyze (format: owner/repo)",content:"facebook/react",metadata:{inputType:"text"}},{id:"repo2",type:"text",title:"Repository 2",description:"Second repository to analyze (format: owner/repo)",content:"microsoft/vscode",metadata:{inputType:"text"}},{id:"repo3",type:"text",title:"Repository 3",description:"Third repository to analyze (format: owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"days",type:"text",title:"Days Limit",description:"Number of days to look back for data",content:"@today-30d",metadata:{inputType:"date"}},{id:"3",type:"github-graphql",title:"Feature PRs - Repository 1",description:"Fetch recent feature/enhancement pull requests from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"Feature PRs - Repository 2",description:"Fetch recent feature/enhancement pull requests from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"github-graphql",title:"Feature PRs - Repository 3",description:"Fetch recent feature/enhancement pull requests from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Feature Requests - Repository 1",description:"Fetch recent feature request issues from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:issue label:\\"Type: Feature Request\\" created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"7",type:"github-graphql",title:"Feature Requests - Repository 2",description:"Fetch recent feature request issues from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"8",type:"github-graphql",title:"Feature Requests - Repository 3",description:"Fetch recent feature request issues from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"9",type:"text",title:"Magazine Style",description:"Define the style of the feature announcement magazine",content:`\u{2728}\u{1F4AB} \u{1F31F} OPEN SOURCE NEWS FLASH \u{1F31F} \u{1F4AB} \u{2728}
\u{1F680} BREAKING UPDATES \u{1F680} EXCLUSIVE FEATURES \u{1F3AF} HOT RELEASES \u{1F525}

Your #1 source for hot new features in your favorite open source projects! \u{1F308}`,metadata:{inputType:"text"}},{id:"10",type:"prompt",title:"Feature Magazine Content",description:"Generate tabloid-style headlines focusing on new features",content:`You are a tech magazine writer specializing in new feature announcements. Create an exciting frontpage covering the latest features and enhancements from these repositories: {{repo1}}, {{repo2}}, and {{repo3}}.

Use this data for each repository:
Repository 1:
- PRs: {{3}}
- Issues: {{6}}

Repository 2:
- PRs: {{4}}
- Issues: {{7}}

Repository 3:
- PRs: {{5}}
- Issues: {{8}}

Start with this header:
{{9}}

For each repository:
1. Create a section with an appropriate emoji
2. Include 2-3 exciting headlines about new features or requests
3. Focus on user impact and benefits
4. Include the original URLs as 'READ MORE' links
5. Mention scope of changes for PRs (additions + deletions)

End with a 'FEATURE FORECAST' section comparing the most exciting upcoming features across repositories.

Format everything in markdown and use emojis liberally.`}]},icon:u.RepoIcon},tq=[tV,{altText:"First responder activity report",assetPath:"/images/modules/loops/FirstResponder.png",loop:{title:"First responder activity report",description:"Generates a summary of a first responder's activity including new issues, PR reviews, and issue involvement from the past week",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-1w",metadata:{inputType:"date"}},{id:"repo",type:"text",title:"Repository",description:"The full repository name (e.g. owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week",content:`query {
  search(query: "repo:{{repo}} author:{{1}} is:issue created:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week",content:`query {
  search(query: "repo:{{repo}} is:pr reviewed-by:{{1}} updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week",content:`query {
  search(query: "repo:{{repo}} involves:{{1}} is:issue updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Activity Summary",description:"Summary report of the first responder's activity",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity in the {{repo}} repository over the past week. Include their issue creation, PR review activities, and issue involvement.

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers)
2. Issue Activity
   - Created Issues
   - Issue Involvement (comments, assignments)
3. PR Review Activity (highlight significant reviews)
4. Key Observations

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift.`}]},icon:u.NoteIcon},tU];var tH=n(43134);let tG=(0,S.lazy)(async()=>({default:(await Promise.all([n.e(8206),n.e(79018),n.e(55316),n.e(8316),n.e(34031),n.e(49898)]).then(n.bind(n,88027))).Loop}));try{tG.displayName||(tG.displayName="LazyLoop")}catch{}var tK=n(39768);function tW(e){let t,n,i,a,r=(0,s.c)(10),{value:l,onChange:d}=e;r[0]!==d?(t=e=>{d(0===e?"list":"output")},r[0]=d,r[1]=t):t=r[1];let c=t,m="list"===l;r[2]!==m?(n=(0,o.jsx)(tK.I.IconButton,{"aria-label":"List view",selected:m,icon:u.ThreeBarsIcon}),r[2]=m,r[3]=n):n=r[3];let h="output"===l;return r[4]!==h?(i=(0,o.jsx)(tK.I.IconButton,{"aria-label":"Output view",selected:h,icon:u.RowsIcon}),r[4]=h,r[5]=i):i=r[5],r[6]!==c||r[7]!==n||r[8]!==i?(a=(0,o.jsxs)(tK.I,{"aria-label":"Loops overview view mode",onChange:c,children:[n,i]}),r[6]=c,r[7]=n,r[8]=i,r[9]=a):a=r[9],a}try{tW.displayName||(tW.displayName="ListModeToggle")}catch{}var tz=n(90177),tQ=n(14303);function tZ(e){let t,n,i,a=(0,s.c)(14),{onDelete:r,onCopyLoop:l,onDuplicate:d,onShare:c,onEdit:m,onCopyOutput:h,loopId:f,variant:p,hasOutput:g}=e,y=void 0===p?"invisible":p,x=(0,S.useRef)(null);return f?(a[0]!==y?(t=(0,o.jsx)(er.W.Anchor,{children:(0,o.jsx)(et.K,{icon:u.KebabHorizontalIcon,"aria-label":"Manage loop",variant:y})}),a[0]=y,a[1]=t):t=a[1],a[2]!==g||a[3]!==f||a[4]!==l||a[5]!==h||a[6]!==r||a[7]!==d||a[8]!==m||a[9]!==c?(n=(0,o.jsx)(tQ.r,{onDelete:r,onCopyLoop:l,onDuplicate:d,onShare:c,onEdit:m,onCopyOutput:h,hasOutput:g,loopId:f,returnFocusRef:x}),a[2]=g,a[3]=f,a[4]=l,a[5]=h,a[6]=r,a[7]=d,a[8]=m,a[9]=c,a[10]=n):n=a[10],a[11]!==t||a[12]!==n?(i=(0,o.jsxs)(er.W,{anchorRef:x,children:[t,n]}),a[11]=t,a[12]=n,a[13]=i):i=a[13],i):null}try{tZ.displayName||(tZ.displayName="LoopsContextMenu")}catch{}var tJ=n(97665),tY=n(93364),tX=n(48057),t0=n(33026),t1=n(36296),t2=n(90122),t3=n(5533),t4=n(19336),t5=n(11607);function t6(e){let t,n,i,a,r,l,d,c,u,m,h,f,p,g=(0,s.c)(44),{loop:y}=e,{runLoop:x,stopLoop:v,isPreparing:b}=function(){let e=(0,tR.EY)(),t=(0,tJ.jE)(),[n,i]=(0,S.useState)(!1),{createProgressHandler:a}=(0,t1.h)();return{runLoop:async n=>{i(!0);try{let s=await e.createExecution(n.id,n.version||t0.qD);if(!s.success)throw Error(`Failed to create execution: ${s.error}`);let r=s.data,l=n.version||t0.qD,o=a(n.id,l),d=(0,tX.wu)(n.id,l);t.setQueryData(d,r),i(!1),await e.runPipeline(n,r.id,o,(e,n,i)=>{let a=(0,tX.wu)(e,n),s=t.getQueryData(a);return Promise.resolve(s?(0,tY.$j)(s):(0,tY.YD)("execution not found"))})}catch(e){throw i(!1),(0,tu.vV)("Error running loop:",e),e}},stopLoop:n=>{let i=(0,tX.wu)(n.id,n.version||t0.qD),a=t.getQueryData(i);a&&e.stopPipeline(a.id,()=>{t.invalidateQueries({queryKey:i})})},isPreparing:n}}();g[0]!==y?(t=(0,eJ.FT)(y),g[0]=y,g[1]=t):t=g[1];let j=t[0],{data:w,isLoading:C}=(0,tX.rR)(y.id,y.version??"latest"),_=j?w?.nodes[j.id]:void 0,N=_?.value??null,I=_?.error||null;g[2]!==w?(n=(0,t3.y)(w),g[2]=w,g[3]=n):n=g[3];let k=n,L=b||k;g[4]!==N?(i=(0,t2.DO)(N),g[4]=N,g[5]=i):i=g[5];let D=i;g[6]!==y||g[7]!==x?(a=async()=>{await x(y),(0,ee.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_RUN",mode:"loops"})},g[6]=y,g[7]=x,g[8]=a):a=g[8];let T=a;g[9]!==y||g[10]!==v?(r=()=>{v(y),(0,ee.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_STOP",mode:"loops"})},g[9]=y,g[10]=v,g[11]=r):r=g[11];let E=r;g[12]!==N||g[13]!==D?(l=async()=>{if(N)try{await navigator.clipboard.writeText(D),(0,ee.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_COPY_OUTPUT",mode:"loops"})}catch{}},g[12]=N,g[13]=D,g[14]=l):l=g[14];let A=l,R=`${tn.Jz}/l/${y.id}`;g[15]!==y.title||g[16]!==R?(d=(0,o.jsx)("h3",{className:"LoopOutput-module__title--pNloU",children:(0,o.jsx)(t5.$,{variant:"invisible",condensed:!0,to:R,onClick:t7,children:y.title})}),g[15]=y.title,g[16]=R,g[17]=d):d=g[17],g[18]!==T||g[19]!==E||g[20]!==L||g[21]!==N?(c=(0,o.jsx)(tz.c,{isLoading:L,onClick:T,onStop:E,value:N,variant:"invisible",iconOnly:!0}),g[18]=T,g[19]=E,g[20]=L,g[21]=N,g[22]=c):c=g[22];let O=!!N;g[23]!==A||g[24]!==y.id||g[25]!==O?(u=(0,o.jsx)(tZ,{loopId:y.id,onEdit:t7,onCopyOutput:A,hasOutput:O}),g[23]=A,g[24]=y.id,g[25]=O,g[26]=u):u=g[26],g[27]!==u||g[28]!==c?(m=(0,o.jsxs)("div",{className:"LoopOutput-module__actions--S7bni",children:[c,u]}),g[27]=u,g[28]=c,g[29]=m):m=g[29],g[30]!==m||g[31]!==d?(h=(0,o.jsxs)("div",{className:"LoopOutput-module__header--fcRKQ",children:[d,m]}),g[30]=m,g[31]=d,g[32]=h):h=g[32];let P=!!j;return g[33]!==T||g[34]!==E||g[35]!==C||g[36]!==L||g[37]!==I||g[38]!==N||g[39]!==P?(f=(0,o.jsx)("div",{className:"LoopOutput-module__body--fhlUk",children:(0,o.jsx)(t4.G,{outputNodeExists:P,isRunning:L,isLoading:C,nodeValue:N,nodeError:I,onRun:T,onStop:E})}),g[33]=T,g[34]=E,g[35]=C,g[36]=L,g[37]=I,g[38]=N,g[39]=P,g[40]=f):f=g[40],g[41]!==h||g[42]!==f?(p=(0,o.jsxs)("div",{className:"LoopOutput-module__panel--MrOXo",children:[h,f]}),g[41]=h,g[42]=f,g[43]=p):p=g[43],p}function t7(){(0,ee.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"})}try{t6.displayName||(t6.displayName="LoopOutput")}catch{}var t8=n(12683);let t9=[{step:"STEP 1",title:"Describe what you want to create",description:"Describe what you want to create and watch your first loop take shape. Refine and iterate whenever you need.",imageLight:n.p+"onboarding-exp-1-a95dcfae9b1b.png",imageDark:n.p+"onboarding-exp-1-dark-a48429702429.png",color:"bgColor-accent-muted borderColor-accent-muted"},{step:"STEP 2",title:"Connect nodes to build your workflow",description:"Every loop is made of connected nodes, each designed for a specific task. Adjust their inputs, fine-tune their settings, and watch data flow seamlessly from one node to the next, like a clear, powerful and predictable visual pipeline.",imageLight:n.p+"onboarding-exp-2-0c9e0ccab87e.png",imageDark:n.p+"onboarding-exp-2-dark-615b3cf6a6ff.png",color:"bgColor-muted borderColor-muted"},{step:"STEP 3",title:"Run and review results",description:"Run your loop to see results instantly. Outputs are rendered in rich markdown, making it easy to review, validate, and keep improving your workflow.",imageLight:n.p+"onboarding-exp-3-69315c1e30db.png",imageDark:n.p+"onboarding-exp-3-dark-ab6c51a7a2e1.png",color:"bgColor-open-muted borderColor-open-muted"},{step:"STEP 4",title:"Share with your team",description:"Once your loop is ready, share it with your team. Organize, reuse, and grow your collection of loops into a powerhouse of workflows everyone can build on.",imageLight:n.p+"onboarding-exp-4-5437e43d7f31.png",imageDark:n.p+"onboarding-exp-4-dark-3a94358b2cb1.png",color:"bgColor-done-muted borderColor-done-muted"}];function ne(){let e,t,n=(0,s.c)(4),{resolvedColorScheme:i}=(0,t8.DP)(),a="dark"===i;return n[0]!==a?(e=t9.map(e=>(0,o.jsxs)("div",{className:(0,ep.$)("OnboardingCards-module__card--iLbfG","color-shadow-small"),children:[(0,o.jsxs)("div",{className:"OnboardingCards-module__cardContent--Azqb_",children:[(0,o.jsx)("h4",{className:"OnboardingCards-module__cardTitle--Jy7D9",children:e.step}),(0,o.jsx)("p",{className:"OnboardingCards-module__cardDescription--ychAP",children:e.description})]}),(0,o.jsx)("div",{className:(0,ep.$)("OnboardingCards-module__cardImageContainer--OMfWC",e.color),children:(0,o.jsx)("img",{src:a?e.imageDark:e.imageLight,alt:e.title,className:"OnboardingCards-module__cardImage--otEbQ"})})]},e.step)),n[0]=a,n[1]=e):e=n[1],n[2]!==e?(t=(0,o.jsx)("div",{className:"OnboardingCards-module__container--Vo1v5",children:e}),n[2]=e,n[3]=t):t=n[3],t}try{ne.displayName||(ne.displayName="OnboardingCards")}catch{}var nt=n(79064),nn=n(79184),ni=n(96002),na=n(4559);let ns=(0,n(23125).A)(na.C,1e3);function nr(e){let t,n,i,a,r,l,d,c=(0,s.c)(21),{chatState:u,plugin:m}=e;if(!m||!(0,tI.j)(m))throw Error("LoopsView can only be used with a LoopsPlugin");let[h,f]=(0,tS.M)("loopsShowExamples",!0),p=(0,ti.GF)(u.availableModels);return c[0]!==f?(t=()=>f(!0),c[0]=f,c[1]=t):t=c[1],c[2]!==h||c[3]!==t?(n=(0,o.jsx)(z.P.Header,{children:(0,o.jsx)(tF,{showExamples:h,onShowExamples:t})}),c[2]=h,c[3]=t,c[4]=n):n=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(z.P.Sidebar,{children:(0,o.jsx)(ey.U,{})}),c[5]=i):i=c[5],c[6]!==u||c[7]!==f||c[8]!==h?(a=(0,o.jsx)(z.P.ColumnLeft,{children:(0,o.jsx)(no,{chatState:u,showExamples:h,setShowExamples:f})}),c[6]=u,c[7]=f,c[8]=h,c[9]=a):a=c[9],c[10]!==n||c[11]!==a?(r=(0,o.jsxs)(z.P,{"data-testid":"loops-layout",children:[n,i,a]}),c[10]=n,c[11]=a,c[12]=r):r=c[12],c[13]!==u.availableModels||c[14]!==p||c[15]!==m.previewUrl||c[16]!==r?(l=(0,o.jsx)(tO.Q,{previewUrl:m.previewUrl,availableModels:u.availableModels,defaultModel:p,sendChatMessage:nl,children:r}),c[13]=u.availableModels,c[14]=p,c[15]=m.previewUrl,c[16]=r,c[17]=l):l=c[17],c[18]!==m.service||c[19]!==l?(d=(0,o.jsx)(tR.qT,{value:m.service,children:l}),c[18]=m.service,c[19]=l,c[20]=d):d=c[20],d}function nl(){}function no(e){let t,n,i,a,r,l,d,c,m,h,f,p,g,y,x,v,b,j,w,C,_,N,I,k=(0,s.c)(59),{chatState:L,showExamples:D,setShowExamples:T}=e,{data:E,isLoading:A}=(0,t_.C)(),R=(0,H.b)(),O=(0,Q.Zp)(),P=(0,tR.EY)(),F=(0,ti.GF)(L.availableModels),[M,$]=(0,tS.M)("loopsOverviewViewMode","output"),[B,V]=(0,S.useState)(""),{chatQuotaExceeded:U,isLicensedLimited:q}=(0,nn.xR)(),G=q&&U,K=(0,S.useRef)(null);if(k[0]!==E||k[1]!==B){e:{if(!E){t=E;break e}let e=E.filter(nf);if(!B.trim()){t=e;break e}let n=B.toLowerCase().trim();t=e.filter(e=>e.title.toLowerCase().includes(n)||e.description&&e.description.toLowerCase().includes(n))}k[0]=E,k[1]=B,k[2]=t}else t=k[2];let W=t;k[3]===Symbol.for("react.memo_cache_sentinel")?(n=[],k[3]=n):n=k[3],(0,S.useEffect)(nh,n),k[4]!==R?(i=()=>{R.selectThread(null,{includeThreads:!1,clearTopic:!0})},a=[R],k[4]=R,k[5]=i,k[6]=a):(i=k[5],a=k[6]),(0,S.useEffect)(i,a),k[7]!==F||k[8]!==P||k[9]!==R||k[10]!==O?(r=async e=>{let t=e.trim();if(""===t)return;(0,ee.BI)("dotcom_chat.activate",{target:"OVERVIEW_INITIAL_CREATE",mode:"loops"});let n=crypto.randomUUID(),i={scopeId:eH.S$},a=await R.createThread(i);await P.createLoop(n),(0,tH.aq)(n,a.id);let s={content:t,model:F,references:[],thread:a,mode:eH.lh};R.sendChatMessage(s),O(`${tn.Jz}/l/${n}`)},k[7]=F,k[8]=P,k[9]=R,k[10]=O,k[11]=r):r=k[11];let z=r,Z=(0,S.useRef)(z);k[12]!==z?(l=()=>{Z.current=z},d=[z],k[12]=z,k[13]=l,k[14]=d):(l=k[13],d=k[14]),(0,S.useEffect)(l,d),k[15]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{let e=nt.Jt.getLoopEntrypointMessage();e&&(nt.Jt.setLoopEntrypointMessage(null),Z.current(e.message))},m=[],k[15]=c,k[16]=m):(c=k[15],m=k[16]),(0,S.useEffect)(c,m),k[17]===Symbol.for("react.memo_cache_sentinel")?(h=()=>(K.current&&ns(K.current,{assertive:!0}),nm),k[17]=h):h=k[17],k[18]!==W||k[19]!==A||k[20]!==B?(f=[B,W,A],k[18]=W,k[19]=A,k[20]=B,k[21]=f):f=k[21],(0,S.useEffect)(h,f),k[22]!==P||k[23]!==O?(p=async e=>{await P.createLoop(e),O(`${tn.Jz}/l/${e.id}`)},k[22]=P,k[23]=O,k[24]=p):p=k[24];let J=p;k[25]!==$?(g=e=>{$(e)},k[25]=$,k[26]=g):g=k[26];let Y=g;k[27]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{V(e),(0,ee.BI)("dotcom_chat.activate",{target:"LOOPS_SEARCH",mode:"loops"})},k[27]=y):y=k[27];let X=y;return k[28]===Symbol.for("react.memo_cache_sentinel")?(x=(0,o.jsxs)(tv.Zf.Header,{children:[(0,o.jsx)(tv.Zf.Title,{children:"Loops"}),(0,o.jsx)(tv.Zf.Description,{children:"Automate repetitive tasks by simply describing them using natural language. Automate once. Loop forever."})]}),k[28]=x):x=k[28],k[29]===Symbol.for("react.memo_cache_sentinel")?(v=[{name:ex.II.Loops,icon:u.LoopIcon,submitLabel:"Automate",placeholder:"What would you like to automate?"}],k[29]=v):v=k[29],k[30]!==z||k[31]!==G?(b=(0,o.jsx)(tC.V,{modes:v,size:"large",disabled:G,onSubmit:z}),k[30]=z,k[31]=G,k[32]=b):b=k[32],k[33]!==G?(j=G&&(0,o.jsx)(ni.u,{}),k[33]=G,k[34]=j):j=k[34],k[35]!==b||k[36]!==j?(w=(0,o.jsxs)("div",{className:"LoopsView-module__header--ZnQDC",children:[x,(0,o.jsxs)("div",{className:"LoopsView-module__input--HBzte",children:[b,j]})]}),k[35]=b,k[36]=j,k[37]=w):w=k[37],k[38]!==J||k[39]!==A||k[40]!==T||k[41]!==D?(C=!A&&D&&(0,o.jsxs)(tv.Zf.Section,{children:[(0,o.jsxs)("div",{className:tj,children:[(0,o.jsx)("h2",{className:tw,children:"Examples"}),(0,o.jsx)(et.K,{icon:u.XIcon,"aria-label":"Dismiss examples",variant:"invisible",size:"small",onClick:()=>{T(!1),(0,ee.BI)("dotcom_chat.activate",{target:"LOOPS_DISMISS_EXAMPLES",mode:"loops"})}})]}),(0,o.jsx)("div",{className:"LoopsView-module__examplesContainer--cshxA",children:tq.map(e=>{let{loop:t,icon:n}=e;return(0,o.jsxs)("button",{className:(0,ep.$)("LoopsView-module__exampleCard--faZyi","color-shadow-small"),onClick:()=>{(0,ee.BI)("dotcom_chat.activate",{target:"OVERVIEW_EXAMPLE_LOOP_SELECT",mode:"loops"}),J({...t,id:crypto.randomUUID(),updatedAt:Date.now(),owned:!0,visibility:"private"})},children:[(0,o.jsx)("div",{className:"LoopsView-module__exampleCardIconContainer--zgd0g",children:n?(0,o.jsx)(n,{className:"LoopsView-module__exampleCardIcon--umFeZ",size:16}):null}),(0,o.jsx)("div",{className:"LoopsView-module__exampleCardContent--jxm8o",children:(0,o.jsx)("h3",{className:"LoopsView-module__exampleCardTitle--wpbww",children:t.title})})]},t.title)})})]}),k[38]=J,k[39]=A,k[40]=T,k[41]=D,k[42]=C):C=k[42],k[43]!==W||k[44]!==Y||k[45]!==A||k[46]!==E||k[47]!==B||k[48]!==D||k[49]!==M?(_=A||E&&E.length>0?(0,o.jsxs)(tv.Zf.Section,{children:[D&&(0,o.jsx)("div",{className:tj,children:(0,o.jsx)("h2",{className:tw,children:"Loops"})}),(0,o.jsxs)("div",{className:"LoopsView-module__searchContainer--ypqMb",children:[(0,o.jsx)(tN.D,{onSearch:X,placeholder:"Search loops...","aria-label":"Search loops",debounceDelay:300}),(0,o.jsx)(tW,{value:M,onChange:Y}),(0,o.jsx)("h2",{className:"sr-only",children:"My loops"})]}),B&&W&&0===W.length?(0,o.jsxs)("div",{className:"LoopsView-module__noResultsMessage--OkrMA",ref:K,children:["No loops found matching \u201C",B,"\u201D"]}):"list"===M?(0,o.jsx)(tb.qJ,{children:(0,o.jsx)(tb.qJ.List,{loading:A,children:W?.map(nc)})}):(0,o.jsx)("div",{className:"LoopsOutputList-module__list--DoC1u",children:(W||[]).map(nd)})]}):null,k[43]=W,k[44]=Y,k[45]=A,k[46]=E,k[47]=B,k[48]=D,k[49]=M,k[50]=_):_=k[50],k[51]!==A||k[52]!==E?(N=!A&&(!E||0===E.length)&&(0,o.jsxs)(tv.Zf.Section,{children:[(0,o.jsx)("div",{className:tj,children:(0,o.jsx)("h2",{className:tw,children:"Getting started"})}),(0,o.jsx)(ne,{})]}),k[51]=A,k[52]=E,k[53]=N):N=k[53],k[54]!==w||k[55]!==C||k[56]!==_||k[57]!==N?(I=(0,o.jsxs)(tv.Zf.Container,{width:"small",children:[w,C,_,N]}),k[54]=w,k[55]=C,k[56]=_,k[57]=N,k[58]=I):I=k[58],I}function nd(e){return(0,o.jsx)(t6,{loop:e},e.id)}function nc(e){return(0,o.jsxs)(tb.qJ.Item,{href:`${tn.Jz}/l/${e.id}`,onClick:nu,children:[(0,o.jsx)(tb.qJ.Item.Title,{children:e.title}),(0,o.jsx)(tb.qJ.Item.Description,{children:e.description}),(0,o.jsx)(tb.qJ.Item.Actions,{children:(0,o.jsx)(tZ,{loopId:e.id})})]},e.id)}function nu(){return(0,ee.BI)("dotcom_chat.activate",{target:"OVERVIEW_USER_LOOP_SELECT",mode:"loops"})}function nm(){ns.cancel()}function nh(){(0,q.D)("Loops \xb7 GitHub Copilot"),Promise.all([n.e(8206),n.e(79018),n.e(55316),n.e(8316),n.e(34031),n.e(49898)]).then(n.bind(n,88027))}function nf(e){return""!==e.title||0!==e.nodes.length}try{nr.displayName||(nr.displayName="LoopsView")}catch{}try{no.displayName||(no.displayName="LoopsViewInner")}catch{}var np=n(49851),ng=new WeakMap,ny=new WeakMap,nx=new WeakSet;let LoopsClient=class LoopsClient{listLoops(){return(0,te._)(this,nx,nv).call(this,{operation:"list-loops"})}listLoopVersions(e){return(0,te._)(this,nx,nv).call(this,{operation:"list-loop-versions",loopID:e})}createLoop(e){return(0,te._)(this,nx,nv).call(this,{operation:"create-loop",loop:e})}updateLoop(e,t,n){return(0,te._)(this,nx,nv).call(this,{operation:"update-loop",loopID:e,version:t,loop:n})}getLoop(e,t){return(0,te._)(this,nx,nv).call(this,{operation:"get-loop",loopID:e,versionConstraint:t})}deleteLoop(e){return(0,te._)(this,nx,nv).call(this,{operation:"delete-loop",loopID:e})}createExecution(e,t,n,i,a){return(0,te._)(this,nx,nv).call(this,{operation:"create-execution",loopID:e,version:t,executionInit:{inputValues:i,nodes:n},shareID:a})}getExecution(e,t,n){return(0,te._)(this,nx,nv).call(this,{operation:"get-execution",loopID:e,version:t,executionID:n})}updateNodeExecution(e,t,n,i,a,s){return(0,te._)(this,nx,nv).call(this,{operation:"update-node-execution",loopID:e,version:t,executionID:n,nodeID:i,nodeExecution:a,shareID:s})}shareLoop(e){return(0,te._)(this,nx,nv).call(this,{operation:"share-loop",loopID:e})}unshareLoop(e){return(0,te._)(this,nx,nv).call(this,{operation:"unshare-loop",loopID:e})}executeGraphQL(e,t,n,i,a){return(0,te._)(this,nx,nv).call(this,{operation:"execute-graphql",query:e,loopID:t,version:n,executionID:i,nodeID:a})}constructor(e,t){(0,tt._)(this,nx),(0,e8._)(this,ng,{writable:!0,value:void 0}),(0,e8._)(this,ny,{writable:!0,value:void 0}),(0,e9._)(this,ng,e),(0,e9._)(this,ny,t)}};async function nv(e){if(!(0,e7._)(this,ng)||""===(0,e7._)(this,ng).trim())return(0,tu.vV)("Loops client URL is not configured"),(0,tY.YD)("Loops client URL is not configured",void 0);let t={"Content-Type":"application/json"};if("get-execution"===e.operation&&(0,e7._)(this,ny)){let e=await (0,e7._)(this,ny).getAuthToken();t["X-Copilot-Api-Token"]=e.value}let n=await (0,k.DI)((0,e7._)(this,ng),{method:"POST",body:JSON.stringify(e),headers:t});if(!n.ok){let e=await n.text();try{return(0,tY.YD)(JSON.parse(e),n)}catch(e){return(0,tY.YD)(e,n)}}let i=204===n.status?void 0:await n.json();return(0,tY.$j)(i)}var nb=n(70119),nj=n(97286),nw=n(42518);function nC(e){let t,n,i=(0,s.c)(3),{onSelect:a}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(el.l.LeadingVisual,{children:(0,o.jsx)(np.LP,{})}),i[0]=t):t=i[0],i[1]!==a?(n=(0,o.jsxs)(el.l.Item,{onSelect:a,children:[t,"Loops\u2026"]}),i[1]=a,i[2]=n):n=i[2],n}function n_(e){var t;let n,i,a,r,l,d,c,u,m,h,f,p,g,y,x,v,b,j,w,C=(0,s.c)(48),{onSubmit:_,onDismiss:N,client:I}=e,k=(0,H.b)(),{data:L,isError:D,isLoading:T}=(t=I,(a=(0,s.c)(3))[0]===Symbol.for("react.memo_cache_sentinel")?(n=["loop-execution-references"],a[0]=n):n=a[0],a[1]!==t?(i={queryKey:n,queryFn:()=>nI(t)},a[1]=t,a[2]=i):i=a[2],(0,nj.I)(i)),[E,A]=(0,S.useState)("");C[0]!==k||C[1]!==_||C[2]!==L?(r=e=>{if(!L)return;let t=L.find(t=>t.executionID===e);t&&k.addReference(t,"loop-executions-select-panel"),_()},C[0]=k,C[1]=_,C[2]=L,C[3]=r):r=C[3];let R=r;if(C[4]!==E||C[5]!==D||C[6]!==T||C[7]!==N||C[8]!==R||C[9]!==_||C[10]!==L){let e,t,n=L?L.map(nN).filter(e=>e.text.toLowerCase().includes(E.toLowerCase())):[];d=nb.X,g=!0,y="modal",x="large",v="instant",b="Select Loop output",c=N,u=_,C[24]===Symbol.for("react.memo_cache_sentinel")?(e=e=>A(e.currentTarget.value),C[24]=e):e=C[24],C[25]!==T?(m=(0,o.jsx)(nb.X.Header,{children:(0,o.jsx)(nb.X.SearchInput,{loading:T,onChange:e,placeholder:"Search loops","aria-label":"Search loops"})}),C[25]=T,C[26]=m):m=C[26],l=el.l,C[27]!==D||C[28]!==T?(h=!T&&D&&(0,o.jsx)(nb.X.Message,{variant:"error",size:"inline",children:"An error occurred"}),C[27]=D,C[28]=T,C[29]=h):h=C[29],f=!T&&0===n.length&&(0,o.jsx)(nb.X.Message,{variant:"empty",title:"No loop output found",children:"Try creating and running a loop to see output here"}),C[30]!==R?(t=e=>(0,o.jsxs)(el.l.Item,{onSelect:()=>R(e.key),children:[e.text,(0,o.jsx)(el.l.Description,{variant:"block",className:"LoopExecutionAttachmentMenuItem-module__itemDescription--yZ8xi",children:e.description})]},e.key),C[30]=R,C[31]=t):t=C[31],p=n.map(t),C[4]=E,C[5]=D,C[6]=T,C[7]=N,C[8]=R,C[9]=_,C[10]=L,C[11]=l,C[12]=d,C[13]=c,C[14]=u,C[15]=m,C[16]=h,C[17]=f,C[18]=p,C[19]=g,C[20]=y,C[21]=x,C[22]=v,C[23]=b}else l=C[11],d=C[12],c=C[13],u=C[14],m=C[15],h=C[16],f=C[17],p=C[18],g=C[19],y=C[20],x=C[21],v=C[22],b=C[23];return C[32]!==l||C[33]!==h||C[34]!==f||C[35]!==p?(j=(0,o.jsxs)(l,{children:[h,f,p]}),C[32]=l,C[33]=h,C[34]=f,C[35]=p,C[36]=j):j=C[36],C[37]!==d||C[38]!==c||C[39]!==u||C[40]!==m||C[41]!==j||C[42]!==g||C[43]!==y||C[44]!==x||C[45]!==v||C[46]!==b?(w=(0,o.jsxs)(d,{open:g,variant:y,width:x,selectionVariant:v,title:b,onCancel:c,onSubmit:u,children:[m,j]}),C[37]=d,C[38]=c,C[39]=u,C[40]=m,C[41]=j,C[42]=g,C[43]=y,C[44]=x,C[45]=v,C[46]=b,C[47]=w):w=C[47],w}function nN(e){var t;return{text:e.loopTitle,key:e.executionID,description:"string"==typeof(t=e.output[0]?.value)?t:JSON.stringify(t)}}let nS=[404,403];async function nI(e){let t=await e.listLoops();if(!t.success)throw Error(t.error);return(await Promise.all(t.data.map(async t=>{if(!t.version)return null;let n=await e.getExecution(t.id,t.version,"latest");if(!n.success){if(nS.includes(n.httpStatus))return null;throw Error(n.error)}return n.data}))).filter(e=>!!e).map(e=>{let n=t.data.find(t=>t.id===e?.loopID);return n?(0,nw.C)(n,e):null}).filter(e=>!!e)}try{nC.displayName||(nC.displayName="LoopExecutionAttachmentMenuItem")}catch{}try{(i=LoopExecutionsSelectPanel).displayName||(i.displayName="LoopExecutionsSelectPanel")}catch{}try{n_.displayName||(n_.displayName="LoopExecutionsSelectPanelInner")}catch{}var nk=n(12357),nL=n(73077),nD=n(96459);try{(a=LoopExecutionPreview).displayName||(a.displayName="LoopExecutionPreview")}catch{}var nT=new WeakMap,nE=new WeakMap,nA=new WeakMap;let IFrameCodeExecutor=class IFrameCodeExecutor{async execute(e,t,n){return e?new Promise(i=>{let a=document.createElement("iframe");a.src=`${(0,e7._)(this,nT)}/code-node-execution.html`,a.setAttribute("sandbox",(0,e7._)(this,nA));let s=!1,r=e=>{s||(s=!0,o&&window.removeEventListener("message",o),n?.removeEventListener("abort",l),document.body.contains(a)&&document.body.removeChild(a),i(e))},l=()=>{a.contentWindow?.postMessage({type:"cancel",nodeId:t},(0,e7._)(this,nT)),r({success:!1,error:"Aborted"})};n?.addEventListener("abort",l);let o=e=>{let n=new URL((0,e7._)(this,nT),window.location.origin).origin;e.origin!==n||t&&e.data?.nodeId!==t||(clearTimeout(d),e.data?.type==="result"?r({success:!0,result:e.data.result}):e.data?.type==="error"&&r({success:!1,error:e.data.result}))},d=setTimeout(()=>{a.contentWindow?.postMessage({type:"cancel",nodeId:t},(0,e7._)(this,nT)),r({success:!1,error:"Timeout: No response"})},(0,e7._)(this,nE));window.addEventListener("message",o),a.onerror=()=>{clearTimeout(d),r({success:!1,error:"Error: Failed to load execution environment"})},document.body.appendChild(a),a.onload=()=>{try{a.contentWindow?.postMessage({type:"execute",code:e,nodeId:t},(0,e7._)(this,nT))}catch(e){clearTimeout(d),r({success:!1,error:`Error: Failed to execute code - ${e instanceof Error?e.message:"Unknown error"}`})}}}):{success:!0,result:""}}constructor(e,t=15e3,n="allow-scripts allow-same-origin"){(0,e8._)(this,nT,{writable:!0,value:void 0}),(0,e8._)(this,nE,{writable:!0,value:void 0}),(0,e8._)(this,nA,{writable:!0,value:void 0}),(0,e9._)(this,nT,e),(0,e9._)(this,nE,t),(0,e9._)(this,nA,n)}};let LoopsPlugin=class LoopsPlugin{get attachmentMenuContribution(){if(g.W.loopExecutionReferences){var e;return{attachmentType:"loop-execution",MenuItemComponent:nC,PanelComponent:(e=this.client,function(t){return(0,o.jsx)(n_,{...t,client:e})})}}}get previewComponents(){if(g.W.loopExecutionReferences){var e;return{"loop-execution":(e=this.previewUrl,function({reference:t}){let n=(0,nD.Z)(),i=(0,H.b)();if("loop-execution"!==t.type)return null;let a=(0,tn.JP)(t),s=async e=>{e.preventDefault(),await i.selectThread(null),n(a)};return(0,o.jsx)(tO.Q,{previewUrl:e,availableModels:[],defaultModel:(0,ti.wv)(),sendChatMessage:()=>{},children:(0,o.jsxs)("div",{className:"LoopExecutionPreview-module__previewContainer--RqSzv",children:[(0,o.jsx)("div",{className:"LoopExecutionPreview-module__buttonContainer--i4KdB",children:(0,o.jsx)(nL.z,{href:a,leadingVisual:u.PencilIcon,onClick:s,children:"Edit this loop"})}),(0,o.jsx)("div",{className:"LoopExecutionPreview-module__contentContainer--k2ZO7",children:(0,o.jsx)(nk.U,{isRunning:!1,nodeValue:t.output[0]?.value})})]})})})}}}async overrideCreateMessageOptions(e){return{...e,mode:eH.lh}}constructor(e,t,n,i,a,s,r){(0,l._)(this,"id",eH.S$),(0,l._)(this,"displayName",eH.Os),(0,l._)(this,"service",void 0),(0,l._)(this,"client",void 0),(0,l._)(this,"previewUrl",void 0),(0,l._)(this,"markdownExtensions",[e5]),(0,l._)(this,"skipSyncRouteToThread",!0),(0,l._)(this,"components",[{id:"loops-list",Component:nr,routes:[eH.qe]},{id:"loop-detail",Component:tG,routes:[eH.bW]}]),(0,l._)(this,"navigationItems",[{id:eH.S$,displayName:"Loops",href:eH.QK,icon:np.LP}]);const o=new eq.JR(a);this.client=new LoopsClient(n,o),this.service=new e6.J(this.client,new GraphQLClient(t,o,this.client),new ChatCompletionsClient(e,o,r),new IFrameCodeExecutor(i)),this.previewUrl=s}};var nR=n(91747),nO=n(26607),nP=n(51625);let SparkPlugin=class SparkPlugin{constructor(e=!1){(0,l._)(this,"id",nP.eu),(0,l._)(this,"displayName",nP._x),(0,l._)(this,"sparkEnabled",void 0),(0,l._)(this,"navigationItems",[{id:nP.eu,displayName:"Spark",href:nP.cP,icon:u.SparkleIcon,label:(0,S.createElement)(nO.A,{variant:"success"},"Preview"),external:!0}]),(0,l._)(this,"slashCommand",{key:"spark",name:"Spark",description:"Transform ideas into full-stack intelligent apps",icon:u.SparkleIcon,enabled:()=>this.sparkEnabled,disabledAction:e=>{e(nP.cP)},execute:(e,t,n)=>(nt.Jt.setSparkEntrypointMessage(e),n(nP.cP),!0),suggestions:["Make a web app to upload and analyze log files, showing error frequencies and trends.","Create an app to track team PTO and on-call schedules and visualize available team capacity by week.","Create a dashboard that visualizes uploaded CSV data as interactive charts and summary stats."]}),this.sparkEnabled=e}};function nF(e){let t,n,i,a=(0,s.c)(32),{payload:l,handleUserSubmitRef:o}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,B.G7)("copilot_chat_agents_empty_state"),a[0]=t):t=a[0];let d=t;a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,B.G7)("copilot_spark_empty_state"),a[1]=n):n=a[1];let c=n,u=(0,nR.u)("copilot_swe_agent_progress_commands"),m=(0,nR.u)("copilot_agent_task_list_v2");if(a[2]!==o||a[3]!==m||a[4]!==u||a[5]!==l.agentsEnabled||a[6]!==l.apiURL||a[7]!==l.dashboardModulesEnabled||a[8]!==l.graphqlApiUrl||a[9]!==l.loopsClientUrl||a[10]!==l.loopsEnabled||a[11]!==l.loopsExecutionUrl||a[12]!==l.previewUrl||a[13]!==l.realIp||a[14]!==l.sparkEnabled||a[15]!==l.ssoOrganizations){if(i=[],g.W.loopsPlugin&&(l.loopsEnabled??!0)){let e,t=l.apiURL??"",n=l.graphqlApiUrl??"",s=l.loopsClientUrl??"",r=l.loopsExecutionUrl??"";a[17]!==l.previewUrl||a[18]!==l.realIp||a[19]!==l.ssoOrganizations||a[20]!==t||a[21]!==n||a[22]!==s||a[23]!==r?(e=new LoopsPlugin(t,n,s,r,l.ssoOrganizations?.map(nM)??[],l.previewUrl??"",l.realIp??""),a[17]=l.previewUrl,a[18]=l.realIp,a[19]=l.ssoOrganizations,a[20]=t,a[21]=n,a[22]=s,a[23]=r,a[24]=e):e=a[24],i.push(e)}if(l.sparkEnabled||c){let e;a[25]!==l.sparkEnabled?(e=new SparkPlugin(l.sparkEnabled),a[25]=l.sparkEnabled,a[26]=e):e=a[26],i.push(e)}if(l.agentsEnabled||d){let e,t=void 0!==l.dashboardModulesEnabled?l.dashboardModulesEnabled:m&&u,n=l.agentsEnabled??!1;a[27]!==o||a[28]!==t||a[29]!==n?(e=new r.c(t,o,n),a[27]=o,a[28]=t,a[29]=n,a[30]=e):e=a[30],i.push(e)}if(u){let e;a[31]===Symbol.for("react.memo_cache_sentinel")?(e=new TasksPlugin,a[31]=e):e=a[31],i.push(e)}a[2]=o,a[3]=m,a[4]=u,a[5]=l.agentsEnabled,a[6]=l.apiURL,a[7]=l.dashboardModulesEnabled,a[8]=l.graphqlApiUrl,a[9]=l.loopsClientUrl,a[10]=l.loopsEnabled,a[11]=l.loopsExecutionUrl,a[12]=l.previewUrl,a[13]=l.realIp,a[14]=l.sparkEnabled,a[15]=l.ssoOrganizations,a[16]=i}else i=a[16];return i}function nM(e){return e.id}},76219:(e,t,n)=>{n.d(t,{Q:()=>l,U:()=>o});var i=n(74848),a=n(16522),s=n(96540);let r=(0,s.createContext)(null);function l(e){let t,n,s=(0,a.c)(8),{availableModels:l,defaultModel:o,previewUrl:d,sendChatMessage:c,children:u}=e;s[0]!==l||s[1]!==o||s[2]!==d||s[3]!==c?(t={availableModels:l,defaultModel:o,previewUrl:d,sendChatMessage:c},s[0]=l,s[1]=o,s[2]=d,s[3]=c,s[4]=t):t=s[4];let m=t;return s[5]!==u||s[6]!==m?(n=(0,i.jsx)(r,{value:m,children:u}),s[5]=u,s[6]=m,s[7]=n):n=s[7],n}function o(){let e=(0,s.useContext)(r);if(!e)throw Error("useAppContext must be used within an AppContextProvider");return e}try{r.displayName||(r.displayName="AppContext")}catch{}try{l.displayName||(l.displayName="AppContextProvider")}catch{}},76746:(e,t,n)=>{n.d(t,{v:()=>r});var i=n(61872);n(39087);var a=n(91348),s=n(45363);function r(e,t){if(!Array.isArray(e.nodes))return[{error:"Loop has no nodes",errorType:i.T.MissingProperty,involvedNodes:[]}];let n=function(e,t){let n=[];for(let a of("string"!=typeof e.title&&n.push({error:"Loop is missing a title",errorType:i.T.MissingProperty,involvedNodes:[]}),0===e.nodes.length&&n.push({error:"Loop has no nodes",errorType:i.T.MissingProperty,involvedNodes:[]}),e.nodes))n=n.concat(function(e,t){let n=[];return("string"!=typeof e.title||0===e.title.length)&&n.push({error:"Node is missing a title",errorType:i.T.MissingProperty,involvedNodes:[e.id]}),n.concat(s.C.validateNode(e,t))}(a,t));return n}(e,t),r=(0,a.f0)(e.nodes);for(let t of r.edges){let a=e.nodes.find(e=>e.id===t.from),s=e.nodes.find(e=>e.id===t.to);a&&s||n.push({error:`Node ${t.to} references a nonexistent node {{${t.from}}}`,errorType:i.T.NonexistentNode,involvedNodes:[t.to]})}let l=function(e){let t=new Set,n=new Set,i=[],a=s=>{if(n.has(s)){let e=i.indexOf(s);return i.slice(e)}if(t.has(s))return null;for(let r of(t.add(s),n.add(s),i.push(s),e.edges))if(r.from===s){let e=a(r.to);if(e)return e}return n.delete(s),i.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=a(n.id);if(e)return e}return null}(r);if(l&&l.length>0){let e=[...l,l[0]];n.push({error:`Loop contains a cycle: ${e.join(" \u2192 ")}`,errorType:i.T.CycleDetected,involvedNodes:l})}let o=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=[],i=new Set,a=(t,n)=>{for(let s of(i.add(t),n.add(t),e.edges))s.from!==t||i.has(s.to)||a(s.to,n),s.to!==t||i.has(s.from)||a(s.from,n)};for(let e of t)if(!i.has(e.id)){let t=new Set;a(e.id,t),n.push(t)}if(n.length<=1)return[];let s=n.reduce((e,t)=>t.size>e.size?t:e,new Set),r=[];for(let e of t)s.has(e.id)||r.push(e.id);return r}(r);return o.length>0&&n.push({error:`Loop contains unreachable nodes: ${o.join(", ")}`,errorType:i.T.DisconnectedNode,involvedNodes:o}),n}},77046:(e,t,n)=>{n.d(t,{A:()=>i});let i={"file-tree-row":"DiffFileTree-module__file-tree-row--GJi_6"}},77999:(e,t,n)=>{n.d(t,{m:()=>d});var i=n(74848),a=n(34164),s=n(37367),r=n(34743),l=n(71988),o=n(96540);let d=({ref:e,text:t,position:n,children:d,relationship:c="description",offset:u=8,...m})=>{let[h,f]=(0,o.useState)(!1),p=(0,o.useRef)(null),{refs:g,floatingStyles:y,context:x,isPositioned:v}=(0,s.we)({open:h,onOpenChange:f,placement:n,middleware:[(0,r.cY)(u),...n?[]:[(0,r.RK)()]],whileElementsMounted:l.ll}),b=(0,s.Mk)(x,{move:!1,delay:{open:100,close:0}}),j=(0,s.iQ)(x),w=(0,s.s9)(x),C=(0,s.It)(x,{role:"tooltip",enabled:"description"===c}),{getReferenceProps:_,getFloatingProps:N}=(0,s.bv)([b,j,w,C]),S=_();"label"===c?m["aria-label"]=t:"description"===c&&(m["aria-describedby"]=x.floatingId);let I=(0,s.SV)([g.setReference,e]),k=(0,o.cloneElement)(d,{...S,...m,onTouchEnd:e=>{d.props.onTouchEnd&&d.props.onTouchEnd(e),setTimeout(()=>f(!1),10)},onMouseEnter:e=>{d.props.onMouseEnter&&d.props.onMouseEnter(e),p.current&&(clearTimeout(p.current),p.current=null)},ref:I});return(0,i.jsxs)(i.Fragment,{children:[k,h&&(0,i.jsx)(s.XF,{children:(0,i.jsx)("div",{ref:g.setFloating,id:x.floatingId,style:{...y,visibility:v?"visible":"hidden"},className:(0,a.$)("Tooltip-module__tooltip--hAat9"),...N(),children:t})})]})};d.displayName="Tooltip"},78252:(e,t,n)=>{n.d(t,{$:()=>l});var i=n(74848),a=n(38621),s=n(5524),r=n(34720);let l=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.l.Divider,{}),(0,i.jsx)(r.t,{eventContext:{prx:!0},leadingVisual:(0,i.jsx)(a.CopilotIcon,{}),fileDiffReference:e.copilotChatReference})]});try{l.displayName||(l.displayName="CopilotDiffChatBlobActionsMenuItems")}catch{}},78456:(e,t,n)=>{n.d(t,{Io:()=>i});let i=[{id:"dummy-1",dummy:!0,owned:!0,title:"Edit writing",description:"Update writing to make it more engaging",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1a",title:"Your writing",description:"The writing you want to edit",type:"text",metadata:{inputType:"text"},content:`There is huge potential in building complex, repeatable pipelines that take advantage of LLM capabilities. A way for anyone to create and share tools. A few examples:

- Scientists sharing workflows for turning conference notes into a queryable artifact
- Scientists creating a pipeline for polishing a draft to adhere to proposal writing requirements
- Developers building a \u{201C}check for security flaws\u{201D} pipeline, accessible via API / vscode extension
- Library maintainers creating a \u{201C}make a new codebase with Next.js" or \u{201C}add Tailwind to your codebase\u{201D} pipeline
- Artists building a pipeline to generate images of a certain style. Or process a sketch into a branded image.
- Generating a customized analysis of all of a lawyer\u{2019}s cases
- Summarize medical research on a topic, using only the most trustable sources

I wager there\u{2019}s a huge market in building and discovering pipelines, and a good implementation will look a bit like ChatGPT with people of many stripes building and using them.

GitHub is the right place for this kind of ecosystem for a few reasons:

- It ties into the spirit of Open Source
- It already has a huge audience to help with the cold start problem
- It mirror\u{2019}s GitHub\u{2019}s mission to make \u{201C}code\u{201D} accessible to a larger audience and the platform valuable to more than just developers. The future will look like people of any occupation \u{201C}writing code\u{201D} (really, just building things with logic)`},{id:"2a",title:"Edit guide",description:"The guide on how to edit writing",type:"text",metadata:{inputType:"text"},content:`# Academish Voice

pvh / Aug 2022

Our publications follow what we call \u{201C}*academish*\u{201D} voice. We follow a largely academic style in our writing but avoid certain academic tendencies.

## Academic Style

- **Make no claims without support.** If you have made an unsupported claim consider its centrality to your argument. If \u{201C}many developers agree\u{201D}, we should be able to link to a source or describe how we know that. If you can\u{2019}t defend it, you should get rid of it.
- **Avoid absolutist language.** It\u{2019}s not \u{201C}the main problem\u{201D}, it\u{2019}s \u{201C}a problem\u{201D}. (Unless, of course, you can defend the claim.)
- **Be precise and specific with your descriptions.** Instead of saying something \u{201C}feels great\u{201D}, describe how it feels. Don\u{2019}t say something \u{201C}is a problem\u{201D} unless you describe what the problem is or to whom. If you\u{2019}re tempted to say something vague because you\u{2019}re not sure, either do enough research until you\u{2019}re sure, or don\u{2019}t say it.
- **Avoid hyperbole.** Use adjectives to add precision, not to persuade. Claiming \u{201C}immense benefits\u{201D} is only appropriate if you have developed a commercially viable fusion power plant. Delete words that are only for emphasis, and keep only those that add substance (e.g. quantify).
- **Structure your writing for incremental reading.** Don\u{2019}t bury the lede. A reader should be able to understand the goals and conclusions of an essay by reading the first couple of paragraphs. Individual sections should briefly reiterate any important material and/or link back to where it is introduced. This may feel repetitive at times but aids readers who take several sessions to read a piece or who jump straight to the sections that interest them.
- **Give credit to others.** Cite earlier work. Link to sources for terms and ideas. Give thanks to contributors, reviewers, and advisors.
- **Be humble and transparent about shortcomings and problems.** We want readers to build on our work, not buy our product.

## Ink & Switch Style

- **Assume the reader is an interested generalist.** Explain jargon. Academic writing is dense with domain terminology because it assumes readers are \u{201C}up to date on the field.\u{201D}  Ink & Switch Essays make use of marginalia in what we call \u{201C}asides\u{201D} to define uncommon terminology. Concretely, you don\u{2019}t need to gloss \u{201C}HTML\u{201D}, but you should probably gloss \u{201C}CRDT\u{201D}.
- **Carefully consider section headings.** Headings should legibly communicate the shape of the essay and serve as a roadmap for a reader to skip to the part of an essay that\u{2019}s most interesting to them. Similarly, avoid including unrelated material in a section with a particular title. If a user already knows \u{201C}How CRDTs Work\u{201D} then they shouldn\u{2019}t miss (much) important information about the project by skipping reading that section.
- **Embrace interactive demonstrations, animations, illustration, and videos.** Sometimes an illustration or demo can offer more clarity on a topic than text alone. As long as the content is self-contained and doesn\u{2019}t rely on external sources, it should be legible for many years to come and viewable offline.
- **It\u{2019}s okay to share hunches and beliefs as long as they\u{2019}re appropriately labeled.** Don\u{2019}t be shy about drawing conclusions, just be clear about the degree of confidence you have and where it comes from.
- **Ensure content looks good in PDF / printed form.** Obviously you lose the elements above, but the PDF version of a paper shouldn\u{2019}t have giant \u{25B6}\u{FE0F} icons obscuring an image. Interactive figures should display a meaningful static view.
- **Use \u{201C}asides\u{201D} for supportive content and marginalia.** Asides can expand on references to other work, link out to related projects, or just share interesting context or historical tidbits.
- **Deploy persuasive or emotional writing appropriately.** You can be enthusiastic in describing your goals but be modest in how you describe your solutions.
- **Keep it classy.** We don\u{2019}t dismiss other people\u{2019}s work or insult their products. Everything around you was made by someone working really hard on it. If we have found a better way, we should show gratitude to those who helped us realize the path forward and humility about our contributions.
- **Sweat the details.** Make sure your colors are carefully chosen. Images should be clear and at the right bit rate. Choose your words carefully. Interactions should be delightful.

The result of these elements should be an essay that is confident, accurate, and readable to almost anyone with a background in technology. Our essays are often long (probably too long) but should consistently reward patient reading and serve as a reference to their readers for many years to come.

---

## About this page

This document aims to articulate the stylistic elements and voice of Ink & Switch Essays.

### **September 1, 2022**

@Martin Kleppmann added some details on academic style.

### **August 17, 2022**

@Todd Matthews made some formatting edits for continuity and scanability.

### **August 16, 2022**

@Peter van Hardenberg created this document. Began with @Adam Wiggins\u{2019} "Essay Playbook" and added notes about Academish Voice, which aim to capture the stylistic elements he looks for when I reading essay drafts. Many of these elements came from @Martin Kleppmann  and @Adam Wiggins reviews of my past writing, so credit to them. This is probably quite useful for everyone working on an essay right now, but is probably not comprehensive. If I've missed anything or anything here is controversial or unclear please feel free to inquire.`},{id:"3a",title:"Edited writing",description:"Writing with suggested changes",type:"prompt",content:"You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}."}]},{id:"dummy-2",dummy:!0,title:"Document this function",owned:!0,description:"Document this function so it's easy to understand",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1b",title:"Function to document",description:"The function to document",content:`export function createNodePrompt(node: Node, nodeMap: Record<string, Node>): string {
  let content = node.content;
  const regex = /{{([\\w-]+)}}/g;
  let match;

  while ((match = regex.exec(content)) !== null) {
    const id = match[1];
    const referencedNode = nodeMap[id];
    if (referencedNode) {
      const replacementContent = createNodePrompt(referencedNode, nodeMap);
      content = content.replace(match[0], replacementContent);
    }
  }

  return content;
}`,type:"code"},{id:"2b",title:"Documentation guide",description:"The documentation for the function",content:`Minimum Viable Documentation
A small set of fresh and accurate docs is better than a large assembly of \u{201C}documentation\u{201D} in various states of disrepair.

Write short and useful documents. Cut out everything unnecessary, including out-of-date, incorrect, or redundant information. Also make a habit of continually massaging and improving every doc to suit your changing needs. Docs work best when they are alive but frequently trimmed, like a bonsai tree.

See also these Agile Documentation best practices.

Update Docs with Code
Change your documentation in the same CL as the code change. This keeps your docs fresh, and is also a good place to explain to your reviewer what you\u{2019}re doing.

A good reviewer can at least insist that docstrings, header files, README.md files, and any other docs get updated alongside the CL.

Delete Dead Documentation
Dead docs are bad. They misinform, they slow down, they incite despair in engineers and laziness in team leads. They set a precedent for leaving behind messes in a code base. If your home is clean, most guests will be clean without being asked.

Just like any big cleaning project, it\u{2019}s easy to be overwhelmed. If your docs are in bad shape:

Take it slow, doc health is a gradual accumulation.
First delete what you\u{2019}re certain is wrong, ignore what\u{2019}s unclear.
Get your whole team involved. Devote time to quickly scan every doc and make a simple decision: Keep or delete?
Default to delete or leave behind if migrating. Stragglers can always be recovered.
Iterate.
Prefer the Good Over the Perfect
Documentation is an art. There is no perfect document, there are only proven methods and prudent guidelines. See Better is better than best.

Documentation is the Story of Your Code
Writing excellent code doesn\u{2019}t end when your code compiles or even if your test coverage reaches 100%. It\u{2019}s easy to write something a computer understands, it\u{2019}s much harder to write something both a human and a computer understand. Your mission as a Code Health-conscious engineer is to write for humans first, computers second. Documentation is an important part of this skill.

There\u{2019}s a spectrum of engineering documentation that ranges from terse comments to detailed prose:

Meaningful names: Good naming allows the code to convey information that would otherwise be relegated to comments or documentation. This includes nameable entities at all levels, from local variables to classes, files, and directories.

Inline comments: The primary purpose of inline comments is to provide information that the code itself cannot contain, such as why the code is there.

Method and class comments:

Method API documentation: The header / Javadoc / docstring comments that say what methods do and how to use them. This documentation is the contract of how your code must behave. The intended audience is future programmers who will use and modify your code.

It is often reasonable to say that any behavior documented here should have a test verifying it. This documentation details what arguments the method takes, what it returns, any \u{201C}gotchas\u{201D} or restrictions, and what exceptions it can throw or errors it can return. It does not usually explain why code behaves a particular way unless that\u{2019}s relevant to a developer\u{2019}s understanding of how to use the method. \u{201C}Why\u{201D} explanations are for inline comments. Think in practical terms when writing method documentation: \u{201C}This is a hammer. You use it to pound nails.\u{201D}

Class / Module API documentation: The header / Javadoc / docstring comments for a class or a whole file. This documentation gives a brief overview of what the class / file does and often gives a few short examples of how you might use the class / file.

Examples are particularly relevant when there\u{2019}s several distinct ways to use the class (some advanced, some simple). Always list the simplest use case first.

README.md: A good README.md orients the new user to the directory and points to more detailed explanation and user guides:

What is this directory intended to hold?
Which files should the developer look at first? Are some files an API?
Who maintains this directory and where I can learn more?
See the README.md guidelines.

docs: The contents of a good docs directory explain how to:

Get started using the relevant API, library, or tool.
Run its tests.
Debug its output.
Release the binary.
Design docs, PRDs: A good design doc or PRD discusses the proposed implementation at length for the purpose of collecting feedback on that design. However, once the code is implemented, design docs should serve as archives of these decisions, not as half-correct docs (they are often misused).

Other external docs: Some teams maintain documentation in other locations, separate from the code, such as Google Sites, Drive, or wiki. If you do maintain documentation in other locations, you should clearly point to those locations from your project directory (for example, by adding an obvious link to the location from your project\u{2019}s README.md).

Duplication is Evil
Do not write your own guide to a common Google technology or process. Link to it instead. If the guide doesn\u{2019}t exist or it\u{2019}s badly out of date, submit your updates to the appropriate directory or create a package-level README.md. Take ownership and don\u{2019}t be shy: Other teams will usually welcome your contributions.`,type:"text",metadata:{inputType:"text"}},{id:"3b",title:"My personal skillset",description:"",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"4b",title:"Documented code",description:"The code with documentation",content:`You're documenting your code for your team.

Update this code: {{1b}}

Using this guide: {{2b}}]

And incorporate {{3b}}`,type:"prompt"},{id:"5b",title:"Function tests",description:"Generate a test for the code",content:"You're generating a Jest test for {{4b}}. Our testing guidelines: {{6b}}",type:"prompt"},{id:"6b",title:"Testing guidelines",description:"The guidelines for testing",content:`The Test Anatomy

\u{26AA} \u{FE0F} 1.1 Include 3 parts in each test name
\u{2705} Do: A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:

(1) What is being tested? For example, the ProductsService.addNewProduct method

(2) Under what circumstances and scenario? For example, no price is passed to the method

(3) What is the expected result? For example, the new product is not approved


\u{274C} Otherwise: A deployment just failed, a test named \u{201C}Add product\u{201D} failed. Does this tell you what exactly is malfunctioning?


\u{1F447} Note: Each bullet has code examples and sometime also an image illustration. Click to expand



\u{26AA} \u{FE0F} 1.2 Structure tests by the AAA pattern
\u{2705} Do: Structure your tests with 3 well-separated sections Arrange, Act & Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:

1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects, and any other preparation code

2nd A - Act: Execute the unit under test. Usually 1 line of code

3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code


\u{274C} Otherwise: Not only do you spend hours understanding the main code but what should have been the simplest part of the day (testing) stretches your brain


\u{26AA} \u{FE0F}1.3 Describe expectations in a product language: use BDD-style assertions
\u{2705} Do: Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using expect or should and not using custom code. If Chai & Jest doesn't include the desired assertion and it\u{2019}s highly repeatable, consider extending Jest matcher (Jest) or writing a custom Chai plugin

\u{274C} Otherwise: The team will write less tests and decorate the annoying ones with .skip()


\u{26AA}  1.4 Stick to black-box testing: Test only public methods
\u{2705} Do: Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as behavioral testing. On the other side, should you test the internals (white box approach) \u{2014} your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden

\u{274C} Otherwise: Your tests behave like the boy who cried wolf: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored\u{2026}


\u{26AA}  1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies
\u{2705} Do: Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (Read here a reminder about test doubles: mocks vs stubs vs spies).

Before using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If not, it\u{2019}s a white-box testing smell.

For example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some \u{2018}No Response\u{2019} return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down \u{2014} this is again a behavioral check which is likely to appear in a requirements doc (\u{201C}Send an email if payment couldn\u{2019}t be saved\u{201D}). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types \u{2014} then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently

\u{274C} Otherwise: Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend



\u{26AA} 1.6 Don\u{2019}t \u{201C}foo\u{201D}, use realistic input data
\u{2705} Do: Often production bugs are revealed under some very specific and surprising input \u{2014} the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like Chance or Faker to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit cards, company names, and even \u{2018}lorem ipsum\u{2019} text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers' data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).

\u{274C} Otherwise: All your development testing will falsely show green when you use synthetic inputs like \u{201C}Foo\u{201D}, but then production might turn red when a hacker passes-in a nasty string like \u{201C}@3e2ddsf . ##\u{2019} 1 fdsfds . fds432 AAAA\u{201D}

`,type:"text",metadata:{inputType:"text"}},{id:"7b",title:"Test results",description:"Run the test for the code",content:"You're running tests for {{5b}}. Respond with the results of the tests.",type:"prompt"},{id:"8",title:"Documented and tested code",description:"The code with documentation and test",content:`Here's the documented code: {{4b}}.

Here's the {{5b}} and the {{7b}}.

Respond with "\u{2705} OK" if the tests all pass, and show a code block with the documented code and tests.`,type:"prompt"}]},{id:"dummy-3",dummy:!0,title:"Generate a course teaching me how this code works",owned:!0,description:"Generate a course teaching me how this code works",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1c",title:"Code to explain",description:"The code to explain",content:`import {ticks, tickIncrement} from "d3-array";
import continuous, {copy} from "./continuous.js";
import {initRange} from "./init.js";
import tickFormat from "./tickFormat.js";

export function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    while (maxIter-- > 0) {
      step = tickIncrement(start, stop, count);
      if (step === prestep) {
        d[i0] = start
        d[i1] = stop
        return domain(d);
      } else if (step > 0) {
        start = Math.floor(start / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start = Math.ceil(start * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }

    return scale;
  };

  return scale;
}

export default function linear() {
  var scale = continuous();

  scale.copy = function() {
    return copy(scale, linear());
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}`,type:"code"},{id:"2c",title:"My skillset",description:"My skillset",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"3c",title:"Course outline",description:"The outline of the course",content:"You're generating a course teaching me how to understand {{1c}}. I have the following skillset: {{2c}}. Keep it short and concise, with 2-3 sections.",type:"prompt"},{id:"4c",title:"Course content",description:"The content of the course",content:`Generate a short walkthrough that teaches me how to understand {{1c}}. I have the following skillset: {{2c}}.

Flesh out the {{3c}}. Respond with a short walkthrough, using code blocks for code samples.`,type:"prompt"}]},{id:"dummy-4",dummy:!0,title:"Generate app name",owned:!0,description:"Generate and validate potential names for your app",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1d",title:"App description",description:"Describe your app's purpose and target audience",type:"text",metadata:{inputType:"text"},content:"An email app that uses AI to help you write emails faster."},{id:"2d",title:"Generate names",description:"Generate potential names based on description",type:"prompt",content:`You're a creative app naming expert. Generate 10 potential names for an app based on this description: {{1d}}

Rules for the names:
- Keep them short and memorable
- Make sure they're easy to spell
- Consider domain name availability
- Avoid trademarked terms

Format: a JSON array with one name per line`},{id:"3d",title:"Check domain availability",description:"Check if domains are available for the generated names",type:"code",content:`// This code checks domain availability using DNS lookup
  const nameList = {{2d}}

  const results = [];

  for (const name of nameList) {
    const cleanName = name.toLowerCase().replace(/[^a-z0-9]/g, '');
    const domain = cleanName + '.com';

    try {
      // Try to resolve the domain - if it fails, domain might be available
      const response = await fetch(\`https://dns.google/resolve?name=\${domain}\`);
      const data = await response.json();

      results.push({
        name: name,
        domain: domain,
        available: data.Status === 3 || !data.Answer // NXDOMAIN status or no answer means likely available
      });
    } catch (error) {
      results.push({
        name: name,
        domain: domain,
        error: 'Failed to check availability'
      });
    }
  }

  return results;
`}]},{id:"dummy-5",dummy:!0,title:"Wikipedia",owned:!0,description:"Generate a wiki article on a topic or question",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1e",title:"Topic or question",description:"The topic or question to generate a wiki article on",type:"text",metadata:{inputType:"text"},content:"When do babies start to crawl?"},{id:"2e",title:"Split into topics",description:"Split the topic or question into topics",type:"text",metadata:{inputType:"text"},content:`You're creating a write-up on a concept. You need to split it into 5-6 sections that cover interesting aspects of the concept. Respond with a JSON array with one string per topic.

For example:
Concept: Dogs as pets
Topics:
["Dog breeds", "Dog training", "Dog costs", "Dog health", "Dog accessories"]


Concept: {{1e}}
Topics:`},{id:"3e",title:"Generate article",description:"Generate a wiki article on the concept",type:"prompt",content:"You're a wiki article generator. Generate a wiki article on the concept: {{1e}}. Split it into sections: {{2e}} with a title, a bolded key statement, and a list or 2 paragraphs."},{id:"4e",title:"Image",description:"An image for the article",type:"prompt",content:"Generate an ascii art image for the article: {{3e}}"}]},{id:"dummy-6",dummy:!0,title:"Compare two prompts",owned:!0,description:"Compare the performance of two prompts",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1f",title:"Prompt 1",description:"The first prompt to compare",type:"prompt",content:"Make me a haiku about the color blue"},{id:"2f",title:"Prompt 2",description:"The second prompt to compare",type:"prompt",content:"You are a haiku generator. Make a haiku about the color blue. Your job depends on it."},{id:"3f",title:"Important metrics",description:"The important metrics to compare the prompts on",type:"text",metadata:{inputType:"text"},content:"Relevance, creativity, accuracy, completeness, and style"},{id:"4f",title:"Compare",description:"Compare the performance of the two prompts",type:"prompt",content:"For each of the {{3f}}, compare the two prompts: {{1f}} and {{2f}}. Respond with a JSON array with one object per metric, with the metric name and a winner key that says which prompt is better (just say 1 or 2)."}]},{id:"dummy-7",dummy:!0,title:"testing node with offset",owned:!0,description:"Test the edge render behavior for diagram with node offset",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"lichin-lin",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-7d",metadata:{inputType:"date"}},{id:"repos",type:"text",title:"Repositories",description:"List of repositories to include in the report (one per line, e.g. primer/react)",content:`primer/react
primer/css
primer/components`,metadata:{inputType:"text"}},{id:"repo_query",type:"prompt",title:"Repository Query Builder",description:"Builds the repository query string for GitHub search",content:`Convert this list of repositories into a GitHub search query format. For each repository on a new line in {{repos}}, add 'repo:' prefix and combine with OR operators.

For example:
- If input is 'primer/react\\nprimer/css'
- Output should be 'repo:primer/react OR repo:primer/css'

Only return the query string, nothing else.`},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) author:{{1}} is:issue created:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          repository {
            nameWithOwner
          }
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) is:pr reviewed-by:{{1}} updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          repository {
            nameWithOwner
          }
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) involves:{{1}} is:issue updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          repository {
            nameWithOwner
          }
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Combined Activity Summary",description:"Summary report of the first responder's activity across all repositories",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity across multiple repositories over the past week. The repositories included are: {{repos}}

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers across all repositories)
2. Repository Breakdown (activity summary per repository)
3. Issue Activity
   - Created Issues (grouped by repository)
   - Issue Involvement (comments, assignments, grouped by repository)
4. PR Review Activity (highlight significant reviews, grouped by repository)
5. Key Observations (patterns across repositories, areas needing attention)

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift. Pay special attention to cross-repository patterns and any repositories that may need extra attention.`}]}]},79036:(e,t,n)=>{n.d(t,{S:()=>c,Xh:()=>d,GF:()=>u});var i=n(74848),a=n(68273),s=n(16522),r=n(34164),l=n(48505);let o="AnnotationIcon-module__AnimatedAnnotationIcon--rXSEJ";function d({annotationLevel:e,...t}){let{icon:n,...a}=u[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:a,className:s}){return(0,i.jsx)("svg",{"aria-label":n,className:s,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:a})}({...n,...a,...t})}let c=(0,a.GV)()?function(e){let t,n,a,l,c=(0,s.c)(8);return c[0]!==e?({className:t,...n}=e,c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]),c[3]!==t?(a=(0,r.$)(o,t),c[3]=t,c[4]=a):a=c[4],c[5]!==n||c[6]!==a?(l=(0,i.jsx)(d,{...n,className:a}),c[5]=n,c[6]=a,c[7]=l):l=c[7],l}:function({className:e,...t}){return(0,i.jsx)(d,{...t,className:(0,r.$)(o,e)})},u={[l.UZ.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",primaryColorClass:"fgColor-danger",borderColor:"borderColor-danger-emphasis",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[l.UZ.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",primaryColorClass:"fgColor-attention",borderColor:"borderColor-attention-emphasis",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[l.UZ.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",primaryColorClass:"fgColor-muted",borderColor:"fgColor-muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{d.displayName||(d.displayName="AnnotationIcon")}catch{}try{c.displayName||(c.displayName="AnimatedAnnotationIcon")}catch{}},79196:(e,t,n)=>{n.d(t,{U:()=>a2});var i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,C,_,N,S,I,k,L,D,T,E,A,R,O,P,F,M,$,B,V,U,q,H,G,K,W=n(74848),z=n(16522),Q=n(2635),Z=n(33592),J=n(7730),Y=n(25641),X=n(35247),ee=n(72206),et=n(53419),en=n(894),ei=n(75202),ea=n(6551),es=n(97068),er=n(38621),el=n(45800),eo=n(26108),ed=n(94236),ec=n(5524),eu=n(71941),em=n(34164),eh=n(96540),ef=n(22116);let ep="ContentPreview-module__slimLineTopTabs--GBdF0",eg="ContentPreview-module__toolbar--_XWuB",ey="ContentPreview-module__actions--o_YRg",ex="ContentPreview-module__rightDivider--LY__Z",ev="ContentPreview-module__content--FgZZL";var eb=n(1747),ej=n(47789),ew=n(90651),eC=n(49246),e_=n(66827),eN=n(29731),eS=n(46251),eI=n(11680),ek=n(43715),eL=n(38598);function eD(e){let t,n,i,a,s,r=(0,z.c)(11),{title:l,description:o,icon:d}=e;return r[0]!==d?(t=(0,W.jsx)(d,{size:24,className:"FailureState-module__icon--TP632"}),r[0]=d,r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,W.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),r[2]=n):n=r[2],r[3]!==l?(i=(0,W.jsx)("h2",{className:"FailureState-module__heading--ohXqD",children:l}),r[3]=l,r[4]=i):i=r[4],r[5]!==o?(a=(0,W.jsx)("p",{className:"FailureState-module__subtitle--VM7x1",children:o}),r[5]=o,r[6]=a):a=r[6],r[7]!==t||r[8]!==i||r[9]!==a?(s=(0,W.jsxs)("div",{className:"FailureState-module__container--EliAz",children:[t,n,i,a]}),r[7]=t,r[8]=i,r[9]=a,r[10]=s):s=r[10],s}try{eD.displayName||(eD.displayName="FailureState")}catch{}var eT=n(26100),eE=n(7812);function eA(e){let t,n,i,a,s,r=(0,z.c)(16),{item:l,onVersionSelect:o}=e,{versionedItems:d,openItem:c,items:u}=(0,eb.xx)(),m=(0,eE.oy)(l.id),h=d.get(m)??[],f=l.id;"duplicateOf"in l&&l.duplicateOf&&(f=l.duplicateOf);let p=h.indexOf(f);(0,eh.useEffect)(()=>{o&&h.length>1&&o(`Version${p+1}`)},[p,o,h.length]);let g=Array.from(u.values()).some(eR);if(h.length<=1||g)return null;let y=ed.W,x=p+1;r[0]!==x?(t=(0,W.jsx)(ed.W.Button,{variant:"invisible",className:"VersionSelector-module__anchor--Tx_UX",children:(0,W.jsx)(eT.g,{version:x,"data-testid":"version-selector"})}),r[0]=x,r[1]=t):t=r[1];let v=ed.W,b=ec.l;r[2]!==l.id||r[3]!==o||r[4]!==c?(n=(e,t)=>(0,W.jsxs)(ec.l.Item,{onSelect:()=>{c(e),o&&o(`Version${t+1}`)},selected:e===l.id,children:[(0,W.jsx)(ec.l.LeadingVisual,{children:(0,W.jsx)(eT.g,{version:t+1})}),"Version ",t+1]},e),r[2]=l.id,r[3]=o,r[4]=c,r[5]=n):n=r[5];let j=h.map(n);return r[6]!==b||r[7]!==j?(i=(0,W.jsx)(b,{selectionVariant:"single",children:j}),r[6]=b,r[7]=j,r[8]=i):i=r[8],r[9]!==v.Overlay||r[10]!==i?(a=(0,W.jsx)(v.Overlay,{children:i}),r[9]=v.Overlay,r[10]=i,r[11]=a):a=r[11],r[12]!==y||r[13]!==t||r[14]!==a?(s=(0,W.jsxs)(y,{children:[t,a]}),r[12]=y,r[13]=t,r[14]=a,r[15]=s):s=r[15],s}function eR(e){return"isStreaming"in e&&e.isStreaming}try{eA.displayName||(eA.displayName="VersionSelector")}catch{}var eO=n(17831),eP=n(83494),eF=n(57387),eM=n(69726),e$=n(21373),eB=n(79431),eV=n(28177),eU=n(39344),eq=n(62559),eH=n(81724),eG=n(977),eK=n(81171),eW=n(18501),ez=n(30721),eQ=n(40961),eZ=n(5338),eJ=n(18312),eY=n(46461);let eX={kind:"InlineDataFragment",name:"useIssueQueryIssueContent"};eX.hash="a175c12fb4b38762491470789bca7dee";let e0=(i={defaultValue:null,kind:"LocalArgument",name:"name"},a={defaultValue:null,kind:"LocalArgument",name:"number"},s={defaultValue:null,kind:"LocalArgument",name:"owner"},r=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],l=[{kind:"Variable",name:"number",variableName:"number"}],o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},g=[p={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],y={alias:null,args:null,kind:"ScalarField",name:"isArchived",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"isCopilotAgentEnabled",storageKey:null},v=[f],j={alias:null,args:b=[{kind:"Literal",name:"first",value:20}],concreteType:"ProjectV2ItemConnection",kind:"LinkedField",name:"projectItems",plural:!1,selections:[{alias:null,args:null,concreteType:"ProjectV2Item",kind:"LinkedField",name:"nodes",plural:!0,selections:[o,{alias:null,args:null,concreteType:"ProjectV2",kind:"LinkedField",name:"project",plural:!1,selections:[o,u],storageKey:null}],storageKey:null}],storageKey:"projectItems(first:20)"},w={alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"IssueConnection",kind:"LinkedField",name:"subIssues",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:"subIssues(first:1)"},C=[f,o],{fragment:{argumentDefinitions:[i,a,s],kind:"Fragment",metadata:null,name:"useIssueQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:l,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"useIssueQueryIssueContent",selections:[o,d,c,u,m,h,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[o,d,f,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:g,storageKey:null},y,x,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:v,storageKey:null}],storageKey:null},{alias:null,args:b,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:g,storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:b,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:v,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[u],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:v,storageKey:null},j,w],args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[s,i,a],kind:"Operation",name:"useIssueQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:l,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[o,d,c,u,m,h,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[o,d,f,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},p,o],storageKey:null},y,x,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:C,storageKey:null}],storageKey:null},{alias:null,args:b,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:[p,o],storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:b,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:C,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[u,o],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:C,storageKey:null},j,w],storageKey:null},o],storageKey:null}]},params:{id:"74cdd586b6f12a28054626de37364e0a",metadata:{},name:"useIssueQueryQuery",operationKind:"query",text:null}});async function e1(e,t,n,i,a=!1){try{var s;let r=await (0,eJ.fetchQuery)(e,e0,{owner:t,name:n,number:i},{fetchPolicy:a?"network-only":"store-or-network"}).toPromise();if(r?.repository?.issue==null)return null;return s=r.repository.issue,(0,eJ.readInlineData)(eX,s)}catch(e){if("object"==typeof e&&null!=e&&"name"in e&&"ValidationError"===e.name&&"message"in e&&"string"==typeof e.message&&e.message.includes("NOT_FOUND"))return null;throw e}}e0.hash="a1c6e44ba1445bc4d870fb9c11487d4d";var e2=n(62670),e3=n(93997),e4=n(97286);function e5(e){let t,n,i,a,s=(0,z.c)(13),{repoId:r,filename:l}=e,o=(0,eJ.useRelayEnvironment)();return s[0]!==o?(t=JSON.stringify(o),s[0]=o,s[1]=t):t=s[1],s[2]!==l||s[3]!==r||s[4]!==t?(n=["copilot-immersive-template-payload",t,r,l],s[2]=l,s[3]=r,s[4]=t,s[5]=n):n=s[5],s[6]!==o||s[7]!==l||s[8]!==r?(i=async()=>r&&l?await e6(o,r,l):null,s[6]=o,s[7]=l,s[8]=r,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,e4.I)(a)}async function e6(e,t,n){let i=await (0,eJ.fetchQuery)(e,e2.d,{repoId:t,filename:n}).toPromise();return i&&i.node?(0,e3.EV)(i.node)??null:null}let e7=crypto.randomUUID();async function e8(e,t,n){let i={},a=new Map;if((0,eY.YR)(n,e=>a.set(e.item.tag,e)),a.size>60)return i[e7]={errorMessages:["You cannot create more than 60 new issues at a time. Please remove some draft issues from the tree and try again."]},i;if(function e(t,n=0){if(n>7)return!0;if(!t.children||0===t.children.length)return!1;for(let i of t.children)if(e(i,n+1))return!0;return!1}(n))return i[e7]={errorMessages:["You cannot add more than 7 levels of sub-issues. Please remove some issues from the tree and try again."]},i;for(let[n,s]of a){let r=s.item;if(i[n]={errorMessages:[]},"new-issue"===r.type&&(!r.repository&&r.parentTag&&(r.repository=a.get(r.parentTag)?.item?.repository),!r.repository)){i[n].errorMessages.push("Repository is required");continue}let[l,o]=r.repository?.split("/")||[];if(!l||!o){i[n].errorMessages.push('Repository must be in the format "owner/repo"');continue}let d=await (0,eK.tZ)(e,l,o);if(!d){i[n].errorMessages.push("Repository not found");continue}if(d.isArchived){i[n].errorMessages.push("Repository is archived");continue}if(!d.hasIssuesEnabled){i[n].errorMessages.push("Repository does not have issues enabled");continue}if(d.viewerInteractionLimitReasonHTML){i[n].errorMessages.push(d.viewerInteractionLimitReasonHTML);continue}if(s.children.length>0&&(d.isLocked||!1===d.viewerCanPush&&d.viewerIssueCreationPermissions?.triageable===!1)){i[n].errorMessages.push("You do not have permission to create subissues in this repository");continue}if("existing-issue"===r.type){if(!r.number){i[n].errorMessages.push("Issue number is required");continue}let t=await e1(e,l,o,r.number);if(!t){i[n].errorMessages.push("Issue not found");continue}if(s.children.length>0){let e=t.subIssues?.totalCount??0,a=s.children.length;e+a>100&&i[n].errorMessages.push(`This issue already has ${e} sub-issue${1===e?"":"s"}. Adding ${a} more would exceed the maximum of 100 sub-issues.`)}continue}let c=r.template?.split("/").findLast(Boolean),u=c?await e6(e,d.id,c):void 0;if(r.template&&!u){i[n].errorMessages.push("Issue template not found");continue}if(!d.isBlankIssuesEnabled&&!u){i[n].errorMessages.push("Issue template is required");continue}let m=(0,eq.O_)(r.name);if(m.isValid||i[n].errorMessages.push(m.errorMessage||"Issue title is invalid"),u&&(0,eH.GQ)(u.data)){t.current=null;let a=document.createElement("div"),s=(0,eZ.createRoot)(a);if((0,eQ.flushSync)(()=>{s.render((0,W.jsx)(eW.c,{partialName:"copilot-creates-issues-bulk-validation",wasServerRendered:!1,children:(0,W.jsx)(ez.mf,{environment:e,children:(0,W.jsx)(e9,{repository:d,draftIssue:r,template:u,outputRef:t})})}))}),!t.current)throw Error("IssueFormRef is not set");let l=t.current;try{if(l.getInvalidInputs().length>0){i[n].errorMessages.push("Invalid form input");continue}r.body=l.markdown()}finally{l.clearSessionStorage(),s.unmount(),a.remove()}}let h=(0,eq.QK)(r.body??"");h.isValid||i[n].errorMessages.push(h.errorMessage||"Issue body is invalid")}return i}function e9(e){let t,n,i=(0,z.c)(10),{repository:a,draftIssue:s,template:r,outputRef:l}=e,o=`${a.owner.login}/${a.name}`;i[0]!==a.databaseId||i[1]!==a.slashCommandsEnabled||i[2]!==o?(t={type:"issue",repository:{databaseId:a.databaseId,nwo:o,slashCommandsEnabled:a.slashCommandsEnabled}},i[0]=a.databaseId,i[1]=a.slashCommandsEnabled,i[2]=o,i[3]=t):t=i[3];let d=t;if(!(0,eH.GQ)(r.data))return;let c=`copilot-creates-issues:${s.tag}`;return i[4]!==s.defaultValuesById||i[5]!==l||i[6]!==d||i[7]!==c||i[8]!==r.data?(n=(0,W.jsx)(eG.Z,{outputRef:l,issueFormRef:r.data,subject:d,sessionStorageKey:c,defaultValuesById:s.defaultValuesById}),i[4]=s.defaultValuesById,i[5]=l,i[6]=d,i[7]=c,i[8]=r.data,i[9]=n):n=i[9],n}try{e7.displayName||(e7.displayName="TREE_ERROR_KEY")}catch{}try{e9.displayName||(e9.displayName="IssueFormWrapper")}catch{}var te=n(50467),tt=n(17855),tn=n(72994),ti=n(69599),ta=n(94747),ts=n(96379);let tr={fragment:{argumentDefinitions:[_={defaultValue:null,kind:"LocalArgument",name:"name"},N={defaultValue:null,kind:"LocalArgument",name:"owner"}],kind:"Fragment",metadata:null,name:"useRepositoryDefaultBranchQuery",selections:[{alias:null,args:S=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[I={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[N,_],kind:"Operation",name:"useRepositoryDefaultBranchQuery",selections:[{alias:null,args:S,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[I,k={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},k],storageKey:null}]},params:{id:"cc890d4a355bf52f7d7b18263e22f595",metadata:{},name:"useRepositoryDefaultBranchQuery",operationKind:"query",text:null}};tr.hash="606cda456dcdccbb61e31c769c1ea96c";var tl=n(69487);let to=async(e,t,n)=>{let i=await (0,tl.fetchQuery)(e,tr,{owner:t,name:n},{fetchPolicy:"store-or-network"}).toPromise();return i?.repository?.defaultBranchRef?.name||null};var td=n(16049),tc=n(73952);function tu(){let e,t,n=(0,z.c)(4),{messages:i}=(0,Q.Pk)();n[0]!==i?(e=(0,tc.B)(i),n[0]=i,n[1]=e):e=n[1];let a=e;return n[2]!==a?(t=(e,t)=>null==e?Promise.resolve(t):tm(t,e.databaseId,a[0]?.threadID),n[2]=a,n[3]=t):t=n[3],t}async function tm(e,t,n){let i=e.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),a=new Set;for(let e of i||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&a.add(t)}if(a.size>0){let i=Array.from(a).map(async e=>{let t=await fetch(e),n=await t.blob(),i=n.type.split("/")[1],a=`copilot-image.${i}`,s=await createImageBitmap(n),r=s.width;return s.close(),{file:new File([n],a,{type:n.type}),url:e,width:r}}),s=await Promise.all(i);for(let n of(await Promise.all(s.map(async e=>{if(e)return{uploadedFile:await (0,td.QM)(e.file,t?.toString()),originalUrl:e.url,width:e.width}}))))if(n){let{uploadedFile:t,originalUrl:i,width:a}=n,s=t.url;if(s){let t=RegExp(`!\\[(.*?)\\]\\(${i}\\)`,"g");e=e.replace(t,`<img alt="$1" width="${a}" src="${s}" />`)}}(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:a.size,threadId:n})}return e}function th(e){return e.item.tag}function tf(e){return e.item.tag}async function tp(e,t){if(!(0,ti.G7)("copilot_api_bulk_create_agent_assignments")||!e.assignees?.some(e=>(0,tt.v)(e)))return;let[n,i]=e.repository.split("/"),a=await to(t,n,i);if(a)return{target_repo:e.repository,base_ref:a}}function tg(e){return!e.state.error&&e.state.data?.job.state!=="success"&&e.state.data?.job.state!=="error"&&2e3}var ty=n(51213),tx=n(72303),tv=n(20382);let tb={project:"Project assignment errors",dependency:"Dependency errors",update:"Partial update errors",other:"Other errors"};function tj(){let e,t=(0,z.c)(8),n=(0,Z.b)(),i=(0,Q.Pk)(),{closeItems:a,openItem:s,openPreviewPane:r,versionedItems:l,updateItem:o}=(0,eb.xx)();return t[0]!==a||t[1]!==n||t[2]!==s||t[3]!==r||t[4]!==i||t[5]!==o||t[6]!==l?(e=async e=>{if(0===e.length)return;let t=e.find(tD)??e[0];(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUES_SAVED",mode:"immersive",threadId:(0,tx.W)(i)?.id,chatReferrer:document.referrer,repositoryId:t.repository.databaseId,draftType:t.draftType,issueTag:t.tag,issueNumber:t.number,templateType:t.template?t.template.endsWith(".md")?"markdown":"yaml":"none",issuesWithCopilotAssigned:e.filter(tk).length,savedIssuesCount:e.length});let d=[],c=[],u=[];for(let t of e){let n=t.repository.owner.login,i=t.repository.name,a=t.number;o({type:"issue",id:tA(t),messageId:ty.Wp,name:t.title,owner:n,repo:i,number:a,href:t.url});let s=e.find(e=>e.tag===t.parentTag),r=t.blockedByTags?.map(t=>e.find(e=>e.tag===t)).filter(tI),l=t.isBlockingTags?.map(t=>e.find(e=>e.tag===t)).filter(tS),m=r?.length?r.map(tN):void 0,h=l?.length?l.map(t_):void 0;c.push({tag:`${n}/${i}#${a}`,parentTag:s?tE(s):void 0,blockedByTags:m,isBlockingTags:h,title:t.title,repository:`${t.repository.owner.login}/${t.repository.name}`,number:t.number,state:"open",url:t.url}),d.push(tT(t)),u.push(t.tag)}a(e.map(tC).flatMap(e=>l.get(e)??[])),s(tA(t)),r();let m=[{type:"text",name:`timeline-event: {"type": "issue-saved", "markdownContent": "${function(e){if(e.length>1)return`Saved ${e.length} issues`;{let t=e[0],n=tT(t),i="new-issue"===t.draftType?"Created":"Updated";return`${i} issue ${n}`}}(e)}"}`,text:`${e.length>1?"Fetch the details for all saved issues and return them in a code block with YAML following this example format:":"Fetch the issue details and return them in a code block with YAML following this example format:"}
\`\`\`\`yaml type="issue-tree"
${(0,tv.Bh)({data:c},{forceQuotes:!0,noArrayIndent:!0,lineWidth:-1})}\`\`\`\``},{type:"text",name:"ignore-obsolete-drafts",text:`From now on, you should only interact with these newly saved issues and not their corresponding drafts. You MUST exclude the draft issues with the following tags from any future tree creation: ${u.join(", ")}`},...i.currentReferences],h=e.flatMap(tw);h.length&&m.push({type:"text",name:"summarize-continuable-errors",text:`These issues were saved with some errors. You MUST give a high-level summary of these errors at the end of your message in the language used in the conversation. Always prefix it with the word "Note:" in bold for visibility. Be clear but succinct. Here are the errors, grouped by type:
${function(e){let t={};for(let n of e){let e=tb[n.type]||"Other errors";t[e]||(t[e]=[]),t[e].push(n.message)}return Object.entries(t).map(([e,t])=>`${e}:
${t.map(e=>`- ${e}`).join(`
`)}
`).join(`
`)}(h)}`});let f=d.length>1?`Saved the issues: ${d.join(", ")}`:`Saved the issue: ${d[0]}`;await n.sendChatMessage({thread:(0,tx.W)(i),content:f,references:m,topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=i,t[5]=o,t[6]=l,t[7]=e):e=t[7],e}function tw(e){return e.errors||[]}function tC(e){return`${e.draftType}:${e.tag}`}function t_(e){return tE(e)}function tN(e){return tE(e)}function tS(e){return null!=e}function tI(e){return null!=e}function tk(e){return e.assignees.some(tL)}function tL(e){return(0,tt.v)(e)}function tD(e){return!e.parentTag}function tT(e){return`[${tE(e)}](${e.url})`}function tE(e){let t=e.repository.owner.login,n=e.repository.name,i=e.number;return`${t}/${n}#${i}`}function tA(e){let t=e.repository.owner.login,n=e.repository.name,i=e.number;return`issue:${t}/${n}/${i}`}let CreateError=class CreateError extends Error{constructor(e){super(e),(0,te._)(this,"type",void 0),(0,te._)(this,"bannerTitle",void 0),(0,te._)(this,"bannerVariant",void 0),this.name="CreateError",this.type="creation",this.bannerTitle="Errors in issue creation",this.bannerVariant="critical"}};let ValidationError=class ValidationError extends Error{constructor(e){super(e),(0,te._)(this,"type",void 0),(0,te._)(this,"bannerTitle",void 0),(0,te._)(this,"bannerVariant",void 0),this.name="ValidationError",this.type="validation",this.bannerTitle="Validation errors in issue content",this.bannerVariant="warning"}};function tR(e){let t,n,i,a,s,r,l,o,d=(0,z.c)(34),{issueNode:c,onComplete:u,onError:m,issueFormRef:h,issueTemplate:f}=e;d[0]!==h||d[1]!==c||d[2]!==f?(t={issueNode:c,issueFormRef:h,issueTemplate:f},d[0]=h,d[1]=c,d[2]=f,d[3]=t):t=d[3];let{mutate:p,isLoading:g,data:y,isComplete:x,isError:v,error:b}=function(e){var t;let n,i,a,s,r,l,o,d,c=(0,z.c)(15),{issueNode:u,issueFormRef:m,issueTemplate:h}=e;c[0]!==m||c[1]!==u||c[2]!==h?(l={issueNode:u,issueFormRef:m,issueTemplate:h},c[0]=m,c[1]=u,c[2]=h,c[3]=l):l=c[3];let f=function(e){let t,n,i,a=(0,z.c)(12),{issueNode:s,issueFormRef:r,issueTemplate:l}=e,o=(0,eJ.useRelayEnvironment)(),d=tu(),c=!s.parent&&0===s.children.length;return a[0]!==s.item.tag?(t=["copilot-issues-bulk-create",s.item.tag],a[0]=s.item.tag,a[1]=t):t=a[1],a[2]!==o||a[3]!==c||a[4]!==r||a[5]!==s||a[6]!==l||a[7]!==d?(n=async()=>{let e=[],t=new Map;await (0,eY.Pq)(s,async n=>{let i=n.item;if("existing-issue"===i.type)return void e.push({tag:i.tag,parent_tag:i.parentTag,repository_nwo:i.repository,number:i.number,blocked_by_tags:n.blockedBy.length?n.blockedBy.map(tf):void 0});let a=i.body;if(c&&l&&(0,eH.GQ)(l.data)&&r?.current&&(a=r.current.markdown()??i.body),a&&i.repository){let e=t.get(i.repository);if(!e){let[n,a]=i.repository.split("/");null!=n&&null!=a&&(e=await (0,eK.tZ)(o,n,a),t.set(i.repository,e))}a=await d(e,a)}e.push({title:i.name,tag:i.tag,repository_nwo:i.repository,body:a,parent_tag:i.parentTag,labels:i.labels,assignees:i.assignees,milestone:i.milestone,issue_type:i.issueType,template:l?.fileName,projects:(0,tn.t)(i.projects),blocked_by_tags:n.blockedBy.length?n.blockedBy.map(th):void 0,agent_assignment:await tp(i,o)})});let n=await (0,ts.Sr)("/copilot_issues/bulk_create",{method:"POST",body:{data:{issues:e}}});if(429===n.status)throw Error((await n.json()).error||"Rate limit exceeded. Please try again later.");if(!n.ok)throw Error((await n.json()).error.message||"Failed to create issues.");return await n.json()},a[2]=o,a[3]=c,a[4]=r,a[5]=s,a[6]=l,a[7]=d,a[8]=n):n=a[8],a[9]!==t||a[10]!==n?(i={mutationKey:t,mutationFn:n},a[9]=t,a[10]=n,a[11]=i):i=a[11],(0,ta.n)(i)}(l),p=(t=f.data?.jobStatusUrl,s=(0,z.c)(7),r=!!t,s[0]!==t?(n=["copilot-issues-bulk-create-status",t],i=async e=>{let n=await (0,ts.Sr)(t);if(!n.ok){let t=await n.json();throw e.client.setQueryData(e.queryKey,t),Error(t?.job.error_message||"Failed to fetch job status")}return await n.json()},s[0]=t,s[1]=n,s[2]=i):(n=s[1],i=s[2]),s[3]!==r||s[4]!==n||s[5]!==i?(a={enabled:r,queryKey:n,queryFn:i,refetchInterval:tg},s[3]=r,s[4]=n,s[5]=i,s[6]=a):a=s[6],(0,e4.I)(a)),g=f.error||p.error,y=f.isError||p.isError;c[4]!==f.isPending||c[5]!==p.data?.job.state||c[6]!==p.isLoading?(o=f.isPending||p.isLoading||["pending","queued","started"].includes(p.data?.job.state||""),c[4]=f.isPending,c[5]=p.data?.job.state,c[6]=p.isLoading,c[7]=o):o=c[7];let x=p.data?.job.state==="success";return c[8]!==f.mutate||c[9]!==p.data||c[10]!==g||c[11]!==y||c[12]!==o||c[13]!==x?(d={mutate:f.mutate,data:p.data,error:g,isError:y,isLoading:o,isComplete:x},c[8]=f.mutate,c[9]=p.data,c[10]=g,c[11]=y,c[12]=o,c[13]=x,c[14]=d):d=c[14],d}(t),j=tj();d[4]!==h||d[5]!==c||d[6]!==f||d[7]!==m?(n=()=>{let e;if(!c)return!1;let t=c.item;if("new-issue"!==t.type)return!0;let n=t.name||"",i=(0,eq.O_)(n);if(!i.isValid)return m?.(new ValidationError(i.errorMessage||"Issue title is invalid")),!1;let a=(0,eq.QK)(t.body||"");if(!a.isValid)return m?.(new ValidationError(a.errorMessage||"Issue body is invalid")),!1;if(f&&(0,eH.GQ)(f.data)&&h.current){let t=h.current.getInvalidInputs();if(t.length>0)return e=t[0],m?.(new ValidationError("Please fix the validation errors in the form")),e?.focus(),!1}return!0},d[4]=h,d[5]=c,d[6]=f,d[7]=m,d[8]=n):n=d[8];let w=n;d[9]!==x||d[10]!==g||d[11]!==c||d[12]!==p||d[13]!==w?(i=()=>{!g&&!x&&(c.parent||0!==c.children.length||w())&&p()},d[9]=x,d[10]=g,d[11]=c,d[12]=p,d[13]=w,d[14]=i):i=d[14];let C=i,_=tO;return d[15]!==b||d[16]!==v||d[17]!==m?(a=()=>{v&&b&&m?.(new CreateError(b.message))},s=[v,b,m],d[15]=b,d[16]=v,d[17]=m,d[18]=a,d[19]=s):(a=d[18],s=d[19]),(0,eh.useEffect)(a,s),d[20]!==y||d[21]!==x||d[22]!==c||d[23]!==u||d[24]!==j?(r=()=>{if(!y||!x)return;let e=_(y,c);u(),j(e)},l=[y,x,c,u,j,_],d[20]=y,d[21]=x,d[22]=c,d[23]=u,d[24]=j,d[25]=r,d[26]=l):(r=d[25],l=d[26]),(0,eh.useEffect)(r,l),d[27]!==y||d[28]!==b||d[29]!==C||d[30]!==x||d[31]!==v||d[32]!==g?(o={handleCreate:C,isLoading:g,isComplete:x,isError:v,error:b,data:y},d[27]=y,d[28]=b,d[29]=C,d[30]=x,d[31]=v,d[32]=g,d[33]=o):o=d[33],o}function tO(e,t){if(!e||0===e.job.completed_issues.length)return[];let n=new Map;return(0,eY.Pt)(t,e=>{n.set(e.item.tag,e.item)}),e.job.completed_issues.map(e=>{let t=n.get(e.tag),[i,a]=t.repository.split("/");return{draftType:t.type,tag:e.tag,parentTag:t.parentTag,blockedByTags:t.blockedByTags,isBlockingTags:t.isBlockingTags,template:"new-issue"===t.type?t.template:void 0,repository:{databaseId:e.repository_id,name:a,owner:{login:i}},number:e.number,title:t.name,url:e.href,assignees:"assignees"in t?t.assignees??[]:[],errors:e.errors||[]}})}function tP({issueNode:e,onComplete:t,onCancel:n}){let i=(0,eh.useMemo)(()=>{let t=e;for(;t?.parent;)t=t.parent;return t},[e]),a=(0,eh.useMemo)(()=>{let e=0;return(0,eY.YR)(i,t=>{"new-issue"===t.item.type&&e++}),e},[i]),{handleCreate:s,isLoading:r,isComplete:l,isError:o,error:d,data:c}=tR({issueNode:i,onComplete:t}),{loading:u,result:m}=function(e){let t,n,i,a,s=(0,z.c)(8),[r,l]=(0,eh.useState)(!1);s[0]===Symbol.for("react.memo_cache_sentinel")?(t={},s[0]=t):t=s[0];let[o,d]=(0,eh.useState)(t),c=(0,eJ.useRelayEnvironment)(),u=(0,eh.useRef)(null);return s[1]!==c||s[2]!==e?(n=()=>{!async function(){l(!0),d(await e8(c,u,e)),l(!1)}()},i=[c,e],s[1]=c,s[2]=e,s[3]=n,s[4]=i):(n=s[3],i=s[4]),(0,eh.useEffect)(n,i),s[5]!==r||s[6]!==o?(a={loading:r,result:o},s[5]=r,s[6]=o,s[7]=a):a=s[7],a}(i),h=(0,eh.useMemo)(()=>m&&Object.values(m).some(e=>e.errorMessages.length>0),[m]),f=(0,eh.useCallback)(()=>{r||l||n()},[r,l,n]),p=(0,eh.useMemo)(()=>{let e=new Set;return((0,eY.YR)(i,t=>e.add(t.item.type)),1===e.size&&"existing-issue"===i.item.type)?{title:"Update existing issues?",description:"Clicking Update will update the relationships between the issues shown below.",button:"Update issues"}:e.size>1&&"existing-issue"===i.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish all Copilot draft issues shown below. Existing sub-issues aren't displayed and remain unchanged.",button:1===a?"Create 1 issue":`Create ${a} issues`}:e.size>1&&"new-issue"===i.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish the Copilot draft issues shown below.",button:1===a?"Create 1 issue":`Create ${a} issues`}:{title:"Create all linked draft issues?",description:"These drafts are linked. Creating a sub-issue automatically publishes its parent and any nested drafts.",button:1===a?"Create 1 issue":`Create ${a} issues`}},[i,a]),{openItem:g,openPreviewPane:y}=(0,eb.xx)(),x=(0,eh.useCallback)(e=>{r||l||(g(e.item.id,!0),y(),n())},[l,r,n,g,y]),v=(0,eh.useMemo)(()=>m[e7]?m[e7]?.errorMessages[0]:"Fill out missing required fields to create all of these issues.",[m]);return(0,W.jsx)(eF.l,{title:p.title,onClose:f,renderFooter:()=>u?null:(0,W.jsxs)(eF.l.Footer,{className:"BulkCreateDialog-module__dialogFooter--aWAd9",children:[(0,W.jsx)("div",{className:"BulkCreateDialog-module__dialogFooterStatus--RMt1N",children:o&&(0,W.jsx)(eB.v,{variant:"critical",children:d?.message})}),(0,W.jsxs)("div",{className:"BulkCreateDialog-module__dialogFooterActions--BvuR4",children:[(0,W.jsx)(e$.Q,{variant:"default",onClick:f,inactive:r||l,children:"Cancel"}),(0,W.jsx)(e$.Q,{variant:"primary",onClick:s,loading:r||l,disabled:h||o,children:p.button})]})]}),children:u?(0,W.jsx)("div",{className:"BulkCreateDialog-module__loadingIndicator--sRZcS",role:"status","aria-label":"Validating issues",children:(0,W.jsx)(eM.A,{})}):h?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(eI.l,{variant:"warning",hideTitle:!0,title:"Validation errors",description:v,className:"mb-3"}),(0,W.jsx)(tF,{issueNode:i,onNodeClick:x,statusSelector:e=>{let t=m[e.item.tag]?.errorMessages[0];if(t)return{trailingVisual:(0,W.jsx)(er.AlertIcon,{className:"fgColor-attention","data-testid":`warning-icon-${e.item.tag}`}),description:(0,W.jsx)("span",{className:"fgColor-attention",children:t})}}})]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("p",{children:p.description}),(0,W.jsx)(tF,{issueNode:i,onNodeClick:x,statusSelector:e=>({trailingVisual:c?.job.completed_issues.some(t=>t.tag===e.item.tag)&&(0,W.jsx)(er.CheckIcon,{className:"fgColor-success","data-testid":`success-icon-${e.item.tag}`})})})]})})}function tF({issueNode:e,onNodeClick:t,statusSelector:n}){let{versionedItems:i,items:a}=(0,eb.xx)(),s=(0,eh.useMemo)(()=>{let t=0;return(0,eY.YR)(e,e=>{e.parent&&t++}),t},[e]),r=e=>e.blockedBy.map(e=>({title:e.item.name??"",onClick:()=>{t(e)}})),l=e=>{let s=(0,eE.LU)(e.item.id,i,a),o=n?.(e);return(0,W.jsx)(eU.K.Item,{title:e.item.name,leadingVisual:(0,W.jsx)(eV.n,{...e.item}),trailingBadge:(0,W.jsxs)(W.Fragment,{children:[null!=s?(0,W.jsx)(eT.g,{version:s}):void 0,(0,W.jsx)(tM,{node:e})]}),trailingVisual:o?.trailingVisual,description:o?.description,onClick:()=>t(e),blockedBy:r(e),children:e.children.map(l)},e.item.tag)},o=(0,eE.LU)(e.item.id,i,a),d=n?.(e);return(0,W.jsxs)(eU.K,{subIssueHeaderText:"existing-issue"===e.item.type?"New sub-issues":void 0,subIssueCount:s,hasTrailingVisuals:!0,children:[(0,W.jsx)(eU.K.RootItem,{title:e.item.name,leadingVisual:(0,W.jsx)(eV.n,{...e.item}),trailingBadge:(0,W.jsxs)(W.Fragment,{children:[null!=o?(0,W.jsx)(eT.g,{version:o}):void 0,(0,W.jsx)(tM,{node:e})]}),trailingVisual:d?.trailingVisual,description:d?.description,onClick:()=>t(e),blockedBy:r(e)}),e.children.map(l)]})}function tM(e){let t,n=(0,z.c)(2),{node:i}=e;if(i.item.repository&&i.item.repository!==i.parent?.item.repository)return n[0]!==i.item.repository?(t=(0,W.jsx)("span",{className:"fgColor-muted",children:i.item.repository}),n[0]=i.item.repository,n[1]=t):t=n[1],t}try{tP.displayName||(tP.displayName="BulkCreateDialog")}catch{}try{tF.displayName||(tF.displayName="IssueTree")}catch{}try{tM.displayName||(tM.displayName="IssueLocation")}catch{}function t$(e){let t,n,i,a,s,r=(0,z.c)(11),{issueNode:l,disabled:o,onSuccess:d}=e,c=void 0!==o&&o,[u,m]=(0,eh.useState)(!1),h=l;for(;h?.parent;)h=h.parent;let f=h,p=new Set;(0,eY.YR)(f,e=>p.add(e.item.type));e:{if(1===p.size&&p.has("existing-issue")){t="Review and update";break e}t="Review and create"}let g=t;return p.size>1&&"existing-issue"===l.item.type?null:(r[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e.preventDefault(),m(!0)},r[0]=n):n=r[0],r[1]!==g||r[2]!==c?(i=(0,W.jsx)(eP.cQ,{commandId:"github:submit-form",variant:"primary",disabled:c,"data-testid":"create-bulk-issue-dialog-button",showKeybindingHint:!0,onClick:n,children:g}),r[1]=g,r[2]=c,r[3]=i):i=r[3],r[4]!==d||r[5]!==f||r[6]!==u?(a=u&&(0,W.jsx)(tP,{issueNode:f,onComplete:()=>{m(!1),d()},onCancel:()=>{m(!1)}}),r[4]=d,r[5]=f,r[6]=u,r[7]=a):a=r[7],r[8]!==i||r[9]!==a?(s=(0,W.jsxs)(W.Fragment,{children:[i,a]}),r[8]=i,r[9]=a,r[10]=s):s=r[10],s)}try{t$.displayName||(t$.displayName="BulkCreateButton")}catch{}function tB(e){let t,n,i,a,s,r,l=(0,z.c)(29),{issueTemplate:o,issueNode:d,issueFormRef:c,noRepoAccess:u,onClose:m,onError:h,onClearError:f}=e,p=void 0!==u&&u,[g,y]=eh.useState(!1),x=eh.useRef(null),[v,b]=eh.useState(!1),{repository:j}=(0,eO.u)(),w=j&&!o&&!j.isBlankIssuesEnabled,{clearSessionData:C}=(0,eO.u)();l[0]!==C||l[1]!==c?(t=()=>{C(),c.current?.clearSessionStorage()},l[0]=C,l[1]=c,l[2]=t):t=l[2];let _=t;l[3]!==_||l[4]!==m?(n=()=>{_(),m?.(),b(!1)},l[3]=_,l[4]=m,l[5]=n):n=l[5];let N=n;l[6]!==h?(i=e=>{h?.(e),b(!1)},l[6]=h,l[7]=i):i=l[7];let S=i;l[8]!==N||l[9]!==S||l[10]!==c||l[11]!==d||l[12]!==o?(a={issueNode:d,onComplete:N,onError:S,issueFormRef:c,issueTemplate:o},l[8]=N,l[9]=S,l[10]=c,l[11]=d,l[12]=o,l[13]=a):a=l[13];let{handleCreate:I}=tR(a);if(d?.parent||d?.children.length){let e;return l[14]!==N||l[15]!==d||l[16]!==p?(e=(0,W.jsx)(t$,{issueNode:d,disabled:p,onSuccess:N}),l[14]=N,l[15]=d,l[16]=p,l[17]=e):e=l[17],e}if(!j||!j.hasIssuesEnabled)return null;if(w){let e,t,n;return l[18]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eP.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-issue-dialog-button",ref:x,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),y(!0)},children:"Create"}),l[18]=e):e=l[18],l[19]!==g?(t=g&&(0,W.jsx)(eF.l,{title:"Select a template",onClose:()=>y(!1),footerButtons:[{buttonType:"primary",content:"OK",onClick:()=>y(!1)}],returnFocusRef:x,children:"This repository requires all issues to have a template. To create this issue, first select the appropriate template from the template dropdown."}),l[19]=g,l[20]=t):t=l[20],l[21]!==t?(n=(0,W.jsxs)(W.Fragment,{children:[e,t]}),l[21]=t,l[22]=n):n=l[22],n}return l[23]!==I||l[24]!==f?(s=e=>{e.preventDefault(),f?.(),b(!0),I()},l[23]=I,l[24]=f,l[25]=s):s=l[25],l[26]!==v||l[27]!==s?(r=(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(eP.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"single-create-issue-button",ref:x,inactive:v,showKeybindingHint:!0,onClick:s,children:"Create"})}),l[26]=v,l[27]=s,l[28]=r):r=l[28],r}try{tB.displayName||(tB.displayName="CreateIssueButton")}catch{}var tV=n(11241),tU=n(73189),tq=n(38447),tH=n(15106),tG=n(66457),tK=n(58321),tW=n(921),tz=n(85391),tQ=n(97764),tZ=n(46036),tJ=n(43063),tY=n(57478);function tX(e){let t,n,i,a,s,r,l,o,d,c,u=(0,z.c)(33),{listItem:m,actions:h}=e,{openItem:f,versionedItems:p,items:g}=(0,eb.xx)(),{item:y}=m;u[0]!==y.id||u[1]!==g||u[2]!==p?(t=(0,eE.LU)(y.id,p,g),u[0]=y.id,u[1]=g,u[2]=p,u[3]=t):t=u[3];let x=t,v=y.tag;if(u[4]!==y.id||u[5]!==f?(n=()=>f(y.id,!0),u[4]=y.id,u[5]=f,u[6]=n):n=u[6],u[7]!==y.tag||u[8]!==x?(i=null!=x?[(0,W.jsx)(eT.g,{version:x},`${y.tag}#${x}`)]:void 0,u[7]=y.tag,u[8]=x,u[9]=i):i=u[9],u[10]!==y.name||u[11]!==n||u[12]!==i?(a=(0,W.jsx)(tQ.T,{value:y.name,onClick:n,trailingBadges:i}),u[10]=y.name,u[11]=n,u[12]=i,u[13]=a):a=u[13],u[14]===Symbol.for("react.memo_cache_sentinel")?(s=[],u[14]=s):s=u[14],u[15]!==h||u[16]!==y){let e;u[18]!==y?(e=e=>({key:e.key,render:()=>(0,W.jsxs)(ec.l.Item,{onSelect:()=>e.onSelect(y),children:[(0,W.jsx)(ec.l.LeadingVisual,{children:e.icon}),e.label]},`${y.tag}-${e.key}`)}),u[18]=y,u[19]=e):e=u[19],r=h.map(e),u[15]=h,u[16]=y,u[17]=r}else r=u[17];return u[20]!==r?(l=(0,W.jsx)(tK.o,{actions:s,staticMenuActions:r}),u[20]=r,u[21]=l):l=u[21],u[22]!==h||u[23]!==m.children?(o=m.children?.length?m.children?.map(e=>(0,W.jsx)(tX,{listItem:e,actions:h},e.item.tag)):void 0,u[22]=h,u[23]=m.children,u[24]=o):o=u[24],u[25]!==y?(d=(0,W.jsx)(tW.Q,{children:(0,W.jsx)(tz.D,{children:(0,W.jsx)(eV.n,{...y})})}),u[25]=y,u[26]=d):d=u[26],u[27]!==y.tag||u[28]!==d||u[29]!==a||u[30]!==l||u[31]!==o?(c=(0,W.jsx)(tG.r,{title:a,secondaryActions:l,subItems:o,defaultExpanded:!0,children:d},v),u[27]=y.tag,u[28]=d,u[29]=a,u[30]=l,u[31]=o,u[32]=c):c=u[32],c}function t0(e){let t,n,i,a,s,r=(0,z.c)(15),{title:l,items:o,totalCount:d,actions:c}=e;if(0===o.length)return null;if(r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,em.$)("RelationshipList-module__container--djndN","mt-2 pb-1 border rounded-2"),r[0]=t):t=r[0],r[1]!==d?(n=(0,W.jsx)(tY.A,{children:d}),r[1]=d,r[2]=n):n=r[2],r[3]!==n||r[4]!==l?(i=(0,W.jsx)(tZ.s,{title:(0,W.jsx)(tJ.c,{title:l,className:"p-0",children:n}),className:"border-0 bgColor-default px-3"}),r[3]=n,r[4]=l,r[5]=i):i=r[5],r[6]!==c||r[7]!==o){let e;r[9]!==c?(e=e=>(0,W.jsx)(tX,{listItem:e,actions:c},e.item.tag),r[9]=c,r[10]=e):e=r[10],a=o.map(e),r[6]=c,r[7]=o,r[8]=a}else a=r[8];return r[11]!==i||r[12]!==a||r[13]!==l?(s=(0,W.jsx)("div",{className:t,children:(0,W.jsx)(tH.v,{title:l,header:i,children:a})}),r[11]=i,r[12]=a,r[13]=l,r[14]=s):s=r[14],s}try{tX.displayName||(tX.displayName="RelationshipListItemComponent")}catch{}try{t0.displayName||(t0.displayName="RelationshipList")}catch{}function t1(){let e,t=(0,z.c)(4),n=(0,Z.b)(),i=(0,Q.Pk)(),{updateItem:a}=(0,eb.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async(e,t)=>{(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_REMOVE_DEPENDENCY",mode:"immersive",threadId:(0,tx.W)(i)?.id,chatReferrer:document.referrer,issueTag:e.tag,issueRepository:e.repository,blockingIssueTag:t.tag});let s={type:"text",name:`timeline-event: {"type": "remove-dependency", "markdownContent": "Removed dependency on '${t.name}'"}`,text:`Remove the dependency between '${e.tag}' and '${t.tag}'. Return the updated issues.`},r={...e,blockedByTags:e.blockedByTags?.filter(e=>e!==t.tag),isUserEdited:!1};a(r);let l={...t,isBlockingTags:t.isBlockingTags?.filter(t=>t!==e.tag),isUserEdited:!1};a(l);let o=[r,l].map(t2);await n.sendChatMessage({thread:(0,tx.W)(i),content:"Remove the blocking dependency from the issue",references:[s,...o],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}function t2(e){return"existing-issue"===e.type?(0,eE.yA)(e):(0,eE.PO)(e)}function t3(e){let t,n,i,a,s,r=(0,z.c)(11),{issueNode:l}=e,o=t1();e:{if("existing-issue"===l.item.type){t="Newly blocked by";break e}t="Blocked by"}let d=t;return r[0]!==l.blockedBy?(n=l.blockedBy.map(t4),r[0]=l.blockedBy,r[1]=n):n=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,W.jsx)(er.UnlinkIcon,{}),r[2]=i):i=r[2],r[3]!==l.item||r[4]!==o?(a=[{key:"unlink",label:"Remove dependency",icon:i,onSelect:e=>{o(l.item,e)}}],r[3]=l.item,r[4]=o,r[5]=a):a=r[5],r[6]!==l.blockedBy.length||r[7]!==n||r[8]!==a||r[9]!==d?(s=(0,W.jsx)(t0,{title:d,items:n,totalCount:l.blockedBy.length,actions:a}),r[6]=l.blockedBy.length,r[7]=n,r[8]=a,r[9]=d,r[10]=s):s=r[10],s}function t4(e){return{item:e.item}}try{t3.displayName||(t3.displayName="BlockedByList")}catch{}function t5(e){let t,n,i,a,s,r=(0,z.c)(11),{issueNode:l}=e,o=t1();e:{if("existing-issue"===l.item.type){t="Newly blocking";break e}t="Is blocking"}let d=t;return r[0]!==l.isBlocking?(n=l.isBlocking.map(t6),r[0]=l.isBlocking,r[1]=n):n=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,W.jsx)(er.UnlinkIcon,{}),r[2]=i):i=r[2],r[3]!==l.item||r[4]!==o?(a=[{key:"unlink",label:"Remove dependency",icon:i,onSelect:e=>{o(e,l.item)}}],r[3]=l.item,r[4]=o,r[5]=a):a=r[5],r[6]!==l.isBlocking.length||r[7]!==n||r[8]!==a||r[9]!==d?(s=(0,W.jsx)(t0,{title:d,items:n,totalCount:l.isBlocking.length,actions:a}),r[6]=l.isBlocking.length,r[7]=n,r[8]=a,r[9]=d,r[10]=s):s=r[10],s}function t6(e){return{item:e.item}}try{t5.displayName||(t5.displayName="BlockingList")}catch{}function t7({issueNode:e}){let t=function(){let e,t=(0,z.c)(4),n=(0,Z.b)(),i=(0,Q.Pk)(),{updateItem:a}=(0,eb.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async e=>{(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_UNLINK_FROM_PARENT",mode:"immersive",threadId:(0,tx.W)(i)?.id,chatReferrer:document.referrer,issueRepository:e.repository,issueTab:e.tag,parentIssueTag:e.parentTag});let t={type:"text",name:`timeline-event: {"type": "unlink-sub-issue", "markdownContent": "Unlinked sub-issue '${e.name}'"}`,text:`Unlink the sub issue '${e.tag}' from its parent issue by removing the 'parentTag' field. Return the updated '${e.tag}' draft-issue.`},s={...e,parentTag:void 0,isUserEdited:!1};a(s);let r="existing-issue"===s.type?(0,eE.yA)(s):(0,eE.PO)(s);await n.sendChatMessage({thread:(0,tx.W)(i),content:"Unlink the sub-issue from its parent issue",references:[t,r],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}(),n=(0,eh.useMemo)(()=>"existing-issue"===e.item.type?"New sub-issues":"Sub-issues",[e]),i=(0,eh.useMemo)(()=>{if(!e)return 0;let t=-1;return(0,eY.YR)(e,()=>t++),t},[e]);return(0,W.jsx)(t0,{title:n,items:function e(t){return t.map(t=>({item:t.item,children:e(t.children)}))}(e.children),totalCount:i,actions:[{key:"unlink",label:"Unlink sub-issue",icon:(0,W.jsx)(er.UnlinkIcon,{}),onSelect:e=>{t(e)}}]})}try{t7.displayName||(t7.displayName="SubissuesList")}catch{}function t8(e){let t,n=(0,z.c)(2),{issueNode:i}=e;return n[0]!==i?(t=(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(t7,{issueNode:i}),(0,W.jsx)(t3,{issueNode:i}),(0,W.jsx)(t5,{issueNode:i})]}),n[0]=i,n[1]=t):t=n[1],t}try{t8.displayName||(t8.displayName="RelationshipsSection")}catch{}var t9=n(11770),ne=n(46996),nt=n(31877),nn=n(97665);function ni(e,t){let n,i,a,s,r,l,o,d,c,u,m,h=(0,z.c)(45),{draftValue:f,formValue:p,setFormValue:g,onChange:y,resolverResult:x,hasPermission:v,isEqual:b,defaultValue:j}=t,{repository:w}=(0,eO.u)(),C=(0,eh.useRef)(!0),_=(0,eh.useRef)(void 0),N=(0,eh.useRef)(e.id);h[0]!==e.id?(n=()=>{N.current!==e.id&&(C.current=!0,_.current=void 0,N.current=e.id)},h[0]=e.id,h[1]=n):n=h[1],h[2]!==e.id||h[3]!==p?(i=[e.id,p],h[2]=e.id,h[3]=p,h[4]=i):i=h[4],(0,eh.useEffect)(n,i),w?.nameWithOwner;let S=e.repository&&w?.nameWithOwner===e.repository,{isLoading:I,data:k}=x,L=(null!=f||!e.isStreaming)&&!I;h[5]!==S||h[6]!==L?(a=()=>{S&&!L&&(C.current=!0)},s=[S,L],h[5]=S,h[6]=L,h[7]=a,h[8]=s):(a=h[7],s=h[8]),(0,eh.useEffect)(a,s),h[9]!==b||h[10]!==y?(r=(e,t)=>{void 0!==_.current&&b(_.current,e)||(y(e,t),_.current=e)},h[9]=b,h[10]=y,h[11]=r):r=h[11];let D=r;h[12]!==j||h[13]!==S||h[14]!==v||h[15]!==L||h[16]!==D||h[17]!==w||h[18]!==k||h[19]!==g?(l=()=>{S&&L&&(v(w)?(g(k),D(k,!0)):null!=w&&(g(j),D(j,!0)))},o=[S,L,D,w,k,g,v,j],h[12]=j,h[13]=S,h[14]=v,h[15]=L,h[16]=D,h[17]=w,h[18]=k,h[19]=g,h[20]=l,h[21]=o):(l=h[20],o=h[21]),(0,eh.useEffect)(l,o),h[22]!==j||h[23]!==p||h[24]!==S||h[25]!==v||h[26]!==b||h[27]!==L||h[28]!==w||h[29]!==k?(d=()=>{if(!C.current||void 0===_.current||!S||!L||!w)return;let e=v(w);e&&p===k?C.current=!1:!e&&b(p,j)&&(C.current=!1)},h[22]=j,h[23]=p,h[24]=S,h[25]=v,h[26]=b,h[27]=L,h[28]=w,h[29]=k,h[30]=d):d=h[30],h[31]!==j||h[32]!==e.id||h[33]!==p||h[34]!==S||h[35]!==v||h[36]!==b||h[37]!==L||h[38]!==w||h[39]!==k?(c=[e.id,S,L,k,w,p,v,j,b],h[31]=j,h[32]=e.id,h[33]=p,h[34]=S,h[35]=v,h[36]=b,h[37]=L,h[38]=w,h[39]=k,h[40]=c):c=h[40],(0,eh.useEffect)(d,c),h[41]!==p||h[42]!==D?(m=()=>{C.current||D(p,!1)},u=[p,D],h[41]=p,h[42]=D,h[43]=u,h[44]=m):(u=h[43],m=h[44]),(0,eh.useEffect)(m,u)}var na=n(40104);function ns(e){let{openItem:t,updateItem:n}=(0,eb.xx)(),{selectedThreadID:i}=(0,Q.Pk)(),a=function(e){let{messages:t}=(0,Q.Pk)(),{tag:n,issueNumber:i}=e,a=i&&X.W.draftUpdateIssue?"update-issue":"new-issue";return`${a}:${n}#${t.length}`}(e),s=`edited-${i}-${a}`,[r,l]=(0,na.Fo)(s,void 0);return(0,eh.useCallback)((s,r=!1)=>{let o,d=!1;for(o in s)(0,ne.A)(s[o],e[o])||(d=!0,"name"!==o&&"body"!==o&&"defaultValuesById"!==o&&(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_USER_CHANGED_FIELD",mode:"immersive",threadId:i,repository:e.repository,issueTag:e.tag,userChangedField:o,wasEmpty:function(e){switch(typeof e){case"string":return!e;case"object":if(Array.isArray(e))return!e||0===e.length;return null==e;default:return null==e}}(e[o])}));if(!d)return;let c={...e,...s};!r&&(c.id=a,c.isUserEdited=!0,X.W.copilotPersistEditedDraftIssues&&l(c)),n(c),t(c.id)},[e,n,t,i,a,l])}function nr(e){return e?.viewerIssueCreationPermissions?.assignable}function nl(e){return(0,t9.i)(e)}let no={fragment:{argumentDefinitions:[L={defaultValue:100,kind:"LocalArgument",name:"count"},D={defaultValue:"",kind:"LocalArgument",name:"labelNames"},T={defaultValue:null,kind:"LocalArgument",name:"owner"},E={defaultValue:null,kind:"LocalArgument",name:"repo"}],kind:"Fragment",metadata:null,name:"useLabelsQueryQuery",selections:[{alias:null,args:A=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[O={alias:null,args:[{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"names",variableName:"labelNames"},{kind:"Literal",name:"orderBy",value:{direction:"ASC",field:"NAME"}}],concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:[R={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[T,E,D,L],kind:"Operation",name:"useLabelsQueryQuery",selections:[{alias:null,args:A,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[O,R],storageKey:null}]},params:{id:"b83819e3267088a514ba0c0458c33d5e",metadata:{},name:"useLabelsQueryQuery",operationKind:"query",text:null}};function nd(e){return e}function nc(e){return!!e}function nu(e){return e?.viewerIssueCreationPermissions?.labelable}function nm(e){return e.name}no.hash="d071175b5fcd3e6223eb6f9ac83d6996";var nh=n(90921);function nf(e,t){var n,i;return n=e?.title,i=t?.title,n?.toLowerCase()===i?.toLowerCase()}function np(e){return e?.viewerIssueCreationPermissions?.milestoneable}var ng=n(25820);function ny(e){return!1===e.hasReachedItemsLimit}function nx(e){return!1===e.closed}function nv(e,t){return e.set(t.id,t),e}function nb(e){return!!e.id}function nj(e){return e.toLowerCase()}function nw(e){return!!e}function nC(e){return e.title}function n_(e){return e.id}function nN(e){return!!e.id}function nS(e){return e?.viewerIssueCreationPermissions?.triageable}function nI(e){return{id:e.id,title:e.title}}var nk=n(85346);function nL(e,t){return e?.toLowerCase()===t?.toLowerCase()}function nD(e,t){return nL(e?.name,t?.name)}function nT(e){return e?.viewerIssueCreationPermissions?.typeable}function nE(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p=(0,z.c)(44),{draftIssue:g,issueNode:y,template:x,issueFormRef:v,loadingDraftIssueRepo:b,onChange:j,onClose:w,onBeforeCreate:C,onFieldChange:_}=e,{name:N,body:S,defaultValuesById:I}=g,k=void 0===S?"":S,{repository:L,clearSessionData:D}=(0,eO.u)(),[T,E]=(0,eh.useState)(N),[A,R]=(0,eh.useState)(k),O=(m=(0,z.c)(3),h=(0,Z.b)(),f=(0,Q.Pk)(),m[0]!==h||m[1]!==f?(u=async(e,t,n)=>{let i;if(e.parentMessageID&&(i=f.messages.findLast(t=>t.id===e.parentMessageID&&"root"!==t.id)),!i||!i.content)return;(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_RETRY_MESSAGE",mode:"immersive",threadId:(0,tx.W)(f)?.id,customMessage:t});let a={type:"text",name:`timeline-event: {"type": "automatic-retry", "markdownContent": "${t??"Copilot failed to generate a response, retrying\u2026"}"}`,text:n,icon:er.XIcon};await h.sendChatMessage({thread:(0,tx.W)(f),content:i.content,references:[...i.references??[],a],topic:f.currentTopic,context:f.context,customInstructions:f.customInstructions,model:f.model,parentMessageId:e.id})},m[0]=h,m[1]=f,m[2]=u):u=m[2],u),P=(0,Q.Pk)();p[0]!==D||p[1]!==v?(t=()=>{D(),v.current?.clearSessionStorage()},p[0]=D,p[1]=v,p[2]=t):t=p[2];let F=t;p[3]!==F||p[4]!==w?(n=()=>{F(),w?.()},p[3]=F,p[4]=w,p[5]=n):n=p[5];let M=n;if(p[6]!==k||p[7]!==N?(i=()=>{E(N),R(k)},a=[k,N],p[6]=k,p[7]=N,p[8]=i,p[9]=a):(i=p[8],a=p[9]),(0,eh.useEffect)(i,a),!function(e){let t,n,i,a,s,r=(0,z.c)(15),{repository:l,assignees:o,setAssignees:d}=(0,eO.u)(),c=ns(e),u=e.assignees;r[0]!==c?(t=(e,t)=>c({assignees:e.map(nl)},t),r[0]=c,r[1]=t):t=r[1];let m=l?.owner.login,h=l?.name;r[2]!==e.assignees?(n=e.assignees??[],r[2]=e.assignees,r[3]=n):n=r[3],r[4]!==m||r[5]!==h||r[6]!==n?(i={owner:m,repo:h,assignees:n},r[4]=m,r[5]=h,r[6]=n,r[7]=i):i=r[7];let f=function(e){let t,n,i,a,s,r=(0,z.c)(16),{owner:l,repo:o,assignees:d}=e,c=(0,nn.jE)();r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,t9.M)({includeAuthorableBots:!1,includeAssignableBots:!0}),r[0]=t):t=r[0];let u=t;r[1]!==c?(n=JSON.stringify(c),r[1]=c,r[2]=n):n=r[2],r[3]!==d||r[4]!==l||r[5]!==o||r[6]!==n?(i=["copilot-immersive-assignees",n,u,l,o,d],r[3]=d,r[4]=l,r[5]=o,r[6]=n,r[7]=i):i=r[7];let m=i;r[8]!==d||r[9]!==l||r[10]!==c||r[11]!==o?(a=async()=>l&&o&&d?(await (0,nt.nH)(c,{owner:l,repo:o,query:"",loginNames:d,capabilities:u})).assignees:[],r[8]=d,r[9]=l,r[10]=c,r[11]=o,r[12]=a):a=r[12];let h=a;return r[13]!==h||r[14]!==m?(s={queryKey:m,queryFn:h},r[13]=h,r[14]=m,r[15]=s):s=r[15],(0,e4.I)(s)}(i);r[8]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[8]=a):a=r[8],r[9]!==e.assignees||r[10]!==o||r[11]!==d||r[12]!==t||r[13]!==f?(s={draftValue:u,formValue:o,setFormValue:d,onChange:t,resolverResult:f,hasPermission:nr,isEqual:ne.A,defaultValue:a},r[9]=e.assignees,r[10]=o,r[11]=d,r[12]=t,r[13]=f,r[14]=s):s=r[14],ni(e,s)}(g),!function(e){let t,n,i,a,s,r=(0,z.c)(15),{repository:l,labels:o,setLabels:d}=(0,eO.u)(),c=ns(e),u=e.labels;r[0]!==c?(t=(e,t)=>c({labels:e.map(nm)},t),r[0]=c,r[1]=t):t=r[1];let m=l?.owner.login,h=l?.name;r[2]!==e.labels?(n=e.labels??[],r[2]=e.labels,r[3]=n):n=r[3],r[4]!==m||r[5]!==h||r[6]!==n?(i={owner:m,repo:h,labels:n},r[4]=m,r[5]=h,r[6]=n,r[7]=i):i=r[7];let f=function(e){let t,n,i,a,s=(0,z.c)(15),{owner:r,repo:l,labels:o}=e,d=(0,eJ.useRelayEnvironment)();return s[0]!==d?(t=JSON.stringify(d),s[0]=d,s[1]=t):t=s[1],s[2]!==o||s[3]!==r||s[4]!==l||s[5]!==t?(n=["copilot-immersive-labels",t,r,l,o],s[2]=o,s[3]=r,s[4]=l,s[5]=t,s[6]=n):n=s[6],s[7]!==d||s[8]!==o||s[9]!==r||s[10]!==l?(i=async()=>{if(!r||!l||!o)return[];let e=await (0,ez.SD)({environment:d,query:no,variables:{owner:r,repo:l,labelNames:o.join(","),count:o.length}}).toPromise();return(e?.repository?.labels?.nodes??[]).filter(nc).map(nd)},s[7]=d,s[8]=o,s[9]=r,s[10]=l,s[11]=i):i=s[11],s[12]!==n||s[13]!==i?(a={queryKey:n,queryFn:i},s[12]=n,s[13]=i,s[14]=a):a=s[14],(0,e4.I)(a)}(i);r[8]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[8]=a):a=r[8],r[9]!==e.labels||r[10]!==o||r[11]!==d||r[12]!==t||r[13]!==f?(s={draftValue:u,formValue:o,setFormValue:d,onChange:t,resolverResult:f,hasPermission:nu,isEqual:ne.A,defaultValue:a},r[9]=e.labels,r[10]=o,r[11]=d,r[12]=t,r[13]=f,r[14]=s):s=r[14],ni(e,s)}(g),!function(e){let t,n,i,a,s,r=(0,z.c)(16),{repository:l,issueType:o,setIssueType:d}=(0,eO.u)(),c=ns(e),u=l?.owner.login;r[0]!==u?(t={owner:u},r[0]=u,r[1]=t):t=r[1];let m=function(e){let t,n,i,a,s=(0,z.c)(11),{owner:r}=e,l=(0,nn.jE)();s[0]!==l?(t=JSON.stringify(l),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==t?(n=["copilot-immersive-issue-types",t,r],s[2]=r,s[3]=t,s[4]=n):n=s[4];let o=n;s[5]!==r||s[6]!==l?(i=async()=>r?(await (0,nk.R)(l,{owner:r,query:"",count:25})).issueTypes:[],s[5]=r,s[6]=l,s[7]=i):i=s[7];let d=i;return s[8]!==d||s[9]!==o?(a={queryKey:o,queryFn:d},s[8]=d,s[9]=o,s[10]=a):a=s[10],(0,e4.I)(a)}(t);e:{let t;if(m.isLoading||!e.issueType){n=null;break e}r[2]!==e.issueType||r[3]!==m.data?(t=m.data?.find(t=>nL(t.name,e.issueType))||null,r[2]=e.issueType,r[3]=m.data,r[4]=t):t=r[4],n=t}let h=n;r[5]!==c?(i=(e,t)=>c({issueType:e?.name},t),r[5]=c,r[6]=i):i=r[6],r[7]!==h||r[8]!==m.isLoading?(a={isLoading:m.isLoading,data:h},r[7]=h,r[8]=m.isLoading,r[9]=a):a=r[9],r[10]!==e.issueType||r[11]!==o||r[12]!==d||r[13]!==i||r[14]!==a?(s={draftValue:e.issueType,formValue:o,setFormValue:d,onChange:i,resolverResult:a,hasPermission:nT,isEqual:nD,defaultValue:null},r[10]=e.issueType,r[11]=o,r[12]=d,r[13]=i,r[14]=a,r[15]=s):s=r[15],ni(e,s)}(g),!function(e){let t,n,i,a,s=(0,z.c)(15),{repository:r,milestone:l,setMilestone:o}=(0,eO.u)(),d=ns(e),c=r?.owner.login,u=r?.name;s[0]!==e.milestone||s[1]!==c||s[2]!==u?(t={owner:c,repo:u,milestone:e.milestone},s[0]=e.milestone,s[1]=c,s[2]=u,s[3]=t):t=s[3];let m=function(e){let t,n,i,a,s=(0,z.c)(15),{owner:r,repo:l,milestone:o}=e,d=(0,nn.jE)();return s[0]!==d?(t=JSON.stringify(d),s[0]=d,s[1]=t):t=s[1],s[2]!==o||s[3]!==r||s[4]!==l||s[5]!==t?(n=["copilot-immersive-milestones",t,r,l,o],s[2]=o,s[3]=r,s[4]=l,s[5]=t,s[6]=n):n=s[6],s[7]!==o||s[8]!==r||s[9]!==d||s[10]!==l?(i=async()=>r&&l&&o?(await (0,nh.U)(d,{owner:r,repo:l,query:o,count:1})).milestones:[],s[7]=o,s[8]=r,s[9]=d,s[10]=l,s[11]=i):i=s[11],s[12]!==n||s[13]!==i?(a={queryKey:n,queryFn:i},s[12]=n,s[13]=i,s[14]=a):a=s[14],(0,e4.I)(a)}(t),h=m.data?.[0]??null;s[4]!==d?(n=(e,t)=>d({milestone:e?.title},t),s[4]=d,s[5]=n):n=s[5],s[6]!==h||s[7]!==m.isLoading?(i={isLoading:m.isLoading,data:h},s[6]=h,s[7]=m.isLoading,s[8]=i):i=s[8],s[9]!==e.milestone||s[10]!==l||s[11]!==o||s[12]!==n||s[13]!==i?(a={draftValue:e.milestone,formValue:l,setFormValue:o,onChange:n,resolverResult:i,hasPermission:np,isEqual:nf,defaultValue:null},s[9]=e.milestone,s[10]=l,s[11]=o,s[12]=n,s[13]=i,s[14]=a):a=s[14],ni(e,a)}(g),!function(e){let t,n,i,a,s,r=(0,z.c)(15),{repository:l,projects:o,setProjects:d}=(0,eO.u)(),c=ns(e),u=e.projects;r[0]!==c?(t=(e,t)=>c({projects:e.map(nI)},t),r[0]=c,r[1]=t):t=r[1];let m=l?.owner.login,h=l?.name;r[2]!==e.projects?(n=e.projects??[],r[2]=e.projects,r[3]=n):n=r[3],r[4]!==m||r[5]!==h||r[6]!==n?(i={owner:m,repo:h,projects:n},r[4]=m,r[5]=h,r[6]=n,r[7]=i):i=r[7];let f=function(e){let t,n,i,a=(0,z.c)(12),{owner:s,repo:r,projects:l}=e,o=(0,nn.jE)();return a[0]!==s||a[1]!==l||a[2]!==r?(t=["copilot-immersive-projects",s,r,l],a[0]=s,a[1]=l,a[2]=r,a[3]=t):t=a[3],a[4]!==s||a[5]!==l||a[6]!==o||a[7]!==r?(n=async()=>{if(!s||!r||!l||!l.length)return[];let e=new Set(l.filter(nN).map(n_)),t=l.map(nC).filter(nw),n=new Set(t.map(nj)),i=l.length>0&&l.every(nb),a=t.length>0?Array.from(new Set(t)).join(","):"",{repositoryProjects:d,recentRepositoryProjects:c,ownerProjects:u,recentOwnerProjects:m}=await o.fetchQuery((0,ng.D)({owner:s,repo:r,query:a})),h=[...[...d,...c,...u,...m].reduce(nv,new Map).values()].filter(nx).filter(ny).filter(t=>i?t.id&&e.has(t.id):!!(t.id&&e.has(t.id))||n.has(t.title.toLowerCase()));if(i)return h;{let t=new Set;return h.sort((t,n)=>{let i=e.has(t.id),a=e.has(n.id);return i&&!a?-1:!i&&a?1:0}).filter(e=>{let n=e.title.toLowerCase();return!t.has(n)&&(t.add(n),!0)})}},a[4]=s,a[5]=l,a[6]=o,a[7]=r,a[8]=n):n=a[8],a[9]!==t||a[10]!==n?(i={queryKey:t,queryFn:n},a[9]=t,a[10]=n,a[11]=i):i=a[11],(0,e4.I)(i)}(i);r[8]===Symbol.for("react.memo_cache_sentinel")?(a=[],r[8]=a):a=r[8],r[9]!==e.projects||r[10]!==o||r[11]!==d||r[12]!==t||r[13]!==f?(s={draftValue:u,formValue:o,setFormValue:d,onChange:t,resolverResult:f,hasPermission:nS,isEqual:ne.A,defaultValue:a},r[9]=e.projects,r[10]=o,r[11]=d,r[12]=t,r[13]=f,r[14]=s):s=r[14],ni(e,s)}(g),null==L){let e;if(void 0===g.repository&&g.isStreaming||b){let e;return p[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(e_.Q,{optionConfig:{useViewportQueries:!1}}),p[10]=e):e=p[10],e}return p[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eD,{title:"Repository required",description:"Please select a repository above to continue creating your issue.",icon:er.IssueDraftIcon}),p[11]=e):e=p[11],e}let $=P.messages.at(-1);if($&&(0,tq.E)($,["switch-issue-template","switch-issue-repo"])){let e;return p[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(e_.Q,{optionConfig:{useViewportQueries:!1}}),p[12]=e):e=p[12],e}let B=P.messages;if(p[13]!==I||p[14]!==g.messageId||p[15]!==O||p[16]!==P.isWaitingOnCopilot||p[17]!==P.messages||p[18]!==x){s=Symbol.for("react.early_return_sentinel");e:{let e=B.find(e=>e.id===g.messageId),t=e?.parentMessageIndex!==void 0?P.messages[e.parentMessageIndex]:void 0;if(e&&t){let n=x&&(0,eH.GQ)(x.data),i=0===Object.keys(I||{}).length,a=!P.isWaitingOnCopilot,r=e.messageIndex===P.messages.length-1,l="assistant"===e.role,o=(0,tq.E)(t,["automatic-retry"]);if(n&&i)if(a)if(r&&l&&!o){let t;O(e,"Copilot failed to use the issue template, retrying\u2026","Force a retry of the user's request and make sure to generate template form values properly. Do not send the same response as the previous attempt."),p[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,W.jsx)(e_.Q,{optionConfig:{useViewportQueries:!1}}),p[21]=t):t=p[21],s=t;break e}else{let e;p[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eD,{title:"Copilot failed to create an issue",description:"Copilot failed to use the issue template. Please retry or choose a different template.",icon:er.IssueDraftIcon}),p[22]=e):e=p[22],s=e;break e}else{let e;p[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(e_.Q,{optionConfig:{useViewportQueries:!1}}),p[20]=e):e=p[20],s=e;break e}}}p[13]=I,p[14]=g.messageId,p[15]=O,p[16]=P.isWaitingOnCopilot,p[17]=P.messages,p[18]=x,p[19]=s}else s=p[19];return s!==Symbol.for("react.early_return_sentinel")?s:(p[23]!==j?(r=e=>{E(e),j?.({name:e})},l=e=>{R(e),j?.({body:e})},p[23]=j,p[24]=r,p[25]=l):(r=p[24],l=p[25]),p[26]!==I||p[27]!==A||p[28]!==g.messageId||p[29]!==v||p[30]!==C||p[31]!==M||p[32]!==_||p[33]!==L||p[34]!==r||p[35]!==l||p[36]!==x||p[37]!==T?(o=(0,W.jsx)(tV.e,{repository:L,title:T,body:A,setTitle:r,setBody:l,clearOnCreate:M,issueFormRef:v,onCreateSuccess:tU.l,onCreateError:tU.l,onCancel:M,onBeforeCreate:C,defaultValuesById:I,selectedTemplate:x,onFieldChange:_,clientMutationId:g.messageId}),p[26]=I,p[27]=A,p[28]=g.messageId,p[29]=v,p[30]=C,p[31]=M,p[32]=_,p[33]=L,p[34]=r,p[35]=l,p[36]=x,p[37]=T,p[38]=o):o=p[38],p[39]!==y?(d=y&&(0,W.jsx)(t8,{issueNode:y}),p[39]=y,p[40]=d):d=p[40],p[41]!==o||p[42]!==d?(c=(0,W.jsxs)(W.Fragment,{children:[o,d]}),p[41]=o,p[42]=d,p[43]=c):c=p[43],c)}try{nE.displayName||(nE.displayName="CreateIssueForm")}catch{}let nA="CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",nR="CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",nO="CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",nP="CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",nF="CreateIssuePreview-module__form--X4Vwp";var nM=n(12683);function n$({node:e,onItemSelected:t}){let n=(0,eh.useMemo)(()=>{let t=[],n=e;for(;n;)t.push(n),n=n.parent;return t.reverse()},[e]);if(e.parent)return(0,W.jsxs)(ed.W,{children:[(0,W.jsxs)(ed.W.Button,{variant:"invisible",className:"CreateIssuePreview-module__parentSelectorAnchor--qiqro",children:[(0,W.jsx)("span",{className:"fgColor-muted",children:"Parent:"})," ",e?.parent?.item.name]}),(0,W.jsx)(ed.W.Overlay,{width:"large",children:(0,W.jsx)(nM.lF,{children:n.map((n,i)=>(0,W.jsxs)(nM.lF.Item,{active:n.item.tag===e.item.tag,onSelect:()=>t(n),sx:{paddingLeft:`calc(${i} * var(--base-size-12))`},children:[(0,W.jsx)(nM.lF.LeadingVisual,{children:(0,W.jsx)(eV.n,{...n.item})}),(0,W.jsx)("div",{className:"CreateIssuePreview-module__truncateText--Cyrbf",children:n.item.name})]},n.item.tag))})})]})}try{n$.displayName||(n$.displayName="ParentSelector")}catch{}var nB=n(3398);let nV="RepositoryPicker-module__container--codNO",nU="RepositoryPicker-module__label--WplGo";function nq(e){let t,n,i,a,s,r,l=(0,z.c)(16),{draftIssue:o,resolvedDraftIssueRepo:d,loadingDraftIssueRepo:c,topRepos:u}=e,[m,h]=(0,eh.useState)(void 0),{repository:f}=(0,eO.u)(),p=function(e){let t,n=(0,z.c)(5),i=(0,Z.b)(),a=(0,Q.Pk)(),{updateItem:s}=(0,eb.xx)();return n[0]!==e||n[1]!==i||n[2]!==a||n[3]!==s?(t=async(t,n)=>{let r=`${n}/${t}`,l=[{type:"text",name:`timeline-event: {"type": "switch-issue-repo", "markdownContent": "Changing repository to ${r}\u{2026}"}`,text:`Update draft issue with tag \`${e.tag}\` to use the \`${r}\` repository. DO NOT ask the user for a template. If there is a template in the new repository that makes sense to use, use it. If you cannot find a template, draft a blank issue. Regenerate the title and description. Maintain all conversation context. Update the metadata to follow the new repository and template. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...r&&{repository:r},isUserEdited:!1};s(t),l.push((0,eE.PO)(t))}await i.sendChatMessage({thread:(0,tx.W)(a),content:`Use the ${r} repository`,references:[...l,...a.currentReferences],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},n[0]=e,n[1]=i,n[2]=a,n[3]=s,n[4]=t):t=n[4],t}(o);l[0]!==p?(t=e=>{null!=e&&p(e.name,e.owner.login)},l[0]=p,l[1]=t):t=l[1];let g=t;!function(e,t,n,i){let a,s,r,l,o,d,c,u,m,h,f,p=(0,z.c)(32),{repository:g,setRepository:y}=(0,eO.u)(),x=(0,eh.useRef)(!0),v=(0,eh.useRef)(null),b=(0,eh.useRef)(void 0),j=ns(e);p[0]!==e.id?(a=()=>{v.current!==e.id&&(x.current=!0,b.current=void 0,v.current=e.id)},p[0]=e.id,p[1]=a):a=p[1],p[2]!==e.id||p[3]!==g?(s=[e.id,g],p[2]=e.id,p[3]=g,p[4]=s):s=p[4],(0,eh.useEffect)(a,s);let w=(null!=e.repository||!e.isStreaming)&&!n;p[5]!==w?(r=()=>{w||(x.current=!0)},l=[w],p[5]=w,p[6]=r,p[7]=l):(r=p[6],l=p[7]),(0,eh.useEffect)(r,l),p[8]!==j?(o=(e,t)=>{var n,i;(void 0===b.current||(n=b.current?.nameWithOwner,i=e?.nameWithOwner,n?.toLowerCase()!==i?.toLowerCase()))&&(j({repository:e?.nameWithOwner},t),b.current=e??null)},p[8]=j,p[9]=o):o=p[9];let C=o;p[10]!==w||p[11]!==C||p[12]!==t||p[13]!==y||p[14]!==i?(d=()=>{w&&(null!=t?(y(t),C(t,!0)):i.length>0?(y(i[0]),C(i[0],!0)):(y(void 0),C(void 0,!0)))},c=[w,C,t,y,i],p[10]=w,p[11]=C,p[12]=t,p[13]=y,p[14]=i,p[15]=d,p[16]=c):(d=p[15],c=p[16]),(0,eh.useEffect)(d,c),p[17]!==g||p[18]!==w||p[19]!==t||p[20]!==i?(u=()=>{x.current&&void 0!==b.current&&w&&(null!=t&&t===g||null==t&&i.length>0&&g===i[0]?x.current=!1:null==t&&i.length<=0&&void 0===g&&(x.current=!1))},p[17]=g,p[18]=w,p[19]=t,p[20]=i,p[21]=u):u=p[21],p[22]!==e.id||p[23]!==g||p[24]!==w||p[25]!==t||p[26]!==i?(m=[e.id,w,t,i,g],p[22]=e.id,p[23]=g,p[24]=w,p[25]=t,p[26]=i,p[27]=m):m=p[27],(0,eh.useEffect)(u,m),p[28]!==g||p[29]!==C?(f=()=>{x.current||C(g,!1)},h=[g,C],p[28]=g,p[29]=C,p[30]=h,p[31]=f):(h=p[30],f=p[31]),(0,eh.useEffect)(f,h)}(o,d,c,u),l[2]!==f||l[3]!==c||l[4]!==u?(n=()=>{c||null==f||null==u||u.find(e=>e.id===f.id)||h(f.id)},i=[f,c,u],l[2]=f,l[3]=c,l[4]=u,l[5]=n,l[6]=i):(n=l[5],i=l[6]),(0,eh.useEffect)(n,i);let y=f??u?.[0],x=o.isStreaming||c;return l[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,W.jsx)(nB.A,{className:nU,required:!0,children:"Repository"}),l[7]=a):a=l[7],l[8]!==x?(s={hasIssuesEnabled:!0,readonly:x},l[8]=x,l[9]=s):s=l[9],l[10]!==m||l[11]!==g||l[12]!==y||l[13]!==s||l[14]!==u?(r=(0,W.jsxs)("div",{className:nV,children:[a,(0,W.jsx)(eK.f0,{initialRepository:y,onSelect:g,options:s,topRepositories:u,enforceAtleastOneSelected:!0},m)]}),l[10]=m,l[11]=g,l[12]=y,l[13]=s,l[14]=u,l[15]=r):r=l[15],r}try{nq.displayName||(nq.displayName="RepositoryPicker")}catch{}let nH=(P=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],F=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],V=[M={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},$={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],U=[M,$,B,{alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null}],{fragment:{argumentDefinitions:P,kind:"Fragment",metadata:null,name:"TemplatePickerQuery",selections:[{alias:null,args:F,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[M,{kind:"InlineDataFragmentSpread",name:"TemplatePickerForm",selections:V,args:null,argumentDefinitions:[]}],storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[M,{kind:"InlineDataFragmentSpread",name:"TemplatePickerTemplate",selections:U,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:P,kind:"Operation",name:"TemplatePickerQuery",selections:[{alias:null,args:F,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:V,storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:U,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"453f03781d915408c3c338e5d346e0be",metadata:{},name:"TemplatePickerQuery",operationKind:"query",text:null}});nH.hash="582a468668cd62a5a95ad0f91f7ea5e5";let nG={kind:"InlineDataFragment",name:"TemplatePickerForm"};nG.hash="277026edd019ed6ef2c9d27b3d3d6c4a";let nK={kind:"InlineDataFragment",name:"TemplatePickerTemplate"};nK.hash="fa6038bb9389af7bff23ba3491dd0507";var nW=n(86391);function nz(e,t){return e.filename.localeCompare(t.filename)}function nQ(e){return(0,tl.readInlineData)(nG,e)}function nZ(e){return(0,tl.readInlineData)(nK,e)}function nJ(e){let t,n,i,a,s=(0,z.c)(14),{draftIssue:r}=e,{repository:l}=(0,eO.u)(),o=l?.owner.login,d=l?.name;s[0]!==o||s[1]!==d?(t={owner:o,repo:d},s[0]=o,s[1]=d,s[2]=t):t=s[2];let{data:c}=function(e){let t,n,i,a,s=(0,z.c)(13),{owner:r,repo:l}=e,o=(0,eJ.useRelayEnvironment)();return s[0]!==o?(t=JSON.stringify(o),s[0]=o,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==t?(n=["copilot-immersive-templates",t,r,l],s[2]=r,s[3]=l,s[4]=t,s[5]=n):n=s[5],s[6]!==o||s[7]!==r||s[8]!==l?(i=async()=>{if(!r||!l)return[];let e=await (0,tl.fetchQuery)(o,nH,{owner:r,repo:l}).toPromise();return[...(e?.repository?.issueTemplates||[]).map(nZ),...(e?.repository?.issueForms||[]).map(nQ)].sort(nz)},s[6]=o,s[7]=r,s[8]=l,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,e4.I)(a)}(t),u=(0,eh.useId)();if(null==c||0===c.length)return null;let m="new-issue"===r.type&&l?.isBlankIssuesEnabled!=null&&!l.isBlankIssuesEnabled;s[3]!==u||s[4]!==m?(n=(0,W.jsx)(nB.A,{className:nU,required:m,htmlFor:u,children:"Template"}),s[3]=u,s[4]=m,s[5]=n):n=s[5];let h=l?.nameWithOwner;return s[6]!==u||s[7]!==r||s[8]!==h||s[9]!==c?(i=(0,W.jsx)(nY,{templates:c,draftIssue:r,repositoryNwo:h,buttonId:u}),s[6]=u,s[7]=r,s[8]=h,s[9]=c,s[10]=i):i=s[10],s[11]!==n||s[12]!==i?(a=(0,W.jsxs)("div",{className:nV,children:[n,i]}),s[11]=n,s[12]=i,s[13]=a):a=s[13],a}function nY(e){let t,n,i,a,s,r,l,o,d=(0,z.c)(23),{templates:c,draftIssue:u,repositoryNwo:m,buttonId:h}=e,[f,p]=(0,eh.useState)("");e:{let e;if(!f){t=c;break e}d[0]!==f||d[1]!==c?(e=c?.filter(e=>e.name?.toLowerCase().includes(f.toLowerCase())),d[0]=f,d[1]=c,d[2]=e):e=d[2],t=e}let g=t,[y,x]=(0,eh.useState)(void 0);d[3]!==u.template||d[4]!==c?(n=()=>{if(!u.template)return void x(void 0);let e=u.template.split("/").findLast(Boolean);x(c?.find(t=>t.filename===e||t.name===e))},i=[c,u.template],d[3]=u.template,d[4]=c,d[5]=n,d[6]=i):(n=d[5],i=d[6]),(0,eh.useEffect)(n,i);let v=function(){let e,t=(0,z.c)(4),n=(0,Z.b)(),i=(0,Q.Pk)(),{updateItem:a}=(0,eb.xx)();return t[0]!==n||t[1]!==i||t[2]!==a?(e=async(e,t,s)=>{let r=[{type:"text",name:`timeline-event: {"type": "switch-issue-template", "markdownContent": "${t?`Changing template to '${t.name}'\u{2026}`:"Removing template\u2026"}"}`,text:t?`Update the draft issue with tag \`${e.tag}\` with the \`${t.filename}\` template${s?` in the \`${s}\` repository`:""}. Regenerate the title and description following the new template. Maintain all conversation context. Update the metadata to follow the new template. DO NOT change the \`tag\` or \`parentTag\` fields.`:`Update draft issue with tag \`${e.tag}\` to remove the template formatting. Regenerate the title and description to follow a generic format. Maintain all conversation context. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...s&&{repository:s},isUserEdited:!1};a(t),r.push((0,eE.PO)(t))}await n.sendChatMessage({thread:(0,tx.W)(i),content:t?`Use the '${t.name}' template`:"Remove the template",references:[...r,...i.currentReferences],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=a,t[3]=e):e=t[3],e}(),b=(0,eh.useRef)(null);return d[7]!==g?(a=g??[],d[7]=g,d[8]=a):a=d[8],d[9]!==y?(s=y?[y]:[],d[9]=y,d[10]=s):s=d[10],d[11]!==h||d[12]!==y?(r=e=>(0,W.jsx)(e$.Q,{id:h,trailingVisual:er.TriangleDownIcon,...e,ref:b,children:y?(0,W.jsx)("span",{children:y.name}):"Select a template"}),d[11]=h,d[12]=y,d[13]=r):r=d[13],d[14]!==u||d[15]!==v||d[16]!==m?(l=async e=>{let[t]=e;x(t),await v(u,t,m)},d[14]=u,d[15]=v,d[16]=m,d[17]=l):l=d[17],d[18]!==a||d[19]!==s||d[20]!==r||d[21]!==l?(o=(0,W.jsx)(nW.O,{items:a,initialSelectedItems:s,placeholderText:"Search",selectionVariant:"single",filterItems:p,title:"Select a template",renderAnchor:r,getItemKey:n0,convertToItemProps:nX,onSelectionChange:l,selectPanelRef:b,height:"large",width:"medium"}),d[18]=a,d[19]=s,d[20]=r,d[21]=l,d[22]=o):o=d[22],o}function nX(e){return{id:e.filename,text:e.name,description:("IssueTemplate"===e.__typename?e.about:e.description)||void 0,descriptionVariant:"block",source:e}}function n0(e){return e.filename}try{nJ.displayName||(nJ.displayName="TemplatePicker")}catch{}try{nY.displayName||(nY.displayName="TemplatePickerInternal")}catch{}var n1=n(10286);function n2(e,t){return(0,eh.useCallback)((n,i,a)=>{let s=n||`${n1.y}-${i}`;if(e.defaultValuesById&&e.defaultValuesById[s]===a)return;let r={...e,defaultValuesById:{...e.defaultValuesById}};r.defaultValuesById[s]=a,t(r,!1)},[e,t])}function n3(e){let t,n,i,a,s=(0,z.c)(13),{owner:r,repo:l}=e,o=(0,eJ.useRelayEnvironment)();return s[0]!==o?(t=JSON.stringify(o),s[0]=o,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==t?(n=["copilot-immersive-current-repo",t,r,l],s[2]=r,s[3]=l,s[4]=t,s[5]=n):n=s[5],s[6]!==o||s[7]!==r||s[8]!==l?(i=async()=>r&&l?await (0,eK.tZ)(o,r,l):null,s[6]=o,s[7]=r,s[8]=l,s[9]=i):i=s[9],s[10]!==n||s[11]!==i?(a={queryKey:n,queryFn:i},s[10]=n,s[11]=i,s[12]=a):a=s[12],(0,e4.I)(a)}function n4(e){var t,n;let i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,C,_,N,S,I,k,L,D,T,E,A,R,O,P,F,M,$,B,V,U=(0,z.c)(84),{isPreviewOpening:q,issue:H,onClose:G}=e,{openItem:K}=(0,eb.xx)(),Z=(0,eY.u0)();U[0]!==H.tag||U[1]!==Z?(r=Z.get(H.tag),U[0]=H.tag,U[1]=Z,U[2]=r):r=U[2];let J=r,[Y,X]=(0,eh.useState)(q);U[3]!==Y?(l=()=>{if(Y){let e=setTimeout(()=>X(!1),eL.t);return()=>clearTimeout(e)}},o=[Y],U[3]=Y,U[4]=l,U[5]=o):(l=U[4],o=U[5]),(0,eh.useEffect)(l,o);let[ee,et]=(0,eh.useState)(null),en=(0,eh.useRef)(null),{selectedThreadID:ei}=(0,Q.Pk)(),{isLoading:ea,data:es}=(B=(0,z.c)(9),V=(0,eJ.useRelayEnvironment)(),B[0]!==V?(P=JSON.stringify(V),B[0]=V,B[1]=P):P=B[1],B[2]!==P?(F=["copilot-immersive-top-repos",P],B[2]=P,B[3]=F):F=B[3],B[4]!==V?(M=async()=>await (0,eK.St)(V,{first:10,hasIssuesEnabled:!0}),B[4]=V,B[5]=M):M=B[5],B[6]!==F||B[7]!==M?($={queryKey:F,queryFn:M},B[6]=F,B[7]=M,B[8]=$):$=B[8],(0,e4.I)($));U[6]!==H.repository?(d=H.repository?.split("/")??[],U[6]=H.repository,U[7]=d):d=U[7];let[el,eo]=d;U[8]!==el||U[9]!==eo?(c={owner:el,repo:eo},U[8]=el,U[9]=eo,U[10]=c):c=U[10];let{isLoading:ed,data:ec}=n3(c),[eu,em]=(0,eh.useState)(ec);U[11]!==ec?(u=()=>{ec&&em(ec)},m=[ec],U[11]=ec,U[12]=u,U[13]=m):(u=U[12],m=U[13]),(0,eh.useEffect)(u,m);let ef=null!=eu&&(!eu.hasIssuesEnabled||null!=eu.viewerInteractionLimitReasonHTML&&eu.viewerInteractionLimitReasonHTML?.length>0);U[14]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{et(e)},U[14]=h):h=U[14];let ep=h;U[15]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{et(null)},U[15]=f):f=U[15];let eg=f;U[16]!==ee?(p=()=>{ee&&en?.current&&en.current.focus()},g=[ee],U[16]=ee,U[17]=p,U[18]=g):(p=U[17],g=U[18]),(0,eh.useEffect)(p,g);let ey=ns(H),ex=n2(H,ey),ev=(0,eh.useRef)(null),ej=(t=ev,(a=(0,z.c)(2))[0]!==t?(i=()=>!t.current||t.current.clientWidth<1024,a[0]=t,a[1]=i):i=a[1],s=i,(0,eh.useSyncExternalStore)(n5,s)),eT=J?.parent!=null,eE=(0,eh.useRef)(null),eR=ec?.id??"",eO=H.template||"";U[19]!==eR||U[20]!==eO?(y={repoId:eR,filename:eO},U[19]=eR,U[20]=eO,U[21]=y):y=U[21];let{isLoading:eP,data:eF}=e5(y),eM=ec??void 0;U[22]!==eM?(x={repository:eM},U[22]=eM,U[23]=x):x=U[23];let e$=x;if(Y||ea||eP){let e;return U[24]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(e_.Q,{optionConfig:{useViewportQueries:!1}}),U[24]=e):e=U[24],e}let eB=`${H.id}@${ei}`;return U[25]!==ej||U[26]!==eB?(v=(0,ew.S)({storageKeyPrefix:eB,insidePortal:ej,disableCopilotAssignmentModal:!0}),U[25]=ej,U[26]=eB,U[27]=v):v=U[27],U[28]===Symbol.for("react.memo_cache_sentinel")?(b=(0,eN.G)("create-issue-preview"),U[28]=b):b=U[28],U[29]!==H?(j=(0,W.jsx)("div",{children:(0,W.jsx)(eA,{item:H})}),U[29]=H,U[30]=j):j=U[30],U[31]!==J||U[32]!==K||U[33]!==eT?(w=eT&&(0,W.jsx)("div",{children:(0,W.jsx)(n$,{node:J,onItemSelected:e=>K(e.item.id,!0)})}),U[31]=J,U[32]=K,U[33]=eT,U[34]=w):w=U[34],U[35]!==j||U[36]!==w?(C=(0,W.jsxs)("div",{className:nO,children:[j,w]}),U[35]=j,U[36]=w,U[37]=C):C=U[37],U[38]!==J||U[39]!==ef||U[40]!==G||U[41]!==eF?(_=(0,W.jsx)("div",{className:nP,children:(0,W.jsx)(tB,{issueTemplate:eF,issueNode:J,issueFormRef:eE,noRepoAccess:ef,onClose:G,onError:ep,onClearError:eg})}),U[38]=J,U[39]=ef,U[40]=G,U[41]=eF,U[42]=_):_=U[42],U[43]!==C||U[44]!==_?(N=(0,W.jsxs)("div",{className:nR,children:[C,_]}),U[43]=C,U[44]=_,U[45]=N):N=U[45],U[46]!==es?(S=es||[],U[46]=es,U[47]=S):S=U[47],U[48]!==H||U[49]!==ec||U[50]!==ed||U[51]!==S?(I=(0,W.jsx)(nq,{draftIssue:H,resolvedDraftIssueRepo:ec,loadingDraftIssueRepo:ed,topRepos:S}),U[48]=H,U[49]=ec,U[50]=ed,U[51]=S,U[52]=I):I=U[52],U[53]!==H?(k=(0,W.jsx)(nJ,{draftIssue:H}),U[53]=H,U[54]=k):k=U[54],U[55]!==I||U[56]!==k?(L=(0,W.jsxs)(eS.B,{direction:"vertical",align:"start",gap:"condensed",className:"py-2",children:[I,k]}),U[55]=I,U[56]=k,U[57]=L):L=U[57],U[58]!==ee?(D=ee&&(0,W.jsx)(eI.l,{ref:en,hideTitle:!0,title:ee.bannerTitle,description:(0,W.jsx)(ek.o,{children:ee.message}),variant:ee.bannerVariant,role:"alert","data-testid":"create-issue-error-banner"}),U[58]=ee,U[59]=D):D=U[59],U[60]!==ec||U[61]!==ef?(T=ef&&((n=ec)&&!n.hasIssuesEnabled?(0,W.jsx)(eD,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue creating your issue.",icon:er.IssueDraftIcon}):n&&n.viewerInteractionLimitReasonHTML?(0,W.jsx)(eD,{title:"You cannot create issues in this repository",description:n.viewerInteractionLimitReasonHTML,icon:er.IssueDraftIcon}):void 0),U[60]=ec,U[61]=ef,U[62]=T):T=U[62],U[63]!==J||U[64]!==H||U[65]!==ed||U[66]!==ef||U[67]!==ey||U[68]!==G||U[69]!==ex||U[70]!==eF?(E=!ef&&(0,W.jsx)(nE,{draftIssue:H,issueNode:J,template:eF??void 0,issueFormRef:eE,loadingDraftIssueRepo:ed,onChange:ey,onClose:G,onFieldChange:ex}),U[63]=J,U[64]=H,U[65]=ed,U[66]=ef,U[67]=ey,U[68]=G,U[69]=ex,U[70]=eF,U[71]=E):E=U[71],U[72]!==L||U[73]!==D||U[74]!==T||U[75]!==E?(A=(0,W.jsxs)("div",{className:nF,children:[L,D,T,E]}),U[72]=L,U[73]=D,U[74]=T,U[75]=E,U[76]=A):A=U[76],U[77]!==N||U[78]!==A?(R=(0,W.jsxs)("div",{className:nA,ref:ev,children:[N,A]}),U[77]=N,U[78]=A,U[79]=R):R=U[79],U[80]!==e$||U[81]!==v||U[82]!==R?(O=(0,W.jsx)(eC.S,{optionConfig:v,preselectedData:e$,...b,children:R}),U[80]=e$,U[81]=v,U[82]=R,U[83]=O):O=U[83],O}function n5(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{n4.displayName||(n4.displayName="CreateIssuePreview")}catch{}var n6=n(79564),n7=n(76158);function n8({isPreviewOpening:e,issue:t,onClose:n}){let[i,a]=(0,eh.useState)(e),{openItem:s}=(0,eb.xx)(),r=(0,eY.u0)().get(t.tag);(0,eh.useEffect)(()=>{if(i){let e=setTimeout(()=>a(!1),eL.t);return()=>clearTimeout(e)}},[i]);let l=(0,eh.useMemo)(()=>(0,W.jsx)(eo.K,{icon:er.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(t.href,"_blank")}}),[t.href]),o=(0,eh.useMemo)(()=>({isReadonly:!0,hideTimeline:!0,navigate:tU.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,useViewportQueries:!1,onIssueDelete:n,onRemovedFromProject:tU.l,onIssueUpdate:tU.l,additionalHeaderActions:l,showRepositoryPill:!0}),[n,l]),d=(0,eh.useMemo)(()=>{let[e,n]=t.repository.split("/");if(e&&n)return{owner:e,repo:n,number:t.number,type:"Issue"}},[t.number,t.repository]);return i||!d?(0,W.jsx)(e_.Q,{optionConfig:o}):(0,W.jsxs)("div",{className:"ExistingIssuePreview-module__container--U4DdB CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",children:[(0,W.jsxs)("div",{className:"ExistingIssuePreview-module__toolbar--wnxSx CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",children:[(0,W.jsx)("div",{className:"ExistingIssuePreview-module__toolbarLeft--NWSuI CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",children:r.parent&&(0,W.jsx)(n$,{node:r,onItemSelected:e=>s(e.item.id,!0)})}),(0,W.jsx)("div",{className:"ExistingIssuePreview-module__toolbarActions--ASiVq CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",children:(0,W.jsx)(t$,{issueNode:r,onSuccess:n})})]}),(0,W.jsxs)("div",{className:"ExistingIssuePreview-module__viewerContainer--C5tZ7 CreateIssuePreview-module__viewerContainer--bRxNh",children:[(0,W.jsx)(n7.e,{children:(0,W.jsx)(n6.cI,{itemIdentifier:d,optionConfig:o})}),(0,W.jsx)("div",{className:"ExistingIssuePreview-module__relationshipsContainer--CHUGP",children:(0,W.jsx)(t8,{issueNode:r})})]})]})}try{n8.displayName||(n8.displayName="ExistingIssuePreview")}catch{}let n9={fragment:{argumentDefinitions:q=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"updateIssueMutationContentOnlyMutation",selections:H=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateIssuePayload",kind:"LinkedField",name:"updateIssue",plural:!1,selections:[{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bodyVersion",storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:q,kind:"Operation",name:"updateIssueMutationContentOnlyMutation",selections:H},params:{id:"d1d9840a47a7be6dd0ad285ce57f1c7f",metadata:{},name:"updateIssueMutationContentOnlyMutation",operationKind:"mutation",text:null}};n9.hash="470cf4272c31ec8565dec1240c55030a";let ie={fragment:{argumentDefinitions:G=[{defaultValue:null,kind:"LocalArgument",name:"input"}],kind:"Fragment",metadata:null,name:"updateIssueMutationDeleteProjectMutation",selections:K=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"DeleteProjectV2ItemPayload",kind:"LinkedField",name:"deleteProjectV2Item",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"deletedItemId",storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:G,kind:"Operation",name:"updateIssueMutationDeleteProjectMutation",selections:K},params:{id:"ad9e6eaf34525daacc17362653e63272",metadata:{},name:"updateIssueMutationDeleteProjectMutation",operationKind:"mutation",text:null}};ie.hash="f03ef95aad392077538992e2c84a9752";var it=n(61491),ii=n(75908),ia=n(36285),is=n(78137),ir=n(37630),il=n(52590),io=n(81688);async function id({environment:e,currentIssue:t,draftIssue:n,proposedChanges:i,canUseCopilotAssignment:a,onCompleted:s}){let r,l,o=t.labels?.nodes?.filter(e=>null!=e).map(e=>e.name)||[],d=i.labels?.map(e=>e.name)||[],c=void 0!==i.labels&&!(0,ne.A)(o.sort(),d.sort()),u=void 0!==i.milestone&&(i.milestone?.title||null)!==(t.milestone?.title||null),m=void 0!==i.issueType&&i.issueType?.name!==t.issueType?.name,h=t.projectItems?.nodes?.filter(e=>null!=e).map(e=>e.project).filter(e=>null!=e).map(e=>e.id).filter(Boolean)||[],f=i.projects?.map(e=>e.id)||[],p=void 0!==i.projects&&!(0,ne.A)(h.sort(),f.sort()),g=n.name!==t.title,y=void 0!==i.body&&i.body!==(t.body||""),x=[];if(c){let a=new Promise((a,s)=>{(0,ia.N)({environment:e,input:{labelableId:t.id,labels:i.labels||[],labelableTypeName:"Issue"},clientMutationId:n.messageId,onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"labels",promise:a})}let v=t.assignees?.nodes?.filter(e=>null!=e),b=function({currentIssue:e,currentAssignees:t,selectedAssignees:n,canUseCopilotAssignment:i,environment:a,messageId:s}){if(void 0===n)return;let r=n.filter(e=>!(0,tt.v)(e.login))??[],l=i?r:n;if(!((e,t)=>{if(e.length!==t.length)return!1;let n=new Set(e.map(e=>e.login));return t.every(e=>n.has(e.login))})(l,t??[]))return new Promise((t,n)=>{(0,is.j)({environment:a,input:{issueId:e.id,assignedActors:l,participants:[]},clientMutationId:s,onCompleted:()=>{t()},onError:e=>{n(e)}})})}({currentIssue:t,currentAssignees:v,selectedAssignees:i.assignees,canUseCopilotAssignment:a,environment:e,messageId:n.messageId});if(b&&x.push({operation:"assignees",promise:b}),u){let a=new Promise((a,s)=>{(0,il.v)({environment:e,input:{issueId:t.id,milestone:i.milestone??null,clientMutationId:n.messageId},onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"milestone",promise:a})}if(m){let a=new Promise((a,s)=>{(0,ir._)({environment:e,input:{issueId:t.id,issueTypeId:i.issueType?.id||null,clientMutationId:n.messageId},onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"issueType",promise:a})}if(p){let a=new Promise((a,s)=>{let r=t.projectItems?.nodes||[];(async()=>{try{await iu(t.id,i.projects||[],r,e,n.messageId,i.hasInaccessibleProject),a()}catch(t){let e=t instanceof Error?t.message:"Project update failed";s(Error(`Project update failed: ${e}`))}})()});x.push({operation:"projects",promise:a})}if(g||y){let a=new Promise((a,s)=>{(0,eJ.commitMutation)(e,{mutation:n9,variables:{input:{id:t.id,clientMutationId:n.messageId,...g&&{title:n.name},...y&&{body:i.body,bodyVersion:n?.bodyVersion}}},onCompleted:()=>{a()},onError:e=>{s(e)}})});x.push({operation:"content",promise:a})}let j=[],w=[];if(x.length>0)for(let[e,t]of(await Promise.allSettled(x.map(e=>e.promise))).entries()){let n=x[e]?.operation;n&&("fulfilled"===t.status?j.push(n):w.push({operation:n,error:t.reason instanceof Error?t.reason:Error("Unknown error")}))}let C="assignCopilot";try{await ic({currentIssue:t,selectedAssignees:i.assignees,canUseCopilotAssignment:a,hasOtherUpdateErrors:w.length>0,onCompleted:()=>j.push(C)})}catch(e){w.push({operation:C,error:e instanceof Error?e:Error("Unknown error")})}if(0===j.length&&0===w.length){let e={draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,isBlockingTags:n?.isBlockingTags,title:t.title,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[]};s&&s({result:{successful:[],failed:[],issue:e}});return}let _=(r=j.includes("content")?n.name:t.title,l=j.includes("assignees")&&void 0!==i.assignees?i.assignees.map(e=>e.login):t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[],{draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,isBlockingTags:n?.isBlockingTags,title:r,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:l});s&&s({result:{successful:j,failed:w,issue:_}})}async function ic({currentIssue:e,selectedAssignees:t,canUseCopilotAssignment:n,hasOtherUpdateErrors:i,onCompleted:a}){if(void 0!==t&&n&&t?.some(e=>(0,tt.v)(e.login)))return(async()=>{if(i)throw Error("Copilot assignment skipped due to other update error(s)");let t=e.repository.defaultBranchRef?.name??"";if(!t)throw Error("Cannot assign to Copilot: default branch not found");try{let n=await (0,it.J)(e.repository.owner.login,e.repository.name,[e.number],{instructions:"",targetRepo:`${e.repository.owner.login}/${e.repository.name}`,targetBranch:t});if(!n.ok){let e=(0,ii.v0)(n,"Assignment failed");throw Error(e)}a?.()}catch(e){throw e instanceof Error?e:Error("Unknown error")}})()}async function iu(e,t,n,i,a,s){let r=n.filter(e=>null!=e&&null!=e.project),l=t.filter(e=>!r.some(t=>t?.project.id===e.id)),o=s?[]:r.filter(e=>!t.some(t=>t.id===e?.project.id));if(0===l.length&&0===o.length)return;let d=[],c=[];for(let t of l){let n=new Promise(n=>{(0,io.Z)({environment:i,projectId:t.id,issueId:e,clientMutationId:a,onCompleted:()=>{n()},onError:e=>{d.push({projectId:t.id,projectTitle:t.title,operation:"add",error:e.message}),n()}})});c.push(n)}for(let e of o){let t=new Promise(t=>{(0,eJ.commitMutation)(i,{mutation:ie,variables:{input:{clientMutationId:a,itemId:e?.id,projectId:e?.project.id}},onCompleted:()=>{t()},onError:n=>{d.push({projectId:e?.project.id||"unknown",projectTitle:e?.project.title||"unknown",operation:"remove",error:n.message}),t()}})});c.push(t)}if(await Promise.all(c),d.length>0){let e=`Failed to update ${d.length} project(s): ${d.map(e=>`${e.operation} "${e.projectTitle}" (${e.error})`).join(", ")}`,t=Error("Unable to update issue projects");throw t.projectErrors=d,t.detailedMessage=e,t}}function im({issueRepo:e,draftIssue:t,template:n,issueFormRef:i,onUpdate:a,onUpdateError:s,onClose:r}){let l=(0,eJ.useRelayEnvironment)(),[o,d]=(0,eh.useState)(!1),{clearSessionData:c,assignees:u,labels:m,milestone:h,issueType:f,projects:p}=(0,eO.u)(),g=(0,eh.useCallback)(()=>{let n=e.viewerIssueCreationPermissions;return{assignees:n?.assignable?u:void 0,labels:n?.labelable?m:void 0,milestone:n?.milestoneable?h:void 0,issueType:n?.typeable?f||null:void 0,projects:n?.triageable?p:void 0,hasInaccessibleProject:n?.triageable?t.rawProjectsInput?.includes(""):void 0}},[u,t.rawProjectsInput,e.viewerIssueCreationPermissions,f,m,h,p]),y=(0,eh.useCallback)(()=>{c(),i.current?.clearSessionStorage()},[c,i]),x=(0,eh.useCallback)(()=>{y(),r?.()},[y,r]),v=tu(),b=(0,eh.useCallback)(async o=>{o.preventDefault(),d(!0);try{let[o,c]=t.repository?.split("/")??[];if(!o||!c||!t.issueNumber){let e=Error("Invalid repository information");e.name="OTHER",s?.(e),d(!1);return}let u=await e1(l,o,c,t.issueNumber,!0);if(!u){let e=Error("Issue not found or no longer accessible");e.name="ISSUE_NOT_FOUND",s?.(e),d(!1);return}let m=(0,eq.O_)(t.name);if(!m.isValid){let e=Error(m.errorMessage||"Invalid title");e.name="INVALID_TITLE",s?.(e);return}let h=t.body??"";if(n&&(0,eH.GQ)(n.data)&&i.current){let e=i.current.getInvalidInputs();if(e.length>0){let t=Error("Please fix the highlighted errors in the form.");t.name="INVALID_FORM_INPUTS",s?.(t),e[0]?.focus();return}h=i.current.markdown()??""}h=await v(e,h);let f=(u.assignees?.nodes?.filter(e=>null!=e)??[]).some(e=>(0,tt.v)(e.login)),p=(e.viewerIssueCreationPermissions?.assignable??!1)&&!u.repository?.isArchived&&!!u.repository?.isCopilotAgentEnabled&&!f,y=g(),b={body:h,assignees:y.assignees,labels:y.labels,milestone:y.milestone,issueType:y.issueType,projects:y.projects,hasInaccessibleProject:y.hasInaccessibleProject};await id({environment:l,currentIssue:u,draftIssue:t,proposedChanges:b,canUseCopilotAssignment:p,onCompleted:e=>{e.result.failed.length>0?s?.(e):e.result.successful.length>0&&e.result.issue?(x(),r(),a?.(e.result.issue)):(x(),r())}})}catch{let e=Error("Update failed");e.name="OTHER",s?.(e)}finally{d(!1)}},[x,t,l,g,i,e,r,a,s,n,v]);return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(e$.Q,{variant:"primary","data-testid":"update-issue-button",onClick:b,disabled:o||!t.bodyVersion,children:o?"Updating...":"Update"})})}try{im.displayName||(im.displayName="UpdateIssueButton")}catch{}function ih(e){var t,n,i;let a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,C,_,N,S,I,k,L,D=(0,z.c)(72),{isPreviewOpening:T,issue:E,onClose:A}=e,[R,O]=(0,eh.useState)(T),[P,F]=(0,eh.useState)(null),[M,$]=(0,eh.useState)(E.id);D[0]!==R?(l=()=>{if(R){let e=setTimeout(()=>O(!1),eL.t);return()=>clearTimeout(e)}},o=[R],D[0]=R,D[1]=l,D[2]=o):(l=D[1],o=D[2]),(0,eh.useEffect)(l,o),M!==E.id&&($(E.id),F(null));let{selectedThreadID:B}=(0,Q.Pk)(),V=null!=E.repository||!E.isStreaming,U=(null!=E.bodyVersion||!E.isStreaming)&&!E.bodyVersion;D[3]!==E.repository?(d=E.repository?.split("/")??[],D[3]=E.repository,D[4]=d):d=D[4];let[q,H]=d;D[5]!==q||D[6]!==H?(c={owner:q,repo:H},D[5]=q,D[6]=H,D[7]=c):c=D[7];let{isLoading:G,data:K}=n3(c),Z=K?.id??"",J=E.template||"";D[8]!==Z||D[9]!==J?(u={repoId:Z,filename:J},D[8]=Z,D[9]=J,D[10]=u):u=D[10];let{isLoading:Y,data:X}=e5(u),ee=null!=K&&(!K.hasIssuesEnabled||null!=K.viewerInteractionLimitReasonHTML&&K.viewerInteractionLimitReasonHTML?.length>0),en=tu(),ei=tj();D[11]!==ei?(m=async e=>{await ei([e])},D[11]=ei,D[12]=m):m=D[12];let ea=m;D[13]!==ei||D[14]!==E.id||D[15]!==E.repository?(h=async e=>{if(e&&"object"==typeof e&&"result"in e){let{result:t}=e;if(void 0===t.issue){let e=Error("Issue data is unavailable");e.name="UNKNOWN_ERROR",F([e]);return}let n=t.issue?.repository?.databaseId;if(t.failed.length>0&&0===t.successful.length)(0,et.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:`Issue update failed: ${t.failed.length} operations failed`,draftIssueId:E.id,sourceIssueId:n,repository:E.repository,errorType:"MULTIPLE_UPDATE_FAILURES",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(i_))}),F(t.failed.map(iC));else if(t.failed.length>0&&t.successful.length>0){let e=t.failed.map(iw).join(", ");t.issue.errors=t.failed.map(ij);let i=t.successful.join(", ");(0,et.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_PARTIAL_FAILURE",mode:"immersive",message:`Issue update partial failure. Failed: ${e}. Succeeded: ${i}`,draftIssueId:E.id,sourceIssueId:n,repository:E.repository,errorType:"PARTIAL_UPDATE_FAILURE",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(ib)),successfulOperations:JSON.stringify(t.successful)});try{await ei([t.issue])}catch{let t=Error(`Partial failure: ${e} failed`);t.name="PARTIAL_UPDATE_FAILURE",F([t])}}return}if(e instanceof Error){let t=Error(e.message);"name"in e?t.name=e.name:t.name="OTHER",(0,et.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:e.message,issueId:E.id,errorType:"OTHER"}),F([t])}},D[13]=ei,D[14]=E.id,D[15]=E.repository,D[16]=h):h=D[16];let es=h,el=ns(E),eo=n2(E,el),ed=(0,eh.useRef)(null),ec=(t=ed,(s=(0,z.c)(2))[0]!==t?(a=()=>!t.current||t.current.clientWidth<1024,s[0]=t,s[1]=a):a=s[1],r=a,(0,eh.useSyncExternalStore)(iN,r)),eu=(0,eh.useRef)(null);e:{let e;if(!P||0===P.length){f=null;break e}D[17]!==P?(e=P.map(ip),D[17]=P,D[18]=e):e=D[18],f=e}let em=f,ef=K??void 0;D[19]!==ef?(p={repository:ef},D[19]=ef,D[20]=p):p=D[20];let ep=p;if(R||!V||G||Y){let e;return D[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(e_.Q,{optionConfig:{useViewportQueries:!1}}),D[21]=e):e=D[21],e}if(!K){let e;return D[22]!==E.repository?(e=(n=E.repository)?(0,W.jsx)(eD,{title:`${n} is not found`,description:"Please verify if the repository exists and is accessible before trying again.",icon:er.IssueDraftIcon}):(0,W.jsx)(eD,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:er.IssueDraftIcon}),D[22]=E.repository,D[23]=e):e=D[23],e}if(ee){let e;return D[24]!==K?(e=(i=K).hasIssuesEnabled?i.viewerInteractionLimitReasonHTML?(0,W.jsx)(eD,{title:"You cannot update issues in this repository",description:i.viewerInteractionLimitReasonHTML,icon:er.IssueDraftIcon}):void 0:(0,W.jsx)(eD,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue updating your issue.",icon:er.IssueDraftIcon}),D[24]=K,D[25]=e):e=D[25],e}if(U){let e;return D[26]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eD,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:er.IssueDraftIcon}),D[26]=e):e=D[26],e}let eg=`${E.id}@${B}`;D[27]!==ec||D[28]!==eg?(g=(0,ew.S)({storageKeyPrefix:eg,insidePortal:ec,disableCopilotAssignmentModal:!0}),D[27]=ec,D[28]=eg,D[29]=g):g=D[29],D[30]===Symbol.for("react.memo_cache_sentinel")?(y=(0,eN.G)("update-issue-preview"),D[30]=y):y=D[30],D[31]!==E?(x=(0,W.jsx)("div",{className:nO,children:(0,W.jsx)(eA,{item:E})}),D[31]=E,D[32]=x):x=D[32];let ey=X??void 0;D[33]!==K||D[34]!==A||D[35]!==ea||D[36]!==es||D[37]!==ey||D[38]!==E?(v=(0,W.jsx)("div",{className:nP,children:(0,W.jsx)(im,{issueRepo:K,draftIssue:E,template:ey,issueFormRef:eu,onUpdate:ea,onUpdateError:es,onClose:A})}),D[33]=K,D[34]=A,D[35]=ea,D[36]=es,D[37]=ey,D[38]=E,D[39]=v):v=D[39],D[40]!==x||D[41]!==v?(b=(0,W.jsxs)("div",{className:nR,children:[x,v]}),D[40]=x,D[41]=v,D[42]=b):b=D[42];let ex=P&&em;D[43]===Symbol.for("react.memo_cache_sentinel")?(j=(0,W.jsx)(er.RepoIcon,{}),D[43]=j):j=D[43];let ev=`${K.owner.login}/${K.name}`;D[44]!==ev?(w=(0,W.jsx)("b",{children:ev}),D[44]=ev,D[45]=w):w=D[45],D[46]!==E?(C=(0,W.jsx)(nJ,{draftIssue:E}),D[46]=E,D[47]=C):C=D[47],D[48]!==w||D[49]!==C?(_=(0,W.jsxs)(eS.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[j,w,C]}),D[48]=w,D[49]=C,D[50]=_):_=D[50];let eb=X??void 0;return D[51]!==K||D[52]!==en?(N=e=>en(K,e),D[51]=K,D[52]=en,D[53]=N):N=D[53],D[54]!==el||D[55]!==A||D[56]!==eo||D[57]!==eb||D[58]!==N||D[59]!==E?(S=(0,W.jsx)(nE,{draftIssue:E,template:eb,issueFormRef:eu,onChange:el,onClose:A,onBeforeCreate:N,onFieldChange:eo}),D[54]=el,D[55]=A,D[56]=eo,D[57]=eb,D[58]=N,D[59]=E,D[60]=S):S=D[60],D[61]!==ex||D[62]!==_||D[63]!==S?(I=(0,W.jsxs)("div",{className:nF,children:[ex,_,S]}),D[61]=ex,D[62]=_,D[63]=S,D[64]=I):I=D[64],D[65]!==b||D[66]!==I?(k=(0,W.jsxs)("div",{className:nA,ref:ed,children:[b,I]}),D[65]=b,D[66]=I,D[67]=k):k=D[67],D[68]!==ep||D[69]!==g||D[70]!==k?(L=(0,W.jsx)(eC.S,{optionConfig:g,preselectedData:ep,...y,children:k}),D[68]=ep,D[69]=g,D[70]=k,D[71]=L):L=D[71],L}function ip(e){let t,n;switch(e.name){case"LABELS_UPDATE_FAILED":t="Failed to update labels",n="Could not update issue labels. Please try again.";break;case"ASSIGNEES_UPDATE_FAILED":t="Failed to update assignees",n="Could not update issue assignees. Please try again.";break;case"ASSIGNCOPILOT_UPDATE_FAILED":t="Failed to update assignees",n="Could not assign Copilot to the issue. Please try again.";break;case"MILESTONE_UPDATE_FAILED":t="Failed to update milestone",n="Could not update issue milestone. Please try again.";break;case"ISSUETYPE_UPDATE_FAILED":t="Failed to update issue type",n="Could not update issue type. Please try again.";break;case"PROJECTS_UPDATE_FAILED":t="Failed to update projects",n="Could not update project assignments. Please try again.";break;case"CONTENT_UPDATE_FAILED":t="Failed to update content",n="Could not update issue title or body. Please try again.";break;case"FORBIDDEN":t="Permission Denied",n="You don't have permission to update this issue. Please contact the repo owner.";break;case"NOT_FOUND":t="Issue Not Found",n="The issue you are trying to update could not be found or no longer exists.";break;case"INVALID_TITLE":t="Invalid issue title",n=e.message;break;case"INVALID_FORM_INPUTS":t="Invalid form inputs",n=e.message;break;case"STALE_DATA":t="Issue Outdated",n="The issue you are editing has changed. Please copy your edits and have Copilot draft a new update.";break;case"PROJECT_UPDATE_FAILED":{t="Failed to update project assignment";let i=e.projectErrors??[];if(i.length>0){let e=i.filter(iv),t=i.filter(ix),a=[];e.length>0&&a.push(`Failed to add to ${e.length} project(s): ${e.map(iy).join(", ")}`),t.length>0&&a.push(`Failed to remove ${t.length} project(s): ${t.map(ig).join(", ")}`),n=`The issue was updated successfully, but there were problems with project assignments. ${a.join(". ")}.`}else n="The issue was updated successfully, but there were problems with project assignments.";break}default:t="An error has occurred",n="Please try again later."}let i="PROJECT_UPDATE_FAILED"===e.name?"warning":"critical";return(0,W.jsx)(eI.l,{variant:i,title:t,description:n},`error-${e.name}`)}function ig(e){return`"${e.projectTitle}"`}function iy(e){return`"${e.projectTitle}"`}function ix(e){return"remove"===e.operation}function iv(e){return"add"===e.operation}function ib(e){return{operation:e.operation,error:e.error.message}}function ij(e){return{message:e.error.message,type:"update"}}function iw(e){return e.operation}function iC(e){let t=Error(e.error.message);if(t.name=`${e.operation.toUpperCase()}_UPDATE_FAILED`,t.operation=e.operation,"projects"===e.operation){let n=e.error;n.projectErrors&&(t.projectErrors=n.projectErrors)}return t}function i_(e){return{operation:e.operation,error:e.error.message}}function iN(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{ih.displayName||(ih.displayName="UpdateIssuePreview")}catch{}var iS=n(98755);function iI(e,t,n){let i="head"===n?e.headFile:e.baseFile,a=i.reference,s=(0,Z.b)(),{isLoading:r,isError:l,data:o}=(0,e4.I)({queryKey:["copilot-reference-preview","copilot","references","file",a?(0,Y.Vb)(a):void 0,n],queryFn:async()=>{if(!a||"file"!==a.type||""!==i.value)return null;let r=await s.service.hydrateReference(a);return r.ok?(t({...e,["head"===n?"headFile":"baseFile"]:{...i,value:r.payload.contents,isStreaming:!1}}),r.payload):null},staleTime:1/0});return(0,eh.useEffect)(()=>{o?.contents&&i.value!==o.contents&&t({...e,["head"===n?"headFile":"baseFile"]:{...i,value:o.contents,isStreaming:!1}})},[o?.contents,e,t,i,n]),{isLoading:r,isError:l,data:o}}var ik=n(36903),iL=n(55099),iD=n(25506);function iT(e){let t,n,i,a,s,r=(0,z.c)(24),{left:l,right:o,view:d}=e,c=(0,eh.useId)(),u=(0,eh.useId)(),m=(0,eh.useId)(),h=(0,iD.a)(l);return r[0]!==l.name||r[1]!==c?(t=(0,W.jsxs)("span",{id:c,className:"sr-only",children:[l.name," original file contents"]}),r[0]=l.name,r[1]=c,r[2]=t):t=r[2],r[3]!==o.name||r[4]!==u?(n=(0,W.jsxs)("span",{id:u,className:"sr-only",children:[o.name," modified file contents"]}),r[3]=o.name,r[4]=u,r[5]=n):n=r[5],r[6]!==l.name||r[7]!==o.name||r[8]!==m?(i=(0,W.jsxs)("span",{id:m,className:"sr-only",children:[l.name," and ",o.name," unified diff view"]}),r[6]=l.name,r[7]=o.name,r[8]=m,r[9]=i):i=r[9],r[10]!==h||r[11]!==l.name||r[12]!==l.value||r[13]!==c||r[14]!==o.value||r[15]!==u||r[16]!==m||r[17]!==d?(a=(0,W.jsx)(iL.C,{fileName:l.name,left:l.value,leftLabelledBy:c,right:o.value,rightLabelledBy:u,spacing:h,unifiedLabelledBy:m,view:d}),r[10]=h,r[11]=l.name,r[12]=l.value,r[13]=c,r[14]=o.value,r[15]=u,r[16]=m,r[17]=d,r[18]=a):a=r[18],r[19]!==t||r[20]!==n||r[21]!==i||r[22]!==a?(s=(0,W.jsxs)("div",{children:[t,n,i,a]}),r[19]=t,r[20]=n,r[21]=i,r[22]=a,r[23]=s):s=r[23],s}try{iT.displayName||(iT.displayName="DiffView")}catch{}function iE(e){let t,n,i,a,s,r,l,o=(0,z.c)(15),{isUnifiedDiff:d,setIsUnifiedDiff:c}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,W.jsx)(ed.W.Anchor,{children:(0,W.jsx)(eo.K,{icon:er.GearIcon,"aria-label":"Open diff view settings",variant:"invisible"})}),o[0]=t):t=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,W.jsx)(ec.l.GroupHeading,{children:"Layout"}),o[1]=n):n=o[1],o[2]!==c?(i=()=>c(!0),o[2]=c,o[3]=i):i=o[3],o[4]!==d||o[5]!==i?(a=(0,W.jsx)(ec.l.Item,{selected:d,onSelect:i,children:"Unified"}),o[4]=d,o[5]=i,o[6]=a):a=o[6];let u=!d;return o[7]!==c?(s=()=>c(!1),o[7]=c,o[8]=s):s=o[8],o[9]!==u||o[10]!==s?(r=(0,W.jsx)(ec.l.Item,{selected:u,onSelect:s,children:"Split"}),o[9]=u,o[10]=s,o[11]=r):r=o[11],o[12]!==a||o[13]!==r?(l=(0,W.jsxs)(ed.W,{children:[t,(0,W.jsx)(ed.W.Overlay,{children:(0,W.jsx)(ec.l,{children:(0,W.jsxs)(ec.l.Group,{selectionVariant:"single",children:[n,a,r]})})})]}),o[12]=a,o[13]=r,o[14]=l):l=o[14],l}try{iE.displayName||(iE.displayName="DiffViewSettings")}catch{}let iA=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)};function iR(e){let t,n,i,a,s,r,l,o,d,c=(0,z.c)(29),{fileDiff:u}=e,{updateItem:m}=(0,eb.xx)(),h=u.baseFile,f=u.headFile,[p,g]=(0,eh.useState)(!0),y=h.value&&f.value,x=!h.value&&f.value,v=h.value&&!f.value,{linesOfCode:b,size:j}=(0,ik.K3)(x||y?f:h),w=`${x?"Added: ":v?"Deleted: ":""} ${b} `;iI(u,m,"base"),iI(u,m,"head");let C=1===b?"line":"lines";c[0]!==w||c[1]!==j||c[2]!==C?(t=(0,W.jsx)("div",{className:"DiffPreview-module__toolbarLeft--o4LQ6",children:(0,W.jsxs)("p",{className:"DiffPreview-module__toolbarLoC--xR8Qi",children:[w," ",C," \xb7 ",j]})}),c[0]=w,c[1]=j,c[2]=C,c[3]=t):t=c[3],c[4]!==h.reference?(n=h.reference&&"url"in h.reference&&(0,W.jsx)(eo.K,{as:"a","aria-label":"Open file in a new tab",icon:er.LinkExternalIcon,variant:"invisible",href:h.reference.url,target:"_blank",rel:"noopener noreferrer"}),c[4]=h.reference,c[5]=n):n=c[5],c[6]!==f.value?(i=(0,W.jsx)(iS.T,{textToCopy:f.value,ariaLabel:"Copy code",onCopy:iO}),c[6]=f.value,c[7]=i):i=c[7],c[8]!==f.name||c[9]!==f.value?(a=(0,W.jsx)(eo.K,{"aria-label":"Download code",icon:er.DownloadIcon,variant:"invisible",onClick:()=>{let e=f.name;iA(new File([f.value],e)),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),c[8]=f.name,c[9]=f.value,c[10]=a):a=c[10],c[11]!==y||c[12]!==p?(s=y&&(0,W.jsx)(iE,{setIsUnifiedDiff:g,isUnifiedDiff:p}),c[11]=y,c[12]=p,c[13]=s):s=c[13],c[14]!==n||c[15]!==i||c[16]!==a||c[17]!==s?(r=(0,W.jsxs)("div",{className:"DiffPreview-module__toolbarActions--EAoyT",children:[n,i,a,s]}),c[14]=n,c[15]=i,c[16]=a,c[17]=s,c[18]=r):r=c[18],c[19]!==t||c[20]!==r?(l=(0,W.jsxs)("div",{className:"DiffPreview-module__toolbar--RiBuK",children:[t,r]}),c[19]=t,c[20]=r,c[21]=l):l=c[21];let _=p?"unified":"split";return c[22]!==h||c[23]!==f||c[24]!==_?(o=(0,W.jsx)(iT,{left:h,right:f,view:_}),c[22]=h,c[23]=f,c[24]=_,c[25]=o):o=c[25],c[26]!==o||c[27]!==l?(d=(0,W.jsxs)("div",{className:"DiffPreview-module__container--BN04s",children:[l,o]}),c[26]=o,c[27]=l,c[28]=d):d=c[28],d}function iO(){return(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}try{iR.displayName||(iR.displayName="DiffPreview")}catch{}var iP=n(34522),iF=n(72439),iM=n(50899),i$=n(39768),iB=n(84268),iV=n(23125);let iU="FilePreview-module__previewContainer--KRQup";var iq=n(74807),iH=n(79634);let iG="ERROR",iK="LOADING",iW="READY";function iz(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}var iQ=n(71315);function iZ(e){let t,n=(0,z.c)(4),{error:i}=e;if(n[0]!==i){let e,a,s=i?.split(`
`)??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)("span",{className:"ErrorMessage-module__errorIcon--ODD8l",children:(0,W.jsx)(er.StopIcon,{size:24})}),a=(0,W.jsx)("h2",{className:"ErrorMessage-module__errorHeader--hmJF7",children:"HTML rendering failed"}),n[2]=e,n[3]=a):(e=n[2],a=n[3]),t=(0,W.jsxs)("div",{className:"ErrorMessage-module__error--xol56",children:[e,a,s.length>0?(0,W.jsx)("p",{children:s.map(iJ)}):(0,W.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=i,n[1]=t}else t=n[1];return t}function iJ(e){return(0,W.jsxs)(W.Fragment,{children:[e,(0,W.jsx)("br",{})]},`error-line-${e}}`)}try{iZ.displayName||(iZ.displayName="ErrorMessage")}catch{}function iY(e){let t,n,i,a,s=(0,z.c)(14),{content:r,inlineScripts:l,inlineStyles:o,headScripts:d,bodyScripts:c,styles:u,viewscreenUrl:m}=e,h=(0,ti.G7)("viewscreen_sandbox");s[0]!==m?(n=new URL("view/sandbox?url=client://sandbox",m).toString(),t=new URL(n,iQ.fV.origin),s[0]=m,s[1]=t,s[2]=n):(t=s[1],n=s[2]);let f=t.origin,p=(0,eh.useRef)(null),g=(0,eh.useRef)(null);s[3]!==c||s[4]!==r||s[5]!==d||s[6]!==l||s[7]!==o||s[8]!==u?(i={content:r,headScripts:d,bodyScripts:c,inlineScripts:l,inlineStyles:o,styles:u},s[3]=c,s[4]=r,s[5]=d,s[6]=l,s[7]=o,s[8]=u,s[9]=i):i=s[9];let{renderState:y,errorMessage:x}=function(e,t,n,i){let a,s,r,l,o,d,c=(0,z.c)(16),[u,m]=(0,eh.useState)(iK),[h,f]=(0,eh.useState)();c[0]!==t||c[1]!==e||c[2]!==i?(a=n=>(function(e,t,n,i,a,s){let r=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!r)return;let l=r.body,o=n.current?.contentWindow;switch(l){case"hello":iz(o,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),iz(o,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":s(iG),r.payload?.error&&a(r.payload.error);break;case"loading":s(iK);break;case"loaded":if(!n.current||!i.current)return;s("LOADED");break;case"ready":if(!n.current||!i.current)return;s(iW)}})(n,0,e,t,f,m),c[0]=t,c[1]=e,c[2]=i,c[3]=a):a=c[3];let p=a;return c[4]!==p?(s=()=>(window.addEventListener("message",p),()=>window.removeEventListener("message",p)),r=[p],c[4]=p,c[5]=s,c[6]=r):(s=c[5],r=c[6]),(0,eh.useEffect)(s,r),c[7]!==t||c[8]!==e||c[9]!==n||c[10]!==u?(l=()=>{if(u===iW&&e.current&&t.current){var i;let a;i=e.current,t.current,a={type:"render:cmd",body:{cmd:"sandbox:data","sandbox:data":{...n}}},iz(i.contentWindow,a)}},o=[t,e,n,u],c[7]=t,c[8]=e,c[9]=n,c[10]=u,c[11]=l,c[12]=o):(l=c[11],o=c[12]),(0,eh.useEffect)(l,o),c[13]!==h||c[14]!==u?(d={renderState:u,errorMessage:h},c[13]=h,c[14]=u,c[15]=d):d=c[15],d}(p,g,i,f);if(!h)return null;for(let e of((0,et.BI)("sandbox_view.activate",{target:"SANDBOX_INITIALIZED",enabled:h}),Array.from(new Set([...d||[],...c||[],...u||[]].map(e=>{try{return new URL(e,f).origin}catch{return null}}).filter(Boolean)))))(0,et.BI)("sandbox_view.activate",{target:"SANDBOX_RESOURCE_ORIGIN",origin:e});return s[10]!==x||s[11]!==y||s[12]!==n?(a=(0,W.jsx)("div",{ref:g,className:"SandboxView-module__container--PAb4m",children:y===iG?(0,W.jsx)(iZ,{error:x}):(0,W.jsx)("iframe",{ref:p,className:"SandboxView-module__iframe--r6S4N",sandbox:"allow-scripts allow-same-origin",title:"Preview page for the user provided code",src:n})}),s[10]=x,s[11]=y,s[12]=n,s[13]=a):a=s[13],a}try{iY.displayName||(iY.displayName="SandboxView")}catch{}function iX(e,t,n){let i=`file:${e}`;if(!n.has(i))return null;let a=n.get(i)??[],s=a[a.length-1];if(!s)return null;let r=t.get(s);return r&&"file"===r.type?r:null}function i0(e){var t;let n,i,a,s,r,l=(0,z.c)(15),{file:o}=e,{previewUrl:d}=(0,iH.X)(),{items:c,versionedItems:u}=(0,eb.xx)(),{scripts:m,styles:h,files:f}=(t=o.value,a=Array.from(t.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>iX(e,c,u)),s=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(t).map(e=>iX(e,c,u)),r=Array.from(t.matchAll(/<script(?![^>]*\bsrc=).*?>(.*?)<\/script>/gms)).map(e=>e[1]).filter(e=>void 0!==e),{scripts:[...a.map(e=>e?.value??""),...r,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join(`
`),styles:s.map(e=>e?.value??"").join(`
`),files:a.concat(s)}),[p,g]=(0,eh.useState)(!1),y=(o.isStreaming||f.some(i1))&&!p;l[0]!==y||l[1]!==g?(n=()=>{if(y){let e=setTimeout(()=>{g(!0)},3e3);return()=>clearTimeout(e)}},l[0]=y,l[1]=g,l[2]=n):n=l[2],(0,eh.useEffect)(n),l[3]!==o.value?(i=function(e){let t=Array.from(e.matchAll(/<script.*?src="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[],i=[];for(let a of t)e.substring(e.indexOf("<head"),e.indexOf("</head>")).includes(a)?n.push(a):i.push(a);return{headScripts:n,bodyScripts:i,styles:Array.from(e.matchAll(/<link rel="stylesheet" href="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e)}}(o.value),l[3]=o.value,l[4]=i):i=l[4];let{headScripts:x,bodyScripts:v,styles:b}=i;if(y){let e;return l[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsxs)("div",{className:"HtmlPreview-module__loadingContainer--t3YC7",children:[(0,W.jsx)("div",{className:"HtmlPreview-module__loadingHead--XAabR",children:(0,W.jsx)(iq.N,{animationType:"thinking",loopAnimation:!0})}),(0,W.jsx)("p",{className:"HtmlPreview-module__loadingText--WYn1B",children:"Preparing your preview\u2026"})]}),l[5]=e):e=l[5],e}{let e;return l[6]!==v||l[7]!==b||l[8]!==o.id||l[9]!==o.value||l[10]!==x||l[11]!==d||l[12]!==m||l[13]!==h?(e=(0,W.jsx)(iY,{inlineScripts:m,inlineStyles:h,headScripts:x,bodyScripts:v,styles:b,content:o.value,viewscreenUrl:d},o.id),l[6]=v,l[7]=b,l[8]=o.id,l[9]=o.value,l[10]=x,l[11]=d,l[12]=m,l[13]=h,l[14]=e):e=l[14],e}}function i1(e){return!e||e.isStreaming}try{i0.displayName||(i0.displayName="HtmlPreview")}catch{}var i2=n(70840);let i3={code:er.CodeIcon,preview:er.EyeIcon,diff:er.FileDiffIcon};function i4({isPreviewOpening:e,file:t,onClose:n}){let{updateItem:i,items:a,versionedItems:s}=(0,eb.xx)(),r=(0,Q.Pk)(),l=t.isStreaming?r.messages[r.messages.length-1]:r.messages.find(e=>e.id===t.messageId),{linesOfCode:o,isPreviewable:d,size:c}=(0,ik.K3)(t);!function(e,t){let n,i,a,s,r,l,o,d=(0,z.c)(25),{reference:c}=e,u=(0,Z.b)(),m=c?.type;d[0]!==c?(n=c?(0,Y.Vb)(c):void 0,d[0]=c,d[1]=n):n=d[1],d[2]!==m||d[3]!==n?(i=["copilot-reference-preview","copilot","references",m,n],d[2]=m,d[3]=n,d[4]=i):i=d[4],d[5]!==e||d[6]!==u||d[7]!==c||d[8]!==t?(a=async()=>{if(!c||"file"!==c.type||e.value)return null;let n=await u.service.hydrateReference(c);return n.ok?(t({...e,value:n.payload.contents,isStreaming:!1}),n.payload):null},d[5]=e,d[6]=u,d[7]=c,d[8]=t,d[9]=a):a=d[9],d[10]!==i||d[11]!==a?(s={queryKey:i,queryFn:a,staleTime:1/0},d[10]=i,d[11]=a,d[12]=s):s=d[12];let{isLoading:h,isError:f,data:p}=(0,e4.I)(s);d[13]!==p||d[14]!==e||d[15]!==t?(r=()=>{p?.contents&&e.value!==p.contents&&t({...e,value:p.contents,isStreaming:!1})},d[13]=p,d[14]=e,d[15]=t,d[16]=r):r=d[16];let g=p?.contents;d[17]!==e||d[18]!==g||d[19]!==t?(l=[g,e,t],d[17]=e,d[18]=g,d[19]=t,d[20]=l):l=d[20],(0,eh.useEffect)(r,l),d[21]!==p||d[22]!==f||d[23]!==h?(o={isLoading:h,isError:f,data:p},d[21]=p,d[22]=f,d[23]=h,d[24]=o):o=d[24]}(t,i);let[u,m]=(0,eh.useState)("code"),[h,f]=(0,eh.useState)(!0),[p,g]=(0,eh.useState)(void 0),y=(0,eh.useCallback)(e=>{g(e)},[]),x=(0,eE.SX)(t,a,s),v=!!x;(0,eh.useEffect)(()=>{(l?.error?.type==="publicCode"||l?.error?.type==="filtered")&&n()},[l?.error,n]);let b=[["code","Code"]],j="code";return d&&(b.unshift(["preview","Preview"]),j="preview"===u?"preview":j),v&&(b.push(["diff","Diff"]),j="diff"===u?"diff":j),(0,W.jsxs)("div",{className:"FilePreview-module__container--P2h3J",children:[(0,W.jsxs)("div",{className:"FilePreview-module__toolbar--ZZWN1",children:[(0,W.jsxs)("div",{className:"FilePreview-module__toolbarLeft--RCKxW",children:[(d||v)&&(0,W.jsx)(i$.I,{"aria-label":"File view",size:"small",onChange:e=>{let t=b[e]?.[0]||"code";m(t),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:b.map(([e,t])=>{let n=i3[e];return(0,W.jsx)(i$.I.IconButton,{"aria-label":t,icon:(0,W.jsx)(n,{size:"small"}),selected:u===e},e)})}),(0,W.jsx)(eA,{item:t,onVersionSelect:y}),(0,W.jsx)(i8,{file:t}),(!t.reference||!("url"in t.reference))&&(0,W.jsxs)("p",{className:"FilePreview-module__toolbarLoC--I7tcY",children:[o," ",1===o?"line":"lines"," \xb7 ",c]})]}),(0,W.jsxs)("div",{className:"FilePreview-module__toolbarActions--h04aW",children:[t.reference&&"url"in t.reference&&(0,W.jsx)(eo.K,{as:"a",type:void 0,"aria-label":"Open file in a new tab",icon:er.LinkExternalIcon,variant:"invisible",href:t?.reference?.url,target:"_blank",rel:"noopener noreferrer",size:"small"}),(0,W.jsx)(iS.T,{textToCopy:t.value,ariaLabel:"Copy code",onCopy:()=>(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"}),size:"small"}),(0,W.jsx)(eo.K,{"aria-label":"Download code",icon:er.DownloadIcon,variant:"invisible",onClick:()=>{let e=(()=>{let e=t.name.lastIndexOf(".");if(e>0){let n=t.name.substring(0,e),i=t.name.substring(e);return void 0!==p?`${n}_${p}${i}`:t.name}return void 0!==p?`${t.name}_${p}`:t.name})();iA(new File([t.value],e)),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})},size:"small"}),"diff"===j&&(0,W.jsx)(iE,{isUnifiedDiff:h,setIsUnifiedDiff:f})]})]}),(0,W.jsx)("div",{className:"FilePreview-module__content--HoIot",children:"preview"===j?(0,W.jsx)(i7,{file:t}):"diff"===j?(0,W.jsx)(iT,{left:x,right:t,view:h?"unified":"split"}):(0,W.jsx)(i6,{file:t,isPreviewOpening:e})})]})}let i5=(0,iV.A)((e,t,n)=>{n({...e,value:t})},500,{leading:!1,trailing:!0});function i6({file:e,isPreviewOpening:t}){var n,i;let a,{openItem:s,updateItem:r,versionedItems:l}=(0,eb.xx)(),o=(0,Z.b)(),d=(0,eh.useRef)(!1),c=(n=l,i=e,(a=n.get((0,eE.oy)(i.id))??[])[a.length-1]===i.id),u=!e.reference||"thread-scoped-file"===e.reference.type,m=u&&!e.isStreaming&&c,h=(0,eh.useId)(),f=(0,iD.a)(e),[p,g]=(0,eh.useState)(),y=p?.id===e.id?p.value:e.value,[x,v]=(0,eh.useState)(!0),{messages:b,currentReferences:j}=(0,Q.Pk)(),w=(0,eh.useRef)(""),C=(0,eh.useRef)(null),[_,N]=(0,eh.useState)(void 0);(0,eh.useEffect)(()=>{!j||j.some(t=>"thread-scoped-snippet"===t.type&&t.name===e.name)||N(null)},[j,e.name]);let S=(0,eh.useMemo)(()=>{if(!X.W.selectionAttachments)return;let t=iF.E.getAttachmentSizeLimit();return{debounceMs:0,onSelection:({view:n,text:i,fromLine:a,toLine:s})=>{if(!i||""===i.trim()||!o)return;let r=n.state.doc.line(a),l=n.state.doc.line(s),d=r.from,c=l.to,u=n.state.doc.sliceString(d,c),m=`${e.id}:${d}-${c}:${e.value.length}`;if(w.current===m||new Blob([u]).size>t)return;let h={type:"thread-scoped-snippet",name:e.name,snippetText:u,language:e.language||"text",range:{start:a,end:s}};C.current?o.replaceReference(C.current,h):o.addReference(h,"immersive-selection"),C.current=h,N({from:d,to:c}),w.current=m},onClear:()=>{w.current&&(o&&C.current&&o.removeReference(C.current),w.current="",C.current=null,N(null))}}},[e.id,e.name,e.value,e.language,o]);(0,eh.useEffect)(()=>{o&&C.current&&o.removeReference(C.current),C.current=null,w.current="",N(null)},[e.id,o]),(0,eh.useEffect)(()=>()=>{o&&C.current&&o.removeReference(C.current),C.current=null,w.current=""},[o]),(0,eh.useEffect)(()=>{v(!1)},[]),(0,eh.useEffect)(()=>{t&&(d.current=!0)},[t]);let I=(0,iM.K)((0,eh.useCallback)(t=>{if(m&&t!==e.value)if(e.isUserEdited)g({value:t,id:e.id}),i5(e,t,r);else{let n={...e,messageId:ty.Wp,id:`file:${e.name}#${b.length}`,timestamp:new Date,isUserEdited:!0,value:t};r(n),s(n.id),g({value:t,id:n.id})}},[e,m,b.length,s,r]));return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("span",{id:h,className:"sr-only",children:[e.name," file contents"]}),(0,W.jsx)(iP.default,{ariaLabelledBy:h,containerClassName:"FilePreview-module__codeMirrorContainer--lxGn_",fileName:e.name,height:"100%",isReadOnly:!m,spacing:f,value:x?"":y,onChange:I,focusNextRenderRef:d,placeholder:"Loading...",hideHelp:!0,selectionListenerOptions:S,selectionAttachmentRange:_}),u&&!c&&(0,W.jsx)("div",{className:"FilePreview-module__footer--o2xcM",children:"Switch to the latest version to edit this file."})]})}function i7({file:e}){return"markdown"===e.language?(0,W.jsx)("div",{className:iU,children:(0,W.jsx)(i2.G,{content:e})}):"html"===e.language?(0,W.jsx)("div",{className:iU,children:(0,W.jsx)(i0,{file:e})}):null}function i8({file:e}){let t=e.reference;if(!t||"file"!==t.type||!t.url)return null;let n=(0,ik.as)(t.url);if(!n)return null;let{repoOwner:i,repoName:a,filePath:s}=n;return(0,W.jsx)("div",{className:"FilePreview-module__fileLinkContainer--FTT5B",children:(0,W.jsx)(iB.A,{className:"FilePreview-module__filePath--rER6j",href:t.url,rel:"noopener noreferrer",children:(0,ik.L2)(i,a,s)})})}try{i4.displayName||(i4.displayName="FilePreview")}catch{}try{i6.displayName||(i6.displayName="CodeMirrorView")}catch{}try{i7.displayName||(i7.displayName="PreviewComponent")}catch{}try{i8.displayName||(i8.displayName="FileLink")}catch{}function i9(e){let t,n=(0,z.c)(3),{image:i}=e;return n[0]!==i.altText||n[1]!==i.url?(t=(0,W.jsx)("div",{className:"ImagePreview-module__container--lxQZb",children:(0,W.jsx)("img",{className:"ImagePreview-module__imageElement--WTRgY",src:i.url,alt:i.altText})}),n[0]=i.altText,n[1]=i.url,n[2]=t):t=n[2],t}try{i9.displayName||(i9.displayName="ImagePreview")}catch{}var ae=n(17836);let at=(0,eh.memo)(function(e){let t,n,i,a,s,r,l=(0,z.c)(17),{isPreviewOpening:o,issue:d,onClose:c}=e,[u,m]=(0,eh.useState)(o);l[0]!==u?(t=()=>{if(u){let e=setTimeout(()=>m(!1),eL.t);return()=>clearTimeout(e)}},n=[u],l[0]=u,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,eh.useEffect)(t,n),l[3]!==d.href?(i=(0,W.jsx)(eo.K,{icon:er.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(d.href,"_blank")}}),l[3]=d.href,l[4]=i):i=l[4];let h=i;l[5]!==c||l[6]!==h?(a={navigate:tU.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,useViewportQueries:!1,onIssueDelete:c,onRemovedFromProject:tU.l,onIssueUpdate:tU.l,additionalHeaderActions:h,showRepositoryPill:!0},l[5]=c,l[6]=h,l[7]=a):a=l[7];let f=a;l[8]!==d.number||l[9]!==d.owner||l[10]!==d.repo?(s={owner:d.owner,repo:d.repo,number:d.number,type:"Issue"},l[8]=d.number,l[9]=d.owner,l[10]=d.repo,l[11]=s):s=l[11];let p=s;if(u){let e;return l[12]!==f?(e=(0,W.jsx)(e_.Q,{optionConfig:f}),l[12]=f,l[13]=e):e=l[13],e}return l[14]!==p||l[15]!==f?(r=(0,W.jsx)("div",{className:"IssuePreview-module__container--O4xBI",children:(0,W.jsx)(n7.e,{children:(0,W.jsx)(ae.Rr,{children:(0,W.jsx)(n6.cI,{itemIdentifier:p,optionConfig:f})})})}),l[14]=p,l[15]=f,l[16]=r):r=l[16],r});try{at.displayName||(at.displayName="IssuePreview")}catch{}function an(e){e.stopPropagation()}function ai(e){let t,n,i,a,s=(0,z.c)(7),{jobResult:r}=e,l=eh.useRef(null),[o,d]=(0,eh.useState)(null),[c,u]=(0,eh.useState)(null);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{e.detail.fetchResponse.succeeded||(u("Failed to load markdown preview"),e.preventDefault(),e.stopPropagation())},s[0]=t):t=s[0];let m=t;return s[1]!==r?(n=()=>{if(l.current){var e;let t,n,i=l.current;return i.addEventListener("turbo:before-fetch-request",an),i.addEventListener("turbo:before-fetch-response",m),d((t=[(e=r).repoOwner,e.repoName,"actions","runs",e.workflowId,"job",e.jobId],(n=new URL(`/${t.map(String).map(encodeURIComponent).join("/")}`,window.location.origin)).searchParams.set("partial","true"),n.toString())),()=>{i.removeEventListener("turbo:before-fetch-request",an),i.removeEventListener("turbo:before-fetch-response",m)}}},i=[m,r],s[1]=r,s[2]=n,s[3]=i):(n=s[2],i=s[3]),(0,eh.useEffect)(n,i),s[4]!==c||s[5]!==o?(a=(0,W.jsx)("div",{className:"JobResultPreview-module__container--ITPQp",children:c?(0,W.jsxs)("div",{className:"JobResultPreview-module__error--UiqJQ",children:[(0,W.jsx)("span",{className:"JobResultPreview-module__errorIcon--Gr5_m",children:(0,W.jsx)(er.StopIcon,{size:24})}),(0,W.jsx)("h2",{className:"JobResultPreview-module__errorHeader--u1d_F",children:"Failed to load job results"})]}):(0,W.jsx)("turbo-frame",{src:o,ref:l,id:"workflow_run_content",target:"_top",children:(0,W.jsx)("div",{className:"JobResultPreview-module__spinner--NGGeF",children:(0,W.jsx)(eM.A,{srText:"Loading Markdown preview\u2026"})})})}),s[4]=c,s[5]=o,s[6]=a):a=s[6],a}try{ai.displayName||(ai.displayName="JobResultPreview")}catch{}var aa=n(97189),as=n(73783);function ar(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p=(0,z.c)(18),{spec:g}=e,[y,x]=(0,eh.useState)(!1),{createBreakdown:v}=(u=(0,z.c)(6),m=(0,Z.b)(),h=(0,Q.Pk)(),u[0]!==m||u[1]!==g||u[2]!==h?(d=async e=>{let t=g.name||g.tag;(0,et.BI)("copilot.planning_tasklist",{target:`PLANNING_TASK_SPEC_BREAKDOWN_${e.toUpperCase()}`,mode:"immersive",threadId:(0,tx.W)(h)?.id,messageId:g.messageId});let n={type:"text",name:`timeline-event: {"type": "planning-breakdown", "markdownContent": "Breaking down '${t}' into ${e}s..."}`},i="task"===e?`
Break down the ${g.tag} spec into tasks.
`:`
Break down the ${g.tag} spec into tasks, but instead of returning a task list, create an issue for each task.
- The issues should be nested under one parent issue, which is a feature-level issue containing the ${g.tag} spec contents. The name should be the same as the spec name.
- Issues should be blocked by their logical dependencies.
`;await m.sendChatMessage({thread:(0,tx.W)(h),content:i,references:[n],topic:h.currentTopic,context:h.context,customInstructions:h.customInstructions,model:h.model,intent:ty.wh.planningAgent})},u[0]=m,u[1]=g,u[2]=h,u[3]=d):d=u[3],f=d,u[4]!==f?(c={createBreakdown:f},u[4]=f,u[5]=c):c=u[5],c),b=g.isStreaming||!g.content;return p[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,W.jsx)("div",{className:"SpecPreviewFooter-module__footerText--NBYrK",children:"Consider breaking this up into multiple tasks"}),p[0]=t):t=p[0],p[1]!==v?(n=()=>v("task"),p[1]=v,p[2]=n):n=p[2],p[3]!==b||p[4]!==n?(i=(0,W.jsx)(e$.Q,{className:"SpecPreviewFooter-module__button--jMuoa",leadingVisual:er.TasklistIcon,onClick:n,disabled:b,inactive:b,children:"Break down into smaller tasks"}),p[3]=b,p[4]=n,p[5]=i):i=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,W.jsx)("div",{className:"SpecPreviewFooter-module__divider--U_nTw"}),p[6]=a):a=p[6],p[7]!==b?(s=(0,W.jsx)(ed.W.Anchor,{children:(0,W.jsx)(eo.K,{"aria-label":"Task break down options\u2026",className:"SpecPreviewFooter-module__menuButton--r_s5t",icon:er.TriangleDownIcon,disabled:b,inactive:b})}),p[7]=b,p[8]=s):s=p[8],p[9]!==v?(r=(0,W.jsx)(ed.W.Overlay,{children:(0,W.jsx)(ec.l,{children:(0,W.jsx)(ec.l.Item,{onSelect:()=>v("issue"),children:"Break down into issues"})})}),p[9]=v,p[10]=r):r=p[10],p[11]!==y||p[12]!==s||p[13]!==r?(l=(0,W.jsxs)(ed.W,{open:y,onOpenChange:x,children:[s,r]}),p[11]=y,p[12]=s,p[13]=r,p[14]=l):l=p[14],p[15]!==i||p[16]!==l?(o=(0,W.jsxs)("div",{className:"SpecPreviewFooter-module__footer--M1fJw",children:[t,(0,W.jsxs)(as.A,{className:"SpecPreviewFooter-module__buttonGroup--ZKWsL",children:[i,a,l]})]}),p[15]=i,p[16]=l,p[17]=o):o=p[17],o}try{ar.displayName||(ar.displayName="SpecPreviewFooter")}catch{}function al(e){let t,n,i,a=(0,z.c)(7),{error:s,onDismiss:r}=e,[l,o]=(0,eh.useState)(0);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{o(ao)},a[0]=t):t=a[0],a[1]!==s?(n=[s],a[1]=s,a[2]=n):n=a[2],(0,eh.useEffect)(t,n),a[3]!==l||a[4]!==s.message||a[5]!==r?(i=(0,W.jsx)(eI.l,{"aria-atomic":"true",role:"alert",variant:"critical",title:"Failed to start task",hideTitle:!0,description:s.message,onDismiss:r},l),a[3]=l,a[4]=s.message,a[5]=r,a[6]=i):i=a[6],i}function ao(e){return e+1}try{al.displayName||(al.displayName="TaskErrorBanner")}catch{}var ad=n(62189),ac=n(91747);let au=e=>{let t,n,i,a,s,r,l,o=(0,z.c)(23),{ref:d,children:c,inactive:u,isLoading:m,isMenuOpen:h,loadingAnnouncement:f,menuItems:p,onMenuOpenChange:g,onStartClick:y,primaryButtonText:x}=e,v=void 0===f?"Starting task\u2026":f,b=void 0===x?"Start agent task":x;return o[0]!==u||o[1]!==m||o[2]!==v||o[3]!==y||o[4]!==b||o[5]!==d?(t=(0,W.jsx)(e$.Q,{className:"TaskActions-module__button--mfKv1",inactive:u,leadingVisual:er.AgentIcon,loading:m,loadingAnnouncement:v,onClick:y,ref:d,variant:"primary",children:b}),o[0]=u,o[1]=m,o[2]=v,o[3]=y,o[4]=b,o[5]=d,o[6]=t):t=o[6],o[7]===Symbol.for("react.memo_cache_sentinel")?(n=(0,W.jsx)("div",{className:"TaskActions-module__divider--mfTun"}),o[7]=n):n=o[7],o[8]!==m?(i=(0,W.jsx)(ed.W.Anchor,{"aria-label":"Task options",children:(0,W.jsx)(eo.K,{"aria-label":"Task options\u2026",className:"TaskActions-module__menuButton--KexmI",disabled:m,icon:er.TriangleDownIcon,variant:"primary"})}),o[8]=m,o[9]=i):i=o[9],o[10]!==p?(a=p.map(am),o[10]=p,o[11]=a):a=o[11],o[12]!==a?(s=(0,W.jsx)(ed.W.Overlay,{children:(0,W.jsx)(ec.l,{children:a})}),o[12]=a,o[13]=s):s=o[13],o[14]!==h||o[15]!==g||o[16]!==i||o[17]!==s?(r=(0,W.jsxs)(ed.W,{open:h,onOpenChange:g,children:[i,s]}),o[14]=h,o[15]=g,o[16]=i,o[17]=s,o[18]=r):r=o[18],o[19]!==c||o[20]!==t||o[21]!==r?(l=(0,W.jsxs)(as.A,{className:"TaskActions-module__buttonGroup--HfUFm",children:[t,c,n,r]}),o[19]=c,o[20]=t,o[21]=r,o[22]=l):l=o[22],l};function am(e){return(0,W.jsx)(ec.l.Item,{disabled:e.disabled,onSelect:e.onSelect,children:e.label},e.label)}au.displayName="TaskActions";var ah=n(65529),af=n(14496),ap=n(25811),ag=n(66990),ay=n(86877),ax=n(82156),av=n(44095);function ab(e){var t,n;let i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,C,_,N,S,I,k,L=(0,z.c)(52),{previewItem:D,initialRepo:T,topRepos:E,onStart:A,onCancel:R}=e,[O,P]=(0,eh.useState)(T),[F,M]=(0,eh.useState)(""),[$,B]=(0,eh.useState)(""),[V,U]=(0,ap.s)();L[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,ti.G7)("copilot_swe_agent_use_subagents"),L[0]=i):i=L[0];let q=i&&$,{data:H,isLoading:G}=(t=O?.owner?.login,n=O?.name,I=(0,z.c)(13),k=(0,eJ.useRelayEnvironment)(),I[0]!==k?(C=JSON.stringify(k),I[0]=k,I[1]=C):C=I[1],I[2]!==n||I[3]!==t||I[4]!==C?(_=["repository-default-branch",C,t,n],I[2]=n,I[3]=t,I[4]=C,I[5]=_):_=I[5],I[6]!==k||I[7]!==n||I[8]!==t?(N=async()=>t&&n?to(k,t,n):null,I[6]=k,I[7]=n,I[8]=t,I[9]=N):N=I[9],I[10]!==_||I[11]!==N?(S={queryKey:_,queryFn:N},I[10]=_,I[11]=N,I[12]=S):S=I[12],(0,e4.I)(S));L[1]!==H?(a=()=>{null!=H?(M(H),B(H)):M("")},s=[H],L[1]=H,L[2]=a,L[3]=s):(a=L[2],s=L[3]),(0,eh.useEffect)(a,s),L[4]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{B(e)},L[4]=r):r=L[4];let K=r;L[5]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{P(e)},L[5]=l):l=L[5];let Q=l;L[6]!==A||L[7]!==V||L[8]!==$||L[9]!==O?(o=()=>{A(O,$,V)},L[6]=A,L[7]=V,L[8]=$,L[9]=O,L[10]=o):o=L[10];let Z=o,J=!!O&&!!$;L[11]!==R?(d={buttonType:"default",content:"Cancel",onClick:R},L[11]=R,L[12]=d):d=L[12];let Y=!J;L[13]!==Z||L[14]!==Y?(c={buttonType:"primary",content:"Start",onClick:Z,disabled:Y},L[13]=Z,L[14]=Y,L[15]=c):c=L[15],L[16]!==d||L[17]!==c?(u=[d,c],L[16]=d,L[17]=c,L[18]=u):u=L[18],L[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,W.jsx)(ay.A.Label,{children:"Target repository"}),L[19]=m):m=L[19];let X=O||void 0;if(L[20]===Symbol.for("react.memo_cache_sentinel")?(h={includeForks:!0},L[20]=h):h=L[20],L[21]!==X||L[22]!==E?(f=(0,W.jsxs)(ay.A,{children:[m,(0,W.jsx)(eK.f0,{initialRepository:X,onSelect:Q,topRepositories:E,enforceAtleastOneSelected:!0,options:h,preventDefault:!0,responsiveOnNarrow:!0})]}),L[21]=X,L[22]=E,L[23]=f):f=L[23],L[24]===Symbol.for("react.memo_cache_sentinel")?(p=(0,W.jsx)(ay.A.Label,{children:"Base branch"}),L[24]=p):p=L[24],L[25]!==G||L[26]!==F||L[27]!==$||L[28]!==O?(g=(0,W.jsxs)(ay.A,{children:[p,O||$?(0,W.jsx)(ag.PI,{useFocusZone:!0,cacheKey:"brainstorm-start-task-ref-selector",canCreate:!1,currentCommitish:F?$:"None available",defaultBranch:F,owner:O?.owner?.login||"",repo:O?.name||"",types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,disabled:G,onSelectItem:K,anchoredOverlayProps:{variant:{regular:"anchored",narrow:"fullscreen"},height:"small"}}):(0,W.jsx)(ax.f,{height:"32px",width:"100px"})]}),L[25]=G,L[26]=F,L[27]=$,L[28]=O,L[29]=g):g=L[29],L[30]!==G||L[31]!==F||L[32]!==V||L[33]!==$||L[34]!==O||L[35]!==U||L[36]!==q)y=q&&O&&(0,W.jsxs)(ay.A,{children:[(0,W.jsx)(ay.A.Label,{children:"Custom agent"}),(0,W.jsx)(af.b,{repo:{id:O.databaseId||0,graphQLId:O.id,name:O.nameWithOwner,nameWithOwner:O.nameWithOwner,nameOnly:O.name,owner:O.owner.login,private:O.isPrivate||!1,defaultBranch:F||"",isEmpty:!1,enabled:!0},branch:$,selectedAgent:V,onSelectAgent:e=>U(e),iconOnly:!1,disabled:G})]}),L[30]=G,L[31]=F,L[32]=V,L[33]=$,L[34]=O,L[35]=U,L[36]=q,L[37]=y;else y=L[37];return L[38]!==f||L[39]!==g||L[40]!==y?(x=(0,W.jsxs)("div",{className:"StartTaskDialog-module__selectorsRow--t23fd",children:[f,g,y]}),L[38]=f,L[39]=g,L[40]=y,L[41]=x):x=L[41],L[42]===Symbol.for("react.memo_cache_sentinel")?(v=(0,W.jsx)(ay.A.Label,{children:"Task"}),L[42]=v):v=L[42],L[43]!==D?(b=(0,W.jsx)("div",{className:"StartTaskDialog-module__taskContainer--jUtk2",children:(0,W.jsxs)(ay.A,{children:[v,(0,W.jsx)(av.m,{previewItem:D})]})}),L[43]=D,L[44]=b):b=L[44],L[45]!==x||L[46]!==b?(j=(0,W.jsxs)("div",{className:"StartTaskDialog-module__formContainer--fvFyc",children:[x,b]}),L[45]=x,L[46]=b,L[47]=j):j=L[47],L[48]!==R||L[49]!==u||L[50]!==j?(w=(0,W.jsx)(eF.l,{width:"xlarge",title:"Start task",onClose:R,footerButtons:u,children:j}),L[48]=R,L[49]=u,L[50]=j,L[51]=w):w=L[51],w}try{ab.displayName||(ab.displayName="StartTaskDialog")}catch{}function aj(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,C,_,N,S=(0,z.c)(37),{spec:I,onError:k}=e,[L,D]=(0,eh.useState)(!1),[T,E]=(0,eh.useState)(!1);S[0]!==I?(t={messageId:I.messageId,name:I.name,isUserEdited:I.isUserEdited,tag:I.tag,repository:I.repository,type:"planning-task",id:I.id.replace("planning-spec:","planning-task:"),description:I.content,isStreaming:I.isStreaming,dependencyTags:void 0,subtaskTags:void 0,aggregateTag:void 0},S[0]=I,S[1]=t):t=S[1];let A=t,{repositoryData:R,isLoading:O}=function(e){let t,n,i,a,s,r,l=(0,z.c)(18);l[0]!==e.repository?(t=e.repository?.split("/")??[],l[0]=e.repository,l[1]=t):t=l[1];let[o,d]=t,c=(0,eJ.useRelayEnvironment)();l[2]!==c?(n=JSON.stringify(c),l[2]=c,l[3]=n):n=l[3],l[4]!==o||l[5]!==d||l[6]!==n?(i=["copilot-immersive-spec-repo",n,o,d],l[4]=o,l[5]=d,l[6]=n,l[7]=i):i=l[7],l[8]!==c||l[9]!==o||l[10]!==d?(a=async()=>o&&d?await (0,eK.tZ)(c,o,d):null,l[8]=c,l[9]=o,l[10]=d,l[11]=a):a=l[11],l[12]!==i||l[13]!==a?(s={queryKey:i,queryFn:a},l[12]=i,l[13]=a,l[14]=s):s=l[14];let{data:u,isLoading:m}=(0,e4.I)(s);return l[15]!==m||l[16]!==u?(r={repositoryData:u,isLoading:m},l[15]=m,l[16]=u,l[17]=r):r=l[17],r}(I),{isLoading:P,data:F}=(x=(0,z.c)(9),v=(0,eJ.useRelayEnvironment)(),x[0]!==v?(f=JSON.stringify(v),x[0]=v,x[1]=f):f=x[1],x[2]!==f?(p=["copilot-immersive-spec-top-repos",f],x[2]=f,x[3]=p):p=x[3],x[4]!==v?(g=async()=>await (0,eK.St)(v,{first:10,hasIssuesEnabled:!0}),x[4]=v,x[5]=g):g=x[5],x[6]!==p||x[7]!==g?(y={queryKey:p,queryFn:g},x[6]=p,x[7]=g,x[8]=y):y=x[8],(0,e4.I)(y)),{start:M,error:$}=(0,ah.vQ)(A),{pullRequest:B,isLoading:V}=(0,ah.as)(A),{createIssue:U}=(w=(0,z.c)(6),C=(0,Z.b)(),_=(0,Q.Pk)(),w[0]!==C||w[1]!==I||w[2]!==_?(b=async()=>{let e=I.name||I.tag,t=(0,tx.W)(_);(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_CREATE_ISSUE",mode:"immersive",threadId:t?.id,messageId:I.messageId});let n={type:"text",name:`timeline-event: {"type": "planning-spec-to-issue", "markdownContent": "Drafting '${e}' spec as an issue..."}`},i=`
Create an issue based on the ${I.tag} spec${I.repository?` in the ${I.repository} repository`:""}.
- The issue title should be the same as the spec name.
- Use the spec content to draft the issue body. The issue body should include the full spec content and any relevant implementation details.
`;await C.sendChatMessage({thread:t,content:i,references:[n],topic:_.currentTopic,context:_.context,customInstructions:_.customInstructions,model:_.model,intent:ty.wh.planningAgent})},w[0]=C,w[1]=I,w[2]=_,w[3]=b):b=w[3],N=b,w[4]!==N?(j={createIssue:N},w[4]=N,w[5]=j):j=w[5],j);S[2]!==$||S[3]!==k?(n=()=>{k?.($)},i=[$,k],S[2]=$,S[3]=k,S[4]=n,S[5]=i):(n=S[4],i=S[5]),(0,eh.useEffect)(n,i);let q=(0,ac.u)("copilot_swe_agent_progress_commands");S[6]!==q||S[7]!==B?(a=B?q?(0,ad.UV)(B.global_relay_id):`/${B.repository_nwo}/pull/${B.number}`:void 0,S[6]=q,S[7]=B,S[8]=a):a=S[8];let H=a,G=q?"View task":"View pull request",K=I.isStreaming??!1;S[9]!==I.content?(s=I.content?.trim(),S[9]=I.content,S[10]=s):s=S[10];let J=K||O||P||V,Y=!s||J;S[11]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{E(!0)},S[11]=r):r=S[11];let X=r;S[12]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{E(!1)},S[12]=l):l=S[12];let ee=l;S[13]!==M?(o=(e,t,n)=>{M({nameWithOwner:e.nameWithOwner,branch:t,subAgent:n?.subAgentSlug}),E(!1)},S[13]=M,S[14]=o):o=S[14];let en=o;S[15]!==U?(d=()=>{U()},S[15]=U,S[16]=d):d=S[16];let ei=d;if(B){let e;return S[17]!==H||S[18]!==G?(e=(0,W.jsx)(e$.Q,{as:"a",href:H,variant:"primary",size:"small",children:G}),S[17]=H,S[18]=G,S[19]=e):e=S[19],e}let ea=Y||R?.hasIssuesEnabled===!1;return S[20]!==ei||S[21]!==ea?(c=[{label:"Create issue",onSelect:ei,disabled:ea}],S[20]=ei,S[21]=ea,S[22]=c):c=S[22],S[23]!==Y||S[24]!==J||S[25]!==L||S[26]!==c?(u=(0,W.jsx)(au,{inactive:Y,isLoading:J,isMenuOpen:L,loadingAnnouncement:"Loading spec\u2026",menuItems:c,onMenuOpenChange:D,onStartClick:X,primaryButtonText:"Start task"}),S[23]=Y,S[24]=J,S[25]=L,S[26]=c,S[27]=u):u=S[27],S[28]!==en||S[29]!==T||S[30]!==R||S[31]!==I||S[32]!==F?(m=T&&(0,W.jsx)(ab,{previewItem:I,initialRepo:R,topRepos:F||[],onStart:en,onCancel:ee}),S[28]=en,S[29]=T,S[30]=R,S[31]=I,S[32]=F,S[33]=m):m=S[33],S[34]!==u||S[35]!==m?(h=(0,W.jsxs)(W.Fragment,{children:[u,m]}),S[34]=u,S[35]=m,S[36]=h):h=S[36],h}try{aj.displayName||(aj.displayName="SpecActions")}catch{}function aw(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w=(0,z.c)(60),{spec:C,linesOfCode:_,size:N,isDiffable:S,onViewModeChange:I}=e,{selectedThreadID:k}=(0,Q.Pk)(),[L,D]=(0,eh.useState)("preview"),[T,E]=(0,eh.useState)(void 0),[A,R]=(0,eh.useState)(null),[O,P]=(0,eh.useState)(null),F=A&&A!==O;w[0]!==A?(t=()=>{P(A)},w[0]=A,w[1]=t):t=w[1];let M=t;w[2]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{R(e)},w[2]=n):n=w[2];let $=n;if(w[3]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{P(null)},w[3]=i):i=w[3],w[4]!==C.id?(a=[C.id],w[4]=C.id,w[5]=a):a=w[5],(0,eh.useEffect)(i,a),w[6]===Symbol.for("react.memo_cache_sentinel")?(s=["preview","Preview"],w[6]=s):s=w[6],w[7]!==S){if(r=[s],S){let e;w[9]===Symbol.for("react.memo_cache_sentinel")?(e=["diff","Diff"],w[9]=e):e=w[9],r.push(e)}w[7]=S,w[8]=r}else r=w[8];let B=r;w[10]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{E(e)},w[10]=l):l=w[10];let V=l;w[11]!==B||w[12]!==I||w[13]!==C.messageId||w[14]!==k?(o=e=>{let t=B[e]?.[0]||"preview";D(t),I(t),(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_CHANGE_VIEW_MODE",option:t,threadId:k,messageId:C.messageId})},w[11]=B,w[12]=I,w[13]=C.messageId,w[14]=k,w[15]=o):o=w[15];let U=o;w[16]!==T||w[17]!==C.content||w[18]!==C.messageId||w[19]!==C.tag||w[20]!==k?(d=()=>{let e,t=(e=C.tag,void 0!==T?`${e}_${T}.md`:`${e}.md`);iA(new File([C.content],t)),(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_DOWNLOAD_FILE",mode:"immersive",threadId:k,messageId:C.messageId})},w[16]=T,w[17]=C.content,w[18]=C.messageId,w[19]=C.tag,w[20]=k,w[21]=d):d=w[21];let q=d;w[22]!==C.messageId||w[23]!==k?(c=()=>{(0,et.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_COPY_CODE",mode:"immersive",threadId:k,messageId:C.messageId})},w[22]=C.messageId,w[23]=k,w[24]=c):c=w[24];let H=c;w[25]!==A||w[26]!==M||w[27]!==F?(u=F&&(0,W.jsx)(al,{error:A,onDismiss:M}),w[25]=A,w[26]=M,w[27]=F,w[28]=u):u=w[28],w[29]!==B||w[30]!==U||w[31]!==L?(m=B.length>1&&(0,W.jsx)(i$.I,{"aria-label":"Spec view",onChange:U,children:B.map(e=>{let[t,n]=e;return(0,W.jsx)(i$.I.Button,{selected:L===t,children:n},t)})}),w[29]=B,w[30]=U,w[31]=L,w[32]=m):m=w[32],w[33]!==C?(h=(0,W.jsx)(eA,{item:C,onVersionSelect:V}),w[33]=C,w[34]=h):h=w[34];let G=1===_?"line":"lines";return w[35]!==_||w[36]!==N||w[37]!==G?(f=(0,W.jsxs)("p",{className:"SpecToolbar-module__toolbarLoC--Zemt9 FilePreview-module__toolbarLoC--I7tcY",children:[_," ",G," \xb7 ",N]}),w[35]=_,w[36]=N,w[37]=G,w[38]=f):f=w[38],w[39]!==m||w[40]!==h||w[41]!==f?(p=(0,W.jsxs)("div",{className:"SpecToolbar-module__toolbarLeft--R4qo5 FilePreview-module__toolbarLeft--RCKxW",children:[m,h,f]}),w[39]=m,w[40]=h,w[41]=f,w[42]=p):p=w[42],w[43]!==H||w[44]!==C.content?(g=(0,W.jsx)(iS.T,{textToCopy:C.content,ariaLabel:"Copy spec content",onCopy:H}),w[43]=H,w[44]=C.content,w[45]=g):g=w[45],w[46]!==q?(y=(0,W.jsx)(eo.K,{"aria-label":"Download spec",icon:er.DownloadIcon,variant:"invisible",onClick:q}),w[46]=q,w[47]=y):y=w[47],w[48]!==C?(x=(0,W.jsx)(aj,{spec:C,onError:$}),w[48]=C,w[49]=x):x=w[49],w[50]!==g||w[51]!==y||w[52]!==x?(v=(0,W.jsxs)("div",{className:"SpecToolbar-module__toolbarActions--wO9eJ FilePreview-module__toolbarActions--h04aW",children:[g,y,x]}),w[50]=g,w[51]=y,w[52]=x,w[53]=v):v=w[53],w[54]!==p||w[55]!==v?(b=(0,W.jsxs)("div",{className:"SpecToolbar-module__toolbar--tdSZU FilePreview-module__toolbar--ZZWN1",children:[p,v]}),w[54]=p,w[55]=v,w[56]=b):b=w[56],w[57]!==u||w[58]!==b?(j=(0,W.jsxs)(W.Fragment,{children:[u,b]}),w[57]=u,w[58]=b,w[59]=j):j=w[59],j}try{aw.displayName||(aw.displayName="SpecToolbar")}catch{}function aC(e){return{messageId:e.messageId,name:`${e.tag}.md`,id:e.id.replace("planning-spec:","file:"),type:"file",value:e.content,language:"markdown",timestamp:e.timestamp,isStreaming:e.isStreaming??!1,isUserEdited:e.isUserEdited}}function a_(e){let t,n,i,a,s,r,l,o,d=(0,z.c)(23),{spec:c}=e,{items:u,versionedItems:m}=(0,eb.xx)(),[h,f]=(0,eh.useState)("preview");d[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{f(e)},d[0]=t):t=d[0];let p=t;if(d[1]!==u||d[2]!==c||d[3]!==m){let e=(0,eE.SX)(c,u,m);n=!!e,i=e?aC(e):null,d[1]=u,d[2]=c,d[3]=m,d[4]=n,d[5]=i}else n=d[4],i=d[5];let g=i;d[6]!==c?(a=aC(c),d[6]=c,d[7]=a):a=d[7];let y=a,{linesOfCode:x,size:v}=(0,ik.K3)(y);return d[8]!==n||d[9]!==x||d[10]!==v||d[11]!==c?(s=(0,W.jsx)(aw,{spec:c,linesOfCode:x,size:v,isDiffable:n,onViewModeChange:p}),d[8]=n,d[9]=x,d[10]=v,d[11]=c,d[12]=s):s=d[12],d[13]!==g||d[14]!==y||d[15]!==h?(r=(0,W.jsx)("div",{className:"SpecPreview-module__content--ES0hY FilePreview-module__content--HoIot",children:"preview"===h?(0,W.jsx)(i2.G,{content:{value:y.value,name:y.name},fallbackToRaw:!0,hideHeadingAnchors:!0}):(0,W.jsx)(iT,{left:g,right:y,view:"unified"})}),d[13]=g,d[14]=y,d[15]=h,d[16]=r):r=d[16],d[17]!==c?(l=(0,W.jsx)(ar,{spec:c}),d[17]=c,d[18]=l):l=d[18],d[19]!==s||d[20]!==r||d[21]!==l?(o=(0,W.jsx)(aa.Fn,{children:(0,W.jsxs)("div",{className:"SpecPreview-module__container--WG_WF FilePreview-module__container--P2h3J",children:[s,r,l]})}),d[19]=s,d[20]=r,d[21]=l,d[22]=o):o=d[22],o}try{a_.displayName||(a_.displayName="SpecPreview")}catch{}function aN(e){let t,n,i,a,s=(0,z.c)(14),{title:r,description:l,onClose:o,onSubmit:d,buttonRef:c}=e;return s[0]!==o?(t={buttonType:"default",content:"Cancel",onClick:o},s[0]=o,s[1]=t):t=s[1],s[2]!==o||s[3]!==d?(n={buttonType:"danger",content:"Proceed to PR creation",onClick:()=>{d(),o()}},s[2]=o,s[3]=d,s[4]=n):n=s[4],s[5]!==t||s[6]!==n?(i=[t,n],s[5]=t,s[6]=n,s[7]=i):i=s[7],s[8]!==c||s[9]!==l||s[10]!==o||s[11]!==i||s[12]!==r?(a=(0,W.jsx)(eF.l,{title:r,onClose:o,returnFocusRef:c,footerButtons:i,children:l}),s[8]=c,s[9]=l,s[10]=o,s[11]=i,s[12]=r,s[13]=a):a=s[13],a}try{aN.displayName||(aN.displayName="StartTaskWarningDialog")}catch{}function aS(e){let t,n=(0,z.c)(4),{buttonRef:i,onClose:a,onSubmit:s}=e;return n[0]!==i||n[1]!==a||n[2]!==s?(t=(0,W.jsx)(aN,{buttonRef:i,description:"This task has unmerged dependencies. Please consider waiting until all dependencies are completed before starting the task.",onClose:a,onSubmit:s,title:"Unmerged dependencies"}),n[0]=i,n[1]=a,n[2]=s,n[3]=t):t=n[3],t}try{aS.displayName||(aS.displayName="UnmergedDependenciesWarningDialog")}catch{}var aI=n(35104);function ak(e){return e.isLoading||null==e.pullRequest||"merged"!==e.pullRequest.state}function aL(e){return null!=e}function aD(e){let t,n,i,a,s,r,l,o,d,c,u=(0,z.c)(33),{loading:m,task:h,startTask:f}=e,[p,g]=(0,eh.useState)(!1),[y,x]=(0,eh.useState)(!1),{convertToDraftIssue:v}=(0,aI.Y)(h),b=(0,eh.useRef)(null),[j,w]=(0,eh.useState)(!1),C=function(e){let t,n,i=(0,z.c)(6),{items:a,versionedItems:s}=(0,eb.xx)();i[0]!==a||i[1]!==e.dependencyTags||i[2]!==s?(t=e.dependencyTags?.map(e=>{let t=s.get(`planning-task:${e}`);return null==t||0===t.length?null:a.get(t.at(-1))}).filter(aL)??[],i[0]=a,i[1]=e.dependencyTags,i[2]=s,i[3]=t):t=i[3];let r=t,l=(0,ah.fp)(r);return i[4]!==l?(n=l.some(ak),i[4]=l,i[5]=n):n=i[5],n}(h);u[0]!==m||u[1]!==h?(t={externalLoading:m,task:h},u[0]=m,u[1]=h,u[2]=t):t=u[2];let{selectedRepo:_,topRepos:N,isLoading:S}=function(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p=(0,z.c)(42),{externalLoading:g,task:y}=e;p[0]!==y.repository?(t=y.repository?.split("/")??[],p[0]=y.repository,p[1]=t):t=p[1];let[x,v]=t,[b,j]=(0,eh.useState)(void 0),{updateItem:w}=(0,eb.xx)(),C=(0,eJ.useRelayEnvironment)();p[2]!==C?(n=JSON.stringify(C),p[2]=C,p[3]=n):n=p[3],p[4]!==n?(i=["copilot-immersive-top-repos",n],p[4]=n,p[5]=i):i=p[5],p[6]!==C?(a=async()=>await (0,eK.St)(C,{first:10}),p[6]=C,p[7]=a):a=p[7],p[8]!==i||p[9]!==a?(s={queryKey:i,queryFn:a},p[8]=i,p[9]=a,p[10]=s):s=p[10];let{data:_,isLoading:N}=(0,e4.I)(s);p[11]!==_?(r=void 0===_?[]:_,p[11]=_,p[12]=r):r=p[12];let S=r;p[13]!==C?(l=JSON.stringify(C),p[13]=C,p[14]=l):l=p[14],p[15]!==x||p[16]!==v||p[17]!==l?(o=["copilot-immersive-current-repo",l,x,v],p[15]=x,p[16]=v,p[17]=l,p[18]=o):o=p[18],p[19]!==C||p[20]!==x||p[21]!==v?(d=async()=>x&&v?await (0,eK.tZ)(C,x,v):null,p[19]=C,p[20]=x,p[21]=v,p[22]=d):d=p[22],p[23]!==o||p[24]!==d?(c={queryKey:o,queryFn:d},p[23]=o,p[24]=d,p[25]=c):c=p[25];let{data:I,isLoading:k}=(0,e4.I)(c),L=void 0!==g&&g||N||k;p[26]!==y||p[27]!==w?(u=e=>{j(e),e&&w({...y,isUserEdited:!0,repository:e.nameWithOwner})},p[26]=y,p[27]=w,p[28]=u):u=p[28];let D=u;return p[29]!==I||p[30]!==D||p[31]!==L||p[32]!==b||p[33]!==y.repository||p[34]!==S?(m=()=>{if(!L){if(y.repository){I&&I.nameWithOwner!==b?.nameWithOwner&&j(I);return}!b&&S&&S.length>0&&D(S[0])}},h=[I,D,L,b,y.repository,S],p[29]=I,p[30]=D,p[31]=L,p[32]=b,p[33]=y.repository,p[34]=S,p[35]=m,p[36]=h):(m=p[35],h=p[36]),(0,eh.useEffect)(m,h),p[37]!==D||p[38]!==L||p[39]!==b||p[40]!==S?(f={handleRepoSelect:D,isLoading:L,selectedRepo:b,topRepos:S},p[37]=D,p[38]=L,p[39]=b,p[40]=S,p[41]=f):f=p[41],f}(t);u[3]!==C?(n=()=>{C?w(!0):x(!0)},u[3]=C,u[4]=n):n=u[4];let I=n;u[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{x(!1)},u[5]=i):i=u[5];let k=i;u[6]!==f?(a=(e,t,n)=>{f({nameWithOwner:e.nameWithOwner,branch:t,subAgent:n?.subAgentSlug}),x(!1)},u[6]=f,u[7]=a):a=u[7];let L=a;u[8]!==v?(s=()=>{v()},u[8]=v,u[9]=s):s=u[9];let D=s,T=!_,E=S?"Loading\u2026":"Starting task\u2026",A=_?.hasIssuesEnabled===!1;return u[10]!==D||u[11]!==A?(r=[{disabled:A,label:"Draft issue",onSelect:D}],u[10]=D,u[11]=A,u[12]=r):r=u[12],u[13]!==I||u[14]!==j?(l=j&&(0,W.jsx)(aS,{buttonRef:b,onClose:()=>w(!1),onSubmit:I}),u[13]=I,u[14]=j,u[15]=l):l=u[15],u[16]!==I||u[17]!==S||u[18]!==p||u[19]!==l||u[20]!==T||u[21]!==E||u[22]!==r?(o=(0,W.jsx)("div",{className:"NoPullRequestTaskToolbar-module__toolbarActions--nHT53 FilePreview-module__toolbarActions--h04aW",children:(0,W.jsx)(au,{inactive:T,isLoading:S,isMenuOpen:p,loadingAnnouncement:E,menuItems:r,onMenuOpenChange:g,onStartClick:I,ref:b,children:l})}),u[16]=I,u[17]=S,u[18]=p,u[19]=l,u[20]=T,u[21]=E,u[22]=r,u[23]=o):o=u[23],u[24]!==L||u[25]!==y||u[26]!==h||u[27]!==_||u[28]!==N?(d=y&&(0,W.jsx)(ab,{previewItem:h,initialRepo:_,topRepos:N||[],onStart:L,onCancel:k}),u[24]=L,u[25]=y,u[26]=h,u[27]=_,u[28]=N,u[29]=d):d=u[29],u[30]!==o||u[31]!==d?(c=(0,W.jsxs)(W.Fragment,{children:[o,d]}),u[30]=o,u[31]=d,u[32]=c):c=u[32],c}try{aD.displayName||(aD.displayName="NoPullRequestTaskToolbar")}catch{}var aT=n(26607);function aE(e){let t,n,i,a,s,r,l=(0,z.c)(19),{pullRequest:o}=e,d=(0,ac.u)("copilot_swe_agent_progress_commands");if(!o)return null;l[0]!==d||l[1]!==o.global_relay_id||l[2]!==o.number||l[3]!==o.repository_nwo?(t=d?(0,ad.UV)(o.global_relay_id):`/${o.repository_nwo}/pull/${o.number}`,l[0]=d,l[1]=o.global_relay_id,l[2]=o.number,l[3]=o.repository_nwo,l[4]=t):t=l[4];let c=t,u=d?"View task":"View pull request";l[5]!==o.repository_nwo?(n=(0,W.jsx)("div",{className:"PullRequestTaskToolbar-module__toolbarLeft--zhjF9 FilePreview-module__toolbarLeft--RCKxW",children:(0,W.jsx)(aT.A,{variant:"accent",size:"large",className:"PullRequestTaskToolbar-module__toolbarRepo--V_hWp",children:o.repository_nwo})}),l[5]=o.repository_nwo,l[6]=n):n=l[6];let m="merged"===o.state?"success":"accent",h="merged"===o.state?"Merged":"In progress";return l[7]!==m||l[8]!==h?(i=(0,W.jsx)(aT.A,{variant:m,size:"small",children:h}),l[7]=m,l[8]=h,l[9]=i):i=l[9],l[10]!==c||l[11]!==u?(a=(0,W.jsx)(e$.Q,{as:"a",href:c,variant:"primary",size:"small",children:u}),l[10]=c,l[11]=u,l[12]=a):a=l[12],l[13]!==i||l[14]!==a?(s=(0,W.jsxs)("div",{className:"PullRequestTaskToolbar-module__toolbarActions--chqDS FilePreview-module__toolbarActions--h04aW",children:[i,a]}),l[13]=i,l[14]=a,l[15]=s):s=l[15],l[16]!==n||l[17]!==s?(r=(0,W.jsxs)(W.Fragment,{children:[n,s]}),l[16]=n,l[17]=s,l[18]=r):r=l[18],r}try{aE.displayName||(aE.displayName="PullRequestTaskToolbar")}catch{}function aA(e){let t,n,i,a,s,r,l,o,d=(0,z.c)(22),{className:c,task:u}=e,{pullRequest:m,isLoading:h}=(0,ah.as)(u),{start:f,error:p}=(0,ah.vQ)(u),[g,y]=(0,eh.useState)(null),x=p&&p!==g;d[0]!==p?(t=()=>{y(p)},d[0]=p,d[1]=t):t=d[1];let v=t;return d[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{y(null)},d[2]=n):n=d[2],d[3]!==u.id?(i=[u.id],d[3]=u.id,d[4]=i):i=d[4],(0,eh.useEffect)(n,i),d[5]!==p||d[6]!==v||d[7]!==x?(a=x&&(0,W.jsx)(al,{error:p,onDismiss:v}),d[5]=p,d[6]=v,d[7]=x,d[8]=a):a=d[8],d[9]!==c?(s=(0,em.$)("TaskToolbar-module__toolbar--lRGiC FilePreview-module__toolbar--ZZWN1",c),d[9]=c,d[10]=s):s=d[10],d[11]!==h||d[12]!==m||d[13]!==f||d[14]!==u?(r=m?(0,W.jsx)(aE,{pullRequest:m}):(0,W.jsx)(aD,{loading:h,task:u,startTask:f}),d[11]=h,d[12]=m,d[13]=f,d[14]=u,d[15]=r):r=d[15],d[16]!==s||d[17]!==r?(l=(0,W.jsx)("div",{className:s,children:r}),d[16]=s,d[17]=r,d[18]=l):l=d[18],d[19]!==a||d[20]!==l?(o=(0,W.jsxs)(W.Fragment,{children:[a,l]}),d[19]=a,d[20]=l,d[21]=o):o=d[21],o}try{aA.displayName||(aA.displayName="TaskToolbar")}catch{}function aR(e){let t,n,i,a=(0,z.c)(8),{task:s}=e,r=s.description;s.name&&(r=`# ${s.name}

${r}`);let l=r;a[0]!==s?(t=(0,W.jsx)(aA,{task:s}),a[0]=s,a[1]=t):t=a[1];let o=`${s.tag}.md`;return a[2]!==l||a[3]!==o?(n=(0,W.jsx)(i2.G,{content:{value:l,name:o},fallbackToRaw:!0,hideHeadingAnchors:!0}),a[2]=l,a[3]=o,a[4]=n):n=a[4],a[5]!==t||a[6]!==n?(i=(0,W.jsx)(aa.Fn,{children:(0,W.jsxs)("div",{className:"TaskPreview-module__container--RZnMV",children:[t,n]})}),a[5]=t,a[6]=n,a[7]=i):i=a[7],i}try{aR.displayName||(aR.displayName="TaskPreview")}catch{}function aO(e){let t,n=(0,z.c)(35),{isOpening:i,onClose:a,previewItem:s}=e,r=(0,ej.qw)(),l=null;switch(s.type){case"file":{let e;n[0]!==i||n[1]!==a||n[2]!==s?(e=(0,W.jsx)(i4,{isPreviewOpening:i,file:s,onClose:a}),n[0]=i,n[1]=a,n[2]=s,n[3]=e):e=n[3],l=e;break}case"file-diff":{let e;n[4]!==s?(e=(0,W.jsx)(iR,{fileDiff:s}),n[4]=s,n[5]=e):e=n[5],l=e;break}case"issue":{let e;n[6]!==i||n[7]!==a||n[8]!==s?(e=(0,W.jsx)(at,{isPreviewOpening:i,issue:s,onClose:a}),n[6]=i,n[7]=a,n[8]=s,n[9]=e):e=n[9],l=e;break}case"new-issue":{let e;n[10]!==i||n[11]!==a||n[12]!==s?(e=(0,W.jsx)(n4,{isPreviewOpening:i,issue:s,onClose:a}),n[10]=i,n[11]=a,n[12]=s,n[13]=e):e=n[13],l=e;break}case"update-issue":{let e;n[14]!==i||n[15]!==a||n[16]!==s?(e=(0,W.jsx)(ih,{isPreviewOpening:i,issue:s,onClose:a}),n[14]=i,n[15]=a,n[16]=s,n[17]=e):e=n[17],l=e;break}case"existing-issue":{let e;n[18]!==i||n[19]!==a||n[20]!==s?(e=(0,W.jsx)(n8,{isPreviewOpening:i,issue:s,onClose:a}),n[18]=i,n[19]=a,n[20]=s,n[21]=e):e=n[21],l=e;break}case"image":{let e;n[22]!==s?(e=(0,W.jsx)(i9,{image:s}),n[22]=s,n[23]=e):e=n[23],l=e;break}case"planning-task":{let e;n[24]!==s?(e=(0,W.jsx)(aR,{task:s}),n[24]=s,n[25]=e):e=n[25],l=e;break}case"planning-spec":{let e;n[26]!==s?(e=(0,W.jsx)(a_,{spec:s}),n[26]=s,n[27]=e):e=n[27],l=e;break}case"plugin-content":if(n[28]!==r||n[29]!==s.reference){for(let e of r){let t=e.previewComponents?.[s.reference.type];if(t){l=(0,W.jsx)(t,{reference:s.reference});break}}n[28]=r,n[29]=s.reference,n[30]=l}else l=n[30];break;case"job-result":{let e;n[31]!==s?(e=(0,W.jsx)(ai,{jobResult:s}),n[31]=s,n[32]=e):e=n[32],l=e}}return n[33]!==l?(t=l?(0,W.jsx)(ei.t,{fallback:(0,W.jsx)(ef.x,{regionName:"This workbench item"}),children:l}):null,n[33]=l,n[34]=t):t=n[34],t}try{aO.displayName||(aO.displayName="ContentPreviewItem")}catch{}var aP=n(77999);function aF(e){let t=(0,z.c)(3),{file:n}=e;if(n.isStreaming){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(eM.A,{size:"small"}),t[0]=e):e=t[0],e}if("markdown"===n.language){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.MarkdownIcon,{}),t[1]=e):e=t[1],e}{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.CodeIcon,{}),t[2]=e):e=t[2],e}}function aM(e){let t=(0,z.c)(12),{item:n}=e;switch(n.type){case"file":{let e;return t[0]!==n?(e=(0,W.jsx)(aF,{file:n}),t[0]=n,t[1]=e):e=t[1],e}case"file-diff":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.FileDiffIcon,{}),t[2]=e):e=t[2],e}case"image":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.ImageIcon,{}),t[3]=e):e=t[3],e}case"issue":{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.IssueOpenedIcon,{}),t[4]=e):e=t[4],e}case"new-issue":{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.IssueDraftIcon,{}),t[5]=e):e=t[5],e}case"update-issue":{let e;return t[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.IssueDraftIcon,{}),t[6]=e):e=t[6],e}case"existing-issue":{let e;return t[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.IssueOpenedIcon,{}),t[7]=e):e=t[7],e}case"planning-task":{let e;return t[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.TasklistIcon,{}),t[8]=e):e=t[8],e}case"planning-spec":{let e;return t[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)(er.NoteIcon,{}),t[9]=e):e=t[9],e}case"plugin-content":{let e;return t[10]!==n.icon?(e=n.icon?(0,W.jsx)(n.icon,{}):null,t[10]=n.icon,t[11]=e):e=t[11],e}default:return null}}function a$(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,C,_,N=(0,z.c)(57);N[0]!==e?({ref:r,onClick:a,onClose:s,isActive:n,item:i,controlHintId:t,tabPanelId:o,...l}=e,N[0]=e,N[1]=t,N[2]=n,N[3]=i,N[4]=a,N[5]=s,N[6]=r,N[7]=l,N[8]=o):(t=N[1],n=N[2],i=N[3],a=N[4],s=N[5],r=N[6],l=N[7],o=N[8]);let[S,I]=(0,eh.useState)(!1),k=(0,eh.useRef)(null),L=!i.disableCloseButton;N[9]!==s?(d=()=>{s&&s(),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},N[9]=s,N[10]=d):d=N[10];let D=d,T=(0,eh.useRef)(null),E=i.name;N[11]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{let e=k.current;if(!e)return;let t=e.scrollWidth>e.clientWidth;I(e=>t!==e?t:e)},N[11]=c):c=N[11];let A=c;N[12]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{A()},N[12]=u):u=N[12],N[13]!==E?(m=[E],N[13]=E,N[14]=m):m=N[14],(0,eh.useLayoutEffect)(u,m),N[15]!==S?(h=(0,em.$)("ContentPreviewTab-module__title--l571P",{"ContentPreviewTab-module__isClipped--G4HHE":S}),N[15]=S,N[16]=h):h=N[16];let R=`content-preview-tab-${i.id}`;N[17]!==h||N[18]!==R||N[19]!==E?(f=(0,W.jsx)("span",{className:h,"data-title":E,"data-testid":R,ref:k,onMouseEnter:A,children:E}),N[17]=h,N[18]=R,N[19]=E,N[20]=f):f=N[20];let O=f;N[21]!==n?(p=(0,em.$)("ContentPreviewTab-module__tabContent--xe28k",{"ContentPreviewTab-module__slimLineTopTabs--ntJs1":X.W.copilotWorkbenchSlimLineTopTabs,"ContentPreviewTab-module__isActive--Pi2gz":n}),N[21]=n,N[22]=p):p=N[22];let P=n?"true":void 0;return N[23]!==a?(g=e=>{a&&a(e),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},N[23]=a,N[24]=g):g=N[24],N[25]!==D||N[26]!==L?(y=e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":L&&D();break;case"tab":if(e.shiftKey)break;L&&(e.preventDefault(),T.current?.focus())}},x=e=>{1===e.button&&L&&D()},N[25]=D,N[26]=L,N[27]=y,N[28]=x):(y=N[27],x=N[28]),N[29]!==i?(v=(0,W.jsx)("span",{className:"ContentPreviewTab-module__icon--lefqk",children:(0,W.jsx)(aM,{item:i})}),N[29]=i,N[30]=v):v=N[30],N[31]!==S||N[32]!==E||N[33]!==O?(b=S?(0,W.jsx)(aP.m,{text:E,position:"bottom",children:O}):O,N[31]=S,N[32]=E,N[33]=O,N[34]=b):b=N[34],N[35]!==i.trailingComponent?(j=i.trailingComponent?(0,W.jsx)("div",{className:"ContentPreviewTab-module__trailingComponent--lAh8u",children:i.trailingComponent}):null,N[35]=i.trailingComponent,N[36]=j):j=N[36],N[37]!==t||N[38]!==r||N[39]!==l||N[40]!==g||N[41]!==y||N[42]!==x||N[43]!==v||N[44]!==b||N[45]!==j||N[46]!==P||N[47]!==o?(w=(0,W.jsxs)("button",{className:"ContentPreviewTab-module__mainButton--vLx58",type:"button",role:"tab","aria-selected":P,"aria-describedby":t,"aria-controls":o,onClick:g,onKeyDown:y,onAuxClick:x,ref:r,...l,children:[v,b,j]}),N[37]=t,N[38]=r,N[39]=l,N[40]=g,N[41]=y,N[42]=x,N[43]=v,N[44]=b,N[45]=j,N[46]=P,N[47]=o,N[48]=w):w=N[48],N[49]!==D||N[50]!==L||N[51]!==E?(C=L&&(0,W.jsx)("div",{className:"ContentPreviewTab-module__closeButton--SByWv",children:(0,W.jsx)(eo.K,{icon:er.XIcon,size:"small",variant:"invisible","aria-label":`Close ${E}`,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:D,ref:T})}),N[49]=D,N[50]=L,N[51]=E,N[52]=C):C=N[52],N[53]!==w||N[54]!==C||N[55]!==p?(_=(0,W.jsx)("div",{className:"ContentPreviewTab-module__tabContainer--ApaB_",children:(0,W.jsxs)("div",{className:p,children:[w,C]})}),N[53]=w,N[54]=C,N[55]=p,N[56]=_):_=N[56],_}try{aF.displayName||(aF.displayName="CodeTabIcon")}catch{}try{aM.displayName||(aM.displayName="TabIcon")}catch{}try{a$.displayName||(a$.displayName="ContentPreviewTab")}catch{}var aB=n(3433);function aV(){let e,t=(0,z.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,W.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{aV.displayName||(aV.displayName="DiceIcon")}catch{}function aU(e){let t,n,i,a,s,r,l,o,d,c,u,m,h=(0,z.c)(23),{isOpening:f}=e,p=(0,Z.b)(),g=(0,Q.Pk)(),y=(0,aB.zy)(),x=(0,eh.useRef)(null);h[0]!==g?(t=(0,tx.W)(g),h[0]=g,h[1]=t):t=h[1];let v=t,b=(0,iH.X)();h[2]===Symbol.for("react.memo_cache_sentinel")?(n=[],h[2]=n):n=h[2];let[j,w]=(0,eh.useState)(n);h[3]!==b.icebreakers?(i=()=>{var e;if(Array.isArray(e=b.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=b.icebreakers.find(aq);e&&e.data.length>0&&w(e.data)}},h[3]=b.icebreakers,h[4]=i):i=h[4],h[5]!==y||h[6]!==b.icebreakers?(a=[b.icebreakers,y],h[5]=y,h[6]=b.icebreakers,h[7]=a):a=h[7],(0,eh.useEffect)(i,a),h[8]!==f?(s=()=>{f&&x.current&&window.requestAnimationFrame(()=>{x.current?.focus({preventScroll:!0})})},r=[f],h[8]=f,h[9]=s,h[10]=r):(s=h[9],r=h[10]),(0,eh.useEffect)(s,r),h[11]!==v||h[12]!==j||h[13]!==p||h[14]!==g?(l=()=>{if(0===j.length)return;let e=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(j),t=0===g.messages.length?v:(0,tx.W)(g),n=g.currentUserLogin,i=e.message;p.sendChatMessage({thread:t,content:i.replaceAll("$$USERNAME$$",n),references:g.currentReferences,topic:g.currentTopic,context:g.context,customInstructions:g.customInstructions,model:g.model}),(0,et.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:g.currentTopic?.name,mode:"immersive",suggestionId:e.id})},h[11]=v,h[12]=j,h[13]=p,h[14]=g,h[15]=l):l=h[15];let C=l;return h[16]===Symbol.for("react.memo_cache_sentinel")?(c=(0,W.jsx)(er.BrowserIcon,{size:24,className:"EmptyState-module__icon--Ur91O"}),u=(0,W.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),o=(0,W.jsx)("h2",{className:"EmptyState-module__heading--fStvv",children:"View files directly within Copilot"}),d=(0,W.jsx)("p",{className:"EmptyState-module__subtitle--tjaBc",children:"Ask to generate a file or app, or use the button below to try it yourself."}),h[16]=o,h[17]=d,h[18]=c,h[19]=u):(o=h[16],d=h[17],c=h[18],u=h[19]),h[20]!==C||h[21]!==g.isWaitingOnCopilot?(m=(0,W.jsxs)("div",{className:"EmptyState-module__container--LAYqE",children:[c,u,o,d,(0,W.jsx)(e$.Q,{ref:x,leadingVisual:aV,onClick:C,disabled:g.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]}),h[20]=C,h[21]=g.isWaitingOnCopilot,h[22]=m):m=h[22],m}function aq(e){return"interactional"===e.type}try{aU.displayName||(aU.displayName="EmptyState")}catch{}function aH(){let e,t=(0,z.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsx)("div",{className:"LoadingState-module__container--dKvYJ",children:(0,W.jsx)(eM.A,{size:"large"})}),t[0]=e):e=t[0],e}try{aH.displayName||(aH.displayName="LoadingState")}catch{}function aG(e,t,n={}){(0,et.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function aK(){let e,t=(0,z.c)(5),{closePreviewPane:n}=(0,eb.xx)(),{secondaryColumnFullWidth:i,toggleSecondaryColumnFullWidth:a,setDesktopLayoutState:s}=(0,en.L)();return t[0]!==n||t[1]!==i||t[2]!==s||t[3]!==a?(e=()=>{i&&(a(),s(aW)),n()},t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=e):e=t[4],e}function aW(e){return{...e,fullWidth:!1}}function az(e){let t,n,i,a,s,r,l,o,d,c,u,m,h,f,p,g,y,x,v,b,j,w,C,_,N,S,I,k,L,D,T,E,A,R,O,P,F,M,$,B,V,U,q=(0,z.c)(131),{returnFocusRef:H,disableResourcePanel:G,disableActionsMenu:K}=e,en=void 0!==K&&K,ei=(0,eb.tZ)(),ef=(0,eb.wI)(),{selectedThreadID:ej}=(0,Q.bP)("selectedThreadID"),ew=(0,ee.tD)(),eC=(0,Z.b)(),e_=(0,ea.S)(ej),{items:eN,allOpenItems:eS,selectedItem:eI,openItem:ek,closeItem:eL,closeItems:eD,showLoadingState:eT,openResourcePanel:eE,returnFocusElementRef:eA}=(0,eb.xx)(),eR=aK(),eO=(0,ea.S)(ei),eP=ei&&!eO,eF=eO&&!ei;if(q[0]!==eN||q[1]!==eS){let e;q[3]!==eN?(e=e=>eN.get(e),q[3]=eN,q[4]=e):e=q[4],t=eS.map(e).filter(aX),q[0]=eN,q[1]=eS,q[2]=t}else t=q[2];let eM=t,e$=(0,eh.useId)(),eB=(0,eh.useId)(),eV=(0,eh.useId)();if(q[5]!==eN||q[6]!==eS||q[7]!==eI){let e;q[10]!==eN?(e=e=>eN.get(e),q[10]=eN,q[11]=e):e=q[11],i=(n=eS.map(e).filter(aY)).find(e=>e.id===eI)??n[0],q[5]=eN,q[6]=eS,q[7]=eI,q[8]=n,q[9]=i}else n=q[8],i=q[9];let eU=i,eq=(0,ea.S)(eI),eH=X.W.copilotResourcePanel&&!(void 0!==G&&G),eG=(0,eh.useRef)(!0);q[12]!==eF||q[13]!==eP||q[14]!==eA||q[15]!==H||q[16]!==eU?(a=()=>{if(eF||X.W.focusTextAreaInsteadOfWorkbench&&eG.current&&eU&&"file"===eU.type&&!eP){eG.current=!1;let e=eA.current;e?e.focus():H.current?.focus()}},s=[eF,eP,H,eU,eA],q[12]=eF,q[13]=eP,q[14]=eA,q[15]=H,q[16]=eU,q[17]=a,q[18]=s):(a=q[17],s=q[18]),(0,eh.useEffect)(a,s),q[19]!==eR||q[20]!==e_||q[21]!==ej?(r=()=>{null!=e_&&e_!==ej&&eR()},l=[eR,e_,ej],q[19]=eR,q[20]=e_,q[21]=ej,q[22]=r,q[23]=l):(r=q[22],l=q[23]),(0,eh.useEffect)(r,l),q[24]!==ei||q[25]!==n||q[26]!==eI?(d=()=>{if(!eI||!ei)return;let e=n.findIndex(e=>e.id===eI),t=ez.current[e];t?.scrollIntoView({block:"nearest",inline:"nearest"})},o=[eI,n,ei],q[24]=ei,q[25]=n,q[26]=eI,q[27]=o,q[28]=d):(o=q[27],d=q[28]),(0,eh.useEffect)(d,o),q[29]!==ef||q[30]!==eE||q[31]!==eq||q[32]!==eH||q[33]!==eI||q[34]!==eU?(c=()=>{eH&&eI&&eI!==eq&&!ef&&eU?.type==="file"&&(0,Y.SI)(eU.reference)&&eE()},u=[ef,eE,eq,eH,eI,eU],q[29]=ef,q[30]=eE,q[31]=eq,q[32]=eH,q[33]=eI,q[34]=eU,q[35]=c,q[36]=u):(c=q[35],u=q[36]),(0,eh.useEffect)(c,u),q[37]!==ew||q[38]!==eC||q[39]!==eq||q[40]!==eI||q[41]!==eU?(m=()=>{if(!X.W.copilotResourcePanel||eI===eq)return;let{currentReferences:e,implicitReferences:t}=ew();if(eI&&eU?.type==="file"){let n=eU.reference;(0,Y.SI)(n)&&!e.some(e=>(0,Y.x_)(e,n))&&(t.size>0&&eC.clearImplicitReferences(),eC.addReference(n,"ContentPreview",{implicit:!0}))}else t.size>0&&eC.clearImplicitReferences()},h=[ew,eC,eq,eI,eU],q[37]=ew,q[38]=eC,q[39]=eq,q[40]=eI,q[41]=eU,q[42]=m,q[43]=h):(m=q[42],h=q[43]),(0,eh.useEffect)(m,h),q[44]!==eM?(f=async()=>{let e=eM.map(aJ);iA(new File([await (0,eu._6)(e).blob()],"files.zip"))},q[44]=eM,q[45]=f):f=q[45];let eK=f;q[46]!==eL||q[47]!==eR||q[48]!==n.length||q[49]!==eU?(p=e=>{if(eU){let t=void 0!==e&&e&&1===n.length;eL(eU.id),t&&(eR(),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},q[46]=eL,q[47]=eR,q[48]=n.length,q[49]=eU,q[50]=p):p=q[50];let eW=p;q[51]===Symbol.for("react.memo_cache_sentinel")?(g=[],q[51]=g):g=q[51];let ez=(0,eh.useRef)(g),eQ=(0,eh.useRef)(null);q[52]===Symbol.for("react.memo_cache_sentinel")?(y={containerRef:eQ,focusableElementFilter:aZ,bindKeys:es.z0.ArrowHorizontal|es.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},q[52]=y):y=q[52],q[53]!==n?(x=[n],q[53]=n,q[54]=x):x=q[54],(0,el.G)(y,x);let eZ=!(0,J.g)(eQ);if(q[55]!==e$||q[56]!==eL||q[57]!==eD||q[58]!==eV||q[59]!==eR||q[60]!==ef||q[61]!==ek||q[62]!==n||q[63]!==eE||q[64]!==eH||q[65]!==eI||q[66]!==eB){let e;q[78]!==eD||q[79]!==eR?(e=()=>{eD(),eR(),(0,et.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},q[78]=eD,q[79]=eR,q[80]=e):e=q[80],v=e,q[81]===Symbol.for("react.memo_cache_sentinel")?(k=(0,em.$)(eg,X.W.copilotWorkbenchSlimLineTopTabs&&ep),q[81]=k):k=q[81],q[82]!==ef||q[83]!==eE||q[84]!==eH?(L=eH&&!ef&&(0,W.jsx)("div",{className:(0,em.$)(ey,ex),children:(0,W.jsx)(eo.K,{icon:er.ListUnorderedIcon,"aria-label":"Open resource panel",onClick:eE,variant:"invisible"})}),q[82]=ef,q[83]=eE,q[84]=eH,q[85]=L):L=q[85],I="ContentPreview-module__tabsContainer--t0I1P",b="ContentPreview-module__tabs--X2Pn9",j="tablist",w="Workbench items",C=eQ,_=-1,N=aQ,S=n.map((e,t)=>(0,W.jsx)(a$,{id:e.id===eI?e$:void 0,tabPanelId:e.id===eI?eB:void 0,controlHintId:eV,isActive:e.id===eI,onClick:()=>{ek(e.id),aG("filePreviewTab.click",e)},onClose:()=>(e=>{let t=n[e];if(!t)return;let i=ez.current[e+1]??ez.current[e-1]??eQ.current;i?.focus();let a=1===n.length;eL(t.id),a&&eR(),aG("filePreviewTab.close",t)})(t),item:e,ref:e=>{ez.current[t]=e}},e.id)),q[55]=e$,q[56]=eL,q[57]=eD,q[58]=eV,q[59]=eR,q[60]=ef,q[61]=ek,q[62]=n,q[63]=eE,q[64]=eH,q[65]=eI,q[66]=eB,q[67]=v,q[68]=b,q[69]=j,q[70]=w,q[71]=C,q[72]=_,q[73]=N,q[74]=S,q[75]=I,q[76]=k,q[77]=L}else v=q[67],b=q[68],j=q[69],w=q[70],C=q[71],_=q[72],N=q[73],S=q[74],I=q[75],k=q[76],L=q[77];q[86]!==eV?(D=(0,W.jsx)("span",{id:eV,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),q[86]=eV,q[87]=D):D=q[87],q[88]===Symbol.for("react.memo_cache_sentinel")?(T=(0,W.jsx)("span",{}),q[88]=T):T=q[88],q[89]!==b||q[90]!==j||q[91]!==w||q[92]!==C||q[93]!==_||q[94]!==N||q[95]!==S||q[96]!==D?(E=(0,W.jsxs)("div",{className:b,role:j,"aria-label":w,ref:C,tabIndex:_,onWheel:N,children:[S,D,T]}),q[89]=b,q[90]=j,q[91]=w,q[92]=C,q[93]=_,q[94]=N,q[95]=S,q[96]=D,q[97]=E):E=q[97],q[98]!==I||q[99]!==E?(A=(0,W.jsx)("div",{className:I,children:E}),q[98]=I,q[99]=E,q[100]=A):A=q[100];let eJ=eZ&&"ContentPreview-module__leftDivider--FCyvC";return q[101]!==eJ?(R=(0,em.$)(ey,eJ),q[101]=eJ,q[102]=R):R=q[102],q[103]!==v||q[104]!==en||q[105]!==eK||q[106]!==eM.length||q[107]!==eS.length?(O=!en&&eS.length>0&&(0,W.jsxs)(ed.W,{children:[(0,W.jsx)(ed.W.Anchor,{children:(0,W.jsx)(eo.K,{icon:er.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,W.jsx)(ed.W.Overlay,{children:(0,W.jsxs)(ec.l,{children:[eM.length>0&&(0,W.jsxs)(ec.l.Item,{onSelect:eK,children:[(0,W.jsx)(ec.l.LeadingVisual,{children:(0,W.jsx)(er.FileZipIcon,{})}),"Download all files"]}),(0,W.jsxs)(ec.l.Item,{onSelect:v,children:[(0,W.jsx)(ec.l.LeadingVisual,{children:(0,W.jsx)(er.XIcon,{})}),"Close all tabs"]})]})})]}),q[103]=v,q[104]=en,q[105]=eK,q[106]=eM.length,q[107]=eS.length,q[108]=O):O=q[108],q[109]===Symbol.for("react.memo_cache_sentinel")?(P=(0,W.jsx)(a0,{}),q[109]=P):P=q[109],q[110]!==R||q[111]!==O?(F=(0,W.jsxs)("div",{className:R,children:[O,P]}),q[110]=R,q[111]=O,q[112]=F):F=q[112],q[113]!==k||q[114]!==L||q[115]!==A||q[116]!==F?(M=(0,W.jsxs)("div",{className:k,children:[L,A,F]}),q[113]=k,q[114]=L,q[115]=A,q[116]=F,q[117]=M):M=q[117],q[118]===Symbol.for("react.memo_cache_sentinel")?($=(0,em.$)(ev,"content-preview-content"),q[118]=$):$=q[118],q[119]!==eW||q[120]!==eP||q[121]!==eU||q[122]!==eT?(B=eT?(0,W.jsx)(aH,{}):eU?(0,W.jsx)(aO,{isOpening:eP,previewItem:eU,onClose:eW}):(0,W.jsx)(aU,{isOpening:eP}),q[119]=eW,q[120]=eP,q[121]=eU,q[122]=eT,q[123]=B):B=q[123],q[124]!==e$||q[125]!==eB||q[126]!==B?(V=(0,W.jsx)("div",{className:$,role:"tabpanel",id:eB,"aria-labelledby":e$,children:B}),q[124]=e$,q[125]=eB,q[126]=B,q[127]=V):V=q[127],q[128]!==M||q[129]!==V?(U=(0,W.jsxs)(W.Fragment,{children:[M,V]}),q[128]=M,q[129]=V,q[130]=U):U=q[130],U}function aQ(e){e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft=e.currentTarget.scrollLeft+e.deltaY)}function aZ(e){return"tab"===e.role}function aJ(e){return new File([e.value],e.name)}function aY(e){return!!e}function aX(e){return e?.type==="file"}function a0(){let e,t,n,i,a=(0,z.c)(11),s=aK(),{secondaryColumnFullWidth:r,toggleSecondaryColumnFullWidth:l}=(0,en.L)(),o=r?er.MinimizeIcon:er.MaximizeIcon,d=r?"Collapse workbench":"Expand workbench";return a[0]!==l?(e=()=>{l()},a[0]=l,a[1]=e):e=a[1],a[2]!==o||a[3]!==d||a[4]!==e?(t=(0,W.jsx)(eo.K,{variant:"invisible",icon:o,"aria-label":d,onClick:e,className:"ContentPreview-module__onlyShowOnLargeViewports--pV5gG"}),a[2]=o,a[3]=d,a[4]=e,a[5]=t):t=a[5],a[6]!==s?(n=(0,W.jsx)(eo.K,{variant:"invisible",icon:er.XIcon,"aria-label":"Close workbench",onClick:()=>{s(),(0,et.BI)("dotcom_chat.activate",{target:"CLOSE_PREVIEW_PANE_BUTTON",mode:"immersive"})}}),a[6]=s,a[7]=n):n=a[7],a[8]!==t||a[9]!==n?(i=(0,W.jsxs)("div",{className:"d-flex gap-1",children:[t,n]}),a[8]=t,a[9]=n,a[10]=i):i=a[10],i}function a1(){let e,t=(0,z.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:eg,children:(0,W.jsx)("div",{className:(0,em.$)(ey,ex),children:(0,W.jsx)(a0,{})})}),(0,W.jsx)("div",{className:(0,em.$)(ev),children:(0,W.jsx)(ef.x,{regionName:"The workbench"})})]}),t[0]=e):e=t[0],e}function a2(e){let t,n,i,a,s,r=(0,z.c)(16),{returnFocusRef:l,disableResourcePanel:o,disableActionsMenu:d,className:c}=e,u=void 0!==o&&o,m=void 0!==d&&d,h=(0,eh.useId)(),{contentPreviewRef:f}=(0,eb.xx)(),p=(0,eb.tZ)(),g=(0,eb.wI)()&&"ContentPreview-module__resourcePanelOpen--YIQql";r[0]!==c||r[1]!==g?(t=(0,em.$)("ContentPreview-module__container--y5_MG",X.W.copilotWorkbenchSlimLineTopTabs&&ep,g,c),r[0]=c,r[1]=g,r[2]=t):t=r[2];let y=p?f:void 0;return r[3]!==h?(n=(0,W.jsx)("h2",{id:h,className:"sr-only",children:"Workbench"}),r[3]=h,r[4]=n):n=r[4],r[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,W.jsx)(a1,{}),r[5]=i):i=r[5],r[6]!==m||r[7]!==u||r[8]!==l?(a=(0,W.jsx)(ei.t,{fallback:i,children:(0,W.jsx)(az,{returnFocusRef:l,disableResourcePanel:u,disableActionsMenu:m})}),r[6]=m,r[7]=u,r[8]=l,r[9]=a):a=r[9],r[10]!==h||r[11]!==t||r[12]!==y||r[13]!==n||r[14]!==a?(s=(0,W.jsxs)("div",{"aria-labelledby":h,className:t,tabIndex:-1,"data-testid":"content-preview",role:"dialog","aria-modal":"false",ref:y,children:[n,a]}),r[10]=h,r[11]=t,r[12]=y,r[13]=n,r[14]=a,r[15]=s):s=r[15],s}try{az.displayName||(az.displayName="ContentPreviewInner")}catch{}try{a0.displayName||(a0.displayName="CloseContentPreviewButton")}catch{}try{a1.displayName||(a1.displayName="ContentPreviewFallback")}catch{}try{a2.displayName||(a2.displayName="ContentPreview")}catch{}},79684:(e,t,n)=>{n.d(t,{B:()=>g});var i=n(74848),a=n(16522),s=n(96540),r=n(3433),l=n(94236),o=n(5524);let d="Breadcrumbs-module__container--bnnIp",c="Breadcrumbs-module__list--hG7n1",u="Breadcrumbs-module__item--fekY7",m="Breadcrumbs-module__link--A48Bt",h="Breadcrumbs-module__text--yZS1N";var f=n(38621),p=n(40090);let g=e=>{let t,n,r,h,f,p=(0,a.c)(31),{children:g,"aria-label":j,condensed:w}=e,C=void 0===j?"Breadcrumbs":j;if(p[0]!==g){t=[];let e=(n,i)=>{let a=void 0===i?"":i;for(let[i,r]of s.Children.toArray(n).entries())(0,s.isValidElement)(r)&&(r.type===s.Fragment||"Symbol(react.fragment)"===r.type.toString()?e(r.props.children,`${a}fragment-${i}-`):r.type===y?t.push({key:r.key?.toString()||`${a}item-${i}`,href:r.props.href,children:r.props.children,hasMenu:!1}):r.type===x&&t.push({key:r.key?.toString()||`${a}item-${i}`,children:r.props.children,hasMenu:!0,menuOverlay:r.props.menuOverlay}))};e(g),p[0]=g,p[1]=t}else t=p[1];let _=t[t.length-1];p[2]!==t?(n=t.slice(0,-1),p[2]=t,p[3]=n):n=p[3];let N=n,S=t.length>=3,I=void 0!==w&&w&&S,k=s.useRef(null);if(void 0!==w)if(I){let e,t,n,a,s;return p[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(l.W.Button,{ref:k,className:m,children:"..."}),p[4]=e):e=p[4],p[5]!==N?(t=(0,i.jsx)("li",{className:u,children:(0,i.jsxs)(l.W,{children:[e,(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(o.l,{children:N.map(v)})})]})}),p[5]=N,p[6]=t):t=p[6],p[7]!==_?(n=_&&(_.hasMenu&&_.menuOverlay?(0,i.jsx)(x,{menuOverlay:_.menuOverlay,children:_.children}):_.href?(0,i.jsx)(y,{href:_.href,children:_.children}):null),p[7]=_,p[8]=n):n=p[8],p[9]!==t||p[10]!==n?(a=(0,i.jsxs)("ol",{className:c,children:[t,n]}),p[9]=t,p[10]=n,p[11]=a):a=p[11],p[12]!==C||p[13]!==a?(s=(0,i.jsx)("nav",{className:`${d} Breadcrumbs-module__condensed--l60Z1`,"aria-label":C,children:a}),p[12]=C,p[13]=a,p[14]=s):s=p[14],s}else{let e,t;return p[15]!==g?(e=(0,i.jsx)("ol",{className:c,children:g}),p[15]=g,p[16]=e):e=p[16],p[17]!==C||p[18]!==e?(t=(0,i.jsx)("nav",{className:d,"aria-label":C,children:e}),p[17]=C,p[18]=e,p[19]=t):t=p[19],t}let L=`${c} ${S?"Breadcrumbs-module__fullList--aHVvT":"Breadcrumbs-module__alwaysVisible--dK_nL"}`;return p[20]!==g||p[21]!==L?(r=(0,i.jsx)("ol",{className:L,children:g}),p[20]=g,p[21]=L,p[22]=r):r=p[22],p[23]!==S||p[24]!==_||p[25]!==N?(h=S&&(0,i.jsxs)("ol",{className:`${c} Breadcrumbs-module__condensedList--vpMXO`,children:[(0,i.jsx)("li",{className:u,children:(0,i.jsxs)(l.W,{children:[(0,i.jsx)(l.W.Button,{ref:k,className:m,children:"..."}),(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(o.l,{children:N.map(b)})})]})}),_&&(_.hasMenu&&_.menuOverlay?(0,i.jsx)(x,{menuOverlay:_.menuOverlay,children:_.children}):_.href?(0,i.jsx)(y,{href:_.href,children:_.children}):null)]}),p[23]=S,p[24]=_,p[25]=N,p[26]=h):h=p[26],p[27]!==C||p[28]!==r||p[29]!==h?(f=(0,i.jsxs)("nav",{className:d,"aria-label":C,children:[r,h]}),p[27]=C,p[28]=r,p[29]=h,p[30]=f):f=p[30],f},y=e=>{let t,n,s,l,o,d=(0,a.c)(14);if(d[0]!==e?({href:n,loading:s,children:t,...l}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=s,d[4]=l):(t=d[1],n=d[2],s=d[3],l=d[4]),s){let e;return d[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("li",{className:u,children:(0,i.jsx)(p.r,{className:"Breadcrumbs-module__skeleton--_d2ba"})}),d[5]=e):e=d[5],e}if(n){let e,a;return d[6]!==t?(e=(0,i.jsx)("span",{className:h,children:t}),d[6]=t,d[7]=e):e=d[7],d[8]!==n||d[9]!==l||d[10]!==e?(a=(0,i.jsx)("li",{className:u,children:(0,i.jsx)(r.N_,{...l,to:n,className:m,"aria-current":"page",children:e})}),d[8]=n,d[9]=l,d[10]=e,d[11]=a):a=d[11],a}return d[12]!==t?(o=(0,i.jsx)("li",{className:u,children:(0,i.jsx)("span",{className:"Breadcrumbs-module__textOnly--v7ypW",children:t})}),d[12]=t,d[13]=o):o=d[13],o},x=e=>{let t,n,s,r,o=(0,a.c)(9),{buttonRef:d,children:c,menuOverlay:p}=e;return o[0]!==c?(t=(0,i.jsx)("span",{className:h,children:c}),o[0]=c,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("span",{className:"Breadcrumbs-module__icon--CWnGJ",children:(0,i.jsx)(f.TriangleDownIcon,{})}),o[2]=n):n=o[2],o[3]!==t?(s=(0,i.jsx)(l.W.Anchor,{children:(0,i.jsxs)("button",{className:m,"aria-current":"page","aria-haspopup":"true",children:[t,n]})}),o[3]=t,o[4]=s):s=o[4],o[5]!==d||o[6]!==p||o[7]!==s?(r=(0,i.jsx)("li",{className:u,children:(0,i.jsxs)(l.W,{anchorRef:d,children:[s,p]})}),o[5]=d,o[6]=p,o[7]=s,o[8]=r):r=o[8],r};g.Item=y,g.ItemWithMenu=x;try{g.displayName||(g.displayName="Breadcrumbs")}catch{}try{y.displayName||(y.displayName="Item")}catch{}try{x.displayName||(x.displayName="ItemWithMenu")}catch{}function v(e){return(0,i.jsx)(o.l.LinkItem,{href:e.href,children:e.children},e.key)}function b(e){return(0,i.jsx)(o.l.LinkItem,{href:e.href,children:e.children},e.key)}},80081:(e,t,n)=>{n.d(t,{EJ:()=>a,Lm:()=>s,o_:()=>i});function i({suggestedChange:e,hasCommitRange:t,isOutdated:n,isPending:i,isResolved:a,pullRequestIsClosed:s,pullRequestIsInMergeQueue:r,userCanApplySuggestion:l,applySuggestedChangesValidationData:o,suggestedChangesConfig:d}){let{lineRange:c}=o;if(n)return{isValid:!1,reason:"This suggestion is outdated and cannot be applied."};if(i)return{isValid:!1,reason:"This suggestion is part of a pending comment and cannot be applied."};if(a)return{isValid:!1,reason:"This suggestion is part of a resolved comment and cannot be applied."};if(s)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is closed."};if(r)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is queued to merge."};if(!l)return{isValid:!1,reason:"You do not have permission to apply this suggestion."};if(!c)return{isValid:!1,reason:"This suggestion does not have a valid line range."};if(t)return{isValid:!1,reason:"Unable to apply suggestions when viewing a specific commit range."};if(!d)return{isValid:!1,reason:"Unable to determine the validity of this suggestion."};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:"Unable to apply suggestions on deleted lines."};let u=d?.sourceContentFromDiffLines,m=e.suggestion.join(`
`);return 0!==e.suggestion.length&&m===u?{isValid:!1,reason:"This suggestion is invalid because no changes were made to the code."}:{isValid:!0}}function a(e,t){return t.length>=50?{isValid:!1,reason:"Unable to commit due to too many changes in the batch."}:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let a of t)if(e.path===a.path){var n,i;return n=e.lineRange,i=a.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?{isValid:!1,reason:"Unable to commit due to other pending changes affecting this line."}:{isValid:!0}}function s(e){if(!e||e.subjectType?.toUpperCase()!=="LINE")return;let t=e.positioning??e.subject;if(!t)return;let n=t.startDiffSide??t.endDiffSide;if(!n||"isOutdated"in t&&t.isOutdated||!t.endLine||!t.endDiffSide)return;let i=t.startLine??t.endLine;return{endLineNumber:t.endLine,endOrientation:t.endDiffSide,startLineNumber:i,startOrientation:n||"RIGHT"}}},80770:(e,t,n)=>{n.d(t,{C:()=>l,n:()=>r});var i=n(16522),a=n(97286),s=n(99519);let r="all-loops";function l(){let e,t,n=(0,i.c)(3),l=(0,s.EY)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r],n[0]=e):e=n[0],n[1]!==l?(t={queryKey:e,queryFn:async()=>{let e=await l.getAllLoops();if(!e.success)throw Error(e.error);return e.data.sort(o)},refetchOnMount:!0},n[1]=l,n[2]=t):t=n[2],(0,a.I)(t)}function o(e,t){return t.updatedAt-e.updatedAt}},80947:(e,t,n)=>{n.d(t,{G:()=>tM,o:()=>t$});var i=n(74848),a=n(4817),s=n(96540),r=n(48881),l=n(85094),o=n(47970),d=n(16522),c=n(46665),u=n(26100),m=n(39876),h=n(51213),f=n(35247),p=n(23967),g=n(22072),y=n(53419),x=n(38621),v=n(69726),b=n(26108),j=n(34164),w=n(1747),C=n(36903);function _(e){let t,n,a,s=(0,d.c)(4),{className:r}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,i.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,i.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})}),s[1]=n):n=s[1],s[2]!==r?(a=(0,i.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:r,children:[t,n]}),s[2]=r,s[3]=a):a=s[3],a}try{_.displayName||(_.displayName="ExpandIcon")}catch{}let N="FileBlock-module__container--Dzsqa",S="FileBlock-module__header--AdNd3",I="FileBlock-module__language--hjnkp",k="FileBlock-module__name--PRLLi",L="FileBlock-module__previewCode--xp45Y",D="FileBlock-module__isClipped--g6E0E",T="FileBlock-module__expandIconContainer--re33w",E="FileBlock-module__actionsContainer--FCHFZ";function A(e){return e.replace(/#L\d+(-L\d+)?$/,"")}function R(e){let t,n,l,o,R,M,$,B,V,U,q,H,G,K,W,z,Q,Z,J,Y,X,ee,et,en,ei,ea=(0,d.c)(102),{language:es,name:er,url:el,code:eo,line:ed,children:ec,isClipped:eu,isStreaming:em,index:eh,startOffset:ef,endOffset:ep}=e,{message:eg}=(0,c.V)();if(ea[0]!==er||ea[1]!==el){let e=el?(0,C.as)(el):null;t=e?.repoOwner&&e?.repoName?(0,C.L2)(e.repoOwner,e.repoName,e.filePath):er,ea[0]=er,ea[1]=el,ea[2]=t}else t=ea[2];let ey=t,{updateItem:ex,openItem:ev,openPreviewPane:eb,versionedItems:ej,getOpenItems:ew}=(0,w.xx)(),{messageIndex:eC,messageId:e_,messageTimestamp:eN,autoOpenPreviewPane:eS,markdown:eI,hasAutoOpenedPreviewPaneRef:ek,setHasAutoOpenedPreviewPane:eL}=(0,r.H)(),{name:eD}=(0,p.vL)(es),eT=`file:${er}`,eE=`${eT}#${eC}.${ed}`,eA=!!eo;ea[3]!==eT||ea[4]!==eE||ea[5]!==ej?(n=(l=ej.get(eT)??[]).indexOf(eE),ea[3]=eT,ea[4]=eE,ea[5]=ej,ea[6]=n,ea[7]=l):(n=ea[6],l=ea[7]);let eR=n,eO=l.length>1&&-1!==eR?eR+1:null,eP=(0,s.useRef)(null);ea[8]!==eg.references||ea[9]!==el?(o=function(e,t){if(!f.W.fileBlockRefMatching||!e||!t)return;let n=A(e);return t.find(e=>A(e.url)===n)}(el,eg.references?.filter(F)),ea[8]=eg.references,ea[9]=el,ea[10]=o):o=ea[10];let eF=o;ea[11]!==eF||ea[12]!==ew||ea[13]!==eE||ea[14]!==eh||ea[15]!==ev||ea[16]!==eb?(R=(e,t)=>{(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive",...f.W.fileBlockRefMatching?{isRepoFile:!!eF}:{}}),ev(eE,void 0===t||t||ew().length<1||0===eh),e&&eb(eP.current)},ea[11]=eF,ea[12]=ew,ea[13]=eE,ea[14]=eh,ea[15]=ev,ea[16]=eb,ea[17]=R):R=ea[17];let eM=R;ea[18]!==eo||ea[19]!==eF||ea[20]!==eE||ea[21]!==em||ea[22]!==es||ea[23]!==eI||ea[24]!==e_||ea[25]!==eN||ea[26]!==er||ea[27]!==eA||ea[28]!==ex?(M=()=>{let e=eo?.trimEnd();eA&&e_!==h.Wp&&-1!==eI.indexOf(e)&&(f.W.fileBlockRefMatching?ex({messageId:e_,id:eE,language:es,name:er,value:eo,type:"file",timestamp:new Date(eN),isStreaming:em,isUserEdited:!1,reference:(()=>{if(!eF)return;let e=function(e){if(!f.W.fileBlockRefMatching||!e)return null;let t=/^https?:\/\/(?:github|.*\.ghe)\.com\/([^/]+)\/([^/]+)/.exec(e);return t&&t[1]&&t[2]?{owner:t[1],name:t[2]}:null}(eF.url);return{type:"file",url:A(eF.url),path:eF.path,repoID:eF.repoID,repoOwner:e?.owner??eF.repoOwner??"",repoName:e?.name??eF.repoName??"",ref:eF.ref,commitOID:eF.commitOID}})()}):ex({messageId:e_,id:eE,language:es,name:er,value:eo,type:"file",timestamp:new Date(eN),isStreaming:em,isUserEdited:!1}))},ea[18]=eo,ea[19]=eF,ea[20]=eE,ea[21]=em,ea[22]=es,ea[23]=eI,ea[24]=e_,ea[25]=eN,ea[26]=er,ea[27]=eA,ea[28]=ex,ea[29]=M):M=ea[29],ea[30]!==eo||ea[31]!==eF||ea[32]!==eE||ea[33]!==eh||ea[34]!==em||ea[35]!==es||ea[36]!==eI||ea[37]!==e_||ea[38]!==eN||ea[39]!==er||ea[40]!==eA||ea[41]!==ex||ea[42]!==el?($=[eo,es,e_,er,el,ex,eE,eA,eN,em,eI,eF,eh],ea[30]=eo,ea[31]=eF,ea[32]=eE,ea[33]=eh,ea[34]=em,ea[35]=es,ea[36]=eI,ea[37]=e_,ea[38]=eN,ea[39]=er,ea[40]=eA,ea[41]=ex,ea[42]=el,ea[43]=$):$=ea[43],(0,s.useEffect)(M,$),ea[44]!==eS||ea[45]!==ek||ea[46]!==em||ea[47]!==e_||ea[48]!==eM||ea[49]!==eA||ea[50]!==eL?(B=()=>{em&&eA&&e_!==h.Wp&&(eM(eS&&!ek.current,!1),eL(!0))},V=[em,eA,eM,eS,e_,ek,eL],ea[44]=eS,ea[45]=ek,ea[46]=em,ea[47]=e_,ea[48]=eM,ea[49]=eA,ea[50]=eL,ea[51]=B,ea[52]=V):(B=ea[51],V=ea[52]),(0,s.useEffect)(B,V);let[e$,eB]=(0,s.useState)(!1),{publicCodeReferences:eV,codeVulnerabilities:eU}=(0,m.R)(eg.copilotAnnotations,ef,ep);ea[53]!==eM?(U=()=>eM(!0),q=e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),eM(!0))},ea[53]=eM,ea[54]=U,ea[55]=q):(U=ea[54],q=ea[55]);let eq=`View file: ${er}`,eH=`chat-message-view-file-${er}`,eG=em?(0,i.jsx)(v.A,{size:"small",className:a.sX}):p.Yr.has(eD)?(0,i.jsx)(x.MarkdownIcon,{className:a.sX}):(0,i.jsx)(x.CodeIcon,{className:a.sX});ea[56]!==ey?(H=(0,i.jsx)("span",{className:k,children:ey}),ea[56]=ey,ea[57]=H):H=ea[57],ea[58]!==eO?(G=null!==eO&&(0,i.jsx)(u.g,{version:eO}),ea[58]=eO,ea[59]=G):G=ea[59],ea[60]!==I||ea[61]!==eG||ea[62]!==H||ea[63]!==G?(K=(0,i.jsxs)("div",{className:I,children:[eG,H,G]}),ea[60]=I,ea[61]=eG,ea[62]=H,ea[63]=G,ea[64]=K):K=ea[64],ea[65]!==eU||ea[66]!==eV.length||ea[67]!==eB?(W=(eV.length>0||eU.length>0)&&(0,i.jsx)(b.K,{variant:"invisible",size:"small",icon:x.ShieldIcon,"aria-label":"Code insights",onClick:e=>{e.stopPropagation(),eB(!0)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.stopPropagation(),eB(!0))}}),ea[65]=eU,ea[66]=eV.length,ea[67]=eB,ea[68]=W):W=ea[68],ea[69]!==el?(z=el&&(0,i.jsx)(b.K,{as:"a",type:void 0,"aria-label":"Open file in a new tab",icon:x.LinkExternalIcon,variant:"invisible",href:el,target:"_blank",rel:"noopener noreferrer",size:"small",onClick:P,onKeyDown:O}),ea[69]=el,ea[70]=z):z=ea[70],ea[71]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,i.jsx)("div",{className:T,children:(0,i.jsx)(_,{})}),ea[71]=Q):Q=ea[71],ea[72]!==W||ea[73]!==z?(Z=(0,i.jsxs)("div",{className:E,children:[W,z,Q]}),ea[72]=W,ea[73]=z,ea[74]=Z):Z=ea[74],ea[75]!==S||ea[76]!==K||ea[77]!==Z?(J=(0,i.jsxs)("div",{className:S,children:[K,Z]}),ea[75]=S,ea[76]=K,ea[77]=Z,ea[78]=J):J=ea[78];let eK=eu&&D;return ea[79]!==eK?(Y=(0,j.$)(L,eK),ea[79]=eK,ea[80]=Y):Y=ea[80],ea[81]!==ec?(X=(0,i.jsx)("code",{children:ec}),ea[81]=ec,ea[82]=X):X=ea[82],ea[83]!==Y||ea[84]!==X?(ee=(0,i.jsx)("pre",{className:Y,"aria-hidden":!0,children:X}),ea[83]=Y,ea[84]=X,ea[85]=ee):ee=ea[85],ea[86]!==N||ea[87]!==U||ea[88]!==q||ea[89]!==eq||ea[90]!==eH||ea[91]!==J||ea[92]!==ee?(et=(0,i.jsx)("div",{className:"position-relative",children:(0,i.jsxs)("div",{ref:eP,className:N,onClick:U,onKeyDown:q,role:"button",tabIndex:0,"aria-label":eq,"data-testid":eH,children:[J,ee]})}),ea[86]=N,ea[87]=U,ea[88]=q,ea[89]=eq,ea[90]=eH,ea[91]=J,ea[92]=ee,ea[93]=et):et=ea[93],ea[94]!==eU||ea[95]!==e$||ea[96]!==eV||ea[97]!==eB?(en=e$&&(0,i.jsx)(g.t,{publicCodeReferences:eV,codeVulnerabilities:eU,onClose:()=>eB(!1)}),ea[94]=eU,ea[95]=e$,ea[96]=eV,ea[97]=eB,ea[98]=en):en=ea[98],ea[99]!==et||ea[100]!==en?(ei=(0,i.jsxs)(i.Fragment,{children:[et,en]}),ea[99]=et,ea[100]=en,ea[101]=ei):ei=ea[101],ei}function O(e){("Enter"===e.key||" "===e.key)&&e.stopPropagation()}function P(e){return e.stopPropagation()}function F(e){return"file"===e.type||"file-v2"===e.type||"snippet"===e.type}try{R.displayName||(R.displayName="FileBlock")}catch{}let M="data-fileblock-props",$=(0,l.F)(M),B=/^name=(?<name>[^\s]+)/,V=/^name=(?<name>[^\s]+)\n?/,U=/url=(?<url>[^\s]+)/,q={code:(e,t)=>{let n=(0,l.k)(e,M);return n?(0,i.jsx)(R,{...n,children:e.children}):t}};var H=n(50467);let G=/^type=(?<type>[^\s]+)\n?/;let YamlBlockExtension=class YamlBlockExtension{get dataProperty(){return(0,l.F)(this.dataAttribute)}constructor(){(0,H._)(this,"transformMarkdown",e=>{(0,o.YR)(e,"code",e=>{let t,n=e.lang;if(!n)return;let i=(t=G.exec(e.meta??"")?.groups?.type??"").startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t.slice(1,-1):t;if(!i)return;let a={lang:n,type:i,value:e.value,isStreaming:e.isStreaming};if(!this.isSupported(a))return;let s=this.extractProps(a);e.data={hName:"div",hProperties:{[this.dataProperty]:JSON.stringify(s)},hChildren:[]}})}),(0,H._)(this,"transformHtml",e=>{(0,o.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&this.dataProperty in i.properties&&n.children.splice(t,1,i)})}),(0,H._)(this,"reactComponents",{div:(e,t)=>{let n=(0,l.k)(e,this.dataAttribute);return n?this.createComponent(n):t}})}};var K=n(72994),W=n(20382),z=n(7812),Q=n(28177),Z=n(39344),J=n(2635),Y=n(73952);function X(){let{messages:e}=(0,J.Pk)(),t=(0,Y.B)(e);return(0,s.useMemo)(()=>t.flatMap(e=>e.mediaContent||[]),[t])}function ee(e){let t=X();return e?et(e,t):""}function et(e,t){if(!e)return"";let n=e.match(/(!\[.*?\]\(image\d+\))/g);if(null==n)return e;for(let i of n){let n=/\(image(\d+)\)/,a=parseInt(i.match(n)[1],10),s=t.length-a,r=t[s]?.chatAttachmentUrl||t[s]?.url;if(r){let t=i.replace(n,`(${r})`);e=e.replace(i,t)}}return e}var en=n(7026),ei=n(69599),ea=n(46996),es=n(99852);let er=e=>e.replace(/\\n/g,`
`).replace(/^\s+|\s+$/g,""),el=(e,t)=>{let n=(e||[]).map(e=>er(e)),i=(t||[]).map(e=>er(e));return n.length===i.length&&(0,ea.A)((0,es.A)(n),(0,es.A)(i))},eo=e=>null==e?"":er(e),ed=e=>{if(Array.isArray(e)){let t=e.map(e=>"string"==typeof e?er(e):String(e));return`[${t.join(",")}]`}return"string"==typeof e||null==e?eo(e):JSON.stringify(e)},ec=(e,t)=>{let n=[],i={};return eo(e.title)!==eo(t.title)&&(n.push("title"),i.title={expected:ed(t.title),actual:ed(e.title)}),eo(e.body)!==eo(t.description)&&(n.push("body"),i.body={expected:ed(t.description),actual:ed(e.body)}),eo(e.repository)!==eo(t.repository)&&(n.push("repository"),i.repository={expected:ed(t.repository),actual:ed(e.repository)}),eo(e.template)!==eo(t.template)&&(n.push("template"),i.template={expected:ed(t.template),actual:ed(e.template)}),eo(e.issueType)!==eo(t.issueType)&&(n.push("issueType"),i.issueType={expected:ed(t.issueType),actual:ed(e.issueType)}),eo(e.milestone)!==eo(t.milestone)&&(n.push("milestone"),i.milestone={expected:ed(t.milestone),actual:ed(e.milestone)}),el(e.assignees,t.assignees)||(n.push("assignees"),i.assignees={expected:ed(t.assignees),actual:ed(e.assignees)}),el(e.labels,t.labels)||(n.push("labels"),i.labels={expected:ed(t.labels),actual:ed(e.labels)}),((e,t)=>{let n=e||[],i=t||[];if(n.length!==i.length)return!1;if(0===n.length)return!0;if(!(n.some(e=>"string"==typeof e)||i.some(e=>"string"==typeof e))&&n.every(e=>"object"==typeof e&&e.id)&&i.every(e=>"object"==typeof e&&e.id)){let e=n.map(e=>er(e.id||"")),t=i.map(e=>er(e.id||""));return(0,ea.A)((0,es.A)(e),(0,es.A)(t))}let a=e=>"string"==typeof e?e:e.title||"",s=n.map(e=>er(a(e))),r=i.map(e=>er(a(e)));return(0,ea.A)((0,es.A)(s),(0,es.A)(r))})(e.projects,t.projects)||(n.push("projects"),i.projects={expected:ed(t.projects),actual:ed(e.projects)}),(0,ea.A)(e.templateFormValues,t.templateFormValuesById)||(n.push("templateFormValues"),i.templateFormValues={expected:ed(t.templateFormValuesById),actual:ed(e.templateFormValues)}),el(e.blockedByTags,t.blockedByTags)||(n.push("blockedByTags"),i.blockedByTags={expected:ed(t.blockedByTags),actual:ed(e.blockedByTags)}),el(e.isBlockingTags,t.isBlockingTags)||(n.push("isBlockingTags"),i.isBlockingTags={expected:ed(t.isBlockingTags),actual:ed(e.isBlockingTags)}),{isEqual:0===n.length,mismatchedFields:n,fieldComparisons:i}};function eu(e){let t,n,i=(0,d.c)(8),{issues:a,isStreaming:l,isIssueTree:o}=e,c=void 0!==o&&o,{messages:u,threadSelectedAt:m}=(0,J.Pk)(),{messageId:h}=(0,r.H)();i[0]!==c||i[1]!==l||i[2]!==a||i[3]!==h||i[4]!==u||i[5]!==m?(t=()=>{let e=(0,Y.B)(u),t=e[e.length-1],n=e.find(e=>e.id===h);if(!l&&n&&"assistant"===n.role&&n.id===t?.id&&new Date(n.createdAt)>=m&&n.references&&a.length>0){let e=n.references.filter(em);for(let t of a)if(t.tag){let n=e.find(e=>e.tag===t.tag);if(n){let e=ec(t,n);if(!e.isEqual)return void(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_DRAFT_ISSUE_REFERENCE_MISMATCH",mode:"immersive",messageId:h,issueTree:c,mismatchedFields:e.mismatchedFields.join(","),fieldComparisons:JSON.stringify(e.fieldComparisons),yamlMarshaled:(0,ei.G7)("copilot_api_agentic_issue_marshal_yaml")})}}}},n=[l,a,u,m,c,h],i[0]=c,i[1]=l,i[2]=a,i[3]=h,i[4]=u,i[5]=m,i[6]=t,i[7]=n):(t=i[6],n=i[7]),(0,s.useEffect)(t,n)}function em(e){return"draft-issue"===e.type||"draft-update-issue"===e.type}let eh=e=>{if("object"!=typeof e||null==e)return null;let t={};return"title"in e&&"string"==typeof e.title?t.title=e.title:"name"in e&&"string"==typeof e.name&&(t.title=e.name),"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"template-form-values"in e&&"object"==typeof e["template-form-values"]&&null!=e["template-form-values"]&&(t.templateFormValues=Object.fromEntries(Object.entries(e["template-form-values"]).map(([e,t])=>[e,"string"==typeof t?t.trim():t]))),"description"in e&&"string"==typeof e.description&&(t.body=e.description),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"template"in e&&"string"==typeof e.template&&(t.template=e.template),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e||"object"==typeof e&&null!=e)),"milestone"in e&&"string"==typeof e.milestone&&(t.milestone=e.milestone),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"issueNumber"in e&&"number"==typeof e.issueNumber&&(t.issueNumber=e.issueNumber),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"isBlockingTags"in e&&Array.isArray(e.isBlockingTags)&&(t.isBlockingTags=e.isBlockingTags.filter(e=>"string"==typeof e)),"bodyVersion"in e&&"string"==typeof e.bodyVersion&&(t.bodyVersion=e.bodyVersion),"issueType"in e&&"string"==typeof e.issueType&&(t.issueType=e.issueType),"type"in e&&"string"==typeof e.type&&(t.type=e.type),t},ef=e=>{try{let t=(0,W.Hh)(e);return eh(t)}catch{return null}};function ep(e){let t,n,l,o,c,m,h,p,g,x,b,j,C,_,N,S,I,k,L,D=(0,d.c)(88),{yaml:T,isStreaming:E}=e,[A,R]=(0,s.useState)(E);D[0]!==E?(t=()=>{E&&R(!0)},n=[E],D[0]=E,D[1]=t,D[2]=n):(t=D[1],n=D[2]),(0,s.useEffect)(t,n);let{updateItem:O,openItem:P,openPreviewPane:F,closeItem:M,versionedItems:$,items:B}=(0,w.xx)(),{messageId:V,messageIndex:U,autoOpenPreviewPane:q,hasAutoOpenedPreviewPaneRef:H,setHasAutoOpenedPreviewPane:G}=(0,r.H)();T=ee(T),D[3]===Symbol.for("react.memo_cache_sentinel")?(l={},D[3]=l):l=D[3];let W=(0,en.M)(T,ef,l);D[4]!==W?(o=[W],D[4]=W,D[5]=o):o=D[5],D[6]!==E||D[7]!==o?(c={issues:o,isStreaming:E,isIssueTree:!1},D[6]=E,D[7]=o,D[8]=c):c=D[8],eu(c),D[9]===Symbol.for("react.memo_cache_sentinel")?(m=[],D[9]=m):m=D[9],(0,s.useEffect)(ex,m),D[10]!==E||D[11]!==W.type?(h="new-issue",f.W.draftUpdateIssue&&(h=null==W.type&&E?void 0:"draft-update-issue"===W.type?"update-issue":"new-issue"),D[10]=E,D[11]=W.type,D[12]=h):h=D[12];let J=null!=W.tag&&null!=h?`${h}:${W.tag}#${U}`:void 0;D[13]!==J||D[14]!==B||D[15]!==$?(p=null!=J?(0,z.LU)(J,$,B):null,D[13]=J,D[14]=B,D[15]=$,D[16]=p):p=D[16];let Y=p;D[17]!==J||D[18]!==B?(g=null!=J?B.get(J):void 0,D[17]=J,D[18]=B,D[19]=g):g=D[19];let X=g,et=W.repository||null==h||X?.type!==h?W.repository:X.repository||"";D[20]!==q||D[21]!==H||D[22]!==J||D[23]!==P||D[24]!==F||D[25]!==G?(x=e=>{let{selectItem:t,event:n}=e;null!=J&&(P(J,t),(t||q&&!H.current)&&(F(n?.currentTarget),G(!0)),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},D[20]=q,D[21]=H,D[22]=J,D[23]=P,D[24]=F,D[25]=G,D[26]=x):x=D[26];let ei=x;D[27]!==W.projects?(b=(0,K.c)(W.projects),D[27]=W.projects,D[28]=b):b=D[28];let ea=b;D[29]!==M||D[30]!==h||D[31]!==J||D[32]!==E||D[33]!==W.assignees||D[34]!==W.body||D[35]!==W.bodyVersion||D[36]!==W.issueNumber||D[37]!==W.issueType||D[38]!==W.labels||D[39]!==W.milestone||D[40]!==W.parentTag||D[41]!==W.tag||D[42]!==W.template||D[43]!==W.templateFormValues||D[44]!==W.title||D[45]!==V||D[46]!==ea||D[47]!==et||D[48]!==O?(j=()=>{null!=J&&("update-issue"===h&&et&&W.issueNumber&&M(`issue:${et}/${W.issueNumber}`),O({messageId:V,name:W.title??"",body:W.body,bodyVersion:W.bodyVersion,repository:et,id:J,type:h,tag:W.tag??"",parentTag:W.parentTag,isStreaming:E,template:W.template,issueType:W.issueType,milestone:W.milestone,assignees:W.assignees?.sort(),labels:W.labels?.sort(),projects:ea,rawProjectsInput:ea.map(ey).filter(eg).sort(),isUserEdited:!1,defaultValuesById:W.templateFormValues??{},issueNumber:W.issueNumber}))},D[29]=M,D[30]=h,D[31]=J,D[32]=E,D[33]=W.assignees,D[34]=W.body,D[35]=W.bodyVersion,D[36]=W.issueNumber,D[37]=W.issueType,D[38]=W.labels,D[39]=W.milestone,D[40]=W.parentTag,D[41]=W.tag,D[42]=W.template,D[43]=W.templateFormValues,D[44]=W.title,D[45]=V,D[46]=ea,D[47]=et,D[48]=O,D[49]=j):j=D[49],D[50]!==M||D[51]!==h||D[52]!==J||D[53]!==E||D[54]!==W.assignees||D[55]!==W.body||D[56]!==W.bodyVersion||D[57]!==W.issueNumber||D[58]!==W.issueType||D[59]!==W.labels||D[60]!==W.milestone||D[61]!==W.parentTag||D[62]!==W.projects||D[63]!==W.tag||D[64]!==W.template||D[65]!==W.templateFormValues||D[66]!==W.title||D[67]!==V||D[68]!==ea||D[69]!==et||D[70]!==O?(C=[M,h,J,E,W.assignees,W.body,W.bodyVersion,W.issueNumber,W.issueType,W.labels,W.milestone,W.parentTag,W.projects,W.tag,W.template,W.templateFormValues,W.title,V,ea,et,O],D[50]=M,D[51]=h,D[52]=J,D[53]=E,D[54]=W.assignees,D[55]=W.body,D[56]=W.bodyVersion,D[57]=W.issueNumber,D[58]=W.issueType,D[59]=W.labels,D[60]=W.milestone,D[61]=W.parentTag,D[62]=W.projects,D[63]=W.tag,D[64]=W.template,D[65]=W.templateFormValues,D[66]=W.title,D[67]=V,D[68]=ea,D[69]=et,D[70]=O,D[71]=C):C=D[71],(0,s.useEffect)(j,C),D[72]!==A||D[73]!==J||D[74]!==ei?(_=()=>{null!=J&&A&&ei({selectItem:!0})},N=[J,ei,A],D[72]=A,D[73]=J,D[74]=ei,D[75]=_,D[76]=N):(_=D[75],N=D[76]),(0,s.useEffect)(_,N);let es=W.title??"";return D[77]!==E?(S=E?(0,i.jsx)(v.A,{size:"small",className:a.sX}):(0,i.jsx)(Q.n,{type:"new-issue"}),D[77]=E,D[78]=S):S=D[78],D[79]!==Y?(I=null!=Y&&(0,i.jsx)(u.g,{"data-testid":"version-label",version:Y}),D[79]=Y,D[80]=I):I=D[80],D[81]!==ei?(k=e=>ei({selectItem:!0,event:e}),D[81]=ei,D[82]=k):k=D[82],D[83]!==es||D[84]!==S||D[85]!==I||D[86]!==k?(L=(0,i.jsx)(Z.K,{subIssueCount:0,children:(0,i.jsx)(Z.K.RootItem,{title:es,leadingVisual:S,trailingBadge:I,onClick:k})}),D[83]=es,D[84]=S,D[85]=I,D[86]=k,D[87]=L):L=D[87],L}function eg(e){return""!==e}function ey(e){return e.title||""}function ex(){return(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_DRAFT_BLOCK_RENDERED",mode:"immersive"})}try{ep.displayName||(ep.displayName="DraftIssueBlock")}catch{}let ev=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(ep,{...e})}};var eb=n(46461),ej=n(13974);let ew="DraftIssueTreeBlock-module__container--framP",eC=e=>{if("object"!=typeof e||null===e)return null;let t={};return"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"title"in e&&"string"==typeof e.title?t.title=e.title:"name"in e&&"string"==typeof e.name&&(t.title=e.name),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"url"in e&&"string"==typeof e.url&&(t.url=e.url),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"isBlockingTags"in e&&Array.isArray(e.isBlockingTags)&&(t.isBlockingTags=e.isBlockingTags.filter(e=>"string"==typeof e)),t};function e_(e){try{let t=(0,W.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(eC).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}function eN({data:e}){let t=(0,en.M)(e,e_,[]),{messageId:n}=(0,r.H)(),{updateItem:a,openItem:l,openPreviewPane:o}=(0,w.xx)(),d=(0,s.useMemo)(()=>Array.from((0,eb.G9)(t,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags,e=>e.isBlockingTags).values()).filter(e=>!e.parent),[t]);function c(e,t){if(!e.url)return;let[i,s]=e.repository?.split("/")??[];if(!i||!s||!e.number)return;let r=`issue:${i}/${s}/${e.number}`;a({messageId:n,name:e.title??"",number:e.number,owner:i,repo:s,id:r,href:e.url,type:"issue"}),l(r),o(t?.currentTarget)}let u=e=>e.blockedBy.map(e=>({title:e.item.title??"",href:e.item.url,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),c(e.item,t))}}));function m(e){return(0,i.jsx)(Z.K.Item,{title:e.item.title??"",leadingVisual:(0,i.jsx)(eS,{item:e.item}),trailingBadge:(0,i.jsx)(eI,{node:e}),href:e.item.url,onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),c(e.item,t)},blockedBy:u(e),children:e.children.map(m)},e.item.tag)}return(0,i.jsx)("div",{className:ew,children:d.map(e=>{let t=-1;return(0,eb.YR)(e,()=>t++),(0,i.jsxs)(Z.K,{subIssueCount:t,children:[(0,i.jsx)(Z.K.RootItem,{leadingVisual:(0,i.jsx)(eS,{item:e.item}),title:e.item.title??"",trailingBadge:(0,i.jsx)(eI,{node:e}),href:e.item.url,onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),c(e.item,t)},blockedBy:u(e)}),e.children.map(m)]},e.item.tag)})})}function eS(e){let t=(0,d.c)(2),{item:n}=e;if("open"===n.state){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(x.IssueOpenedIcon,{className:"fgColor-open"}),t[0]=e):e=t[0],e}if("closed"===n.state){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(x.IssueClosedIcon,{className:"fgColor-done"}),t[1]=e):e=t[1],e}}function eI(e){let t,n=(0,d.c)(5),{node:a}=e;if(!a.item.repository||!a.item.number)return null;if(a.item.repository===a.parent?.item.repository){let e;return n[0]!==a.item.number?(e=(0,i.jsxs)("span",{className:"fgColor-muted no-wrap",children:["#",a.item.number]}),n[0]=a.item.number,n[1]=e):e=n[1],e}return n[2]!==a.item.number||n[3]!==a.item.repository?(t=(0,i.jsxs)("span",{className:"fgColor-muted no-wrap",children:[a.item.repository,"#",a.item.number]}),n[2]=a.item.number,n[3]=a.item.repository,n[4]=t):t=n[4],t}try{eN.displayName||(eN.displayName="IssueTreeBlock")}catch{}try{eS.displayName||(eS.displayName="LeadingVisual")}catch{}try{eI.displayName||(eI.displayName="IssueLocation")}catch{}function ek(e){return"state"in e&&"draft"===e.state}function eL(e){return"state"in e&&("open"===e.state||"closed"===e.state)}function eD({data:e,isStreaming:t}){let{message:n}=(0,c.V)(),a=(0,s.useMemo)(()=>n.references?.filter(e=>"draft-issue"===e.type||"draft-update-issue"===e.type||"existing-issue"===e.type),[n.references]),l=ee(e),o=X(),d=(0,s.useRef)(o);(0,s.useEffect)(()=>{d.current=o},[o]);let m=(0,s.useMemo)(()=>{if(f.W.draftIssueUseRefForDraftBlock&&a){let t=function(e){try{let t=(0,W.gh)(e);if(Array.isArray(t))return t.filter(e=>"object"==typeof e&&null!=e).filter(e=>"tag"in e&&"string"==typeof e.tag).map(e=>e.tag);return[]}catch{return[]}}(l);if(t.length>0&&a.length>0){var e;return e=d.current,t.map(t=>{var n,i;let s=a.find(e=>e.tag===t);return s&&(n=[s],i=e,n.map(e=>{let t;if("existing-issue"===e.type)return{tag:e.tag,parentTag:e.parentTag,title:e.title,repository:e.repository,number:e.number,state:e.state,url:e.url};let n=et(e.description||"",i);if(e.templateFormValuesById){for(let[n,a]of(t={},Object.entries(e.templateFormValuesById)))if(a)try{let e=JSON.parse(a);if(e&&"object"==typeof e&&"string"==typeof e.content){let a=et(e.content,i);t[n]=a.trim()}else{let e=et("string"==typeof a?a:"",i);t[n]=e.trim()}}catch{let e=et("string"==typeof a?a:"",i);t[n]=e.trim()}}return{title:e.title,tag:e.tag,body:n,labels:e.labels,assignees:e.assignees,repository:e.repository,parentTag:e.parentTag,templateFormValues:t,issueType:e.issueType,projects:e.projects,milestone:e.milestone,issueNumber:e.issueNumber,blockedByTags:e.blockedByTags,bodyVersion:e.bodyVersion,type:e.type,template:e.template,state:"draft"}}).filter(e=>!!e.tag))[0]||null}).filter(e=>null!==e)}}return function(e){try{let t=(0,W.gh)(e);if(Array.isArray(t))return t.filter(e=>"object"==typeof e&&null!=e).map(e=>{switch("state"in e?e.state:void 0){case void 0:case"draft":return eh(e);case"open":case"closed":return eC(e)}}).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}(l)||[]},[l,a]),{items:h,updateItem:p,openItem:g,openPreviewPane:x,closeItem:v,versionedItems:b}=(0,w.xx)(),{messageId:j,messageIndex:C,autoOpenPreviewPane:_,hasAutoOpenedPreviewPaneRef:N,setHasAutoOpenedPreviewPane:S}=(0,r.H)(),I=(0,s.useCallback)(e=>{if(ek(e)&&e.tag){let t="draft-update-issue"===e.type?"update-issue":"new-issue";return`${t}:${e.tag}#${C}`}if(eL(e)&&e.repository&&e.number)return`existing-issue:${e.repository}/${e.number}`},[C]);eu({issues:m,isStreaming:t,isIssueTree:!0}),(0,s.useEffect)(()=>{for(let e of m){if(!e.tag)continue;let n=I(e);if(n){if(f.W.draftIssueUseRefForDraftBlock&&a&&h.get(n))continue;if(ek(e)){let n="draft-update-issue"===e.type?"update-issue":"new-issue",i=`${n}:${e.tag}#${C}`;"update-issue"===n&&e.repository&&e.issueNumber&&v(`issue:${e.repository}/${e.issueNumber}`),p({messageId:j,type:n,id:i,tag:e.tag,parentTag:e.parentTag,name:e.title??"",body:e.body,bodyVersion:e.bodyVersion,repository:e.repository,template:e.template,issueType:e.issueType,milestone:e.milestone,assignees:e.assignees?.sort(),labels:e.labels?.sort(),projects:e.projects?.map(e=>"object"==typeof e&&null!==e?{id:"string"==typeof e.id?e.id:void 0,title:"string"==typeof e.title?e.title:void 0}:{title:String(e)}).filter(e=>!!e.title||!!e.id).sort((e,t)=>(e.title||"").localeCompare(t.title||"")),defaultValuesById:e.templateFormValues??{},isUserEdited:!1,isStreaming:t,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[],issueNumber:e.issueNumber})}eL(e)&&e.repository&&e.number&&e.url&&(v(`issue:${e.repository}/${e.number}`),p({messageId:j,type:"existing-issue",id:`existing-issue:${e.repository}/${e.number}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,name:e.title??"",state:e.state??"open",href:e.url,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}))}}},[I,t,m,j,C,p,v,a,...f.W.draftIssueUseRefForDraftBlock?[h]:[]]);let k=(0,s.useCallback)((e,{selectItem:t,event:n})=>{let i=I(e);i&&(g(i,t),(t||_&&!N.current)&&(x(n?.currentTarget),S(!0)),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[I,g,_,N,x,S]),L=(0,s.useCallback)(e=>{let t=[...h.entries()].find(([t,n])=>(t.startsWith("new-issue:")||t.startsWith("existing-issue:"))&&("new-issue"===n.type||"existing-issue"===n.type)&&n.tag===e);if(!t)return;let[n]=t,i=(0,z.oy)(n),a=b.get(i),s=a?.at(-1);if(!s)return;let r=h.get(s);if(r)switch(r?.type){case"new-issue":case"update-issue":return{...eh(r),state:"draft"};case"existing-issue":return eC(r);default:return}},[h,b]),D=(0,s.useMemo)(()=>{let e=new Set(m.map(e=>e.tag)),t=Array.from(new Set([...new Set(m.filter(e=>null!=e.parentTag).map(e=>e.parentTag)),...new Set(m.flatMap(e=>null!=e.blockedByTags?e.blockedByTags:[]).filter(e=>null!=e)),...new Set(m.flatMap(e=>null!=e.isBlockingTags?e.isBlockingTags:[]).filter(e=>null!=e))])).filter(t=>null!=t&&!e.has(t)).map(e=>L(e)).filter(e=>null!=e),n=[...m,...t];return Array.from((0,eb.G9)(n,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags,e=>e.isBlockingTags).values()).filter(e=>!e.parent)},[m,L]),T=(0,ej.p)(t);(0,s.useEffect)(()=>{if(!T)return;let e=!0;for(let t of D.values()){if(ek(t.item)){k(t.item,{selectItem:e}),e=!1;continue}for(let n of t.children)ek(n.item)&&(k(n.item,{selectItem:e}),e=!1)}},[T,D,k]);let E=e=>e.blockedBy.map(e=>({title:e.item.title??"",href:eL(e.item)?e.item.url:void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),k(e.item,{selectItem:!0,event:t}))}})),A=e=>{let n=I(e.item),a=n?(0,z.LU)(n,b,h):null;return(0,i.jsx)(Z.K.Item,{title:e.item.title??"",leadingVisual:(0,i.jsx)(eT,{isStreaming:t,item:e.item}),trailingBadge:null!=a?(0,i.jsx)(u.g,{version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),k(e.item,{selectItem:!0,event:t}))},href:eL(e.item)?e.item.url:void 0,blockedBy:E(e),children:e.children.map(A)},e.item.tag)};return(0,i.jsx)("div",{className:ew,children:D.map(e=>{let n=I(e.item),a=n?(0,z.LU)(n,b,h):null,s=-1;return(0,eb.YR)(e,()=>s++),(0,i.jsxs)(Z.K,{subIssueHeaderText:eL(e.item)?"New sub-issues":void 0,subIssueCount:s,children:[(0,i.jsx)(Z.K.RootItem,{title:e.item.title??"",leadingVisual:(0,i.jsx)(eT,{isStreaming:t,item:e.item}),trailingBadge:null!=a?(0,i.jsx)(u.g,{"data-testid":"version-label",version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),k(e.item,{selectItem:!0,event:t}))},href:eL(e.item)?e.item.url:void 0,blockedBy:E(e)}),e.children.map(A)]},e.item.tag)})})}function eT(e){let t=(0,d.c)(5),{isStreaming:n,item:s}=e;if(n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(v.A,{size:"small",className:`${a.sX} mt-1`}),t[0]=e):e=t[0],e}if(ek(s)){let e,n="draft-update-issue"===s.type?"update-issue":"new-issue";return t[1]!==n?(e=(0,i.jsx)(Q.n,{type:n}),t[1]=n,t[2]=e):e=t[2],e}if(eL(s)){let e;return t[3]!==s.state?(e=(0,i.jsx)(Q.n,{type:"existing-issue",state:s.state}),t[3]=s.state,t[4]=e):e=t[4],e}}try{eD.displayName||(eD.displayName="DraftIssueTreeBlock")}catch{}try{eT.displayName||(eT.displayName="LeadingVisual")}catch{}let eE=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue-tree"===e.type}extractProps(e){return{data:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(eD,{...e})}};var eA=n(72534),eR=n(84268);function eO(e){let t,n,a,l,o,c,u=(0,d.c)(28),{owner:m,repo:h,issueNumber:f,href:p,children:g}=e,{updateItem:x,openItem:v,openPreviewPane:b,items:j}=(0,w.xx)(),{messageId:C}=(0,r.H)(),_=(0,J.A3)("messages"),N=(0,s.useRef)(null),S=Number(f),I=`issue:${m}/${h}/${S}`;u[0]!==I||u[1]!==j?(t=j.get(I),u[0]=I,u[1]=j,u[2]=t):t=u[2];let k=t;u[3]!==k?.name||u[4]!==C||u[5]!==_||u[6]!==S||u[7]!==m||u[8]!==h?(n=function(e,t,n,i,a){if(!n||!i||!a||isNaN(a))return;let s=e.find(e=>e.id===t),r=s?.references,l=r?.find(e=>"issue"===e.type&&e.number===a&&e.repository.name===i&&e.repository.owner===n),o=l?.title;if(o)return o;let d=r?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${i}`&&e.data.number===a),c=d?.data;return c?.title}(_,C,m,h,S)??k?.name??`Issue #${S}`,u[3]=k?.name,u[4]=C,u[5]=_,u[6]=S,u[7]=m,u[8]=h,u[9]=n):n=u[9];let L=n;return u[10]!==p||u[11]!==I||u[12]!==C||u[13]!==S||u[14]!==m||u[15]!==h||u[16]!==L||u[17]!==x?(a=()=>{m&&h&&x({messageId:C,name:L,number:S,owner:m,repo:h,id:I,href:p,type:"issue"})},l=[I,C,p,S,m,h,L,x],u[10]=p,u[11]=I,u[12]=C,u[13]=S,u[14]=m,u[15]=h,u[16]=L,u[17]=x,u[18]=a,u[19]=l):(a=u[18],l=u[19]),(0,s.useEffect)(a,l),u[20]!==I||u[21]!==v||u[22]!==b?(o=e=>{e.metaKey||e.ctrlKey||(v(I),b(N.current),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},u[20]=I,u[21]=v,u[22]=b,u[23]=o):o=u[23],u[24]!==g||u[25]!==p||u[26]!==o?(c=(0,i.jsx)(eR.A,{ref:N,href:p,onClick:o,target:"_blank",rel:"noreferrer",children:g}),u[24]=g,u[25]=p,u[26]=o,u[27]=c):c=u[27],c}try{eO.displayName||(eO.displayName="IssueLinkBlock")}catch{}let eP="data-issuelink-props",eF=(0,l.F)(eP),eM=/\/(?<owner>[^/]+)\/(?<repo>[^/]+)\/issues\/(?<number>\d+)/,e$={span:(e,t)=>{let n=(0,l.k)(e,eP);return n?(0,i.jsx)(eO,{...n}):t}};var eB=n(77430),eV=n(10422),eU=n(29731),eq=n(62935),eH=n(26607),eG=n(24494),eK=n(69497),eW=n(91865),ez=n(93654),eQ=n(97286);function eZ(){return{}}function eJ(){return[]}let eY="IssueListBlock-module__item--gmkkY",eX="IssueListBlock-module__content--bNFq8",e0="IssueListBlock-module__title--Di3wj",e1="IssueListBlock-module__description--Uf86U",e2="IssueListBlock-module__open--CQmwr",e3="IssueListBlock-module__draft--ymDJ6",e4="IssueListBlock-module__done--bWmcu",e5="IssueListBlock-module__closed--Iuz7v",e6=e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),t};function e7(e){let t,n,a,s,r,l,o,c=(0,d.c)(15),{item:u,isStreaming:m}=e,h=u.author;u.merged_at?(l=u.merged_at,o="Merged"):u.closed_at?(l=u.closed_at,o="Closed"):u.created_at&&(l=u.created_at,o="Opened"),c[0]!==l?(n=(t=l?new Date(l):null)&&isNaN(t.getTime()),c[0]=l,c[1]=t,c[2]=n):(t=c[1],n=c[2]),n&&(t=null);let f=!!u.repository;return h&&t||!m||f?(c[3]!==h||c[4]!==f||c[5]!==u.repository||c[6]!==t?(a=f&&(0,i.jsxs)(i.Fragment,{children:[u.repository,(h||t)&&" \xb7 "]}),c[3]=h,c[4]=f,c[5]=u.repository,c[6]=t,c[7]=a):a=c[7],c[8]!==o||c[9]!==h||c[10]!==t?(s=(h||t)&&o&&(0,i.jsxs)(i.Fragment,{children:[h," ",h?o.toLowerCase():o," ",t&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eq.A,{date:t,format:"relative"})})]}),c[8]=o,c[9]=h,c[10]=t,c[11]=s):s=c[11],c[12]!==a||c[13]!==s?(r=(0,i.jsxs)("span",{className:e1,children:[a,s]}),c[12]=a,c[13]=s,c[14]=r):r=c[14],r):null}let e8=e=>{try{let t=(0,W.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(e6);return null}catch{return null}};function e9(e){let t,n,a,l,o,c,u,m=(0,d.c)(17),{data:h,type:f,isStreaming:p}=e;m[0]!==h?(t=()=>e8(h)??[],m[0]=h,m[1]=t):t=m[1];let[g,v]=(0,s.useState)(t),{updateItem:b,openItem:C,openPreviewPane:_}=(0,w.xx)(),{messageId:N}=(0,r.H)(),[S,I]=(0,s.useState)(!0);m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,ei.G7)("copilot_issue_list_show_more"),m[2]=n):n=m[2];let k=n,L=(0,ei.G7)("copilot_coding_agent_task_response"),D=function(){let e,t,n,i,a,s,r,l=(0,d.c)(13);l[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:ez.ZL,queryFn:eJ,enabled:!1,notifyOnChangeProps:["data"]},l[0]=e):e=l[0];let{data:o}=(0,eQ.I)(e);l[1]!==o?(t=o||[],l[1]=o,l[2]=t):t=l[2],l[3]!==t?(n=(0,eW.ms)(t),l[3]=t,l[4]=n):n=l[4];let c=n;l[5]!==c?(i=["agent-sessions-pull-requests",c],l[5]=c,l[6]=i):i=l[6],l[7]===Symbol.for("react.memo_cache_sentinel")?(a=["data"],l[7]=a):a=l[7],l[8]!==i?(s={queryKey:i,queryFn:eZ,enabled:!1,notifyOnChangeProps:a},l[8]=i,l[9]=s):s=l[9];let{data:u}=(0,eQ.I)(s);if(l[10]!==o||l[11]!==u){if(r=new Map,o&&o.length>0)for(let e of o){if(!e.resource_global_id)continue;let t=`https://github.com/copilot/tasks/pull/${e.resource_global_id}`,n=e.resource_id&&u?u[e.resource_id]:void 0,i={state:e.latest_session_state,title:n?.title};r.set(t,i)}l[10]=o,l[11]=u,l[12]=r}else r=l[12];return r}(),T=k&&S?g.slice(0,10):g,E=k&&g.length>10;m[3]!==h?(a=()=>v(e=>e8(h)??e),l=[h],m[3]=h,m[4]=a,m[5]=l):(a=m[4],l=m[5]),(0,s.useEffect)(a,l),(0,s.useEffect)(()=>{"issue"===f?(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):"pr"===f?(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"}):"task"===f&&L&&(0,y.BI)("dotcom_chat.activate",{target:"TASK_LIST_BLOCK_RENDERED",mode:"immersive"})},[f,L]);let A=p&&"IssueListBlock-module__streaming--sTYSD";m[6]!==A?(o=(0,j.$)("IssueListBlock-module__list--hU3Jz",A),m[6]=A,m[7]=o):o=m[7];let R=T.map((e,t)=>{let n={...e,type:f};if("task"===f&&L&&e.url){let t=D.get(e.url);t&&(n={...n,state:t.state,title:t.title??n.title})}let a=p&&t===T.length-1,{icon:s,colorClass:r}=function(e,t){let n,a=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(a=(0,i.jsx)(x.IssueDraftIcon,{"aria-label":"Draft issue"}),n=e3):"closed"===e.state&&e.draft&&(a=(0,i.jsx)(x.SkipIcon,{"aria-label":"Closed draft issue"}),n=e3):(a=(0,i.jsx)(x.IssueClosedIcon,{"aria-label":"Closed issue"}),n=e4):(a=(0,i.jsx)(x.IssueOpenedIcon,{"aria-label":"Open issue"}),n=e2);else if("pr"===e.type){let t="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!t&&e.draft?(a=(0,i.jsx)(x.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),n=e3):"open"!==e.state||t||e.draft?"closed"!==e.state||t?"closed"===e.state&&t&&(a=(0,i.jsx)(x.GitMergeIcon,{"aria-label":"Merged pull request"}),n=e4):(a=(0,i.jsx)(x.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),n=e5):(a=(0,i.jsx)(x.GitPullRequestIcon,{"aria-label":"Pull request"}),n=e2)}else"task"===e.type&&t&&("queued"===e.state?(a=(0,i.jsx)(x.ClockIcon,{"aria-label":"Task queued",className:"IssueListBlock-module__clockIcon--yllN9"}),n=e2):"pending"===e.state||"idle"===e.state?(a=(0,i.jsx)(x.DotFillIcon,{"aria-label":"Task pending",className:"IssueListBlock-module__dotFillIcon--jW2uo"}),n=e2):"running"===e.state||"in_progress"===e.state?(a=(0,i.jsx)(eV.gX,{animated:!0}),n=e2):"completed"===e.state||"waiting_for_user"===e.state?(a=(0,i.jsx)(x.CheckCircleFillIcon,{"aria-label":"Task completed",className:"IssueListBlock-module__checkCircleIcon--ZHYse"}),n=e4):"failed"===e.state||"timed_out"===e.state?(a=(0,i.jsx)(x.XCircleFillIcon,{"aria-label":"Task failed",className:"IssueListBlock-module__stopIcon--u2wRE"}),n=e5):"cancelled"===e.state&&(a=(0,i.jsx)(x.SkipIcon,{"aria-label":"Task cancelled",className:"IssueListBlock-module__skipIcon--glgzv"}),n=e5));return{icon:a,colorClass:n}}(n,L);return(0,i.jsx)("li",{className:eY,children:(0,i.jsxs)("div",{className:eX,children:[(0,i.jsx)("div",{className:(0,j.$)(r,"IssueListBlock-module__icon--qAaLP"),children:s}),(0,i.jsxs)("div",{className:"IssueListBlock-module__header--NtmSe",children:[a&&!n.title?null:(0,i.jsx)("a",{...(0,eU.G)("issue-list-item-link"),href:n.url??"#",className:"IssueListBlock-module__link--fc5wy",onClick:e=>{if(e.metaKey||e.ctrlKey)return;e.preventDefault();let t=n.url;if(t)if("issue"===n.type){(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:i,repo:a,number:s}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(t);if(i&&a&&s){let r=`issue:${i}/${a}/${s}`;b({messageId:N,name:n.title??`Issue #${s}`,number:s,owner:i,repo:a,id:r,href:t,type:"issue"}),C(r),_(e.currentTarget)}}else"task"===n.type&&L?(0,y.BI)("dotcom_chat.activate",{target:"TASK_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}):(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(t,"_self")},target:"_blank",rel:"noreferrer",children:n.title?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:e0,children:n.title}),void 0!==n.number&&"task"!==n.type&&(0,i.jsxs)("span",{className:"IssueListBlock-module__number--vsvJy",children:["#",n.number]})]}):void 0!==n.number?(0,i.jsxs)("span",{className:e0,children:["#",n.number]}):(0,i.jsx)("span",{className:(0,j.$)(e0,"IssueListBlock-module__unknownTitle--JszGm"),children:"task"===n.type?"Unknown task":"Unknown issue"})}),"task"!==n.type&&(0,i.jsxs)("div",{className:"IssueListBlock-module__labels--xeeTb",children:[n.labels?.length?n.labels.map(tt):null,0!==n.comments&&void 0!==n.comments&&(0,i.jsxs)(eH.A,{size:"small",variant:"secondary",children:[(0,i.jsx)(x.CommentIcon,{className:"IssueListBlock-module__labelIcon--g4B1V",size:12}),n.comments]})]})]}),"task"===n.type&&L?n.repository?(0,i.jsx)("div",{className:e1,children:n.repository}):null:(0,i.jsx)(e7,{item:n,isStreaming:a}),("task"!==n.type||!L)&&(0,i.jsx)("div",{className:"IssueListBlock-module__metadata--W4tCj",children:void 0===n.assignees_avatar_urls?null:0===n.assignees_avatar_urls.length?(0,i.jsx)("div",{className:"IssueListBlock-module__unassignedAvatar--RB1C7",role:"img","aria-label":"Unassigned",children:(0,i.jsx)(x.PersonIcon,{size:12})}):(0,i.jsx)("div",{role:"img","aria-label":`${n.assignees_avatar_urls.length} ${1===n.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,i.jsx)(eG.A,{disableExpand:!0,children:n.assignees_avatar_urls.map(te)})})})]})},t)});return m[8]!==S||m[9]!==E||m[10]!==p||m[11]!==g?(c=E&&(0,i.jsx)("li",{className:eY,children:(0,i.jsx)("div",{className:(0,j.$)(eX,"IssueListBlock-module__toggleContent--NWbi1"),children:(0,i.jsxs)("button",{type:"button",className:(0,j.$)("IssueListBlock-module__toggleButton--C9dbQ",p&&"IssueListBlock-module__shimmer--xZ0Bt"),onClick:()=>I(!S),"aria-expanded":!S,"aria-controls":"issue-list",children:[(0,i.jsx)("span",{className:"IssueListBlock-module__toggleIcon--hynWs",children:S?(0,i.jsx)(x.UnfoldIcon,{size:16}):(0,i.jsx)(x.FoldIcon,{size:16})}),S?`Show ${g.length-10} more`:"Show less"]})})}),m[8]=S,m[9]=E,m[10]=p,m[11]=g,m[12]=c):c=m[12],m[13]!==o||m[14]!==R||m[15]!==c?(u=(0,i.jsx)("div",{children:(0,i.jsxs)("ul",{id:"issue-list",className:o,children:[R,c]})}),m[13]=o,m[14]=R,m[15]=c,m[16]=u):u=m[16],u}function te(e){return(0,i.jsx)(eB.r,{src:e,alt:"Assignee avatar"},e)}function tt(e){return(0,i.jsx)(eH.A,{size:"small",variant:"secondary",className:"IssueListBlock-module__label--tGgUZ",children:(0,i.jsx)(eK.A,{inline:!0,maxWidth:"100%",title:e,children:e})},e)}try{e7.displayName||(e7.displayName="Description")}catch{}try{e9.displayName||(e9.displayName="ListBlock")}catch{}let tn=new class extends YamlBlockExtension{get dataAttribute(){return"data-issues-list-block"}isSupported(e){return"list"===e.lang&&("issue"===e.type||"pr"===e.type||"task"===e.type)}extractProps(e){return{data:e.value,type:e.type,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(e9,{...e})}},ti=new class extends YamlBlockExtension{get dataAttribute(){return"data-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"issue-tree"===e.type}extractProps(e){return{data:e.value}}createComponent(e){return(0,i.jsx)(eN,{...e})}};var ta=n(5524),ts=n(35104);function tr(e){let t,n=(0,d.c)(3),{children:a,isStreaming:s,taskCount:r}=e;if(!s&&0===r){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("span",{children:"No tasks were created, please retry."}),n[0]=e):e=n[0],e}return n[1]!==a?(t=(0,i.jsx)(i.Fragment,{children:a}),n[1]=a,n[2]=t):t=n[2],t}try{tr.displayName||(tr.displayName="SubtasksGroup")}catch{}var tl=n(35673),to=n(57478),td=n(94236);function tc(e){let t,n,a,s=(0,d.c)(10),{onConvertAllToDraftIssues:r,taskCount:l,title:o}=e;return s[0]!==l?(t=(0,i.jsx)(to.A,{className:"ml-2 pb-1",children:l}),s[0]=l,s[1]=t):t=s[1],s[2]!==r||s[3]!==l||s[4]!==o?(n=l>0&&(0,i.jsx)("div",{className:"flex-justify-end d-flex flex-1",children:(0,i.jsxs)(td.W,{children:[(0,i.jsx)(td.W.Anchor,{children:(0,i.jsx)(b.K,{"aria-label":`Tasklist '${o}' options`,icon:x.KebabHorizontalIcon,variant:"invisible"})}),(0,i.jsx)(tl.UJ,{children:(0,i.jsx)(ta.l,{children:(0,i.jsx)(ta.l.Item,{onSelect:r,children:"Draft all as issues"})})})]})}),s[2]=r,s[3]=l,s[4]=o,s[5]=n):n=s[5],s[6]!==t||s[7]!==n||s[8]!==o?(a=(0,i.jsxs)(ta.l.Heading,{as:"h4",className:"mx-3 mt-3 mb-1 d-flex flex-items-center",children:[o,t,n]}),s[6]=t,s[7]=n,s[8]=o,s[9]=a):a=s[9],a}try{tc.displayName||(tc.displayName="TasklistHeader")}catch{}var tu=n(97189),tm=n(65529);function th(e){let t,n=(0,d.c)(4),{isStreaming:a,onClick:s,task:r}=e;return n[0]!==a||n[1]!==s||n[2]!==r?(t=(0,i.jsx)(tu.Fn,{children:(0,i.jsx)(tf,{isStreaming:a,onClick:s,task:r})}),n[0]=a,n[1]=s,n[2]=r,n[3]=t):t=n[3],t}function tf(e){let t,n,s,r,l,o,c=(0,d.c)(20),{isStreaming:m,onClick:h,task:f}=e,{pullRequest:p,isLoading:g}=(0,tm.as)(f),{versionedItems:y,items:b}=(0,w.xx)();c[0]!==b||c[1]!==f.id||c[2]!==y?(t=(0,z.LU)(f.id,y,b),c[0]=b,c[1]=f.id,c[2]=y,c[3]=t):t=c[3];let j=t;c[4]!==g||c[5]!==m||c[6]!==p?(n=()=>m||g?(0,i.jsx)(v.A,{size:"small",className:a.sX}):p?.state==="merged"?(0,i.jsx)(x.CheckIcon,{}):p?(0,i.jsx)(x.GitPullRequestIcon,{}):(0,i.jsx)(x.TasklistIcon,{}),c[4]=g,c[5]=m,c[6]=p,c[7]=n):n=c[7];let C=n;return c[8]!==C?(s=(0,i.jsx)(ta.l.LeadingVisual,{children:C()}),c[8]=C,c[9]=s):s=c[9],c[10]!==j?(r=null!=j&&(0,i.jsx)(u.g,{version:j}),c[10]=j,c[11]=r):r=c[11],c[12]!==r?(l=(0,i.jsx)(ta.l.TrailingVisual,{children:r}),c[12]=r,c[13]=l):l=c[13],c[14]!==h||c[15]!==s||c[16]!==l||c[17]!==f.id||c[18]!==f.name?(o=(0,i.jsxs)(ta.l.Item,{onSelect:h,children:[s,f.name,l]},f.id),c[14]=h,c[15]=s,c[16]=l,c[17]=f.id,c[18]=f.name,c[19]=o):o=c[19],o}try{th.displayName||(th.displayName="TasklistItem")}catch{}try{tf.displayName||(tf.displayName="TasklistItemImpl")}catch{}let tp=e=>"object"==typeof e&&null!==e&&"tag"in e&&"string"==typeof e.tag&&"title"in e&&"string"==typeof e.title&&"description"in e&&"string"==typeof e.description&&(!("dependencyTags"in e)||!!Array.isArray(e.dependencyTags))&&(!("repository"in e)||"string"==typeof e.repository)&&!0;function tg({yaml:e,isStreaming:t}){let n=(0,ej.p)(t),a=(0,s.useRef)(new Set),{selectedThreadID:l}=(0,J.Pk)(),{updateItem:o,openItem:d,openPreviewPane:c}=(0,w.xx)(),{messageId:u,messageIndex:m,setHasAutoOpenedPreviewPane:h}=(0,r.H)(),f=(0,s.useRef)({name:"Tasklist",tasks:[]}),p=(0,s.useMemo)(()=>{let t=((e,t)=>{try{var n=(0,W.Hh)(e);if("object"!=typeof n||null==n)return null;let t={name:"name"in n&&"string"==typeof n.name?n.name:"Tasklist",tasks:[]};if("tasks"in n&&Array.isArray(n.tasks))for(let e of n.tasks)"object"==typeof e&&null!=e&&tp(e)&&t.tasks.push(e);return t}catch{return(0,y.BI)("copilot.planning_tasklist",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,l);return null!=t?(f.current=t,t):f.current},[e,l]),g=(0,s.useMemo)(()=>p.tasks.map(e=>{let n=`planning-task:${e.tag}#${m}`,{title:i,...a}=e;return{...a,name:i,messageId:u,id:n,type:"planning-task",isUserEdited:!1,isStreaming:t,subtaskTags:[]}}),[p,m,u,t]),{convertAllToDraftIssues:x}=(0,ts.W)(g.map(e=>e.tag)),v=(0,s.useCallback)((e,t={})=>{let{selectItem:n,event:i}=t;d(e.id,n),c(i?.currentTarget),h(!0)},[d,c,h]);(0,s.useEffect)(()=>{for(let e=0;e<g.length;e++){let i=g[e];o(i),(t||n)&&!a.current.has(i.id)&&(a.current.add(i.id),v(i,{selectItem:0===e}))}},[t,n,v,g,o]);let b=(0,s.useCallback)((e,t)=>v(e,{event:t}),[v]);(0,s.useEffect)(()=>(0,y.BI)("copilot.planning_tasklist",{type:"BLOCK_RENDERED",mode:"immersive",threadId:l}),[l]),(0,s.useEffect)(()=>{n&&0===g.length&&(0,y.BI)("copilot.planning_tasklist",{type:"NO_TASKS",mode:"immersive",threadId:l})},[n,g.length,l]);let j=g.map(e=>(0,i.jsx)(th,{isStreaming:!!t,onClick:t=>b(e,t),task:e},e.id));return(0,i.jsx)("div",{className:"PlanningTasklistBlock-module__container--Vl4PK",children:(0,i.jsxs)(ta.l,{variant:"full",showDividers:!0,children:[(0,i.jsx)(tc,{onConvertAllToDraftIssues:x,taskCount:g.length,title:p?.name??"Tasklist"}),(0,i.jsx)(tr,{isStreaming:!!t,taskCount:g.length,children:j})]})})}try{tg.displayName||(tg.displayName="PlanningTasklistBlock")}catch{}let ty=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-tasklist-block"}isSupported(e){return"yaml"===e.lang&&"planning-tasklist"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(tg,{...e})}};var tx=n(33592),tv=n(86877),tb=n(10576),tj=n(1903),tw=n(51933),tC=n(21373),t_=n(40090);let tN="PlanningQuestionsForm-module__container--Xi24c",tS="PlanningQuestionsForm-module__headerContainer--td62h",tI="PlanningQuestionsForm-module__headerSection--pbytI",tk="PlanningQuestionsForm-module__outlineSection--Tx0yi",tL="PlanningQuestionsForm-module__title2--Xmt0r",tD="PlanningQuestionsForm-module__questionContainer--Wr4q2",tT="PlanningQuestionsForm-module__footerContainer--Xpj2v";function tE({questions:e,isStreaming:t=!1,isReadOnly:n=!1,onSubmitAnswers:a,className:r}){let l=(0,s.useMemo)(()=>{let t={},n={};for(let[i,a]of e.questions.entries()){if(!a.suggestions||0===a.suggestions.length)continue;let e=a.suggestions[0];t[i]=e,n[i]=0}return{initialAnswers:t,initialSelectedSuggestions:n}},[e.questions]),[o,d]=(0,s.useState)(l.initialAnswers),[c,u]=(0,s.useState)(l.initialSelectedSuggestions),[m,h]=(0,s.useState)(""),f=(0,s.useCallback)((e,t)=>{u(t=>{let{[e]:n,...i}=t;return i}),d(n=>({...n,[e]:t}))},[]),p=(0,s.useCallback)((e,t,n)=>{u(n=>({...n,[e]:t})),d(t=>({...t,[e]:n}))},[]),g=(0,s.useMemo)(()=>e.questions.some((e,t)=>o[t]?.trim())||m.trim(),[o,e.questions,m]),y=(0,s.useCallback)(t=>{t.preventDefault();let n=[];for(let[t,i]of e.questions.entries()){let e=o[t]?.trim();e&&n.push(`Question: ${i.question.trim()}
Answer: ${e}`)}let i=m.trim();i&&n.push(`Additional comments: ${i}`),0!==n.length&&a(n.join(`

`))},[o,e.questions,m,a]);return n?e.questions.length>0?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Open questions:"}),(0,i.jsx)("ul",{style:{listStyleType:"none"},children:e.questions.map(e=>(0,i.jsx)("li",{children:e.question},e.question))})]}):null:t?(0,i.jsxs)("div",{className:(0,j.$)(tN,r),children:[(0,i.jsx)("div",{className:tS,children:(0,i.jsxs)("div",{className:tI,children:[(0,i.jsx)(t_.r,{maxWidth:"50%",size:"titleLarge"}),(0,i.jsxs)("div",{className:tk,children:[(0,i.jsx)(t_.r,{maxWidth:"10%",size:"subtitle"}),(0,i.jsx)(t_.r,{maxWidth:"25%"}),(0,i.jsx)(t_.r,{maxWidth:"25%"}),(0,i.jsx)(t_.r,{maxWidth:"25%"})]})]})}),(0,i.jsxs)("div",{className:"pl-3 pt-3 width-full",children:[(0,i.jsx)(t_.r,{maxWidth:"10%",size:"subtitle"}),[1,2,3].map(e=>(0,i.jsxs)("div",{className:tD,children:[(0,i.jsx)(t_.r,{maxWidth:"80%",size:"subtitle"}),(0,i.jsx)(t_.r,{maxWidth:"70%",size:"bodyLarge"}),(0,i.jsx)(t_.r,{maxWidth:"50%",size:"bodySmall"})]},e))]}),(0,i.jsxs)("div",{className:tT,children:[(0,i.jsx)(t_.r,{maxWidth:"15%",size:"titleLarge"}),(0,i.jsx)(t_.r,{maxWidth:"15%",size:"titleLarge"})]})]}):(0,i.jsxs)("form",{className:(0,j.$)(tN,r),onSubmit:y,children:[(0,i.jsx)("div",{className:tS,children:(0,i.jsxs)("div",{className:tI,children:[(0,i.jsx)("div",{className:"PlanningQuestionsForm-module__title1--TtN_9",children:e.name}),e.outline.length>0&&(0,i.jsxs)("div",{className:tk,children:[(0,i.jsx)("div",{className:tL,children:"Outline"}),(0,i.jsx)("ul",{className:"PlanningQuestionsForm-module__outlineList--dnB7B",children:e.outline.map(e=>(0,i.jsx)("li",{children:e},e))})]})]})}),e.questions.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"pt-3",children:(0,i.jsx)("div",{className:tL,children:"Open questions"})}),e.questions.map(t=>{let n=e.questions.indexOf(t),a=t.suggestions||[];return(0,i.jsx)("div",{className:tD,children:(0,i.jsxs)(tv.A,{className:"flex-self-stretch",children:[(0,i.jsx)(tv.A.Label,{children:t.question}),(0,i.jsx)(tb.Ay,{block:!0,onChange:e=>f(n,e.target.value),rows:1,value:o[n]||""}),a.length>0&&(0,i.jsxs)(tv.A.Caption,{className:"PlanningQuestionsForm-module__suggestionsContainer--GZd8T",children:["Suggestions",(0,i.jsx)(tj.A,{className:"PlanningQuestionsForm-module__suggestions--rKk1X",children:a.map(e=>{let t=a.indexOf(e),s=c[n]===t;return(0,i.jsx)(tw.A,{as:"button",isSelected:s,onClick:()=>p(n,t,e),text:e,type:"button"},e)})})]})]})},t.question)})]}),(0,i.jsxs)(tv.A,{className:"flex-self-stretch",children:[(0,i.jsx)(tv.A.Label,{children:"Additional comments"}),(0,i.jsx)(tb.Ay,{block:!0,onChange:e=>h(e.target.value),rows:3,value:m})]}),(0,i.jsx)("div",{className:tT,children:(0,i.jsx)(tC.Q,{type:"submit",variant:"primary",disabled:!g,children:"Submit"})})]})}try{tE.displayName||(tE.displayName="PlanningQuestionsForm")}catch{}let tA=e=>"object"==typeof e&&null!==e&&"question"in e&&"string"==typeof e.question&&(!("suggestions"in e)||!!Array.isArray(e.suggestions)&&e.suggestions.every(e=>"string"==typeof e));function tR(e){let t,n,a,l,o,c,u=(0,d.c)(18),{yaml:m,isStreaming:h}=e,{selectedThreadID:f,messages:p,currentReferences:g}=(0,J.Pk)(),{messageIndex:x}=(0,r.H)(),v=(0,tx.b)();u[0]!==f||u[1]!==m?(t=((e,t)=>{try{var n=(0,W.Hh)(e);if("object"!=typeof n||null==n)return null;let t={name:"name"in n&&"string"==typeof n.name?n.name:"Brainstorm Questions",outline:[],questions:[]};if("outline"in n&&Array.isArray(n.outline))for(let e of n.outline)"string"==typeof e&&t.outline.push(e);if("questions"in n&&Array.isArray(n.questions))for(let e of n.questions)"object"==typeof e&&null!=e&&tA(e)&&t.questions.push(e);return t}catch{return(0,y.BI)("copilot.planning_questions",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(m,f),u[0]=f,u[1]=m,u[2]=t):t=u[2];let b=t;u[3]!==b?(n=b??{name:"Brainstorm Questions",outline:[],questions:[]},u[3]=b,u[4]=n):n=u[4];let j=n,w=p.length>x+1;u[5]!==g||u[6]!==v||u[7]!==j.questions.length||u[8]!==f?(a=e=>{(0,y.BI)("copilot.planning_questions",{type:"SUBMIT_ANSWERS_CLICKED",mode:"immersive",threadId:f,totalQuestionsCount:j.questions.length});let t=v.getThreadById(f);v.sendChatMessage({thread:t,content:e,references:g})},u[5]=g,u[6]=v,u[7]=j.questions.length,u[8]=f,u[9]=a):a=u[9];let C=a;return u[10]!==f?(l=()=>(0,y.BI)("copilot.planning_questions",{type:"BLOCK_RENDERED",mode:"immersive",threadId:f}),o=[f],u[10]=f,u[11]=l,u[12]=o):(l=u[11],o=u[12]),(0,s.useEffect)(l,o),u[13]!==C||u[14]!==w||u[15]!==h||u[16]!==j?(c=(0,i.jsx)(tE,{className:"mb-3",questions:j,isStreaming:h,isReadOnly:w,onSubmitAnswers:C}),u[13]=C,u[14]=w,u[15]=h,u[16]=j,u[17]=c):c=u[17],c}try{tR.displayName||(tR.displayName="PlanningQuestionsBlock")}catch{}let tO=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-questions-block"}isSupported(e){return"yaml"===e.lang&&"planning-questions"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(tR,{...e})}};var tP=n(44095);let tF=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-spec-block"}isSupported(e){return"yaml"===e.lang&&"planning-spec"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(tP._,{...e})}},tM=({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:l,markdown:d,...c})=>{let u=(0,s.useRef)(!1),m=(0,s.useCallback)(e=>{u.current=e},[]),h=(0,s.useMemo)(()=>{var e;return[...c.extensions??[],(e=[],{transformMarkdown:t=>(0,o.YR)(t,"code",t=>{let n=t.lang??"",{name:i,code:a}=function(e,t){let n=e&&B.exec(e);if(n)return{name:n.groups?.name,code:t};let i=V.exec(t);return i?{name:i.groups?.name,code:t.replace(V,"")}:{code:t}}(t.meta??void 0,t.value);if(!i)return;e.includes(i)||e.push(i);let s=function(e){if(!e)return;let t=U.exec(e);return t?.groups?.url}(t.meta??void 0),r=a.split(`
`,6),l=6===r.length,o=l?r.join(`
`):`${r.join(`
`)}
`,d=t.position?.start.line??0;t.value=o,t.data={...t.data,hName:"code",hProperties:{[$]:JSON.stringify({language:n,name:i,url:s,code:a,line:d,isStreaming:t.isStreaming??!1,isClipped:l,index:e.indexOf(i),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,o.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&$ in i.properties&&n.children.splice(t,1,i)}),reactComponents:q}),{transformMarkdown:e=>(0,o.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=eM.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:i="",number:a=""}=t.groups;e.data={hName:"span",hProperties:{[eF]:JSON.stringify({owner:n,repo:i,issueNumber:a,href:e.url,children:(0,eA.d)(e)})}}}),reactComponents:e$},tn,ti,ev,eE,ty,tO,tF]},[c.extensions]);return(0,i.jsx)(r.A,{value:(0,s.useMemo)(()=>({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:l,markdown:d,hasAutoOpenedPreviewPaneRef:u,setHasAutoOpenedPreviewPane:m}),[e,t,n,l,d,u,m]),children:(0,i.jsx)(a.To,{...c,markdown:d,extensions:h,chatMode:"immersive",className:"MarkdownViewer-module__markdownOverrides--xtpOl"})})},t$=s.memo(tM);try{tM.displayName||(tM.displayName="MarkdownViewer")}catch{}try{t$.displayName||(t$.displayName="MemoizedMarkdownViewer")}catch{}},81453:(e,t,n)=>{n.d(t,{U:()=>ek});var i=n(74848),a=n(16522),s=n(82595),r=n(894),l=n(75202),o=n(91747),d=n(3433),c=n(38621),u=n(11196),m=n(94236),h=n(5524),f=n(34164),p=n(96540),g=n(2635),y=n(33592),x=n(53419),v=n(26108),b=n(81960),j=n(40090),w=n(40961),C=n(25641),_=n(18878);function N({selectedItemID:e,loadingState:t,onConversationSelect:n,isSidebarCondensed:a}){let s=(0,y.b)(),{threads:r}=(0,g.Pk)(),l=(0,p.useMemo)(()=>s.sortAndFilterThreads(r).map(e=>({id:e.id,text:(0,C.CB)(e),href:`${C.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[r,s]),o=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let i=new Date(t);i.setDate(t.getDate()-7);let a=new Date(t);a.setDate(t.getDate()-30);let s=[],r=[],l=[],o=[];for(let d of e)d.date.toDateString()===t.toDateString()?s.push(d):d.date.toDateString()===n.toDateString()?r.push(d):d.date>i?l.push(d):d.date>a&&o.push(d);return{Today:s,Yesterday:r,"Last 7 days":l,"Last 30 days":o}}(l),d=0===l.length,c=(0,p.useId)();return(0,i.jsx)("nav",{"aria-labelledby":`${c}-conversations`,id:`${c}-conversation-list`,tabIndex:-1,className:(0,f.$)("ConversationListV2-module__container--DfLLE",a&&"ConversationListV2-module__condensed--vCbJZ"),children:d&&("loading"===t||"pending"===t)?(0,i.jsx)(j.r,{lines:5}):d?(0,i.jsx)(I,{}):(0,i.jsxs)("div",{className:"ConversationListV2-module__section--G3Lm1",children:[(0,i.jsx)("h3",{id:`${c}-conversations`,className:"sr-only",children:"Chats"}),Object.entries(o).map(([t,a])=>a.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{id:`${c}_${t}`,className:"ConversationListV2-module__title--VKD9S",children:t}),(0,i.jsx)("ul",{className:"ConversationListV2-module__list--N8p2i",children:a.map(t=>(0,i.jsx)(S,{item:t,selectedItemId:e??void 0,onSelect:n,threads:r},t.id))})]},t))]})})}function S({item:e,selectedItemId:t,onSelect:n,threads:a}){let s=e.id===t,[r,l]=(0,p.useState)(null),[o,u]=(0,p.useState)(!1),f=(0,p.useCallback)(()=>u(!0),[]),g=(0,p.useCallback)(()=>u(!1),[]),y=a.get(t),b=!!y?.customCopilotID,j=(0,p.useRef)(null),C=(0,p.useCallback)(()=>{(0,w.flushSync)(()=>l(null)),j.current?.focus()},[j]);return e.href&&(0,i.jsxs)("li",{className:"ConversationListV2-module__item--cPXI6",children:[(0,i.jsx)(d.N_,{className:"ConversationListV2-module__link--J46j6",to:e.href,"aria-current":s?"page":void 0,onClick:()=>{n(),(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})},children:(0,i.jsx)("span",{className:"ConversationListV2-module__text--IsNRP",children:e.text})}),(0,i.jsx)("span",{className:"ConversationListV2-module__context--a0pCE",children:(0,i.jsxs)(m.W,{anchorRef:j,children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsx)(v.K,{loading:o,icon:c.KebabHorizontalIcon,"aria-label":"Manage chat",variant:"invisible",onClick:()=>(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,i.jsx)(m.W.Overlay,{children:(0,i.jsx)(h.l,{children:(0,i.jsx)(_.V,{onOpenDialog:l,isShared:!!a.get(e.id)?.sharedID,showShare:!b,threadName:e.text,threadId:e.id})})})]})}),(0,i.jsx)(_.p,{visibleDialog:r,onClose:C,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:f,onFinishLoading:g,returnFocusRef:j})]},e.id)}function I(){return(0,i.jsxs)("div",{className:"ConversationListV2-module__empty--4TgQY",children:[(0,i.jsx)(b.A,{as:"h3",className:"ConversationListV2-module__emptyStateHeading--KkuQU",children:"No chats yet"}),(0,i.jsx)("span",{className:"ConversationListV2-module__emptyStateText--LsdKG",children:"Ask Copilot anything on the right to start your first chat."})]})}try{N.displayName||(N.displayName="ConversationList")}catch{}try{S.displayName||(S.displayName="ConversationListEntry")}catch{}try{I.displayName||(I.displayName="EmptyState")}catch{}var k=n(7554),L=n(61282),D=n(11607),T=n(71205),E=n(29607),A=n(77999),R=n(62421);function O({handleSidebarClick:e,title:t,trailingAction:n}){let a=(0,d.zy)().pathname.includes("/share/"),{threadsLoading:s,selectedThreadID:r,threads:l}=(0,g.bP)("threadsLoading","selectedThreadID","threads"),o=(0,y.b)(),c=(0,p.useMemo)(()=>o.sortAndFilterThreads(l).map(e=>({id:e.id,text:(0,C.CB)(e),href:`${C.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[l,o]),u=0===c.length,m="loading"===s.state||"pending"===s.state;return(0,i.jsx)(E.s,{title:t,isEmpty:u,isLoading:m,trailingAction:n,children:c.map(t=>(0,i.jsx)(P,{item:t,selectedItemId:a?void 0:r??void 0,onSelect:e,threads:l},t.id))})}function P({item:e,selectedItemId:t,onSelect:n,threads:a}){let s=e.id===t,[r,l]=(0,p.useState)(null),[o,d]=(0,p.useState)(!1),u=(0,p.useCallback)(()=>d(!0),[]),f=(0,p.useCallback)(()=>d(!1),[]),g=a.get(t),y=!!g?.customCopilotID,b=(0,p.useRef)(null),j=(0,p.useCallback)(()=>{(0,w.flushSync)(()=>l(null)),b.current?.focus()},[b]),C=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.W,{anchorRef:b,children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsx)(v.K,{loading:o,icon:c.KebabHorizontalIcon,"aria-label":"Manage chat",variant:"invisible",onClick:()=>(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,i.jsx)(m.W.Overlay,{children:(0,i.jsx)(h.l,{children:(0,i.jsx)(_.V,{onOpenDialog:l,isShared:!!a.get(e.id)?.sharedID,showShare:!y,threadName:e.text,threadId:e.id})})})]}),(0,i.jsx)(_.p,{visibleDialog:r,onClose:j,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:u,onFinishLoading:f,returnFocusRef:b})]});return(0,i.jsx)(T.W,{href:e.href,text:e.text,isSelected:s,trailingAction:C,onClick:()=>{n(),(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})}})}function F({handleSidebarClick:e,isCondensed:t,onToggleSidebar:n}){let[a,s]=(0,p.useState)(!1),r=(0,R.G)(),l=(0,p.useCallback)(()=>{t&&n()},[t,n]),o=(0,p.useCallback)(()=>s(!1),[]),d=(0,p.useCallback)(async()=>{t?o():e(),await r({clearTopic:!0,includeThreads:!1}),(0,x.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"})},[e,r,t,o]),u=(0,i.jsx)(L.V,{isIconButton:!0,icon:c.PlusIcon,label:"New agent session",onOpen:()=>(0,x.BI)("agent_sessions.task_view",{target:"CREATE_TASK_FROM_CHAT_BUTTON"}),onClose:l,eventType:"activity_panel",size:"small",tooltipDirection:"e",variant:"invisible"}),h=()=>(0,i.jsxs)(E.j,{isCondensed:!1,"aria-label":"Navigation",children:[(0,i.jsx)(k.oR,{showTitle:!0,trailingAction:u,onTaskClick:t?o:void 0}),(0,i.jsx)(O,{title:"Chats",trailingAction:(0,i.jsx)(v.K,{icon:c.PlusIcon,variant:"invisible","aria-label":"New chat",size:"small",tooltipDirection:"e",onClick:d}),handleSidebarClick:e})]});return t?(0,i.jsx)("div",{className:"ActivityPanel-module__compactContainer--KLMAT",children:(0,i.jsxs)("div",{className:"ActivityPanel-module__compactAgentsMenu--MWK7t",children:[(0,i.jsxs)(m.W,{open:a,onOpenChange:s,children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsx)(A.m,{text:"Agent sessions and chats",children:(0,i.jsx)(D.$,{"aria-label":"Agent sessions and chats",icon:(0,i.jsx)(c.HistoryIcon,{}),iconOnly:!0,size:"medium",variant:"invisible"})})}),(0,i.jsx)(m.W.Overlay,{width:"medium",side:"outside-right",align:"start",maxHeight:"xlarge",className:"ActivityPanel-module__overlay--OZPYs",children:(0,i.jsx)("div",{children:h()})})]}),(0,i.jsx)("div",{className:"ActivityPanel-module__largeButton--NUegB",children:u})]})}):h()}try{O.displayName||(O.displayName="ConversationListWrapper")}catch{}try{P.displayName||(P.displayName="ConversationListEntry")}catch{}try{F.displayName||(F.displayName="ActivityPanel")}catch{}let M="CopilotNavigation-module__toggleButtonIcon--__j1B",$="CopilotNavigation-module__footerButton--RlFpZ",B="CopilotNavigation-module__footerButtonContent--mIARB",V="CopilotNavigation-module__condensed--TzlR_",U="CopilotNavigation-module__footerButtonIcon--VWrey";var q=n(84646),H=n(69599),G=n(49851),K=n(26607),W=n(27359),z=n(47789),Q=n(23657);let Z="ServiceList-module__link--VJdHH",J="ServiceList-module__content--k6BSj",Y="ServiceList-module__textWrapper--jtpsQ",X="ServiceList-module__text--DxTKY",ee="ServiceList-module__label--eTRas",et="ServiceList-module__condensed--x5s6A";function en({"aria-current":e,"data-analytics-event":t,href:n,icon:a,onLinkClick:r,id:l,displayName:o,condensed:u,label:m,external:h}){let p=h?(0,i.jsxs)("a",{href:n,className:Z,"aria-label":o,rel:"noopener noreferrer",children:[(0,i.jsx)(s.I,{size:16,icon:a}),(0,i.jsxs)("div",{className:(0,f.$)(J,u&&et),children:[(0,i.jsx)("div",{className:Y,children:(0,i.jsx)("div",{className:X,children:o})}),(0,i.jsx)("div",{className:ee,children:(0,i.jsxs)("div",{className:"ServiceList-module__externalLabel--P9mcb",children:[(0,i.jsx)("span",{className:"ServiceList-module__previewLabel--JWC5Z",children:m}),(0,i.jsx)(c.ArrowUpRightIcon,{className:"ServiceList-module__externalIcon--lTFBq"})]})})]})]}):(0,i.jsxs)(d.N_,{to:n,...{"aria-current":e,"data-analytics-event":t,className:Z,onClick:e=>{r?.(e,l)}},"aria-label":o,children:[(0,i.jsx)(s.I,{size:16,icon:a}),(0,i.jsxs)("div",{className:(0,f.$)(J,u&&et),children:[(0,i.jsx)("div",{className:Y,children:(0,i.jsx)("div",{className:X,children:o})}),(0,i.jsx)("div",{className:ee,children:m})]})]});return(0,i.jsx)("li",{className:"ServiceList-module__section--k1uLc",children:(0,i.jsx)("div",{className:"ServiceList-module__item--fn806",children:(0,i.jsx)(A.m,{text:u?o:"",children:p})})})}let ei=JSON.stringify({source:"ServiceList"});function ea({toggleFloatingSidebar:e,isSidebarCondensed:t}){let{selectedThreadID:n}=(0,g.Pk)(),a=(0,W.v)()?.id,s=(0,z.qw)(),r=(0,R.G)(),l=(0,q.BV)(),o=(0,Q.mM)(),d=!n&&!a&&!o,u=async t=>{t.metaKey||t.ctrlKey||(e(),await r({clearTopic:!0,includeThreads:!1}),(0,x.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},m=(0,p.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),h=(0,p.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),f=!(0,H.G7)("copilot_spaces_ga"),y=(0,p.useMemo)(()=>{let e=l?[{type:"spaces",component:(0,i.jsx)(en,{"aria-current":o?"page":void 0,"data-analytics-event":ei,displayName:"Spaces",href:C.VR,icon:G.Dy,condensed:t,id:"spaces",onLinkClick:m,label:f&&(0,i.jsx)(K.A,{variant:"success",children:"Preview"})},"spaces"),displayName:"Spaces"}]:[],n=s.flatMap(e=>e.navigationItems&&e.navigationItems.length>0?e.navigationItems.map(n=>({type:"plugin",component:(0,i.jsx)(en,{"aria-current":a===e.id?"page":void 0,"data-analytics-event":ei,displayName:n.displayName,href:n.href,icon:n.icon,condensed:t,id:n.id,onLinkClick:n.external?void 0:h,label:n.label,external:n.external},`${e.id}-${n.id}`),displayName:n.displayName})):[]),r=(0,H.G7)("copilot_default_to_task_input");return[...e,...n].sort((e,t)=>{if(r){if("Agents"===e.displayName)return -1;if("Agents"===t.displayName)return 1}return e.displayName.localeCompare(t.displayName)})},[l,o,t,m,f,s,a,h]),v=(0,H.G7)("copilot_default_to_task_input"),b=y.map(e=>e.component),j=(0,i.jsx)(en,{"aria-current":d?"page":void 0,"data-analytics-event":ei,displayName:v?"Chat":"New chat",href:C.Jz,icon:v?c.CommentDiscussionIcon:c.ComposeIcon,condensed:t,id:"home",onLinkClick:u},"home"),w=(0,H.G7)("copilot_default_to_task_input")&&y[0]?.displayName==="Agents"&&b[0]?[b[0],j,...b.slice(1)]:[j,...b];return(0,i.jsx)("ul",{className:"ServiceList-module__list--nR74A",children:w})}try{en.displayName||(en.displayName="ServiceListItem")}catch{}try{ea.displayName||(ea.displayName="ServiceList")}catch{}var es=n(77430),er=n(84268),el=n(51213),eo=n(98755),ed=n(71315),ec=n(57387),eu=n(46251),em=n(69726),eh=n(76720),ef=n(25744),ep=n(3803);let eg="ManageSharedConversationsDialog-module__mutedText--_uOci";var ey=n(21373),ex=n(20139);let ev=e=>{let t,n,s,r,l,o,d,c,u,m,h,f,v,b,j,w,C,_,N,S,I=(0,a.c)(60),{closeDialog:k,threadId:L}=e,D=(0,g.Pk)(),T=(0,y.b)(),{selectedThreadID:E,ssoOrganizations:A,apiUrl:R,threads:O}=D,[P,F]=(0,p.useState)(D.messages);I[0]!==L||I[1]!==O?(t=()=>{let e=O.get(L);return e?.sharedID||""},I[0]=L,I[1]=O,I[2]=t):t=I[2];let[M,$]=(0,p.useState)(t),B=(0,p.useRef)(""!==M),V=(0,p.useRef)("");I[3]!==P||I[4]!==M||I[5]!==D.apiUrl||I[6]!==D.ssoOrganizations||I[7]!==L?(n=()=>{let e=async()=>{if(0===P.filter(e=>e.threadID===L).length){let e=new ex.k(D.apiUrl,D.ssoOrganizations),t=await e.listSharedThreadMessages(M);t.ok&&F(t.payload.messages)}};V.current!==M&&M&&(V.current=M,e())},s=[M,L,P,D.apiUrl,D.ssoOrganizations],I[3]=P,I[4]=M,I[5]=D.apiUrl,I[6]=D.ssoOrganizations,I[7]=L,I[8]=n,I[9]=s):(n=I[8],s=I[9]),(0,p.useEffect)(n,s),I[10]!==E||I[11]!==L||I[12]!==O?(r=O.get(L||E),I[10]=E,I[11]=L,I[12]=O,I[13]=r):r=I[13];let U=r,q=P[P.length-1],H=q?.content||"";I[14]!==E||I[15]!==L||I[16]!==O?(l=()=>{let e=L||E;if(e){let t=O.get(e);$(t?.sharedID||"")}},I[14]=E,I[15]=L,I[16]=O,I[17]=l):l=I[17],I[18]!==T||I[19]!==E||I[20]!==L||I[21]!==O?(o=[T,$,E,O,L],I[18]=T,I[19]=E,I[20]=L,I[21]=O,I[22]=o):o=I[22],(0,p.useEffect)(l,o),I[23]!==R||I[24]!==k||I[25]!==T||I[26]!==E||I[27]!==M||I[28]!==A||I[29]!==L?(d=async()=>{let e=L||E,t=new ex.k(R,A),n=await t.unshareThread(e);if(n.ok){let{sharedID:t,sharedAt:i,sharedMessageID:a}=n.payload;T.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:i,sharedMessageID:a}}),B.current=!1,k(),(0,x.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:M})}},I[23]=R,I[24]=k,I[25]=T,I[26]=E,I[27]=M,I[28]=A,I[29]=L,I[30]=d):d=I[30];let G=d;I[31]!==k?(c=()=>{k()},I[31]=k,I[32]=c):c=I[32];let K=c;I[33]!==G||I[34]!==M?(u=()=>{if(M)return(0,i.jsx)(ey.Q,{onClick:G,variant:"danger",children:"Unshare"})},I[33]=G,I[34]=M,I[35]=u):u=I[35];let W=u;I[36]!==k?(m=()=>(0,i.jsx)(ey.Q,{onClick:k,children:"Cancel"}),I[36]=k,I[37]=m):m=I[37];let z=m;I[38]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),I[38]=h):h=I[38];let Q=U?.name||"";return I[39]!==Q?(f=(0,i.jsx)("span",{className:"UnshareConversationDialog-module__threadTitle--eBgrX",children:Q}),I[39]=Q,I[40]=f):f=I[40],I[41]!==H?(v=(0,i.jsx)("span",{className:"UnshareConversationDialog-module__threadDescription--E1H0T",children:H}),I[41]=H,I[42]=v):v=I[42],I[43]!==f||I[44]!==v?(b=(0,i.jsxs)(eu.B,{direction:"vertical",className:"UnshareConversationDialog-module__threadInfoStack--gcf6y",children:[f,v]}),I[43]=f,I[44]=v,I[45]=b):b=I[45],I[46]===Symbol.for("react.memo_cache_sentinel")?(j=(0,i.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),I[46]=j):j=I[46],I[47]!==z?(w=z(),I[47]=z,I[48]=w):w=I[48],I[49]!==W?(C=W(),I[49]=W,I[50]=C):C=I[50],I[51]!==w||I[52]!==C?(_=(0,i.jsxs)(eu.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:"UnshareConversationDialog-module__buttonStack--JvbNF",children:[w,C]}),I[51]=w,I[52]=C,I[53]=_):_=I[53],I[54]!==b||I[55]!==_?(N=(0,i.jsxs)("div",{className:"UnshareConversationDialog-module__container--Tc1R_",children:[h,b,j,_]}),I[54]=b,I[55]=_,I[56]=N):N=I[56],I[57]!==K||I[58]!==N?(S=(0,i.jsx)(ec.l,{title:"Unshare conversation",onClose:K,width:"large",children:N}),I[57]=K,I[58]=N,I[59]=S):S=I[59],S};try{ev.displayName||(ev.displayName="UnshareConversationDialog")}catch{}let eb=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},ej=({closeDialog:e,returnFocusRef:t})=>{let n=(0,y.b)(),a=(0,g.Pk)(),[s,r]=(0,p.useState)(0),[l,o]=(0,p.useState)([]),[d,u]=(0,p.useState)(!0),[m,h]=(0,p.useState)(!1),[f,b]=(0,p.useState)(null),[j,w]=(0,p.useState)(!1),[C,_]=(0,p.useState)(5>l.length),N=5*s,S=l.slice(N,N+5);(0,p.useEffect)(()=>{(async()=>{let e=await n.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:eb(e.updatedAt),sharedUrl:`${ed.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ed.fV.origin}/copilot/c/${e.id}`}))),u(!1)})()},[n]),(0,p.useEffect)(()=>{C&&s>0&&l.length<=5*s&&r(0);let e=5<l.length;e!==C&&_(e)},[l,s,5,C]);let I=(0,p.useCallback)(()=>{e()},[e]),k=(0,p.useCallback)(async()=>{if(!j)return void w(!0);w(!1),u(!0);try{(await n.unshareAllThreads()).ok&&(o([]),await n.fetchThreads())}finally{u(!1)}},[j,n]),L=async()=>{h(!1),b(null),u(!0);let e=await n.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New chat",lastUpdated:eb(e.updatedAt),sharedUrl:`${ed.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ed.fV.origin}/copilot/c/${e.id}`}))),u(!1)},D=d||"error"===a.sharedThreadsLoading.state||0===l.length,T=(0,p.useMemo)(()=>{if(!l.length)return[];let e={buttonType:"danger",content:"Unshare all",onClick:()=>{j?k():w(!0)}};return j?[{buttonType:"default",content:"Cancel",onClick:()=>w(!1)},e]:[e]},[l.length,j,k]),E=(0,p.useMemo)(()=>d?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===a.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[d,a.sharedThreadsLoading.state]);return(0,i.jsxs)(ec.l,{title:"Manage shared conversations",width:"xlarge",className:"ManageSharedConversationsDialog-module__dialog--_C8sX",position:{narrow:"fullscreen",regular:"center"},onClose:I,returnFocusRef:t,renderFooter:()=>{var e;return T?.length?(0,i.jsx)(ec.l.Footer,{className:"ManageSharedConversationsDialog-module__footer--aTXFp",children:(0,i.jsxs)("div",{className:"ManageSharedConversationsDialog-module__footerContent--yVU91",children:[(0,i.jsx)("div",{className:"ManageSharedConversationsDialog-module__footerLeft--eRZWV",children:j&&(0,i.jsx)("div",{className:"ManageSharedConversationsDialog-module__confirmationText--tYQ41 ManageSharedConversationsDialog-module__quickFadeUp--tiEAs",children:1===(e=l.length)?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`})}),(0,i.jsx)("div",{className:"ManageSharedConversationsDialog-module__footerRight--n1XJG",children:(0,i.jsx)(ec.l.Buttons,{buttons:T})})]})}):null},children:[D?(0,i.jsxs)(eh.E,{children:[(0,i.jsx)(eh.E.Visual,{children:E.isSpinner?(0,i.jsx)(eu.B,{direction:"horizontal",align:"center",children:(0,i.jsx)(em.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,i.jsx)("div",{className:eg,children:"error"===E.result?(0,i.jsx)(c.AlertIcon,{size:"medium",className:"ManageSharedConversationsDialog-module__alertIcon--mA28C","aria-label":"Error loading shared conversations"}):(0,i.jsx)(c.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,i.jsx)(eh.E.Heading,{children:E.heading}),(0,i.jsx)(eh.E.Description,{children:E.description})]}):(0,i.jsxs)(ef.X.Container,{children:[(0,i.jsx)(ep.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Chat",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,i.jsx)(er.A,{href:e.threadUrl,className:"ManageSharedConversationsDialog-module__conversationLink--JqMKE",children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,i.jsx)("span",{className:eg,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,i.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"ManageSharedConversationsDialog-module__actionButtons--iuECd",children:[(0,i.jsx)(eo.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,x.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,i.jsx)(v.K,{"aria-label":"Unshare chat",title:"Unshare chat",icon:c.UnlinkIcon,variant:"invisible",onClick:()=>{b(e),h(!0)}})]})})}],data:S}),l.length>5&&(0,i.jsx)(ef.X.Pagination,{"aria-label":"Shared chats pagination",pageSize:5,defaultPageIndex:s,totalCount:l.length,onChange:e=>{r(e.pageIndex)},showPages:!1})]}),m&&f&&(0,i.jsx)(ev,{threadId:f.id,closeDialog:L})]})};try{ej.displayName||(ej.displayName="ManageSharedConversationsDialog")}catch{}var ew=n(17005),eC=n(87255);let e_="UserMenu-module__userAvatar--sp40T";function eN(e){let t,n,s,r,l,o,d,u,y,v,b,j,w,C,_,N,S,I,k,L,D,T,E,A,R=(0,a.c)(55),{isCondensed:O}=e,P=void 0!==O&&O,F=(0,p.useRef)(null),M=(0,p.useRef)(null),[$,B]=(0,p.useState)(!1),[V,U]=(0,p.useState)(!1),{currentUserLogin:q,plan:H,optedInToUserFeedback:G}=(0,g.bP)("currentUserLogin","plan","optedInToUserFeedback"),K=(0,Q.mM)();R[0]!==H?(t=function(e){switch(e){case el.UH.IndividualFree:return"Free";case el.UH.IndividualPro:return"Pro";case el.UH.IndividualProPlus:return"Pro+";case el.UH.Business:return"Business";case el.UH.Enterprise:return"Enterprise";default:return"Free"}}(H),R[0]=H,R[1]=t):t=R[1];let W=`Copilot ${t}`,z=!H||H===el.UH.IndividualFree,Z=P&&"UserMenu-module__condensed--rjzRR";R[2]!==Z?(n=(0,f.$)("UserMenu-module__userButton--FuXsC",Z),R[2]=Z,R[3]=n):n=R[3];let J=P?"user":void 0,Y=`/${q}.png`;R[4]!==Y?(s=(0,i.jsx)("div",{className:e_,children:(0,i.jsx)(es.r,{src:Y,size:24})}),R[4]=Y,R[5]=s):s=R[5],R[6]!==W?(r=(0,i.jsx)("div",{className:"UserMenu-module__planLabel--wfY7B",children:W}),R[6]=W,R[7]=r):r=R[7],R[8]!==q||R[9]!==r?(l=(0,i.jsxs)("div",{className:"UserMenu-module__userContent--jXldm",children:[q,r]}),R[8]=q,R[9]=r,R[10]=l):l=R[10],R[11]!==n||R[12]!==J||R[13]!==s||R[14]!==l?(o=(0,i.jsx)(m.W.Anchor,{children:(0,i.jsxs)("button",{className:n,"aria-label":J,children:[s,l]})}),R[11]=n,R[12]=J,R[13]=s,R[14]=l,R[15]=o):o=R[15];let X=`/${q}.png`;return R[16]!==X?(d=(0,i.jsx)("div",{className:e_,children:(0,i.jsx)(es.r,{src:X,size:32})}),R[16]=X,R[17]=d):d=R[17],R[18]!==q?(u=(0,i.jsx)("div",{className:"UserMenu-module__username--n5Tln",children:q}),R[18]=q,R[19]=u):u=R[19],R[20]!==z?(y=z&&(0,i.jsxs)(i.Fragment,{children:[" \xb7 ",(0,i.jsx)(er.A,{onClick:eI,href:"https://github.com/github-copilot/pro",className:"UserMenu-module__upgradeLink--eI332",children:"Upgrade"})]}),R[20]=z,R[21]=y):y=R[21],R[22]!==W||R[23]!==y?(v=(0,i.jsxs)("span",{className:"UserMenu-module__description--FvI5s",children:[W,y]}),R[22]=W,R[23]=y,R[24]=v):v=R[24],R[25]!==u||R[26]!==v?(b=(0,i.jsxs)("div",{className:"UserMenu-module__userDetails--mes1V",children:[u,v]}),R[25]=u,R[26]=v,R[27]=b):b=R[27],R[28]!==d||R[29]!==b?(j=(0,i.jsxs)("div",{className:"UserMenu-module__menuItem--oXBxi",children:[d,b]}),R[28]=d,R[29]=b,R[30]=j):j=R[30],R[31]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsx)(h.l.Divider,{}),R[31]=w):w=R[31],R[32]===Symbol.for("react.memo_cache_sentinel")?(C=()=>{U(!0),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},R[32]=C):C=R[32],R[33]===Symbol.for("react.memo_cache_sentinel")?(_=(0,i.jsxs)(h.l.Item,{onSelect:C,children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.NoteIcon,{})}),"Personal instructions"]}),R[33]=_):_=R[33],R[34]!==K?(N=!K&&(0,i.jsxs)(h.l.Item,{onSelect:()=>{B(!0),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_MANAGE_SHARED",mode:"immersive"})},children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.ListUnorderedIcon,{})}),"Manage shared conversations"]}),R[34]=K,R[35]=N):N=R[35],R[36]!==G?(S=G&&(0,i.jsxs)(h.l.Item,{onSelect:()=>{M.current?.openDialog(),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.CommentIcon,{})}),"Give feedback"]}),R[36]=G,R[37]=S):S=R[37],R[38]===Symbol.for("react.memo_cache_sentinel")?(I=(0,i.jsxs)(h.l.LinkItem,{href:"/settings/copilot",onClick:eS,children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsx)(c.GearIcon,{})}),"Settings"]}),R[38]=I):I=R[38],R[39]!==j||R[40]!==N||R[41]!==S?(k=(0,i.jsx)(m.W.Overlay,{width:"small",align:"end",children:(0,i.jsxs)(h.l,{children:[j,w,_,N,S,I]})}),R[39]=j,R[40]=N,R[41]=S,R[42]=k):k=R[42],R[43]!==o||R[44]!==k?(L=(0,i.jsxs)(m.W,{anchorRef:F,children:[o,k]}),R[43]=o,R[44]=k,R[45]=L):L=R[45],R[46]===Symbol.for("react.memo_cache_sentinel")?(D=(0,i.jsx)(ew.l,{ref:M,mode:"immersive",returnFocusRef:F}),R[46]=D):D=R[46],R[47]!==$?(T=$&&(0,i.jsx)(ej,{closeDialog:()=>{B(!1)},returnFocusRef:F}),R[47]=$,R[48]=T):T=R[48],R[49]!==V?(E=V&&(0,i.jsx)(eC.Y,{onDismiss:()=>U(!1),returnFocusRef:F}),R[49]=V,R[50]=E):E=R[50],R[51]!==L||R[52]!==T||R[53]!==E?(A=(0,i.jsxs)(i.Fragment,{children:[L,D,T,E]}),R[51]=L,R[52]=T,R[53]=E,R[54]=A):A=R[54],A}function eS(){return(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_SETTINGS",mode:"immersive"})}function eI(){(0,x.BI)("dotcom_chat.activate",{target:"UPGRADE_USER_MENU_LINK",mode:"immersive"})}try{eN.displayName||(eN.displayName="UserMenu")}catch{}function ek(){let e,t=(0,a.c)(5),{sidebarExpanded:n,sidebarVisible:s,layoutBreakpoint:l,toggleSidebar:o}=(0,r.L)();return t[0]!==l||t[1]!==n||t[2]!==s||t[3]!==o?(e=(0,i.jsx)(eD,{sidebarExpanded:n,sidebarVisible:s,sidebarFloating:l,onToggleSidebar:o}),t[0]=l,t[1]=n,t[2]=s,t[3]=o,t[4]=e):e=t[4],e}function eL(e){let t,n=(0,a.c)(6),{children:s,showTooltip:r,text:l,direction:o}=e,d=void 0===o?"e":o;if(!r){let e;return n[0]!==s?(e=(0,i.jsx)(i.Fragment,{children:s}),n[0]=s,n[1]=e):e=n[1],e}return n[2]!==s||n[3]!==d||n[4]!==l?(t=(0,i.jsx)(u.m,{text:l,direction:d,children:s}),n[2]=s,n[3]=d,n[4]=l,n[5]=t):t=n[5],t}function eD(e){let t,n,r,u,x,v,b,j,w,C,_,S,I,k,L,D,T=(0,a.c)(47),{onSidebarClick:E,onToggleSidebar:A,sidebarExpanded:R,sidebarFloating:O,sidebarVisible:P}=e,q=!O&&!R,H=(0,y.b)(),{threadsLoading:G,threads:K,selectedThreadID:W,ssoOrganizations:z,agentsEnabled:Q}=(0,g.bP)("threadsLoading","threads","selectedThreadID","ssoOrganizations","agentsEnabled"),Z=(0,d.zy)(),J=Z.pathname.includes("/share/");T[0]!==H||T[1]!==K.size||T[2]!==G.state?(t=()=>{0===K.size&&"pending"===G.state&&H.fetchThreads()},n=[K.size,H,G.state],T[0]=H,T[1]=K.size,T[2]=G.state,T[3]=t,T[4]=n):(t=T[3],n=T[4]),(0,p.useEffect)(t,n),T[5]!==E||T[6]!==P||T[7]!==A?(r=()=>{E?.(),P&&A()},T[5]=E,T[6]=P,T[7]=A,T[8]=r):r=T[8];let Y=r,X=(0,p.useId)();T[9]!==Z.hash||T[10]!==Z.pathname||T[11]!==Z.search?(u=e=>{let t=`/orgs/${encodeURIComponent(e)}/sso`,n=Z.pathname+Z.search+Z.hash;return`${t}?return_to=${encodeURIComponent(n)}`},T[9]=Z.hash,T[10]=Z.pathname,T[11]=Z.search,T[12]=u):u=T[12];let ee=u;T[13]!==q||T[14]!==A?(x=()=>(0,i.jsx)(eL,{showTooltip:q,text:"Expand sidebar",children:(0,i.jsxs)("button",{className:$,"aria-label":q?"Expand sidebar":"Collapse sidebar",onClick:A,children:[q?(0,i.jsx)(c.SidebarCollapseIcon,{size:16,className:M}):(0,i.jsx)(c.SidebarExpandIcon,{size:16,className:M}),(0,i.jsx)("span",{className:(0,f.$)(B,q&&V),children:"Collapse"})]})}),T[13]=q,T[14]=A,T[15]=x):x=T[15];let et=x;T[16]!==ee||T[17]!==q||T[18]!==z?(v=()=>{if(0===z.length)return null;if(1===z.length){let e=z[0];return(0,i.jsx)(eL,{showTooltip:q,text:"Single sign-on",children:(0,i.jsxs)("a",{href:ee(e.login),className:$,children:[(0,i.jsx)(c.ShieldLockIcon,{size:16,className:U}),(0,i.jsx)("span",{className:(0,f.$)(B,q&&V),"aria-hidden":q,children:"Single sign-on"})]})})}return(0,i.jsx)(eL,{showTooltip:q,text:"Single sign-on",children:(0,i.jsx)("div",{children:(0,i.jsxs)(m.W,{children:[(0,i.jsx)(m.W.Anchor,{children:(0,i.jsxs)("button",{className:$,"aria-label":"Single sign-on",children:[(0,i.jsx)(s.I,{icon:c.ShieldLockIcon,size:16,className:U}),(0,i.jsx)("div",{className:(0,f.$)(B,q&&V),"aria-hidden":q,children:"Single sign-on"})]})}),(0,i.jsx)(m.W.Overlay,{children:(0,i.jsx)(h.l,{children:z.map(e=>(0,i.jsx)(h.l.LinkItem,{href:ee(e.login),children:e.login},e.login))})})]})})})},T[16]=ee,T[17]=q,T[18]=z,T[19]=v):v=T[19];let en=v;T[20]===Symbol.for("react.memo_cache_sentinel")?(b=(0,i.jsx)(eT,{}),T[20]=b):b=T[20];let ei=`${X}-quick-links`,es=`${X}-quick-links`;T[21]!==es?(j=(0,i.jsx)("h3",{id:es,className:"sr-only",children:"Quick links"}),T[21]=es,T[22]=j):j=T[22],T[23]!==Y||T[24]!==q?(w=(0,i.jsx)(ea,{isSidebarCondensed:q,toggleFloatingSidebar:Y}),T[23]=Y,T[24]=q,T[25]=w):w=T[25],T[26]!==j||T[27]!==w||T[28]!==ei?(C=(0,i.jsxs)("nav",{"aria-labelledby":ei,className:"CopilotNavigation-module__quicklinks--y91ru",children:[j,w]}),T[26]=j,T[27]=w,T[28]=ei,T[29]=C):C=T[29];let er=(0,o.u)("copilot_swe_agent_progress_commands")&&Q?(0,i.jsx)(F,{handleSidebarClick:Y,isCondensed:q,onToggleSidebar:A}):(0,i.jsx)(N,{selectedItemID:J?null:W,loadingState:G.state,onConversationSelect:Y,isSidebarCondensed:q});return T[30]!==C||T[31]!==er?(_=(0,i.jsxs)(l.t,{fallback:b,children:[C,er]}),T[30]=C,T[31]=er,T[32]=_):_=T[32],T[33]!==et||T[34]!==O?(S=!O&&et(),T[33]=et,T[34]=O,T[35]=S):S=T[35],T[36]!==en?(I=en(),T[36]=en,T[37]=I):I=T[37],T[38]!==q?(k=(0,i.jsx)(eN,{isCondensed:q}),T[38]=q,T[39]=k):k=T[39],T[40]!==S||T[41]!==I||T[42]!==k?(L=(0,i.jsxs)("div",{className:"CopilotNavigation-module__footer--WE0C5",children:[S,I,k]}),T[40]=S,T[41]=I,T[42]=k,T[43]=L):L=T[43],T[44]!==_||T[45]!==L?(D=(0,i.jsxs)(i.Fragment,{children:[_,L]}),T[44]=_,T[45]=L,T[46]=D):D=T[46],D}function eT(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"CopilotNavigation-module__blankslateContainer--nuX9Y",children:(0,i.jsx)("div",{children:"Error loading conversations"})}),t[0]=e):e=t[0],e}try{ek.displayName||(ek.displayName="CopilotNavigationWithContext")}catch{}try{eL.displayName||(eL.displayName="ConditionalTooltip")}catch{}try{eD.displayName||(eD.displayName="CopilotNavigation")}catch{}try{eT.displayName||(eT.displayName="SidebarContentsFallback")}catch{}},82130:(e,t,n)=>{n.d(t,{q:()=>l});var i=n(68273),a=n(16522),s=n(30459),r=n(96540);let l=(0,i.Z6)()?function(){let e,t,n=(0,a.c)(4),{sendAnalyticsEvent:i}=(0,s.s)();n[0]!==i?(e=(e,t,n)=>{i(e,t,void 0===n?{}:n)},n[0]=i,n[1]=e):e=n[1];let r=e;return n[2]!==r?(t={sendPullRequestAnalyticsEvent:r},n[2]=r,n[3]=t):t=n[3],t}:function(){let{sendAnalyticsEvent:e}=(0,s.s)();return{sendPullRequestAnalyticsEvent:(0,r.useCallback)((t,n,i={})=>{e(t,n,i)},[e])}}},82590:(e,t,n)=>{n.d(t,{J1:()=>d,Os:()=>l,QK:()=>o,S$:()=>a,bW:()=>u,km:()=>r,lh:()=>s,qe:()=>c});var i=n(25641);let a="loops",s="loops",r="loop",l="Loops",o=`${i.Jz}/loops`,d=`${i.Jz}/l`,c=/\/copilot\/loops/,u=/\/copilot\/l\/([a-zA-Z0-9-]+)/},82603:(e,t,n)=>{n.d(t,{dG:()=>u,hG:()=>f,o5:()=>m});var i=n(68273),a=n(16522),s=n(96540),r=n(97286),l=n(65510),o=n(96379),d=n(20622);function c(e){return{queryKey:[d.uT.codeowners,e],queryFn:async()=>{let t=`${e}/page_data/${d.uT.codeowners}`,n=await (0,o.QJ)(t);if(!n.ok)throw Error(`HTTP ${n.status}`);return await n.json()},staleTime:1/0}}let u=(0,i.Z6)()?function(e){let t,n,i=(0,a.c)(6),{basePath:s,initialData:l}=e;i[0]!==s?(t=c(s),i[0]=s,i[1]=t):t=i[1];let{queryFn:o,queryKey:d}=t;return i[2]!==l||i[3]!==o||i[4]!==d?(n={queryKey:d,queryFn:o,initialData:l,staleTime:1/0},i[2]=l,i[3]=o,i[4]=d,i[5]=n):n=i[5],(0,r.I)(n)}:function({basePath:e,initialData:t}){let{queryFn:n,queryKey:i}=c(e);return(0,r.I)({queryKey:i,queryFn:n,initialData:t,staleTime:1/0})},m=(0,i.Z6)()?function(e){let t,n,i,s=(0,a.c)(8),{basePath:r,diffPath:o}=e;s[0]!==r?(t=c(r),s[0]=r,s[1]=t):t=s[1];let{queryFn:d,queryKey:u}=t;s[2]!==o?(n=e=>f({codeownersData:e,diffPath:o}),s[2]=o,s[3]=n):n=s[3];let m=n;return s[4]!==d||s[5]!==u||s[6]!==m?(i={queryKey:u,queryFn:d,staleTime:1/0,select:m},s[4]=d,s[5]=u,s[6]=m,s[7]=i):i=s[7],(0,l.U)(i)}:function({basePath:e,diffPath:t}){let{queryFn:n,queryKey:i}=c(e);return(0,l.U)({queryKey:i,queryFn:n,staleTime:1/0,select:(0,s.useCallback)(e=>f({codeownersData:e,diffPath:t}),[t])})},h={isOwnedByViewer:!1,owners:[],ruleLineNumber:void 0,ruleUrl:void 0};function f({diffPath:e,codeownersData:t}){if(!t)return h;let n=t.ownershipByPath[e];return n?{isOwnedByViewer:n.isOwnedByViewer,owners:n.owners||[],ruleLineNumber:n.ruleLineNumber,ruleUrl:n.ruleUrl}:h}},83873:(e,t,n)=>{n.d(t,{v:()=>R,n:()=>A});var i=n(74848),a=n(68273),s=n(96540),r=n(71323),l=n(97283),o=n(87134),d=n(1932),c=n(21132),u=n(15697);function m({diffSummaries:e,diffSummariesArray:t,loadedPathDigests:n,loadingPathDigests:i,selectedPathDigest:a}){let s=!0,r=t??Object.values(e),l=r.findIndex(e=>e.pathDigest===a);return r.map(({path:e,pathDigest:t},a)=>{let r,o;switch(!0){case n.has(t):r=c.s.Loaded;break;case i.has(t):r=c.s.Loading;break;default:r=c.s.NotLoaded}let d=!1;return r===c.s.Loaded?(o="RENDER",d=!1):(a===l?(o="EAGER_AUTO_LOAD",d=!0):(o=a<l?"LAZY_AUTO_LOAD":a===l+1?"EAGER_AUTO_LOAD":s?"EAGER_AUTO_LOAD":"HIDE",d=!1),s&&"LAZY_AUTO_LOAD"!==o&&(s=!1)),{path:e,pathDigest:t,loadingStatus:r,renderMode:o,loadSolo:d}})}function h({progressiveDiffEntries:e,startingAt:t,preferAnySoloEntry:n}){if(n){let t=e.find(e=>e.loadSolo&&e.loadingStatus===c.s.NotLoaded);if(t)return[t]}let i=t?e.findIndex(e=>e.pathDigest===t.pathDigest):e.findIndex(e=>e.loadingStatus===c.s.NotLoaded);if(-1===i)return[];let a=e[i];if(a&&a.loadSolo&&a.loadingStatus===c.s.NotLoaded)return[a];let s=[];for(let t=i;t<e.length;t++){let n=e[t];if(!n||(n.loadingStatus===c.s.NotLoaded&&s.push(n),s.length>=4))break}return s}var f=n(70170),p=n(56092),g=n(91747),y=n(61583),x=n(79472),v=n(43362),b=n(48845),j=n(20622),w=n(96379),C=n(16235),_=n(69599);function N({basePath:e,effectiveRange:t,hideWhitespace:n}){return[j.uT.diffEntries,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`,`hideWhitespace:${n}`]}async function S(e){let t=(0,C.S)(),n=N(e),i=await k(e);return i&&i.length>0&&t.setQueryData(n,(0,d.jM)(e=>{if(!e)return i;for(let t of i)e.find(e=>e.pathDigest===t.pathDigest)||e.push(t)})),i}async function I(e){let t,n=(0,C.S)(),i=N(e),a=n.getQueryData(i);if(a?.length){let n=new Set(a.map(e=>e.path));if(0===(t=e.paths.filter(e=>!n.has(e))).length)return a}else t=e.paths;let s=await k({...e,paths:t});return s&&s.length>0&&n.setQueryData(i,(0,d.jM)(e=>{if(!e)return s;for(let t of s)e.find(e=>e.pathDigest===t.pathDigest)||e.push(t)})),(n.getQueryData(i)||[]).filter(t=>e.paths.includes(t.path))}async function k({basePath:e,fullDiff:t,effectiveRange:n,paths:i,contextRanges:a,signal:s,hideWhitespace:r,isComparisonOutdated:l}){let o=new URLSearchParams,d=i.map(e=>encodeURIComponent(e));if(o.append("paths",d.join(",")),a){let e=i.map(e=>(a[e]??[]).map(([e,t])=>`${e}-${t}`).join(",")).join(":");o.append("ctx",e)}o.append("w",r?"1":"0"),n.baseOid===t.baseOid?o.append("range",n.headOid):o.append("range",`${n.baseOid}..${n.headOid}`),l&&o.append("outdated","1");let c=`${e}/page_data/${j.uT.diffEntries}?${o.toString()}`;try{let e=await (0,w.Sr)(c,{signal:s});if(s?.aborted)return;let t=await (0,b.hp)(e);return(0,b.R)(e,t),t??void 0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}}function L(e,t,n,i){return[j.uT.diffContextLines,e,t,n,i]}async function D({contextLineRanges:e,basePath:t,path:n,w:i="0",fullDiff:a,effectiveRange:s}){let r=new URLSearchParams;for(let t of(r.append("path",n),e))r.append("context_line_ranges[]",JSON.stringify(t));r.append("w",i),s.baseOid===a.baseOid?r.append("range",s.headOid):r.append("range",`${s.baseOid}..${s.headOid}`);let l=`${t}/page_data/${j.uT.diffContextLines}?${r.toString()}`,o=await (0,w.QJ)(l);if(o.ok)return await o.json()??void 0}var T=n(88008);let E=(0,s.createContext)(null),A=(0,a.Z6)()?function(e){let t=(0,s.useContext)(E);if(!t)throw Error("Missing PullRequestStoreProvider in the tree");return(0,r.P)(t,e)}:function(e){let t=(0,s.useContext)(E);if(!t)throw Error("Missing PullRequestStoreProvider in the tree");return(0,r.P)(t,e)},R=({initData:e,children:t})=>{var n,a,r,l,o,d;let c,u,m=(0,s.useRef)(null),h=(0,g.u)("prx_files_lite_throttle"),f=(0,g.u)("prx_files_medium_throttle"),p=(0,x.Qn)(e.user.viewSettings.hideWhitespace),b=e.user.viewSettings.commentsPreference,j=(0,v.Wp)(e.diffSummaries),w=(0,v.Be)(e.diffSummaries),_=(0,v.wm)(e.viewerPendingReview),S=(0,v.Sl)(e.diffContents),I=(0,v.jH)(e.markers,e.diffSummaries),k=(0,T.Ol)(e.pullRequest.pathName,e.pullRequest.comparison.headOid);return m.current||(n=e.comparison.selectedRange?.baseOid,a=e.comparison.selectedRange?.headOid,r=e.pullRequest.pathName,l=e.diffContents,o=e.pullRequest.comparison,d=p,c=(0,C.S)(),u=N({basePath:r,effectiveRange:{baseOid:n??o.baseOid,headOid:a??o.headOid},hideWhitespace:d}),c.setQueryData(u,l),m.current=O({baseOid:e.pullRequest.comparison.baseOid,headOid:e.pullRequest.comparison.headOid,selectedCommitRange:e.comparison.selectedRange,comparisonView:e.comparison.viewing,changeGroupGeneration:e.changeGroupGeneration,hideWhitespace:p,isSingleFileMode:e.isSingleFileMode,collapsedFilesMap:w,initialSummariesViewedStatus:w,initialSummariesViewedCount:e.user.viewedFilesCount,diffEntries:S,commentsPreference:b,initialDiffSummaries:j,initialLoadedPathDigests:new Set(e.diffContents.map(e=>e.pathDigest)),markers:I,basePath:e.pullRequest.pathName,pendingReview:_,prxFilesLiteThrottle:h,prxFilesMediumThrottle:f,pullRequest:e.pullRequest,baseRepository:e.repository,selectedPathDigest:(0,y.jU)((0,y.o9)()),initialActiveBatch:k.length>0?k:void 0,showChangeGroupPreference:e.user.viewSettings.showChangeGroups})),(0,i.jsx)(E,{value:m.current,children:t})},O=e=>(0,l.y)()((0,o.lt)((...t)=>({...(({changeGroupGeneration:{canAccessChangeGroups:e,changeGroups:t,changeGroupFeedbackOptions:n,latestChangeGroupOrchestration:i,changeGroupGenerationChannel:a,unavailableReason:s},showChangeGroupPreference:r})=>l=>({changeGroupGeneration:{canAccessChangeGroups:e,changeGroups:t,changeGroupFeedbackOptions:n,latestChangeGroupOrchestration:i,changeGroupGenerationChannel:a,unavailableReason:s},showChangeGroupPreference:r,changeGroupGenerationActions:{updateChangeGroupGeneration:e=>l(t=>({changeGroupGeneration:{...t.changeGroupGeneration,...e},showChangeGroupPreference:t.showChangeGroupPreference}),void 0,"updateChangeGroupGeneration"),updateChangeGroupPreference:e=>l(t=>({changeGroupGeneration:t.changeGroupGeneration,showChangeGroupPreference:e}),void 0,"updateChangeGroupPreference")}}))(e)(...t),...((e,t)=>({codeowners:void 0,codeownersActions:{setCodeowners:t=>{e({codeowners:t},void 0,"updateCodeowners")}}}))(...t),...(({baseOid:e,headOid:t,selectedCommitRange:n,comparisonView:i,hideWhitespace:a})=>s=>({comparisonInfo:{fullDiff:{baseOid:e,headOid:t},selectedRange:n,effectiveRange:n??{baseOid:e,headOid:t},hideWhitespace:a,comparisonView:i},isComparisonOutdated:!1,comparisonInfoActions:{updateWhitespace:e=>s(t=>({comparisonInfo:{...t.comparisonInfo,hideWhitespace:e}}),void 0,"comparisonInfo#updateWhitespace"),markComparisonOutdated:()=>s(()=>({isComparisonOutdated:!0}),void 0,"comparisonInfo#markComparisonOutdated")}}))(e)(...t),...((e,t)=>({diffFilter:{state:{activeChangeGroupId:void 0,filterText:"",fileExtensions:{},unselectedFileExtensions:new Set,showDeletedFiles:!0,showOnlyManifestFiles:!1,showOnlyOwnedFiles:!1,showVendoredFiles:!0,showViewedFiles:!0},filtersInteractedWith:!1},diffFilterActions:{updateDiffFilter:(n,i)=>{e({diffFilter:{...t().diffFilter,state:{...t().diffFilter.state,...n},filtersInteractedWith:t().diffFilter.filtersInteractedWith||!!i}},void 0,"updateFilters")},clearAllFilters:()=>{e({diffFilter:{...t().diffFilter,state:{...t().diffFilter.state,filterText:"",unselectedFileExtensions:new Set,showOnlyOwnedFiles:!1,showDeletedFiles:!0,showOnlyManifestFiles:!1,showVendoredFiles:!0,showViewedFiles:!0},filtersInteractedWith:!0}},void 0,"clearAllFilters")}}}))(...t),...(({initialDiffSummaries:e,initialSummariesViewedStatus:t,initialSummariesViewedCount:n})=>(i,a)=>({diffSummaries:e,summariesViewedCount:n,summariesViewedStatus:t,codeowners:void 0,getPathDigestFromThreadID:e=>{for(let t of Object.values(a().diffSummaries))if(t.markersMap){for(let[n,i]of Object.entries(t.markersMap))if(i.threads.some(t=>Number(t.id)===Number(e)))return t.pathDigest}},getPathDigestFromAnnotationID:e=>{for(let t of Object.values(a().diffSummaries))if(t.markersMap){for(let[n,i]of Object.entries(t.markersMap))if(i.annotations.some(t=>t.id===e))return t.pathDigest}},diffSummariesActions:{setDiffSummaries:e=>{i({diffSummaries:e},void 0,"updateDiffSummaries")},setDiffViewed:(e,t)=>{i(n=>n.diffSummaries?{summariesViewedStatus:(0,d.jM)(n.summariesViewedStatus,n=>{n[e]=t}),summariesViewedCount:n.summariesViewedCount+(t?1:-1),diffSummaries:(0,d.jM)(n.diffSummaries,n=>{n[e]&&(n[e].markedAsViewed=t)})}:n)},onCommentThreadAdded:({path:e,diffLineKey:t,startPosition:n,threadID:a})=>{i((0,d.jM)(i=>{if(!i.diffSummaries)return;let s=i.diffSummaries[e];if(!s)return;let r=s.markersMap??{};r[t]||(r[t]={threads:[],annotations:[]}),r[t].threads.push({id:parseInt(a),start:n}),s.totalCommentsCount=(s.totalCommentsCount||0)+1}),void 0,"commentAddedForDiffSummary")},onCommentThreadDeleted:({path:e,threadID:t})=>{i((0,d.jM)(n=>{if(!n.diffSummaries)return;let i=n.diffSummaries[e];if(i&&i?.totalCommentsCount&&i?.markersMap)for(let[e,n]of Object.entries(i.markersMap))n.threads=n.threads.filter(e=>e.id!==parseInt(t)),0===n.threads.length&&0===n.annotations.length&&delete i.markersMap[e]}),void 0,"commentDeletedForDiffSummary")}}}))(e)(...t),...(({markers:e})=>(t,n)=>({markers:e,getThread:(e,t,i)=>{let a=n().markers;if(a)return a[t]?.[i]?.threads?.find(t=>Number(t.id)===e)},getThreadFromCommentID:e=>{let t=n().markers;if(!t)return;let i=Object.values(t).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??[]));if(i){for(let t of Object.values(i))if(t?.commentsData?.comments.some(t=>t.databaseId===e))return t}},getAnnotationFromID:e=>{let t=n().markers;if(!t)return;let i=Object.values(t).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??[]));if(i){for(let t of Object.values(i))if(t.databaseId===e)return t}},markersActions:{updateThread:(e,i,a,s)=>{let r=n().markers;if(!r)return;let l=s(r[i]?.[a]?.threads?.find(t=>Number(t.id)===e));l&&t({markers:(0,d.jM)(r,t=>{let n=t[i]?.[a]?.threads?.findIndex(t=>Number(t.id)===e);if(void 0===n||-1===n)t[i]||(t[i]={}),t[i][a]||(t[i][a]={threads:[],annotations:[]}),t[i][a].threads.push(l);else if(t[i]&&t[i][a]&&-1!==n){let e=l.positioning??t[i][a].threads[n]?.positioning,s=l.subject??t[i][a].threads[n]?.subject,r={...l,positioning:e,subject:s};t[i][a].threads[n]=r}})},void 0,"updateThread")},updateThreads:e=>{let i=n().markers;i&&t({markers:(0,d.jM)(i,t=>{for(let n of Object.keys(i)){let i=t[n];if(i)for(let t of Object.keys(i)){let n=i[t];if(!n)continue;let a=n.threads;a&&(n.threads=e(a))}}})})},deleteThreadComment:(e,i,a,s)=>{let r="not_found",l=n().markers;return l&&t({markers:(0,d.jM)(l,t=>{let n=t[a]?.[s]?.threads?.find(t=>Number(t.id)===e);if(!n){r="not_found";return}let l=n.commentsData,o=l?.comments.filter(e=>e.id!==i)??[];if(!l||l.comments.length===o.length){r="not_found";return}if(0===o.length){r="thread_deleted";let n=t[a]?.[s]?.threads;if(n){let t=n.findIndex(t=>Number(t.id)===e);-1!==t&&n.splice(t,1)}}else r="comment_deleted",l&&(l.comments=o)})},void 0,"deleteThreadComment"),r},updateThreadComment:({threadID:e,filePath:i,lineMarkersKey:a,match:s,transform:r})=>{let l=n().markers;l&&t({markers:(0,d.jM)(l,t=>{let n,l=t[i]?.[a]?.threads?.find(t=>Number(t.id)===e);if(!l)return;let o=l.commentsData,d=o?.comments.findIndex(s);"number"==typeof d&&-1!==d&&(n=o?.comments[d]);let c=r(n);c&&(-1===d||"number"!=typeof d?o?.comments.push(c):o&&o.comments&&(o.comments[d]=c))})},void 0,"updateThreadComment")}}}))(e)(...t),...(({prxFilesLiteThrottle:e,prxFilesMediumThrottle:t,initialDiffSummaries:n,initialLoadedPathDigests:i,selectedPathDigest:a})=>(s,r)=>{let l;return l=t?100:50*!!e,{entries:m({diffSummaries:n,loadedPathDigests:i,loadingPathDigests:new Set,selectedPathDigest:a}),selectedPathDigest:a,getSelectedPathDigest:()=>r().selectedPathDigest,progressiveDiffQueue:[],queueRunning:!1,internalProgressiveDiffsActions:{loadSelectedEntries:(0,f.n)(async e=>{if(0===e.length)return;let t=e.map(e=>e.path),n=e.map(e=>e.pathDigest),i=r().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest),a=r().entries.filter(e=>e.loadingStatus===c.s.Loading).map(e=>e.pathDigest);s(e=>({entries:m({diffSummaries:e.diffSummaries,loadedPathDigests:new Set(i),loadingPathDigests:new Set([...a,...n]),selectedPathDigest:e.selectedPathDigest})}),void 0,"loadSelectedEntries#preFetch");let{loadDiffEntries:l}=r().diffEntriesActions,o=(0,u.i)({paths:new Set(t),diffSummaries:r().diffSummaries}),d=await l({paths:t,contextRanges:o});if(!d||0===d.length){let e=[...r().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest)],t=r().entries.filter(e=>e.loadingStatus===c.s.Loading).map(e=>e.pathDigest);return s({entries:m({diffSummaries:r().diffSummaries,loadedPathDigests:new Set(e),loadingPathDigests:new Set(t),selectedPathDigest:r().selectedPathDigest})},void 0,"loadSelectedEntries#postFetch#noAPIData")}let h=d.map(e=>e.pathDigest),f=[...r().entries.filter(e=>e.loadingStatus===c.s.Loaded).map(e=>e.pathDigest),...h],p=r().entries.filter(e=>e.loadingStatus===c.s.Loading).filter(e=>!h.includes(e.pathDigest)).map(e=>e.pathDigest);s(e=>({...e,entries:m({diffSummaries:r().diffSummaries,loadedPathDigests:new Set(f),loadingPathDigests:new Set(p),selectedPathDigest:r().selectedPathDigest})}),void 0,"loadSelectedEntries#postFetch")},l),enqueue:e=>{s(t=>({...t,progressiveDiffQueue:[...t.progressiveDiffQueue,e]}),void 0,"enqueue")},processQueue:async()=>{let e=()=>(0,p.H)(()=>r().internalProgressiveDiffsActions.processQueue(),{timeout:20}),t=r().progressiveDiffQueue;if(0===t.length)return r().entries?.some(e=>e.loadingStatus===c.s.Loading||e.loadingStatus===c.s.NotLoaded)?e():s(e=>({...e,queueRunning:!1}),void 0,"stopQueue");let[n,...i]=t.filter((e,t,n)=>t===n.findIndex(t=>t.startingAt.path===e.startingAt.path));s(e=>({...e,progressiveDiffQueue:i}),void 0,"processQueue#cleanQueue");let a=h({progressiveDiffEntries:r().entries,startingAt:n?.startingAt,preferAnySoloEntry:n?.preferAnySoloEntry});return await r().internalProgressiveDiffsActions.loadSelectedEntries(a),e()}},progressiveDiffsActions:{startQueue:()=>{r().queueRunning||(s(e=>({...e,queueRunning:!0}),void 0,"startQueue"),r().internalProgressiveDiffsActions.processQueue())},loadMore:async(e,{preferAnySoloEntry:t}={})=>{if(e)return r().internalProgressiveDiffsActions.enqueue({startingAt:e,preferAnySoloEntry:t});let n=h({progressiveDiffEntries:r().entries,startingAt:e,preferAnySoloEntry:t});return r().internalProgressiveDiffsActions.loadSelectedEntries(n)},updateSelectedPathDigest:e=>{s(t=>({...t,selectedPathDigest:e}),void 0,"updateSelectedPathDigest")},updateSelectedPathDigestAndFetch:e=>{s(t=>({...t,selectedPathDigest:e}),void 0,"updateSelectedPathDigestAndFetch");let t=r().entries.find(t=>t.pathDigest===e);if(t&&t.loadingStatus!==c.s.Loaded)return r().internalProgressiveDiffsActions.loadSelectedEntries([t])}}}})(e)(...t),...(({collapsedFilesMap:e})=>(t,n)=>({collapsedFilesMap:e,getCollapsedDiffStatus:e=>n().collapsedFilesMap?.[e]??!1,filesCollapsedStatusActions:{updateFileCollapsedStatus:(e,i)=>{let a=n().collapsedFilesMap;a&&t({collapsedFilesMap:(0,d.jM)(a,t=>{t[e]=i})},void 0,"updateFileCollapsedStatus")},updateAllFilesCollapsedStatus:e=>{let i=n().collapsedFilesMap;i&&t({collapsedFilesMap:(0,d.jM)(i,t=>{for(let n of Object.keys(t))t[n]=e})},void 0,"updateAllFilesCollapsedStatus")}}}))(e)(...t),...(({pendingReview:e})=>(t,n)=>({pendingReview:e,pendingReviewActions:{addPendingComment:e=>{let i=n().pendingReview;i&&t({pendingReview:(0,d.jM)(i,t=>{t.pendingReviewIDs||(t.pendingReviewIDs=[]),t.pendingReviewIDs.push(e)})},void 0,"addPendingComment")},removePendingComment:e=>{let i=n().pendingReview;i&&t({pendingReview:(0,d.jM)(i,t=>{let n=t.pendingReviewIDs?.filter(t=>t!==e);t.pendingReviewIDs=n})},void 0,"removePendingComment")},clearPendingReview:()=>{let e=n().pendingReview;e&&t({pendingReview:(0,d.jM)(e,e=>{e.id=void 0,e.pendingReviewIDs=[],e.comments=[]})},void 0,"clearPendingReview")}}}))(e)(...t),...(({basePath:e,diffEntries:t,baseOid:n,headOid:i,selectedCommitRange:a})=>(s,r)=>{let l=a??{baseOid:n,headOid:i},o=(0,C.S)();for(let[n,i]of Object.entries(t)){let t=L(e,i.path,l.baseOid,l.headOid);o.setQueryData(t,()=>i.diffLines)}return{diffEntries:t,diffEntriesActions:{updateDiffEntries:t=>{let n=r().diffEntries??{},i={};for(let n of t){let t=L(e,n.path,r().comparisonInfo.effectiveRange.baseOid,r().comparisonInfo.effectiveRange.headOid);o.setQueryData(t,n.diffLines),i[n.path]=n}s({diffEntries:(0,d.jM)(n,e=>{for(let t of Object.keys(i))i[t]&&(e[t]=i[t])})},void 0,"updateDiffEntriesInMap")},loadDiffEntries:async t=>{var n;let i=await (n={basePath:e,...t,...r().comparisonInfo,isComparisonOutdated:r().isComparisonOutdated},(0,_.G7)("pr_sfv_new_diff_fetch")?I(n):S(n));return i&&0!==i.length?(r().diffEntriesActions.updateDiffEntries(i),i):[]},fetchContextLines:async({path:t,contextLineRanges:n,w:i="0"})=>{let a=L(e,t,r().comparisonInfo.effectiveRange.baseOid,r().comparisonInfo.effectiveRange.headOid),l=r().diffEntries[t];l&&await o.fetchQuery({queryKey:a,queryFn:async()=>{let d=await D({contextLineRanges:n,basePath:e,path:t,w:i,...r().comparisonInfo}),c=l.diffLines,u=o.setQueryData(a,e=>c=function(e,t){let n=new Map;for(let t of e){let e=`${t.left}-${t.right}`;n.set(e,t)}return t.map(e=>{let t=`${e.left}-${e.right}`,i=n.get(t);return i?{...e,position:i.position,displayNoNewLineWarning:i.displayNoNewLineWarning}:{...e,position:null,threadsData:void 0}})}(e??l.diffLines,d?.diffEntryLines??[]));return s(e=>({...e,diffEntries:{...e.diffEntries,[t]:{...l,diffLines:c}}}),void 0,"addContextLinesToDiffEntry"),u}})}}}})(e)(...t),...(({markers:e})=>(t,n)=>{let i,a,s=(0,y.Gl)(),r=(0,y.e3)();if(e){if(s){let t=Object.values(e||{}).flatMap(e=>Object.values(e).flatMap(e=>e?.threads??[]));if(t){let e=Number(s);for(let n of Object.values(t)){let t=n?.commentsData?.comments;if(n&&t)for(let s of t)Number(s.databaseId)===e&&(i=n.id,a=e)}}}else if(r){let t=Object.values(e).flatMap(e=>Object.values(e).flatMap(e=>e?.annotations??[]));if(t){let e=Number(r);for(let n of Object.values(t))Number(n.databaseId)===e&&(i=n.id)}}}return{markerAndDiffNavigation:{markerId:i,commentId:a,getCommentId:()=>n().markerAndDiffNavigation.commentId,getMarkerId:()=>n().markerAndDiffNavigation.markerId},markerAndDiffNavigationActions:{navigateToSelectedComment:e=>{let i=n().getThreadFromCommentID(e);if(i){let a=n().getPathDigestFromThreadID(i.id);n().progressiveDiffsActions.updateSelectedPathDigestAndFetch(a),t(t=>({markerAndDiffNavigation:{...t.markerAndDiffNavigation,commentId:e,markerId:i?.id}}))}},navigateToSelectedAnnotation:e=>{let i=n().getAnnotationFromID(e);if(i){let a=n().getPathDigestFromAnnotationID(e);n().progressiveDiffsActions.updateSelectedPathDigestAndFetch(a),t(e=>({markerAndDiffNavigation:{...e.markerAndDiffNavigation,commentId:void 0,markerId:i.id}}))}},handleHashUpdate:()=>{let e=(0,y.Gl)(),t=(0,y.e3)(),i=(0,y.jU)(window.location.hash),a=n(),s=a.markerAndDiffNavigation.commentId,r=a.markerAndDiffNavigation.markerId,l=a.selectedPathDigest;if(e&&e!==s)a.markerAndDiffNavigationActions.navigateToSelectedComment(e);else if(t){let e=a.getAnnotationFromID(t),n=e?.id;n&&n!==r&&a.markerAndDiffNavigationActions.navigateToSelectedAnnotation(t)}else i&&i!==l?a.progressiveDiffsActions.updateSelectedPathDigestAndFetch(i):e||t||i||!l||a.progressiveDiffsActions.updateSelectedPathDigestAndFetch(void 0)}}}})(e)(...t),...(({isSingleFileMode:e,commentsPreference:t})=>n=>({isSingleFileMode:e,commentsPreference:t,settingsActions:{updateCommentsPreference:e=>{n(()=>({commentsPreference:e}))}}}))(e)(...t),...(({pullRequest:e})=>(t,n)=>({pullRequest:{state:e.state,basePath:e.pathName,id:e.id,number:e.number},pullRequestActions:{updatePullRequestState:e=>{t({pullRequest:{...n().pullRequest,state:e}},void 0,"pullRequest#updatePullRequestState")}}}))(e)(...t),...(({baseRepository:e})=>()=>({repository:{baseRepository:{id:e.id,ownerLogin:e.ownerLogin,name:e.name}}}))(e)(...t),...(t=>({suggestionBatch:{activeBatch:e.initialActiveBatch??[],isSuggestionBatchPending:(e.initialActiveBatch?.length??0)>0},suggestionBatchActions:{addSuggestionToBatch:e=>t(t=>{if(t.suggestionBatch.activeBatch.some(t=>t.commentDatabaseId===e.commentDatabaseId&&t.suggestionIndex===e.suggestionIndex))return t;let n=[...t.suggestionBatch.activeBatch,e];return{suggestionBatch:{...t.suggestionBatch,activeBatch:n,isSuggestionBatchPending:n.length>0}}}),removeSuggestionFromBatch:e=>t(t=>{let n=t.suggestionBatch.activeBatch.filter(t=>t.commentDatabaseId!==e.commentDatabaseId||t.suggestionIndex!==e.suggestionIndex);return{suggestionBatch:{...t.suggestionBatch,activeBatch:n,isSuggestionBatchPending:n.length>0}}}),clearSuggestionBatch:()=>t(e=>({suggestionBatch:{...e.suggestionBatch,activeBatch:[],isSuggestionBatchPending:!1}})),loadActiveBatchFromStorage:e=>t(t=>({suggestionBatch:{...t.suggestionBatch,activeBatch:e,isSuggestionBatchPending:e.length>0}}))}}))(...t)}),{name:"pull-request-store"}));try{E.displayName||(E.displayName="PullRequestStoreContext")}catch{}try{R.displayName||(R.displayName="PullRequestStoreProvider")}catch{}},85933:(e,t,n)=>{function i(){return!!document.querySelector('react-app[data-lazy="true"]')}function a(){return!!document.querySelector('react-app[data-alternate="true"]')}function s(){return!!document.querySelector("header.AppHeader")}function r(){return performance.getEntriesByType("resource").some(e=>"fetch"===e.initiatorType&&e.name.includes("_graphql?"))}function l(){return performance.getEntriesByType("resource").some(e=>"script"===e.initiatorType)}n.d(t,{Dk:()=>s,NT:()=>c,X:()=>d,_:()=>i,aE:()=>r,u$:()=>a,xF:()=>l}),n(69599);let o=null;function d(){return o}function c(e){o=e}},86909:(e,t,n)=>{n.d(t,{YH:()=>N,Gt:()=>_,Vv:()=>D});var i,a=n(74848),s=n(68273),r=n(16522),l=n(77430),o=n(73017),d=n(38621),c=n(26108),u=n(98552),m=n(69497),h=n(21373),f=n(34164),p=n(48505);let g="Annotation-module__annotation--KlX5M",y="Annotation-module__annotationSource--fZyli",x="Annotation-module__annotationMessage--gFM9M",v="Annotation-module__inlineReviewThreadHeading--Qj9j8";var b=n(79036),j=n(96540),w=n(82075),C=n(71315);let _={[p.UZ.Failure]:(0,a.jsx)(d.StopIcon,{className:"fgColor-danger mr-2"}),[p.UZ.Warning]:(0,a.jsx)(d.AlertIcon,{className:"fgColor-attention mr-2"}),[p.UZ.Notice]:(0,a.jsx)(d.InfoIcon,{className:"fgColor-muted mr-2"})},N=(0,s.GV)()?function(e){let t,n,i,s,p,v,j,w=(0,r.c)(31),{annotation:C,inSidePanel:_}=e,N=_?"h3":"h2",{isCollapsed:S,handleToggleCollapsed:L}=D(C),T=b.GF[C.annotationLevel];return w[0]!==T.borderColor?(t=(0,f.$)("p-1 bgColor-default",T.borderColor,g),w[0]=T.borderColor,w[1]=t):t=w[1],w[2]!==L||w[3]!==_||w[4]!==S?(n=!_&&(0,a.jsx)(c.K,{"aria-label":S?"Expand annotation":"Collapse annotation",icon:S?d.ChevronRightIcon:d.ChevronDownIcon,size:"small",variant:"invisible",onClick:L}),w[2]=L,w[3]=_,w[4]=S,w[5]=n):n=w[5],w[6]!==C||w[7]!==_?(i=!_&&(0,a.jsx)(I,{annotation:C}),w[6]=C,w[7]=_,w[8]=i):i=w[8],w[9]!==C||w[10]!==_?(s=_&&(0,a.jsx)(k,{annotation:C}),w[9]=C,w[10]=_,w[11]=s):s=w[11],w[12]!==n||w[13]!==i||w[14]!==s?(p=(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[n,i,s]}),w[12]=n,w[13]=i,w[14]=s,w[15]=p):p=w[15],w[16]!==N||w[17]!==C.annotationLevel||w[18]!==C.appAvatarAltText||w[19]!==C.appAvatarUrl||w[20]!==C.checkRun||w[21]!==C.checkSuiteName||w[22]!==C.message||w[23]!==C.title||w[24]!==_||w[25]!==S?(v=(!S||_)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"ml-4 mt-2",children:C.title&&(0,a.jsx)(u.A,{weight:"semibold",size:"medium",className:b.GF[C.annotationLevel].primaryColorClass,children:C.title})}),(0,a.jsxs)(N,{className:"sr-only",children:[b.GF[C.annotationLevel].ariaLabel,": ",C.title]}),(0,a.jsx)("div",{className:"mb-3 mt-1 ml-4",children:C.message&&(0,a.jsx)(o.$6,{html:C.message,className:x})}),(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4 pr-2 pb-2",children:[(0,a.jsxs)("div",{className:y,children:[(0,a.jsx)(l.r,{src:C.appAvatarUrl,alt:C.appAvatarAltText}),(0,a.jsxs)(m.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${C.checkSuiteName} / ${C.checkRun.name}`,children:[(0,a.jsx)(u.A,{weight:"semibold",size:"small",children:C.checkSuiteName})," ","/ ",(0,a.jsx)(u.A,{size:"small",children:C.checkRun.name})]})]}),C.checkRun.detailsUrl&&(0,a.jsx)(h.Q,{as:"a",href:C.checkRun.detailsUrl,size:"small",children:"View details"})]})]}),w[16]=N,w[17]=C.annotationLevel,w[18]=C.appAvatarAltText,w[19]=C.appAvatarUrl,w[20]=C.checkRun,w[21]=C.checkSuiteName,w[22]=C.message,w[23]=C.title,w[24]=_,w[25]=S,w[26]=v):v=w[26],w[27]!==t||w[28]!==p||w[29]!==v?(j=(0,a.jsxs)("div",{className:t,children:[p,v]}),w[27]=t,w[28]=p,w[29]=v,w[30]=j):j=w[30],j}:function({annotation:e,inSidePanel:t}){let n=(0,j.useMemo)(()=>t?"h3":"h2",[t]),{isCollapsed:i,handleToggleCollapsed:s}=D(e);return(0,a.jsxs)("div",{className:(0,f.$)("p-1 bgColor-default",b.GF[e.annotationLevel].borderColor,g),children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[!t&&(0,a.jsx)(c.K,{"aria-label":i?"Expand annotation":"Collapse annotation",icon:i?d.ChevronRightIcon:d.ChevronDownIcon,size:"small",variant:"invisible",onClick:s}),!t&&(0,a.jsx)(I,{annotation:e}),t&&(0,a.jsx)(k,{annotation:e})]}),(!i||t)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"ml-4 mt-2",children:e.title&&(0,a.jsx)(u.A,{weight:"semibold",size:"medium",className:b.GF[e.annotationLevel].primaryColorClass,children:e.title})}),(0,a.jsxs)(n,{className:"sr-only",children:[b.GF[e.annotationLevel].ariaLabel,": ",e.title]}),(0,a.jsx)("div",{className:"mb-3 mt-1 ml-4",children:e.message&&(0,a.jsx)(o.$6,{html:e.message,className:x})}),(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4 pr-2 pb-2",children:[(0,a.jsxs)("div",{className:y,children:[(0,a.jsx)(l.r,{src:e.appAvatarUrl,alt:e.appAvatarAltText}),(0,a.jsxs)(m.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${e.checkSuiteName} / ${e.checkRun.name}`,children:[(0,a.jsx)(u.A,{weight:"semibold",size:"small",children:e.checkSuiteName})," ","/ ",(0,a.jsx)(u.A,{size:"small",children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,a.jsx)(h.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})]})},S=(0,s.GV)()?function(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("span",{className:"text-semibold fgColor-default",children:i}),n[0]=i,n[1]=t):t=n[1],t}:function({children:e}){return(0,a.jsx)("span",{className:"text-semibold fgColor-default",children:e})},I=(0,s.GV)()?function(e){let t,n,i=(0,r.c)(6),{annotation:s}=e,l=_[s.annotationLevel],o=b.GF[s.annotationLevel];return i[0]!==s.endLine?(t=(0,a.jsxs)(S,{children:["R",s.endLine]}),i[0]=s.endLine,i[1]=t):t=i[1],i[2]!==l||i[3]!==o.ariaLabel||i[4]!==t?(n=(0,a.jsxs)("h2",{className:v,children:[l,o.ariaLabel," on line"," ",t]}),i[2]=l,i[3]=o.ariaLabel,i[4]=t,i[5]=n):n=i[5],n}:function({annotation:e}){return(0,a.jsxs)("h2",{className:v,children:[_[e.annotationLevel],b.GF[e.annotationLevel].ariaLabel," on line"," ",(0,a.jsxs)(S,{children:["R",e.endLine]})]})},k=(0,s.GV)()?function(e){let t,n,i=(0,r.c)(3),{annotation:s}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.$)(v,"ml-4","pt-1","pl-0"),i[0]=t):t=i[0];let l=b.GF[s.annotationLevel];return i[1]!==l.ariaLabel?(n=(0,a.jsx)("div",{className:t,children:(0,a.jsx)(S,{children:l.ariaLabel})}),i[1]=l.ariaLabel,i[2]=n):n=i[2],n}:function({annotation:e}){return(0,a.jsx)("div",{className:(0,f.$)(v,"ml-4","pt-1","pl-0"),children:(0,a.jsx)(S,{children:b.GF[e.annotationLevel].ariaLabel})})};function L(e){return`AnnotationIsCollapsed_${e.path}_${e.endLine}_${e.annotationLevel}_${e.title}`}let D=(0,s.GV)()?function(e){let t,n,i,a,s,l=(0,r.c)(10);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,w.A)("localStorage"),l[0]=t):t=l[0];let o=t,[d,c]=(0,j.useState)(!1);l[1]!==e?(n=()=>{let t=localStorage.getItem(L(e));null!==t&&c(JSON.parse(t))},i=[e],l[1]=e,l[2]=n,l[3]=i):(n=l[2],i=l[3]),(0,j.useEffect)(n,i),l[4]!==e||l[5]!==d?(a=()=>{C.cg?.requestAnimationFrame(()=>{o.setItem(L(e),JSON.stringify(!d))}),c(T)},l[4]=e,l[5]=d,l[6]=a):a=l[6];let u=a;return l[7]!==u||l[8]!==d?(s={isCollapsed:d,handleToggleCollapsed:u},l[7]=u,l[8]=d,l[9]=s):s=l[9],s}:function(e){let t=(0,w.A)("localStorage"),[n,i]=(0,j.useState)(!1);return(0,j.useEffect)(()=>{let t=localStorage.getItem(L(e));null!==t&&i(JSON.parse(t))},[e]),{isCollapsed:n,handleToggleCollapsed:()=>{C.cg?.requestAnimationFrame(()=>{t.setItem(L(e),JSON.stringify(!n))}),i(e=>!e)}}};function T(e){return!e}try{N.displayName||(N.displayName="Annotation")}catch{}try{(i=AnnotationHeadingTag).displayName||(i.displayName="AnnotationHeadingTag")}catch{}try{S.displayName||(S.displayName="Emphasis")}catch{}try{I.displayName||(I.displayName="AnnotationBanner")}catch{}try{k.displayName||(k.displayName="SidePanelAnnotationBanner")}catch{}},87255:(e,t,n)=>{n.d(t,{Y:()=>C});var i=n(74848),a=n(16522),s=n(70170),r=n(53419),l=n(29731),o=n(83494),d=n(96379),c=n(56149),u=n(86877),m=n(10576),h=n(21373),f=n(57387),p=n(96540),g=n(40961),y=n(2635),x=n(33592),v=n(38621),b=n(5524);let j={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}};function w(e){let t,n,s,r,l,o,d,c=(0,a.c)(18),{ref:u,...m}=e,{onSelect:h}=m,[f,g]=(0,p.useState)(!1);c[0]!==f?(t=()=>g(!f),c[0]=f,c[1]=t):t=c[1];let y=t;c[2]===Symbol.for("react.memo_cache_sentinel")?(n={marginBottom:"1px"},c[2]=n):n=c[2];let x=b.l,w=f&&Object.entries(j)?.map(e=>{let[t,n]=e;return(0,i.jsxs)(b.l.Item,{"aria-label":`${n.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>h(t,n.body),children:[(0,i.jsx)(v.PlusIcon,{}),t]},t)});c[3]!==x||c[4]!==w?(s=(0,i.jsx)(x,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:w}),c[3]=x,c[4]=w,c[5]=s):s=c[5];let C=f?"Hide templates":"Show templates";return c[6]===Symbol.for("react.memo_cache_sentinel")?(r={border:"1px solid transparent"},c[6]=r):r=c[6],c[7]!==f?(l=f?(0,i.jsx)(v.XIcon,{}):(0,i.jsx)(v.LightBulbIcon,{}),c[7]=f,c[8]=l):l=c[8],c[9]!==l||c[10]!==C||c[11]!==y?(o=(0,i.jsx)(b.l,{className:"d-flex flex-column flex-justify-end",children:(0,i.jsx)(b.l.Item,{"aria-label":C,"data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:r,onSelect:y,children:l})}),c[9]=l,c[10]=C,c[11]=y,c[12]=o):o=c[12],c[13]!==o||c[14]!==u||c[15]!==n||c[16]!==s?(d=(0,i.jsxs)("div",{ref:u,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:n,children:[s,o]}),c[13]=o,c[14]=u,c[15]=n,c[16]=s,c[17]=d):d=c[17],d}try{w.displayName||(w.displayName="PersonalInstructionsTemplates")}catch{}let C=({onDismiss:e,returnFocusRef:t})=>{let n=(0,y.Pk)(),v=(0,x.b)(),[b,j]=(0,p.useState)(n.personalInstructions??""),[C,N]=(0,p.useState)(void 0),[S,I]=(0,p.useState)(!1),k=(0,p.useRef)(null),L=(0,p.useRef)(null),[D,T]=(0,p.useState)(""),E=((e,t)=>{let n,i,r=(0,a.c)(4),[l,o]=(0,p.useState)(48);return r[0]!==e||500!==r[1]?(n=()=>{let t=(0,s.s)(()=>{e?.current&&o(e.current.clientHeight??48)},500),n=new ResizeObserver(t);return e?.current&&n.observe(e.current),()=>{t.cancel(),n?.disconnect?.()}},i=[e,500],r[0]=e,r[1]=500,r[2]=n,r[3]=i):(n=r[2],i=r[3]),(0,p.useEffect)(n,i),l})(L);(0,p.useLayoutEffect)(()=>{k?.current&&(k.current.scrollTop=k.current.scrollHeight)},[b]);let A=(0,p.useCallback)(async()=>{if(!S){I(!0),D&&(0,r.BI)("copilot_personal_instruction_template_usage",{content:D});try{let t=await (0,d.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:b}});if(t.ok)(0,r.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),v.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:b}),(0,g.flushSync)(()=>e());else{let e=await t.json();N(String(e.errorMessage))}}catch{N("An error occurred while saving your personal instructions.")}finally{I(!1)}}},[S,b,v,e,D]),R=(e,t)=>{t&&(j(b?`${b}
${t}`:t),T(e),k?.current?.focus())},O=()=>{A()},P=(0,p.useCallback)(()=>{(0,r.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,g.flushSync)(()=>e())},[e]);return(0,i.jsx)(c.ZL,{children:(0,i.jsx)(f.l,{onClose:P,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",returnFocusRef:t,renderBody:()=>(0,i.jsx)(f.l.Body,{children:(0,i.jsx)("form",{onSubmit:A,children:(0,i.jsxs)(u.A,{children:[(0,i.jsx)(u.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,i.jsx)("div",{className:"width-full position-relative",children:(0,i.jsxs)(o.tL,{commands:{"github:submit-form":O},children:[(0,i.jsx)(m.Ay,{ref:k,className:"width-full",style:{paddingBottom:`${E}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:b,validationStatus:C||b.length>4e3?"error":void 0,...(0,l.G)("prompt-input"),onChange:e=>{j(e.target.value),N(void 0)}}),(0,i.jsx)(w,{ref:L,onSelect:R})]})}),(0,i.jsx)(_,{text:b,promptCharLimit:4e3}),C&&(0,i.jsx)(u.A.Validation,{variant:"error",children:(0,i.jsx)("span",{...(0,l.G)("error-message"),children:C})})]})})}),renderFooter:()=>(0,i.jsxs)("div",{className:"PersonalInstructionsDialog-module__footerContainer--T9wxr",children:[(0,i.jsx)(h.Q,{variant:"default",onClick:P,children:"Cancel"}),(0,i.jsx)(h.Q,{loading:S,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:A,children:"Save"})]})})})};function _(e){let t,n,s,r,o=(0,a.c)(10),{text:d,promptCharLimit:c}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.G)("current-character-count"),o[0]=t):t=o[0],o[1]!==d.length?(n=(0,i.jsx)("span",{className:"text-tabular-nums",...t,children:d.length}),o[1]=d.length,o[2]=n):n=o[2],o[3]!==c||o[4]!==n?(s=(0,i.jsxs)(i.Fragment,{children:[n," ","/ ",c," characters"]}),o[3]=c,o[4]=n,o[5]=s):s=o[5];let m=s;return o[6]!==m||o[7]!==c||o[8]!==d.length?(r=(0,i.jsx)(i.Fragment,{children:d.length>c?(0,i.jsx)(u.A.Validation,{variant:"error",children:m}):(0,i.jsx)(u.A.Caption,{children:m})}),o[6]=m,o[7]=c,o[8]=d.length,o[9]=r):r=o[9],r}try{C.displayName||(C.displayName="PersonalInstructionsDialog")}catch{}try{_.displayName||(_.displayName="CharacterCount")}catch{}},88008:(e,t,n)=>{n.d(t,{CE:()=>s,Ol:()=>r,hW:()=>l});var i=n(95800);function a(e,t){return`${e}-${t}-active-batch-suggestions`}function s(e,t,n){let s=a(e,t);(0,i.SO)(s,JSON.stringify(n))}function r(e,t){let n=a(e,t),s=(0,i.Gq)(n);if(!s)return[];try{let e=JSON.parse(s);return Array.isArray(e)?e:[]}catch{return[]}}function l(e,t){let n=a(e,t);(0,i.Ai)(n)}},89155:(e,t,n)=>{n.d(t,{F:()=>l});var i=n(68273),a=n(16522),s=n(39029),r=n(34261);let l=(0,i.Z6)()?function(e){let t,n=(0,a.c)(1),{refetch:i}=(0,r.W)();n[0]===Symbol.for("react.memo_cache_sentinel")?(t={git_updated:!0,title_updated:!0},n[0]=t):t=n[0],(0,s.og)(e,i,t)}:function(e){let{refetch:t}=(0,r.W)();(0,s.og)(e,t,{git_updated:!0,title_updated:!0})}},90122:(e,t,n)=>{n.d(t,{DO:()=>r,Vq:()=>s,ZP:()=>i});let i=()=>/{{([\w-]+)(?:\.([.\w-]+))?(?:\|([\w-]+))?}}/g,a=`Respond with only the content \u{2014} no introductions, explanations, or extra text.
Only use code blocks when they add semantic value (e.g., mermaid diagrams, specific programming languages), not for general markdown formatting, unless the user explicitly asks for it.`;async function s(e){return[{role:"system",content:a},{role:"user",content:e.content}]}function r(e){return null==e?"":"string"==typeof e?e:e&&"object"==typeof e?JSON.stringify(e,null,2):Array.isArray(e)?e.map(r).join(`
`):String(e)}},90177:(e,t,n)=>{n.d(t,{c:()=>u});var i=n(74848),a=n(16522),s=n(38621),r=n(21373),l=n(94236),o=n(5524),d=n(73783),c=n(26108);function u(e){let t,n,u,m,h=(0,a.c)(40),{ref:f,value:p,isLoading:g,onClick:y,onStop:x,variant:v,disabled:b,iconOnly:j,showPickInputsOption:w,onRunWithInputs:C,leadingVisual:_}=e,N=void 0===v?"invisible":v;h[0]!==g||h[1]!==p?(t=()=>g?"Loading...":p?"Run node":"Run loop",h[0]=g,h[1]=p,h[2]=t):t=h[2];let S=t;h[3]!==g||h[4]!==y||h[5]!==x?(n=e=>{g?x?.(e):y(e)},h[3]=g,h[4]=y,h[5]=x,h[6]=n):n=h[6];let I=n;h[7]!==C?(u=()=>{C?.()},h[7]=C,h[8]=u):u=h[8];let k=u;if(void 0!==w&&w&&!g&&!j){let e,t,n,a,c;return h[9]!==b||h[10]!==I||h[11]!==_||h[12]!==f||h[13]!==N?(e=(0,i.jsx)(r.Q,{ref:f,disabled:b,variant:N,onClick:I,leadingVisual:_,children:"Run"}),h[9]=b,h[10]=I,h[11]=_,h[12]=f,h[13]=N,h[14]=e):e=h[14],h[15]!==b||h[16]!==N?(t=(0,i.jsx)(l.W.Button,{disabled:b,variant:N,icon:s.TriangleDownIcon,"aria-label":"More run options",className:"ExecuteButton-module__executeButtonSplitDropdown--WsP8k"}),h[15]=b,h[16]=N,h[17]=t):t=h[17],h[18]!==k?(n=(0,i.jsx)(l.W.Overlay,{children:(0,i.jsx)(o.l,{children:(0,i.jsx)(o.l.Item,{onSelect:k,children:"Run with custom inputs"})})}),h[18]=k,h[19]=n):n=h[19],h[20]!==t||h[21]!==n?(a=(0,i.jsxs)(l.W,{children:[t,n]}),h[20]=t,h[21]=n,h[22]=a):a=h[22],h[23]!==e||h[24]!==a?(c=(0,i.jsxs)(d.A,{children:[e,a]}),h[23]=e,h[24]=a,h[25]=c):c=h[25],c}if(!j){let e,t=g?"danger":N,n=g?"Stop":"Run";return h[26]!==b||h[27]!==I||h[28]!==_||h[29]!==f||h[30]!==t||h[31]!==n?(e=(0,i.jsx)(r.Q,{ref:f,disabled:b,variant:t,onClick:I,leadingVisual:_,children:n}),h[26]=b,h[27]=I,h[28]=_,h[29]=f,h[30]=t,h[31]=n,h[32]=e):e=h[32],e}let L=S(),D=g?s.SquareFillIcon:s.SyncIcon,T=g?"danger":N;return h[33]!==b||h[34]!==I||h[35]!==f||h[36]!==L||h[37]!==D||h[38]!==T?(m=(0,i.jsx)(c.K,{ref:f,disabled:b,"aria-label":L,icon:D,onClick:I,variant:T}),h[33]=b,h[34]=I,h[35]=f,h[36]=L,h[37]=D,h[38]=T,h[39]=m):m=h[39],m}try{u.displayName||(u.displayName="ExecuteButton")}catch{}},90756:(e,t,n)=>{n.d(t,{R:()=>a,j:()=>LoopError});var i=n(50467);let LoopError=class LoopError extends Error{constructor(e,t){super(e),(0,i._)(this,"httpStatus",void 0),this.httpStatus=t,this.name="LoopError"}};function a(e){return e instanceof LoopError}},91348:(e,t,n)=>{n.d(t,{FT:()=>p,Gx:()=>m,Hx:()=>y,NZ:()=>g,f0:()=>o,kX:()=>h,nT:()=>c});var i=n(31629),a=n(21046),s=n(90122),r=n(39087),l=n(45363);function o(e){let t={nodes:new Map,edges:[],layers:[]};if(!e)return t;for(let n of e){if(!n?.id)continue;let e=u(n.id);t.nodes.set(e,n)}for(let n of e)for(let e of d(n)){let i=u(e);n?.id&&i&&t.edges.push({from:i,to:n.id})}let n=function(e){let t={},n=new Set,i=(s,r=0)=>{try{if(n.has(s))throw Error(`Potential cycle detected at node ${s}`);if(n.add(s),r>100)return(0,a.FF)(`Maximum recursion depth reached for node ${s}`),0;if(void 0!==t[s])return t[s];let l=e.nodes.get(s);if(!l)return t[s]=0,0;let o=d(l);if(o&&0!==o.size){let e=[...o].map(e=>{let t=u(e);return i(t,r+1)});t[s]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===s).map(e=>e.to);0===n.length?t[s]=-1:t[s]=1}return t[s]}finally{n.delete(s)}};for(let[n]of e.nodes)if(!t[n])try{i(n)}catch(e){(0,a.vV)(`Error computing layer for node ${n}:`,e),t[n]=0}let s=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=s);let r=[];for(let[n,i]of Object.entries(t)){let t=e.nodes.get(n);t&&(r[i]||(r[i]=[]),r[i].push(t))}return r.filter(Boolean)}(t);return t.layers=n,t}function d(e){let t=(0,s.ZP)();return new Set((e.content.match(t)||[]).map(e=>e.replace(/[{}]/g,"")))}function c(e){return new Set([...d(e)].map(u))}function u(e){return e.match(/^[^|.]+/)?.[0]??e}let m=(e,t)=>{if(!e||"object"!=typeof e||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:l.C.getMetadata(e.type)?e.type:"text",content:e.content||"",id:(e.id||"").trim()};if("text"===n.type&&(n.metadata=function(e){if((0,i.ir)(e))return r.j[e.metadata.inputType]?e.metadata:{inputType:"text"}}(e)||{inputType:"text"}),"string"!=typeof n.content&&(n.content=""),(0,i.jq)(n)){let e=t.find(e=>e.id===n.loopId);if(e){let t=n.loopInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.loopInputValues=e.nodes?.filter(e=>(0,i.ir)(e)).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},h=(e,t)=>{var n;let i={...n=e,nodes:n.nodes.map(f)};return{...i,nodes:(i.nodes||[]).map(e=>m(e,t)).filter(e=>null!==e)}};function f(e){return"prompt"===e.type&&"model"in e&&"string"==typeof e.model?{...e,metadata:{model:e.model}}:"text"===e.type&&"inputType"in e?{...e,metadata:function(e){if("type"in e&&"string"==typeof e.type){let t="file"===e.type?"text":e.type;return{...e,inputType:t}}return e}(e.inputType)}:e}function p(e){let t=o(e.nodes);return e.nodes.filter(e=>x(e,t))}function g(e){let t={nodes:new Map,edges:[...e.edges],layers:[...e.layers]};for(let[n,i]of e.nodes)t.nodes.set(n,i);let n=[...e.nodes].filter(([,t])=>x(t,e));if(n.length>0){let e="virtual-output";for(let[,i]of(t.nodes.set(e,{type:"output",id:e}),n))t.edges.push({from:i.id,to:e})}return t}function y(e){return"virtual-output"===e}function x(e,t){return!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id)}},93161:(e,t,n)=>{n.d(t,{D:()=>i});let i={value:null,startedAt:void 0,completedAt:void 0}},93364:(e,t,n)=>{function i(e){return{success:!0,data:e}}function a(e,t){var n;return{success:!1,error:(n=e)?"string"==typeof n?n:"object"!=typeof n?(void 0)??s:"message"in n&&"string"==typeof n.message?n.message:"error"in n&&"string"==typeof n.error?n.error:(void 0)??s:(void 0)??s,httpStatus:t?.status}}n.d(t,{$j:()=>i,YD:()=>a});let s="Unknown error"},93380:(e,t,n)=>{n.d(t,{B:()=>s});var i=n(16522),a=n(96540);function s(e){let t,n,s,r=(0,i.c)(4),[l,o]=(0,a.useState)(e);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>o(!0),r[0]=t):t=r[0];let d=t;r[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>o(!1),r[1]=n):n=r[1];let c=n;return r[2]!==l?(s=[l,d,c],r[2]=l,r[3]=s):s=r[3],s}},93642:(e,t,n)=>{function i(e,t){for(let n of function e(t,n=[]){var i,s;let r;if(""===t)return n;let l=t.match(a());if(!l)return n;let o=l.groups.fence;if(!o)return n;let d=o.includes("~")?"~":"`",c=t.match((r=a([i=d],s=o.length),RegExp(`${r.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${i}{${s},}[ 	]*$`,"ms")));if(!c)return n;let u=0,m=l.groups.indent;""!==m&&(u=m.length);let h=c.groups.suggestion;if(u>0){let e=RegExp(`^ {0,${u}}`,"m");h=h.replace(e,"")}return n.push(h),e(t.slice(c.index+c[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function a(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}n.d(t,{u:()=>i})},95807:(e,t,n)=>{n.d(t,{i:()=>v});var i=n(74848),a=n(68273),s=n(16522),r=n(96379),l=n(21373),o=n(69726),d=n(11196),c=n(96540),u=n(30459),m=n(57224),h=n(70263);let f="PullRequestsProcessingIndicator-module__button--IKkby",p="PullRequestsProcessingIndicator-module__indicator--iNiwb",g="PullRequestsProcessingIndicator-module__text--JUMXg";function y(e,t){return Math.round(e.getTime()-t.getTime())/1e3}let x={stale:!1,latest_unsynced_push_to_head_ref_at:null};function v({processingIndicatorUrl:e,repositoryId:t,pullRequestId:n}){let[a,s]=(0,c.useState)(x),l=(0,h.A)(),o=(0,c.useCallback)(async()=>{try{let t=await (0,r.lS)(e);if(t.ok){let e=await t.json();l()&&s(e)}}catch{l()&&s(x)}},[l,e]);(0,c.useEffect)(()=>{o()},[]);let{stale:d,latest_unsynced_push_to_head_ref_at:u}=a;return(0,i.jsx)("div",{className:"border-left pl-1",children:(0,i.jsx)(m.y,{appName:"pull-requests-processing-indicator",category:"render",metadata:{},children:(0,i.jsx)(b,{pullRequestId:n,repositoryId:t,stale:d,latest_unsynced_push_to_head_ref_at:u})})})}let b=(0,a.Z6)()?function(e){let t,n,a=(0,s.c)(6),{pullRequestId:r,repositoryId:c,stale:m,latest_unsynced_push_to_head_ref_at:h}=e,{sendAnalyticsEvent:x}=(0,u.s)();if(!m||!h)return null;if(a[0]!==h||a[1]!==r||a[2]!==c||a[3]!==x){t=Symbol.for("react.early_return_sentinel");e:{let e=y(new Date,new Date(h));if(e<20||e>=86400){t=null;break e}x("pull_requests.processing_indicator","",{repositoryId:c,pullRequestId:r,secondsSinceLastPush:e})}a[0]=h,a[1]=r,a[2]=c,a[3]=x,a[4]=t}else t=a[4];return t!==Symbol.for("react.early_return_sentinel")?t:(a[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(d.m,{text:"Recent push is being processed and will appear soon",direction:"s",children:(0,i.jsx)(l.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",className:f,children:(0,i.jsxs)("div",{className:p,children:[(0,i.jsx)(o.A,{size:"small"}),(0,i.jsx)("span",{className:g,children:"Processing updates"})]})})}),a[5]=n):n=a[5],n)}:function({pullRequestId:e,repositoryId:t,stale:n,latest_unsynced_push_to_head_ref_at:a}){let{sendAnalyticsEvent:s}=(0,u.s)();if(!n||!a)return null;let r=y(new Date,new Date(a));return r<20||r>=86400?null:(s("pull_requests.processing_indicator","",{repositoryId:t,pullRequestId:e,secondsSinceLastPush:r}),(0,i.jsx)(d.m,{text:"Recent push is being processed and will appear soon",direction:"s",children:(0,i.jsx)(l.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",className:f,children:(0,i.jsxs)("div",{className:p,children:[(0,i.jsx)(o.A,{size:"small"}),(0,i.jsx)("span",{className:g,children:"Processing updates"})]})})}))};try{v.displayName||(v.displayName="PullRequestsProcessingIndicatorWithDataFetching")}catch{}try{b.displayName||(b.displayName="PullRequestsProcessingIndicator")}catch{}},96002:(e,t,n)=>{n.d(t,{u:()=>c});var i=n(74848),a=n(16522),s=n(53419),r=n(74753),l=n(73077),o=n(11680),d=n(79184);function c(){let e,t,n,s,c=(0,a.c)(6),{resetDate:m}=(0,d.xR)();c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(r.s,{children:(0,i.jsx)("h2",{children:"Limit reached"})}),c[0]=e):e=c[0],c[1]!==m?(t=(0,i.jsxs)(i.Fragment,{children:[e,"You have reached your free plan limit. Limit resets on ",m,"."]}),c[1]=m,c[2]=t):t=c[2];let h=t;c[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(l.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:u,children:"Upgrade"}),c[3]=n):n=c[3];let f=n;return c[4]!==h?(s=(0,i.jsx)("div",{className:"FreeChatExceededBanner-module__container--yeDGw",children:(0,i.jsx)(o.l,{variant:"upsell",title:"Limit reached",description:h,hideTitle:!0,primaryAction:f})}),c[4]=h,c[5]=s):s=c[5],s}function u(){(0,s.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{c.displayName||(c.displayName="FreeChatExceededBanner")}catch{}},96868:(e,t,n)=>{n.d(t,{Fj:()=>s,Kh:()=>a,qB:()=>r});var i=n(33026);let a={CANVAS:"canvas",OUTPUT:"output"},s={CHAT:"chat",NODE:"node",ABOUT:"about"},r={focusedNodeId:null,hoveredNodeId:null,view:a.CANVAS,sidePanelView:s.CHAT,version:i.U8,showLinkCopiedBanner:!1,showDuplicatedBanner:!1}},97695:(e,t,n)=>{n.d(t,{H:()=>m});var i=n(68273),a=n(16522),s=n(48845),r=n(20622),l=n(97665),o=n(94747),d=n(69510),c=n(27011),u=n(21067);let m=(0,i.Z6)()?function(e,t){let n,i,m,h,f=(0,a.c)(12),p=(0,c.Kp)();f[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,u.cj)(),f[0]=n):n=f[0];let g=n,y=`${p}/page_data/${r.uT.resolveThread}`,x=(0,l.jE)(),{updateThread:v}=(0,c.an)();return f[1]!==y?(i=async e=>{let{threadId:t}=e,n=await (0,s.q$)(y,{method:"POST",body:{threadId:t}});(0,s.R)(n)},f[1]=y,f[2]=i):i=f[2],f[3]!==p||f[4]!==e||f[5]!==t||f[6]!==x||f[7]!==v?(m=(n,i)=>(v(Number(i.threadId),e,t,e=>{if(e)return{...e,isResolved:!0,resolvedBy:g}}),x.invalidateQueries({queryKey:(0,d.XG)(p)})),f[3]=p,f[4]=e,f[5]=t,f[6]=x,f[7]=v,f[8]=m):m=f[8],f[9]!==i||f[10]!==m?(h={mutationFn:i,onSuccess:m},f[9]=i,f[10]=m,f[11]=h):h=f[11],(0,o.n)(h)}:function(e,t){let n=(0,c.Kp)(),i=(0,u.cj)(),a=`${n}/page_data/${r.uT.resolveThread}`,m=(0,l.jE)(),{updateThread:h}=(0,c.an)();return(0,o.n)({mutationFn:async({threadId:e})=>{let t=await (0,s.q$)(a,{method:"POST",body:{threadId:e}});(0,s.R)(t)},onSuccess:(a,s)=>(h(Number(s.threadId),e,t,e=>{if(e)return{...e,isResolved:!0,resolvedBy:i}}),m.invalidateQueries({queryKey:(0,d.XG)(n)}))})}},99279:(e,t,n)=>{n.d(t,{G:()=>i});let i=n(12435).$h.create("pull-requests")},99519:(e,t,n)=>{n.d(t,{EY:()=>r,qT:()=>s});var i=n(96540);let a=(0,i.createContext)(null),s=a.Provider;function r(){let e=(0,i.useContext)(a);if(!e)throw Error("useLoopsService must be used inside a LoopsServiceProvider");return e}try{a.displayName||(a.displayName="LoopsServiceContext")}catch{}},99993:(e,t,n)=>{n.d(t,{M1:()=>m,_N:()=>f,c_:()=>h});var i=n(16522),a=n(97665),s=n(97286),r=n(3433),l=n(99519),o=n(78456),d=n(33026),c=n(50050),u=n(90756);let m="loop";function h(e,t){return[m,e,t]}function f(e,t){let n,f,y,x,v=(0,i.c)(15),{loopID:b}=(0,r.g)(),j=(0,l.EY)(),w=(0,a.jE)(),C=(0,c.Ud)(g),_=t||C||d.kj;v[0]!==b||v[1]!==_?(n=[m,b,_],v[0]=b,v[1]=_,v[2]=n):n=v[2];let N=n;v[3]!==b||v[4]!==w||v[5]!==j||v[6]!==_?(f=async()=>{if(!b)return null;let e=o.Io.find(e=>e.id===b)??null;if(e)return e;let t=await j.getLoop(b,_);if(!t||!t.success)throw new u.j(t?.error||"Failed to load loop",t?.httpStatus);return t.data.version&&t.data.version!==_&&w.setQueryData(h(t.data.id,t.data.version),t.data),t.data},v[3]=b,v[4]=w,v[5]=j,v[6]=_,v[7]=f):f=v[7];let S=!!b;return v[8]!==e?(y=e&&{select:e},v[8]=e,v[9]=y):y=v[9],v[10]!==N||v[11]!==f||v[12]!==S||v[13]!==y?(x={placeholderData:p,queryKey:N,queryFn:f,enabled:S,...y,staleTime:3e5},v[10]=N,v[11]=f,v[12]=S,v[13]=y,v[14]=x):x=v[14],(0,s.I)(x)}function p(e){return e}function g(e){return e?.version}}}]);
//# sourceMappingURL=22753-4aff582c6b42.js.map