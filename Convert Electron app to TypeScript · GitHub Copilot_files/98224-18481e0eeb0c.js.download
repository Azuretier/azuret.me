"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[98224],{1587:(e,t,n)=>{n.d(t,{K2:()=>r,lg:()=>a,xp:()=>s});let r={APPLY_PATCH:"apply_patch",STR_REPLACE_EDITOR:"str_replace_editor",STR_REPLACE:"str_replace",EDIT:"edit",CREATE:"create",VIEW:"view",INSERT:"insert",UNDO_EDIT:"undo_edit",BASH:"bash",WRITE_BASH:"write_bash",READ_BASH:"read_bash",STOP_BASH:"stop_bash",ASYNC_BASH:"async_bash",READ_ASYNC_BASH:"read_async_bash",STOP_ASYNC_BASH:"stop_async_bash",GREP:"grep",RG:"rg",GLOB:"glob",GITHUB_MCP_SERVER_WEB_SEARCH:"github-mcp-server-web_search",GITHUB_MCP_SERVER_BING_SEARCH:"github-mcp-server-bing_search",COMMIT_CHANGES:"commit_changes",CODE_REVIEW:"code_review",RUN_CUSTOM_SETUP_STEP:"run_custom_setup_step",RUN_SETUP:"run_setup",THINK:"think",SKILL:"skill",REPORT_PROGRESS:"report_progress",REPLY_TO_COMMENT:"reply_to_comment",PROPOSE_WORK:"propose_work",TASK:"task"},s=[r.BASH,r.WRITE_BASH,r.READ_BASH,r.STOP_BASH,r.ASYNC_BASH,r.READ_ASYNC_BASH,r.STOP_ASYNC_BASH],a={[r.APPLY_PATCH]:{getTitle:e=>`Apply ${e} patches`,iconToolName:r.APPLY_PATCH},[r.STR_REPLACE_EDITOR]:{getTitle:e=>`Edit ${e} files`,iconToolName:r.EDIT},[r.STR_REPLACE]:{getTitle:e=>`Edit ${e} files`,iconToolName:r.EDIT},[r.EDIT]:{getTitle:e=>`Edit ${e} files`,iconToolName:r.EDIT},[r.CREATE]:{getTitle:e=>`Create ${e} files`,iconToolName:r.CREATE},[r.VIEW]:{getTitle:e=>`View ${e} files`,iconToolName:r.VIEW},[r.INSERT]:{getTitle:e=>`Insert at ${e} locations`,iconToolName:r.INSERT},[r.UNDO_EDIT]:{getTitle:e=>`Undo ${e} edits`,iconToolName:r.UNDO_EDIT},[r.GREP]:{getTitle:e=>`Search ${e} times`,iconToolName:r.GREP},[r.RG]:{getTitle:e=>`Search ${e} times`,iconToolName:r.GREP},[r.GLOB]:{getTitle:()=>"Find files",iconToolName:r.GLOB},[r.GITHUB_MCP_SERVER_WEB_SEARCH]:{getTitle:e=>`Web search ${e} times`,iconToolName:r.GREP},[r.GITHUB_MCP_SERVER_BING_SEARCH]:{getTitle:e=>`Web search ${e} times`,iconToolName:r.GREP},[r.COMMIT_CHANGES]:{getTitle:e=>`Commit ${e} changes`,iconToolName:r.COMMIT_CHANGES},[r.CODE_REVIEW]:{getTitle:e=>`Review ${e} changes`,iconToolName:r.CODE_REVIEW},[r.RUN_CUSTOM_SETUP_STEP]:{getTitle:()=>"Setting up environment",iconToolName:r.RUN_SETUP},[r.RUN_SETUP]:{getTitle:()=>"Setting up environment",iconToolName:r.RUN_SETUP},[r.THINK]:{getTitle:e=>`Thought ${e} times`,iconToolName:r.THINK},[r.SKILL]:{getTitle:e=>`Activate ${e} skills`,iconToolName:r.SKILL},[r.REPORT_PROGRESS]:{getTitle:e=>`${e} progress updates`,iconToolName:r.REPORT_PROGRESS},[r.REPLY_TO_COMMENT]:{getTitle:e=>`Reply to ${e} comments`,iconToolName:r.REPLY_TO_COMMENT},[r.PROPOSE_WORK]:{getTitle:()=>"Propose Work",iconToolName:r.PROPOSE_WORK},[r.TASK]:{getTitle:e=>`Run ${e} subagent tasks`,iconToolName:r.TASK}}},7892:(e,t,n)=>{n.d(t,{i:()=>a});var r=n(16522),s=n(97286);function a(e){let t,n,a,o,i,l=(0,r.c)(11),{sessions:c,initialData:d}=e;l[0]!==c?(t=c||[],l[0]=c,l[1]=t):t=l[1],l[2]!==t?(n=function(e){let t=new Set;for(let n of e)t.add(n.user_id);return Array.from(t).sort((e,t)=>e-t).join(",")}(t),l[2]=t,l[3]=n):n=l[3];let u=n;return l[4]!==u?(a=["agent-sessions-users",u],o=async()=>{let e=await fetch(`/copilot/agent-sessions/users?user_ids=${encodeURIComponent(u)}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!e.ok)throw Error("Failed to fetch session owners");return(await e.json()).users},l[4]=u,l[5]=a,l[6]=o):(a=l[5],o=l[6]),l[7]!==d||l[8]!==a||l[9]!==o?(i={queryKey:a,queryFn:o,initialData:d},l[7]=d,l[8]=a,l[9]=o,l[10]=i):i=l[10],(0,s.I)(i)}},9238:(e,t,n)=>{n.d(t,{E:()=>_});var r=n(74848),s=n(16522),a=n(38621),o=n(69726),i=n(21373),l=n(69599);let c="ToolHeader-module__summaryButtonMissionControl--MuMQb",d="ToolHeader-module__toggleIcon--Ym361",u="ToolHeader-module__text--SYGGt",m="ToolHeader-module__title--Uw_ur";var p=n(34164),g=n(16425),h=n(53419),f=n(45244);function _(e){let t,n,_,y,x,w,b,C,j,N=(0,s.c)(75),{leadingVisual:v,title:S,path:E,isCollapsed:T,isError:I,isPending:P,isInGroup:k,onModifierClick:H,hasChildren:R}=e,A=void 0!==I&&I,L=void 0!==P&&P,G=void 0!==k&&k,$=void 0===R||R,{variant:O,onToolExpand:M}=(0,g._$)();N[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.G7)("mission_control_use_tool_header_icons"),N[0]=t):t=N[0];let V=t;N[1]!==T||N[2]!==H||N[3]!==M||N[4]!==S?(n=e=>{if(M?.(!!T),(e.altKey||e.metaKey)&&H)return e.preventDefault(),e.stopPropagation(),H(!!T),(0,h.BI)("agent_sessions.task_view",{target:"TOOL_HEADER_MODIFIER",action:T?"EXPAND_ALL":"COLLAPSE_ALL",tool_title:S}),!1;(0,h.BI)("agent_sessions.task_view",{target:"TOOL_HEADER",action:T?"EXPAND":"COLLAPSE",tool_title:S})},N[1]=T,N[2]=H,N[3]=M,N[4]=S,N[5]=n):n=N[5];let B=n;if("mission-control"===O){let e,t,n,s,i,l,g,h,f;N[6]!==v?(e=V&&(0,r.jsx)("span",{className:"ToolHeader-module__leadingVisualContainer--kLSVd",children:v}),N[6]=v,N[7]=e):e=N[7],N[8]!==T?(t=!V&&(0,r.jsx)(a.ChevronRightIcon,{size:12,className:d,"data-expanded":!T,"aria-hidden":"true"}),N[8]=T,N[9]=t):t=N[9];let _=!0===G,y=!0!==G;return N[10]!==y||N[11]!==_?(n=(0,p.$)({"ToolHeader-module__titleInGroup--yfBDP":_,[m]:y}),N[10]=y,N[11]=_,N[12]=n):n=N[12],N[13]!==n||N[14]!==S?(s=(0,r.jsx)("span",{className:n,children:S}),N[13]=n,N[14]=S,N[15]=s):s=N[15],N[16]!==E?(i=E&&(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)("span",{className:"ToolHeader-module__path--IbYwi",children:E})," "]}),N[16]=E,N[17]=i):i=N[17],N[18]!==s||N[19]!==i?(l=(0,r.jsxs)("span",{className:u,children:[s,i]}),N[18]=s,N[19]=i,N[20]=l):l=N[20],N[21]!==L?(g=L&&(0,r.jsx)("div",{className:"ToolHeader-module__spinnerContainer--Fe4p_",children:(0,r.jsx)(o.A,{size:"small"})}),N[21]=L,N[22]=g):g=N[22],N[23]!==T?(h=V&&(0,r.jsx)(a.ChevronRightIcon,{size:12,className:d,"data-expanded":!T}),N[23]=T,N[24]=h):h=N[24],N[25]!==B||N[26]!==l||N[27]!==g||N[28]!==h||N[29]!==e||N[30]!==t?(f=(0,r.jsxs)("summary",{className:c,onClick:B,children:[e,t,l,g,h]}),N[25]=B,N[26]=l,N[27]=g,N[28]=h,N[29]=e,N[30]=t,N[31]=f):f=N[31],f}if("chat"===O){let e,t,n,s,o,i,l,g=!$;N[32]!==g?(e=(0,p.$)(c,{"ToolHeader-module__nonInteractive--QyePc":g}),N[32]=g,N[33]=e):e=N[33];let h=$?B:void 0,_=!$;N[34]!==$||N[35]!==T?(t=$?(0,r.jsx)(a.ChevronRightIcon,{size:12,className:d,"data-expanded":!T}):(0,r.jsx)(a.DotFillIcon,{size:12,className:"ToolHeader-module__bulletIcon--LOz1S"}),N[34]=$,N[35]=T,N[36]=t):t=N[36];let y=L?"ToolHeader-module__textWithShimmer--gfMkb":u;return N[37]!==L||N[38]!==S?(n=L&&(0,r.jsx)(f.b,{className:"ToolHeader-module__titleWithShimmer--EUw3f",children:S}),N[37]=L,N[38]=S,N[39]=n):n=N[39],N[40]!==L||N[41]!==S?(s=!L&&(0,r.jsx)("span",{className:m,children:S}),N[40]=L,N[41]=S,N[42]=s):s=N[42],N[43]!==y||N[44]!==n||N[45]!==s||N[46]!==S?(o=(0,r.jsxs)("span",{className:y,title:S,children:[n,s]}),N[43]=y,N[44]=n,N[45]=s,N[46]=S,N[47]=o):o=N[47],N[48]!==A?(i=A&&(0,r.jsx)(a.AlertIcon,{size:16,className:"color-fg-attention flex-shrink-0"}),N[48]=A,N[49]=i):i=N[49],N[50]!==_||N[51]!==t||N[52]!==o||N[53]!==i||N[54]!==e||N[55]!==h?(l=(0,r.jsxs)("summary",{className:e,onClick:h,"aria-disabled":_,children:[t,o,i]}),N[50]=_,N[51]=t,N[52]=o,N[53]=i,N[54]=e,N[55]=h,N[56]=l):l=N[56],l}N[57]===Symbol.for("react.memo_cache_sentinel")?(_=(0,p.$)("Button","ToolHeader-module__summaryButton--yGhGb"),N[57]=_):_=N[57];let K=!T;return N[58]!==T?(y=T?(0,r.jsx)(a.ChevronRightIcon,{}):(0,r.jsx)(a.ChevronDownIcon,{}),N[58]=T,N[59]=y):y=N[59],N[60]!==A?(x=A?(0,r.jsx)(a.AlertIcon,{size:16,className:"color-fg-attention flex-shrink-0"}):null,N[60]=A,N[61]=x):x=N[61],N[62]!==S?(w=(0,r.jsx)("span",{className:"overflow-hidden text-truncate flex-1",children:S}),N[62]=S,N[63]=w):w=N[63],N[64]!==E?(b=E&&(0,r.jsx)("span",{className:"text-mono fgColor-default",children:E}),N[64]=E,N[65]=b):b=N[65],N[66]!==w||N[67]!==b?(C=(0,r.jsxs)(r.Fragment,{children:[w," ",b]}),N[66]=w,N[67]=b,N[68]=C):C=N[68],N[69]!==B||N[70]!==x||N[71]!==C||N[72]!==K||N[73]!==y?(j=(0,r.jsx)(i.Q,{as:"summary",block:!0,className:_,alignContent:"start","aria-expanded":K,"aria-labelledby":"tool-header-title",leadingVisual:y,trailingVisual:x,onClick:B,children:C}),N[69]=B,N[70]=x,N[71]=C,N[72]=K,N[73]=y,N[74]=j):j=N[74],j}try{_.displayName||(_.displayName="ToolHeader")}catch{}},12385:(e,t,n)=>{n.d(t,{l:()=>m});var r=n(74848),s=n(16522),a=n(96540),o=n(21373),i=n(38621),l=n(67154),c=n(44296),d=n(42455),u=n(51120);function m(e){let t,n,m,p,g,h,f,_=(0,s.c)(23),{nwo:y,currentUserCanPush:x,variant:w,onStoppingStateChange:b,loading:C}=e,{session:j}=(0,c.Lg)(),[N,v]=(0,a.useState)(!1),S=[l.Yj.InProgress,l.Yj.Idle,l.Yj.WaitingForUser].includes(j.state)&&!N;_[0]!==y||_[1]!==j.id?(t={queryKey:["stopSession",y,j.id],queryFn:async()=>await (0,u.I)({path:`/agents/swe/jobs/${y}/session/${j.id}/cancel`,method:"POST"}),enabled:!1,retry:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1},_[0]=y,_[1]=j.id,_[2]=t):t=_[2];let E=(0,d.b)(t);_[3]!==E.isLoading||_[4]!==E.isSuccess?(n=()=>{E.isSuccess&&!E.isLoading&&v(!0)},m=[E.isSuccess,E.isLoading],_[3]=E.isLoading,_[4]=E.isSuccess,_[5]=n,_[6]=m):(n=_[5],m=_[6]),(0,a.useEffect)(n,m);let T=E.isFetching||E.isLoading,I=T?"Stopping session...":"Stop session";_[7]!==E?(p=()=>E.refetch(),_[7]=E,_[8]=p):p=_[8];let P=p;_[9]!==b||_[10]!==T?(g=()=>{b?.(T)},h=[T,b],_[9]=b,_[10]=T,_[11]=g,_[12]=h):(g=_[11],h=_[12]),(0,a.useEffect)(g,h);let k=C??T,H=k?"":"Stop";if("icon-text-button"===(void 0===w?"button":w)){let e;return _[13]!==P||_[14]!==H||_[15]!==k||_[16]!==T?(e=(0,r.jsx)(o.Q,{leadingVisual:i.SquareCircleIcon,"aria-label":"Stop session",variant:"invisible",size:"small",onClick:P,"aria-disabled":T,loading:k,children:H}),_[13]=P,_[14]=H,_[15]=k,_[16]=T,_[17]=e):e=_[17],e}return y&&x&&S?(_[18]!==I||_[19]!==P||_[20]!==k||_[21]!==T?(f=(0,r.jsx)(o.Q,{className:"mr-2",leadingVisual:i.SquareFillIcon,variant:"danger",onClick:P,loading:k,loadingAnnouncement:"Stopping session","aria-disabled":T,children:I}),_[18]=I,_[19]=P,_[20]=k,_[21]=T,_[22]=f):f=_[22],f):null}try{m.displayName||(m.displayName="SessionStopButton")}catch{}},15759:(e,t,n)=>{n.d(t,{i:()=>r});function r(e){try{let t=e.replace("/home/runner/work/","").split("/").slice(2).join("/");return t.length>0?t:void 0}catch{return e}}},16425:(e,t,n)=>{n.d(t,{$X:()=>l,_$:()=>i});var r=n(74848),s=n(16522),a=n(96540);let o=(0,a.createContext)({variant:"default",onToolExpand:null,session:null,sessionNwo:null});function i(){return(0,a.useContext)(o)}function l(e){let t,n,a=(0,s.c)(8),{variant:i,onToolExpand:l,session:c,sessionNwo:d,children:u}=e,m=void 0===l?null:l,p=void 0===c?null:c,g=void 0===d?null:d;a[0]!==m||a[1]!==p||a[2]!==g||a[3]!==i?(t={variant:i,onToolExpand:m,session:p,sessionNwo:g},a[0]=m,a[1]=p,a[2]=g,a[3]=i,a[4]=t):t=a[4];let h=t;return a[5]!==u||a[6]!==h?(n=(0,r.jsx)(o,{value:h,children:u}),a[5]=u,a[6]=h,a[7]=n):n=a[7],n}try{o.displayName||(o.displayName="SessionLogsContext")}catch{}try{l.displayName||(l.displayName="SessionLogsProvider")}catch{}},24939:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(74848),s=n(16522),a=n(96540);function o(e,t){let n=new Date(e).getTime(),r=Math.floor(((t&&"0001-01-01T00:00:00Z"!==t?new Date(t).getTime():Date.now())-n)/1e3),s=[{value:Math.floor(r/86400),label:"d"},{value:Math.floor(r%86400/3600),label:"h"},{value:Math.floor(r%3600/60),label:"m"},{value:r%60,label:"s"}].filter(e=>e.value>0);return 0===s.length?"0s":1===s.length?`${s[0]?.value??0}${s[0]?.label??""}`:s[1]?`${s[0]?.value}${s[0]?.label} ${s[1].value}${s[1].label??""}`:`${s[0]?.value??0}${s[0]?.label??""}`}var i=n(67154);function l(e){let t,n,l,c,d=(0,s.c)(10),{createdAt:u,completedAt:m,state:p}=e;d[0]!==m||d[1]!==u?(t=()=>o(u,m),d[0]=m,d[1]=u,d[2]=t):t=d[2];let[g,h]=(0,a.useState)(t);return d[3]!==m||d[4]!==u||d[5]!==p?(n=()=>{if(h(o(u,m)),p===i.Yj.InProgress||p===i.Yj.Queued){let e=setInterval(()=>{h(o(u,m))},500);return()=>clearInterval(e)}},l=[u,m,p],d[3]=m,d[4]=u,d[5]=p,d[6]=n,d[7]=l):(n=d[6],l=d[7]),(0,a.useEffect)(n,l),d[8]!==g?(c=(0,r.jsx)("time",{"aria-live":"off",className:"text-tabular-nums",children:g}),d[8]=g,d[9]=c):c=d[9],c}let c=l;try{l.displayName||(l.displayName="SessionElapsedTime")}catch{}},27566:(e,t,n)=>{n.d(t,{A:()=>r});function r(e,t){if(null!=e&&null!=t)return`/${e}/actions/runs/${t}`}},31283:(e,t,n)=>{n.d(t,{S:()=>l});var r=n(74848),s=n(38621),a=n(1587),o=n(16522);let i=e=>{let t,n,s=(0,o.c)(3),{"aria-label":a}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("path",{d:"M1.75 10C2.16421 10 2.5 10.3358 2.5 10.75V13.25C2.5 13.3881 2.61193 13.5 2.75 13.5H5.25C5.66421 13.5 6 13.8358 6 14.25C6 14.6642 5.66421 15 5.25 15H2.75C1.7835 15 1 14.2165 1 13.25V10.75C1 10.3358 1.33579 10 1.75 10ZM14.25 10C14.6642 10 15 10.3358 15 10.75V13.25C15 14.2165 14.2165 15 13.25 15H10.75C10.3358 15 10 14.6642 10 14.25C10 13.8358 10.3358 13.5 10.75 13.5H13.25C13.3881 13.5 13.5 13.3881 13.5 13.25V10.75C13.5 10.3358 13.8358 10 14.25 10ZM8.25 10C8.66421 10 9 10.3358 9 10.75C9 11.1642 8.66421 11.5 8.25 11.5H5.25C4.83579 11.5 4.5 11.1642 4.5 10.75C4.5 10.3358 4.83579 10 5.25 10H8.25ZM11.25 7.5C11.6642 7.5 12 7.83579 12 8.25C12 8.66421 11.6642 9 11.25 9H5.25C4.83579 9 4.5 8.66421 4.5 8.25C4.5 7.83579 4.83579 7.5 5.25 7.5H11.25ZM10.25 5C10.6642 5 11 5.33579 11 5.75C11 6.16421 10.6642 6.5 10.25 6.5H5.25C4.83579 6.5 4.5 6.16421 4.5 5.75C4.5 5.33579 4.83579 5 5.25 5H10.25ZM5.25 1C5.66421 1 6 1.33579 6 1.75C6 2.16421 5.66421 2.5 5.25 2.5H2.75C2.61193 2.5 2.5 2.61193 2.5 2.75V5.25C2.5 5.66421 2.16421 6 1.75 6C1.33579 6 1 5.66421 1 5.25V2.75C1 1.7835 1.7835 1 2.75 1H5.25ZM13.25 1C14.2165 1 15 1.7835 15 2.75V5.25C15 5.66421 14.6642 6 14.25 6C13.8358 6 13.5 5.66421 13.5 5.25V2.75C13.5 2.61193 13.3881 2.5 13.25 2.5H10.75C10.3358 2.5 10 2.16421 10 1.75C10 1.33579 10.3358 1 10.75 1H13.25Z",fill:"currentColor"}),s[0]=t):t=s[0],s[1]!==a?(n=(0,r.jsx)("svg",{"aria-label":a,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t}),s[1]=a,s[2]=n):n=s[2],n};try{i.displayName||(i.displayName="ViewFilesIcon")}catch{}function l(e=""){switch(e){case a.K2.APPLY_PATCH:return(0,r.jsx)(s.FileDiffIcon,{className:"fgColor-attention","aria-label":"File Edit: "});case a.K2.BASH:case a.K2.WRITE_BASH:case a.K2.READ_BASH:case a.K2.STOP_BASH:case a.K2.ASYNC_BASH:case a.K2.READ_ASYNC_BASH:case a.K2.STOP_ASYNC_BASH:return(0,r.jsx)(s.TerminalIcon,{"aria-label":"CLI output: "});case a.K2.THINK:return(0,r.jsx)(s.LightBulbIcon,{"aria-label":"Copilot Thought: "});case a.K2.STR_REPLACE_EDITOR:case a.K2.STR_REPLACE:case a.K2.EDIT:return(0,r.jsx)(s.FileDiffIcon,{className:"fgColor-attention","aria-label":"File Edit: "});case a.K2.CREATE:return(0,r.jsx)(s.FileAddedIcon,{className:"fgColor-success","aria-label":"File Creation: "});case a.K2.VIEW:return(0,r.jsx)(i,{"aria-label":"View File: "});case a.K2.GREP:case a.K2.RG:return(0,r.jsx)(s.SearchIcon,{"aria-label":"Search: "});case a.K2.GLOB:return(0,r.jsx)(s.FileDirectoryIcon,{"aria-label":"Find files: "});case a.K2.RUN_CUSTOM_SETUP_STEP:case a.K2.RUN_SETUP:return(0,r.jsx)(s.CodespacesIcon,{"aria-label":"Custom Setup Run: "});case a.K2.PROPOSE_WORK:return(0,r.jsx)(s.TasklistIcon,{"aria-label":"Propose Work: "});case a.K2.REPORT_PROGRESS:case a.K2.REPLY_TO_COMMENT:default:return(0,r.jsx)(s.TerminalIcon,{"aria-label":"Tool output: "})}}},34001:(e,t,n)=>{n.d(t,{t:()=>g});var r=n(42455),s=n(67154),a=n(78314),o=n(51120),i=n(56746),l=n(96540),c=n(3433),d=n(97665),u=n(58612),m=n(69599),p=n(46747);function g({pullId:e,taskId:t,initialData:n,sessionsPollingInterval:g}){let h=(0,a.t)(),[f,_]=(0,l.useState)(0),[y,x]=(0,l.useState)(!1),w=(0,c.g)(),[b]=(0,c.ok)(),C=b.get("session_id"),j=w.session_id||C,N=(0,l.useRef)(!0),v=(0,d.jE)(),S=(0,m.G7)("copilot_agent_sessions_alive_updates"),E=t??e,T=(0,l.useCallback)(()=>{v.invalidateQueries({queryKey:["agent-sessions",h.ownerLogin,h.name,E]})},[v,h.ownerLogin,h.name,E]),I=(0,p.d)(T,g,{maxWait:1e4});return(0,u.N)({onEvent:I,enableCreateEvents:!1,enableUpdateEvents:!0,enableLogUpdates:!1,enabled:S}),{...(0,r.b)({queryKey:["agent-sessions",h.ownerLogin,h.name,E],queryFn:async()=>{try{let n=[];if(N.current){let r;if(t)r=(0,i.r8)(h.ownerLogin,h.name,t);else if(void 0!==e)r=(0,i.KN)(e);else throw Error("Either taskId or pullId must be provided to fetch sessions");let s=await (0,o.I)({path:r}),a=(n=(await s.json()).sessions).some(e=>e.id===j);(0===n.length||j&&!a)&&(N.current=!1)}if(!N.current){let e=await (0,o.I)({path:`/agents/sessions/${j}`}),t=await e.json();t&&t.id&&(n=[t])}return _(0),x(!1),n.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime())}catch(e){throw _(e=>{let t=e+1;return t>=10&&x(!0),t}),e}},initialData:n,refetchInterval:e=>{if(S)return!1;let t=e.state.data;return t?t.some(e=>e.state===s.Yj.InProgress||e.state===s.Yj.Idle||e.state===s.Yj.WaitingForUser||e.state===s.Yj.Queued)?g:10*g:g},enabled:f<10&&(void 0!==e||!!t)}),timedOut:y,isRetrying:f>0&&!y}}},36887:(e,t,n)=>{n.d(t,{M:()=>h});var r=n(74848),s=n(16522),a=n(38621),o=n(69726),i=n(21373);let l="NewToolHeader-module__missionControl--UzME_",c="NewToolHeader-module__text--YrvpY",d="NewToolHeader-module__title--zy6SR";var u=n(34164),m=n(16425),p=n(53419),g=n(45244);function h(e){let t,n,h,f,_,y,x,w,b=(0,s.c)(65),{leadingVisual:C,title:j,path:N,isCollapsed:v,isError:S,isPending:E,isInGroup:T,isGroupHeader:I,onModifierClick:P,onToggle:k}=e,H=void 0!==S&&S,R=void 0!==E&&E,A=void 0!==T&&T,L=void 0!==I&&I,{variant:G,onToolExpand:$}=(0,m._$)();b[0]!==v||b[1]!==P||b[2]!==k||b[3]!==$||b[4]!==j?(t=e=>{if((e.altKey||e.metaKey)&&P)return e.preventDefault(),e.stopPropagation(),P(!!v),(0,p.BI)("agent_sessions.task_view",{target:"TOOL_HEADER_MODIFIER",action:v?"EXPAND_ALL":"COLLAPSE_ALL",tool_title:j}),!1;k?.(),$?.(!!v),(0,p.BI)("agent_sessions.task_view",{target:"TOOL_HEADER",action:v?"EXPAND":"COLLAPSE",tool_title:j})},b[0]=v,b[1]=P,b[2]=k,b[3]=$,b[4]=j,b[5]=t):t=b[5];let O=t;if("mission-control"===G){let e,t,n,s,i,m,p,g,h;b[6]!==L||b[7]!==A?(e=(0,u.$)(l,{"NewToolHeader-module__inGroup--pfCxe":A,"NewToolHeader-module__groupHeader--vul8q":L}),b[6]=L,b[7]=A,b[8]=e):e=b[8];let f=!v;b[9]!==C?(t=C?(0,r.jsx)("span",{className:"NewToolHeader-module__leadingVisualContainer--QUqc8",children:C}):null,b[9]=C,b[10]=t):t=b[10],b[11]!==A?(n=(0,u.$)(d,{"NewToolHeader-module__titleInGroup--FbP6_":A}),b[11]=A,b[12]=n):n=b[12],b[13]!==n||b[14]!==j?(s=(0,r.jsx)("span",{className:n,children:j}),b[13]=n,b[14]=j,b[15]=s):s=b[15],b[16]!==N?(i=N&&(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)("span",{className:"NewToolHeader-module__path--s1hvM",children:N})]}),b[16]=N,b[17]=i):i=b[17],b[18]!==s||b[19]!==i?(m=(0,r.jsxs)("span",{className:c,children:[s,i]}),b[18]=s,b[19]=i,b[20]=m):m=b[20],b[21]!==R?(p=R&&(0,r.jsx)("div",{className:"NewToolHeader-module__spinnerContainer--EO9Ej",children:(0,r.jsx)(o.A,{size:"small"})}),b[21]=R,b[22]=p):p=b[22];let _=!v;return b[23]!==_?(g=(0,r.jsx)(a.ChevronRightIcon,{size:12,className:"NewToolHeader-module__toggleIcon--Wa6VX","data-expanded":_,"aria-hidden":"true"}),b[23]=_,b[24]=g):g=b[24],b[25]!==O||b[26]!==m||b[27]!==p||b[28]!==g||b[29]!==e||b[30]!==f||b[31]!==t?(h=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("button",{type:"button",className:e,onClick:O,"aria-expanded":f,children:[t,m,p,g]})}),b[25]=O,b[26]=m,b[27]=p,b[28]=g,b[29]=e,b[30]=f,b[31]=t,b[32]=h):h=b[32],h}if("chat"===G){let e,t,n,s,a=!v,o=R?"NewToolHeader-module__textWithShimmer--YzOQb":c;return b[33]!==R||b[34]!==j?(e=R&&(0,r.jsx)(g.b,{className:"NewToolHeader-module__titleWithShimmer--h8fbP",children:j}),b[33]=R,b[34]=j,b[35]=e):e=b[35],b[36]!==R||b[37]!==j?(t=!R&&(0,r.jsx)("span",{className:d,children:j}),b[36]=R,b[37]=j,b[38]=t):t=b[38],b[39]!==o||b[40]!==e||b[41]!==t?(n=(0,r.jsxs)("span",{className:o,children:[e,t]}),b[39]=o,b[40]=e,b[41]=t,b[42]=n):n=b[42],b[43]!==O||b[44]!==n||b[45]!==a?(s=(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("button",{type:"button",className:l,onClick:O,"aria-expanded":a,children:n})}),b[43]=O,b[44]=n,b[45]=a,b[46]=s):s=b[46],s}b[47]===Symbol.for("react.memo_cache_sentinel")?(n=(0,u.$)("Button","NewToolHeader-module__button--GzYVn"),b[47]=n):n=b[47];let M=!v;return b[48]!==v?(h=v?(0,r.jsx)(a.ChevronRightIcon,{}):(0,r.jsx)(a.ChevronDownIcon,{}),b[48]=v,b[49]=h):h=b[49],b[50]!==H?(f=H?(0,r.jsx)(a.AlertIcon,{size:16,className:"color-fg-attention flex-shrink-0"}):null,b[50]=H,b[51]=f):f=b[51],b[52]!==j?(_=(0,r.jsx)("span",{className:"overflow-hidden text-truncate flex-1",children:j}),b[52]=j,b[53]=_):_=b[53],b[54]!==N?(y=N&&(0,r.jsx)("span",{className:"text-mono fgColor-default",children:N}),b[54]=N,b[55]=y):y=b[55],b[56]!==_||b[57]!==y?(x=(0,r.jsxs)(r.Fragment,{children:[_," ",y]}),b[56]=_,b[57]=y,b[58]=x):x=b[58],b[59]!==O||b[60]!==x||b[61]!==M||b[62]!==h||b[63]!==f?(w=(0,r.jsx)(i.Q,{as:"summary",block:!0,className:n,alignContent:"start","aria-expanded":M,"aria-labelledby":"tool-header-title",leadingVisual:h,trailingVisual:f,onClick:O,children:x}),b[59]=O,b[60]=x,b[61]=M,b[62]=h,b[63]=f,b[64]=w):w=b[64],w}try{h.displayName||(h.displayName="NewToolHeader")}catch{}},44296:(e,t,n)=>{n.d(t,{Lg:()=>i,PS:()=>l});var r=n(74848),s=n(16522),a=n(96540);let o=(0,a.createContext)(void 0);function i(){let e=(0,a.useContext)(o);if(!e)throw Error("useSessionContext must be used within a SessionContextProvider");return e}function l(e){let t,n,i,l=(0,s.c)(10),{session:c,sessionOwner:d,logs:u,logsAreLoading:m,children:p}=e;l[0]===Symbol.for("react.memo_cache_sentinel")?(t={},l[0]=t):t=l[0];let[g,h]=(0,a.useState)(t);l[1]!==u||l[2]!==m||l[3]!==g||l[4]!==c||l[5]!==d?(n={session:c,sessionOwner:d,logs:u,logsAreLoading:m,mcpToolNameMappings:g,setMcpToolNameMappings:h},l[1]=u,l[2]=m,l[3]=g,l[4]=c,l[5]=d,l[6]=n):n=l[6];let f=n;return l[7]!==p||l[8]!==f?(i=(0,r.jsx)(o,{value:f,children:p}),l[7]=p,l[8]=f,l[9]=i):i=l[9],i}try{o.displayName||(o.displayName="SessionContext")}catch{}try{l.displayName||(l.displayName="SessionContextProvider")}catch{}},55248:(e,t,n)=>{n.d(t,{j:()=>o,p:()=>a});var r=n(74848),s=n(16522);let a=e=>{let t,n,a=(0,s.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("path",{d:"M7.25 1.7793C9.371 1.77943 11.1858 3.00816 12.0166 4.80762C14.2732 5.06028 15.9999 6.94976 16 9.2793C16 9.32465 15.9976 9.37003 15.9961 9.41504H15.9971C15.9971 9.82924 15.6613 10.165 15.2471 10.165C14.8356 10.1648 14.5011 9.83347 14.4971 9.42285H14.4961C14.4983 9.37538 14.5 9.32737 14.5 9.2793C14.4999 7.60324 13.176 6.27947 11.5 6.2793C11.1806 6.2793 10.8958 6.07714 10.791 5.77539C10.284 4.31438 8.90436 3.27944 7.25 3.2793C5.1596 3.2793 3.50012 4.93893 3.5 7.0293C3.5 7.11497 3.50931 7.23128 3.52051 7.33887C3.52582 7.38984 3.53023 7.43466 3.53418 7.46582L3.53906 7.50098L3.54004 7.50977L3.54102 7.51074C3.59503 7.88942 3.35481 8.24868 2.98438 8.34375C2.1243 8.5636 1.5001 9.32996 1.5 10.2793C1.5 11.4033 2.37598 12.2793 3.5 12.2793H3.5332V12.2783C3.53974 12.2783 3.54624 12.2791 3.55273 12.2793H3.55371C3.95838 12.2902 4.28314 12.621 4.2832 13.0283C4.2832 13.4356 3.95841 13.7655 3.55371 13.7764V13.7793H3.5C1.54755 13.7793 0 12.2317 0 10.2793C8.74811e-05 8.86873 0.808798 7.66476 2.00098 7.1084C2.00028 7.08195 2 7.05535 2 7.0293C2.00012 4.1105 4.33118 1.7793 7.25 1.7793ZM6.49707 7.98242C6.78987 7.68961 7.2647 7.68979 7.55762 7.98242L9.80762 10.2324C9.94825 10.373 10.0273 10.5638 10.0273 10.7627C10.0273 10.9616 9.94827 11.1523 9.80762 11.293L7.55762 13.543C7.26472 13.8358 6.78992 13.8358 6.49707 13.543C6.20444 13.2501 6.20435 12.7753 6.49707 12.4824L8.2168 10.7627L6.49707 9.04297C6.20447 8.75008 6.20433 8.27522 6.49707 7.98242ZM14.5273 12.2627C14.9415 12.2627 15.2773 12.5985 15.2773 13.0127C15.2773 13.4269 14.9415 13.7627 14.5273 13.7627H11.5273C11.1133 13.7625 10.7773 13.4268 10.7773 13.0127C10.7774 12.5987 11.1133 12.2629 11.5273 12.2627H14.5273Z",fill:"currentColor"}),a[0]=t):t=a[0],a[1]!==e?(n=(0,r.jsx)("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:t}),a[1]=e,a[2]=n):n=a[2],n},o=e=>{let t,n,a=(0,s.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("path",{d:"M14.4482 3.33337C18.7 3.33337 22.3305 5.81163 23.9131 9.41736C23.9174 9.4271 23.9218 9.43678 23.9258 9.44666L23.9287 9.45447C28.4413 9.79159 31.9629 13.4237 31.998 17.9789H31.9922C31.9894 18.5288 31.5438 18.974 30.9932 18.974C30.441 18.9739 29.9933 18.5261 29.9932 17.974H29.9971C29.9577 14.3305 27.0059 11.4291 23.2412 11.4291C22.8325 11.429 22.4654 11.1795 22.3135 10.8002L22.0752 10.2064C20.8076 7.33395 17.8991 5.33337 14.4482 5.33337C9.80134 5.33339 6.13785 8.95653 6.1377 13.476C6.1377 13.855 6.16656 14.2794 6.20605 14.4838C6.30638 15.004 5.98334 15.5117 5.46973 15.642C3.44486 16.1554 2 17.9258 2 20.0795C2.00003 22.6354 4.04211 24.6663 6.68945 24.6664H8.125C8.67643 24.6673 9.12289 25.1148 9.12305 25.6664C9.12305 26.2181 8.67653 26.6645 8.125 26.6654V26.6664H6.68945C2.97192 26.6663 3.31456e-05 23.774 0 20.0795C0 17.2864 1.70256 14.9426 4.14941 13.972C4.14121 13.7976 4.1377 13.6268 4.1377 13.476C4.13785 7.81789 8.73115 3.33339 14.4482 3.33337ZM13.9863 17.6185C14.3768 17.2282 15.0099 17.2284 15.4004 17.6185L19.0674 21.2855C19.2549 21.473 19.3603 21.7274 19.3604 21.9926C19.3604 22.2577 19.2548 22.5121 19.0674 22.6996L15.4004 26.3666C15.0099 26.7569 14.3768 26.757 13.9863 26.3666C13.5959 25.9761 13.596 25.3431 13.9863 24.9525L16.9463 21.9926L13.9863 19.0336C13.5958 18.643 13.5958 18.0091 13.9863 17.6185ZM28.6934 24.6595C29.2456 24.6595 29.6934 25.1073 29.6934 25.6595C29.6932 26.2117 29.2456 26.6595 28.6934 26.6595H22.0264C21.4744 26.6593 21.0265 26.2116 21.0264 25.6595C21.0264 25.1074 21.4743 24.6598 22.0264 24.6595H28.6934Z",fill:"currentColor"}),a[0]=t):t=a[0],a[1]!==e?(n=(0,r.jsx)("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:t}),a[1]=e,a[2]=n):n=a[2],n}},55910:(e,t,n)=>{n.d(t,{NL:()=>eo,cD:()=>ei,sr:()=>Z});var r=n(74848),s=n(16522),a=n(4817),o=n(36887),i=n(9238),l=n(85094),c=n(96540);function d(e){let t,n,a,o,i,l=(0,s.c)(12),{bashLoading:d,children:u}=e,m=(0,c.useId)(),[p,g]=(0,c.useState)("|");return l[0]!==d?(t=()=>{let e;if(d){let t=["|","/","-","\\"],n=0;e=setInterval(()=>{n=(n+1)%t.length,g(t[n]||"|")},250)}else g("|");return()=>clearInterval(e)},n=[d],l[0]=d,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,c.useEffect)(t,n),l[3]!==d||l[4]!==p?(a=d&&(0,r.jsx)("span",{children:p}),l[3]=d,l[4]=p,l[5]=a):a=l[5],l[6]!==u||l[7]!==a?(o=(0,r.jsx)("div",{className:"ToolCodeBlock-module__codeContainer--V645Q",children:(0,r.jsx)("pre",{className:"ToolCodeBlock-module__code--ITGLQ",tabIndex:0,children:(0,r.jsxs)("code",{className:"ToolCodeBlock-module__codeWrap--mnqde",children:[u,a]})})}),l[6]=u,l[7]=a,l[8]=o):o=l[8],l[9]!==m||l[10]!==o?(i=(0,r.jsx)("figure",{className:"ToolCodeBlock-module__container--D9MMx","aria-labelledby":m,children:o}),l[9]=m,l[10]=o,l[11]=i):i=l[11],i}try{d.displayName||(d.displayName="ToolCodeBlock")}catch{}var u=n(47970);let m="data-tool-codeblock-props",p=(0,l.F)(m),g={code:(e,t)=>{let n=(0,l.k)(e,m);return n?(0,r.jsx)(d,{...n,children:e.children}):t}};function h(e={}){let{bashLoading:t}=e;return{transformMarkdown:e=>(0,u.YR)(e,"code",e=>{e.data={...e.data,hName:"code",hProperties:{[p]:JSON.stringify({language:e.lang??"",code:e.value,startOffset:e.position?.start.offset??-1,endOffset:e.position?.end.offset??-1,bashLoading:!!t})}}}),transformHtml:e=>(0,u.YR)(e,"element",(e,t,n)=>{let r=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&r?.type==="element"&&"code"===r.tagName&&p in r.properties&&n.children.splice(t,1,r)}),reactComponents:g}}var f=n(31283),_=n(1587);function y(e){if(e)try{let t=e.split(`
`),n=-1;for(let e=0;e<t.length;e++)if(t[e]?.startsWith("@@")){n=e+1;break}return t.slice(n).map(e=>{if(!(e.startsWith("+")||e.startsWith("-")))return e.startsWith(" ")?e.substring(1):e;{let t=e.substring(1);return t.startsWith(" ")?t.substring(1):t}}).filter(e=>null!==e).join(`
`).trim()}catch{return e}}var x=n(98552),w=n(46251),b=n(40090),C=n(15759);let j="Tool-module__detailsContainer--QPsTQ",N="Tool-module__toolContent--Rlnrn",v="Tool-module__toolContentMissionControl--P3Bgh",S="Tool-module__diffPreview--xgOwZ";var E=n(34164),T=n(16425),I=n(66358);function P(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,e=>t[e]??e)}function k(e){let t=e.split(`
`),n=[],r=0,s=0;for(let e of t)if(e.startsWith("@@")){let t=e.match(/@@ -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@/);t&&t[1]&&t[2]&&(r=parseInt(t[1],10),s=parseInt(t[2],10)),n.push({type:I.w$.Hunk,left:null,right:null,html:P(e),text:e})}else if(e.startsWith("+")&&!e.startsWith("+++")){let t=e.slice(1);n.push({type:I.w$.Addition,left:null,right:s++,html:P(t),text:t})}else if(e.startsWith("-")&&!e.startsWith("---")){let t=e.slice(1);n.push({type:I.w$.Deletion,left:r++,right:null,html:P(t),text:t})}else if(e.startsWith(" ")){let t=e.slice(1);n.push({type:I.w$.Context,left:r++,right:s++,html:P(t),text:t})}return n}var H=n(98091),R=n(91747),A=n(69599),L=n(57387),G=n(21373),$=n(69726),O=n(38621),M=n(47865),V=n(54571),B=n(60284);function K(e){let t,n,o,i,l,d,u,m,p,g,h,f,_,y,x,w,b,C=(0,s.c)(49),{title:j,description:N,type:v}=e;C[0]===Symbol.for("react.memo_cache_sentinel")?(t={},C[0]=t):t=C[0];let{createTask:S,isCreating:E}=(0,M.Z)(t),{session:I,sessionNwo:P}=(0,T._$)(),[k,H]=(0,c.useState)(!1),[R,A]=(0,c.useState)(!1);C[1]===Symbol.for("react.memo_cache_sentinel")?(n=[],C[1]=n):n=C[1];let[G]=(0,V.I)(W,!0,n);C[2]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{A(!1)},C[2]=o):o=C[2];let $=o;C[3]!==S||C[4]!==N||C[5]!==E||C[6]!==k||C[7]!==P||C[8]!==j||C[9]!==v?(i=e=>{e.preventDefault(),k||E||!P||(S({title:j,problemStatement:N,eventType:"propose_work",eventContent:`Proposed work: ${j}`,nwo:P,createPullRequest:"code_change"===v}),H(!0))},C[3]=S,C[4]=N,C[5]=E,C[6]=k,C[7]=P,C[8]=j,C[9]=v,C[10]=i):i=C[10];let K=i;C[11]!==S||C[12]!==j||C[13]!==v?(l=async(e,t,n,r,s,a,o)=>{t&&(S({title:j,problemStatement:e,eventType:"propose_work",eventContent:`Proposed work: ${j}`,nwo:t.nameWithOwner,baseRef:n,selectedAgent:r,modelId:a,createPullRequest:o??"code_change"===v}),H(!0),$())},C[11]=S,C[12]=j,C[13]=v,C[14]=l):l=C[14];let F=l;C[15]!==P?(d=P?P.split("/"):[null,null],C[15]=P,C[16]=d):d=C[16];let[U,Y]=d;C[17]!==U||C[18]!==Y||C[19]!==I||C[20]!==P?(u=P&&Y&&U&&I?.repo_id?{nameWithOwner:P,name:Y,ownerLogin:U,id:I.repo_id}:void 0,C[17]=U,C[18]=Y,C[19]=I,C[20]=P,C[21]=u):u=C[21];let q=u;return C[22]!==N||C[23]!==F||C[24]!==q||C[25]!==R||C[26]!==G?(m=R&&!G&&(0,r.jsx)(L.l,{title:"Start a task",onClose:$,position:{narrow:"fullscreen"},children:(0,r.jsx)(L.l.Body,{className:"p-2",children:(0,r.jsx)(B.Q,{isInPortal:!0,initialText:N,handleUserSubmit:F,initialRepo:q,eventType:"propose_work"})})}),C[22]=N,C[23]=F,C[24]=q,C[25]=R,C[26]=G,C[27]=m):m=C[27],C[28]!==j?(p=(0,r.jsx)("h3",{className:"h4",children:j}),C[28]=j,C[29]=p):p=C[29],C[30]===Symbol.for("react.memo_cache_sentinel")?(g=()=>A(!0),C[30]=g):g=C[30],C[31]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)("button",{type:"button",className:"ToolProposeWork-module__expandButton--NZiHJ",onClick:g,"aria-label":"Edit task",children:(0,r.jsx)(O.MaximizeIcon,{})}),C[31]=h):h=C[31],C[32]!==E||C[33]!==k?(f=(0,r.jsx)(D,{isCreating:E,isStarted:k}),C[32]=E,C[33]=k,C[34]=f):f=C[34],C[35]!==K||C[36]!==f?(_=(0,r.jsxs)("div",{className:"ToolProposeWork-module__buttonsContainer--TxH3V",children:[h,(0,r.jsx)("form",{onSubmit:K,className:"ToolProposeWork-module__startTaskButton--jzOme",children:f})]}),C[35]=K,C[36]=f,C[37]=_):_=C[37],C[38]!==_||C[39]!==p?(y=(0,r.jsxs)("div",{className:"ToolProposeWork-module__titleContainer--vgBKL",children:[p,_]}),C[38]=_,C[39]=p,C[40]=y):y=C[40],C[41]!==N?(x=(0,r.jsx)("div",{className:"ToolProposeWork-module__descriptionContainer--SNVoI",children:(0,r.jsx)(a.To,{markdown:N})}),C[41]=N,C[42]=x):x=C[42],C[43]!==y||C[44]!==x?(w=(0,r.jsxs)("div",{className:"ToolProposeWork-module__container--FXuyj",children:[y,x]}),C[43]=y,C[44]=x,C[45]=w):w=C[45],C[46]!==w||C[47]!==m?(b=(0,r.jsxs)(r.Fragment,{children:[m,w]}),C[46]=w,C[47]=m,C[48]=b):b=C[48],b}function W(){return!1}function D(e){let t,n,a=(0,s.c)(7),{isCreating:o,isStarted:i}=e;e:{let e;if(o){let e;a[0]===Symbol.for("react.memo_cache_sentinel")?(e=["Creating...",F],a[0]=e):e=a[0],t=e;break e}if(i){let e;a[1]===Symbol.for("react.memo_cache_sentinel")?(e=["Task started",O.CheckCircleIcon],a[1]=e):e=a[1],t=e;break e}a[2]===Symbol.for("react.memo_cache_sentinel")?(e=["Start task",O.PlayIcon],a[2]=e):e=a[2],t=e}let[l,c]=t,d=o||i;return a[3]!==c||a[4]!==d||a[5]!==l?(n=(0,r.jsx)(G.Q,{type:"submit",leadingVisual:c,inactive:d,children:l}),a[3]=c,a[4]=d,a[5]=l,a[6]=n):n=a[6],n}function F(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)($.A,{size:"small",srText:"Starting task\u2026"}),t[0]=e):e=t[0],e}try{K.displayName||(K.displayName="ToolProposeWork")}catch{}try{D.displayName||(D.displayName="StartTaskButton")}catch{}try{F.displayName||(F.displayName="ButtonSpinner")}catch{}let U=parseInt("475px",10),Y=({language:e,markdown:t})=>t?`~~~${e}
${t}
~~~`:`~~~
Nothing to display
~~~`;function q(e,t=1e5){return!e||e.length<=t?{markdown:e}:{markdown:e.slice(0,t)+`

\u{26A0}\u{FE0F} **Output truncated**`}}let z="Review changes with Copilot code review",Q={"playwright-browser_navigate":"Navigate Playwright web browser to a URL","playwright-browser_navigate_back":"Navigate back in Playwright web browser","playwright-browser_navigate_forward":"Navigate forward in Playwright web browser","playwright-browser_click":"Click element in Playwright web browser","playwright-browser_take_screenshot":"Take screenshot of Playwright web browser","playwright-browser_type":"Type in Playwright web browser","playwright-browser_wait_for":"Wait for text to appear/disappear in Playwright web browser","playwright-browser_evaluate":"Run JavaScript in Playwright web browser","playwright-browser_snapshot":"Take snapshot of page in Playwright web browser","playwright-browser_resize":"Resize Playwright web browser window","playwright-browser_close":"Close Playwright web browser","playwright-browser_press_key":"Press key in Playwright web browser","playwright-browser_select_option":"Select option in Playwright web browser","playwright-browser_handle_dialog":"Interact with dialog in Playwright web browser","playwright-browser_console_messages":"Get console messages from Playwright web browser","playwright-browser_drag":"Drag mouse between elements in Playwright web browser","playwright-browser_file_upload":"Upload file in Playwright web browser","playwright-browser_hover":"Hover mouse over element in Playwright web browser","playwright-browser_network_requests":"Get network requests from Playwright web browser","github-mcp-server-get_file_contents":"Get file contents from GitHub","github-mcp-server-get_pull_request":"Get pull request from GitHub","github-mcp-server-get_issue":"Get issue from GitHub","github-mcp-server-get_pull_request_files":"Get pull request changed files from GitHub","github-mcp-server-list_pull_requests":"List pull requests on GitHub","github-mcp-server-list_branches":"List branches on GitHub","github-mcp-server-get_pull_request_diff":"Get pull request diff from GitHub","github-mcp-server-get_pull_request_comments":"Get pull request comments from GitHub","github-mcp-server-get_commit":"Get commit from GitHub","github-mcp-server-search_repositories":"Search repositories on GitHub","github-mcp-server-search_code":"Search code on GitHub","github-mcp-server-get_issue_comments":"Get issue comments from GitHub","github-mcp-server-list_issues":"List issues on GitHub","github-mcp-server-search_pull_requests":"Search pull requests on GitHub","github-mcp-server-list_commits":"List commits on GitHub","github-mcp-server-get_pull_request_status":"Get pull request status from GitHub","github-mcp-server-search_issues":"Search issues on GitHub","github-mcp-server-get_pull_request_reviews":"Get pull request reviews from GitHub","github-mcp-server-download_workflow_run_artifact":"Download GitHub Actions workflow run artifact","github-mcp-server-get_job_logs":"Get GitHub Actions job logs","github-mcp-server-get_workflow_run":"Get GitHub Actions workflow run","github-mcp-server-get_workflow_run_logs":"Get GitHub Actions workflow run logs","github-mcp-server-get_workflow_run_usage":"Get GitHub Actions workflow usage","github-mcp-server-list_workflow_jobs":"List GitHub Actions workflow jobs","github-mcp-server-list_workflow_run_artifacts":"List GitHub Actions workflow run artifacts","github-mcp-server-list_workflow_runs":"List GitHub Actions workflow runs","github-mcp-server-list_workflows":"List GitHub Actions workflows","gh-advisory-database":"Check new dependencies against the GitHub Advisory Database",codeql_checker:"Run CodeQL security scan on changed files",code_review:z};function Z(e){let t,n,a=(0,s.c)(404),{name:o,delta:i,args:l,mcpToolNameMappings:c,isInGroup:d}=e,u=(0,R.u)("copilot_swe_agent_progress_commands");a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,A.G7)("mission_control_use_tool_header_icons"),a[0]=t):t=a[0];let m=t;a[1]!==d||a[2]!==o?(n=d?void 0:(0,f.S)(o),a[1]=d,a[2]=o,a[3]=n):n=a[3];let p=n;switch(o){case _.K2.BASH:{let e,t,n,s,o=`$ ${l.command}`,c=d?l.description||l.command:l.description?`${l.description}`:"Run Bash command";a[4]!==i.content?(e=ed(i.content),a[4]=i.content,a[5]=e):e=a[5];let{isError:u,content:m}=e,g=void 0===m;a[6]!==p?(t={leadingVisual:p},a[6]=p,a[7]=t):t=a[7];let h=l.command?.startsWith("git diff")?"diff":"bash",f=`${o}${m?`
${m}`:""}`;return a[8]!==g||a[9]!==h||a[10]!==f?(n=(0,r.jsx)(ei,{language:h,markdown:f,bashLoading:g}),a[8]=g,a[9]=h,a[10]=f,a[11]=n):n=a[11],a[12]!==u||a[13]!==g||a[14]!==t||a[15]!==n||a[16]!==c?(s=(0,r.jsx)(eo,{title:c,isError:u,isPending:g,hasPreview:!1,isInGroup:!1,toolHeaderProps:t,children:n}),a[12]=u,a[13]=g,a[14]=t,a[15]=n,a[16]=c,a[17]=s):s=a[17],s}case _.K2.GITHUB_MCP_SERVER_WEB_SEARCH:case _.K2.GITHUB_MCP_SERVER_BING_SEARCH:{let e,t,n,s,o=`Web Search: ${l.query}`;a[18]!==i.content?(e=ed(i.content),a[18]=i.content,a[19]=e):e=a[19];let{isError:c,content:u}=e;return a[20]!==p?(t={leadingVisual:p},a[20]=p,a[21]=t):t=a[21],a[22]!==u?(n=(0,r.jsx)(ei,{language:"json",markdown:u}),a[22]=u,a[23]=n):n=a[23],a[24]!==c||a[25]!==d||a[26]!==t||a[27]!==n||a[28]!==o?(s=(0,r.jsx)(eo,{title:o,isError:c,isInGroup:d,toolHeaderProps:t,children:n}),a[24]=c,a[25]=d,a[26]=t,a[27]=n,a[28]=o,a[29]=s):s=a[29],s}case _.K2.WRITE_BASH:{let e,t,n,s,o=`$ ${l.input}`;a[30]!==i.content?(e=ed(i.content),a[30]=i.content,a[31]=e):e=a[31];let{isError:c,content:u}=e,m=void 0===u,g=`Send input to Bash session ${l.sessionId}`;a[32]!==p?(t={leadingVisual:p},a[32]=p,a[33]=t):t=a[33];let h=`${o}${u?`
${u}`:""}`;return a[34]!==m||a[35]!==h?(n=(0,r.jsx)(ei,{language:"bash",markdown:h,bashLoading:m}),a[34]=m,a[35]=h,a[36]=n):n=a[36],a[37]!==c||a[38]!==d||a[39]!==m||a[40]!==g||a[41]!==t||a[42]!==n?(s=(0,r.jsx)(eo,{title:g,isError:c,isPending:m,isInGroup:d,toolHeaderProps:t,children:n}),a[37]=c,a[38]=d,a[39]=m,a[40]=g,a[41]=t,a[42]=n,a[43]=s):s=a[43],s}case _.K2.READ_BASH:{let e,t,n,s;a[44]!==i.content?(e=ed(i.content),a[44]=i.content,a[45]=e):e=a[45];let{isError:o,content:c}=e,u=void 0===c,m=`Read logs from Bash session ${l.sessionId}`;a[46]!==p?(t={leadingVisual:p},a[46]=p,a[47]=t):t=a[47];let g=c?`
${c}`:"";return a[48]!==u||a[49]!==g?(n=(0,r.jsx)(ei,{language:"bash",markdown:g,bashLoading:u}),a[48]=u,a[49]=g,a[50]=n):n=a[50],a[51]!==o||a[52]!==d||a[53]!==u||a[54]!==m||a[55]!==t||a[56]!==n?(s=(0,r.jsx)(eo,{title:m,isError:o,isPending:u,isInGroup:d,toolHeaderProps:t,children:n}),a[51]=o,a[52]=d,a[53]=u,a[54]=m,a[55]=t,a[56]=n,a[57]=s):s=a[57],s}case _.K2.STOP_BASH:{let e,t,n,s;a[58]!==i.content?(e=ed(i.content),a[58]=i.content,a[59]=e):e=a[59];let{isError:o,content:c}=e,u=void 0===c,m=`Stop Bash session ${l.sessionId}`;a[60]!==p?(t={leadingVisual:p},a[60]=p,a[61]=t):t=a[61];let g=c||"";return a[62]!==u||a[63]!==g?(n=(0,r.jsx)(ei,{language:"bash",markdown:g,bashLoading:u}),a[62]=u,a[63]=g,a[64]=n):n=a[64],a[65]!==o||a[66]!==d||a[67]!==u||a[68]!==m||a[69]!==t||a[70]!==n?(s=(0,r.jsx)(eo,{title:m,isError:o,isPending:u,isInGroup:d,toolHeaderProps:t,children:n}),a[65]=o,a[66]=d,a[67]=u,a[68]=m,a[69]=t,a[70]=n,a[71]=s):s=a[71],s}case _.K2.THINK:{let e,t,n,s;a[72]!==l.thought?(e=ed(l.thought),a[72]=l.thought,a[73]=e):e=a[73];let{isError:o,content:i}=e;return a[74]!==p?(t={leadingVisual:p},a[74]=p,a[75]=t):t=a[75],a[76]!==i?(n=(0,r.jsx)(ei,{language:"markdown",markdown:i}),a[76]=i,a[77]=n):n=a[77],a[78]!==o||a[79]!==d||a[80]!==t||a[81]!==n?(s=(0,r.jsx)(eo,{title:"Thought",isError:o,hasPreview:!0,isInGroup:d,toolHeaderProps:t,children:n}),a[78]=o,a[79]=d,a[80]=t,a[81]=n,a[82]=s):s=a[82],s}case _.K2.SKILL:{let e,t,n,s,c;a[83]!==i.content?(e=ed(i.content),a[83]=i.content,a[84]=e):e=a[84];let{isError:u,content:m}=e,p=d?l.skill:`Activate ${l.skill} skill`,g=void 0===m;return a[85]!==o?(t=(0,f.S)(o),a[85]=o,a[86]=t):t=a[86],a[87]!==t?(n={leadingVisual:t},a[87]=t,a[88]=n):n=a[88],a[89]!==m?(s=(0,r.jsx)(ei,{language:"markdown",markdown:m}),a[89]=m,a[90]=s):s=a[90],a[91]!==u||a[92]!==d||a[93]!==g||a[94]!==n||a[95]!==s||a[96]!==p?(c=(0,r.jsx)(eo,{title:p,isError:u,isPending:g,isInGroup:d,toolHeaderProps:n,children:s}),a[91]=u,a[92]=d,a[93]=g,a[94]=n,a[95]=s,a[96]=p,a[97]=c):c=a[97],c}case _.K2.RUN_CUSTOM_SETUP_STEP:{let e,t,n,s,o;a[98]!==i.content?(e=ed(i.content),a[98]=i.content,a[99]=e):e=a[99];let{isError:c,content:u}=e;a[100]!==d||a[101]!==l.name?(t=d?l.name?.trim()||"Custom setup step":l.name?.trim()?`Run "${l.name.trim()}" custom setup step`:"Run custom setup step",a[100]=d,a[101]=l.name,a[102]=t):t=a[102];let m=t,g=void 0===u;return a[103]!==p?(n={leadingVisual:p},a[103]=p,a[104]=n):n=a[104],a[105]!==g||a[106]!==u?(s=(0,r.jsx)(ei,{language:"console",markdown:u,bashLoading:g}),a[105]=g,a[106]=u,a[107]=s):s=a[107],a[108]!==c||a[109]!==d||a[110]!==g||a[111]!==n||a[112]!==s||a[113]!==m?(o=(0,r.jsx)(eo,{title:m,isError:c,isPending:g,isInGroup:d,toolHeaderProps:n,children:s}),a[108]=c,a[109]=d,a[110]=g,a[111]=n,a[112]=s,a[113]=m,a[114]=o):o=a[114],o}case _.K2.RUN_SETUP:{let e,t,n,s,o;a[115]!==i.content?(e=ed(i.content),a[115]=i.content,a[116]=e):e=a[116];let{isError:c,content:u}=e;a[117]!==l.name?(t=l.name.trim(),a[117]=l.name,a[118]=t):t=a[118];let m=t,g=void 0===u;return a[119]!==p?(n={leadingVisual:p},a[119]=p,a[120]=n):n=a[120],a[121]!==g||a[122]!==u?(s=(0,r.jsx)(ei,{language:"console",markdown:u,bashLoading:g}),a[121]=g,a[122]=u,a[123]=s):s=a[123],a[124]!==c||a[125]!==d||a[126]!==g||a[127]!==n||a[128]!==s||a[129]!==m?(o=(0,r.jsx)(eo,{title:m,isError:c,isPending:g,isInGroup:d,toolHeaderProps:n,children:s}),a[124]=c,a[125]=d,a[126]=g,a[127]=n,a[128]=s,a[129]=m,a[130]=o):o=a[130],o}case _.K2.STR_REPLACE_EDITOR:case _.K2.CREATE:case _.K2.STR_REPLACE:case _.K2.EDIT:case _.K2.VIEW:{let e,t,n=o===_.K2.EDIT?"str_replace":l.command||o;a[131]!==l.path?(e=l.path?.split(".").pop()||"",a[131]=l.path,a[132]=e):e=a[132];let s=e,c="md"===s?"markdown":s||"text";if(a[133]!==n||a[134]!==i.content||a[135]!==d||a[136]!==u||a[137]!==c||a[138]!==l.insert_line||a[139]!==l.path||a[140]!==l.view_range||a[141]!==p){t=Symbol.for("react.early_return_sentinel");t:{let{isError:e,content:s}=ed(i.content);switch(n){case"create":case"insert":case"undo_edit":{let o,i,u=(0,C.i)(l.path),m=u+em(n,l.view_range,l.insert_line),g=y(s);a[143]!==n||a[144]!==d||a[145]!==l.path?(o=eu({command:n,path:l.path,isInGroup:d}),a[143]=n,a[144]=d,a[145]=l.path,a[146]=o):o=a[146],a[147]!==p?(i={leadingVisual:p},a[147]=p,a[148]=i):i=a[148],t=(0,r.jsx)(eo,{title:o,isError:e,path:u?m:void 0,hasPreview:!d,isInGroup:d,toolHeaderProps:i,children:(0,r.jsx)(ei,{language:c,markdown:g})});break t}case"view":case"str_replace":{let o,i,g,h,f=s?.trim(),_="view"===n,x=(0,C.i)(l.path),w=_?x+em(n,l.view_range,l.insert_line):x;if(_&&!m){let o,i,u=y(s);a[149]!==n||a[150]!==d||a[151]!==l.path?(o=eu({command:n,path:l.path,isInGroup:d}),a[149]=n,a[150]=d,a[151]=l.path,a[152]=o):o=a[152],a[153]!==p?(i={leadingVisual:p},a[153]=p,a[154]=i):i=a[154],t=(0,r.jsx)(eo,{title:o,isError:e,path:x?w:void 0,hasPreview:!d,isInGroup:d,toolHeaderProps:i,children:(0,r.jsx)(ei,{language:c,markdown:u})});break t}if(f&&u){let s=k(f);if(s.length>0){let o,i,c,u,m;a[155]!==n||a[156]!==d||a[157]!==l.path?(o=eu({command:n,path:l.path,isInGroup:d}),a[155]=n,a[156]=d,a[157]=l.path,a[158]=o):o=a[158];let g=x?w:void 0,h=!d&&!_;a[159]!==p?(i={leadingVisual:p},a[159]=p,a[160]=i):i=a[160];let f=_?"Tool-module__viewDiffContainer--kCGrw":void 0;a[161]!==s?(c=(0,r.jsx)(H.i,{diffLines:s,tabSize:4,className:S}),a[161]=s,a[162]=c):c=a[162],a[163]!==c||a[164]!==f?(u=(0,r.jsx)("div",{className:f,children:c}),a[163]=c,a[164]=f,a[165]=u):u=a[165],a[166]!==e||a[167]!==d||a[168]!==u||a[169]!==o||a[170]!==g||a[171]!==h||a[172]!==i?(m=(0,r.jsx)(eo,{title:o,isError:e,path:g,hasPreview:h,isInGroup:d,toolHeaderProps:i,children:u}),a[166]=e,a[167]=d,a[168]=u,a[169]=o,a[170]=g,a[171]=h,a[172]=i,a[173]=m):m=a[173],t=m;break t}}a[174]!==n||a[175]!==d||a[176]!==l.path?(o=eu({command:n,path:l.path,isInGroup:d}),a[174]=n,a[175]=d,a[176]=l.path,a[177]=o):o=a[177];let b=x?w:void 0,j=!d&&!_;a[178]!==p?(i={leadingVisual:p},a[178]=p,a[179]=i):i=a[179];let N=_?c:"diff";a[180]!==f||a[181]!==N?(g=(0,r.jsx)(ei,{language:N,markdown:f}),a[180]=f,a[181]=N,a[182]=g):g=a[182],a[183]!==e||a[184]!==d||a[185]!==g||a[186]!==o||a[187]!==b||a[188]!==j||a[189]!==i?(h=(0,r.jsx)(eo,{title:o,isError:e,path:b,hasPreview:j,isInGroup:d,toolHeaderProps:i,children:g}),a[183]=e,a[184]=d,a[185]=g,a[186]=o,a[187]=b,a[188]=j,a[189]=i,a[190]=h):h=a[190],t=h;break t}}}a[133]=n,a[134]=i.content,a[135]=d,a[136]=u,a[137]=c,a[138]=l.insert_line,a[139]=l.path,a[140]=l.view_range,a[141]=p,a[142]=t}else t=a[142];if(t!==Symbol.for("react.early_return_sentinel"))return t;break}case _.K2.REPORT_PROGRESS:{let e;a[191]!==i.content?(e=ed(i.content),a[191]=i.content,a[192]=e):e=a[192];let{isError:t,content:n}=e;if("prDescription"in l){let e,s,o,i,c,u;a[193]!==l.prDescription?(e=ed(l.prDescription),a[193]=l.prDescription,a[194]=e):e=a[194];let{isError:m,content:g}=e;a[195]!==l.commitMessage?(s=l.commitMessage.split(`
`)[0]||l.commitMessage,a[195]=l.commitMessage,a[196]=s):s=a[196];let h=s,f=`Progress update: ${h}`,_=m||t;return a[197]!==p?(o={leadingVisual:p},a[197]=p,a[198]=o):o=a[198],a[199]!==g?(i=(0,r.jsx)(ei,{language:"markdown",markdown:g}),a[199]=g,a[200]=i):i=a[200],a[201]!==n?(c=(0,r.jsx)(el,{type:"output",language:"json",markdown:n}),a[201]=n,a[202]=c):c=a[202],a[203]!==d||a[204]!==c||a[205]!==f||a[206]!==_||a[207]!==o||a[208]!==i?(u=(0,r.jsxs)(eo,{title:f,isError:_,isInGroup:d,toolHeaderProps:o,children:[i,c]}),a[203]=d,a[204]=c,a[205]=f,a[206]=_,a[207]=o,a[208]=i,a[209]=u):u=a[209],u}{let e,n,s,o=`Start next task: ${l.nextTask}`;return a[210]!==p?(e={leadingVisual:p},a[210]=p,a[211]=e):e=a[211],a[212]!==l.tasksChecklist?(n=(0,r.jsx)(ei,{language:"markdown",markdown:l.tasksChecklist}),a[212]=l.tasksChecklist,a[213]=n):n=a[213],a[214]!==d||a[215]!==t||a[216]!==o||a[217]!==e||a[218]!==n?(s=(0,r.jsx)(eo,{title:o,isError:t,isInGroup:d,toolHeaderProps:e,children:n}),a[214]=d,a[215]=t,a[216]=o,a[217]=e,a[218]=n,a[219]=s):s=a[219],s}}case _.K2.COMMIT_CHANGES:{let e,t,n,s,o;a[220]!==i.content?(e=ed(i.content),a[220]=i.content,a[221]=e):e=a[221];let{isError:c,content:u}=e;a[222]!==l.commitMessage?(t=l.commitMessage.split(`
`)[0]||l.commitMessage,a[222]=l.commitMessage,a[223]=t):t=a[223];let m=t,g=`Commit changes: ${m}`;return a[224]!==p?(n={leadingVisual:p},a[224]=p,a[225]=n):n=a[225],a[226]!==u?(s=(0,r.jsx)(el,{type:"output",language:"json",markdown:u}),a[226]=u,a[227]=s):s=a[227],a[228]!==d||a[229]!==c||a[230]!==g||a[231]!==n||a[232]!==s?(o=(0,r.jsx)(eo,{title:g,isError:c,isInGroup:d,toolHeaderProps:n,children:s}),a[228]=d,a[229]=c,a[230]=g,a[231]=n,a[232]=s,a[233]=o):o=a[233],o}case _.K2.REPLY_TO_COMMENT:{let e,t,n,s;a[234]!==l.reply?(e=ed(l.reply),a[234]=l.reply,a[235]=e):e=a[235];let{isError:o,content:i}=e;return a[236]!==p?(t={leadingVisual:p},a[236]=p,a[237]=t):t=a[237],a[238]!==i?(n=(0,r.jsx)(ei,{language:"markdown",markdown:i}),a[238]=i,a[239]=n):n=a[239],a[240]!==o||a[241]!==d||a[242]!==t||a[243]!==n?(s=(0,r.jsx)(eo,{title:"Reply to comment",isError:o,isInGroup:d,toolHeaderProps:t,children:n}),a[240]=o,a[241]=d,a[242]=t,a[243]=n,a[244]=s):s=a[244],s}case _.K2.ASYNC_BASH:{let e,t,n,s,o=`$ ${l.command}`;a[245]!==i.content?(e=ed(i.content),a[245]=i.content,a[246]=e):e=a[246];let{isError:c,content:u}=e,m=void 0===u,g=`Start or send input to long-running Bash session ${l.sessionId}`;a[247]!==p?(t={leadingVisual:p},a[247]=p,a[248]=t):t=a[248];let h=`${o}${u?`
${u}`:""}`;return a[249]!==m||a[250]!==h?(n=(0,r.jsx)(ei,{language:"bash",markdown:h,bashLoading:m}),a[249]=m,a[250]=h,a[251]=n):n=a[251],a[252]!==c||a[253]!==d||a[254]!==m||a[255]!==g||a[256]!==t||a[257]!==n?(s=(0,r.jsx)(eo,{title:g,isError:c,isPending:m,isInGroup:d,toolHeaderProps:t,children:n}),a[252]=c,a[253]=d,a[254]=m,a[255]=g,a[256]=t,a[257]=n,a[258]=s):s=a[258],s}case _.K2.READ_ASYNC_BASH:{let e,t,n,s;a[259]!==i.content?(e=ed(i.content),a[259]=i.content,a[260]=e):e=a[260];let{isError:o,content:c}=e,u=void 0===c,m=`View logs from long-running Bash session ${l.sessionId}`;a[261]!==p?(t={leadingVisual:p},a[261]=p,a[262]=t):t=a[262];let g=c||"";return a[263]!==u||a[264]!==g?(n=(0,r.jsx)(ei,{language:"bash",markdown:g,bashLoading:u}),a[263]=u,a[264]=g,a[265]=n):n=a[265],a[266]!==o||a[267]!==d||a[268]!==u||a[269]!==m||a[270]!==t||a[271]!==n?(s=(0,r.jsx)(eo,{title:m,isError:o,isPending:u,isInGroup:d,toolHeaderProps:t,children:n}),a[266]=o,a[267]=d,a[268]=u,a[269]=m,a[270]=t,a[271]=n,a[272]=s):s=a[272],s}case _.K2.STOP_ASYNC_BASH:{let e,t,n,s;a[273]!==i.content?(e=ed(i.content),a[273]=i.content,a[274]=e):e=a[274];let{isError:o,content:c}=e,u=void 0===c,m=`Stop long-running Bash session ${l.sessionId}`;a[275]!==p?(t={leadingVisual:p},a[275]=p,a[276]=t):t=a[276];let g=c||"";return a[277]!==u||a[278]!==g?(n=(0,r.jsx)(ei,{language:"bash",markdown:g,bashLoading:u}),a[277]=u,a[278]=g,a[279]=n):n=a[279],a[280]!==o||a[281]!==d||a[282]!==u||a[283]!==m||a[284]!==t||a[285]!==n?(s=(0,r.jsx)(eo,{title:m,isError:o,isPending:u,isInGroup:d,toolHeaderProps:t,children:n}),a[280]=o,a[281]=d,a[282]=u,a[283]=m,a[284]=t,a[285]=n,a[286]=s):s=a[286],s}case _.K2.RG:case _.K2.GREP:{let e,t,n,s,c,u;a[287]!==l?(e=l??{},a[287]=l,a[288]=e):e=a[288];let m=e;a[289]!==i.content?(t=ed(i.content),a[289]=i.content,a[290]=t):t=a[290];let{isError:p,content:g}=t,h=void 0===g,_=d?"":"Search",y=m.pattern;return a[291]!==o?(n=(0,f.S)(o),a[291]=o,a[292]=n):n=a[292],a[293]!==n?(s={leadingVisual:n},a[293]=n,a[294]=s):s=a[294],a[295]!==g?(c=(0,r.jsx)(ep,{output:g}),a[295]=g,a[296]=c):c=a[296],a[297]!==p||a[298]!==d||a[299]!==h||a[300]!==y||a[301]!==s||a[302]!==c||a[303]!==_?(u=(0,r.jsx)(eo,{title:_,isError:p,isPending:h,path:y,isInGroup:d,toolHeaderProps:s,children:c}),a[297]=p,a[298]=d,a[299]=h,a[300]=y,a[301]=s,a[302]=c,a[303]=_,a[304]=u):u=a[304],u}case _.K2.GLOB:{let e,t,n,s,o;a[305]!==l?(e=l??{},a[305]=l,a[306]=e):e=a[306];let c=e;a[307]!==i.content?(t=ed(i.content),a[307]=i.content,a[308]=t):t=a[308];let{isError:u,content:m}=t,g=void 0===m,h=d?"":"Find files",f=c.pattern;return a[309]!==p?(n={leadingVisual:p},a[309]=p,a[310]=n):n=a[310],a[311]!==m?(s=(0,r.jsx)(ex,{output:m}),a[311]=m,a[312]=s):s=a[312],a[313]!==u||a[314]!==d||a[315]!==g||a[316]!==f||a[317]!==n||a[318]!==s||a[319]!==h?(o=(0,r.jsx)(eo,{title:h,isError:u,isPending:g,path:f,isInGroup:d,toolHeaderProps:n,children:s}),a[313]=u,a[314]=d,a[315]=g,a[316]=f,a[317]=n,a[318]=s,a[319]=h,a[320]=o):o=a[320],o}case _.K2.APPLY_PATCH:{let e,t;a[321]!==i.content?(e=ed(i.content),a[321]=i.content,a[322]=e):e=a[322];let{isError:n,content:s}=e,c=("string"==typeof l?l:l?.arguments??l?.content??l?.patch)??"";if(a[323]!==n||a[324]!==d||a[325]!==u||a[326]!==o||a[327]!==s||a[328]!==c){let e,i,l,m,p=function(e){let t=e.split(/\r?\n/),n=[],r=!1,s=null,a=()=>{s&&(n.push(s),s=null)};for(let e of t){if(e.startsWith("*** Begin Patch")){r=!0;continue}if(r){if(e.startsWith("*** End Patch")){a();break}if(e.startsWith("*** Add File: ")){a(),s={type:"add",path:e.replace("*** Add File: ","").trim(),lines:[]};continue}if(e.startsWith("*** Delete File: ")){a(),s={type:"delete",path:e.replace("*** Delete File: ","").trim()};continue}if(e.startsWith("*** Update File: ")){a(),s={type:"update",path:e.replace("*** Update File: ","").trim(),lines:[]};continue}if(e.startsWith("*** Move to: ")&&s&&"update"===s.type){s.newPath=e.replace("*** Move to: ","").trim();continue}s&&"lines"in s&&s.lines.push(e)}}return n}(c);a[330]!==u||a[331]!==s?(e=e=>{let t=(0,C.i)(e.path)??"unknown file";switch(e.type){case"add":{let n=[`diff --git a/${t} b/${t}`,"new file mode 100644","--- /dev/null",`+++ b/${t}`,"@@ @@",...e.lines.map(er).join(`
`).split(`
`).map(en)].join(`
`);if(u){let e=k(n).map(et);if(e.length>0)return(0,r.jsx)(H.i,{diffLines:e,tabSize:4,className:S})}return(0,r.jsx)(ei,{language:"diff",markdown:n})}case"delete":return(0,r.jsx)(ei,{language:"text",markdown:"File deleted"});case"update":{let t=function(e){if(!e.lines||0===e.lines.length)return"";let t=e.path,n=e.newPath||t,r=[];for(let s of(r.push(`diff --git a/${t} b/${n}`),r.push(`--- a/${t}`),r.push(`+++ b/${n}`),r.push("@@ @@"),e.lines))s.startsWith("@@")||(s.startsWith("+")||s.startsWith("-")||s.startsWith(" ")?r.push(s):r.push(` ${s}`));return r.join(`
`)}(e);if(t&&u){let e=k(t).map(ee);if(e.length>0)return(0,r.jsx)(H.i,{diffLines:e,tabSize:4,className:S})}return(0,r.jsx)(ei,{language:"diff",markdown:t||s})}default:return(0,r.jsx)(ei,{language:"text",markdown:s})}},a[330]=u,a[331]=s,a[332]=e):e=a[332];let g=e,h=X,_=J,y="Edit File(s)";if(1===p.length){let e=p[0];e&&(y=h(e)??"Edit File(s)",i=_(e))}let w=y,b=i;a[333]!==o?(l=(0,f.S)(o),a[333]=o,a[334]=l):l=a[334],a[335]!==l?(m={leadingVisual:l},a[335]=l,a[336]=m):m=a[336],t=(0,r.jsx)(eo,{title:w,isError:n,path:b,isInGroup:d,toolHeaderProps:m,children:(()=>{if(0===p.length)return(0,r.jsx)(ei,{language:"text",markdown:c||s});if(1===p.length){let e=p[0];if(!e)return(0,r.jsx)(ei,{language:"text",markdown:c||s});let t="update"===e.type&&e.newPath;return(0,r.jsxs)("div",{className:"border-top px-3 py-2",children:[t&&(0,r.jsxs)("span",{className:"d-block fgColor-muted mb-2",style:{fontSize:"12px"},children:["Renamed from ",(0,C.i)(e.path)]}),g(e)]})}return p.map(e=>(0,r.jsxs)("div",{className:"border-top px-3 py-2",children:[(0,r.jsxs)(x.A,{as:"div",weight:"semibold",className:"mb-2",children:[h(e)," ",(0,r.jsx)("span",{className:"fgColor-muted",children:_(e)}),"update"===e.type&&e.newPath&&(0,r.jsxs)("span",{className:"fgColor-muted",style:{fontSize:"12px"},children:[" ","(from ",(0,C.i)(e.path),")"]})]}),g(e)]},`${e.type}-${e.path}-${e.newPath??""}`))})()}),a[323]=n,a[324]=d,a[325]=u,a[326]=o,a[327]=s,a[328]=c,a[329]=t}else t=a[329];return t}case _.K2.CODE_REVIEW:{var g;let e,t,n,s;a[337]!==i.content?(e=ed(i.content),a[337]=i.content,a[338]=e):e=a[338];let{isError:o,content:c}=e,u=void 0===c;if("prTitle"in(g=l)&&"prDescription"in g){let{prTitle:e,prDescription:n}=l;t=`#### ${e}

${n}`}else t="No code review details provided.";return c&&(t+=`

---

${c}`),a[339]!==t?(n=(0,r.jsx)(ei,{language:"markdown",markdown:t}),a[339]=t,a[340]=n):n=a[340],a[341]!==o||a[342]!==d||a[343]!==u||a[344]!==n?(s=(0,r.jsx)(eo,{title:z,isError:o,isPending:u,isInGroup:d,children:n}),a[341]=o,a[342]=d,a[343]=u,a[344]=n,a[345]=s):s=a[345],s}case _.K2.PROPOSE_WORK:{let e,t,n,s;a[346]!==i.content?(e=ed(i.content),a[346]=i.content,a[347]=e):e=a[347];let{isError:c}=e,u=d?l.workTitle:`Propose Work: ${l.workTitle}`,m=!d;return a[348]!==d||a[349]!==o?(t=d?void 0:{leadingVisual:(0,f.S)(o)},a[348]=d,a[349]=o,a[350]=t):t=a[350],a[351]!==l.workDescription||a[352]!==l.workTitle||a[353]!==l.workType?(n=(0,r.jsx)(K,{title:l.workTitle,description:l.workDescription,type:l.workType}),a[351]=l.workDescription,a[352]=l.workTitle,a[353]=l.workType,a[354]=n):n=a[354],a[355]!==c||a[356]!==d||a[357]!==m||a[358]!==t||a[359]!==n||a[360]!==u?(s=(0,r.jsx)(eo,{title:u,isError:c,hasPreview:m,isInGroup:d,toolHeaderProps:t,children:n}),a[355]=c,a[356]=d,a[357]=m,a[358]=t,a[359]=n,a[360]=u,a[361]=s):s=a[361],s}case _.K2.TASK:{let e,t,n,s,o,c,u,m;if(a[362]!==i.content){let{isError:n,content:r}=ed(i.content);e=n,t=es(r),a[362]=i.content,a[363]=e,a[364]=t}else e=a[363],t=a[364];let{language:g,output:h}=t;a[365]!==l?(n=l??{},a[365]=l,a[366]=n):n=a[366];let f=n;a[367]!==f?(s=0===Object.keys(f).length?null:JSON.stringify(f,null,2),a[367]=f,a[368]=s):s=a[368];let _=s,y=`Call to subagent ${l.agent_type}`;return a[369]!==p?(o={leadingVisual:p},a[369]=p,a[370]=o):o=a[370],a[371]!==_?(c=_&&(0,r.jsx)(el,{type:"input",language:"json",markdown:_}),a[371]=_,a[372]=c):c=a[372],a[373]!==g||a[374]!==h?(u=(0,r.jsx)(ei,{language:g,markdown:h}),a[373]=g,a[374]=h,a[375]=u):u=a[375],a[376]!==e||a[377]!==d||a[378]!==o||a[379]!==c||a[380]!==u||a[381]!==y?(m=(0,r.jsxs)(eo,{title:y,isError:e,isInGroup:d,toolHeaderProps:o,children:[c,u]}),a[376]=e,a[377]=d,a[378]=o,a[379]=c,a[380]=u,a[381]=y,a[382]=m):m=a[382],m}default:{let e,t,n,s,u,m,g,h;if(a[383]!==i.content){let{isError:n,content:r}=ed(i.content);e=n,t=es(r),a[383]=i.content,a[384]=e,a[385]=t}else e=a[384],t=a[385];let{language:f,output:_}=t;a[386]!==l?(n=l??{},a[386]=l,a[387]=n):n=a[387];let y=n;a[388]!==y?(s=0===Object.keys(y).length?null:JSON.stringify(y,null,2),a[388]=y,a[389]=s):s=a[389];let x=s,w=c?.[o]||o,b=Q[o]||`Call to ${w}`;return a[390]!==p?(u={leadingVisual:p},a[390]=p,a[391]=u):u=a[391],a[392]!==x?(m=x&&(0,r.jsx)(el,{type:"input",language:"json",markdown:x}),a[392]=x,a[393]=m):m=a[393],a[394]!==_||a[395]!==f?(g=(0,r.jsx)(ei,{language:f,markdown:_}),a[394]=_,a[395]=f,a[396]=g):g=a[396],a[397]!==e||a[398]!==d||a[399]!==u||a[400]!==m||a[401]!==g||a[402]!==b?(h=(0,r.jsxs)(eo,{title:b,isError:e,isInGroup:d,toolHeaderProps:u,children:[m,g]}),a[397]=e,a[398]=d,a[399]=u,a[400]=m,a[401]=g,a[402]=b,a[403]=h):h=a[403],h}}}function J(e){if(!e)return;let t=(0,C.i)(e.path);return"update"===e.type&&e.newPath?(0,C.i)(e.newPath):t}function X(e){if(e)switch(e.type){case"add":return"Create";case"delete":return"Delete";case"update":return"Edit";default:return`Apply patch (${e.type??"unknown"})`}}function ee(e){return{...e,left:null,right:null}}function et(e){return{...e,left:null,right:null}}function en(e){return`+${e}`}function er(e){return e.startsWith("+")?e.slice(1):e}let es=e=>{if(void 0===e)return{language:"text",output:e};try{let t=JSON.parse(e),n=JSON.stringify(t,null,2);return{language:"json",output:n}}catch{return{language:"text",output:e}}};function ea(e){return"markdown"!==e&&"text"!==e&&""!==e}function eo({title:e,isError:t=!1,isPending:n=!1,path:s,hasPreview:a=!1,toolHeaderProps:l,children:d,isOpenOverride:u,isInGroup:m=!1}){let{variant:p}=(0,T._$)(),g=(0,A.G7)("mission_control_use_tool_header_icons"),[h,f]=(0,c.useState)(u??!1),_=(0,c.useRef)(!1),[y,x]=(0,c.useState)(u??!1),w=(0,c.useRef)(u),b=(0,c.useRef)(null),[C,S]=(0,c.useState)(a);(0,c.useEffect)(()=>{w.current!==u&&(w.current=u,_.current=!1,void 0!==u&&(f(u),x(u)))},[u]),(0,c.useEffect)(()=>{a&&b.current?b.current.scrollHeight<U?(S(!1),_.current||x(!0)):S(!0):S(a)},[a]);let I=(0,c.useRef)({}),P=(0,c.useRef)(null),k=(0,c.useRef)(null);k.current=e=>{if(e.detail.excludeInstance!==I.current&&P.current){let t=e.detail.expand;P.current.open=t,f(t),x(t)}},(0,c.useEffect)(()=>{let e=e=>{k.current?.(e)};return document.addEventListener("tool-global-toggle",e),()=>{document.removeEventListener("tool-global-toggle",e)}},[]),(0,c.useEffect)(()=>{let e=P.current;if(!e)return;void 0===u&&f(e.hasAttribute("open"));let t=new MutationObserver(()=>{f(e.hasAttribute("open"))});return t.observe(e,{attributes:!0,attributeFilter:["open"]}),()=>t.disconnect()},[u]);let H=e=>{_.current=!0,P.current&&(P.current.open=e),f(e),x(e);let t=new CustomEvent("tool-global-toggle",{detail:{expand:e,excludeInstance:I.current}});document.dispatchEvent(t)};if(g)return(0,r.jsxs)("div",{className:(0,E.$)("Tool-module__toolContainer--KV02i",{"Tool-module__toolContainerDefault--Qk_Dq":"default"===p,"Tool-module__toolContainerInGroup--A5omz":m,"Tool-module__toolContainerExpanded--piC1r":y}),children:[(0,r.jsx)(o.M,{leadingVisual:l?.leadingVisual,title:e,path:s,isCollapsed:!y,isPending:n,isError:t,isInGroup:m,onToggle:()=>{x(e=>!e)},onModifierClick:H}),(0,r.jsx)("div",{ref:b,className:(0,E.$)(y?"default"===p||"chat"===p?`border-top ${N}`:"mission-control"===p&&v:C&&g?"Tool-module__toolContentPreview--qrskL":"Tool-module__toolContentCollapsed--qNNjr"),...!y?{inert:!0}:{},children:d})]});{let a=(0,A.G7)("mission_control_use_tool_header_icons"),o=c.Children.toArray(d).filter(Boolean).length>0;return"chat"!==p||o?(0,r.jsxs)("details",{ref:P,open:h,onToggle:e=>{_.current=!0,f(e.currentTarget.open)},className:(0,E.$)(j,{"Tool-module__detailsContainerDefault--M2g13":"default"===p}),"data-testid":"tool-log-entry",children:[(0,r.jsx)(i.E,{leadingVisual:a?l?.leadingVisual:void 0,title:e,path:s,isCollapsed:!h,isPending:n,isError:t,isInGroup:m,onModifierClick:H,hasChildren:o}),"chat"===p?d:(0,r.jsx)("div",{className:"default"===p?`border-top ${N}`:v,children:d})]}):(0,r.jsx)("div",{className:(0,E.$)(j,"Tool-module__detailsContainerNoChildren--Lt_9F"),"data-testid":"tool-log-entry",children:(0,r.jsx)(i.E,{title:e,path:s,isCollapsed:!h,isPending:n,isError:t,onModifierClick:H,hasChildren:o})})}}function ei(e){let t,n=(0,s.c)(2);if(n[0]!==e){let{language:s,markdown:o,...i}=e,{markdown:l}=q(o);t=void 0===o?(0,r.jsx)(ec,{}):(0,r.jsx)(a.To,{markdown:ea(s)?Y({language:s,markdown:l||""}):l||"",extensions:[h({...i})],className:(0,E.$)(!ea(s)&&"p-3")}),n[0]=e,n[1]=t}else t=n[1];return t}function el(e){let t,n=(0,s.c)(6),{type:o,language:i,markdown:l}=e;if(n[0]!==i||n[1]!==l||n[2]!==o){let e,{markdown:s}=q(l),c="input"===o?"Input":"Output";n[4]!==c?(e=(0,r.jsx)(x.A,{size:"small",weight:"medium",className:"fgColor-muted",children:c}),n[4]=c,n[5]=e):e=n[5],t=(0,r.jsxs)(w.B,{direction:"vertical",padding:"normal",gap:"condensed",children:[e,void 0===l?(0,r.jsx)(ec,{}):(0,r.jsx)(a.To,{className:(0,E.$)(!ea&&"p-3","border rounded bgColor-default overflow-hidden"),markdown:Y({language:i,markdown:s||""}),extensions:[h()]})]}),n[0]=i,n[1]=l,n[2]=o,n[3]=t}else t=n[3];return t}function ec(e){let t,n=(0,s.c)(3),{lines:a,maxWidth:o}=e,i=void 0===a?3:a,l=void 0===o?"45ch":o;return n[0]!==i||n[1]!==l?(t=(0,r.jsx)("div",{className:"py-3 px-4",children:(0,r.jsx)(b.r,{lines:i,maxWidth:l})}),n[0]=i,n[1]=l,n[2]=t):t=n[2],t}function ed(e){if(!e)return{isError:!1,content:e};let t=e.match(/<error>(.*?)<\/error>/s);return t&&void 0!==t[1]?{isError:!0,content:t[1]}:{isError:!1,content:e}}let eu=({command:e,path:t,isInGroup:n})=>{let r=!!(0,C.i)(t)?.length;if(n)return"";switch(e){case"create":return"Create";case"insert":return"Insert lines at";case"view":return`View${r?"":" repository"}`;case"str_replace":return"Edit";case"undo_edit":return"Undo edit";default:return e||"Unknown"}},em=(e,t,n)=>"view"===e&&t?`:${t[0]}-${t[1]}`:"insert"===e&&void 0!==n?`:${n}`:"";function ep(e){let t,n,a,o,i=(0,s.c)(18),{output:l}=e;if(!l){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ec,{}),i[0]=e):e=i[0],e}if("No matches found."===l.trim()||"No matches found"===l.trim()){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:"p-3",children:(0,r.jsx)("span",{className:"fgColor-muted",children:"No matches found"})}),i[1]=e):e=i[1],e}if(i[2]!==l){a=Symbol.for("react.early_return_sentinel");e:{let e=l.split(`
`).filter(ey);if(e.length>0&&e.every(e_)){let t,n,s,o,l=[];for(let t of e){let e=t.match(/^([^:]+):(\d+)$/);e&&l.push({file:e[1]??"",count:parseInt(e[2]??"0",10)})}i[6]===Symbol.for("react.memo_cache_sentinel")?(t={fontSize:"12px"},i[6]=t):t=i[6];let c=1===l.length?"file":"files";i[7]!==c?(n=(0,r.jsx)("span",{children:c}),i[7]=c,i[8]=n):n=i[8],i[9]!==l||i[10]!==n?(s=(0,r.jsxs)("span",{className:"fgColor-muted mb-2 d-block",style:t,children:[l.length," ",n," with matches"]}),i[9]=l,i[10]=n,i[11]=s):s=i[11];let d=(0,r.jsx)("div",{className:"border rounded bgColor-default overflow-hidden",children:l.map(ef)});i[12]!==s||i[13]!==d?(o=(0,r.jsxs)("div",{className:"p-3",children:[s,d]}),i[12]=s,i[13]=d,i[14]=o):o=i[14],a=o;break e}let s=new Map,o="";for(let t of e){if("--"===t)continue;let e=t.match(/^(\d+):(.*)$/),n=t.match(/^(\d+)-(.*)$/),r=t.match(/^([^:]+):(\d+):(.*)$/),a=t.match(/^([^-]+)-(\d+)-(.*)$/);r?(o=r[1]??"",s.has(o)||s.set(o,[]),s.get(o)?.push({lineNumber:r[2],content:r[3]??"",isContext:!1})):a?(o=a[1]??"",s.has(o)||s.set(o,[]),s.get(o)?.push({lineNumber:a[2],content:a[3]??"",isContext:!0})):e&&o?s.get(o)?.push({lineNumber:e[1],content:e[2]??"",isContext:!1}):n&&o?s.get(o)?.push({lineNumber:n[1],content:n[2]??"",isContext:!0}):(o=t,s.has(o)||s.set(o,[]))}t="p-3",n=s.size>0?Array.from(s.entries()).map(eg):(0,r.jsx)("span",{className:"fgColor-muted",children:"No matches found"})}i[2]=l,i[3]=t,i[4]=n,i[5]=a}else t=i[3],n=i[4],a=i[5];return a!==Symbol.for("react.early_return_sentinel")?a:(i[15]!==t||i[16]!==n?(o=(0,r.jsx)("div",{className:t,children:n}),i[15]=t,i[16]=n,i[17]=o):o=i[17],o)}function eg(e){let[t,n]=e;return(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)(x.A,{as:"div",weight:"semibold",className:"mb-2 fgColor-accent",children:(0,C.i)(t)}),(0,r.jsx)("div",{className:"border rounded bgColor-default overflow-hidden",children:n.map(eh)})]},t)}function eh(e,t){return(0,r.jsxs)("div",{className:(0,E.$)("px-3 py-1",e.isContext?"fgColor-muted":"",t>0&&"border-top"),style:{fontFamily:"var(--fontStack-monospace)",fontSize:"12px"},children:[e.lineNumber&&(0,r.jsxs)("span",{className:"fgColor-muted",style:{minWidth:"3em",display:"inline-block"},children:[e.lineNumber,":"]}),(0,r.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:e.content})]},t)}function ef(e,t){let{file:n,count:s}=e;return(0,r.jsxs)("div",{className:(0,E.$)("px-3 py-2 d-flex",t>0&&"border-top"),style:{fontFamily:"var(--fontStack-monospace)",fontSize:"12px"},children:[(0,r.jsx)("span",{className:"flex-1",children:(0,C.i)(n)}),(0,r.jsxs)("span",{className:"fgColor-muted ml-2",children:[s," ",(0,r.jsx)("span",{children:1===s?"match":"matches"})]})]},t)}function e_(e){return null!==e.match(/^([^:]+):(\d+)$/)}function ey(e){return e.trim()}function ex(e){let t,n,a,o,i,l,c,d=(0,s.c)(18),{output:u}=e;if(!u){let e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ec,{}),d[0]=e):e=d[0],e}if(d[1]!==u){i=Symbol.for("react.early_return_sentinel");e:{let e,s,l=u.split(`
`).filter(eb);if(0===l.length){let e;d[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:"p-3",children:(0,r.jsx)("span",{className:"fgColor-muted",children:"No files found"})}),d[7]=e):e=d[7],i=e;break e}a="p-3",d[8]===Symbol.for("react.memo_cache_sentinel")?(e={fontSize:"12px"},d[8]=e):e=d[8];let c=1===l.length?"file":"files";d[9]!==c?(s=(0,r.jsx)("span",{children:c}),d[9]=c,d[10]=s):s=d[10],o=(0,r.jsxs)("span",{className:"fgColor-muted mb-2 d-block",style:e,children:[l.length," ",s," found"]}),t="border rounded bgColor-default overflow-hidden",n=l.map(ew)}d[1]=u,d[2]=t,d[3]=n,d[4]=a,d[5]=o,d[6]=i}else t=d[2],n=d[3],a=d[4],o=d[5],i=d[6];return i!==Symbol.for("react.early_return_sentinel")?i:(d[11]!==t||d[12]!==n?(l=(0,r.jsx)("div",{className:t,children:n}),d[11]=t,d[12]=n,d[13]=l):l=d[13],d[14]!==a||d[15]!==o||d[16]!==l?(c=(0,r.jsxs)("div",{className:a,children:[o,l]}),d[14]=a,d[15]=o,d[16]=l,d[17]=c):c=d[17],c)}function ew(e,t){return(0,r.jsx)("div",{className:(0,E.$)("px-3 py-2",t>0&&"border-top"),style:{fontFamily:"var(--fontStack-monospace)",fontSize:"12px"},children:(0,C.i)(e)},t)}function eb(e){return e.trim()}try{U.displayName||(U.displayName="TOOL_PREVIEW_HEIGHT_THRESHOLD")}catch{}try{Z.displayName||(Z.displayName="ToolRenderer")}catch{}try{eo.displayName||(eo.displayName="Tool")}catch{}try{ei.displayName||(ei.displayName="ToolPrimaryContent")}catch{}try{el.displayName||(el.displayName="ToolSecondaryContent")}catch{}try{ec.displayName||(ec.displayName="MarkdownLoading")}catch{}try{ep.displayName||(ep.displayName="GrepOutput")}catch{}try{ex.displayName||(ex.displayName="GlobOutput")}catch{}},56746:(e,t,n)=>{function r(e){let[t,n]=e.split("/");return`/agents/repos/${t}/${n}/tasks`}function s(e,t){let[n,r]=e.split("/");return`/agents/repos/${n}/${r}/tasks/${t}/sessions`}function a(e,t,n){let r=`/agents/repos/${e}/${t}/tasks`;if(void 0===n)return r;let s=new URLSearchParams;return s.set("creator_id",String(n)),`${r}?${s.toString()}`}function o(e,t,n){return`/agents/repos/${e}/${t}/tasks/${n}`}function i(e){return`/agents/sessions/resource/pull/${e}`}n.d(t,{KN:()=>i,g3:()=>r,oQ:()=>a,r8:()=>o,s3:()=>s})},67154:(e,t,n)=>{function r(e){return"object"==typeof e&&null!==e&&"choices"in e&&Array.isArray(e.choices)}function s(e){return Array.isArray(e)&&e.every(e=>a(e))}function a(e){return o(e)&&"source"in e}function o(e){return"object"==typeof e&&null!==e&&"role"in e&&"user"===e.role}function i(e){return"object"==typeof e&&null!==e&&(r(e)||o(e)||"object"==typeof e&&null!==e&&"role"in e&&"tool"===e.role||"object"==typeof e)}function l(e){return!!e&&[946600,71,106,776,386,56].includes(e.agent_id)}n.d(t,{JK:()=>a,K9:()=>m,PG:()=>o,Pb:()=>s,Qx:()=>r,SS:()=>l,VY:()=>p,X:()=>i,Yj:()=>c,cv:()=>h,mk:()=>g,v5:()=>u,wG:()=>d});let c={InProgress:"in_progress",Completed:"completed",Failed:"failed",Idle:"idle",WaitingForUser:"waiting_for_user",TimedOut:"timed_out",Cancelled:"cancelled",Queued:"queued"};function d(e){switch(e){case c.InProgress:return"In progress";case c.Completed:return"Ready for review";case c.Failed:return"Failed";case c.Idle:return"Idle";case c.WaitingForUser:return"Waiting for user";case c.TimedOut:return"Timed out";case c.Cancelled:return"Cancelled";case c.Queued:return"Queued";default:return"Unknown"}}function u(e){return["queued","in_progress"].includes(e.state)}function m(e){return e.state===c.Completed}function p(e){return!!e.isPending&&e.state===c.Queued}function g(e){return e.state===c.Cancelled}function h(e){return e.state===c.Failed}},81457:(e,t,n)=>{n.d(t,{l:()=>l});var r=n(74848),s=n(16522),a=n(77430),o=n(74807),i=n(86101);function l(e){let t,n=(0,s.c)(8),{size:l,animationType:c,loopAnimation:d,agentId:u}=e,m=void 0===l?32:l,p=void 0===c?"static":c,g=void 0!==d&&d,{data:h}=(0,i.B)(u??null),f=h?.avatar_url,_=h?.display_name||"Agent";if("copilot"===_.toLowerCase()||!f){let e;return n[0]!==p||n[1]!==g||n[2]!==m?(e=(0,r.jsx)(o.N,{size:m,animationType:p,loopAnimation:g}),n[0]=p,n[1]=g,n[2]=m,n[3]=e):e=n[3],e}return n[4]!==f||n[5]!==_||n[6]!==m?(t=(0,r.jsx)(a.r,{src:f,size:m,alt:_}),n[4]=f,n[5]=_,n[6]=m,n[7]=t):t=n[7],t}try{l.displayName||(l.displayName="AgentAvatar")}catch{}},82839:(e,t,n)=>{n.d(t,{U:()=>ey});var r=n(74848),s=n(16522),a=n(4817),o=n(11680),i=n(38621),l=n(96540),c=n(67154),d=n(98747),u=n(42455),m=n(44296),p=n(51120),g=n(97665),h=n(58612),f=n(69599),_=n(46747);function y(e){return e.id.startsWith("optimistic-")}var x=n(72931);let w={[c.Yj.Completed]:"success",[c.Yj.InProgress]:"pending",[c.Yj.Idle]:"pending",[c.Yj.WaitingForUser]:"pending",[c.Yj.Queued]:"pending",[c.Yj.TimedOut]:"failure",[c.Yj.Failed]:"failure",[c.Yj.Cancelled]:"failure"};function b(){(0,x.gd)()}var C=n(55910),j=n(86101);function N(e){let t,n,a,l=(0,s.c)(7),{errorMessage:c,workflowRunLink:d}=e,{session:u}=(0,m.Lg)(),{data:p}=(0,j.B)(u.agent_id),g=c||"An unexpected error occurred. For more details, see the detailed logs in GitHub Actions.",h=`${p?.display_name||"Agent"} stopped work due to an error`;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(i.StopIcon,{}),l[0]=t):t=l[0],l[1]!==d?(n=d&&(0,r.jsx)(o.l.PrimaryAction,{as:"a",href:d,children:"View detailed logs"}),l[1]=d,l[2]=n):n=l[2],l[3]!==g||l[4]!==h||l[5]!==n?(a=(0,r.jsx)(o.l,{"aria-label":"Session Error",title:h,description:g,variant:"critical",icon:t,primaryAction:n}),l[3]=g,l[4]=h,l[5]=n,l[6]=a):a=l[6],a}try{N.displayName||(N.displayName="SessionFailedBanner")}catch{}function v(e){let t,n,a,l=(0,s.c)(7),{cancellationMessage:c,workflowRunLink:d}=e,{session:u}=(0,m.Lg)(),{data:p}=(0,j.B)(u.agent_id),g=c||"The session was cancelled.",h=`${p?.display_name||"Agent"}'s work was cancelled`;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(i.SkipIcon,{}),l[0]=t):t=l[0],l[1]!==d?(n=d&&(0,r.jsx)(o.l.PrimaryAction,{as:"a",href:d,children:"View detailed logs"}),l[1]=d,l[2]=n):n=l[2],l[3]!==g||l[4]!==h||l[5]!==n?(a=(0,r.jsx)(o.l,{"aria-label":"Session Cancelled",title:h,description:g,variant:"warning",icon:t,primaryAction:n}),l[3]=g,l[4]=h,l[5]=n,l[6]=a):a=l[6],a}try{v.displayName||(v.displayName="SessionCancelledBanner")}catch{}var S=n(27566),E=n(74807),T=n(81457),I=n(45244),P=n(46251);let k=["Spinning up dev environment\u2026","Fueling the runtime engines\u2026","Clearing the airspace for MCP traffic\u2026","Cabin pressure stable. Almost ready\u2026","Reticulating goggles...","Calibrating flux capacitor...","Adjusting seatbelt\u2026","Waiting for clearance from GitHub tower\u2026","Final systems check, standing by\u2026","Takeoff soon\u2122\u2026"];function H(e){let t,n,a,o=(0,s.c)(5),{agentId:i}=e,[c,d]=(0,l.useState)(0),u=(0,l.useRef)(null);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>(u.current?(clearInterval(u.current),u.current=null):u.current=setInterval(()=>{d(R)},7e3),()=>{u.current&&(clearInterval(u.current),u.current=null)}),n=[],o[0]=t,o[1]=n):(t=o[0],n=o[1]),(0,l.useEffect)(t,n);let m=k[c]||"Loading\u2026";return o[2]!==i||o[3]!==m?(a=(0,r.jsx)(A,{message:m,agentId:i}),o[2]=i,o[3]=m,o[4]=a):a=o[4],a}function R(e){return e<k.length-1?e+1:e}function A(e){let t,n,a,o=(0,s.c)(7),{message:i,agentId:l}=e;return o[0]!==l?(t=(0,r.jsx)(T.l,{animationType:E.L.Thinking,loopAnimation:!0,agentId:l}),o[0]=l,o[1]=t):t=o[1],o[2]!==i?(n=(0,r.jsx)(I.b,{className:"color-fg-muted",children:i}),o[2]=i,o[3]=n):n=o[3],o[4]!==t||o[5]!==n?(a=(0,r.jsxs)(P.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:[t,n]}),o[4]=t,o[5]=n,o[6]=a):a=o[6],a}try{H.displayName||(H.displayName="BootingUpMessage")}catch{}try{A.displayName||(A.displayName="LoadingMessage")}catch{}var L=n(47801),G=n.n(L),$=n(8394),O=n.n($);function M(e,t){let n,r;return t?(n=!1,r=e.choices.map(e=>"assistant"===e.delta.role&&e.delta.content&&!e.delta.assistant_content&&(e.delta.tool_calls?.length??0)>0?(n=!0,{...e,delta:{...e.delta,assistant_content:e.delta.content}}):e),n?{...e,choices:r}:e):e}function V(e,t){if(Array.isArray(e)&&Array.isArray(t)&&e[0]?.hasOwnProperty("delta")&&t[0]?.hasOwnProperty("delta")){let n=[],r=new Map;for(let s of e.concat(t)){let e=s.delta.tool_calls?.[0];if(!e||!e.id){n.push(s);continue}let t=s,a=r.get(e.id);a&&(t=G()({},a,s)),r.set(e.id,t)}return n.concat(Array.from(r.values()))}}var B=n(26108),K=n(83494);function W(e){let t,n,a,o,c,d,u,m,p,g,h=(0,s.c)(24),{onSubmit:f,error:_}=e,[y,x]=(0,l.useState)(""),w=(0,l.useRef)(null);h[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{x(e.target.value);let t=e.target;t.style.height="auto",t.style.height=`${Math.min(t.scrollHeight,256)}px`},h[0]=t):t=h[0];let b=t;h[1]!==f||h[2]!==y?(n=()=>{y.trim()&&(f(y),x(""),w.current&&(w.current.style.height="auto"))},h[1]=f,h[2]=y,h[3]=n):n=h[3];let C=n;h[4]!==C?(a={"copilot-chat:send-message":C},h[4]=C,h[5]=a):a=h[5],h[6]!==y?(o=(0,r.jsx)("textarea",{ref:w,className:"SteeringCommandInput-module__steeringCommandInputTextarea--jpLKJ",value:y,onChange:b,placeholder:"What would you like to change?",autoComplete:"off",autoCorrect:"off",spellCheck:"false",rows:1}),h[6]=y,h[7]=o):o=h[7],h[8]!==y?(c=y.trim(),h[8]=y,h[9]=c):c=h[9];let j=!c;return h[10]!==C||h[11]!==j?(d=(0,r.jsx)(B.K,{className:"SteeringCommandInput-module__steeringCommandInputSubmitButton--PZsnB",variant:"invisible",size:"small",icon:i.PaperAirplaneIcon,"aria-label":"Send",disabled:j,onClick:C}),h[10]=C,h[11]=j,h[12]=d):d=h[12],h[13]!==o||h[14]!==d?(u=(0,r.jsxs)("div",{className:"SteeringCommandInput-module__steeringCommandInputWrapper--iM8oN",children:[o,d]}),h[13]=o,h[14]=d,h[15]=u):u=h[15],h[16]!==_?(m=_&&(0,r.jsxs)("div",{className:"SteeringCommandInput-module__errorMessage--N97CH",children:[(0,r.jsx)(i.AlertIcon,{className:"SteeringCommandInput-module__errorIcon--a2BvJ"}),(0,r.jsx)("span",{children:_})]}),h[16]=_,h[17]=m):m=h[17],h[18]!==u||h[19]!==m?(p=(0,r.jsxs)("div",{className:"SteeringCommandInput-module__steeringCommandInputContainer--Mez66",children:[u,m]}),h[18]=u,h[19]=m,h[20]=p):p=h[20],h[21]!==p||h[22]!==a?(g=(0,r.jsx)(K.tL,{commands:a,children:p}),h[21]=p,h[22]=a,h[23]=g):g=h[23],g}try{W.displayName||(W.displayName="SteeringCommandInput")}catch{}function D(e){let t,n=(0,s.c)(3),{onSubmit:a,error:o}=e;return n[0]!==o||n[1]!==a?(t=(0,r.jsx)("div",{className:"StickySteeringCommand-module__stickyContainer--HSHC7",children:(0,r.jsx)(W,{onSubmit:a,error:o})}),n[0]=o,n[1]=a,n[2]=t):t=n[2],t}try{D.displayName||(D.displayName="StickySteeringCommand")}catch{}let F="UserCommand-module__containerMuted--d2LWH";var U=n(77430),Y=n(55127),q=n.n(Y);function z({sessionIsActive:e,commandState:t,inLogs:n}){if(n)return"in_logs";let r=["queued","in_progress","completed"];if(!e&&r.includes(t))return"dismissed";if(r.includes(t))return"queued";if(["failed","dismissed"].includes(t))return t;throw Error(`Unexpected command state: ${t}`)}function Q(e){let{rawCommands:t,commandData:n}=e,s=[],{session:a}=(0,m.Lg)(),o=(0,c.v5)(a);for(let e of t){let t,r=function(e,t){let n=e.find(e=>`command-${e.external_id}`===t.source);return n&&"string"==typeof t.content?n:null}(n,e);r&&(t={state:z({sessionIsActive:o,commandState:r.state,inLogs:!0}),content:r.content},s.push(t))}return(0,r.jsx)(J,{commands:s})}function Z(e){let{commands:t}=e,n=[],{session:s}=(0,m.Lg)(),a=(0,c.v5)(s);for(let e of t){let t={state:z({sessionIsActive:a,commandState:e.state,inLogs:!1}),content:e.content};n.push(t)}return(0,r.jsx)(J,{commands:n})}function J(e){let t,n=(0,s.c)(2),{commands:a}=e;if(n[0]!==a){let e=[];for(let t of a){let n=e[e.length-1];n?.state===t.state?n.commands.push(t.content):e.push({state:t.state,commands:[t.content]})}t=(0,r.jsx)(r.Fragment,{children:e.map(X)}),n[0]=a,n[1]=t}else t=n[1];return t}function X(e,t){return(0,r.jsx)(ee,{contents:e.commands,state:e.state},t)}function ee(e){let t,n,a,o,i=(0,s.c)(11),{contents:l,state:c}=e;i[0]!==l.length||i[1]!==c?(t=function({state:e,count:t}){return({queued:{actionText:"Queued for Copilot",containerStateClass:F},failed:{actionText:`Unable to submit ${q()("message",t)}`,containerStateClass:F},in_logs:{},dismissed:{actionText:`Copilot finished the session before it could pick up ${q()("this",t)} ${q()("message",t)}`,containerStateClass:F}})[e]}({state:c,count:l.length}),i[0]=l.length,i[1]=c,i[2]=t):t=i[2];let d=t,u=d.actionText,m=d.containerStateClass,p=`mb-2 UserCommand-module__commandContainer--CDd84 ${m??""}`;return i[3]!==u?(n=u&&(0,r.jsx)("div",{className:"mb-2 UserCommand-module__actionText--i05T_",children:u}),i[3]=u,i[4]=n):n=i[4],i[5]!==l?(a=l.map(et),i[5]=l,i[6]=a):a=i[6],i[7]!==p||i[8]!==n||i[9]!==a?(o=(0,r.jsx)(P.B,{children:(0,r.jsxs)("div",{className:p,children:[n,a]})}),i[7]=p,i[8]=n,i[9]=a,i[10]=o):o=i[10],o}function et(e,t){return(0,r.jsx)(en,{content:e},t)}function en(e){let t,n,a,o=(0,s.c)(8),{content:i}=e,{sessionOwner:l}=(0,m.Lg)(),c=l?.login??"user";return o[0]!==i?(t=(0,r.jsx)("span",{className:"p-2 UserCommand-module__commandBox--VV0Is",children:i}),o[0]=i,o[1]=t):t=o[1],o[2]!==c||o[3]!==l?(n=l?.primaryAvatarUrl&&(0,r.jsx)(U.r,{src:l.primaryAvatarUrl,alt:`${c}'s avatar`,size:28,className:"ml-1"}),o[2]=c,o[3]=l,o[4]=n):n=o[4],o[5]!==t||o[6]!==n?(a=(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsxs)(P.B,{align:"center",direction:"horizontal",gap:"condensed",children:[t,n]})}),o[5]=t,o[6]=n,o[7]=a):a=o[7],a}try{Q.displayName||(Q.displayName="LogCommands")}catch{}try{Z.displayName||(Z.displayName="ChatCommands")}catch{}try{J.displayName||(J.displayName="ProcessedUserCommands")}catch{}try{ee.displayName||(ee.displayName="UserCommandGroup")}catch{}try{en.displayName||(en.displayName="UserCommand")}catch{}var er=n(35898),es=n(16425),ea=n(91747);let eo="SessionLogs-module__markdownWrapper--sELfE";var ei=n(36887),el=n(9238);function ec(e){let t,n,a,o,i,c,d=(0,s.c)(15),{group:u,groupHeaderFn:m,children:p}=e;d[0]!==u||d[1]!==m?(t=m(u),d[0]=u,d[1]=m,d[2]=t):t=d[2];let g=t,[h,_]=(0,l.useState)(!1);d[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,f.G7)("mission_control_use_tool_header_icons"),d[3]=n):n=d[3];let y=n;d[4]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{_(ed)},d[4]=a):a=d[4];let x=a;return d[5]!==g.leadingVisual||d[6]!==g.title||d[7]!==h?(o=(0,r.jsx)("div",{className:"ToolGroupRenderer-module__toolGroupHeader--LRTna",children:y?(0,r.jsx)(ei.M,{title:g.title,leadingVisual:g.leadingVisual,isError:!1,isPending:!1,isCollapsed:h,isGroupHeader:!0,onToggle:x}):(0,r.jsx)(el.E,{title:g.title,leadingVisual:g.leadingVisual,isError:!1,isPending:!1})}),d[5]=g.leadingVisual,d[6]=g.title,d[7]=h,d[8]=o):o=d[8],d[9]!==p||d[10]!==h?(i=!h&&(0,r.jsxs)("div",{className:"ToolGroupRenderer-module__toolGroupContentWrapper--SVplT",children:[(0,r.jsx)("div",{className:"ToolGroupRenderer-module__connectorLine--H4iqs"}),(0,r.jsx)("div",{className:"ToolGroupRenderer-module__toolGroupContent--QUddo",children:p})]}),d[9]=p,d[10]=h,d[11]=i):i=d[11],d[12]!==o||d[13]!==i?(c=(0,r.jsxs)("div",{className:"ToolGroupRenderer-module__toolGroupContainer--imVo8",children:[o,i]}),d[12]=o,d[13]=i,d[14]=c):c=d[14],c}function ed(e){return!e}try{ec.displayName||(ec.displayName="ToolGroupRenderer")}catch{}function eu(e){let t,n=(0,s.c)(5),{entries:a,groupingFn:o,groupHeaderFn:i,children:c}=e;if(n[0]!==c||n[1]!==a||n[2]!==i||n[3]!==o){let e=[],s=null;for(let t of a){let n=o(t,s);if(n.shouldGroup&&n.groupId&&s&&!s.metadata?.standalone&&s.id===n.groupId&&s)s.entries.push(t),n.groupMetadata&&(s.metadata={...s.metadata,...n.groupMetadata});else if(n.shouldGroup&&n.groupId){let r={id:n.groupId,entries:[t],metadata:n.groupMetadata};e.push(r),s=r}else{let n={id:`standalone-${t.entryId}-${t.choiceIndex}`,entries:[t],metadata:{standalone:!0}};e.push(n),s=n}}t=(0,r.jsx)(r.Fragment,{children:e.map(e=>{let t=e.metadata?.standalone===!0,n=e.entries[0],s=1===e.entries.length;return(t||s)&&n?(0,r.jsx)(l.Fragment,{children:c(n)},e.id):(0,r.jsx)(ec,{group:e,groupHeaderFn:i,children:e.entries.map(t=>c(t,{isInGroup:!0,groupId:e.id}))},e.id)})}),n[0]=c,n[1]=a,n[2]=i,n[3]=o,n[4]=t}else t=n[4];return t}try{eu.displayName||(eu.displayName="ToolGrouping")}catch{}var em=n(15759),ep=n(1587);let eg=(e,t)=>{let n=function(e){let{choice:t}=e,n=t?.delta;if(!n?.tool_calls||0===n.tool_calls.length)return null;let r=n.tool_calls[0];return r?.function?.name??r?.custom?.name??null}(e);if(!n||ep.xp.includes(n))return{shouldGroup:!1};let r="view"===n&&!function(e){let{choice:t}=e,n=t?.delta?.tool_calls?.[0];if(!n)return!1;let r=n.function?.arguments;if(!r)return!1;try{let e=JSON.parse(r);return!!(0,em.i)(e.path||"")?.length}catch{return!1}}(e),s=t?.metadata?.toolName,a=t?.metadata?.isViewRepository??!1;return"view"===n&&"view"===s&&r!==a?{shouldGroup:!1}:s===n&&!t?.metadata?.standalone&&t?{shouldGroup:!0,groupId:t.id,groupMetadata:{toolName:n,isViewRepository:r}}:n?{shouldGroup:!0,groupId:crypto.randomUUID(),groupMetadata:{toolName:n,isViewRepository:r}}:{shouldGroup:!1}};var eh=n(31283);let ef=e=>{let t=e.metadata?.toolName,n=e.entries.length;if(!t)return{title:`${n} operations`,leadingVisual:void 0};if(t in ep.lg){let e=ep.lg[t];if(e){var r,s;return r=e.getTitle(n),s=e.iconToolName,{title:r,leadingVisual:(0,eh.S)(s)}}}return{title:`${t}`,leadingVisual:(0,eh.S)(t)}},e_="assistant";function ey(e){var t;let n,a,i,C,E,T,I,P,k,R,L,G,$,B,K,W,F,U,Y,q=(0,s.c)(68),{logsPollingInterval:z,nwo:Q,batchCompletedSessions:J,currentUser:X,onLogsLoadingChange:ee}=e,{session:et,setMcpToolNameMappings:en}=(0,m.Lg)(),eo=(0,er.i)(),ei=X?.id===et.user_id||eo?.id===et.user_id,{variant:el}=(0,es._$)(),ec=(0,ea.u)("copilot_swe_agent_progress_commands"),ed=(0,f.G7)("mission_control_use_tool_header_icons"),{data:eu}=(0,j.B)(et.agent_id);q[0]!==z?(n={pollingInterval:z},q[0]=z,q[1]=n):n=q[1];let{data:em}=function(e){let t,n,r,a,o,i,l,d,x,w,b,C=(0,s.c)(29),{pollingInterval:j}=e,{session:N}=(0,m.Lg)(),v=N.id,S=(0,g.jE)();C[0]!==v?(t=["agent-session-commands",v],C[0]=v,C[1]=t):t=C[1];let E=t;C[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,f.G7)("copilot_agent_sessions_alive_updates"),C[2]=n):n=C[2];let T=n;C[3]!==v||C[4]!==S?(r=()=>{S.invalidateQueries({queryKey:["agent-session-commands",v]})},C[3]=v,C[4]=S,C[5]=r):r=C[5];let I=r;C[6]===Symbol.for("react.memo_cache_sentinel")?(a={maxWait:5e3},C[6]=a):a=C[6];let P=(0,_.d)(I,j,a);C[7]!==P?(o={onEvent:P,enableCreateEvents:!1,enableUpdateEvents:!0,enableLogUpdates:!1,enabled:T},C[7]=P,C[8]=o):o=C[8],(0,h.N)(o),C[9]!==v||C[10]!==S?(i=async e=>{let{queryKey:t}=e,n=await (0,p.I)({path:`/agents/sessions/${v}/commands?sort=created_at,asc`,method:"GET"});if(!n.ok)throw Error(`Failed to fetch commands: ${n.statusText}`);let r=await n.json(),s=S.getQueryData(t);if(s){let e=s.commands.filter(y);return{commands:[...r.commands,...e]}}return r},C[9]=v,C[10]=S,C[11]=i):i=C[11],C[12]!==j||C[13]!==N.state?(l=()=>!T&&("in_progress"===N.state||"queued"===N.state)&&j,C[12]=j,C[13]=N.state,C[14]=l):l=C[14],C[15]!==N?(d=(0,c.VY)(N),C[15]=N,C[16]=d):d=C[16];let k=!d;C[17]!==E||C[18]!==i||C[19]!==l||C[20]!==k?(x={queryKey:E,queryFn:i,refetchInterval:l,enabled:k},C[17]=E,C[18]=i,C[19]=l,C[20]=k,C[21]=x):x=C[21];let H=(0,u.b)(x);return C[22]!==H.data?.commands?(w=H.data?.commands??[],C[22]=H.data?.commands,C[23]=w):w=C[23],C[24]!==H.error||C[25]!==H.isError||C[26]!==H.isLoading||C[27]!==w?(b={data:w,isLoading:H.isLoading,isError:H.isError,error:H.error},C[24]=H.error,C[25]=H.isError,C[26]=H.isLoading,C[27]=w,C[28]=b):b=C[28],b}(n),[ep,eg]=(0,l.useState)(null);q[2]!==et.id?(a=async e=>{try{eg(null);let t=await (0,p.I)({path:`/agents/sessions/${et.id}/commands`,method:"POST",body:{content:e}});if(!t.ok){let e=`Failed to create command: ${t.statusText}`;eg(e);return}}catch{eg("Failed to submit command. Please try again.")}},q[2]=et.id,q[3]=a):a=q[3];let eh=a;q[4]!==J||q[5]!==ei||q[6]!==z?(i={logsPollingInterval:z,batchCompletedSessions:J,currentUserIsSessionOwner:ei},q[4]=J,q[5]=ei,q[6]=z,q[7]=i):i=q[7];let{data:ef,isLoading:e_,showPollingError:ey}=(0,d.jg)(i);t=et.state,(Y=(0,s.c)(3))[0]!==t?(F=()=>{let e=w[t];return(0,x.iD)(e),b},U=[t],Y[0]=t,Y[1]=F,Y[2]=U):(F=Y[1],U=Y[2]),(0,l.useEffect)(F,U),q[8]===Symbol.for("react.memo_cache_sentinel")?(C=(0,f.G7)("use_new_capi_logs_sessions"),q[8]=C):C=q[8];let ew=C,eb=function(e,t={}){if(!e)return[];let n=t.preserveAssistantNarration??!1,r=new Map;for(let t of e){let e=M(t,n),s=e,a=r.get(t.id);a&&(s=O()({},a,e,V)),r.set(t.id,s)}return[...r.values()]}((ef??[]).filter(c.Qx),{preserveAssistantNarration:ew});q[9]!==ef?(E=function(e,t={}){if(!e)return[];let n=t.preserveAssistantNarration??!1,r=new Map,s=null,a=[];for(let t of e)if((0,c.Qx)(t)){let e=M(t,n),o=e,i=r.get(t.id);i&&(o=O()({},i,e,V)),r.set(t.id,o),s=null,a=[]}else if((0,c.JK)(t)){let e=null,n=[];s&&a.length>0?(e=s,n=[...a,t]):(e=t.source,n=[t]),r.set(e,n),s=e,a=n}return[...r.values()]}(ef,{preserveAssistantNarration:ew}),q[9]=ef,q[10]=E):E=q[10];let eC=E;if(q[11]!==e_||q[12]!==ee?(T=()=>{ee?.(!!e_)},I=[e_,ee],q[11]=e_,q[12]=ee,q[13]=T,q[14]=I):(T=q[13],I=q[14]),(0,l.useEffect)(T,I),q[15]!==eC||q[16]!==en?(P=()=>{let e=function(e){let t={};for(let n of e)if((0,c.Qx)(n))for(let e of n.choices)for(let n of e.delta.tool_calls??[]){let e=n?.function;if(e&&"run_setup"===e.name&&"string"==typeof e.arguments)try{let n=JSON.parse(e.arguments.replace(/\n/g,"\\n"));n.details?.type==="mcp_setup"&&"object"==typeof n.details.toolNamesToDisplayNames&&Object.assign(t,n.details.toolNamesToDisplayNames??{})}catch{}}return t}(eC);Object.keys(e).length>0&&en(t=>({...t,...e}))},k=[eC,en],q[15]=eC,q[16]=en,q[17]=P,q[18]=k):(P=q[17],k=q[18]),(0,l.useEffect)(P,k),"queued"===et.state){let e,t,n,s;return q[19]!==et.agent_id?(e=(0,r.jsx)(H,{agentId:et.agent_id}),q[19]=et.agent_id,q[20]=e):e=q[20],q[21]!==em||q[22]!==ef?(t=eE(em,ef),q[21]=em,q[22]=ef,q[23]=t):t=q[23],q[24]!==t?(n=(0,r.jsx)(Z,{commands:t}),q[24]=t,q[25]=n):n=q[25],q[26]!==e||q[27]!==n?(s=(0,r.jsxs)(r.Fragment,{children:[e,n]}),q[26]=e,q[27]=n,q[28]=s):s=q[28],s}q[29]!==Q||q[30]!==et.workflow_run_id?(R=et.workflow_run_id?(0,S.A)(Q??null,et.workflow_run_id):void 0,q[29]=Q,q[30]=et.workflow_run_id,q[31]=R):R=q[31];let eN=R;q[32]!==e_||q[33]!==et.agent_id||q[34]!==ey?(L=e_&&!ey&&(0,r.jsx)(A,{message:"Loading\u2026",agentId:et.agent_id}),q[32]=e_,q[33]=et.agent_id,q[34]=ey,q[35]=L):L=q[35],q[36]!==ef?.length||q[37]!==e_||q[38]!==et.state||q[39]!==ey?(G=!e_&&!ey&&ef?.length===0&&"in_progress"!==et.state&&(0,r.jsx)("div",{children:"No logs to display"}),q[36]=ef?.length,q[37]=e_,q[38]=et.state,q[39]=ey,q[40]=G):G=q[40];let ev=!e_&&ef&&ef?.length>0&&(0,r.jsxs)(r.Fragment,{children:[ec?ed?(0,r.jsx)(ej,{preprocessedLogEntries:eC,commandsData:em}):eC?.map((e,t)=>(0,r.jsx)(eS,{logEntry:e,commandData:em??[],isNewLogParsingEnabled:ew},`logEntry-${t}`)):eb.map(e=>(0,r.jsx)(ex,{...e,isNewLogParsingEnabled:ew},`entry-${e.id}`)),ec&&(0,r.jsx)(Z,{commands:eE(em,ef)})]});return q[41]!==ey||q[42]!==eN?($=ey&&(0,r.jsx)(o.l,{title:"Error",hideTitle:!0,description:"There was an error loading the logs. Please try again later.",variant:"critical",primaryAction:eN?(0,r.jsx)(o.l.PrimaryAction,{as:"a",href:eN,children:"View detailed logs"}):void 0}),q[41]=ey,q[42]=eN,q[43]=$):$=q[43],q[44]!==eu?.display_name||q[45]!==ei||q[46]!==eh||q[47]!==ec||q[48]!==ef||q[49]!==e_||q[50]!==et.agent_id||q[51]!==et.state||q[52]!==ey||q[53]!==ep||q[54]!==el?(B="in_progress"===et.state&&!e_&&!ey&&(0,r.jsxs)(r.Fragment,{children:[ef&&ef.length>0?(0,r.jsx)(A,{message:`${eu?.display_name??"Agent"} is working\u{2026}`,agentId:et.agent_id}):(0,r.jsx)(H,{agentId:et.agent_id}),ec&&"default"===el&&ei&&(0,r.jsx)(D,{onSubmit:eh,error:ep})]}),q[44]=eu?.display_name,q[45]=ei,q[46]=eh,q[47]=ec,q[48]=ef,q[49]=e_,q[50]=et.agent_id,q[51]=et.state,q[52]=ey,q[53]=ep,q[54]=el,q[55]=B):B=q[55],q[56]!==et.error||q[57]!==et.state||q[58]!==ey||q[59]!==eN?(K=et.error?.message&&!ey&&("cancelled"===et.state?(0,r.jsx)(v,{cancellationMessage:et.error.message,workflowRunLink:eN??null}):(0,r.jsx)(N,{errorMessage:et.error.message,workflowRunLink:eN??null})),q[56]=et.error,q[57]=et.state,q[58]=ey,q[59]=eN,q[60]=K):K=q[60],q[61]!==L||q[62]!==G||q[63]!==ev||q[64]!==$||q[65]!==B||q[66]!==K?(W=(0,r.jsxs)(r.Fragment,{children:[L,G,ev,$,B,K]}),q[61]=L,q[62]=G,q[63]=ev,q[64]=$,q[65]=B,q[66]=K,q[67]=W):W=q[67],W}function ex(e){let t,n,a=(0,s.c)(7),{choices:o,isNewLogParsingEnabled:i}=e;if(a[0]!==o||a[1]!==i){let e;a[3]!==i?(e=(e,t)=>(0,r.jsx)(ew,{choice:e,isNewLogParsingEnabled:i},`choice-${t}`),a[3]=i,a[4]=e):e=a[4],t=o.map(e),a[0]=o,a[1]=i,a[2]=t}else t=a[2];return a[5]!==t?(n=(0,r.jsx)(r.Fragment,{children:t}),a[5]=t,a[6]=n):n=a[6],n}function ew(e){let t,n=(0,s.c)(8),{choice:a,isNewLogParsingEnabled:o,isInGroup:i}=e,{mcpToolNameMappings:l}=(0,m.Lg)();if(o){let e;return n[0]!==a||n[1]!==i||n[2]!==l?(e=function(e,t,n){let s=(e.delta.tool_calls??[])[0],a=s?.function?.name??s?.custom?.name,o=!!s&&!!s.id&&!!a,i=e.delta.role===e_?e.delta.assistant_content??(o?void 0:e.delta.content):void 0,l=e.delta.reasoning_text?(0,r.jsx)(eC,{content:e.delta.reasoning_text}):null;if(!o){let e=i?(0,r.jsx)(eb,{content:i}):null;return e||l?(0,r.jsxs)(r.Fragment,{children:[e,l]}):null}let c=!!s?.custom,d=c?s?.custom?.input:s?.function?.arguments,u={},m=!1;if(c)u="string"==typeof d?{content:d}:{};else if("string"==typeof d)try{u=JSON.parse(d.replace(/\n/g,"\\n"))}catch{m=!0}else d&&(u=d);let p=c||"run_setup"!==a||m?void 0:u,g=p?.details?.type==="mcp_setup",h=i&&!g?(0,r.jsx)(eb,{content:i}):null,f=m?(0,r.jsx)(C.NL,{title:"Error parsing tool call arguments",isError:!0,children:(0,r.jsx)(C.cD,{language:"text",markdown:"string"==typeof d?d:JSON.stringify(d??{},null,2)})}):(0,r.jsx)(C.sr,{name:a,delta:e.delta,args:u,mcpToolNameMappings:t,isInGroup:n});return(0,r.jsxs)(r.Fragment,{children:[h,l,f]})}(a,l,i),n[0]=a,n[1]=i,n[2]=l,n[3]=e):e=n[3],e}return n[4]!==a||n[5]!==i||n[6]!==l?(t=function(e,t,n){let s=(e.delta.tool_calls??[])[0];if(!s&&e.delta.content&&e.delta.role===e_)return(0,r.jsx)(eb,{content:e.delta.content});let a=!!s?.custom,o=s?.function?.name??s?.custom?.name,i=a?s?.custom?.input:s?.function?.arguments;if(!s||!s.id||!o)return null;let l={},c=!1;if(a)l="string"==typeof i?{content:i}:{};else if("string"==typeof i)try{l=JSON.parse(i.replace(/\n/g,"\\n"))}catch{c=!0}else i&&(l=i);let d=c?(0,r.jsx)(C.NL,{title:"Error parsing tool call arguments",isError:!0,children:(0,r.jsx)(C.cD,{language:"text",markdown:"string"==typeof i?i:JSON.stringify(i??{},null,2)})}):(0,r.jsx)(C.sr,{name:o,delta:e.delta,args:l,mcpToolNameMappings:t,isInGroup:n});return e.delta.reasoning_text?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eC,{content:e.delta.reasoning_text}),d]}):d}(a,l,i),n[4]=a,n[5]=i,n[6]=l,n[7]=t):t=n[7],t}function eb(e){let t,n,o,l=(0,s.c)(9),{content:c}=e;l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.G7)("mission_control_use_tool_header_icons"),l[0]=t):t=l[0];let d=t,u=c;if(l[1]!==c){n=Symbol.for("react.early_return_sentinel");e:if(c=u.replace(/<pr_title>.*?<\/pr_title>|<pr_description>.*?<\/pr_description>|<empty>/gs,"").trim(),d){let e,t;if(!(c=c.trim())){n=null;break e}l[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("span",{className:"SessionLogs-module__copilotMessageIcon--HWLHB",children:(0,r.jsx)(i.DotFillIcon,{size:8})}),l[4]=e):e=l[4];let s=(0,r.jsx)(a.To,{markdown:c});l[5]!==s?(t=(0,r.jsxs)("div",{className:"SessionLogs-module__copilotMessage--VKS0n",children:[e,(0,r.jsx)("div",{className:"SessionLogs-module__copilotMessageContent--QjEvi",children:s})]}),l[5]=s,l[6]=t):t=l[6],n=t;break e}l[1]=c,l[2]=n,l[3]=c}else n=l[2],c=l[3];return n!==Symbol.for("react.early_return_sentinel")?n:(l[7]!==c?(o=(0,r.jsx)("div",{className:eo,children:(0,r.jsx)(a.To,{markdown:c})}),l[7]=c,l[8]=o):o=l[8],o)}function eC(e){let t,n=(0,s.c)(2),{content:o}=e;return n[0]!==o?(t=(0,r.jsx)("div",{className:eo,children:(0,r.jsx)(a.To,{markdown:o})}),n[0]=o,n[1]=t):t=n[1],t}function ej(e){let t,n,a,o,i,l,d=(0,s.c)(13),{preprocessedLogEntries:u,commandsData:m}=e;d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.G7)("use_new_capi_logs_sessions"),d[0]=t):t=d[0];let p=t;if(d[1]!==m||d[2]!==u){let e,t=u.filter(c.Qx),s=u.filter(ev);n=t.flatMap(eN),d[5]!==m?(e=(e,t)=>{let n=`logEntry-${t}`;return(0,r.jsx)(eS,{logEntry:e,commandData:m??[],isNewLogParsingEnabled:p},n)},d[5]=m,d[6]=e):e=d[6],a=s.map(e),d[1]=m,d[2]=u,d[3]=n,d[4]=a}else n=d[3],a=d[4];return d[7]===Symbol.for("react.memo_cache_sentinel")?(o=(e,t)=>(0,r.jsx)(ew,{choice:e.choice,isNewLogParsingEnabled:p,isInGroup:t?.isInGroup},`${e.entryId}-choice-${e.choiceIndex}`),d[7]=o):o=d[7],d[8]!==n?(i=(0,r.jsx)(eu,{entries:n,groupingFn:eg,groupHeaderFn:ef,children:o}),d[8]=n,d[9]=i):i=d[9],d[10]!==a||d[11]!==i?(l=(0,r.jsxs)(r.Fragment,{children:[a,i]}),d[10]=a,d[11]=i,d[12]=l):l=d[12],l}function eN(e){return e.choices.map((t,n)=>({choice:t,entryId:e.id,choiceIndex:n}))}function ev(e){return!(0,c.Qx)(e)}function eS(e){let t=(0,s.c)(10),{logEntry:n,commandData:a,isNewLogParsingEnabled:o}=e;if((0,c.Pb)(n)){let e;return t[0]!==a||t[1]!==n?(e=(0,r.jsx)(Q,{rawCommands:n,commandData:a}),t[0]=a,t[1]=n,t[2]=e):e=t[2],e}if((0,c.Qx)(n)){let e,s;if(t[3]!==o||t[4]!==n.choices){let s;t[6]!==o?(s=(e,t)=>(0,r.jsx)(ew,{choice:e,isNewLogParsingEnabled:o},`choice-${t}`),t[6]=o,t[7]=s):s=t[7],e=n.choices.map(s),t[3]=o,t[4]=n.choices,t[5]=e}else e=t[5];return t[8]!==e?(s=(0,r.jsx)(r.Fragment,{children:e}),t[8]=e,t[9]=s):s=t[9],s}return null}function eE(e,t){return e?.length&&t?e.filter(e=>!t.some(t=>{var n,r;return n=e,r=t,(0,c.PG)(r)&&r.source&&r.source===`command-${n.external_id}`})):[]}try{ey.displayName||(ey.displayName="SessionLogs")}catch{}try{ex.displayName||(ex.displayName="LogEntry")}catch{}try{ew.displayName||(ew.displayName="LogEntryChoice")}catch{}try{eb.displayName||(eb.displayName="CopilotMessage")}catch{}try{eC.displayName||(eC.displayName="ReasoningText")}catch{}try{ej.displayName||(ej.displayName="GroupedSessionLogs")}catch{}try{eS.displayName||(eS.displayName="LogEntryRenderer")}catch{}},88984:(e,t,n)=>{n.d(t,{Q:()=>i,w:()=>l});var r=n(74848),s=n(16522),a=n(38621),o=n(67154);function i(e){switch(e){case o.Yj.InProgress:return(0,r.jsx)(l,{});case o.Yj.Completed:return(0,r.jsx)(a.CheckCircleFillIcon,{className:"fgColor-success","aria-label":"Completed"});case o.Yj.Failed:case o.Yj.TimedOut:return(0,r.jsx)(a.XCircleFillIcon,{className:"fgColor-danger","aria-label":"Failed"});case o.Yj.Idle:return(0,r.jsx)(a.DotFillIcon,{className:"fgColor-attention","aria-label":"Idle"});case o.Yj.WaitingForUser:return(0,r.jsx)(a.QuestionIcon,{className:"fgColor-attention","aria-label":"Waiting for user"});case o.Yj.Cancelled:return(0,r.jsx)(a.SquareFillIcon,{className:"fgColor-muted","aria-label":"Cancelled"});case o.Yj.Queued:return(0,r.jsx)(a.ClockIcon,{className:"fgColor-attention","aria-label":"Queued"});default:return null}}function l(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)("svg",{"aria-label":"Currently running",width:"16px",height:"16px",fill:"none",viewBox:"0 0 16 16",className:"anim-rotate",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fill:"none",stroke:"var(--color-fg-attention, #bf8700)",strokeWidth:"2",d:"M3.05 3.05a7 7 0 1 1 9.9 9.9 7 7 0 0 1-9.9-9.9Z",opacity:".5"}),(0,r.jsx)("path",{fill:"var(--color-fg-attention, #bf8700)",fillRule:"evenodd",d:"M8 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Z",clipRule:"evenodd"}),(0,r.jsx)("path",{fill:"var(--color-fg-attention, #bf8700)",d:"M14 8a6 6 0 0 0-6-6V0a8 8 0 0 1 8 8h-2Z"})]}),t[0]=e):e=t[0],e}try{l.displayName||(l.displayName="InProgressSpinner")}catch{}},98747:(e,t,n)=>{n.d(t,{jg:()=>h});var r=n(42455),s=n(67154),a=n(86339),o=n(96540),i=n(44296),l=n(78314),c=n(51120),d=n(97665),u=n(58612),m=n(46747),p=n(69599);function g(e,t,n){return["agent-pr-session-logs",e,t,n]}function h({logsPollingInterval:e,batchCompletedSessions:t=!0,currentUserIsSessionOwner:n}){let{session:h,logs:f,logsAreLoading:_}=(0,i.Lg)(),y=(0,l.t)(),x=(0,d.jE)(),w=(0,p.G7)("copilot_agent_sessions_alive_updates"),[b,C]=(0,o.useState)(0),j=h.id,N=[s.Yj.Completed,s.Yj.Failed,s.Yj.Cancelled].map(e=>e.toLowerCase()).includes(h.state),v=t&&n&&N,S=(0,o.useCallback)(()=>{x.invalidateQueries({queryKey:g(j,y.ownerLogin,y.name)})},[x,j,y.ownerLogin,y.name]),E=(0,m.d)(S,e,{maxWait:5e3});(0,u.N)({onEvent:E,enableCreateEvents:!1,enableUpdateEvents:!1,enableLogUpdates:!0,enabled:w});let T=(0,r.b)({queryKey:g(j,y.ownerLogin,y.name),queryFn:async()=>{let e=await (0,c.I)({path:`/agents/sessions/${j}/logs`,streamingResponse:!0}),t=e.body?.getReader();if(!t)throw Error("No reader found in response body");let n=[];try{for await(let e of new a.X(t).stream())if((0,s.X)(e))n.push(e);else throw Error(`Invalid log entry received: ${JSON.stringify(e)}`);return C(0),n}catch(e){throw Error(`Error while streaming logs. Error: ${e}`)}},refetchInterval:!w&&h.state!==s.Yj.Completed&&e,enabled:!(0,s.VY)(h)&&!v&&b<10});(0,o.useEffect)(()=>{T.error&&C(e=>e+1)},[T.error]);let I=T.error&&b>=10;return v&&(f?.length||_)?{data:f,isLoading:_,error:!1,showPollingError:I}:{...T,showPollingError:I}}}}]);
//# sourceMappingURL=98224-95d1aa3ed101.js.map